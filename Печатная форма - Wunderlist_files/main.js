define("wunderbits/helpers/console", [ "wunderbits/global" ], function(e) {
for (var t, i = function() {}, n = [ "assert", "clear", "count", "debug", "dir", "dirxml", "error", "exception", "group", "groupCollapsed", "groupEnd", "info", "log", "markTimeline", "profile", "profileEnd", "table", "time", "timeEnd", "timeStamp", "trace", "warn" ], a = n.length, o = e.console = e.console || {}; a--; ) t = n[a], 
o[t] || (o[t] = i);
return o;
}), define("wunderbits/BaseSingleton", [ "project!core/WBSingleton", "project!core/mixins/WBEventsMixin", "project!core/mixins/WBBindableMixin", "project!core/mixins/WBDestroyableMixin", "project!core/mixins/WBUtilsMixin" ], function(e, t, i, n, a) {
return e.extend({
mixins: [ t, i, n, a ]
});
}), define("wunderbits/WBEnvironmentModel", [ "./lib/dependencies", "./global", "vendor/ua-detector", "wunderbits/BaseSingleton" ], function(e, t, i, n, a) {
var o, r, s = e._, l = e.$, d = l(t), c = t.document, u = t.navigator, p = window.DocumentTouch, m = u.getUserMedia || u.webkitGetUserMedia || u.mozGetUserMedia || u.msGetUserMedia, g = {}, f = n.extend({
init: function() {
return f.on("destroy", f._onDestroy), f.setupResizeEvents(), f._bindConnectionEvents(), 
f._gatherEnvInfo(), f._isOnline = !0, l("body").addClass(g.browser).addClass("animate").addClass("platform-" + g.OS), 
l.fx.off = !1, f;
},
setupResizeEvents: function() {
d.length && (f.bindTo(d, "resize", "_onWindowResize"), f.bindTo(d, "onorientationchange", "_onWindowResize")), 
f._onWindowResize();
},
_gatherEnvInfo: function() {
var e = this, n = t.chrome;
s.extend(g, {
language: u.userLanguage || u.language || "en-US",
UA: u.userAgent,
platform: u.platform,
referer: c.referer || "",
OS: i.os.toLowerCase(),
browser: i.browser.toLowerCase(),
version: i.version,
retina: window.devicePixelRatio >= 2,
touch: e.isTouchDevice(),
chromeApp: !!(n && n.app && n.app.runtime),
isNodeWebkit: "object" == typeof process,
firefoxApp: !1
});
},
getBrowser: function() {
return g.browser;
},
_onWindowResize: function() {
var e = this;
e._setupSwipeDistance(), e.isTouchDevice();
},
_onDestroy: function() {
d.length && d.off("resize", f._onDocumentResize, f);
},
_setupSwipeDistance: function() {
var e = this, t = {}, i = l.event.swipe, n = e.getCurrentWidth();
t.min = 100, t.max = n, t.delay = 800, s.extend(i, t);
},
_onOnlineConnection: function() {
f._isOnline || (f._isOnline = !0, f.trigger("online"));
},
_onOfflineConnection: function() {
f._isOnline && (f._isOnline = !1, f.trigger("offline"));
},
_bindConnectionEvents: function() {
var e = l(c);
e.ajaxSuccess(f._onOnlineConnection), e.ajaxError(function(e, t) {
0 === t.status && f._onOfflineConnection();
}), d.length && (f.bindTo(d, "online", "_onOnlineConnection"), f.bindTo(d, "offline", "_onOfflineConnection"));
},
getCurrentWidth: function() {
return d.length && d.width();
},
isOnline: function() {
return !!f._isOnline;
},
isRetina: function() {
return g.retina;
},
isMobile: function() {
var e = t.navigator.userAgent, i = [ "Android", "webOS", "iPhone", "iPad", "iPod", "Blackberry", "Windows Phone" ], n = new RegExp(i.join("|"), "i");
return e.match(n);
},
isOpera: function() {
return "opera" === g.browser;
},
isFirefox: function() {
return "firefox" === g.browser;
},
isFirefoxApp: function() {
return g.firefoxApp;
},
isSafari: function() {
return "safari" === g.browser;
},
isChrome: function() {
return "chrome" === g.browser;
},
isNodeWebkit: function() {
return g.isNodeWebkit;
},
isChromeApp: function() {
return g.chromeApp;
},
isPackagedApp: function() {
return g.firefoxApp || g.chromeApp || g.isNodeWebkit;
},
isIE: function() {
return !!f.getIEVersion();
},
isIE9: function() {
var e = f.isIE();
return e && 9 === f.getIEVersion();
},
getIEVersion: function() {
return r === a && (r = function() {
for (var e = 3, t = c.createElement("div"), i = t.getElementsByTagName("i"); (t.innerHTML = "<!--[if gt IE " + ++e + "]><i></i><![endif]-->") && i[0]; ) ;
return e > 4 ? e : !1;
}()), r === !1 && (r = "explorer" === g.browser ? 10 : !1), r === !1 && "windows" === g.OS && /Trident/.test(g.UA) && (r = g.version), 
r;
},
isWindows: function() {
return "windows" === g.OS;
},
isMac: function() {
return "mac" === g.OS;
},
isChromeOS: function() {
return /cros/i.test(u.userAgent);
},
isArmProcessor: function() {
return /armv/i.test(u.userAgent);
},
hasTouchEvents: function() {
return !!("ontouchstart" in window || p && c instanceof p || u.msMaxTouchPoints);
},
isTouchDevice: function() {
var e = this;
return o === a && (o = e.hasTouchEvents(), g.isTouchDevice = o), o;
},
getEnvIdentifier: function() {
var e = this;
return (e.isChromeOS() ? "chromeos" : g.OS) + "_" + g.browser + "_touch";
},
isSpeechEnabled: function() {
var e = this;
return e.speechRecognition = t.SpeechRecognition || t.webkitSpeechRecognition || null, 
!!e.speechRecognition;
},
isUserMediaSupported: function() {
return !!m;
},
getUserMedia: function() {
return m.apply(u, arguments);
},
isPointerEnabled: function() {
return f.isPointerDevice = u.msPointerEnabled !== a && u.msMaxTouchPoints > 0 ? !0 : !1, 
f.isPointerDevice;
},
getEnvInfo: function() {
return s.clone(g);
},
relevantExtensionLink: function() {
var e = this;
return e.isSafari() ? "http://wunderlist2-static.s3.amazonaws.com/extensions/add-to-wunderlist.safariextz" : e.isFirefox() ? "https://addons.mozilla.org/en-us/firefox/addon/add-to-wunderlist/" : e.isChrome() ? "https://chrome.google.com/webstore/detail/add-to-wunderlist/dmnddeddcgdllibmaodanoonljfdmooc?hl=en" : !1;
}
});
return f;
}), define("wunderbits/WBRuntime", [ "./lib/dependencies", "./global", "./helpers/console", "./WBEnvironmentModel", "project!core/WBSingleton", "project!core/mixins/WBEventsMixin", "project!core/mixins/WBBindableMixin" ], function(e, t, i, n, a, o, r, s) {
var l = a.extend({
mixins: [ o, r ],
init: function() {
var a = this;
a.global = t, a.console = i, a._ = e._, a.$ = e.$, a.Backbone = e.Backbone, a.w_ = e.w_, 
a.env = n.init(), a.debouncedTriggerResize = a._.debounce(a.triggerResize, 250), 
a.bindTo(a.$(t), "resize", a.debouncedTriggerResize);
},
debouncedTriggerResize: s,
triggerResize: function() {
var e = this;
e.trigger("window:resize");
},
currentRoute: function() {
var e = this;
return (e.global.location.hash || "").replace("#/", "").replace("#", "");
},
currentDomain: function() {
var e = this;
return e.global.location.hostname || "";
}
});
return l.init(), l;
}), define("wunderbits/mixins/WBTimelineMixin", [ "project!core/WBMixin", "../lib/dependencies", "project!core/lib/createUID", "project!core/WBDeferred" ], function(e, t, i, n) {
var a = t.Backbone, o = t.w_;
return e.extend({
initialize: function() {
var e = this;
e.timelineEnabled = !1, e.timelineModelHasFetched = new n(), e.timelineModel = new a.Model({
id: "timeline"
}), e.timelineModel.storeName = "storage", e.bindTo(e, "timeline:start", e.logStart), 
e.bindTo(e, "timeline:end", e.logEnd), e.bindTo(e, "timeline:api", e.logAPI);
var t = e.bindTo(e, "sync:started", function(i, n) {
"login" === n && (e.logTimepoint("login_load_app", "end"), e.unbindFrom(t));
});
e.bindOnceTo(e, "lists:ready", function() {
e.logTimepoint("lists_loaded", "end");
}), e.bindOnceTo(e, "before:sync:ended", function() {
e.logTimepoint("all_api_data_loaded", "start");
});
var i = e.bindTo(e, "sync:ended", function(t, n) {
("matryoshka" === n || "login" === n) && (e.logTimepoint("initial_sync_processed", "start"), 
e.unbindFrom(i));
});
e.bindOnceTo(e, "taskCounts:rendered", function() {
e.logTimepoint("task_counts_rendered", "start");
});
},
logStart: function(e) {
var t = this;
t.logTimepoint(e, "start");
},
logEnd: function(e) {
var t = this;
t.logTimepoint(e, "end");
},
logTimepoint: function(e, t) {
var i = this;
if (i.isTimelineEnabled()) {
var n = i.now();
i.fetchTimelineData().done(function() {
var a = i.timelineModel.get(e) || {}, r = {};
if (r[t] = n, "end" === t && a.start) r.duration = n - a.start; else if ("end" === t) return;
var s = {};
s[e] = o.merge({}, a, r), i.timelineModel.save(s);
});
}
},
duration: function(e, t) {
var i = this;
i.isTimelineEnabled() && i.fetchTimelineData().done(function() {
var n = i.timelineModel.get(e) || {}, a = {
duration: t
}, r = {};
r[e] = o.merge({}, n, a), i.timelineModel.save(r);
});
},
logAPI: function(e) {
var t = this, n = {};
t.isTimelineEnabled() && (n["apiBenchmark" + i()] = e, t.fetchTimelineData().done(function() {
t.timelineModel.save(n);
}));
},
now: function() {
return Date.now();
},
fetchTimelineData: function() {
var e = this;
return "pending" !== e.timelineModelHasFetched.state() || e.timelineFetchedOnce || (e.timelineFetchedOnce = !0, 
e.timelineModel.fetch({
success: function() {
e.timelineModelHasFetched.resolve();
},
error: function() {
e.timelineModelHasFetched.resolve();
}
})), e.timelineModelHasFetched.promise();
},
resetTimeline: function() {
this.timelineModel.clear().save({
id: "timeline"
});
},
isTimelineEnabled: function() {
return !!this.timelineEnabled;
},
enableTimeline: function() {
this.timelineEnabled = !0;
},
disableTimeline: function() {
this.timelineEnabled = !1;
}
});
}), define("application/runtime", [ "config", "wunderbits/WBRuntime", "vendor/visibly", "wunderbits/mixins/WBTimelineMixin", "project!core/WBDeferred", "project!core/WBStateModel", "project!core/lib/when" ], function(e, t, i, n, a, o, r, s) {
var l, d, c, u, p = t, m = t.extend({
mixins: [ n ],
init: function() {
var t = this;
if (l = t.$, d = t._, c = t.Backbone, t.started = u = Date.now(), t.bindTo(t, "db:allDataLoaded", function() {
var e = Date.now() - t.started;
m.trigger("analytics:Database:allDataLoaded", "done", e);
}), t.state = new o({
online: !1,
syncSuccessful: !0,
beforeDone: !1,
syncCount: 0,
lastAuthRoute: "",
lastSearchTerm: ""
}), d.each([ "on", "off", "trigger", "once", "publish", "unpublish", "unpublishAll" ], function(e) {
t[e] = p[e];
}), t.config = e, e.benchmarks && (t.enableTimeline(), "benchmarking" === e.name)) {
var n = t.global;
n.runtime = t, n.console.log("exposing runtime");
}
if (e.features) {
var r;
for (var s in e.features) e.features.hasOwnProperty(s) && (r = e.features[s] === !1 ? "disabled" : "enabled", 
m["feature_" + s + "_" + r] = !0);
}
t.setupStorageEvents(), t.smartLists = [ "assigned", "starred", "today", "week", "all", "completed" ], 
t.hasSynced = new a(), t.hasRouted = new a(), t.bindOnceTo(t, "routed", t.hasRouted.resolve, t.hasRouted);
var g = new a();
t.ready = g.promise();
var f = new a();
t.interfaceReady = f.promise(), t._createDataPromises(g), t.bindTo(t, "browser:render", function(e) {
t.listId = e;
}), t.bindTo(t, "sync:ended", function(e, i, n) {
if ("matryoshka" === i || "login" === i) {
var a = Date.now();
t.state.set("syncCount", t.state.attributes.syncCount + 1), t.state.set("syncSuccessful", n), 
t.state.set("lastSync", a), t.user.save({
lastSync: a
}, {
fromSync: !0
});
}
}), t.bindOnceTo(t, "sync:ended", function() {
t.hasSynced.resolve();
}), t.bindTo(t, "browser:selectionChanged", function(e) {
t.selectedTaskCount = e.selected;
}), t.bindTo(t, "focus:changed", function(e) {
t.focus = e;
}), t.bindTo(t, "set:loadContext", function(e) {
t.loadContext = e;
}), t.bindTo(t, "update:lastAuthRoute", function(e) {
t.state.set("lastAuthRoute", e);
}), t.bindTo(t, "before:sync:ended", function() {
t.state.set("beforeDone", !0);
}), t.bindTo(t, "set:printType", function(e) {
t.printType = e;
}), t.bindTo(t, "interface:ready", function() {
f.resolve(), t.env.isIE9() && t.trigger("ie9:upgradeAlert");
}), t.bindTo(t, "search:start", function(e) {
t.currentSearchTerm = e, t.state.set("inSearchState", !!e);
}), t.bindTo(t, "search:end search:cancel", function() {
t.currentSearchTerm = "", t.state.set("lastSearchTerm", ""), t.state.set("inSearchState", !1);
}), t._isVisible = !i.hidden(), i.onVisible(function() {
t._isVisible = !0, t.trigger("page:visible");
}), i.onHidden(function() {
t._isVisible = !1, t.trigger("page:hidden");
}), t.bindTo(t, "time:nextHour", t.reportHeapSize), t.bindOnceTo(t, "sync:ended", t.reportHeapSize);
var b = l("body"), h = b.hasClass("wlapp-parent");
h ? t.isFrame() && b.removeClass("wlapp-parent").addClass("wlapp-frame") : b.addClass("wlapp-embedded");
var v = d.bind(t.handleWindowMessage, t);
window.addEventListener && window.addEventListener("message", v, !1);
},
setupStorageEvents: function() {
var e = this, t = e.global;
if (!e.env.isChromeApp()) {
var i = t.localStorage;
i && t.addEventListener && t.addEventListener("storage", function(t) {
var i = "storage:" + t.key, n = t.newValue;
e.trigger(i, n);
}, !1);
}
},
handleWindowMessage: function(e) {
var t = this;
if ("string" == typeof e.data) {
var i = e.data.split(":"), n = i.shift();
"WLApp" === n && i.length && t.trigger(i.join(":"));
}
},
_createDataPromises: function(e) {
var t = this, i = new a(), n = new a(), o = new a(), s = new a();
t.bindOnceTo(t, "set:root", function(e) {
t.root = e, e.hasFetched.done(i.resolve, i);
}), t.bindOnceTo(t, "set:user", function(e) {
t.user = e, e.hasFetched.done(n.resolve, n), t.trigger("user:set");
}), t.bindOnceTo(t, "set:settings", function(e) {
t.settings = e, t.bindOnceTo(t, "settings:ready", o.resolve, o);
}), t.bindOnceTo(t, "set:language", function(e) {
t.language = e, e.ready.done(s.resolve, s);
}), r(n, o, s).done(e.resolve, e);
},
supressSidebarClose: function(e) {
var t = this;
return e === s ? t._supressSidebarClose : (t._supressSidebarClose = e, void t.global.setTimeout(function() {
t._supressSidebarClose = !1;
}, 100));
},
enableAnimations: function() {
var e = this;
e.env._enableAnimations();
},
isVisible: function() {
var e = this;
return e._isVisible;
},
isInstalledOnChrome: function() {
var e = this, t = e.global.chrome;
return t && t.app && t.app.isInstalled;
},
isOnListRoute: function() {
return /^lists\//.test(this.currentRoute());
},
isOnTaskRoute: function() {
return /^tasks\//.test(this.currentRoute());
},
getIdFromRoute: function() {
return this.currentRoute().split("/")[1];
},
getHeapSizeMB: function() {
var e = this, t = e.global, i = t.performance, n = i && i.memory, a = n && n.usedJSHeapSize;
return a && Math.round(a / 1024 / 1024);
},
reportHeapSize: function() {
var e = this, t = e.getHeapSizeMB();
if (t > 0 && d.isFunction(Date.now)) {
e.trigger("analytics:Performance:UsedHeapSize", t);
var i = Math.round((Date.now() - u) / 1e3 / 60);
e.trigger("analytics:Performance:MinutesRunning", i);
}
},
shouldShowIYF: function() {
var e = this, t = e.settings.attributes, i = "true" === t.campaign_iyf2_sidebar_button || "true" === t.campaign_iyf2_notification;
return !e.env.isPackagedApp() && !e.user.isPro() && i;
},
openUrl: function(e, t) {
var i = this, n = i.global, a = n.document;
if (i.env.isPackagedApp()) {
var o = a.createElement("a");
o.href = e, o.target = "_blank", a.body.appendChild(o), o.click(), n.setTimeout(function() {
a.body.removeChild(o);
}, 200);
} else t ? n.open(e, "_blank") : n.location.href = e;
},
reload: function(e, t) {
var i = this;
if (e = e || "", !i.reloading) {
t === s && (t = !0), i.reloading = !0;
var n = i.global;
if (m.env.isChromeApp() || m.env.isNodeWebkit()) i.trigger("reload", e); else {
var a = n.location, o = n.history;
t || "/" === a.pathname ? (c.history.stop(), e && "/" !== e[0] && (e = "/" + e), 
o.replaceState && o.replaceState(null, "noParams", a.pathname + a.hash), a.hash = e, 
a.reload()) : a.href = "/#" + e;
}
}
},
isNightly: function() {
var e = this.config.name;
return !!(e && e.indexOf("nightly") >= 0);
},
isDev: function() {
var e = this.config.name;
return "dev" === e || !e;
},
isLabsEnabled: function(e) {
var t = this, i = t.user, n = t.config.name, a = "nightly" === n && i.isPro(), o = "production" !== n && /@6wunderkinder.com$/.test(i.attributes.email);
return a || o ? e ? "true" === t.settings.attributes["labs_" + e + "_enabled"] : !0 : !1;
},
isFrame: function() {
return m.global !== m.global.top;
},
isEmbedded: function() {
return l("body").hasClass("wlapp-embedded");
},
isLocalDev: function() {
return !!m.global.wlLocalDev;
},
post: function(e, t) {
if (e) {
var i = "wunderlist:";
0 !== e.indexOf(i) && (e = i + e), m.global.top.postMessage(e, t || "*");
}
},
isOnline: function() {
return this.state.attributes.online;
}
});
return m.init(), m;
}), define("backend/database/Schemas/contacts", {}), define("backend/database/Schemas/googleContacts", {}), 
define("backend/database/Schemas/quotas", {}), define("backend/database/Schemas/BaseEntity", [ "project!database/WBSchema" ], function(e) {
var t = e.FieldTypes;
return e.extend({
fields: {
type: t.Text,
id: t.Text,
online_id: t.Text,
requestID: t.Text,
revision: t.Integer,
matryoshkaRevision: t.Integer,
lastUpdateData: t.Object,
created_at: t.DateTime
}
});
}), define("backend/database/Schemas/lists", [ "./BaseEntity" ], function(e) {
var t = e.FieldTypes;
return e.extend({
fields: {
owner_id: t.Text,
online_owner_id: t.Text,
position: t.Float,
title: t.Text,
list_type: t.Text,
hasUnreadComments: t.Boolean,
isShared: t.Boolean,
muted: t.Boolean,
role: t.Text,
membershipID: t.Text
}
});
}), define("backend/database/Schemas/folders", [ "./BaseEntity" ], function(e) {
var t = e.FieldTypes;
return e.extend({
fields: {
user_id: t.Text,
title: t.Text,
list_ids: t.Array
}
});
}), define("backend/database/Schemas/shares", {}), define("backend/database/Schemas/tasks", [ "./BaseEntity" ], function(e) {
return e.extend({
fields: {
booleans: [ "starred", "hasFiles", "hasNote", "hasSubtasks", "hasUnreadComments", "hasComments", "allCommentsLoaded" ],
datetimes: [ "completed_at", "due_date" ],
floats: [ "position" ],
integers: [ "unreadCount", "recurrence_count", "subtaskCompletion" ],
texts: [ "recurrence_type", "title", "assignee_id", "completed_by_id", "created_by_id", "list_id", "online_assignee_id", "online_completed_by_id", "online_created_by_id", "online_list_id" ]
},
fullTextIndexFields: [ "title", "assignee_id" ]
});
}), define("backend/database/Schemas/subtasks", [ "./BaseEntity" ], function(e) {
var t = e.FieldTypes;
return e.extend({
fields: {
completed_at: t.DateTime,
created_by_id: t.Text,
online_created_by_id: t.Text,
title: t.Text,
position: t.Float,
list_id: t.Text,
online_list_id: t.Text,
task_id: t.Text,
online_task_id: t.Text
}
});
}), define("backend/database/Schemas/notes", [ "./BaseEntity" ], function(e) {
var t = e.FieldTypes;
return e.extend({
fields: {
task_id: t.Text,
online_task_id: t.Text,
content: t.Text
},
fullTextIndexFields: [ "content" ]
});
}), define("backend/database/Schemas/reminders", {}), define("backend/database/Schemas/files", {}), 
define("backend/database/Schemas/taskComments", [ "./BaseEntity" ], function(e) {
var t = e.FieldTypes;
return e.extend({
fields: {
text: t.Text,
author: t.Object,
local_created_at: t.DateTime,
read: t.Boolean,
task_id: t.Text,
online_task_id: t.Integer
}
});
}), define("backend/database/Schemas/taskCommentsStates", [ "./BaseEntity" ], function(e) {
var t = e.FieldTypes;
return e.extend({
fields: {
unread_count: t.Integer,
read_count: t.Integer,
task_id: t.Text,
online_list_id: t.Integer,
last_read_id: t.Text,
online_last_read_id: t.Integer
}
});
}), define("backend/database/Schemas/tasksCounts", [ "./BaseEntity" ], function(e) {
var t = e.FieldTypes;
return e.extend({
fields: {
completed_count: t.Integer,
uncompleted_count: t.Integer
}
});
}), define("backend/database/Schemas/BasePositions", [ "./BaseEntity" ], function(e) {
var t = e.FieldTypes;
return e.extend({
fields: {
values: t.Array,
localValues: t.Array,
remoteValues: t.Array,
syncedIDs: t.Array
}
});
}), define("backend/database/Schemas/listPositions", [ "./BasePositions" ], function(e) {
return e.extend({
fields: {}
});
}), define("backend/database/Schemas/taskPositions", [ "./BasePositions" ], function(e) {
var t = e.FieldTypes;
return e.extend({
fields: {
list_id: t.Text,
online_list_id: t.Text
}
});
}), define("backend/database/Schemas/subtaskPositions", [ "./BasePositions" ], function(e) {
var t = e.FieldTypes;
return e.extend({
fields: {
task_id: t.Text,
online_task_id: t.Text
}
});
}), define("backend/database/Schemas/root", {
keyPath: "_key"
}), define("backend/database/Schemas/user", {
critical: !0,
keyPath: "_key"
}), define("backend/database/Schemas/settings", [ "./BaseEntity" ], function(e) {
var t = e.FieldTypes;
return e.extend({
fields: {
key: t.Text,
value: t.Text,
web: t.Boolean
}
});
}), define("backend/database/Schemas/services", {}), define("backend/database/Schemas/subscriptions", {}), 
define("backend/database/Schemas/features", {}), define("backend/database/Schemas/users", {}), 
define("backend/database/Schemas/assignables", {}), define("backend/database/Schemas/memberships", {}), 
define("backend/database/Schemas/desktopNotifications", {}), define("backend/database/Schemas/storage", {}), 
define("backend/database/Schemas/invoices", {}), define("backend/database/Schemas/unreadActivitiesCounts", [ "./BaseEntity" ], function(e) {
var t = e.FieldTypes;
return e.extend({
fields: {
conversations: t.Integer,
activities: t.Integer
}
});
}), define("backend/database/Schemas/activities", [ "./BaseEntity" ], function(e) {
var t = e.FieldTypes;
return e.extend({
fields: {
html: t.String
}
});
}), define("backend/database/Schemas/conversations", [ "./BaseEntity" ], function(e) {
var t = e.FieldTypes;
return e.extend({
fields: {
html: t.String
}
});
}), define("backend/database/Schema", [ "./Schemas/contacts", "./Schemas/googleContacts", "./Schemas/quotas", "./Schemas/lists", "./Schemas/folders", "./Schemas/shares", "./Schemas/tasks", "./Schemas/subtasks", "./Schemas/notes", "./Schemas/reminders", "./Schemas/files", "./Schemas/taskComments", "./Schemas/taskCommentsStates", "./Schemas/tasksCounts", "./Schemas/listPositions", "./Schemas/taskPositions", "./Schemas/subtaskPositions", "./Schemas/root", "./Schemas/user", "./Schemas/settings", "./Schemas/services", "./Schemas/subscriptions", "./Schemas/features", "./Schemas/users", "./Schemas/assignables", "./Schemas/memberships", "./Schemas/desktopNotifications", "./Schemas/storage", "./Schemas/invoices", "./Schemas/unreadActivitiesCounts", "./Schemas/activities", "./Schemas/conversations" ], function() {
var e = [ "contacts", "googleContacts", "quotas", "lists", "folders", "shares", "tasks", "subtasks", "notes", "reminders", "files", "taskComments", "taskCommentsStates", "tasksCounts", "listPositions", "taskPositions", "subtaskPositions", "root", "user", "settings", "services", "subscriptions", "features", "users", "assignables", "memberships", "desktopNotifications", "storage", "invoices", "unreadActivitiesCounts", "activities", "conversations" ], t = arguments, i = {};
return e.forEach(function(e, n) {
i[e] = t[n];
}), {
database: {
name: "wunderlist-3",
version: 24
},
stores: i
};
}), define("backend/database", [ "project!database/WBDatabase", "./database/Schema", "wunderbits/global" ], function(e, t) {
var i = e.prototype, n = e.extend({
initSuccess: function() {
var e = this, t = e.backend;
e.on("truncate", e.truncate, e), e.bindTo(t, "truncated", function() {
e.trigger("truncated");
}), e.bindTo(t, "upgraded", function() {
e.publish("upgraded");
}), e.bindTo(t, "analytics", function(t, i) {
e.trigger("analytics", t, i);
}), i.initSuccess.call(e);
},
initFailure: function(e, t) {
var n = this;
i.initFailure.call(n), setTimeout(function() {
n.trigger("analytics:db:error", e, t), n.backend.nuke().then(function() {
location.hash = "#", location.reload();
});
}, 50);
}
});
return new n({
schema: t
});
}), define("backend/DatabaseManager", [ "wunderbits/global", "project!database/BackboneDBSync", "backend/database", "wunderbits/WBRuntime", "project!core/lib/createUID" ], function(e, t, i, n, a) {
function o() {
return i.init();
}
var r = new t({
database: i
}), s = a();
n.sessionID = s, r.on("index", function(e, t, n) {
i.trigger("index", e, t, n);
}), n.env.isChromeApp() || n.once("hasSyncedOnce", function() {
var t = e.localStorage;
t && (r.on("write", function(e, i) {
t.setItem("updated:" + e, n.sessionID + ":" + a() + ":" + i);
}), r.on("destroy", function(e, i) {
t.setItem("destroyed:" + e, n.sessionID + ":" + a() + ":" + i);
}));
});
var l = n.Backbone;
return l.oldSync = l.sync, l.sync = i.sync = function(e, t, n) {
n = n || {};
var a = arguments;
i.ready.done(function() {
!n.fromStorage && r.sync.apply(r, a);
});
}, n.on("db:truncate", function(e) {
i.trigger("truncate", e);
}).on("db:nuke", function() {
i.backend.nuke();
}), i.on("truncated", function() {
n.trigger("db:truncated");
}).on("upgraded", function() {
n.publish("database:upgraded");
}).on("analytics", function(e, t) {
e.unshift("analytics"), n.trigger(e.join(":"), t);
}).on("ready", function() {
n.trigger("db:ready");
}).on("error", function(e, t) {
console.log(e, t);
}), {
init: o,
database: i
};
}), define("backend/io/lib/FakeXHR", [ "project!core/WBClass" ], function(e) {
var t = function() {};
return e.extend({
properties: {
request: null,
response: null,
status: null,
responseText: null
},
open: t,
send: t,
addEventListener: t,
setRequestHeader: function(e, t) {
var i = this, n = i.request.headers;
n[e.toLowerCase()] = t;
},
getResponseHeader: function(e) {
var t = this, i = t.response;
return e && i && i.headers ? i.headers[e.toLowerCase()] : void 0;
},
spoof: function(e) {
var t = this;
t.request = e.request;
var i = t.response = e.response || {};
t.status = i.status;
}
});
}), define("backend/io/lib/XHR", [ "./FakeXHR", "require", "wunderbits/global" ], function(e, t, i) {
return i.XMLHttpRequest || t("XMLHttpRequest") || e;
}), define("backend/io/BaseBackend", [ "project!core/WBEventEmitter" ], function(e) {
return e.extend({});
}), define("backend/io/XHRBackend", [ "./lib/XHR", "./BaseBackend" ], function(e, t) {
var i = "application/json; charset=utf-8";
return t.extend({
setHeaders: function(e, t, n) {
function a(t, i) {
e.setRequestHeader(t, i);
}
if (a("Accept", i), n && a("Content-Type", i), t) for (var o in t) a(o, t[o]);
},
ajax: function(t, i) {
var n = this, a = new e(), o = i.timeout;
o && (a.timeout = o), a.url = t, a.context = i.context || "", a.open(i.type, t, !0), 
a.addEventListener("error", i.callback, !1), n.trackEvents(a), a.onreadystatechange = function() {
4 === a.readyState && (a.removeEventListener("error", i.callback), i.callback(a));
};
var r = i.data;
n.setHeaders(a, i.headers, !!r), r ? a.send(r) : a.send();
},
trackEvents: function(e) {
var t, i, n, a = this;
e.onloadstart = function() {
t = Date.now();
}, e.onprogress = function() {
n || (i = Date.now(), n = !0);
}, e.onload = function() {
var n = Date.now(), o = {
status: e.status,
url: e.url,
context: e.context,
start: t,
end: n,
duration: n - t,
latency: i - t,
download: n - i
};
a.trigger("timing", o);
};
}
});
}), define("wunderbits/helpers/SafeParse", [ "application/runtime", "../lib/dependencies", "../global", "./console", "project!core/WBSingleton" ], function(e, t, i, n, a) {
var o = !0;
try {
var r = new i.DOMParser();
r.parseFromString("", "text/html") && (o = !1);
} catch (s) {}
return a.extend({
json: function(t) {
var i;
try {
i = JSON.parse(t);
} catch (a) {
e.error.exception(a, "SafeParserJSONError", {
original: t
}), n.warn('Unable to parse "' + t + '"');
}
return i;
},
html: function(t) {
var a;
try {
var r = i.document.implementation || {};
if (o && r) a = r.createHTMLDocument(""), t.toLowerCase().indexOf("<!doctype") > -1 ? a.documentElement.innerHTML = t : a.body.innerHTML = t; else {
var s = new i.DOMParser();
a = s.parseFromString(t, "text/html");
}
var l = a && a.querySelector("parsererror");
l && (e.error.notify("SafeParserHTMLError", l.toString()), n.warn("Failed to parse HTML", l), 
a = !1);
} catch (d) {
e.error.exception(d, "SafeParserHTMLError"), n.warn("Failed to parse HTML", d), 
a = !1;
}
return a;
}
});
}), define("backend/io/PostMessageBackend", [ "./lib/FakeXHR", "./BaseBackend", "wunderbits/global", "wunderbits/helpers/SafeParse", "project!core/lib/createUID" ], function(e, t, i, n, a) {
var o = document.getElementsByTagName("head")[0], r = [ "width: 1px", "height: 1px", "position: absolute", "top: -10px", "left: -10px;" ].join(";");
return t.extend({
initialize: function(e) {
var t = this;
t.host = e.proxyHost, t.requests = {};
},
ajax: function(e, t) {
var i = this, n = i.frame, o = i.requests;
n || i.injectFrame();
var r = t.id = a();
o[r] = t, t.url = e;
var s = JSON.stringify(t), l = n.contentWindow;
l.postMessage(s, n.origin);
},
injectFrame: function() {
var e = this, t = e.host, n = e.frame = document.createElement("iframe");
n.setAttribute("frameborder", "0"), n.setAttribute("style", r), n.origin = t, n.src = t + "/cors.html", 
o.appendChild(n), i.attachEvent("onmessage", function() {
return e.onMessage.apply(e, arguments);
});
},
onMessage: function(t) {
var i = this, a = n.json(t.data), o = a.id, r = i.requests[o];
if (r) {
delete i.requests[o];
var s = new e();
s.spoof({
request: r,
response: a
});
var l = r.callback;
delete r.callback, l(r);
}
}
});
}), define("backend/io/XHRUploader", [ "./lib/XHR", "project!core/WBDeferred", "project!core/WBSingleton", "project!core/mixins/WBEventsMixin" ], function(e, t, i, n) {
return i.extend({
upload: function(i, a, o) {
var r = new t(), s = r.promise();
n.applyTo(s);
var l = new e();
l.open("PUT", i, !0), l.onreadystatechange = function() {
var e = l.readyState;
4 === e && (l.file = null, 200 === l.status && s.trigger("change:state", 2), r[200 !== l.status ? "reject" : "resolve"](l));
}, l.upload.addEventListener("progress", function(e) {
!l.file || 0 === l.file.size && 0 !== e.total ? r.reject(l, "error:fileDeleted") : e.lengthComputable && s.trigger("change:progress", e.loaded, e.total);
}), l.addEventListener("error", function() {
r.reject(l);
}, !1), o = o || {};
for (var d in o) l.setRequestHeader(d, o[d]);
return s.send = function() {
s.trigger("change:state", 1);
try {
l.send(a), l.file = a;
} catch (e) {
r.reject(l, "error:fileDeleted");
}
return s;
}, s.abort = function() {
return s.trigger("upload:abort"), l.abort(), s;
}, s.on("error", function() {
l.file = null;
}), s.success = s.done, s.error = s.fail, s;
}
});
}), define("backend/IOBase", [ "config", "urls", "wunderbits/global", "./io/XHRBackend", "./io/PostMessageBackend", "./io/XHRUploader", "wunderbits/helpers/SafeParse", "project!core/WBClass", "project!core/WBDeferred", "project!core/lib/extend" ], function(e, t, i, n, a, o, r, s, l, d, c) {
var u = s.prototype, p = i.location, m = t.urlMap || {}, g = t.baseUrl || "", f = /^(https?:)?\/\//, b = /^(https?:)?\/\/\w+\.wunderlist.com\//;
return s.extend({
initialize: function(e) {
e = e || {};
var t = this;
u.initialize.apply(t, arguments), t.transport = e.jsonp || !("XDomainRequest" in i) || "msIndexedDB" in i ? new n() : new a({
proxyHost: e.proxyHost
}), [ "get", "post", "put", "delete" ].forEach(function(e) {
t.defineVerb(e);
}), t.routes = t.compileRoutes(t.routes, t.tokens), t.authFreeRoutes = t.compileRoutes(t.authFreeRoutes, t.tokens);
},
compileRoutes: function(t, i) {
function n(e) {
return e.replace(/\{\{(\w+)\}\}/g, function(e, t) {
return i[t];
});
}
if (!t) return c;
var a = {};
for (var o in t) {
var r = t[o];
r = r.map(n);
var s = new RegExp("^/(" + r.join("|") + ")(\\?|$)"), l = e[o].host;
a[l] = s;
}
return a;
},
resolveUrl: function(e) {
var t, i = this;
return f.test(e) ? e : (i.routes && (t = i.resolveRoute(e)), !t && m[e] && (t = g + m[e]), 
t || (t = i.normalizeUrl(e)), t);
},
resolveRoute: function(e) {
var t = this;
for (var i in t.routes) {
var n = t.routes[i];
if (n.test(e)) return i + e;
}
},
normalizeUrl: function(e) {
return p.protocol + "//" + p.host + e;
},
extendHeaders: function(e, t) {
var i = this;
e = e || {};
var n = f.test(t), a = !n || b.test(t);
if (a && i.setPlatformHeaders(e), d(e, {
"Content-Type": "application/json",
Accept: "application/json"
}), i.authFreeRoutes) for (var o in i.authFreeRoutes) {
var r = i.authFreeRoutes[o];
if (r.test(t)) return e;
}
return a && !e.Authorization && i.setAuthorization(e), e;
},
setPlatformHeaders: function() {},
setAuthorization: function() {},
defineVerb: function(e) {
var t = this;
t[e] = function(i, n, a, o, s) {
function d(e) {
var t = e.status, i = e.statusText, n = e.responseText, a = e.getResponseHeader("content-type"), o = (a || "").split(";")[0];
if ("string" == typeof n && "application/json" === o && (n = r.json(n)), t >= 200 && 300 > t || 304 === t) u.resolve(n, i, e); else {
var s = {
status: t,
statusText: i,
response: {
data: n
}
};
u.reject(s, i, t);
}
}
if (!i) throw new Error("need a url for ajax calls");
a = a || {}, a = t.extendHeaders(a, i);
var u = new l(), p = u.promise();
if (i = t.resolveUrl(i), "object" == typeof n) if ("get" === e) {
var m, g = [];
for (m in n) g.push(m + "=" + encodeURIComponent(n[m]));
g.length && (i = i + "?" + g.join("&")), n = c;
} else n = JSON.stringify(n);
return t.transport.ajax(i, {
type: e.toUpperCase(),
data: n,
headers: a,
timeout: o,
context: s,
callback: d
}), p.success = p.done, p.error = p.fail, p;
};
},
upload: function(e, t, i) {
var n = this;
return e = n.resolveUrl(e), o.upload(e, t, i);
}
});
}), define("backend/io/data/Wunderapi", {
tokens: {
RemoteId: "([a-zA-Z0-9-_]{11}|localId(:[\\w-]+){4})",
NumericId: "[0-9]+"
},
routes: {
invitations: [ "invites" ],
payment: [ "adyen/cancel", "adyen/generate_url", "products/adyen", "products/6wunderkinder", "subscriptions/group", "subscription/memberships", "invoices" ],
tracking: [ "track" ]
},
authFreeRoutes: {
api: [ "signup", "login", "forgotpassword", "blacklist", "AH[a-zA-Z0-9-_]{9}" ],
payment: [ "products/adyen", "products/6wunderkinder" ]
}
}), define("helpers/PlatformHeaders", [ "application/runtime", "wunderbits/global", "project!core/WBSingleton" ], function(e, t, i) {
var n = e.config, a = t.navigator, o = "Standard", r = "web";
e.env.isChromeApp() ? r = "chrome" : e.env.isNodeWebkit() && (r = "nodewebkit");
var s = {
"X-Client-Platform": r,
"X-Client-Product": "wunderlist",
"X-Client-Product-Version": n.release || "dev",
"X-Client-System": a.userAgent,
"X-Client-System-Version": o
};
if (t.gitHash) {
var l = /\[(.*)\]/.exec(t.gitHash);
l = null !== l ? l[1] : !1, l && (s["X-Client-Product-Git-Hash"] = l);
}
var d = {
headers: s
};
return i.extend(d);
}), define("backend/IOWunderapi", [ "application/runtime", "backend/IOBase", "backend/io/data/Wunderapi", "helpers/PlatformHeaders", "project!core/lib/extend" ], function(e, t, i, n, a) {
var o = t.prototype, r = e.config, s = "web";
return t.extend({
tokens: i.tokens,
routes: i.routes,
authFreeRoutes: i.authFreeRoutes,
initialize: function() {
var t = this;
o.initialize.call(t, {
proxyHost: r.api.host
}), t.trackXHRTiming();
var i = e.env;
i.isChromeApp() ? s = "chrome" : i.isFirefoxApp() && (s = "firefox");
},
trackXHRTiming: function() {
var t = this;
t.transport.on("timing", function(t) {
var i = t.url;
200 === t.status && /api\.wunderlist\./.test(i) && (e.trigger("timeline:api", t), 
i = encodeURIComponent(i), e.trigger("analytics:APIBenchmark-Latency:" + i, t.context, t.latency), 
e.trigger("analytics:APIBenchmark-DownloadTime:" + i, t.context, t.loadDuration));
});
},
setAuthorization: function(t) {
var i = e.user.get("token");
t.Authorization = "Bearer " + i;
},
setPlatformHeaders: function(e) {
a(e, n.headers);
}
});
}), define("helpers/Cookie", [ "wunderbits/global", "project!core/WBSingleton" ], function(e, t) {
var i = e.document, n = e.location.hostname, a = e.chrome, o = !!(a && a.app && a.app.runtime);
return t.extend({
_setCookie: function(e) {
if (!o) {
var t = e ? "false" : "true", a = [ "LOGGEDIN=" + t ];
if (a.push("path=/"), a.push("domain=" + n), e) a.push("expires=" + new Date(0).toUTCString()); else {
var r = new Date();
r.setFullYear(r.getFullYear() + 1), a.push("expires=" + r.toUTCString());
}
i.cookie = a.join(";");
}
},
killCookie: function() {
this._setCookie(!0);
},
createCookie: function(e, t, n) {
var a;
if (n) {
var o = new Date();
o.setTime(o.getTime() + 24 * n * 60 * 60 * 1e3), a = "; expires=" + o.toUTCString();
} else a = "";
i.cookie = e + "=" + t + a + "; path=/";
},
readCookie: function(e) {
for (var t = e + "=", n = i.cookie.split(";"), a = 0; a < n.length; a++) {
for (var o = n[a]; " " == o.charAt(0); ) o = o.substring(1, o.length);
if (0 === o.indexOf(t)) return o.substring(t.length, o.length);
}
return null;
},
eraseCookie: function(e) {
this.createCookie(e, "", -1);
}
});
}), define("helpers/bootstrap/fetchUser", [ "application/runtime", "backend/DatabaseManager", "project!database/WBLocalStorage", "project!core/WBDeferred", "project!core/lib/when" ], function(e, t, i, n, a, o) {
function r() {
var t = location.hash;
t = t && t.replace(/^#/, ""), u.setItem("wantedRoute", t || "").always(function() {
var t = "/login";
p ? e.trigger("reload", t) : d.location = t;
});
}
function s() {
var e = new n();
return t.init().then(function() {
t.database.getAll("user", function(t) {
e.resolve(t[0]);
}, function() {
e.resolve(o);
});
}), e.promise();
}
function l() {
var e = new n(), t = new m();
return t.open("POST", "/authorize", !0), t.onreadystatechange = function() {
var i = 4 === t.readyState;
if (i && 200 === t.status) {
var n = JSON.parse(t.response);
n.uuid ? u.setItem("wl_uuid", n.uuid).always(function() {
e.resolve(n);
}) : e.resolve(n);
} else i && e.reject();
}, t.setRequestHeader("Content-Type", "application/json"), t.send(JSON.stringify({
client_id: c.clientID
})), e.promise();
}
var d = e.global, c = e.config, u = new i(), p = e.env.isPackagedApp(), m = e.global.XMLHttpRequest || function() {};
return function() {
var e, i, o = new n(), d = new n(), c = new n();
return p ? d.resolve() : l().done(function(e) {
i = e;
}).always(d.resolve, d), s().done(function(t) {
e = t;
}).always(c.resolve, c), a(d, c).done(function() {
e && p ? o.resolve(e) : !i || e && e.id !== i.id ? t.database.truncate(r) : o.resolve(i);
}), o.promise();
};
}), define("helpers/bootstrap/loadAppWithUserData", [ "require", "application/runtime", "helpers/Cookie", "project!database/WBLocalStorage", "project!core/WBDeferred" ], function(e, t, i, n, a) {
function o() {
var e = new a(), t = location.hash;
return t = t ? t.replace(/^#/, "") : "/lists/inbox", s.getItem("wantedRoute").done(function(n) {
s.removeItem("wantedRoute").done(function() {
t = n ? n : t, /^\//.test(t) || (t = "/" + t);
var a = !l && i.readCookie("AUTHSTATE");
if (a) {
i.eraseCookie("AUTHSTATE");
var o = "login" === a ? "/start" : "signup" === a ? "/setup" : null;
t = o ? o + t : t;
}
location.hash = t, e.resolve();
});
}), e.promise();
}
var r = t.$, s = new n(), l = t.env.isPackagedApp();
return function(t, i, n) {
o().done(function() {
r("body").addClass("application-" + t), e([ i ], function(e) {
new e(t, {
userData: n
});
});
});
};
}), function() {
var e = window.requirejs.config({
paths: {
project: "loaders/project",
template: "loaders/templates",
partial: "loaders/partials",
style: "loaders/styles"
}
});
e([ "application/runtime", "backend/DatabaseManager", "backend/IOWunderapi", "helpers/Cookie", "helpers/bootstrap/fetchUser", "helpers/bootstrap/loadAppWithUserData" ], function(e, t, i, n, a, o) {
var r = "main", s = "applications/main/Application", l = e.$, d = e.env.getEnvInfo();
l(function() {
l("body").css("opacity", 1).addClass(d.browser);
}), e.io = new i(), "login" === r ? o(r, s, {}) : a().done(function(e) {
o(r, s, e);
});
});
}.call(this), define("../build/bootstraps/main", function() {}), define("wunderbits/BaseEventEmitter", [ "project!core/WBEventEmitter", "project!core/mixins/WBDestroyableMixin", "project!core/mixins/WBUtilsMixin", "project!core/mixins/ObservableHashMixin" ], function(e, t, i, n) {
return e.extend({
mixins: [ t, i, n ]
});
}), define("application/Redirector", [ "application/runtime", "wunderbits/BaseEventEmitter", "project!core/WBDeferred", "project!core/lib/when" ], function(e, t, i, n) {
var a = e.global, o = e._, r = t.prototype, s = [ "starred", "all", "completed", "assigned" ];
return t.extend({
initialize: function() {
var t = this;
r.initialize.apply(t, arguments);
var a = new i(), o = new i();
t.bindTo(e, "lists:ready", function(e) {
t.lists = e, a.resolve();
}), n(a).done(function() {
t.bindTo(t.lists, "remove", t.onRemoveList), t.bindTo(t.lists, "change:online_id", t.onChangeOnlineId);
}), t.bindTo(e, "tasks:ready", function(e) {
t.tasks = e, o.resolve();
}), n(o).done(function() {
t.bindTo(t.tasks, "remove", t.onRemoveTask), t.bindTo(t.tasks, "change", t.onChangeTask), 
t.bindTo(t.tasks, "change:online_id", t.onChangeOnlineId);
}), t.bindTo(e, "browser:render", t.trackBrowserState), t.bindTo(e, "detail:rendered", t.trackDetailTask);
},
routeToInbox: function() {
o.delay(function() {
e.trigger("route:lists/inbox");
}, 250);
},
trackDetailTask: function(e) {
var t = this;
t.lastDetailViewTaskId = e;
},
trackBrowserState: function(e) {
var t = this;
t.lastBrowserState = e;
},
onRemoveList: function(e, t, i) {
var n = this, a = i && i.fromSync;
a && e.isRouteActive() && n.routeToInbox();
},
onRemoveTask: function(t, i, n) {
var o = this, r = a.location.href, s = r.indexOf(t.route()) >= 0, l = t.attributes.list_id, d = o.lists.get(l), c = n && n.fromSync;
c && s && (o.lastBrowserState === l && d ? e.trigger("detail:close") : o.routeToInbox());
},
onChangeOnlineId: function(t) {
var i = t.attributes;
if ("inbox" !== i.list_type) {
var n = e.currentRoute();
if (n.indexOf(t.id) > -1) {
var a = n.replace(t.id, t.attributes.online_id);
e.trigger("route:" + a, {
replace: !0
});
}
}
},
onChangeTask: function(t) {
var i = this, n = t.id === i.lastDetailViewTaskId, a = e.currentRoute(), r = a.indexOf(t.id) >= 0 || a.indexOf(t.attributes.online_id) >= 0;
n && r && (o.contains(s, i.lastBrowserState) && !t.isInSmartList(i.lastBrowserState) ? i.closeDetailView() : "today" !== i.lastBrowserState || t.isInTodayCollection() ? "week" !== i.lastBrowserState || t.isInWeekCollection() || i.closeDetailView() : i.closeDetailView());
},
closeDetailView: function() {
e.trigger("detail:close");
}
});
}), define("wunderbits/mixins/DebounceMixin", [ "../lib/dependencies", "project!core/lib/toArray", "project!core/WBMixin" ], function(e, t, i) {
var n = e._;
return i.extend({
debounce: function(e) {
function i() {
a.destroyed || e.apply(a, arguments);
}
var a = this, o = t(arguments);
return o[0] = i, n.debounce.apply(null, o);
}
});
}), define("wunderbits/WBController", [ "application/runtime", "./mixins/DebounceMixin", "./BaseEventEmitter" ], function(e, t, i) {
var n = i.prototype, a = e._, o = {};
return i.extend({
mixins: [ t ],
initialize: function() {
var e = this;
n.initialize.apply(e, arguments), e.cid = a.uniqueId("controller"), o[e.cid] = e;
},
onDestroy: function() {
var e = this;
delete o[e.cid];
},
stopEventFully: function(e) {
e.preventDefault(), e.stopPropagation();
}
});
}), define("wunderbits/WBRoutesController", [ "./WBController" ], function(e) {
var t = e.prototype;
return e.extend({
routes: {},
initialize: function(e) {
var i = this;
e || (e = {}), t.initialize.apply(i, arguments), i.outlet = e.outlet, i.router = e.router;
}
});
}), define("wunderbits/lib/isInstanceOf", [], function() {
return function(e) {
return "function" == typeof e && this instanceof e;
};
}), define("wunderbits/mixins/WBInstanceUtilitiesMixin", [ "../lib/isInstanceOf", "project!core/WBMixin" ], function(e, t) {
return t.extend({
isInstanceOf: e
});
}), define("wunderbits/WBModel", [ "./lib/dependencies", "project!core/lib/createUID", "./mixins/WBInstanceUtilitiesMixin", "project!core/WBClass", "project!core/mixins/WBBindableMixin", "project!core/mixins/WBUtilsMixin", "project!core/mixins/ObservableHashMixin" ], function(e, t, i, n, a, o, r) {
var s = e.Backbone, l = s.Model.prototype, d = n.prototype, c = s.Model.extend({
initialize: function(e) {
var i = this;
i.uid = t(), d.augmentProperties.call(i), d.initMixins.call(i, e);
},
destroy: function() {
var e = this;
e.destroying = !0, l.destroy.apply(e, arguments);
},
save: function() {
var e = this;
!e.destroying && l.save.apply(e, arguments);
},
clear: function() {
var e = this;
l.clear.apply(e, arguments), e.save(e.defaults);
}
});
return [ a, o, i, r ].forEach(function(e) {
e.applyToClass(c);
}), c;
}), define("models/BaseModel", [ "wunderbits/WBModel", "project!core/lib/extend" ], function(e, t) {
var i = e.prototype;
return e.extend({
initialize: function(e, t) {
var n = this;
i.initialize.apply(n, arguments), n.trackLatestRemoteState(t);
},
trackLatestRemoteStateFromRevisionChange: function(e, t, i) {
var n = this;
n.trackLatestRemoteState(i);
},
trackLatestRemoteState: function(e) {
var i = this;
if (e = e || {}, e.fromSync && e.remoteState) {
var n = e.remoteState;
delete n.lastUpdateData, delete n.revision;
var a = t({}, i.attributes.lastUpdateData || {}, n);
i.save({
lastUpdateData: a
}, {
fromSync: !0
});
}
},
ableToSyncBind: void 0,
trackIsAbleToSync: function() {
throw new Error("#trackIsAbleToSync called but not overriden");
},
isAbleToSync: function() {
var e = this, t = this.attributes, i = !!t.online_id || !!t.isAbleToSync;
return i || e.ableToSyncBind || e.trackIsAbleToSync(), i;
},
isNotAllowedToSync: function() {
return !!this.neverSyncOut;
},
makeAbleToSync: function() {
var e = {
fromSync: !0
};
this.set({
isAbleToSync: !0
}, e).save({}, e);
}
});
}), define("models/ListResourceBaseModel", [ "require", "models/BaseModel" ], function(e, t) {
var i;
return e([ "collections/ListCollection" ], function(e) {
i = e;
}), t.extend({
isAbleToSync: function() {
var e = this, t = this.attributes, i = e.getListOnlineID();
return i ? e.makeAbleToSync() : t.isAbleToSync || e.ableToSyncBind || e.trackIsAbleToSync(), 
t.isAbleToSync;
},
trackIsAbleToSync: function() {
var e, t, n = this, a = n.attributes, o = a.list_id, r = a.online_list_id;
if (o && r) n.makeAbleToSync(); else if (o) e = new i("/lists/all"), t = e.get(o), 
t && (t.attributes.online_id ? n.makeAbleToSync() : n.ableToSyncBind = n.bindOnceTo(t, "change:online_id", function() {
n.delay("makeAbleToSync");
})); else var s = n.bindTo(n, "change:list_id", function() {
a.list_id && (n.trackIsAbleToSync(), n.unbindFrom(s));
});
},
getListOnlineID: function() {
var e, t, n = this, a = n.attributes;
return a.list_id && (e = new i("/lists/all"), t = e.get(a.list_id)) ? t.attributes.online_id : void 0;
}
});
}), define("models/MembershipModel", [ "models/ListResourceBaseModel" ], function(e) {
return e.extend({
storeName: "memberships",
defaults: {
type: "membership",
user_id: void 0,
list_id: void 0,
sender_id: void 0,
state: void 0,
listReady: void 0,
senderReady: void 0,
userReady: void 0,
isReady: void 0
},
isAccepted: function() {
return "accepted" === this.attributes.state;
},
isPending: function() {
return "pending" === this.attributes.state;
},
isReady: function() {
return !!this.attributes.isReady;
}
});
}), define("models/LocallyImmutableModel", [ "./BaseModel" ], function(e) {
var t = e.prototype;
return e.extend({
initialize: function() {
var e = this;
t.constructor.__super__.initialize.apply(e, arguments);
}
});
}), define("models/OtherUserModel", [ "./LocallyImmutableModel" ], function(e) {
return e.extend({
storeName: "users",
defaults: {
type: "user"
},
neverSyncOut: !0,
isAbleToSync: function() {
return !1;
}
});
}), define("wunderbits/collections/WBCollection", [ "../lib/dependencies", "wunderbits/BaseEventEmitter", "project!core/WBDeferred", "project!core/lib/fromSuper", "project!core/lib/extend", "project!core/lib/assert" ], function(e, t, i, n, a, o, r) {
var s = e.Backbone.Collection, l = s.prototype, d = {
properties: {
length: 0,
models: [],
_byId: {},
indexHash: {}
},
observes: {
self: {
add: "onModelAdd",
remove: "onModelRemove",
reset: "onCollectionReset"
}
},
indices: [ "online_id" ],
model: r,
constructor: function(e) {
var i = this;
o(i.constructor !== c, "can't initialize WBCollection"), o.string(e, "collection url must be a string"), 
o(/(\/[a-z0-9]+)+\/?/.test(e), "invalid url for a collection");
var n = c.collections;
if (n[e] instanceof i.constructor) return n[e];
i.url = e, n[e] = i, t.call(i);
var a = i.model;
o(a, "No model class defined"), o(a.prototype.storeName, "No store defined"), i.resetIndex(), 
i.createIndexBindings(), n = null;
},
initialize: function() {
var e = this;
return e.indices = n.concat(e, "indices"), e;
},
sort: function(e) {
var t = this;
if (!t.comparator) throw new Error("Cannot sort a set without a comparator");
return e || (e = {}), "string" == typeof t.comparator || 1 === t.comparator.length ? t.models = t.sortBy(t.comparator, t) : (t._boundComparator = t._boundComparator || t.comparator.bind(t), 
t.models.sort(t._boundComparator)), e.silent || t.trigger("sort", t, e), t;
},
resetIndex: function() {
var e = this, t = e.indexHash;
e.indices.forEach(function(e) {
t[e] = {};
});
},
createIndexBindings: function() {
var e = this, t = e.indexHash;
e.indices.forEach(function(i) {
var n = t[i];
e.bindTo(e, "change:" + i, function(e) {
n[e.attributes[i]] = e;
});
});
},
onModelAdd: function(e) {
var t = this, i = t.indexHash, n = e.attributes;
t.indices.forEach(function(t) {
var a = n[t];
a && a !== n.id && (i[t][n[t]] = e);
});
},
onModelRemove: function(e) {
var t = this, i = t.indexHash, n = e.attributes;
t.indices.forEach(function(e) {
e in n && delete i[e][n[e]];
});
},
onCollectionReset: function() {
var e = this;
e.resetIndex(), e.models.forEach(function(t) {
e.onModelAdd(t);
});
},
get: function(e) {
var t = this, i = e && e.attributes && "id" in e ? e.id : e;
return null === i || i === r ? void 0 : t._byId[i] || t.getFromIndex(i);
},
getFromIndex: function(e) {
var t, i = this, n = i.indexHash;
return i.indices.some(function(i) {
return t = n[i][e], !!t;
}), t;
},
getIdByAltId: function(e) {
var t = e && this.indexHash.online_id[e];
return t && t.id;
}
};
d = a({}, l, d);
var c = t.extend(d);
return c.collections = {}, c.release = function() {
c.collections = {};
}, c;
}), define("collections/BaseCollection", [ "wunderbits/collections/WBCollection" ], function(e) {
var t = e.prototype;
return e.extend({
initialize: function() {
var e = this;
t.initialize.apply(e, arguments), /\/all$/.test(e.url) && e.bindTo(e, "change:revision", "trackLatestRemoteStateFromRevisionChange");
},
trackLatestRemoteStateFromRevisionChange: function(e, t, i) {
e.trackLatestRemoteState && e.trackLatestRemoteState.call(e, i);
}
});
}), define("collections/UserCollection", [ "application/runtime", "models/OtherUserModel", "./BaseCollection" ], function(e, t, i) {
var n = e._;
return i.extend({
model: t,
comparator: function(t, i) {
var n = t.attributes, a = i.attributes;
if (e.user.isIDEqual(t.id)) return -1;
if (e.user.isIDEqual(i.id)) return 1;
var o = n.name ? n.name.toUpperCase() : "", r = a.name ? a.name.toUpperCase() : "";
return r > o ? -1 : o > r ? 1 : 0;
},
createSearchIndex: function() {
var e = this, t = {};
return e.models.forEach(function(e) {
var i = e.attributes, n = i.name || i.email;
t[i.id] = n;
}), t;
},
searchByEmailOrName: function(e) {
var t = this;
return n.filter(t.models, function(t) {
var i = t.attributes.name && t.attributes.name.toLowerCase().indexOf(n.escape(e.toLowerCase())) >= 0, a = t.attributes.email && t.attributes.email.toLowerCase().indexOf(n.escape(e.toLowerCase())) >= 0;
return i || a;
});
}
});
}), define("collections/MembershipCollection", [ "application/runtime", "models/MembershipModel", "./UserCollection", "./BaseCollection" ], function(e, t, i, n, a) {
var o = e._, r = n.prototype;
return n.extend({
model: t,
users: new i("/users/all"),
initialize: function() {
var e = this;
e.sort = o.debounce(e.sort, 500), r.initialize.apply(e, arguments), "/memberships/all" === e.url && (e.comparator = a);
},
isListMuted: function() {
return this.findWhere({
user_id: "" + e.user.id
}).attributes.muted;
},
destroyRemoved: function() {
var e = this;
e.getPendingRemovals().forEach(function(e) {
e.destroy();
});
},
sort: function() {
var e = this;
r.sort.apply(e, arguments);
},
nameCache: {},
getNormalizedName: function(e) {
var t = this, i = t.nameCache;
return e in i || (i[e] = e.toUpperCase()), i[e];
},
comparator: function(t, i) {
var n = this, a = n.users.get(t.attributes.user_id) || t, o = n.users.get(i.attributes.user_id) || i, r = a.attributes, s = o.attributes;
if (e.user.isIDEqual(r.id)) return -1;
if (e.user.isIDEqual(s.id)) return 1;
var l = r.name ? r.name : r.email ? r.email : "", d = s.name ? s.name : s.email ? s.email : "", c = n.getNormalizedName(l), u = n.getNormalizedName(d);
return u > c ? -1 : c > u ? 1 : 0;
},
restoreRemoved: function() {
var e = this;
e.getPendingRemovals().forEach(function(e) {
e.set("removed", null, {
silent: !0
});
});
},
getPendingRemovals: function() {
var e = this;
return e.filter(function(e) {
return e.attributes.removed;
});
}
});
}), define("models/ListModel", [ "application/runtime", "models/BaseModel", "collections/MembershipCollection" ], function(e, t, i, n) {
var a = e._;
return t.extend({
storeName: "lists",
defaults: {
type: "list",
position: n
},
route: function(e) {
var t = this, i = t.attributes, n = ("inbox" === i.id ? i.id : i.online_id) || i.id;
return "lists/" + n + (e || "");
},
isRouteActive: function() {
var t = this;
return 0 === e.currentRoute().indexOf(t.route());
},
isSavedSearch: function() {
return !1;
},
getCleanTitle: function() {
return this.attributes.title;
},
isInbox: function() {
return "inbox" === this.attributes.list_type;
},
isShared: function() {
return !!this.attributes.isShared;
},
isMember: function() {
return "member" === this.attributes.role;
},
isMuted: function() {
return !!this.attributes.muted;
},
isOwner: function() {
return e.user.isIDEqual(this.attributes.owner_id) || "owner" === this.attributes.role;
},
isMemberOfList: function(e) {
var t = this, n = new i("/lists/" + t.id + "/memberships"), o = a.find(n.models, function(t) {
return t.attributes.user_id === e || t.attributes.sender_id === e;
});
return o;
},
isPublic: function() {
return !!this.attributes["public"];
},
getFullPublicURL: function() {
var t = this, i = e.config.domain_name || "www.wunderlist.com", n = "https://" + i;
return t.isPublic() ? n + "/lists/" + t.attributes.online_id : "";
},
getShortenedURL: function() {
var t = this, i = t.deferred(), n = t.getFullPublicURL();
return n ? e.io.post(e.config.urlshortener.host, {
url: n
}).done(function(e) {
i.resolve(e.url);
}).fail(i.reject) : i.reject(), i.promise();
},
isAbleToSync: function() {
return !0;
}
});
}), define("helpers/Positions", [ "application/runtime", "project!core/WBSingleton" ], function(e, t) {
var i = e._;
return t.extend({
containsInvalidPosition: function(e) {
for (var t = this, i = e.models, n = 0, a = i.length; a > n; n++) if (!t.isValidPosition(i[n].attributes.position) || t.hasDuplicatePosition(i[n], e)) return !0;
return !1;
},
hasDuplicatePosition: function(e, t) {
var i = t.where({
position: e.attributes.position
});
return i.length > 1 || i[0].id !== e.id;
},
isValidPosition: function(e) {
return i.isNumber(e) && !i.isNaN(e);
}
});
}), define("collections/ListCollection", [ "application/runtime", "models/ListModel", "./BaseCollection", "helpers/Positions" ], function(e, t, i) {
var n, a, o, r, s = i.prototype, l = e._;
return i.extend({
model: t,
comparator: function(e, t) {
n = e.attributes, a = t.attributes;
var i = !isNaN(n.position), s = !isNaN(a.position);
if ("inbox" === n.list_type) return -1;
if ("inbox" === a.list_type) return 1;
if (i && s) o = n.position, r = a.position; else {
if (i && !s) return -1;
if (!i && s) return 1;
o = n.id, r = a.id;
}
return o > r ? 1 : r > o ? -1 : 0;
},
initialize: function() {
var e = this;
s.initialize.apply(e, arguments), e.bindTo(e, "change:position add remove", "sort");
},
hasSavedSearch: function(e) {
var t = this;
return !!t.find(function(t) {
return t.isSavedSearch() && t.getCleanTitle() === e;
});
},
getFirstPosition: function() {
return Math.floor(l.first(this.models).attributes.position) - 10;
},
getLastPosition: function() {
return Math.floor(l.last(this.models).attributes.position) + 10;
},
getNextPosition: function() {
var e = this, t = e.max(function(e) {
return e.attributes.position;
}), i = t ? t.attributes.position : 0;
return Math.round(i + 10);
}
});
}), define("models/ServiceModel", [ "./BaseModel" ], function(e) {
return e.extend({
storeName: "services",
defaults: {
type: "service",
provider_id: null,
provider_type: null,
username: null,
oauth_access_token: null
},
isAbleToSync: function() {
return !0;
}
});
}), define("collections/ServiceCollection", [ "models/ServiceModel", "./BaseCollection" ], function(e, t) {
return t.extend({
model: e
});
}), define("helpers/Auth/OAuthHelper", [ "application/runtime", "project!sdk", "project!core/WBSingleton" ], function(e, t, i) {
var n = e.global, a = n.chrome, o = n.location, r = e.env.isChromeApp(), s = t.services.oauth, l = e.config;
return i.extend({
redirectUrl: r ? "https://" + a.runtime.id + ".chromiumapp.org/" : o.protocol + "//" + o.host + "/" + (e.isLocalDev() ? "" : "webapp"),
authUrl: function(e, t) {
var i = this;
t = t || {}, t.redirect_uri = t.redirect_uri ? t.redirect_uri : i.redirectUrl;
var n, a, o = [];
for (n in t) a = encodeURIComponent(t[n]), o.push(n + "=" + a);
return e + o.join("&");
},
createService: function(t, i) {
l.accessToken = e.user.attributes.access_token;
var n = new s({
config: l
});
return n.connect(t, i);
}
});
}), define("helpers/ChromeIdentity", [ "application/runtime", "project!core/WBSingleton" ], function(e, t) {
var i = e.global, n = !1;
if (e.env.isChromeApp()) {
var a = i.chrome;
n = a && a.identity;
}
return t.extend({
identity: n
});
}), define("helpers/Auth/facebook", [ "application/runtime", "collections/ListCollection", "collections/ServiceCollection", "helpers/Auth/OAuthHelper", "helpers/ChromeIdentity", "project!core/WBSingleton", "project!core/WBDeferred" ], function(e, t, i, n, a, o, r, s) {
var l = e.global, d = e._, c = e.$, u = e.config, p = a.identity, m = e.env.isPackagedApp();
return o.extend({
providerName: "facebook",
authBaseUrl: "https://graph.facebook.com/oauth/authorize?",
authParams: function() {
return {
client_id: u.facebook.appID,
redirect_uri: n.redirectUrl,
type: "user_agent",
display: "page"
};
},
authUrl: function() {
var e = this, t = e.authParams();
return n.authUrl(e.authBaseUrl, t);
},
getFacebookOAuthToken: function(t, i) {
var a, o, s = this, d = l.location, c = new r();
o = "https://www.facebook.com/dialog/oauth?", a = d.protocol + "//" + d.hostname + (e.isLocalDev() ? "" : "/webapp"), 
a = a + "/?u=" + t, d.hash.length && (a += d.hash);
var p = [ "client_id=" + u.facebook.appID, "redirect_uri=" + encodeURIComponent(a) ];
p.push("response_type=token"), p.push("scope=email");
var g = o + p.join("&");
return m ? s.connectWithIdentity().done(function(e) {
i ? n.createService("facebook", e).done(c.resolve, c).fail(c.reject, c) : c.resolve(e);
}).fail(c.reject, c) : l.location.href = g, c.promise();
},
connectWithIdentity: function() {
var e = this, t = new r();
return p.launchWebAuthFlow({
url: e.authUrl(),
interactive: !0
}, function(i) {
var n = e.parseTokenString(i);
i !== s && n.token ? t.resolve(n.token) : t.reject();
}), t.promise();
},
getFacebookUserGraph: function(t, i) {
c.ajax({
url: "https://graph.facebook.com/v2.2/me",
type: "GET",
data: {
access_token: t,
fields: "id,name,email,picture"
},
dataType: m ? "json" : "jsonp",
xhrFields: {
withCredentials: !1
},
success: function(n) {
e.user.facebookData = n, e.user.facebookData.token = t;
var a = n.picture && n.picture.data && n.picture.data.url;
n.avatar = a || "https://graph.facebook.com/v2.2/" + n.id + "/picture?width=68&height=68", 
d.isFunction(i) && i(n);
},
error: function() {}
});
},
parseTokenString: function(e) {
var t = {}, i = e.split("&");
return d.each(i, function(e) {
if (e.indexOf("/") >= 0) {
var i = e.split("/");
t.url = d.initial(i).join("/");
}
if (e.indexOf("access_token=") >= 0) t.token = e.split("=")[1]; else {
var n = e.match(/^lists((\/\w*)*)/);
n && (t.url = n[0]);
}
}), t.url || (t.url = ""), t;
}
});
}), define("helpers/Auth/google", [ "application/runtime", "helpers/Auth/OAuthHelper", "helpers/ChromeIdentity", "wunderbits/BaseSingleton" ], function(e, t, i, n, a) {
function o(t, i) {
return e.$.ajax({
url: u + i,
xhrFields: {
withCredentials: !1
},
headers: {
Authorization: "Bearer " + t
}
});
}
var r = e.global, s = e.$, l = e._, d = e.config, c = i.identity, u = "https://www.googleapis.com/";
return n.extend({
providerName: "google",
authBaseUrl: "https://accounts.google.com/o/oauth2/auth?",
authParams: function(e) {
return {
client_id: d.google.webAppId,
response_type: "token",
redirect_uri: t.redirectUrl,
scope: d.google.scopes.join(" "),
state: e || "googleOAuthLogin"
};
},
authUrl: function(e) {
var i = this, n = i.authParams(e);
return t.authUrl(i.authBaseUrl, n);
},
connectWithGoogle: function(i, n) {
var o = this, d = o.deferred();
return e.env.isChromeApp() && c ? c.getAuthToken({
interactive: !0
}, function(e) {
return e === a ? d.reject() : (c.removeCachedAuthToken({
token: e
}, s.noop), void (n ? t.createService("google", e).done(d.resolve, d).fail(d.reject, d) : d.resolve(e)));
}) : l.defer(function() {
r.location.href = o.authUrl(i);
}), d.promise();
},
requestPlusProfile: function(e) {
var t = this, i = t.deferred();
return o(e, "plus/v1/people/me").done(function(n) {
var a = n.emails && n.emails[0] && n.emails[0].value, o = n.image && n.image.url;
i.resolve({
providerType: t.providerName,
providerId: n.id,
name: n.displayName,
email: a,
avatar: o,
locale: n.language,
confirmed: n.verified,
token: e
});
}).fail(function() {
i.reject();
}), i.promise();
}
});
}), define("routes/OAuthRoutesController", [ "application/runtime", "wunderbits/WBRoutesController", "helpers/Auth/facebook", "helpers/Auth/google", "project!core/WBDeferred" ], function(e, t, i, n, a, o) {
return t.extend({
checkForToken: function(t) {
var i = this;
if (i.params.state && /^fetchingGoogleContacts/.test(i.params.state)) {
var n = /:/.test(i.params.state) ? i.params.state.split(":")[1] : o;
e.trigger("route:inviteYourFriends/" + i.params.access_token + "/" + n);
} else if (i.params.u && !e.env.isPackagedApp()) {
var a = e.global.location.href, r = a.split("#"), s = decodeURIComponent(i.params.u || "");
i.params.u = null, "/" !== s[s.length - 1] && (s += "/"), a = s + r[1], e.reload(a);
} else if (t.indexOf("access_token=") >= 0 || i.isToken(t)) {
if (t.indexOf("googleOAuthLogin") >= 0 || t.indexOf("googleOAuthConnect") >= 0) return;
t.indexOf("&") >= 0 && (t = t.split("&")[0]), i.tryLoginWithFacebookToken(t);
} else i.router.open404();
},
isToken: function(e) {
return e.length < 30 || e && (e.indexOf("googleOAuthLogin") >= 0 || e.indexOf("googleOAuthConnect") >= 0) ? !1 : !!e.match(/\d/);
},
tryLoginWithFacebookToken: function(t) {
var n = e.user.isLoggedIn(), a = i.parseTokenString(t);
t = a.token || t, n.done(function() {
e.trigger("route:lists/inbox");
}), n.fail(function() {
var i = e.user.loginWithFacebookOAuth(t);
i.done(function() {
e.reload("/lists/inbox");
}), i.fail(function() {
e.trigger("route:signup/facebook/" + t);
});
});
},
tryLoginWithGoogleToken: function(t) {
var i = e.user.isLoggedIn();
i.done(function() {
e.trigger("route:lists/inbox");
}), i.fail(function() {
var i = e.user.loginWithOAuthToken(t, {
providerType: "google"
});
i.done(function() {
e.reload("/lists/inbox");
}), i.fail(function() {
e.trigger("route:signup/google/" + t);
});
});
}
});
}), define("wunderbits/WBFileUploader", [ "./lib/dependencies", "project!core/WBClass", "./helpers/SafeParse" ], function(e, t, i) {
var n = t.prototype, a = e._;
return t.extend({
initialize: function(e) {
var t = this;
n.initialize.apply(t, arguments), t.options = e || {}, t.acceptedFileTypes = e.acceptedFileTypes || "", 
t.uploadURL = e.uploadURL || "", t.uploadAction = e.uploadAction || "POST", t.customHeaders = e.customHeaders || "", 
t.fileKey = e.fileKey || "avatar", t.extraParams = e.extraParams, t.fileName = e.fileName || "", 
t.xhr = new XMLHttpRequest(), t.setupFormData();
},
isFileTypeAllowed: function(e) {
var t = this, i = e.type, n = t.getFileExtension(e);
return "" === i && n && (i = "application/" + n), -1 !== t.acceptedFileTypes.indexOf(i) || "" === t.acceptedFileTypes ? !0 : !1;
},
getFileExtension: function(e) {
return e.name.indexOf(".") >= 0 ? e.name.split(".").pop() : !1;
},
upload: function(e) {
var t = this;
if (t.file = e, t.isFileTypeAllowed(e)) {
if ("" !== t.fileName) {
var n = t.getFileExtension(e);
t.fileName = t.fileName + "." + n;
} else t.fileName = e.name;
if (t.formData.append(t.fileKey, e, t.fileName), t.extraParams) {
var o = a.pairs(t.extraParams);
a.each(o, function(e) {
t.formData.append(e[0], e[1]);
});
}
t.xhr.open(t.uploadAction, t.uploadURL, !0), t.customHeaders && t.setupCustomHeaders();
var r;
t.xhr.upload.addEventListener("progress", function(e) {
e.lengthComputable && (r = e.loaded / e.total * 100 | 0, r = r -= 5, t.onProgress(r));
}, !1), t.xhr.onreadystatechange = function() {
var e = t.xhr.readyState;
if (4 === e) {
var n = i.json(t.xhr.responseText);
t.onComplete(n);
}
}, t.xhr.addEventListener("error", function() {
t.onError(), t.file = null;
}, !1), t.xhr.send(t.formData);
}
},
setupFormData: function() {
var e = this;
e.formData = new FormData();
},
setupCustomHeaders: function() {
var e = this;
for (var t in e.customHeaders) "X-File-Name" !== t ? e.xhr.setRequestHeader(t, e.customHeaders[t]) : e.xhr.setRequestHeader(t, encodeURIComponent(e.file.name));
},
onProgress: function(e) {
var t = this;
t.options && t.options.onProgress && t.options.onProgress(e);
},
onComplete: function(e) {
var t = this;
e ? t.options.onUploadComplete(e) : t.onError(), t.file = null;
},
onError: function() {
var e = this;
e.options.onError && "function" == typeof e.options.onError && e.options.onError();
}
});
}), define("helpers/BlobHelper", [ "application/runtime", "project!core/WBSingleton", "project!core/WBDeferred" ], function(e, t, i) {
function n(e) {
return function(t) {
var i = t.target, n = 4 === i.readyState;
if (n && 200 === i.status) {
var a = o.createObjectURL(i.response);
e.resolve(a);
} else n && e.reject();
};
}
var a = e.global, o = e.global.URL || e.global.webkitURL, r = e.$, s = {}, l = {};
return t.extend({
dataURItoBlob: function(e) {
for (var t = a.Blob, i = a.ArrayBuffer, n = a.DataView, o = a.atob(e.split(",")[1]), r = e.split(",")[0].split(":")[1].split(";")[0], s = new i(o.length), l = new n(s), d = 0; d < o.length; d++) l.setUint8(d, o.charCodeAt(d));
return new t([ s ], {
type: r
});
},
fetchDataURI: function(e) {
var t = this;
return /^data:/.test(e) ? new i().resolve(e) : e in s ? new i().resolve(s[e]) : e in l ? l[e] : t.xhrRequest(e);
},
xhrRequest: function(e) {
var t = new i(), a = t.promise();
l[e] = a;
try {
var o = new XMLHttpRequest();
o.open("GET", e, !0), o.responseType = "blob", o.onreadystatechange = n(t), o.send();
} catch (r) {
t.reject(r);
}
return t.done(function(t) {
s[e] = t;
}).always(function() {
delete l[e];
}), a;
},
loadImage: function(t, i, n, a) {
var o = this;
i = i instanceof r ? i : r(i), o.fetchDataURI(t).done(function(e) {
i.attr("src", e), n && n();
}).fail(function() {
e.env.isPackagedApp() ? a && a() : (n && (i[0].onload = n), a && (i[0].onerror = a), 
i.attr("src", t));
});
}
});
}), define("routes/StartRoutesController", [ "application/runtime", "project!database", "wunderbits/WBRoutesController", "wunderbits/WBFileUploader", "helpers/BlobHelper", "helpers/PlatformHeaders", "project!core/lib/createUID" ], function(e, t, i, n, a, o, r) {
var s = e._, l = e.config, d = new t.WBLocalStorage();
return i.extend({
hasStarted: !1,
startApp: function(t) {
var i = this, n = i.deferred().resolve();
return e.trigger("set:loadContext", "login"), t = t.replace("start/"), s.defer(function() {
i.router.isInitialRoute = !0, e.trigger("route:" + t);
}), i.hasStarted = !0, n.promise();
},
startAppFirstTime: function(t) {
var i = this;
if (!i.hasStarted) {
i.ensureChromeUID();
var n = e.settings.toJSON();
e.settings.changed = n, e.settings.trigger("change", e.settings, {}), i.uploadCachedAvatar(), 
e.trigger("onboarding:newUser");
var a;
return a = t.indexOf("business") >= 0 ? "chooseBusinessLists" : "chooseLists", i.startApp(a);
}
t = t.replace("setup/"), s.defer(function() {
i.router.isInitialRoute = !0, e.trigger("route:" + t);
});
},
uploadCachedAvatar: function() {
var t = this, i = t.deferred();
return d.getItem("localAvatar").always(function(r) {
if (!r) return i.resolve().promise();
var c = a.dataURItoBlob(r);
d.getItem("localAvatarName").done(function(a) {
c.name = a;
var r = s.extend({
"X-Access-Token": e.user.attributes.access_token,
"X-Client-ID": l.clientID,
"X-Requested-With": "XMLHttpRequest",
"X-File-Name": a
}, o.headers);
t.fileUploader = new n({
acceptedFileTypes: [ "image/gif", "image/jpeg", "image/png" ],
uploadAction: "POST",
uploadURL: l.api.host + "/v1/avatar",
customHeaders: r,
fileName: "newAvatar",
onProgress: function() {},
onUploadComplete: function() {
d.removeItem("localAvatar").always(i.resolve, i);
}
}), t.bindTo(e, "user:ready", function() {
t.fileUploader.upload(c);
});
});
}), i.promise();
},
ensureChromeUID: function() {
var t = "chromebook-uid";
e.env.isChromeOS() && e.env.isChromeApp() && e.isInstalledOnChrome() && e.global.chrome.storage.local.get(t, function(i) {
i && i[t] || (i = {}, i[t] = r(), e.global.chrome.storage.local.set(i));
});
}
});
}), define("routes/ModalRoutesController", [ "application/runtime", "wunderbits/WBRoutesController" ], function(e, t, i) {
var n = e._, a = t.prototype;
return t.extend({
name: i,
initialize: function() {
var e = this;
if (a.initialize.apply(e, arguments), !e.name) throw new Error("Cannot initialize without name");
},
show: function() {
var e = this, t = e.deferred();
return e.router.whenInterfaceHasLoaded().done(function() {
e.beforeShow(t), "pending" === t.state() && (e.showModal(), t.resolve());
}), t.promise();
},
beforeShow: function() {
var t = this;
e.trigger("confirmation:cancel"), t.stillActive || e.trigger("modal:close");
},
showModal: function() {
var t = this;
t.triggerUrl = e.currentRoute(), e.trigger("modal:show", t.name, t.getOptions()), 
n.defer(function() {
e.trigger("focus:set", t.focus || t.name);
});
},
shouldTriggerReturnUrl: function() {
var t = this;
return e.currentRoute() === t.triggerUrl;
},
afterClose: function() {
var e = this, t = e.router, i = e.returnRoute || t.interfaceReturnRoute || t.defaultRoute;
e.shouldTriggerReturnUrl(i) && t.setRoute(i);
},
getOptions: function() {
var e = this;
return {
onClose: function() {
e.afterClose();
}
};
}
});
}), define("routes/FlashCardsRoutesController", [ "application/runtime", "./ModalRoutesController" ], function(e, t) {
var i = t.prototype;
return t.extend({
name: "flashCards",
runForList: function(e) {
var t = this, i = t.router, n = t.deferred();
return t.listId = e || "inbox", i.whenListHasLoaded(t.listId).done(function(e) {
t.returnRoute = e.route(), t.show().done(n.resolve, n);
}), n.promise();
},
getOptions: function() {
var e = this, t = i.getOptions.apply(e, arguments);
return t.listId = e.listId, t;
}
});
}), define("mixins/ResourceMixin", [ "application/runtime", "project!core/WBMixin" ], function(e, t, i) {
return t.extend({
getResource: function(e, t) {
var i = this;
return t = t || i.deferred(), i.router.whenAuthorized(function() {
i.router[i.resourceName + "sDeferred"].done(function(n) {
var a = n.get(e);
a ? t.resolve(a) : i.handleNotFound(e, t);
});
}), t.promise();
},
handleNotFound: function(t, n) {
var a = this;
a.open404(n), e.lastListID = i;
},
open404: function(e) {
var t = this;
e.reject(), t.router.open404(t.resourceName);
}
});
}), define("routes/ResourceRoutesController", [ "wunderbits/WBRoutesController", "mixins/ResourceMixin" ], function(e, t) {
var i = e.prototype;
return e.extend({
mixins: [ t ],
initialize: function() {
var e = this;
i.initialize.apply(e, arguments), e.createReadyDeferred();
},
createReadyDeferred: function() {
var e = this, t = e.deferred();
e.router.whenAuthorized(function() {
e.router[e.resourceName + "sDeferred"].done(function(e) {
t.resolve(e);
});
}), e[e.resourceName + "sReady"] = t.promise();
},
setFocus: function() {}
});
}), define("languages/available", {
name: "available",
data: {
ar: {
file: "arabic",
name: "‏العربية‏",
dir: "rtl"
},
bg_BG: {
file: "bulgarian",
name: "Български"
},
ca_ES: {
file: "catalan",
name: "Català"
},
cs_CZ: {
file: "czech",
name: "Čeština"
},
da_DK: {
file: "danish",
name: "Dansk"
},
de_DE: {
file: "german",
name: "Deutsch"
},
en_US: {
file: "english",
name: "English"
},
es_LA: {
file: "spanish",
name: "Español"
},
fa_IR: {
file: "persian",
name: "‏فارسی‏",
dir: "rtl"
},
fr_FR: {
file: "french",
name: "Français"
},
el_GR: {
file: "greek",
name: "Ελληνικά"
},
he_IL: {
file: "hebrew",
name: "‏עברית‏",
dir: "rtl"
},
hu_HU: {
file: "hungarian",
name: "Magyar"
},
is_IS: {
file: "icelandic",
name: "Íslenska"
},
it_IT: {
file: "italian",
name: "Italiano"
},
ja_JP: {
file: "japanese",
name: "日本語"
},
ka_GE: {
file: "georgian",
name: "ქართული"
},
ko_KR: {
file: "korean",
name: "한국어"
},
mt_MT: {
file: "maltese",
name: "Malti"
},
my_MY: {
file: "burmese",
name: "မြန်မာဘာသာ"
},
nl_NL: {
file: "dutch",
name: "Nederlands"
},
nb_NO: {
file: "norwegian-bokmal",
name: "Norsk (bokmål)"
},
pl_PL: {
file: "polish",
name: "Polski"
},
pt_BR: {
file: "portuguese-brazil",
name: "Português (Brasil)"
},
pt_PT: {
file: "portuguese",
name: "Português"
},
ro_RO: {
file: "romanian",
name: "Română"
},
ru_RU: {
file: "russian",
name: "Русский"
},
sk_SK: {
file: "slovak",
name: "Slovenčina"
},
sq_AL: {
file: "albanian",
name: "Shqip"
},
sv_SE: {
file: "swedish",
name: "Svenska"
},
th_TH: {
file: "thai",
name: "ภาษาไทย"
},
tr_TR: {
file: "turkish",
name: "Türkçe"
},
zh_CN: {
file: "simplified-chinese-china",
name: "中文(简体)"
},
zh_TW: {
file: "chinese-taiwan",
name: "中文(台灣)"
},
aliases: {
bg: "bg_BG",
ca: "ca_ES",
da: "da_DK",
de: "de_DE",
el: "el_GR",
en: "en_US",
es: "es_LA",
fa: "fa_IR",
fr: "fr_FR",
grk: "el_GR",
he: "he_IL",
hu: "hu_HU",
is: "is_IS",
it: "it_IT",
ja: "ja_JP",
ka: "ka_GE",
ko: "ko_KR",
mt: "mt_MT",
my: "my_MY",
nl: "nl_NL",
no: "nb_NO",
pl: "pl_PL",
pt: "pt_PT",
ro: "ro_RO",
ru: "ru_RU",
sk: "sk_SK",
sv: "sv_SE",
tr: "tr_TR"
}
}
}), define("wunderbits/helpers/xss", [ "project!core/WBSingleton" ], function(e) {
return e.extend({
clean: function(e) {
return e || (e = ""), e = e.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#x27;").replace(/\//g, "&#x2F;");
},
reverseClean: function(e) {
return e || (e = ""), e = e.replace(/\%/g, "&#37;"), e = decodeURIComponent(e), 
e.replace(/&amp;/g, "&").replace(/&lt;/g, "<").replace(/&gt;/g, ">").replace(/&quot;/g, '"').replace(/&#39;/g, "'").replace(/&#x27;/g, "'").replace(/&#x2F;/g, "/").replace(/&#37;/g, "%");
}
});
}), define("wunderbits/WBLanguageManager", [ "require", "./lib/dependencies", "vendor/handlebars.runtime", "languages/available", "./helpers/xss", "project!core/WBSingleton", "project!core/mixins/WBEventsMixin", "project!core/mixins/WBBindableMixin" ], function(e, t, i, n, a, o, r, s) {
function l(e) {
return "-" === e[2] && (e = e.split("-"), e[1] = e[1].toUpperCase(), e = e.join("_")), 
e;
}
var d = window, c = t._, u = "en_US", p = n.data || {}, m = p.aliases || {};
delete p.aliases;
var g = {}, f = o.extend({
mixins: [ s, r ],
getKeys: function() {
return g.keys;
},
detectLang: function() {
for (var e = d.navigator, t = l(e.userLanguage || e.language || u); t in m; ) t = l(m[t]);
return t;
},
fetchData: function(t) {
var i = this, n = p;
t = t || u;
var a = n[t] || n[t.substr(0, 2)];
a = a || n[u] || n[u.substr(0, 2)], e([ "languages/" + a.file ], function(e) {
i._dataLoaded(t, a, e);
});
},
getLabel: function() {
var e = c.toArray(arguments), t = e.shift(), n = e[e.length - 1];
n && n.hash && (n = e.pop());
var a = '<text rel="' + t + '"';
return e.length && (a += ' data="' + e.join("☃") + '"'), a += "></text>", new i.SafeString(a);
},
getText: function() {
var e = this, t = c.toArray(arguments), i = g.keys, n = t.shift(), o = i[n];
if (o) {
if (t && t.length) {
var r = 0;
return o = o.replace(/\$([^0-9]|$)/g, function(e, t) {
return "$" + ++r + (t || "");
}), t = e.localizationception(t), r = 0, o = o.replace(/\$([0-9])/g, function() {
var e = a.clean(t[r].toString()), i = e;
return r++, i;
});
}
return o;
}
},
localizationception: function(e) {
for (var t, i, n = g.keys, a = 0, o = e.length; o > a; a++) t = "" + e[a], i = n[t.substr(1)], 
"$" === t[0] && i && (e[a] = i);
return e;
},
_dataLoaded: function(e, t, i) {
var n = this;
g.name = i.name, g.keys = i.data, n.trigger("done", e, t, i);
}
});
return i.registerHelper("localized", f.getLabel), f;
}), define("wunderbits/helpers/date", [ "vendor/moment", "../WBLanguageManager", "project!core/WBSingleton" ], function(e, t, i) {
return i.extend({
humanizeDueDate: function(i, n, a) {
var o, r = e().sod(), s = e(i).sod(), l = r.diff(s, "days"), d = n || "DD.MM.YYYY";
if (0 === l) o = "today"; else if (1 === l) o = "yesterday"; else {
if (-1 !== l) return e(i).format(d);
o = "tomorrow";
}
return o = "label_relative_date_" + o, a ? o : t.getLabel(o).toString();
},
isHumanizeable: function(t) {
var i = e().sod(), n = e(t).sod(), a = i.diff(n, "days");
return 0 === a || 1 === a || -1 === a ? !0 : !1;
},
humanizeDueIn: function(t) {
var i = e(), n = e(t), a = n.diff(i, "minutes");
return e.duration(a, "minutes").humanize();
},
isOverdue: function(t) {
var i = e().sod().unix(), n = e(t).sod().unix();
return i > n;
},
now: function(e) {
return e || (e = new Date()), e.setHours(0), e.setMinutes(0), e.setSeconds(0), e.setMilliseconds(0), 
Math.floor(e.getTime() / 1e3);
},
getServerNow: function() {
var t = e().add("minutes", e().zone()).format("YYYY-MM-DDTHH:mm:ss");
return t + "Z";
},
getServerNowWithMilliseconds: function() {
var t = e().add("minutes", e().zone()).format("YYYY-MM-DDTHH:mm:ss.SSS");
return t + "Z";
},
convertLocalTimeToServerTime: function(t) {
var i = e(t).add("minutes", e(t, "YYYY-MM-DDTHH:mm:ss").zone()).format("YYYY-MM-DDTHH:mm:ss");
return i + "Z";
},
convertServerTimeToLocalTime: function(t) {
t = t.replace("Z", "");
var i = e(t).subtract("minutes", e(t, "YYYY-MM-DDTHH:mm:ss").zone()).format("YYYY-MM-DDTHH:mm:ss");
return i;
},
convertHourTo24HourTime: function(e, t) {
t = t ? t.toLowerCase() : null;
var i = 12 !== e && "pm" === t, n = 12 === e && "am" === t;
return e = i ? e + 12 : n ? 0 : e;
},
convertServerDateToLocalDate: function(e) {
return e;
},
convertLocalDateToServerDate: function(e) {
return e;
},
ISOString: function(e) {
return e ? !(e instanceof Date) && (e = new Date(e)) : e = new Date(), e.setMilliseconds(0), 
e.toISOString().replace(".000Z", "Z");
},
getDatesFromNow: function(e, t) {
var i = {};
return t += "Date", i.today = 0 === e[t].diff(e.today, "days"), i.yesterday = -1 === e[t].diff(e.today, "days"), 
i.earlier = e[t].diff(e.thisYear) < 0, i;
},
getDefaultTimeFormat: function(e) {
switch (e) {
case "en":
case "es":
case "gr":
case "ja":
case "ko":
case "zh":
return "12 hour";

default:
return "24 hour";
}
}
});
}), define("models/TaskModel", [ "application/runtime", "vendor/moment", "wunderbits/helpers/date", "project!core/WBStateModel", "../collections/ListCollection", "../collections/UserCollection", "./ListResourceBaseModel" ], function(e, t, i, n, a, o, r, s) {
var l = e._, d = new a("/lists/all"), c = r.prototype;
return r.extend({
storeName: "tasks",
defaults: {
type: "task",
assignee_id: null,
completed: !1,
starred: !1,
hasFiles: !1,
hasNote: !1,
hasSubtasks: !1,
created_at: null,
completed_at: null,
recurrence_type: s,
recurrence_count: s,
recurring_parent_id: null,
due_date: null,
position: s,
unreadCount: 0
},
initialize: function() {
var e = this;
c.initialize.apply(e, arguments), e.attributes.created_at || e.set({
created_at: i.convertLocalTimeToServerTime(new Date().toISOString())
}), e["transient"] = new n({
active: !1,
selected: !1
});
},
sync: function(e, t, i) {
var n = this;
n.id && n.isCompleted() ? c.sync.apply(n, [ "delete", t, i ]) : c.sync.apply(n, arguments);
},
getId: function() {
var e = this;
return e.attributes.online_id || e.id;
},
getList: function() {
return d.get(this.attributes.list_id);
},
route: function(e) {
var t = this;
return e && "/" !== e[0] && (e = "/" + e), "tasks/" + t.getId() + (e || "");
},
isRouteActive: function() {
var t = this;
return 0 === e.currentRoute().indexOf(t.route());
},
isInList: function(e) {
var t = this, i = t.collection && t.collection.constructor("/lists/" + e + "/tasks");
return i && !!i.get(t.id);
},
isInSmartList: function(e) {
var t = this, i = "/tasks/filter/" + e, n = t.collection && t.collection.constructor(i), a = n && !!n.get(t.id);
return a;
},
isInCurrentList: function() {
var t = this, i = e.listId, n = t.isInList(i), a = t.isInSmartList(i);
return n || a;
},
isInWeekCollection: function() {
var e = this, t = e.dueFromNow();
return !e.isCompleted() && e.isInSmartList("week") && l.isNumber(t) && 6 >= t;
},
isInTodayCollection: function() {
var e = this, t = e.dueFromNow();
return !e.isCompleted() && e.isInSmartList("today") && l.isNumber(t) && 0 >= t;
},
isSelected: function() {
var e = this;
return !!e["transient"].attributes.selected;
},
isActive: function() {
var e = this;
return !!e["transient"].attributes.active;
},
isStarred: function() {
return this.attributes.starred;
},
isAssigned: function() {
return this.has("assignee_id");
},
isAssignedToMe: function() {
return e.user.isIDEqual(this.attributes.assignee_id);
},
isCompleted: function() {
return !!this.attributes.completed;
},
hasNote: function() {
return !!this.attributes.hasNote;
},
hasSubtasks: function() {
return this.attributes.hasSubtasks;
},
hasFiles: function() {
return this.get("hasFiles");
},
hasComments: function() {
return this.attributes.hasComments;
},
hasUnreadComments: function() {
return this.attributes.hasUnreadComments;
},
hasDueDate: function() {
return this.has("due_date");
},
hasAttachment: function() {
var e = this;
return e.hasNote() || e.hasSubtasks() || e.hasFiles() || !1;
},
dueFromNow: function() {
var e = this.attributes.due_date, i = t().sod(), n = e && t(e, "YYYY-MM-DD").sod();
return e ? n.diff(i, "days") : !1;
},
getHumanFormattedDatesForKey: function(i, n) {
var a = this;
if (!i) throw new Error("Cannot format date without defining what key to use");
var o = i + "_on", r = i + "_at", s = i + "Relative", l = {}, d = a.attributes[r];
return n.yesterday ? (l[o] = e.language.getText("label_relative_date_yesterday"), 
l[s] = !0) : n.earlier ? l[o] = d && t(d).format("MMM DD, YYYY") : n.today ? (l[o] = d && t(d).fromNow(), 
l[s] = !0) : l[o] = d && t(d).format("ddd, MMM DD"), l;
},
getHumanFormattedDates: function() {
var e = this, t = e.isCompleted() ? "completed" : "created", n = t + "At", a = i.getDatesFromNow(e.getSoDDates(), n);
return e.getHumanFormattedDatesForKey(t, a);
},
getSoDDates: function() {
var e = this, i = {
createdAtDate: t(e.attributes.created_at).startOf("day"),
thisYear: t().startOf("year"),
today: t().startOf("day"),
completedAtDate: s
};
if (e.isCompleted()) {
var n = e.attributes.completed_at && t(e.attributes.completed_at);
i.completedAtDate = n ? n.startOf("day") : t().startOf("day");
}
return i;
},
belongsToMe: function() {
var e = this, t = e.getList();
return t && t.isShared() ? e.isAssignedToMe() : !!t;
},
getARIAString: function() {
var t = this, i = t.attributes, n = i.title;
return n += t.getCompletedString(), n += t.getCommentsString(), n += t.getAttachmentsString(), 
n += t.getDueDateString(), n += t.getRepeatString(), n += t.getAssignmentString(), 
n += t.getStarredString(), n += e.language.getText("aria_more_options_via_tab");
},
getAssignmentString: function() {
var t = this, i = "";
if (t.isAssigned()) {
var n = t.attributes, a = new o("/lists/" + n.list_id + "/assignables"), r = a.get(n.assignee_id), s = r && r.attributes.name;
s && (i += "" + e.language.getText("aria_assigned_to_$", s));
}
return i;
},
getAttachmentsString: function() {
var t = "";
return this.hasAttachment() && (t += " " + e.language.getText("aria_has_attachments")), 
t;
},
getCommentsString: function() {
var t = "";
return this.hasComments() && (t += " " + e.language.getText("aria_has_comments")), 
t;
},
getCompletedString: function() {
var t = "";
return this.isCompleted() && (t += " " + e.language.getText("voiceover_task_completed")), 
t;
},
getDueDateString: function() {
var n = this, a = n.attributes, o = "";
if (n.hasDueDate()) {
var r, s = i.convertServerDateToLocalDate(a.due_date), l = s && i.humanizeDueDate(s, null, !0);
r = i.isHumanizeable(s) && -1 !== l.indexOf("label_relative_date_") ? e.language.getText("label_due_$", "$" + l) : e.language.getText("label_due_on", t(s, "YYYY-MM-DD").format("ddd, MMM D, YYYY")), 
o += " " + r;
}
return o;
},
getRepeatString: function() {
var t = this, i = t.attributes, n = i.recurrence_type, a = i.recurrence_count, o = "";
if (n && a && "none" !== n.toLowerCase() && "s" !== l.last(n)) {
var r;
1 === a ? r = e.language.getText("label_repeat_" + n).toString() : a > 1 && (r = e.language.getText("label_repeat_" + n + "_$_plural", a).toString()), 
r && (o = " " + r);
}
return o;
},
getStarredString: function() {
var t = "";
return this.isStarred() && (t += " " + e.language.getText("voiceover_task_starred")), 
t;
}
});
}), function(e) {
function t(e, t, i) {
for (var n = 0, a = e ? e.length : n; a > n; ) {
var o = n + a >>> 1;
i(e[o], t) > 0 ? n = o + 1 : a = o;
}
return n;
}
"function" == typeof define && define.amd ? define("vendor/sortedindex-compare", [], function() {
return t;
}) : "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = t), 
exports.sortedIndex = t) : e.sortedIndex = t;
}(this), define("collections/SortedCollectionMixin", [ "application/runtime", "project!core/WBMixin", "vendor/sortedindex-compare" ], function(e, t, i, n) {
var a = e._, o = function() {
var e;
return function(t) {
return e || (e = Object.getPrototypeOf(Object.getPrototypeOf(t))), e;
};
}(), r = t.extend({
enableSortedCollection: function(e, t) {
var i = this;
i.sorter = e;
var n = t.map(function(e) {
return "change:" + e;
}).join(" ");
n.length && i.on(n, i._sortTaskOnPropertyChange);
},
set: function(e, t) {
var i = this;
return i.getSorter && i.getSorter(), i.sorter ? i._sortingSet(e, t) : o(i).set.call(i, e, t);
},
_sortingSet: function(e, t) {
var i = this;
if (!e) return e;
var n = !Array.isArray(e);
return n && (e = [ e ]), e = e.map(function(e) {
return i._prepareModel(e);
}), e.forEach(function(e) {
var n = i._removeModelIfNeeded(e);
i._addReference(e);
var a = i._insertModel(e);
i._fireAddOrMoveEvent(e, n, a, t);
}), n ? e[0] : e;
},
_insertModel: function(e) {
var t = this, i = t._getInsertionIndex(e);
return t.models.splice(i, 0, e), t.length = t.models.length, i;
},
_removeModelIfNeeded: function(e) {
var t, i = this;
return i.get(e.id) ? (t = i.indexOf(e), i.remove(e, {
silent: !0
}), t) : !1;
},
_fireAddOrMoveEvent: function(e, t, i, n) {
var o, r = this;
t !== !1 ? (o = a.extend({}, n, {
fromIndex: t,
index: i
}), e.trigger("move", e, r, o)) : (o = a.extend({}, n, {
index: i
}), e.trigger("add", e, r, o));
},
resortModelIfPresentInCollection: function(e, t) {
var i = this;
return -1 !== i.indexOf(e) ? i._sortTaskOnPropertyChange(e, null, t) : void 0;
},
_sortTaskOnPropertyChange: function(e, t, i) {
var n = this, o = n._adjustTaskIndexToSortScore(e);
o.fromIndex !== o.index && n.trigger("move", e, n, a.extend({}, i, o));
},
_adjustTaskIndexToSortScore: function(t) {
var i, a = this, o = a.indexOf(t);
if (0 > o) {
var r = "Inside a change event, the model does not appear in the collection. Sorting might be messed up by this.", s = new Error(r);
return e.error.exception(s, "CollectionChangeEventError"), void console.error(r);
}
return a.models.splice(o, 1), i = a._getInsertionIndex(t), a.models.splice(i, 0, t), 
-1 === o && (o = n), {
fromIndex: o,
index: i
};
},
_getInsertionIndex: function(e) {
var t = this;
return i(t.models, e, t.sorter);
},
sort: function() {
var e = this;
e.sorter || o(e).sort.apply(e, arguments);
},
_areModelsSorted: function() {
var e = this;
return !e.models.some(function(t, i) {
return 0 !== i ? e.sorter(e.models[i - 1]) > e.sorter(t) : !1;
});
},
_getMissingIDsInModels: function() {
var e = this;
return e.models.filter(function(t) {
return !e._byId[t.id];
});
},
_getDuplicates: function() {
var e = this;
return e.models.filter(function(t, i) {
return e.models.some(function(e, n) {
return i !== n && t.id === e.id;
});
});
},
_checkSorted: function() {
var t = this;
if (!t._areModelsSorted()) {
var i = t.models.map(t.sorter), n = t._createErrorMessage("Models are not sorted anymore " + JSON.stringify(i)), a = new Error(n);
e.error.exception(a, "CollectionOrderError"), console.error(n);
}
},
_createErrorMessage: function(e) {
return this.constructor + " " + e;
},
_checkDuplicates: function() {
var t = this, i = t._getDuplicates();
if (0 !== i.length) {
var n = i.map(function(e) {
return e.id;
}), a = t._createErrorMessage("self.models contains a model twice, which will screw up sorting eventually. Duplicated IDs: " + JSON.stringify(n)), o = new Error(a);
e.error.exception(o, "CollectionDuplicateError"), console.error(a);
}
},
_checkIDs: function() {
var t = this, i = t._getMissingIDsInModels();
if (0 !== i.length) {
var n = t.models.map(function(e) {
return e.id;
}), a = t._createErrorMessage("_byId is missing the following IDs: " + JSON.stringify(i) + ", models contains these ids: " + JSON.stringify(n)), o = new Error(a);
e.error.exception(o, "CollectionHashError"), console.error(a);
}
},
_checkInconsistencies: function(e) {
var t = this;
t._checkDuplicates(), t._checkIDs(), e || t._checkSorted();
}
});
return r;
}), define("collections/SortedCollection", [ "application/runtime", "models/TaskModel", "collections/SortedCollectionMixin", "project!core/mixins/WBBindableMixin", "project!core/WBClass", "wunderbits/lib/dependencies" ], function(e, t, i, n, a, o) {
var r = e._, s = o.Backbone, l = s.Collection.prototype, d = s.Collection.extend(r.extend({}, a.prototype, {
initialize: function() {
var e = this;
e.initialize = function() {}, a.call(e), delete e.initialize, a.prototype.initialize.call(e), 
l.initialize.call(e);
}
}));
return n.applyToClass(d), i.applyToClass(d), d;
}), define("collections/FilteredTaskCollection", [ "models/TaskModel", "collections/SortedCollection" ], function(e, t) {
return t.extend({
model: e,
initialize: function(e, i) {
var n = this;
t.prototype.initialize.call(n);
var a = i.sortProperties.filter(function(e) {
return -1 === i.filterProperties.indexOf(e);
});
n.enableSortedCollection(i.sorter, a), n.filterFunction = i.filter, n.sourceCollection = i.sourceCollection, 
n.allSortProperties = i.sortProperties, n.filterEvents = i.filterProperties.map(function(e) {
return "change:" + e;
}).join(" ");
},
bindRemovingEvents: function() {
var e = this;
e.filterEvents.length && e.bindTo(e.sourceCollection, e.filterEvents, e.removeModelIfNeeded), 
e.bindTo(e.sourceCollection, "reset", e.forwardReset), e.bindTo(e.sourceCollection, "remove", e.forwardRemove);
},
bindAddingEvents: function() {
var e = this;
e.filterEvents.length && e.bindTo(e.sourceCollection, e.filterEvents, e.forwardAddIfNotAlreadyAdded), 
e.bindTo(e.sourceCollection, "add", e.forwardAdd);
},
removeModelIfNeeded: function(e, t, i) {
var n = this;
if (n.filterFunction(e)) {
var a = Object.keys(e.previousAttributes()), o = a.filter(function(e) {
return -1 !== n.allSortProperties.indexOf(e);
});
o.length && n.resortModelIfPresentInCollection(e);
} else n.remove(e, i);
},
set: function(e, i) {
var n = this;
e && (Array.isArray(e) || (e = [ e ]), e = e.filter(n.filterFunction), t.prototype.set.call(n, e, i));
},
forwardRemove: function(e, t, i) {
var n = this;
n.remove(e, i);
},
forwardReset: function() {
var e = this, t = e.sourceCollection.models;
t = t.filter(e.filterFunction), e.reset(t);
},
forwardAdd: function(e, t, i) {
var n = this;
n.add(e, i);
},
forwardAddIfNotAlreadyAdded: function(e, t, i) {
var n = this;
n.get(e) || n.add(e, i);
}
});
}), define("collections/comparators", [ "vendor/moment", "collections/ListCollection" ], function(e, t) {
function i(e, t) {
var i = e.attributes ? e.attributes : e;
return i[t];
}
function n(e) {
return "number" == typeof e;
}
function a(e) {
return "string" == typeof e && 0 !== e.length;
}
function o(t) {
return e(t, "YYYY-MM-DD").sod();
}
var r = new t("/lists/all"), s = {
taskListPosition: function(e, t) {
var n = i(e, "list_id"), a = i(t, "list_id"), o = r.get(n) || {}, l = r.get(a) || {};
return n === a ? s.position(e, t) : "inbox" === n ? 1 : "inbox" === a ? -1 : s.position(o, l);
},
position: function(e, t) {
var a, o, r = i(e, "position"), s = i(t, "position"), l = n(r), d = n(s);
return l && d ? s - r : l ? 1 : d ? -1 : (a = i(e, "id"), o = i(t, "id"), o > a ? 1 : -1);
},
completedAt: function(e, t) {
var n = new Date(i(e, "completed_at")), a = new Date(i(t, "completed_at"));
return n.valueOf() - a.valueOf();
},
starred: function(e, t) {
var n = i(e, "starred"), a = i(t, "starred");
return a !== n ? a ? 1 : -1 : s.position(e, t);
},
completed: function(e, t) {
var n = i(e, "completed"), a = i(t, "completed");
return a !== n ? a ? 1 : -1 : s.position(e, t);
},
assigneeId: function(e, t) {
var n = i(e, "assignee_id"), o = i(t, "assignee_id");
return n !== o ? a(n) && a(o) ? o > n ? 1 : -1 : a(n) ? -1 : 1 : s.position(e, t);
},
dueDate: function(t, n) {
var a = o(i(t, "due_date")), r = o(i(n, "due_date")), l = e().sod(), d = a.diff(l, "days"), c = r.diff(l, "days");
return d === c ? s.position(t, n) : c - d;
},
dueDateTodayGroup: function(t, n) {
var a = o(i(t, "due_date")), r = o(i(n, "due_date")), l = e().sod(), d = a.diff(l, "days"), c = r.diff(l, "days");
return d === c ? s.taskListPosition(t, n) : c - d;
}
};
return s;
}), define("collections/TaskCollection", [ "application/runtime", "vendor/moment", "models/TaskModel", "./BaseCollection", "collections/SortedCollectionMixin", "collections/FilteredTaskCollection", "collections/comparators" ], function(e, t, i, n, a, o, r) {
function s(e, t, i) {
return e + t * (i + 1);
}
var l = e._, d = n.prototype, c = n.extend({
model: i,
initialize: function() {
var e = this;
d.initialize.apply(e, arguments), e.sorter = null, e.isSpecificTaskList() && e._createSubCollections(), 
e._createOverdueCollection();
},
checkPositions: function() {},
_createSubCollections: function() {
var e = this;
e.doneTasks && e.openTasks || (e.doneTasks = new o(e.models, {
sorter: r.completedAt,
sortProperties: [ "completed_at" ],
filter: function(e) {
return !!e.attributes.completed;
},
filterProperties: [ "completed" ],
sourceCollection: e
}), e.openTasks = new o(e.models, {
sorter: r.position,
sortProperties: [ "position" ],
filter: function(e) {
return !e.attributes.completed;
},
filterProperties: [ "completed" ],
sourceCollection: e
}), e.openTasksWithPosition = new o(e.openTasks.models, {
sorter: r.position,
sortProperties: [ "position" ],
filter: function(e) {
return !isNaN(e.attributes.position);
},
filterProperties: [ "position" ],
sourceCollection: e.openTasks
}), [ "doneTasks", "openTasks", "openTasksWithPosition" ].forEach(function(t) {
e[t].bindRemovingEvents(), e[t].bindAddingEvents();
}));
},
_createOverdueCollection: function() {
var e = this;
e.overdueTasks = new o(e.models, {
sorter: r.position,
sortProperties: [ "position" ],
filter: function(e) {
var t = e.attributes;
if (t.completed || !t.due_date) return !1;
var i = e.dueFromNow(), n = l.isNumber(i) && 0 > i;
return !!n;
},
filterProperties: [ "due_date", "completed" ],
sourceCollection: e
}), e.overdueTasks.bindRemovingEvents(), e.overdueTasks.bindAddingEvents();
},
getSorter: function() {
var e = this;
return !e.sorter && e.isSpecificTaskList() && e.enableSortedCollection(r.position, [ "position" ]), 
e.sorter;
},
isSpecificTaskList: function() {
var e = this;
return e.url && 0 === e.url.indexOf("/lists/") && e.url.indexOf("/tasks") === e.url.length - 6;
},
validateTask: function(e) {
return !e.attributes.completed;
},
filterByIds: function(e) {
return this.models.filter(function(t) {
return l.contains(e, t.id);
});
},
getDoneTasks: function() {
var e = this;
if (!e.isSpecificTaskList()) throw new Error("wrong url");
return e.doneTasks;
},
getOpenTasks: function() {
var e = this;
if (!e.isSpecificTaskList()) throw new Error("wrong url");
return e.openTasks;
},
getPreviousPosition: function(e, t) {
var i = this, n = i.openTasksWithPosition, a = e && i.get(e);
return a ? a.attributes.position : n.length ? n.at(0).attributes.position - 10 * (t + 1) : -10;
},
getNextPosition: function(e, t) {
var i = this, n = i.openTasksWithPosition, a = e && i.get(e);
return a ? a.attributes.position : n.length ? n.at(n.length - 1).attributes.position + 10 * (t + 1) : 10 * (t + 1);
},
getPositionInterpolatorBetweenIds: function(e, t, i) {
var n = this, a = n.getPreviousPosition(e, i), o = n.getNextPosition(t, i), r = (o - a) / (i + 1);
return s.bind(null, a, r);
},
getNewTopPosition: function() {
var e = this, t = e.openTasksWithPosition, i = t.at(0), n = e.getPositionInterpolatorBetweenIds(null, i ? i.getId() : null, 1);
return n(0);
},
getNewBottomPosition: function() {
var e = this, t = e.openTasksWithPosition, i = t.at(t.length - 1), n = i ? i.getId() : null, a = e.getPositionInterpolatorBetweenIds(n, null, 1);
return a(0);
},
moveTasksBetweenIds: function(e, t, i, n) {
var a = this, o = a.getPositionInterpolatorBetweenIds(t, i, e.length);
a._repositionTasks(e, o, n);
},
_repositionTasks: function(e, t, i) {
var n = this, a = n.getListId();
e.forEach(function(e, o) {
var r = e.get("list_id") !== a, s = {
position: t(o)
};
r && (s.list_id = a), e.isCompleted() && (s.completed = !1), e.set(s, i), r && n.add(e, i);
});
},
_shouldInsertTaskAtTop: function(t, i) {
var n = "top" === e.settings.attributes.new_task_location;
return t.isStarred() ? !0 : i ? !n : n;
},
addTaskToList: function(e, t, i, n) {
var a = this, o = e.attributes.assignee_id, r = {
list_id: a.getListId(),
isAbleToSync: !1,
online_list_id: null
};
r.position = a._shouldInsertTaskAtTop(e, i) ? a.getNewTopPosition() : a.getNewBottomPosition(), 
t && (!t.isShared() || o && !t.isMemberOfList(o)) && (r.assignee_id = null), e.save(r, n);
},
getListId: function() {
var e = this.url.indexOf("/", 1) + 1, t = this.url.lastIndexOf("/");
return this.url.substring(e, t);
},
getActiveItem: function() {
return l.find(this.models, function(e) {
return e.isActive();
});
}
});
return a.applyToClass(c), c;
}), define("routes/TasksRoutesController", [ "application/runtime", "routes/ResourceRoutesController", "collections/TaskCollection" ], function(e, t, i) {
var n = e._, a = t.prototype;
return t.extend({
resourceName: "task",
show: function(t, i, n) {
var a = this, o = a.deferred();
return a.getResource(t).done(function(t) {
a.open(t, {
attribute: i,
fullscreen: !!n
}).done(o.resolve, o);
var r = t.attributes.online_id;
if (r && t.id !== t.attributes.online_id && e.currentRoute().indexOf(t.id) >= 0) {
var s = e.currentRoute().replace(t.id, t.attributes.online_id);
e.trigger("route:" + s, {
replace: !0
});
}
}).fail(o.resolve, o), o.promise();
},
focus: function(e, t) {
var i = this, n = i.deferred();
return i.getResource(e).done(function(e) {
i.open(e, {
focusAttribute: t
}).done(n.resolve, n);
}).fail(n.resolve, n), n.promise();
},
edit: function(t, i, n) {
var a = this, o = a.deferred();
return a.getResource(t).done(function(t) {
return t.attributes.completed ? (o.resolve(), e.trigger("route:" + t.route())) : void a.open(t, {
attribute: i,
fullscreen: !!n
}).done(o.resolve, o);
}).fail(o.resolve, o), o.promise();
},
open: function(t, i) {
var n = this, a = n.deferred(), o = n.router.interfaceReturnRoute;
return i || (i = {}), (!o || o.indexOf("tasks/") < 0) && (n.taskReturnRoute = o || "lists/" + t.attributes.list_id), 
n.requestComments(t), t.isCompleted() && n.requestCompletedTaskWithResources(t), 
e.trigger("browser:taskId", t.id), n.outlet.openTask(t, {
editAttribute: i.attribute,
focusAttribute: i.focusAttribute,
returnRoute: n.taskReturnRoute,
options: {
fullscreen: i.fullscreen,
edit: i.openEdit
}
}), n.setFocus(i), n.defer(a.resolve, a), a.promise();
},
handleNotFound: function(t, i) {
var n = this, o = arguments;
e.sdk.initialized.done(function() {
e.sdk.getOutlet().tasks.getID(t).done(function(e) {
e.completed ? n.fetchCompletedTask(e, i) : n.fetchTask(e, i);
}).fail(function() {
a.handleNotFound.apply(n, o);
});
});
},
fetchCompletedTask: function(t, n) {
var o = this, r = t.id, s = t.list_id, l = o.bindTo(e, "sync:ended", function(e, t) {
if ("fetchCompleted" === t) {
o.unbindFrom(l);
var s = new i("/tasks/filter/completed"), d = s.get(r);
d ? n.resolve(d) : a.handleNotFound.call(o, r, n);
}
});
e.sync.onSync(!1, "completed", "tasks", s);
},
fetchTask: function(t, n) {
var o = this, r = t.id, s = o.bindTo(e, "sync:ended", function(e, t) {
if ("fetchTask" === t) {
o.unbindFrom(s);
var l = new i("/tasks/all"), d = l.get(r);
d ? n.resolve(d) : a.handleNotFound.call(o, r, n);
}
});
e.sync.onSync(!1, "task", r);
},
requestComments: function(t) {
n.delay(function() {
e.trigger("requestComments", t.attributes.online_id);
}, 400);
},
requestCompletedTaskWithResources: function(t) {
e.trigger("sync:start", !1, "completed", "task", t.attributes.online_id, !0);
},
showComments: function(t) {
var i = this;
return e.trigger("route:tasks/" + t + "/comments/edit"), i.deferred().resolve().promise();
},
setFocus: function(t) {
var i = "browser";
t.fullscreen ? i = "fullscreenNote" : (t.attribute || t.focusAttribute) && (i = "detail"), 
e.trigger("focus:set", i);
}
});
}), define("routes/DebugRoutesController", [ "application/runtime", "./ModalRoutesController" ], function(e, t) {
return t.extend({
name: "debug"
});
}), define("routes/LabsRoutesController", [ "application/runtime", "./ModalRoutesController" ], function(e, t) {
var i = t.prototype;
return t.extend({
name: "labs",
beforeShow: function(t) {
var n = this;
e.isLabsEnabled() ? i.beforeShow.apply(n, arguments) : (t.resolve(), e.trigger("route:lists/inbox"));
}
});
}), define("routes/IYFRoutesController", [ "application/runtime", "./ModalRoutesController" ], function(e, t) {
var i = e._, n = t.prototype;
return t.extend({
name: "inviteYourFriends",
initialize: function() {
var t = this;
if (n.initialize.apply(t, arguments), !e.config.echo || !e.config.echo.host) throw new Error("Cannot initialize SplashViewController without config.echo.host defined");
},
show: function() {
var t = this;
if (e.env.isChromeApp()) {
var a = t.deferred(), o = a.resolve.bind(a), r = "hasOpenedEchoService";
return e.global.chrome.storage.local.get(r, function(a) {
a && a[r] ? n.show.apply(t, arguments).done(o) : (a[r] = !0, e.global.chrome.storage.local.set(a, function() {
var t = e.config.echo.host;
e.openUrl(t), i.defer(o);
}));
}), a.promise();
}
return n.show.apply(t, arguments);
}
});
}), define("routes/WhatsNewRoutesController", [ "application/runtime", "./ModalRoutesController" ], function(e, t) {
return t.extend({
name: "whatsNew"
});
}), define("routes/RateRoutesController", [ "application/runtime", "./ModalRoutesController" ], function(e, t) {
return t.extend({
name: "rate"
});
}), define("routes/ListOptionsRoutesController", [ "application/runtime", "./ModalRoutesController", "mixins/ResourceMixin" ], function(e, t, i) {
var n = t.prototype;
return t.extend({
name: "listOptions",
resourceName: "list",
mixins: [ i ],
"new": function() {
var e = this;
return e.model = null, e.tab = null, e.show();
},
newWithTasks: function(e) {
var t = this;
t.taskIds = e.split(","), t["new"]();
},
isRelatedUrl: function(e) {
var t = this;
return e.indexOf("lists/new") >= 0 || e.indexOf("lists/" + t.id + "/edit") >= 0;
},
beforeShow: function() {
var e = this, t = e.router;
e.isRelatedUrl(t.previousRoute) || n.beforeShow.apply(e, arguments);
},
shouldTriggerReturnUrl: function() {
var t = this;
return t.isRelatedUrl(e.currentRoute());
},
edit: function(t, i) {
var n = this, a = n.router, o = n.deferred(), r = n.deferred();
return n.tab = i, n.id = t, "inbox" === t ? (e.trigger("route:lists/inbox"), o.resolve().promise()) : (n.returnRoute = "lists/" + t, 
a.previousRoute && 0 === a.previousRoute.indexOf(n.returnRoute) ? r.resolve() : a.whenListHasLoaded(t).done(function() {
r.resolve();
}), r.done(function() {
n.getResource(t).done(function(e) {
n.model = e, n.taskIds = null, n.show(), o.resolve();
});
}), o.promise());
},
getOptions: function() {
var e = this, t = n.getOptions.apply(e, arguments);
return e.model && (t.model = e.model), e.taskIds && (t.taskIds = e.taskIds), t.tab = e.tab, 
t;
}
});
}), define("routes/TellRoutesController", [ "application/runtime", "./ModalRoutesController" ], function(e, t) {
return t.extend({
name: "tell"
});
}), define("routes/BackgroundRoutesController", [ "application/runtime", "./ModalRoutesController" ], function(e, t) {
return t.extend({
name: "backgrounds"
});
}), define("routes/ChooseListsRoutesController", [ "application/runtime", "./ModalRoutesController" ], function(e, t) {
return t.extend({
name: "chooseLists"
});
}), define("routes/ChooseBusinessListsRoutesController", [ "application/runtime", "./ModalRoutesController" ], function(e, t) {
return t.extend({
name: "chooseBusinessLists"
});
}), define("routes/PreferencesRoutesController", [ "application/runtime", "./ModalRoutesController" ], function(e, t) {
var i = t.prototype;
return t.extend({
name: "preferences",
focus: "settings",
show: function(e, t) {
var n = this;
return n.section = e, n.subsection = t, n.translateSections(), i.show.apply(n, arguments);
},
beforeShow: function() {
var e = this, t = e.router;
0 !== t.previousRoute.indexOf("preferences") && i.beforeShow.apply(e, arguments);
},
showModal: function() {
var t = this, n = t.router;
0 !== n.previousRoute.indexOf("preferences") && i.showModal.apply(t, arguments), 
e.trigger("settings:section", t.section, t.subsection);
},
shouldTriggerReturnUrl: function() {
var t = this;
return 0 === e.currentRoute().indexOf(t.name);
},
afterClose: function() {
var e = this, t = e.router;
e.returnRoute && e.returnRoute.indexOf("connect/facebook") >= 0 && (e.returnRoute = t.defaultRoute), 
i.afterClose.apply(e, arguments);
},
translateSections: function() {
var t = this;
"account" === t.section && t.subsection && "pro" === t.subsection && (e.user.isPro() ? e.trigger("route:preferences/account") : t.section = "account-pro"), 
"teams" === t.section && t.subsection && "manage" === t.subsection && (t.section = "team-manage"), 
"team-manage" !== t.section && "teams" !== t.section || !e.user.isProTeamMember() || (t.section = "account");
}
});
}), define("routes/SearchRoutesController", [ "application/runtime", "wunderbits/WBRoutesController" ], function(e, t) {
return t.extend({
show: function(t) {
var i = this, n = i.deferred(), a = e.currentRoute();
return e.state.set("inSearchState", !0), e.lastListID = null, i.router.whenAuthorized(function() {
var o = i.router.searchReturnRoute || i.router.defaultRoute, r = 2e3, s = !0;
i.router.whenInterfaceHasLoaded().done(function() {
function l() {
a === e.currentRoute() && (e.trigger("search:start", t, o, {
inboxID: "inbox"
}), s && e.global.setTimeout(l, r));
}
i.router.outlet.goToPage("lists"), i.router.outlet.activeView && i.router.outlet.activeView.toggleDetailView(!1, !1), 
i.router.whenDataHasLoaded().done(function() {
s = !1;
}), l(), n.resolve();
});
}), n.promise();
}
});
}), define("routes/ListRoutesController", [ "application/runtime", "routes/ResourceRoutesController", "collections/ListCollection" ], function(e, t, i) {
var n = t.prototype;
return t.extend({
resourceName: "list",
getResource: function(t, i) {
var a = this;
return i = i || a.deferred(), a.listsReady.done(function(o) {
var r = o.get(t);
if (r) {
if ("inbox" !== t && r.attributes.online_id && r.id !== r.attributes.online_id && e.currentRoute().indexOf(r.id) >= 0) {
var s = e.currentRoute().replace(r.id, r.attributes.online_id);
e.trigger("route:" + s, {
replace: !0
});
}
i.resolve(r);
} else n.getResource.call(a, t, i);
}), i.promise();
},
show: function(t) {
var i = this, n = i.deferred();
return -1 === i.router.currentRoute.indexOf("search") && e.trigger("search:cancel"), 
e.smartLists.indexOf(t) >= 0 ? i.showSmartList(t) : (i.getResource(t).done(function(t) {
n.resolve(), e.currentRoute().indexOf(t.id) >= 0 && i.setFocus(), i.outlet.openList(t);
}).fail(n.reject, n), n.promise());
},
handleNotFound: function(t, i) {
var a = this, o = arguments;
e.sdk.initialized.done(function() {
e.sdk.getOutlet().lists.getID(t).done(function(e) {
a.fetchList(e, i);
}).fail(function() {
n.handleNotFound.apply(a, o);
});
});
},
fetchList: function(t, n) {
var a = this, o = t.id, r = a.bindTo(e, "sync:ended", function(e, t) {
if ("fetchList" === t) {
a.unbindFrom(r);
var s = new i("/lists/all"), l = s.get(o);
n.resolve(l);
}
});
e.sync.onSync(!1, "list", o);
},
showSmartList: function(t) {
var i = this, n = i.deferred();
return i.listsReady.done(function() {
e.smartLists.indexOf(t) >= 0 ? (e.trigger("browser:taskId", null), i.outlet.openFilter(t), 
i.setFocus(), "completed" === t && e.trigger("sync:start", !1, "completed", "all"), 
n.resolve()) : n.reject();
}), n.promise();
},
inbox: function() {
var e = this, t = e.deferred();
return e.listsReady.done(function(i) {
var n = i.find(function(e) {
return "inbox" === e.attributes.list_type;
});
e.show(n && n.id).always(function() {
t.resolve();
});
}), t.promise();
},
"new": function(t) {
var i = this, n = i.show(t);
return n.done(function() {
i.outlet.activeView && i.outlet.activeView.toggleDetailView(!1, !0), i.defer(i.outlet.setFocusToAddTask, i.outlet), 
e.trigger("search:cancel");
}), n;
},
setFocus: function() {
e.trigger("focus:set", "sidebar");
}
});
}), define("routes/ConversationsRoutesController", [ "application/runtime", "wunderbits/WBRoutesController" ], function(e, t) {
return t.extend({
name: "conversations",
show: function() {
var t = this, i = t.router, n = t.deferred(), a = i.interfaceReturnRoute;
return i.whenAuthorized(function() {
i.whenInterfaceHasLoaded().done(function() {
e.trigger(t.name + ":open", {
returnRoute: a
}), n.resolve();
});
}), n.promise();
}
});
}), define("routes/ActivitiesRoutesController", [ "application/runtime", "./ConversationsRoutesController" ], function(e, t) {
return t.extend({
name: "activities",
redirect: function() {
var e = this, t = e.deferred();
return e.router.setRoute(e.name), t.resolve().promise();
}
});
}), define("routes/FolderRoutesController", [ "application/runtime", "routes/ResourceRoutesController" ], function(e, t) {
var i = t.prototype;
return t.extend({
resourceName: "folder",
getResource: function(e, t) {
var n = this;
return t = t || n.deferred(), n.foldersReady.done(function(a) {
var o = a.get(e);
o ? t.resolve(o) : i.getResource.call(n, e, t);
}), t.promise();
},
edit: function(e) {
var t = this;
t.router.whenInterfaceHasLoaded().done(function() {
t.getResource(e).done(function(e) {
var i = {
returnRoute: t.router.interfaceReturnRoute
};
t.outlet.editFolder(e, i);
});
});
},
setFocus: function() {
e.trigger("focus:set", "sidebar");
}
});
}), define("wunderbits/WBRouter", [ "./WBRuntime", "./mixins/WBInstanceUtilitiesMixin", "project!core/WBClass", "project!core/mixins/WBEventsMixin", "project!core/mixins/WBBindableMixin", "project!core/mixins/WBUtilsMixin", "project!core/WBDeferred", "project!core/lib/when" ], function(e, t, i, n, a, o, r, s, l) {
var d = e, c = d._, u = d.Backbone, p = d.global, m = u.Router.prototype, g = i.prototype, f = p.history && p.history.replaceState, b = u.Router.extend({
"implements": {},
_basicRoutes: {
"": "_triggerDefault",
"/": "_triggerDefault",
":route": "_trigger404",
":route/*subroute": "_trigger404"
},
didFireSetRoute: {},
constructor: function(e) {
var t = this;
return e || (e = {}), t.outlet = e.outlet || t.outlet, g.augmentProperties.call(t), 
g.initMixins.call(t, e), t.bindTo(d, "route", t.setRoute), this.isInitialRoute = !0, 
m.constructor.apply(t, arguments), t.params = {}, t.implementControllers(), t;
},
before: function() {},
open404: function() {},
onBackOrForward: function() {},
triggerRoute: function() {
var e = new r();
return e.resolve().promise();
},
parseParams: function(e) {
var t = {}, i = p.location;
return e = e || i.href.split(/\?|#/)[1] || "", e.length && (c.each(e.split("&"), function(e) {
e = e.split("="), t[e[0]] = e[1] || null;
}), f && c.defer(function() {
var e = i.protocol + "//" + i.host + i.pathname + i.hash;
p.history.replaceState(null, "noParams", e);
})), t;
},
parseQueryString: function(e) {
for (var t = e.split("&"), i = {}, n = 0; n < t.length; n++) {
var a = t[n].split("=");
a[0].length && a[1] && a[1].length && (0 === n && (a[0] = 0 === a[0].indexOf("?") ? a[0].substring(1) : a[0]), 
i[decodeURIComponent(a[0])] = decodeURIComponent(a[1]));
}
return i;
},
start: function() {
var e = this;
e.hasStarted || (e.params = e.parseParams(), !u.History.started && u.history.start(), 
e.hasStarted = !0, e.trigger("started"));
},
_trigger404: function() {
this.open404();
},
_triggerDefault: function() {
var e = this;
e.defaultRoute && e.setRoute(e.defaultRoute);
},
_getRoutesHash: function() {
var e = this;
return c.extend(e.routes || {}, e._basicRoutes);
},
implementControllers: function() {
var e = this;
e.controllers = {};
for (var t in e["implements"]) {
var i = e["implements"][t];
e.controllers[t] = new i({
outlet: e.outlet,
router: e
});
}
},
_bindRoutes: function() {
var e = this;
e.routes = e._getRoutesHash(), m._bindRoutes.apply(e, arguments);
},
route: function(e, t) {
var i = this, n = function() {
var n = arguments;
i.didFireSetRoute[d.currentRoute()] || (i.shouldTriggerRoutes = null);
var a = i.before.apply(i, [ e, t ]), o = i, l = "function" == typeof t ? t : i[t];
if (t.indexOf("#") > 0) {
var c = t.split("#"), u = i.controllers[c[0]], p = c[1];
o = u, l = u[p], u.params = i.params, u.stillActive = i.lastController === u, i.lastController = u;
}
if (a !== !1 && i.shouldTriggerRoutes !== !1 && "function" == typeof l) {
var m = function() {
var e = new r();
i.routing = e.promise(), i.previousRoute = i.currentRoute || "", i.currentRoute = d.currentRoute();
var t = i.triggerRoute(i.currentRoute);
t.done(function() {
var t = l.apply(o, n) || [];
i.isInitialRoute = !1, s(t).always(function() {
e.resolve(), d.trigger("routed", i.currentRoute, i.previousRoute);
});
});
};
s(i.routing || []).always(m, i);
}
i.shouldTriggerRoutes = null;
};
m.route.call(i, e, t, n);
},
setRoute: function(e, t) {
var i = this;
t = t || {}, t.params && c.each(t.params, function(e, t) {
t = decodeURIComponent(t), e = decodeURIComponent(e), i.params[t] = e;
}), c.isArray(e) && (e = e[0]), i.didFireSetRoute[e] = !0, c.delay(function() {
delete i.didFireSetRoute[e];
}, 500), t.trigger === l && (t.trigger = !0), i.shouldTriggerRoutes = t.trigger, 
t.replace && f ? p.history.replaceState(null, "", "#/" + e || "") : t.replaceOnly || i.navigate("#/" + (e || ""), t);
}
});
return n.applyToClass(b), a.applyToClass(b), o.applyToClass(b), t.applyToClass(b), 
b;
}), function() {
function e() {
return {
classCheckAttribute: function(e, t) {
return 'Attribute "' + e + '" must be instance of ' + t;
},
typeCheckAttribute: function(e, t) {
return 'Attribute "' + e + '" must be of type "' + t + '"';
}
};
}
define("wunderbits/errorFactory", e);
}(window), define("wunderbits/WBValidationHelper", [ "./lib/dependencies", "project!core/WBSingleton", "./errorFactory" ], function(e, t, i) {
var n = [ "array", "string", "number", "object", "boolean", "element", "function" ], a = t.extend({
capitalize: function(e) {
return e.charAt(0).toUpperCase() + e.slice(1);
},
isValidEmail: function(e) {
var t = /^[^\s\n@]*[^\s\n\.@]\@[^\s\n\.@][^\s\n@]*(?=\.[^\s\.\n @]+$)\.[^\s\.\n @]+$/;
return e && t.test(e);
},
classCheckAttribute: function(e, t, n, a) {
var o = e && e[t];
if (!o || !o.isInstanceOf || !o.isInstanceOf(n)) {
var r = i.classCheckAttribute(t, a);
throw new Error(r);
}
return o;
},
typeCheckAttribute: function(e, t, o) {
var r = e && e[t], s = "is" + a.capitalize(o);
if (-1 === n.indexOf(o) || !r || !a[s](r)) {
var l = i.typeCheckAttribute(t, o);
throw new Error(l);
}
return r;
},
isEqual: function(e, t) {
return e === t;
},
isPasswordLengthOk: function(e) {
return e.length >= 5;
}
}), o = Object.prototype.toString;
return n.forEach(function(e) {
var t = a.capitalize(e);
a["is" + t] = function(e) {
return o.call(e) === "[object " + t + "]";
};
}), a;
}), define("applications/main/Router", [ "application/runtime", "application/Redirector", "helpers/Cookie", "routes/OAuthRoutesController", "routes/StartRoutesController", "routes/FlashCardsRoutesController", "routes/TasksRoutesController", "routes/DebugRoutesController", "routes/LabsRoutesController", "routes/IYFRoutesController", "routes/WhatsNewRoutesController", "routes/RateRoutesController", "routes/ListOptionsRoutesController", "routes/TellRoutesController", "routes/BackgroundRoutesController", "routes/ChooseListsRoutesController", "routes/ChooseBusinessListsRoutesController", "routes/PreferencesRoutesController", "routes/SearchRoutesController", "routes/ListRoutesController", "routes/ActivitiesRoutesController", "routes/ConversationsRoutesController", "routes/FolderRoutesController", "wunderbits/WBRouter", "wunderbits/WBValidationHelper", "project!core/WBDeferred" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m, g, f, b, h, v, _, w, k, x, y, C, T, S) {
var L = [ "me", "activities", "activitycenter", "conversations", "debug", "labs", "inviteYourFriends", "invite-your-friends", "preferences", "tell-your-friends", "backgrounds", "chooseLists", "rate", "whatsnew", "addList", "lists/new", "folders" ], D = e._, M = y.prototype;
return y.extend({
defaultRoute: "lists/inbox",
"implements": {
oauth: n,
start: a,
flashcard: o,
tasks: r,
debug: s,
labs: l,
iyf: d,
whatsnew: c,
rate: u,
tell: m,
background: g,
chooseBusinessLists: b,
chooseLists: f,
preferences: h,
listOptions: p,
search: v,
list: _,
activities: w,
conversations: k,
folders: x
},
routes: {
"setup/*path": "start#startAppFirstTime",
"start/*path": "start#startApp",
me: "openUserMenu",
conversations: "conversations#show",
activities: "activities#show",
activitycenter: "activities#redirect",
search: "search#show",
"search/:term": "search#show",
labs: "labs#show",
"labs/flash-cards/:id": "flashcard#runForList",
"undefinedlists/:id": "openListWithIDAndFixURL",
"lists/new": "listOptions#new",
"lists/new/:taskids": "listOptions#newWithTasks",
"lists/:id/edit": "listOptions#edit",
"lists/:id/edit/:tab": "listOptions#edit",
"lists/inbox": "list#inbox",
"lists/:id": "list#show",
"lists/:id/tasks/new": "list#new",
"folders/:id/edit": "folders#edit",
"tasks/:id": "tasks#show",
"tasks/:id/:attr/focus": "tasks#focus",
"tasks/:id/:attr/edit": "tasks#edit",
"tasks/:id/:attr/edit/:fullscreen": "tasks#edit",
"tasks/:id/comments": "tasks#showComments",
"tasks/:id/:attr/:fullscreen": "tasks#show",
"add/?*URI": "addURIItemToInbox",
"preferences/:section(/:subsection)": "preferences#show",
rate: "rate#show",
"tell-your-friends": "tell#show",
backgrounds: "background#show",
chooseLists: "chooseLists#show",
chooseBusinessLists: "chooseBusinessLists#show",
whatsnew: "whatsnew#show",
debug: "debug#show",
inviteYourFriends: "iyf#show",
"invite-your-friends": "iyf#show",
"payment/:params": "validatePayment",
"login/:access_token": "oauth#checkForToken",
"_=_": "_triggerDefault",
":access_token": "oauth#checkForToken"
},
initialize: function(n) {
var a = this;
n = n || {}, M.initialize.apply(a, arguments), a.redirector = new t(), e.user.on("deleted", function() {
if (a.loggingOut = !0, console.debug("router deleted bind triggered"), i.killCookie(), 
e.env.isPackagedApp()) e.reload("/login"); else {
var t = e.config, n = t.auth && t.auth.host || "";
console.debug("about to write location.href to", n + "/logout"), e.global.location = n + "/logout", 
console.debug("location.href updated ...");
}
}), a.listsDeferred = new T(), a.bindTo(e, "lists:ready", a.listsDeferred.resolve, a.listsDeferred), 
a.tasksDeferred = new T(), a.bindTo(e, "tasks:ready", a.tasksDeferred.resolve, a.tasksDeferred), 
a.foldersDeferred = new T(), a.bindTo(e, "folders:ready", a.foldersDeferred.resolve, a.foldersDeferred), 
e.on("set:returnRouteAsInbox", a.setReturnRouteAsInbox);
},
start: function() {
var e = this;
M.start.apply(e, arguments), e.outlet.openMainInterface();
},
triggerRoute: function(t) {
var i = this, n = new T(), a = e.user.getAuthorization();
if (i.loggingOut) return n.reject().promise();
"connected" === i.params.oauth && (delete i.params.oauth, e.hasRouted.done(function() {
e.trigger("route:preferences/account");
}));
var o = function() {
n.reject();
var i = "/login/";
t && (i += t), e.reload(i);
};
return a.done(function() {
n.resolve(), i.updateInterfaceReturnURL();
}), a.fail(function() {
o();
}), n.promise();
},
_triggerDefault: function() {
var t = this;
e.user.getAuthorization().done(function() {
M._triggerDefault.apply(t, arguments);
}).fail(function() {
t.setRoute("welcome");
});
},
whenAuthorized: function(t) {
var n = this, a = function() {
e.trigger("timer:start"), t(), n.lastAuthRoute = e.currentRoute(), e.trigger("update:lastAuthRoute", n.lastAuthRoute), 
n.updateInterfaceReturnURL();
};
e.user.getAuthorization().done(a).fail(function() {
i.killCookie(), e.trigger("timer:stop"), e.trigger("route:welcome");
});
},
open404: function(t) {
var i = this;
e.trigger("analytics:Application:404", e.currentRoute());
var n;
if (e.global.location.href.indexOf("access_token") >= 0) n = e.global.location.href.split("access_token=")[1], 
n = n.split("&")[0], i.loginWithFBToken(n); else if (e.user.attributes.access_token) {
i.openDefault({
"404": !0
});
var a = i.outlet;
i.defer(a.openTBV404, a, t), e.lastListID = S;
} else e.global.location.href.indexOf("access_token") >= 0 ? (n = e.global.location.href.split("access_token=")[1], 
n = n.split("&")[0], i.loginWithFBToken(n)) : e.trigger("route:welcome");
},
updateInterfaceReturnURL: function() {
var t = this, i = e.currentRoute(), n = !0;
i && (i = i.replace("/action/share", ""), i = i.replace("/share", ""), D.each(L, function(e) {
(i.indexOf(e) > -1 || 0 === i.indexOf("lists") && i.indexOf("/edit") > 0) && (n = !1);
})), n && (t.interfaceReturnRoute = i), t.updateSearchReturnURL();
},
updateSearchReturnURL: function() {
var t = this, i = e.currentRoute(), n = D.clone(L);
n.push("search", "tasks");
var a = !0;
D.each(n, function(e) {
i.indexOf(e) > -1 && (a = !1);
}), a && (t.searchReturnRoute = i);
},
whenInterfaceHasLoaded: function() {
var e = this, t = e.deferred(), i = function() {
e.outlet.off("page", i), e.defer(t.resolve, t);
};
return e.outlet.on("page", i), e.isInitialRoute ? e.openDefault() : i(), t.promise();
},
whenDataHasLoaded: function() {
var t = this, i = new T();
return t.bindOnceTo(e, "db:allDataLoaded", i.resolve, i), i.promise();
},
whenListHasLoaded: function(e) {
var t = this, i = new T(), n = function() {
t.listsDeferred.done(function(a) {
var o = a.get(e);
t.outlet.off("page", n), t.defer(i.resolve, i, o);
});
};
return t.outlet.on("page", n), t.controllers.list.show(e), i.promise();
},
openUserMenu: function() {
var t = this;
t.whenAuthorized(function() {
var i = t.interfaceReturnRoute;
t.whenInterfaceHasLoaded().done(function() {
t.outlet.hideModals(), e.trigger("toolbar:userMenu:open", {
returnRoute: i
}), e.trigger("focus:set", "userMenu");
});
});
},
setReturnRouteAsInbox: function() {
var e = this;
e.interfaceReturnRoute = "lists/inbox";
},
openDefault: function(e) {
e = e || {};
var t = this;
e[404] || t.whenAuthorized(function() {
t.controllers.list.show("inbox");
});
},
addURIItemToInbox: function(t) {
var i = this, n = i.parseQueryString(t) || {};
n.title && i.whenAuthorized(function() {
i.tasksDeferred.done(function() {
e.trigger("route:" + i.defaultRoute), e.once("sync:ended", function() {
e.trigger("add:fromURI", n);
}), e.trigger("sync:start");
});
});
},
validatePayment: function(t) {
var i, n, a = this, o = "authorised" === t, r = [ "preferences/account", "preferences/team-manage" ];
a.whenAuthorized(function() {
a.listsDeferred.done(function() {
var s = function() {
i = e.user.attributes.product, n = e.user.attributes.group_product, t = i && i.product_id ? t + ":" + i.product_id : o ? t + ":noProductSyncedForUser:" + e.user.id : t, 
e.trigger("analytics:ProAccounts:returnStatus", t);
};
o ? (a.outlet.showLoading(), e.once("sync:ended", function() {
a.outlet.hideLoading(), a.whenListHasLoaded("inbox").done(function() {
var t = n ? 1 : 0;
!e.user.isPro() && e.user.attributes.group_product && e.trigger("groupProduct:addAdmin"), 
a.delay(a.setRoute, 800, a, r[t]);
}), s();
}), e.trigger("sync:start", !0, "payment")) : (a.whenListHasLoaded("inbox").done(function() {
a.setRoute("preferences/account");
}), s());
});
});
}
});
}), define("wunderbits/lib/queryParser", [], function() {
function e(e) {
for (var t, i, n = e.split("&"), a = {}; n.length; ) t = n.shift().split("="), i = t[0], 
i.length && (a[i] = t[1]);
return a;
}
return e;
}), define("backend/languageManager", [ "application/runtime", "vendor/moment", "wunderbits/WBLanguageManager", "wunderbits/lib/queryParser" ], function(e, t, i, n) {
function a(e, i) {
var n = {};
o.each(i, function(e, t) {
if (/^momentjs_[a-zA-Z_]+$/.test(t)) {
var i = t.split("_");
if (i.shift(), 1 === i.length) n[i[0]] = e.split("_"); else {
for (var a; 1 !== i.length; ) a = i.shift(), a = n[a] || (n[a] = {});
a[i[0]] = e;
}
}
}), n.meridian = l[e] || l.en, n.ordinal = d[e] || d.en;
try {
t.lang(e, n);
} catch (a) {
a.message = "bad moment localization for " + e;
}
}
var o = e._, r = e.global.location, s = n(r.search.substr(1)), l = {
en: function(e, t, i) {
return e > 11 ? i ? "pm" : "PM" : i ? "am" : "AM";
}
}, d = {
en: function(e) {
var t = e % 10;
return 1 === ~~(e % 100 / 10) ? "th" : 1 === t ? "st" : 2 === t ? "nd" : 3 === t ? "rd" : "th";
}
}, c = i;
return i.extend({
init: function() {
var t = this, i = e.language, n = e.settings;
i.getLabel = o.bind(t.getLabel, t), i.getText = o.bind(t.getText, t);
var a = s.hl || t.detectLang();
n.set("language", a), t.bindTo(n, "change:language", t.onLanguageChange), t.bindTo(c, "done", t.onDone), 
i.set("code", a), c.fetchData(a);
},
onLanguageChange: function() {
var t = e.language, i = e.settings, n = i.get("language");
t.set("code", n), c.fetchData(n);
},
onDone: function(t, i, n) {
var o = e.language, r = i.dir || "ltr", s = document.head.parentNode;
s.setAttribute("dir", r), s.setAttribute("lang", t), o.set("dir", r), a(t, n.data), 
o.set("data", n.data), o.ready.resolve(), e.trigger("language:change");
}
});
}), define("backend/search/searchWorker", [], function() {
return function() {
function e(e, i) {
var n = -1, a = e ? e.length : 0;
if ("number" == typeof a) for (;++n < a && i(e[n], n, e) !== !1; ) ; else t(e, i);
return e;
}
function t(e, t) {
var i, n = e, a = n;
if (!n) return a;
if (!E[typeof n]) return a;
for (var o = -1, r = E[typeof n] && ee(n), s = r ? r.length : 0; ++o < s; ) if (i = r[o], 
t(n[i], i, e) === !1) return a;
return a;
}
function i(e) {
for (var t = [], i = 0, n = e.length; n > i; i++) -1 === t.indexOf(e[i]) && t.push(e[i]);
return t;
}
function n(e) {
for (var t, i = [], n = 0, a = e.length; a > n; n++) t = e[n], t && i.push(t);
return i;
}
function a(e) {
return "number" == typeof e || "[object Number]" == Object.prototype.toString.call(e);
}
function o(e, t, i) {
var n, a = e, o = a;
if (!a) return o;
for (var r = arguments, s = 0, l = "number" == typeof i ? 2 : r.length; ++s < l; ) if (a = r[s], 
a && E[typeof a]) for (var d = -1, c = E[typeof a] && ee(a), u = c ? c.length : 0; ++d < u; ) n = c[d], 
o[n] = a[n];
return o;
}
function r(i, n, a, o, l, d) {
var c, u, m = i;
"boolean" != typeof n && null !== n && (o = a, a = n, n = !1);
var f = s(m);
if (f) {
if (c = Object.prototype.toString.call(m), !q[c]) return m;
u = te(m);
}
var b = G[c], h = b;
switch (c) {
case R:
case W:
return new b(+m);

case V:
case Y:
return new b(m);
}
var v = !l;
l || (l = p()), d || (d = p());
for (var _ = l.length; _--; ) if (l[_] == i) return d[_];
return m = u ? h(m.length) : {}, u && (hasOwnProperty.call(i, "index") && (m.index = i.index), 
hasOwnProperty.call(i, "input") && (m.input = i.input)), l.push(i), d.push(m), (u ? e : t)(i, function(e, t) {
m[t] = r(e, n, a, void 0, l, d);
}), v && (g(l), g(d)), m;
}
function s(e) {
return !(!e || !E[typeof e]);
}
function l(e) {
var t, i = e, n = [];
if (!i) return n;
if (!E[typeof e]) return n;
for (t in i) hasOwnProperty.call(i, t) && n.push(t);
return n;
}
function d(e) {
var t = e ? e.length : 0;
return "number" == typeof t ? t : ee(e).length;
}
function c(e, t, i) {
for (var n = (i || 0) - 1, a = e.length; ++n < a; ) if (e[n] === t) return n;
return -1;
}
function u(e, t) {
var i = typeof t;
if (e = e.cache, "boolean" == i || null === t) return e[t];
"number" != i && "string" != i && (i = "object");
var n = "number" == i ? t : Q + t;
return e = e[i] || (e[i] = {}), "object" == i ? e[n] && c(e[n], t) > -1 ? 0 : -1 : e[n] ? 0 : -1;
}
function p() {
return K.pop() || [];
}
function m() {
return Z.pop() || {
array: null,
criteria: null,
"false": !1,
index: 0,
leading: !1,
maxWait: 0,
"null": !1,
number: null,
object: null,
push: null,
string: null,
trailing: !1,
"true": !1,
undefined: !1,
value: null
};
}
function g(e) {
K.length == J && (K.length = J - 1), e.length = 0, K.push(e);
}
function f(e) {
var t = e.cache;
t && f(t), Z.length == J && (Z.length = J - 1), e.array = e.cache = e.criteria = e.object = e.number = e.string = e.value = null, 
Z.push(e);
}
function b(e) {
var t = this.cache, i = typeof e;
if ("boolean" == i || null === e) t[e] = !0; else {
"number" != i && "string" != i && (i = "object");
var n = "number" == i ? e : Q + e, a = t[i] || (t[i] = {});
"object" == i ? (a[n] || (a[n] = [])).push(e) === this.array.length && (t[i] = !1) : a[n] = !0;
}
}
function h(e) {
var t = -1, i = e.length, n = m();
n["false"] = n["null"] = n["true"] = n.undefined = !1;
var a = m();
for (a.array = e, a.cache = n, a.push = b; ++t < i; ) a.push(e[t]);
return n.object === !1 ? (f(a), null) : a;
}
function v(e) {
for (var t, i, n = arguments, a = n.length, o = -1, r = p(), s = -1, l = c, d = e ? e.length : 0, m = [], b = p(); ++o < a; ) i = n[o], 
r[o] = l === c && (i ? i.length : 0) >= X && h(o ? n[o] : b);
e: for (;++s < d; ) if (t = r[0], i = e[s], (t ? u(t, i) : l(b, i)) < 0) {
for (o = a, (t || b).push(i); --o; ) if (t = r[o], (t ? u(t, i) : l(n[o], i)) < 0) continue e;
m.push(i);
}
for (;a--; ) t = r[a], t && f(t);
return g(r), g(b), m;
}
function _(e) {
e = e ? "" + e : e;
var t = e && i(n(e.toLowerCase().split(/[\s]+/)));
return t;
}
function w(e) {
e = e ? "" + e : e;
var t = e && i(n(e.split(/[\s]+/)));
return t;
}
function k(e, t, i) {
i = !!i || !1;
var n, a, o, r = t.split(""), s = e;
for (n = 0, a = r.length; a > n && ie > n; n++) {
if (o = r[n], void 0 === s[o]) {
if (!i) return void 0;
s[o] = {
parent: s
};
}
s = s[o];
}
return s;
}
function x(e, t, i, n) {
function a() {
self.postMessage({
callbackId: n,
data: "_index(" + o + ", " + t + ", " + i + ") done"
});
}
var o = e;
if ("tags" === o) return void S.apply(null, arguments);
if ("string" == typeof e && (e = oe[e]), void 0 !== e && void 0 !== i) {
var r = _(i);
r ? y(r, t, e, a) : a();
}
}
function y(e, t, i, n) {
function a() {
0 === Object.keys(s).length && n();
}
var o, r, s = {};
e.forEach(function(e, n) {
s["" + n] = 1, setTimeout(function() {
o = {
id: t,
position: n
}, r = k(i, e, !0), r.refs = r.refs || [], L(r, o), C(e, i, o), delete s["" + n], 
a();
});
});
}
function C(e, t, i) {
var n, a = e.length;
if (a > 1) for (var o = 1, r = a; r > o && ie > o; o++) n = k(t, e.substr(o), !0), 
L(n, i);
}
function T(e, t) {
var a = [];
e = "" + e;
var o = e.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&"), r = new RegExp(o, "i");
t.forEach(function(e) {
r.test(e) && a.push(e);
}), ae[e] = ae[e] ? ae[e] : [], ae[e] = i(n(ae[e].concat(a)));
}
function S(e, t, i, n) {
var a = e;
if ("string" == typeof e && (e = oe[e]), void 0 !== e && void 0 !== i) {
var o = w(i), r = _(i);
if (r) for (var s, l, d, c = 0, u = r.length; u > c; c++) s = r[c], /^#/.test(s) && (T(s, o), 
l = {
id: t,
position: c,
tag: s
}, d = k(e, s, !0), d.refs = d.refs || [], L(d, l));
self.postMessage({
callbackId: n,
data: "_indexTags(" + a + ", " + t + ", " + i + ") done"
});
}
}
function L(e, t) {
e.refs = e.refs || [], D(e.refs, t.id) || e.refs.push(t);
}
function D(e, t) {
for (var i = 0, n = e.length; n > i; i++) if (e[i].id === t) return !0;
return !1;
}
function M(e, t, i, n) {
var a = e;
if ("string" == typeof e && (e = oe[e]), void 0 !== e && void 0 !== i && void 0 !== t) {
var o, r, s = F(e, i, t);
if (s) {
for (o = 0, r = s.length; r > o; o++) z(s[o], t);
var l, d;
for (o = 0, r = s.length; r > o; o++) {
l = s[o], d = o;
for (var c in l) "refs" !== c && "parent" !== c && j(l, l[c], c);
j(e, l, d);
}
}
self.postMessage({
callbackId: n,
data: "_unIndex(" + a + ", " + t + ", " + i + ") done"
});
}
}
function z(e, t) {
var i = null;
e.refs && e.refs.forEach(function(e, n) {
e.id === t && (i = n);
}), a(i) && e.refs.splice(i, 1);
for (var n in e) "refs" !== n && "parent" !== n && z(e[n], t);
}
function j(e, t, i) {
var n = d(t);
if (2 === n && t.refs && t.parent) t.refs.length || (delete t.refs, delete t.parent[i], 
I(t.parent), t.parent && delete t.parent); else if (n > 1) for (var a in t) "refs" !== a && "parent" !== a && j(t, t[a], a); else {
var o = null === t ? e : t.parent;
o && (delete o[i], I(e)), t.parent && delete t.parent;
}
}
function I(e) {
for (var t in e) e[t].parent && j(e[t].parent, e[t], t);
}
function A(e, t) {
var i, n = [], a = [];
for (i in e) i.length > 1 || (n = n.concat(A(e[i], t)));
if (e.refs) {
for (var o = 0, r = e.refs.length; r > o; o++) a.push(e.refs[o][t]);
n = n.concat(a);
}
return n;
}
function P(e, t, a, o) {
if ("string" == typeof e && (e = oe[e]), void 0 === e || void 0 === t) return [];
var r = _(t), s = [];
if (r) for (var l, d, c = 0, u = r.length; u > c; c++) l = k(e, r[c], !1), d = l && A(l, a), 
s.push(d || []);
if (s.length && (s = v.apply(null, s)), "tag" === a) {
var p = [];
s.forEach(function(e) {
var t = ae[e] || [];
p = p.concat(t);
}), s = i(n(p));
}
self.postMessage({
callbackId: o,
data: s
});
}
function F(e, t, i) {
var n, a;
if ("string" == typeof e && (e = oe[e]), void 0 === e || void 0 === t) return [];
var o = _(t), r = [];
if (o) for (n = 0, a = o.length; a > n; n++) if (o[n].length > 1) for (var s = 1, l = o[n].length; l > s; s++) r.push(o[n].substr(s));
o = o.concat(r);
var d = [];
if (o) {
var c;
for (n = 0, a = o.length; a > n; n++) c = k(e, o[n], !1), c && te(c.refs) && D(c.refs, i) && d.push(c);
}
return d;
}
function B(e) {
oe = o({}, r(ne, !0)), self.postMessage({
callbackId: e
});
}
var E = {
"boolean": !1,
"function": !0,
object: !0,
number: !1,
string: !1,
undefined: !1
}, O = "[object Arguments]", $ = "[object Array]", R = "[object Boolean]", W = "[object Date]", N = "[object Function]", V = "[object Number]", U = "[object Object]", H = "[object RegExp]", Y = "[object String]", q = {};
q[N] = !1, q[O] = q[$] = q[R] = q[W] = q[V] = q[U] = q[H] = q[Y] = !0;
var G = {};
G[$] = Array, G[R] = Boolean, G[W] = Date, G[N] = Function, G[U] = Object, G[V] = Number, 
G[H] = RegExp, G[Y] = String;
var K = [], Z = [], X = 75, J = 10, Q = +new Date() + "", ee = Object.keys ? function(e) {
return s(e) ? Object.keys(e) : [];
} : l, te = Array.isArray ? Array.isArray : function(e) {
return "[object Array]" === Object.prototype.toString.call(e);
}, ie = 200, ne = {
id: "index",
title: {},
note: {},
assignee_id: {},
tags: {}
}, ae = {}, oe = o({}, r(ne, !0));
self.onmessage = function(e) {
switch (e.data.command) {
case "index":
x(e.data.fieldName, e.data.id, e.data.text, e.data.callbackId);
break;

case "unIndex":
M(e.data.fieldName, e.data.id, e.data.text, e.data.callbackId);
break;

case "searchInIndex":
P(e.data.index, e.data.text, e.data.keyName, e.data.callbackId);
break;

case "clear":
B(e.data.callbackId);
}
};
};
}), define("backend/search", [ "backend/database", "wunderbits/WBRuntime", "backend/search/searchWorker", "collections/UserCollection", "wunderbits/BaseSingleton", "project!core/WBDeferred", "project!core/lib/when" ], function(e, t, i, n, a, o, r, s) {
function l(e, t) {
x = x >= 1e6 ? 0 : x, ++x, e.callbackId = x, y[x] = t, _ && _.postMessage(e);
}
function d(e) {
for (var t = [], i = 0, n = e.length; n > i; i++) -1 === t.indexOf(e[i]) && t.push(e[i]);
return t;
}
var c, u, p = t._, m = t.global, g = m.URL || m.webkitURL || {}, f = m.Blob, b = m.Worker, h = "id", v = new n("/users/all");
u = t.env.isFirefox() ? "(" + i.toSource() + ")()" : "(" + i.toString() + ")()";
var _;
if (t.env.isIE()) _ = "Worker" in m && new m.Worker("/helpers/workerHelper.js"), 
_ && _.postMessage(u); else {
var w = f && new f([ u ], {
type: "application/javascript"
}), k = w && g.createObjectURL && g.createObjectURL(w);
_ = k && b && new b(k);
}
var x = 0, y = {
console: function(e) {
console.log(e);
}
};
_ && (_.onmessage = function(e) {
"function" == typeof y[e.data.callbackId] && y[e.data.callbackId](e.data.data), 
"console" !== e.data.callbackId && (y[e.data.callbackId] = null);
});
var C = a.extend({
init: function(t) {
var i = this;
c = t.stores, i.createIndexFromLocalStores(), i.bindTo(e, "index", "indexModel");
},
search: function(e, t, i) {
var n = this, a = n.searchInIndex("title", t, h), o = n.searchInIndex("note", t, h), s = n.searchInIndex("assignee_id", t, h);
r(a, o, s).done(function() {
var e = arguments[0][0], t = arguments[1][0], n = arguments[2][0], a = d(e.concat(t, n));
i(a);
});
},
searchInIndex: function(e, t, i) {
var n = new o(), a = n.promise();
return l({
command: "searchInIndex",
index: e,
text: t,
keyName: i
}, function(e) {
n.resolve(e || []);
}), a;
},
searchTags: function(e, t) {
var i = this, n = new o();
return i.searchInIndex("tags", e, "tag").done(function(e) {
var i = p.unique(e);
n.resolve(i), t && t(i);
}), n.promise();
},
indexModel: function(e, t, i) {
var n = this, a = new o(), l = c[t], d = l.keyPath || h, u = l.fullTextIndexFields;
if (u === s) return a.resolve().promise();
for (var p = [], m = i.attributes, g = 0, f = u.length; f > g; g++) {
var b, _ = u[g], w = m[_];
if ("update" === e ? (b = i.previous(_), b === m[_] && (b = null)) : b = m[_], "assignee_id" === _) {
var k;
if (b && (k = v.get(b), k && (b = k.attributes.name)), k = v.get(w), k && (w = k.attributes.name), 
!w || !b) continue;
} else {
if ("content" === _ && "note" === m.type) {
p.push(n.executeIndexing(e, "note", m.task_id, w, b));
continue;
}
"title" === _ && w && n.executeIndexing("create", "tags", m[d], w);
}
p.push(n.executeIndexing(e, _, m[d], w, b));
}
return r(p).always(a.resolve, a), a.promise();
},
unIndex: function(e, t, i) {
var n = new o();
return l({
command: "unIndex",
fieldName: e,
id: t,
text: i
}, function() {
n.resolve();
}), n.promise();
},
index: function(e, t, i) {
var n = new o();
return l({
command: "index",
fieldName: e,
id: t,
text: i
}, function() {
n.resolve();
}), n.promise();
},
executeIndexing: function(e, t, i, n, a) {
var r = this, s = new o(), l = new o();
return "create" !== e && a ? r.unIndex(t, i, a).done(l.resolve, l) : l.resolve(), 
l.done(function() {
r.trigger("index:changed"), "delete" !== e && n ? r.index(t, i, n).done(s.resolve, s) : s.resolve();
}), s.done(function() {
r.trigger("index:changed");
}), s.promise();
},
clear: function(e) {
l({
command: "clear"
}, e);
},
createIndexFromLocalStores: function() {
var e = this;
t.once("db:allDataLoaded", function() {
function i(t) {
for (var i = t.models, n = t.model.prototype.storeName, a = 0, o = i.length; o > a; a++) e.indexModel("create", n, i[a]);
}
var n, a;
for (var o in c) n = c[o], a = o, "fullTextIndexFields" in n && t.on(a + ":ready", i);
});
}
});
return e.on("ready", C.init, C), C;
}), define("models/TaskResourceBaseModel", [ "models/BaseModel", "collections/TaskCollection" ], function(e, t) {
return e.extend({
isAbleToSync: function() {
var e = this, i = this.attributes, n = new t("/tasks/all"), a = n.get(i.task_id), o = !1;
a && (o = !!a.attributes.online_id);
var r = !!i.online_id || !!i.isAbleToSync || o;
return r || e.ableToSyncBind || e.trackIsAbleToSync(), r;
},
trackIsAbleToSync: function() {
var e, i, n = this, a = n.attributes;
a.task_id && (e = new t("/tasks/all"), i = e.get(a.task_id), i && (n.ableToSyncBind = n.bindOnceTo(i, "change:online_id", function() {
n.delay("makeAbleToSync");
})));
}
});
}), define("models/SubtaskModel", [ "application/runtime", "vendor/moment", "wunderbits/helpers/date", "models/TaskResourceBaseModel" ], function(e, t, i, n, a) {
var o = n.prototype;
return n.extend({
storeName: "subtasks",
defaults: {
type: "subtask",
created_at: null,
completed: !1,
completed_at: null,
task_id: null,
position: a
},
initialize: function() {
var e = this;
if (o.initialize.apply(e, arguments), !e.attributes.created_at) {
var t = new Date().toISOString();
e.set({
created_at: i.convertLocalTimeToServerTime(t)
});
}
},
isCompleted: function() {
return !!this.attributes.completed;
},
getHumanFormattedDatesForKey: function(i, n) {
var a = this;
if (!i) throw new Error("Cannot format date without defining what key to use");
var o = i + "_on", r = i + "_at", s = i + "Relative", l = {};
return n.yesterday ? (l[o] = e.language.getText("label_relative_date_yesterday"), 
l[s] = !0) : n.earlier ? l[o] = t(a.get(r)).format("MMM DD, YYYY") : n.today ? (l[o] = t(a.get(r)).fromNow(), 
l[s] = !0) : l[o] = t(a.get(r)).format("ddd, MMM DD"), l;
},
getHumanFormattedDates: function() {
var e = this, t = e.isCompleted() ? "completed" : "created", n = t + "At", a = i.getDatesFromNow(e.getSoDDates(), n);
return e.getHumanFormattedDatesForKey(t, a);
},
getSoDDates: function() {
var e = this, i = {
createdAtDate: t(e.attributes.created_at).startOf("day"),
thisYear: t().startOf("year"),
today: t().startOf("day"),
completedAtDate: a
};
if (e.isCompleted()) {
var n = e.attributes.completed_at && t(e.attributes.completed_at);
i.completedAtDate = n ? n.startOf("day") : t().startOf("day");
}
return i;
}
});
}), define("collections/SubtaskCollection", [ "application/runtime", "models/SubtaskModel", "collections/SortedCollectionMixin", "./BaseCollection" ], function(e, t, i, n) {
var a, o, r, s, l = n.prototype, d = n.extend({
model: t,
initialize: function() {
var e = this;
l.initialize.apply(e, arguments);
},
getSorter: function() {
var e = this;
return e.sorter || e.enableSortedCollection(e.handleSorting, [ "position" ]), e.sorter;
},
handleSorting: function(e, t) {
a = t.attributes, o = e.attributes;
var i = !isNaN(a.position), n = !isNaN(o.position);
if (i && n) r = a.position, s = o.position; else {
if (i && !n) return -1;
if (!i && n) return 1;
r = a.id, s = o.id;
}
return r > s ? 1 : s > r ? -1 : 0;
},
getNewBottomPosition: function() {
var e, t = this;
return t.models.length ? (e = t.models[t.models.length - 1], e.attributes.position + 10) : 0;
}
});
return i.applyToClass(d), d;
}), define("backend/S3Uploader", [ "application/runtime", "vendor/moment", "collections/FileCollection", "wunderbits/helpers/date", "wunderbits/BaseEventEmitter", "project!core/WBDeferred", "project!core/lib/extend" ], function(e, t, i, n, a, o, r, s) {
var l = e._, d = 6291456, c = e.w_, u = e.global, p = a.prototype, m = u.XMLHttpRequest, g = m && "upload" in new m(), f = u.File && u.File.prototype || {}, b = "slice" in f || "webkitSlice" in f;
return a.extend({
initialize: function(e, t) {
var i = this;
i.file = e, i.setType(), i.name = t, i.uploaded = 0, p.initialize.call(i), c.bindAll.apply(i, c.functions(i));
},
setType: function() {
var e = this, t = /^text\//;
e.type = e.file.type || "application/octet-stream", t.test(e.type) && (e.type += "; charset=utf-8");
},
getOutlet: function() {
var t = new o();
return e.sdk.initialized.done(function() {
var i = e.sdk.getOutlet().uploads;
t.resolve(i);
}), t.promise();
},
upload: function() {
var e = this;
e.getOutlet().done(function(t) {
t.create({
file_name: e.name,
content_type: e.type,
file_size: e.file.size
}).done(function(t) {
e.uploadData = t, e.uploaded = 0, e.writeData = t.part, e.trigger("api:data", t), 
e._uploadChunked(t);
}).fail(function() {
l.delay(function() {
e.retryUpload();
}, 5e3);
});
});
},
retryUpload: function() {
var e, i = this;
i.uploadData ? (e = t(i.uploadData.part.date).format("YYYY-MM-DDTHH:mm:ssZ"), e = e && n.convertServerTimeToLocalTime(e), 
e = e && t(e).valueOf() - Date.now() < 5e3, e ? i.upload() : i._uploadChunked(i.writeData)) : i.upload();
},
destroy: function() {},
_updateStatus: function(e) {
var t = this;
1 === e ? t.trigger("change:state", 1) : 2 === e && (t.trigger("change:state", 2), 
t.trigger("upload:complete"));
},
_trackProgress: function(e) {
var t = this, i = Math.floor((t.uploaded + e) / t.file.size * 100);
t.progess = i, t.trigger("change:progress", i);
},
_handleAPIError: function(e) {
console.error("S3Uploader:_handleAPIError", arguments);
var t = this;
e = e || {}, t.trigger("api:error", e);
},
_uploadError: function(e, t) {
console.error("S3Uploader:_uploadError", arguments);
var i = this;
"error:fileDeleted" === t ? i.trigger(t) : i.trigger("upload:error", e);
},
_uploadChunked: function(e) {
var t, i = this, n = i.file, a = 0;
i.uploadId = e.id, i.chunks = [], i.writeInfos = [];
for (var o = n && (n.slice || n.webkitSlice); a < n.size; ) t = o.call(n, a, a += d), 
i.chunks.push(t);
i.trigger("change:state", 1), i._requestChunkSignature(0);
},
_requestChunkSignature: function(e) {
var t = this;
0 === e ? (t.writeInfos[e] = t.uploadData.part, t._uploadChunk(e)) : t.getOutlet().done(function(i) {
i.getPart(t.uploadId, e + 1).done(function(i) {
t.writeInfos[e] = i.part, t._uploadChunk(e);
}).fail(t._handleAPIError, t);
});
},
_uploadChunk: function(t) {
var i = this, n = i.writeInfos[t], a = i.chunks[t];
if (a === s) return void i.trigger("error:fileDeleted");
var o = e.io.upload(n.url, a, {
"x-amz-date": n.date,
Authorization: n.authorization
});
o.fail(i._uploadError, i), i.bindTo(o, "change:progress", "_trackProgress"), i.once("upload:abort", o.abort, o), 
i.once("upload:start", o.send, o), o.done(function(e) {
i.uploaded += a.size, i.chunks[t] = e.getResponseHeader("ETag"), t < i.chunks.length - 1 ? i._requestChunkSignature(t + 1) : i.getOutlet().done(function(e) {
e.finish(i.uploadId).done(function() {
i.trigger("change:state", 2, i.uploadId, i.chunks), i.trigger("upload:complete");
}).fail(i._handleAPIError, i);
});
});
},
canUpload: function() {
return g;
},
hasFileSlicing: function() {
return b;
}
});
}), define("models/FileModel", [ "application/runtime", "backend/S3Uploader", "./BaseModel", "project!core/WBDeferred", "vendor/moment", "wunderbits/helpers/date" ], function(e, t, i, n, a, o, r) {
var s = e._, l = i.prototype;
return i.extend({
storeName: "files",
defaults: {
type: "file",
task_id: r,
list_id: r,
upload_id: r,
user_id: r,
file_name: r,
content_type: r,
file_size: r,
local_created_at: r,
updated_at: r,
url: r,
revision: r,
preview: r
},
initialize: function(e, t) {
t = t || {};
var i = this;
if (l.initialize.apply(i, arguments), i.file = t.file, i.task = t.task, i.file && i.task) {
var a = new n();
i.task.attributes.online_id ? a.resolve() : i.bindOnceTo(i.task, "change:online_id", a.resolve, a), 
a.done(function() {
i.uploadWhenOnline();
});
} else i.attributes.online_id || i.attributes.file_provider || s.defer(function() {
i.destroy({
fromSync: !0
});
});
i.on("change:state", i.onStateChange), i.on("destroy", function() {
i.aborted = !0, i.uploader && i.uploader.trigger("upload:abort");
});
},
destroy: function(e) {
var t = e || {}, i = this;
!t.fromStorage && l.destroy.apply(i, arguments);
},
getOnlinePromise: function() {
var t = this, i = new n(), a = e.isOnline();
if (a) i.resolve(); else var o = t.bindTo(e.state, "change:online", function() {
e.isOnline() && (i.resolve(), t.unbindFrom(o));
});
return i.promise();
},
getOutlet: function() {
var t = new n();
return e.sdk.initialized.done(function() {
var i = e.sdk.getOutlet(), n = i.files, a = i.previews;
t.resolve(n, a);
}), t.promise();
},
fetchPreview: function() {
var e = this, t = new n();
if (!e.fetchingPreview) {
e.fetchingPreview = !0;
var i = e.attributes.online_id;
i ? e.getOutlet().done(function(n, a) {
a.getPreview(i, "web", "retina").done(function(i, n) {
204 === n && (i = {}), e.save({
preview: i
}, {
fromSync: !0
}), t.resolve();
}).always(function() {
e.fetchingPreview = !1;
}).fail(function(i, n) {
404 !== n && setTimeout(function() {
e.getPreviewUrl().done(t.resolve, t);
}, 5e3);
});
}) : e.fetchingPreview = !1;
}
return t.promise();
},
getPreviewUrl: function() {
var e, t = this, i = new n(), r = t.attributes, s = r.preview;
return s && (e = a(r.expires_at).format("YYYY-MM-DDTHH:mm:ssZ"), e = e && o.convertServerTimeToLocalTime(e), 
e = e && a(e).valueOf() < Date.now()), !s || e ? t.fetchPreview().done(function() {
i.resolve(r.preview && r.preview.url);
}) : i.resolve(s.url), i.promise();
},
uploadWhenOnline: function() {
var e = this, t = e.getOnlinePromise();
t.done(function() {
e.defer("upload");
});
},
retryUpload: function() {
var e = this;
if (!e.destroyed && !e.aborted && e.uploader) {
var t = e.getOnlinePromise();
t.done(function() {
e.uploader.retryUpload(), e.trigger("upload:retrying");
});
}
},
upload: function() {
var i = this, n = i.attributes.file_name, a = new t(i.file, n);
i.uploader = a, i.stateBind = i.bindTo(a, "change:state", i.onUploadStateChange), 
i.trigger("hasUploader", a), a.once("api:data", function() {
i.uploadErrorBind = i.bindTo(a, "upload:error", i.retryUpload), i.sourceFileDeletedBind = i.bindTo(a, "error:fileDeleted", i.onSourceFileDelete), 
a.publish("upload:start");
});
var o = function(e) {
var t;
e.response && e.response.data && e.response.data.error && (t = e.response.data.error), 
i.handleUploadError(n, t);
};
a.once("api:error", o), a.upload();
var r = n.split(".");
r.length > 1 && e.trigger("analytics:Files:UploadExtension", r[r.length - 1]);
},
onSourceFileDelete: function() {
var t = this, i = function() {
var n = e.focus;
if ("confirmation" !== n) {
var a = s.escape(t.attributes.file_name);
e.trigger("modal:confirm", {
customTitle: e.language.getLabel("file_uploaded_unsuccessfully", a).toString(),
customText: e.language.getLabel("file_uploaded_failed_deleted", a).toString(),
confirmText: e.language.getLabel("button_ok").toString(),
hideCancel: !0,
confirm: function() {
t.remoteDestroy(), e.trigger("focus:set", n);
}
});
} else setTimeout(i, 1e3);
};
i();
},
handleUploadError: function(t, i) {
var n = this;
i = i || "";
var a = function() {
var o = e.focus;
"confirmation" !== o ? e.trigger("modal:confirm", {
customTitle: e.language.getLabel("file_uploaded_unsuccessfully", s.escape(t)).toString(),
customText: i,
confirmText: e.language.getLabel("button_ok").toString(),
hideCancel: !0,
confirm: function() {
n.remoteDestroy(), e.trigger("focus:set", o);
}
}) : setTimeout(a, 1e3);
};
a();
},
onUploadStateChange: function(e, t, i) {
var n = this;
1 === e ? n.save({
state: 1
}, {
fromSync: !0
}) : 2 === e && n.save({
state: 2,
upload_id: t,
etags: i
}, {
fromSync: !0
});
},
onStateChange: function() {
var e = this;
2 === e.attributes.state && (e.stateBind && e.unbindFrom(e.stateBind), e.uploadErrorBind && e.unbindFrom(e.uploadErrorBind), 
e.sourceFileDeletedBind && e.unbindFrom(e.sourceFileDeletedBind), e.uploader && delete e.uploader, 
e.file && delete e.file);
},
remoteDestroy: function() {
var e = this;
console.debug("file deleted, here is where from:"), console.trace(), e.destroy();
},
trackIsAbleToSync: function() {
var e = this;
e.ableToSyncBind = e.bindOnceTo(e, "change:upload_id", "makeAbleToSync");
},
isAbleToSync: function() {
var e = this, t = this.attributes, i = !!t.upload_id || !!t.file_provider, n = i || !!t.online_id || !!t.isAbleToSync;
return n || e.ableToSyncBind || e.trackIsAbleToSync(), n;
}
});
}), define("collections/BaseCollections/SortedByCreatedAtCollection", [ "../BaseCollection", "wunderbits/WBModel", "vendor/moment" ], function(e, t, i) {
var n = "YYYY-MM-DDTHH:mm:ss.SSSZ";
return e.extend({
model: t,
newestOnTop: !0,
createdAtCache: {},
getValueOfCreatedAt: function(e, t) {
var a, o = this, r = t ? o.localCreatedAtCache : o.createdAtCache, s = t ? "local_created_at" : "created_at";
if (e.id in r) a = r[e.id]; else {
var l = e.attributes;
a = r[e.id] = l[s] ? i(l[s], n).valueOf() : 0;
}
return a;
},
comparator: function(e, t) {
var i = this;
if (e.attributes.created_at && t.attributes.created_at) {
var n = i.getValueOfCreatedAt(e), a = i.getValueOfCreatedAt(t);
return n > a ? i.newestOnTop ? -1 : 1 : a > n ? i.newestOnTop ? 1 : -1 : i.sortByLocalCreate(e, t);
}
return i.sortByLocalCreate(e, t);
},
localCreatedAtCache: {},
sortByLocalCreate: function(e, t) {
var i = this, n = i.getValueOfCreatedAt(e, !0), a = i.getValueOfCreatedAt(e, !0);
if (n > a) return i.newestOnTop ? -1 : 1;
if (a > n) return i.newestOnTop ? 1 : -1;
var o = e.attributes.id, r = t.attributes.id;
return o > r ? i.newestOnTop ? -1 : 1 : r > o ? i.newestOnTop ? 1 : -1 : 0;
}
});
}), define("collections/FileCollection", [ "models/FileModel", "./BaseCollections/SortedByCreatedAtCollection" ], function(e, t) {
return t.extend({
model: e,
newestOnTop: !0
});
}), define("models/ReminderModel", [ "models/TaskResourceBaseModel" ], function(e) {
return e.extend({
storeName: "reminders",
defaults: {
type: "reminder",
date: null,
task_id: null
},
observes: {
self: {
"change:date": "dateChanged"
}
},
dateChanged: function() {
var e = this;
e.set({
reminded: !1
});
}
});
}), define("collections/ReminderCollection", [ "models/ReminderModel", "./BaseCollection" ], function(e, t) {
return t.extend({
model: e
});
}), define("collections/Managers/BaseManager", [ "application/runtime", "wunderbits/BaseEventEmitter", "project!core/lib/fromSuper", "project!core/lib/clone" ], function(e, t, i, n) {
return t.extend({
runtime: e,
collections: {},
fromSyncOptions: {
fromSync: !0
},
initialize: function() {
var e = this;
e.setupCollections(), e.setupBinds();
},
setupCollections: function() {
var e = this, t = i.merge(e, "collections"), n = {};
for (var a in t) n[a] = new e.CollectionClass(t[a]);
e.collections = n;
},
setupBinds: function() {},
persistModel: function(e, t, i) {
i || (i = {}), !i.fromStorage && e && e.save({}, i);
},
destroyModels: function(e) {
for (var t, i = this, a = n(e), o = 0, r = a.length; r > o; o++) t = a[o], t.destroy(i.fromSyncOptions);
},
getLocalSaveOptions: function(e) {
var t = this;
return e && e.fromStorage ? e : t.fromSyncOptions;
},
hasUpdateOptions: function(e) {
return !e || !e.fromStorage;
},
addOrRemoveFromCollection: function(e, t, i, n) {
var a = this;
e ? a._addToCollection(t, i, n) : a._removeFromCollection(t, i, n);
},
_addToCollection: function(e, t, i) {
this._inCollection(e, t) || e.add(t, i);
},
_removeFromCollection: function(e, t, i) {
this._inCollection(e, t) && e.remove(t, i);
},
_inCollection: function(e, t) {
return !!e.get(t.id);
}
});
}), define("collections/Managers/SearchManager", [ "application/runtime", "backend/search", "wunderbits/helpers/strings", "collections/TaskCollection", "collections/SubtaskCollection", "collections/FileCollection", "collections/ReminderCollection", "collections/Managers/BaseManager" ], function(e, t, i, n, a, o, r, s, l) {
var d = s.prototype, c = e._;
return s.extend({
observes: {
runtime: {
"search:keywords": "onSearchWithKeywords"
}
},
files: l,
tasks: l,
subtasks: l,
initialize: function() {
var e = this;
e.files = new o("/files/all"), e.tasks = new n("/tasks/all"), e.subtasks = new a("/subtasks/all"), 
d.initialize.apply(e, arguments), e.resetSearch = c.debounce(e.resetSearch, 100), 
e.bindTo(e.tasks, "add change:title", "resetSearch"), e.bindTo(e.files, "add remove", "resetSearch"), 
e.bindTo(e.subtasks, "add remove change:title", "resetSearch"), e.bindTo(t, "index:changed", "resetSearch");
},
resetSearch: function() {
var t = this, i = e.state.attributes.inSearchState;
t.lastKeywords && t.lastOptions && i && t.onSearchWithKeywords(t.lastKeywords, t.lastOptions);
},
onSearchWithKeywords: function(a, o) {
var r = this;
o = o || {}, o.term = a, r.lastOptions = o, r.lastKeywords = a;
var s = a, l = a.match(/list=([a-z0-9]+)/);
l && (l = l[1], a = a.replace("list=" + l, ""));
var d = new RegExp(i.escapeForRegex(a), "i"), u = [], p = r.subtasks.filter(function(e) {
return d.test(e.attributes.title);
});
p = c.map(p, function(e) {
return e.attributes.task_id;
});
var m = r.files.filter(function(e) {
return d.test(e.attributes.file_name);
});
m = c.map(m, function(e) {
return r.tasks.getIdByAltId(e.attributes.resource_id);
}), t.search("tasks", a, function(t) {
var i = "/search/" + encodeURIComponent(s), a = new n(i);
u = c.unique(u.concat(t, p, m));
var d = c.compact(c.map(u, function(e) {
var t = r.tasks.get(e), i = t && t.attributes.list_id;
return l && l !== i ? !1 : t;
}));
a.reset(d);
var g = new n("/search");
g.reset(d), d.length ? (e.trigger("browser:hide404"), e.trigger("collection:search:ready", i, o)) : e.trigger("browser:show404", "search");
});
}
});
}), define("collections/Managers/TagsManager", [ "application/runtime", "./BaseManager", "backend/search", "project!core/lib/when", "project!core/WBDeferred" ], function(e, t, i, n, a) {
var o = e._;
return t.extend({
observes: {
runtime: {
"tags:getSuggestions": "getTagSuggestions",
"tags:getTagCloud": "getTagCloud"
}
},
getTagSuggestions: function(t, n) {
i.searchTags(t, function(t) {
t = o.difference(t, n), e.trigger("tags:suggestions", t);
});
},
getTagCloud: function() {
var t = [];
i.searchTags("#").done(function(r) {
var s = {};
o.each(r, function(e) {
s[e] = new a(), i.search("tasks", e, function(i) {
t.push({
tag: e,
ids: i
}), s[e].resolve();
});
}), n(o.toArray(s)).done(function() {
e.trigger("tags:tagCloud", t);
});
});
}
});
}), define("models/Positions/PositionsModel", [ "../BaseModel", "project!core/lib/clone" ], function(e, t) {
return e.extend({
defaults: {
type: "positions",
revision: void 0,
values: [],
localValues: [],
syncedIDs: []
},
insert: function(e, i) {
var n = this, a = n.getValues();
a = t(a), n.removeFromArray(e, a);
var o = a.indexOf(i);
if (-1 !== o) {
var r = [ o, 0 ];
r = r.concat(e), a.splice.apply(a, r), n.save("values", a);
} else console.warn("Unable to insert IDs because before ID", i, "not in positions.");
},
prepend: function(e) {
var i = this, n = i.getValues();
n = t(n), i.removeFromArray(e, n), n.unshift.apply(n, e), i.save("values", n);
},
append: function(e) {
var i = this, n = i.getValues();
n = t(n), i.removeFromArray(e, n), n.push.apply(n, e), i.save("values", n);
},
removeIDs: function(e) {
var i = this, n = i.getValues();
n = t(n), i.removeFromArray(e, n), i.save("values", n);
},
getValues: function() {
var e = this;
return e.attributes.values;
},
removeFromArray: function(e, t) {
return e.forEach(function(e) {
var i = t.indexOf(e);
-1 !== i && t.splice(i, 1);
}), t;
},
markIDAsSyncedOut: function(e) {
var t = this, i = t.attributes.syncedIDs || [];
-1 === i.indexOf(e) && (i.push(e), t.save({
syncedIDs: i
}, {
fromSync: !0
}));
}
});
}), define("collections/Positions/PositionsCollection", [ "models/Positions/PositionsModel", "wunderbits/collections/WBCollection" ], function(e, t) {
return t.extend({
model: e
});
}), define("models/Positions/TaskPositionsModel", [ "./PositionsModel" ], function(e) {
return e.extend({
storeName: "taskPositions",
defaults: {
type: "task_position",
online_id: void 0,
revision: void 0,
list_id: void 0,
online_list_id: void 0,
values: [],
localValues: [],
syncedIDs: []
},
isAbleToSync: function() {
var e = this, t = !!e.attributes.online_id;
return t || e.trackIsAbleToSync(), t;
},
trackIsAbleToSync: function() {
var e = this;
e.bindOnceTo(e, "change:online_id", function() {
e.delay("makeAbleToSync");
});
}
});
}), define("collections/Positions/TaskPositionsCollection", [ "./PositionsCollection", "models/Positions/TaskPositionsModel" ], function(e, t) {
return e.extend({
model: t
});
}), define("collections/Managers/TasksCollectionManager", [ "application/runtime", "wunderbits/collections/WBCollection", "collections/ListCollection", "collections/TaskCollection", "collections/Positions/TaskPositionsCollection", "collections/Managers/BaseManager", "collections/comparators", "vendor/moment" ], function(e, t, i, n, a, o, r, s, l) {
var d = o.prototype, c = e._, u = t.collections;
return o.extend({
CollectionClass: n,
collections: {
all: "/tasks/all"
},
observes: {
"collections.all": {
"change:starred": "starredCheck",
"change:assignee_id": [ "assignedCheck", "userScopeCheck" ],
"change:completed": [ "completedCheck", "completedSound", "starredCheck", "dateCheck", "assignedCheck", "userScopeCheck", "trackSignificantEvent" ],
"change:due_date": [ "dateCheck", "userScopeCheck" ],
"change:list_id": [ "listIdCheck", "userScopeCheck" ],
add: [ "persistModel", "starredCheck", "assignedCheck", "completedCheck", "dateCheck", "userScopeCheck", "listIdCheck", "updateTaskPosition", "emitItemAdded" ],
destroy: [ "detachModel", "cascadeDestruction" ]
},
runtime: {
"day:ended": "updateDueDates"
},
acceptedLists: {
"add remove": [ "updateSmartListTasks", "userScopeCheckFromList" ],
"change:isShared": "userScopeCheckFromList"
}
},
acceptedLists: new i("/lists/accepted"),
latestDate: l,
formattedToday: l,
initialize: function() {
var e = this;
e.taskPositions = new a("/taskPositions/all"), d.initialize.apply(e, arguments), 
e.setupSmartListCollections();
},
filters: {},
setupSmartListCollections: function() {
for (var e = this, t = [ "all", "starred", "completed", "today", "week", "assigned" ], i = 0, a = t.length; a > i; i++) {
var o = t[i];
e.filters[o] = new n("/tasks/filter/" + o), e.filters[o].comparator = e.getComparatorForSmartList(o);
}
[ "week", "today" ].forEach(function(t) {
var i = t + "/user";
e.filters[i] = new n("/tasks/filter/" + i), e.filters[i].comparator = e.getComparatorForSmartList(t);
}), c.times(7, function(t) {
var i = "todayPlus" + t;
e.filters[i] = new n("/tasks/filter/" + i), e.filters[i].comparator = e.getComparatorForSmartList("week");
var a = i + "/user";
e.filters[a] = new n("/tasks/filter/" + a), e.filters[a].comparator = e.getComparatorForSmartList("week");
});
},
getComparatorForSmartList: function(e) {
var t = {
starred: "starred",
completed: "completedAt",
today: "dueDate",
week: "dueDate"
};
return r[t[e]] || r.position;
},
trackSignificantEvent: function(t, i, n) {
n = n || {}, i && !n.fromStorage && !n.fromSync && e.env.isChrome() && e.trigger("significantEvent:added");
},
detachModel: function(e, t, i) {
for (var a = this, o = a.filters.length, r = 0; o > r; r++) {
var s = a.filters[r];
s.remove(e, s, i);
}
var l = e.attributes.list_id, d = new n("/lists/" + l + "/tasks");
d.remove(e, i);
},
cascadeDestruction: function(e) {
var t = this, i = n.collections, a = [ "comments", "files", "notes", "reminders", "subtasks", "subtaskPositions" ];
a.forEach(function(n) {
var a = i["/tasks/" + e.id + "/" + n];
a && t.destroyModels(a.models);
});
},
listIdCheck: function(e, t, i) {
var a = this, o = e.attributes.list_id, r = a.collections[o] || new n("/lists/" + o + "/tasks"), s = e.previous("list_id"), l = s && new n("/lists/" + s + "/tasks");
l && a._removeFromCollection(l, e), a._addToCollection(r, e, i), a.collections[o] || (a.collections[o] = r);
},
isListIDIsAccepted: function(e) {
var t = this, i = t.acceptedLists.get(e);
return !!i;
},
updateSmartListTasks: function(e, t, i) {
var a = this, o = new n("/lists/" + e.id + "/tasks");
o.forEach(function(e) {
a.starredCheck(e, l, i), a.assignedCheck(e, l, i), a.dateCheck(e, l, i), a.completedCheck(e, l, i);
});
},
starredCheck: function(e, t, i) {
var n = this, a = e.attributes, o = a.starred && !a.completed, r = n.isListIDIsAccepted(a.list_id);
i.sort = !1;
var s = o && r;
n.addOrRemoveFromCollection(s, n.filters.starred, e, i);
},
assignedCheck: function(t, i, n) {
var a = this, o = t.attributes, r = e.user.isIDEqual(o.assignee_id) && !o.completed, s = a.isListIDIsAccepted(o.list_id), l = r && s;
a.addOrRemoveFromCollection(l, a.filters.assigned, t, n);
},
completedCheck: function(e, t, i) {
var n = this, a = e.attributes, o = a.completed, r = n.isListIDIsAccepted(a.list_id);
i.sort = !1;
var s = o && r;
n.addOrRemoveFromCollection(s, n.filters.completed, e, i);
var d = !(o || !r);
n.addOrRemoveFromCollection(d, n.filters.all, e, i), i.fromStorage || i.fromSync || !o || n.defer(function() {
n.completeSubtasks(e);
}), !i.fromStorage && e.hasChanged() && n.dateCheck(e, l, i);
},
completedSound: function(t, i, n) {
var a = n.fromStorage || n.fromSync;
!a && t.isCompleted() && "true" === e.settings.attributes.sound_checkoff_enabled && e.trigger("sounds:play", "complete");
},
updateTaskPosition: function(e, t, i) {
var n = this;
if (n.hasUpdateOptions(i)) {
i = n.getLocalSaveOptions(i);
var a = e.attributes, o = n.getTaskPositionModel(a.list_id), r = o && o.attributes.values, s = r && r.indexOf(e.id);
if (s !== l && -1 !== s) {
var d = 10 * s;
a.position !== d && e.save({
position: d
}, i);
}
}
},
getTaskPositionModel: function(e) {
var t = u["/lists/" + e + "/taskPositions"];
return t && t.models[0];
},
completeSubtasks: function(e) {
var t = n.collections["/tasks/" + e.id + "/subtasks"], i = t && t.models;
if (i) for (var a, o = 0, r = i.length; r > o; o++) a = i[o], a.isCompleted() || a.save({
completed: !0
});
},
getLatestDate: function() {
var e = this;
return e.latestDate = Date.now(), e.latestDate;
},
getFormattedToday: function() {
var e = this;
return e.getLatestDate(), s().sod().format("YYYY-MM-DD");
},
shouldUpdateFormattedToday: function() {
var e = this, t = 864e5, i = e.getLatestDate(), n = new Date(e.formattedToday).valueOf();
return i - n > t;
},
throttledGetFormattedToday: function() {
var e = this;
return e.formattedToday = e.formattedToday && e.shouldUpdateFormattedToday() ? e.getFormattedToday() : e.formattedToday ? e.formattedToday : e.getFormattedToday(), 
e.formattedToday;
},
dateCheck: function(e, t, i) {
i = i || {};
var n, a, o, r = this, l = e.attributes.due_date, d = r.throttledGetFormattedToday(), c = l && l === d;
l && (o = s(l).diff(s().sod(), "days"), 0 >= o ? (n = !0, o = 0) : 6 >= o && (a = !0));
var u = !e.isCompleted(), p = r.isListIDIsAccepted(e.attributes.list_id);
i.sort = !1, c = (c || n) && u;
var m = c && p;
r.addOrRemoveFromCollection(m, r.filters.today, e, i), a = (a || n) && u;
var g = a && p;
r.addOrRemoveFromCollection(g, r.filters.week, e, i);
for (var f = 0; 7 > f; f++) {
var b = o === f && u, h = r.filters["todayPlus" + f], v = b && p;
r.addOrRemoveFromCollection(v, h, e, i);
}
},
updateDueDates: function() {
for (var e = this, t = e.collections.all, i = 0, n = t.models.length; n > i; i++) {
var a = t.models[i];
a.has("due_date") && a.trigger("change:due_date", a);
}
},
emitItemAdded: function(t, i, n) {
n.fromStorage || n.fromSync || e.trigger("onboarding:itemAdded");
},
addFromURI: function(t) {
var i = this, a = i.collections.all, o = new n("/lists/inbox/tasks"), r = "top" === e.settings.attributes.new_task_location, s = r ? o.getNewTopPosition() : o.getNewBottomPosition();
a.add({
title: t.title && t.title,
note: t.note && t.note,
list_id: "inbox",
position: s
});
},
userScopeCheck: function(e) {
var t = this, i = [ "week", "today" ];
c.times(7, function(e) {
i.push("todayPlus" + e);
}), i.forEach(function(i) {
var n = i + "/user", a = t.filters[i], o = t.filters[n], r = a.get(e) && e.belongsToMe();
t.addOrRemoveFromCollection(r, o, e);
});
},
userScopeCheckFromList: function(e) {
var t = this, i = new n("/lists/" + e.id + "/tasks");
i.models.forEach(function(e) {
t.userScopeCheck(e);
});
}
});
}), define("models/Positions/SubtaskPositionsModel", [ "./PositionsModel" ], function(e) {
return e.extend({
storeName: "subtaskPositions",
defaults: {
type: "subtask_position",
online_id: void 0,
revision: void 0,
task_id: void 0,
online_task_id: void 0,
values: [],
localValues: [],
syncedIDs: []
},
isAbleToSync: function() {
var e = this, t = !!e.attributes.online_id;
return t || e.trackIsAbleToSync(), t;
},
trackIsAbleToSync: function() {
var e = this;
e.bindOnceTo(e, "change:online_id", function() {
e.delay("makeAbleToSync");
});
}
});
}), define("collections/Positions/SubtaskPositionsCollection", [ "./PositionsCollection", "models/Positions/SubtaskPositionsModel" ], function(e, t) {
return e.extend({
model: t
});
}), define("collections/Managers/SubtasksCollectionManager", [ "application/runtime", "./BaseManager", "wunderbits/collections/WBCollection", "collections/SubtaskCollection", "collections/Positions/SubtaskPositionsCollection", "collections/TaskCollection" ], function(e, t, i, n, a, o, r) {
var s = i.collections;
return t.extend({
CollectionClass: n,
collections: {
all: "/subtasks/all"
},
observes: {
"collections.all": {
"change:task_id": "onChangeTaskID",
add: [ "persistModel", "onSubtaskAdd", "updateSubtaskPosition", "updateTaskHasSubtasksFromSubtask", "updateSubtaskCompletionPercentageFromSubtask" ],
remove: [ "onSubtaskRemove", "updateTaskHasSubtasksFromSubtask", "updateSubtaskCompletionPercentageFromSubtask" ],
"change:completed": [ "updateSubtaskCompletionPercentageFromSubtask", "completedSound" ]
},
tasks: {
add: [ "updateTaskHasSubtasksFromTask", "updateSubtaskCompletionPercentageFromTask" ]
}
},
tasks: new o("/tasks/all"),
subtaskPositions: new a("/subtaskPositions/all"),
onSubtaskAdd: function(e, t, i) {
var n = this;
n.taskIDCheck(e, t, i, "add");
},
onSubtaskRemove: function(e, t, i) {
this.taskIDCheck(e, t, i, "remove");
},
onChangeTaskID: function(e, t, i) {
var a = this, o = e.previous("task_id");
if (o) {
var s = new n("/tasks/" + o + "/subtasks");
s.remove(e, i);
}
a.taskIDCheck(e, r, i, "add");
},
taskIDCheck: function(e, t, i, a) {
var o = e.attributes.task_id;
if (o) {
var r = new n("/tasks/" + o + "/subtasks");
r[a](e, i);
}
},
updateSubtaskPosition: function(e, t, i) {
var n = this;
if (n.hasUpdateOptions(i)) {
i = n.getLocalSaveOptions(i);
var a = e.attributes, o = n.getSubtaskPositionModel(a.task_id), s = o && o.attributes.values, l = s && s.indexOf(e.id);
if (l !== r && -1 !== l) {
var d = 10 * l;
a.position !== d && e.save({
position: l
}, i);
}
}
},
getSubtaskPositionModel: function(e) {
var t = s["/tasks/" + e + "/subtaskPositions"];
return t && t.models[0];
},
updateTaskHasSubtasksFromSubtask: function(e, t, i) {
var n = this;
if (n.hasUpdateOptions(i)) {
var a = e.attributes.task_id, o = n.tasks.get(a);
o && n.updateTaskHasSubtasksFromTask(o, r, i);
}
},
updateTaskHasSubtasksFromTask: function(e, t, i) {
var n = this;
if (n.hasUpdateOptions(i)) {
i = n.getLocalSaveOptions(i);
var a = n.hasSubtasks(e.id);
e.attributes.hasSubtasks !== a && e.save({
hasSubtasks: a
}, i);
}
},
hasSubtasks: function(e) {
var t = s["/tasks/" + e + "/subtasks"];
return !(!t || !t.length);
},
updateSubtaskCompletionPercentageFromSubtask: function(e, t, i) {
var n = this;
i = n.getLocalSaveOptions(i);
var a = e.attributes.task_id, o = n.tasks.get(a);
o && n.updateSubtaskCompletionPercentage(o, r, i);
},
updateSubtaskCompletionPercentageFromTask: function(e, t, i) {
var n = this;
if (n.hasUpdateOptions(i)) {
var a = e.id, o = n.collections.all, r = o.where({
task_id: a
});
r.length && (i = n.getLocalSaveOptions(i), e.save({
subtaskCompletion: n.getSubtaskCompletionPercent(r)
}, i));
}
},
getSubtaskCompletionPercent: function(e) {
var t = e.filter(function(e) {
return !e.attributes.completed;
}), i = e.filter(function(e) {
return e.attributes.completed;
}), n = i.length / (t.length + i.length);
return n = isNaN(n) ? 0 : n, Math.floor(100 * n);
},
updateSubtaskCompletionPercentage: function(e, t, i) {
var a = this;
i = a.getLocalSaveOptions(i);
var o, r = new n("/tasks/" + e.id + "/subtasks"), s = r.where({
completed: !1
}), l = r.where({
completed: !0
});
o = l.length / (s.length + l.length), o = isNaN(o) ? 0 : o, o = Math.floor(100 * o), 
e.save({
subtaskCompletion: o
}, i);
},
completedSound: function(t, i, n) {
var a = n.fromStorage || n.fromSync;
!a && t.isCompleted() && "true" === e.settings.attributes.sound_checkoff_enabled && e.trigger("sounds:play", "complete");
}
});
}), define("collections/Managers/BasePositionsCollectionManager", [ "application/runtime", "./BaseManager", "collections/TaskCollection", "collections/Positions/TaskPositionsCollection", "project!core/lib/assert" ], function(e, t, i, n, a, o) {
var r = t.prototype;
return t.extend({
CollectionClass: n,
collections: {
all: "/taskPositions/all"
},
observes: {
"collections.all": {
add: [ "persistModel", "updatePositions" ],
"change:values": "updatePositions",
"change:revision": "onRevisionChange"
},
allThings: {
add: "onModelPositionChange",
"change:position": "onModelPositionChange",
"change:online_id": "onChangeOnlineID"
}
},
allThings: o,
parentKey: o,
updateQueue: o,
persistModel: function(e, t, i) {
i || (i = {}), !i.fromStorage && e && e.save({}, i);
},
forceApiSync: function(e) {
var t = this;
t.defer(function() {
e.changed.values = e.attributes.values, e.trigger("change", e, {});
});
},
onRevisionChange: function(e) {
var t = this, i = e.previousAttributes();
"revision" in i && i.revision === o && t.defer(function() {
e.save({
values: i.values,
localValues: i.values
}), t.updatePositions(e, o, {
fromSync: !0
});
});
},
initialize: function() {
var e = this;
e.updateQueue = [];
var t = "Must be defined";
a.object(e.allThings, t), a.string(e.parentKey, t), r.initialize.apply(e, arguments);
},
updatePositions: function(e, t, i) {
var n = this;
if (i.fromSync) {
var a = e.previousAttributes();
if (!("revision" in a && a.revision === o)) {
var r = e.attributes.values;
r.forEach(function(e) {
var t = n.allThings.get(e), a = t && r && r.indexOf(t.id);
a !== o && -1 !== a && t.save({
position: 10 * a
}, i);
});
}
}
},
onChangeOnlineID: function(e) {
var t = this, i = e.attributes[t.parentKey], n = t.findPositionsModelFromParentID(i);
n && t.defer(function() {
n.changed.values = n.attributes.values, n.trigger("change", n, {});
});
},
onModelPositionChange: function(e, t, i) {
if (i || (i = {}), !i.fromStorage && !i.fromSync) {
var n = this, a = e.attributes[n.parentKey];
n.defer(function() {
n.onPositionChange(n.getScopedThingCollection(a), a);
});
}
},
getScopedThingCollection: function() {
throw new Error("I AM ABSTRACT OVERRIDE ME");
},
getValues: function(e) {
var t = [];
return e.sort(), e.models.forEach(function(e) {
t.push(e.id);
}), t;
},
onPositionChange: function(e, t) {
var i = this, n = i.getValues(e), a = i.findPositionsModelFromParentID(t);
if (a) a.save({
values: n,
localValues: n
}); else {
var o = {
values: n,
localValues: n
};
o[i.parentKey] = t, i.collections.all.add(o);
}
},
findPositionsModelFromParentID: function(e) {
var t = this, i = {};
return i[t.parentKey] = e, t.collections.all.findWhere(i);
}
});
}), define("collections/Managers/TaskPositionsCollectionManager", [ "./BasePositionsCollectionManager", "collections/TaskCollection", "collections/Positions/TaskPositionsCollection" ], function(e, t, i) {
return e.extend({
CollectionClass: i,
collections: {
all: "/taskPositions/all"
},
observes: {
"collections.all": {
add: [ "persistModel", "updatePositions", "addToParentCollection" ],
"change:values": "updatePositions",
"change:revision": "onRevisionChange",
"change:online_id": "forceApiSync",
remove: "removeFromParentCollection"
}
},
allThings: new t("/tasks/all"),
parentKey: "list_id",
getValues: function(e) {
var t = [];
return e.sort(), e.models.forEach(function(e) {
!e.attributes.completed && t.push(e.id);
}), t;
},
getScopedThingCollection: function(e) {
return new t("/lists/" + e + "/tasks");
},
addToParentCollection: function(e, t, n) {
var a = e.attributes.list_id, o = new i("/lists/" + a + "/taskPositions");
o.add(e, n);
},
removeFromParentCollection: function(e, t, n) {
var a = e.attributes.list_id, o = new i("/lists/" + a + "/taskPositions");
o.remove(e, n);
}
});
}), define("collections/Managers/SubtaskPositionsCollectionManager", [ "./BasePositionsCollectionManager", "collections/SubtaskCollection", "collections/Positions/SubtaskPositionsCollection" ], function(e, t, i) {
return e.extend({
CollectionClass: i,
collections: {
all: "/subtaskPositions/all"
},
observes: {
"collections.all": {
add: [ "persistModel", "updatePositions", "addToParentCollection" ],
"change:values": "updatePositions",
"change:online_id": "forceApiSync",
remove: "removeFromParentCollection"
}
},
allThings: new t("/subtasks/all"),
parentKey: "task_id",
getScopedThingCollection: function(e) {
return new t("/tasks/" + e + "/subtasks");
},
addToParentCollection: function(e, t, n) {
var a = e.attributes, o = a.task_id, r = !(n && n.fromStorage && !a.values.length);
if (r) {
var s = new i("/tasks/" + o + "/subtaskPositions");
s.add(e, n);
}
},
removeFromParentCollection: function(e, t, n) {
var a = e.attributes.task_id, o = new i("/tasks/" + a + "/subtaskPositions");
o.remove(e, n);
}
});
}), define("models/Positions/ListPositionsModel", [ "./PositionsModel" ], function(e) {
return e.extend({
storeName: "listPositions",
defaults: {
type: "list_position",
online_id: void 0,
revision: void 0,
values: [],
localValues: [],
syncedIDs: []
},
isAbleToSync: function() {
return !0;
}
});
}), define("collections/Positions/ListPositionsCollection", [ "./PositionsCollection", "models/Positions/ListPositionsModel" ], function(e, t) {
return e.extend({
model: t
});
}), define("collections/Managers/ListsCollectionManager", [ "application/runtime", "collections/ListCollection", "collections/Positions/ListPositionsCollection", "collections/TaskCollection", "collections/MembershipCollection", "collections/Managers/BaseManager", "vendor/moment" ], function(e, t, i, n, a, o, r, s) {
var l = o.prototype;
return o.extend({
CollectionClass: t,
collections: {
all: "/lists/all",
accepted: "/lists/accepted",
sortable: "/lists/sortable",
pending: "/lists/pending"
},
observes: {
"collections.all": {
add: [ "persistModel", "updateListPosition", "checkSortable", "checkPending" ],
"change:owner_id": [ "checkSortable" ],
destroy: [ "detachModel", "cascadeDestruction" ]
}
},
listPositions: new i("/listPositions/all"),
initialize: function() {
var t = this;
l.initialize.call(t, arguments), e.ready.done(function() {
t.userMemberships = new a("/users/" + e.user.id + "/memberships"), t.bindTo(t.userMemberships, "change:state", "updateCollectionFromMembership");
}), t.bindOnceTo(e, "lists:ready", "setupInbox");
},
setupInbox: function() {
var e = this, t = e.collections.all, i = t.get("inbox");
i || t.add({
id: "inbox",
title: "",
list_type: "inbox"
}, e.fromSyncOptions);
},
checkSortable: function(t, i, n) {
var o = this, r = o.collections.sortable, s = t.attributes;
if (!t.isInbox()) {
var l = "owner" === s.role, d = new a("/lists/" + t.id + "/memberships"), c = d.findWhere({
user_id: "" + e.user.id
});
l || c && c.isAccepted() ? r.add(t, n) : r.remove(t, n);
}
},
checkPending: function(t, i) {
var n = this, o = n.collections.pending, r = n.collections.accepted, s = new a("/lists/" + t.id + "/memberships"), l = s.findWhere({
user_id: "" + e.user.id
});
l && l.isPending() ? (r.remove(t, i), o.add(t, i)) : (l || t.isOwner() || t.isInbox()) && (o.remove(t, i), 
r.add(t, i));
},
updateCollectionFromMembership: function(e) {
var t = this, i = t.collections.all.get(e.attributes.list_id);
i && (t.checkPending(i), t.checkSortable(i));
},
updateListPosition: function(e, t, i) {
var n = this;
if (n.hasUpdateOptions(i)) {
n.getLocalSaveOptions(i);
var a = e.attributes;
if (a.online_id) {
var o = n.listPositions.models[0], r = o && o.attributes.values, l = r && r.indexOf(e.id);
l !== s && -1 !== l && e.save({
position: 10 * l
}, i);
}
}
},
detachModel: function(e, t, i) {
var n = this;
n.collections.sortable.remove(e, i), n.collections.all.remove(e, i);
},
cascadeDestruction: function(e) {
var i = this, n = t.collections, a = [ "tasks", "taskPositions", "memberships" ];
a.forEach(function(t) {
var a = n["/lists/" + e.id + "/" + t];
a && i.destroyModels(a.models);
});
var o = i.listPositions.at(0);
o && o.removeIDs([ e.id ]);
}
});
}), define("vendor/setImmediate", [ "wunderbits/global" ], function(e, t) {
function i(e) {
return g[m] = n.apply(t, e), m++;
}
function n(e) {
var i = [].slice.call(arguments, 1);
return function() {
"function" == typeof e ? e.apply(t, i) : new Function("" + e)();
};
}
function a(e) {
if (f) setTimeout(n(a, e), 0); else {
var t = g[e];
if (t) {
f = !0;
try {
t();
} finally {
o(e), f = !1;
}
}
}
}
function o(e) {
delete g[e];
}
function r() {
p = function() {
var e = i(arguments);
return process.nextTick(n(a, e)), e;
};
}
function s() {
if (e.postMessage && !e.importScripts) {
var t = !0, i = e.onmessage;
return e.onmessage = function() {
t = !1;
}, e.postMessage("", "*"), e.onmessage = i, t;
}
}
function l() {
var t = "setImmediate$" + Math.random() + "$", n = function(i) {
i.source === e && "string" == typeof i.data && 0 === i.data.indexOf(t) && a(+i.data.slice(t.length));
};
e.addEventListener ? e.addEventListener("message", n, !1) : e.attachEvent("onmessage", n), 
p = function() {
var n = i(arguments);
return e.postMessage(t + n, "*"), n;
};
}
function d() {
var e = new MessageChannel();
e.port1.onmessage = function(e) {
var t = e.data;
a(t);
}, p = function() {
var t = i(arguments);
return e.port2.postMessage(t), t;
};
}
function c() {
var e = b.documentElement;
p = function() {
var t = i(arguments), n = b.createElement("script");
return n.onreadystatechange = function() {
a(t), n.onreadystatechange = null, e.removeChild(n), n = null;
}, e.appendChild(n), t;
};
}
function u() {
p = function() {
var e = i(arguments);
return setTimeout(n(a, e), 0), e;
};
}
if (e.setImmediate) return e.setImmediate;
var p, m = 1, g = {}, f = !1, b = e.document, h = Object.getPrototypeOf && Object.getPrototypeOf(e);
return h = h && h.setTimeout ? h : e, "[object process]" === {}.toString.call(e.process) ? r() : s() ? l() : e.MessageChannel ? d() : b && "onreadystatechange" in b.createElement("script") ? c() : u(), 
h.setImmediate = p, h.clearImmediate = o, h.setImmediate;
}), define("models/FolderModel", [ "models/BaseModel", "collections/ListCollection" ], function(e, t) {
return e.extend({
storeName: "folders",
defaults: {
type: "folder",
title: "",
list_ids: [],
position: -1,
expanded: !1
},
isExpanded: function() {
return !!this.attributes.expanded;
},
addListId: function(e) {
var t, i = this.isListIdInFolder(e);
i || (t = this.attributes.list_ids.concat(e), this.save("list_ids", t));
},
removeListId: function(e) {
var t = this.attributes.list_ids;
t = t.filter(function(t) {
return t != e;
}), this.save("list_ids", t);
},
isListIdInFolder: function(e) {
return this.attributes.list_ids.some(function(t) {
return e == t;
});
},
_canSync: function() {
var e = new t("/lists/all"), i = e.models.some(function(e) {
return !e.attributes.online_id;
}), n = !i;
return n;
},
_reevaluateCanSync: function() {
var e = this;
!e.destroyed && e._canSync() && e.save("isAbleToSync", !0);
},
isAbleToSync: function() {
var e = this;
e.save("isAbleToSync", !1);
var i = e._canSync(), n = new t("/lists/all");
return i || e.bindOnceTo(n, "change:online_id", "_reevaluateCanSync"), i;
}
});
}), define("collections/FolderCollection", [ "models/FolderModel", "collections/BaseCollection", "wunderbits/lib/dependencies" ], function(e, t, i) {
var n = i._;
return t.extend({
model: e,
findFolderForListId: function(e) {
var t = this;
return n.find(t.models, function(t) {
return t.attributes.list_ids.some(function(t) {
return e == t;
});
});
}
});
}), define("collections/Managers/FoldersCollectionManager", [ "vendor/setImmediate", "collections/FolderCollection", "collections/ListCollection", "collections/Managers/BaseManager" ], function(e, t, i, n) {
return n.extend({
CollectionClass: t,
collections: {
all: "/folders/all"
},
observes: {
"collections.all": {
add: "persistModel",
"change:list_ids": "checkLength"
},
lists: {
destroy: "detachListID"
}
},
lists: new i("/lists/all"),
detachListID: function(e) {
var t = this;
t.collections.all.models.forEach(function(t) {
t.isListIdInFolder(e.id) && t.removeListId(e.id);
});
},
checkLength: function(t) {
e(function() {
t.attributes.list_ids.length || t.destroy();
});
}
});
}), define("collections/Managers/ListPositionsCollectionManager", [ "application/runtime", "./BaseManager", "collections/ListCollection", "collections/Positions/ListPositionsCollection" ], function(e, t, i, n, a) {
return t.extend({
CollectionClass: n,
collections: {
all: "/listPositions/all"
},
observes: {
"collections.all": {
add: [ "persistModel", "updateListsPositions" ],
"change:values": "updateListsPositions"
},
sortableLists: {
add: [ "updateListPositionFromListAdd", "onListModelPositionChange" ],
"change:position": "onListModelPositionChange",
"change:online_id": "onChangeOnlineListID"
}
},
sortableLists: new i("/lists/sortable"),
updateListsPositions: function(e, t, i) {
var n = this, o = e.attributes.values;
o.forEach(function(e) {
var t = n.sortableLists.get(e), r = t && o && o.indexOf(t.id);
r !== a && -1 !== r && t.save({
position: 10 * r
}, i);
});
},
updateListPositionFromListAdd: function(e, t, i) {
var n = this;
i = n.getLocalSaveOptions(i);
var o = n.collections.all.at(0), r = o && o.attributes.values.indexOf(e.id);
r !== a && -1 !== r && e.save({
position: 10 * r
}, i);
},
onChangeOnlineListID: function(e, t, i) {
var n = this;
n.onListModelPositionChange(e, a, i);
},
onListModelPositionChange: function(e, t, i) {
var n = this;
i || (i = {}), i.fromStorage || i.fromSync || n.handleListModelPositionChange();
},
handleListModelPositionChange: function() {
var e = this, t = [], i = e.sortableLists;
i.sort(), i.models.forEach(function(e) {
t.push(e.id);
});
var n = e.collections.all.at(0);
n && n.save({
values: t,
localValues: t
});
}
});
}), define("collections/Managers/MembershipsCollectionManager", [ "application/runtime", "collections/MembershipCollection", "collections/ListCollection", "collections/Positions/ListPositionsCollection", "collections/UserCollection", "collections/Managers/BaseManager" ], function(e, t, i, n, a, o, r) {
return o.extend({
CollectionClass: t,
collections: {
all: "/memberships/all",
pendingInvites: "/memberships/me/pending"
},
observes: {
"collections.all": {
add: [ "persistModel", "addMembershipToSubCollections", "acceptanceCheck", "pendingCheck", "listOwnershipCheck", "updateListShared", "updateListMutedFromMembership", "updateMembershipListReady", "updateMembershipSenderReady", "updateMembershipUserReady" ],
destroy: [ "onMembershipDestroyed" ],
"change:state": [ "acceptanceCheck", "pendingCheck" ],
"change:listReady change:senderReady change:userReady": "updateMembershipIsReady",
"change:muted": "updateListMutedFromMembership",
"change:isReady": "acceptanceCheck",
"change:sender_id": "updateMembershipSenderReady"
},
lists: {
add: [ "updateStateCollectionsFromList", "updateMembershipListReadyFromList", "updateOwnershipFromList", "updateSharedStateFromList", "updateListMutedFromList" ],
remove: [ "cleanupLocalMembershipsFromList" ],
"change:online_id": "migrateLostMemberships"
},
users: {
add: [ "updateMembershipUserReadyFromUser", "updateMembershipSenderReadyFromUser" ]
}
},
lists: new i("/lists/all"),
listPositions: new n("/listPositions/all"),
pendingLists: new i("/lists/pending"),
acceptedLists: new i("/lists/accepted"),
sortableLists: new i("/lists/sortable"),
users: new a("/users/all"),
onMembershipDestroyed: function(i) {
var n = this, o = i.attributes, r = o.list_id, s = o.user_id, l = new t("/lists/" + r + "/memberships");
l.remove(i);
var d = new t("/users/" + o.user_id + "/memberships");
d.remove(i);
var c = new t("/senders/" + o.sender_id + "/memberships");
c.remove(i);
var u = new a("/lists/" + o.list_id + "/assignables"), p = n.users.get(o.user_id);
p && u.remove(p), e.user.isIDEqual(s) && n.cleanupOwnMembershipRelatedData(i), n.saveListSharedState(r);
},
cleanupOwnMembershipRelatedData: function(e) {
var t = this, i = e.attributes, n = t.lists.get(i.list_id);
if (n) {
n.destroy(t.fromSyncOptions);
var a = t.listPositions.at(0);
a && a.removeIDs([ n.id ]);
}
},
cleanupLocalMembershipsFromList: function(e, i, n) {
var a = this;
n = a.getLocalSaveOptions(n);
var o = new t("/lists/" + e.id + "/memberships");
o.models.forEach(function(e) {
e.destroy(n);
});
},
addMembershipToSubCollections: function(e) {
var i = e.attributes, n = new t("/lists/" + i.list_id + "/memberships");
n.add(e);
var a = new t("/users/" + i.user_id + "/memberships");
a.add(e);
var o = new t("/senders/" + i.sender_id + "/memberships");
o.add(e);
},
acceptanceCheck: function(t, i, n) {
var o = this, r = t.attributes, s = new a("/lists/" + r.list_id + "/assignables"), l = o.users.get(r.user_id), d = l && l.attributes;
if (d && (d.title || d.email)) {
var c = t.isAccepted();
o.addOrRemoveFromCollection(c, s, l);
}
e.user.isIDEqual(r.user_id) && o.handleListAcceptence(t, n);
},
pendingCheck: function(t) {
var i, n = this, a = t.attributes, o = t.isPending();
e.user.isIDEqual(a.user_id) && (n.addOrRemoveFromCollection(o, n.collections.pendingInvites, t), 
i = n.lists.get(a.list_id), i && (n.addOrRemoveFromCollection(o, n.pendingLists, i), 
n.addOrRemoveFromCollection(!o, n.acceptedLists, i)));
},
updateStateCollectionsFromList: function(e, i, n) {
var a = this;
if (a.hasUpdateOptions(n)) {
var o = new t("/lists/" + e.id + "/memberships");
o.models.forEach(function(e) {
a.defer(function() {
a.acceptanceCheck(e, i, n), a.pendingCheck(e, i, n);
});
});
}
},
handleListAcceptence: function(e, t) {
var i = this, n = i.lists.get(e.attributes.list_id);
if (n) {
var a = e.isAccepted();
n.isInbox() || i.addOrRemoveFromCollection(a, i.sortableLists, n, t), i.addOrRemoveFromCollection(a, i.acceptedLists, n, t);
}
},
updateListShared: function(e, t, i) {
var n = this;
if (n.hasUpdateOptions(i)) {
i = n.getLocalSaveOptions(i);
var a = e.attributes.list_id;
n.saveListSharedState(a, i);
}
},
updateListMutedFromMembership: function(t, i, n) {
var a = this, o = t.attributes;
if (a.hasUpdateOptions(n) && e.user.isIDEqual(o.user_id)) {
n = a.getLocalSaveOptions(n);
var r = o.list_id, s = !!o.muted, l = a.lists.get(r);
l && l.attributes.muted !== s && l.save({
muted: s
}, n);
}
},
updateListMutedFromList: function(i, n, a) {
var o = this;
if (o.hasUpdateOptions(a)) {
var s = new t("/lists/" + i.id + "/memberships"), l = s.findWhere({
user_id: "" + e.user.id
});
l && o.updateListMutedFromMembership(l, r, a);
}
},
getListMembers: function(i) {
var n = new t("/lists/" + i + "/memberships");
return n.models.slice().filter(function(t) {
return !e.user.isIDEqual(t.attributes.user_id);
});
},
saveListSharedState: function(e, t) {
var i = this;
t = i.getLocalSaveOptions(t);
var n = i.getListMembers(e), a = i.lists.get(e);
if (a) {
var o = !!n.length;
a.attributes.isShared !== o && a.save({
isShared: o
}, t);
}
},
updateSharedStateFromList: function(e, t, i) {
var n = this;
n.hasUpdateOptions(i) && (i = n.getLocalSaveOptions(i), n.saveListSharedState(e.id, i));
},
updateMembershipListReady: function(e, t, i) {
var n = this;
if (n.hasUpdateOptions(i)) {
i = n.getLocalSaveOptions(i);
var a = e.attributes.list_id, o = a && n.lists.get(a), r = !!o;
e.attributes.listReady !== r && e.save({
listReady: r
}, i);
}
},
updateMembershipListReadyFromList: function(e, i, n) {
var a = this;
if (a.hasUpdateOptions(n)) {
var o = new t("/lists/" + e.id + "/memberships");
o.models.forEach(function(e) {
a.defer(function() {
a.updateMembershipListReady(e, i, n);
});
});
}
},
updateMembershipSenderReady: function(t, i, n) {
var a = this;
if (a.hasUpdateOptions(n)) {
n = a.getLocalSaveOptions(n);
var o = t.attributes.sender_id, r = o && a.users.get(o);
!r && e.user.isIDEqual(o) && (r = e.user);
var s = !!r;
t.attributes.senderReady !== s && t.save({
senderReady: s
}, n);
}
},
updateMembershipSenderReadyFromUser: function(e, i, n) {
var a = this;
if (a.hasUpdateOptions(n)) {
var o = new t("/senders/" + e.id + "/memberships");
o.models.forEach(function(e) {
a.defer(function() {
a.updateMembershipSenderReady(e, i, n);
});
});
}
},
updateMembershipUserReady: function(e, t, i) {
var n = this;
if (n.hasUpdateOptions(i)) {
i = n.getLocalSaveOptions(i);
var a = e.attributes.user_id, o = a && n.users.get(a), r = !!o;
e.attributes.userReady !== r && e.save({
userReady: r
}, i);
}
},
updateMembershipUserReadyFromUser: function(e, t, i) {
var n = this;
if (n.hasUpdateOptions(i)) {
var a = n.collections.all.where({
user_id: e.id
});
a.forEach(function(e) {
n.defer(function() {
n.updateMembershipUserReady(e, t, i);
});
});
}
},
updateMembershipIsReady: function(e, t, i) {
var n = this;
if (n.hasUpdateOptions(i)) {
i = n.getLocalSaveOptions(i);
var a = e.attributes, o = a.listReady && a.senderReady && a.userReady;
o = !!o, e.attributes.isReady !== o && e.save({
isReady: !!o
}, i);
}
},
listOwnershipCheck: function(t, i, n) {
var a = this;
if (a.hasUpdateOptions(n)) {
n = a.getLocalSaveOptions(n);
var o, r = t.attributes, s = e.user.isIDEqual(r.user_id), l = a.lists.get(r.list_id);
s && r.owner ? o = "owner" : s && !r.owner && (o = "member");
var d = {};
r.owner && (d.owner_id = r.user_id), o && (d.membershipID = t.id, d.role = o), Object.keys(d).length && l && l.save(d, n);
}
},
updateOwnershipFromList: function(e, i, n) {
var a = this;
if (a.hasUpdateOptions(n)) {
var o = new t("/lists/" + e.id + "/memberships");
o.forEach(function(e) {
a.defer(function() {
a.listOwnershipCheck(e, i, n);
});
});
}
},
migrateLostMemberships: function(e, t, i) {
var n = this, o = e.attributes;
if (i.fromSync === !0 && o.online_id) {
var r = new a("/lists/" + o.online_id + "/assignables"), s = new a("/lists/" + e.id + "/assignables");
r.models.forEach(function(e) {
r.remove(e, n.fromSyncOptions), s.add(e, n.fromSyncOptions);
});
}
}
});
}), define("collections/Managers/RemindersCollectionManager", [ "./BaseManager", "collections/ReminderCollection", "collections/TaskCollection" ], function(e, t, i) {
return e.extend({
CollectionClass: t,
collections: {
all: "/reminders/all"
},
observes: {
"collections.all": {
add: [ "persistModel", "reminderTaskIDCheck", "reminderListIDCheck" ]
},
tasks: {
add: "checkListIDFromTask"
}
},
tasks: new i("/tasks/all"),
reminderTaskIDCheck: function(e) {
var i = e.attributes.task_id, n = new t("/tasks/" + i + "/reminders");
n.add(e);
},
reminderListIDCheck: function(e) {
var i = this, n = e.attributes.task_id, a = i.tasks.get(n);
if (a) {
var o = a.attributes.list_id, r = new t("/lists/" + o + "/reminders");
r.add(e);
}
},
checkListIDFromTask: function(e) {
var t = this, i = t.collections.all.where({
task_id: e.id
});
i.forEach(function(e) {
t.reminderListIDCheck(e);
});
}
});
}), define("collections/Managers/ServicesCollectionManager", [ "application/runtime", "./BaseManager", "collections/ServiceCollection" ], function(e, t, i) {
return t.extend({
CollectionClass: i,
collections: {
all: "/services/all"
},
observes: {
"collections.all": {
add: [ "persistModel", "onServiceAdd" ]
}
},
onServiceAdd: function(t, i, n) {
if (this.hasUpdateOptions(n)) {
var a = t.attributes, o = a.provider_id, r = a.provider_type;
o && e.user.save(r + "_id", o);
}
}
});
}), define("helpers/pinnedSite", [ "wunderbits/global", "project!core/WBSingleton" ], function(e, t) {
return t.extend({
flashWindow: function() {
try {
e.external && e.external.msIsSiteMode && e.external.msIsSiteMode() && e.external.msSiteModeActivate();
} catch (t) {}
},
createJumpListCategory: function(t) {
try {
e.external && e.external.msIsSiteMode && e.external.msIsSiteMode() && e.external.msSiteModeCreateJumpList(t);
} catch (i) {}
},
addJumpListItem: function(t, i, n) {
try {
e.external && e.external.msIsSiteMode && e.external.msIsSiteMode() && e.external.msSiteModeAddJumpListItem(t, i, n, "self");
} catch (a) {}
}
});
}), define("helpers/URLResolver", [ "urls" ], function(e) {
function t(e) {
return /(https?:)?\/\//.test(e) ? e : i[e] ? n + i[e] : (n + "/" + e).replace(/\/+/, "/");
}
var i = e.urlMap || {}, n = e.baseUrl || "/";
return {
resolve: t
};
}), define("wunderbits/BaseView", [ "./lib/dependencies", "project!core/lib/createUID", "project!core/WBClass", "./mixins/DebounceMixin", "project!core/mixins/WBEventsMixin", "project!core/mixins/WBBindableMixin", "project!core/mixins/WBUtilsMixin" ], function(e, t, i, n, a, o, r) {
var s = i.prototype, l = e.Backbone, d = l.View.extend({
initialize: function(e) {
var i = this;
i.uid = t(), i.options = e || {}, s.augmentProperties.call(i), s.initMixins.call(i, e);
}
});
return [ a, o, r, n ].forEach(function(e) {
e.applyToClass(d);
}), d;
}), define("wunderbits/mixins/WBSubviewsMixin", [ "../lib/dependencies", "../BaseView", "project!core/WBMixin" ], function(e, t, i) {
function n(e) {
function t(e) {
for (var i in e) "uid" !== i && ("renderData" === i && t(e[i]), delete e[i]);
}
return e._detached && r.cleanData([ e.el ]), e.trigger && e.trigger("destroy"), 
e.unbind(), e.unbindAll && e.unbindAll(), e._superView && e._superView.trigger && e._superView.trigger("destroyed:subview", e), 
e.onDestroy && e.onDestroy(), t(e), e.destroyed = !0, e;
}
function a(e, t) {
return t._name && delete e._namedSubviews[t._name], e._subviews = o.without(e._subviews, t), 
e;
}
var o = e._, r = e.$;
return i.extend({
initialize: function() {
var e = this;
e.bindTo(e, "destroyed:subview", "unbindFromTarget");
},
addSubview: function(e, i) {
var n = this;
if (!(e && e instanceof t)) throw new Error("Cannot add invalid or undefined subview");
return !n._subviews && (n._subviews = []), e._superView = n, n.state && e.state && !o.isEmpty(e.state) ? e.parentState = n.state : n.state && (e.state = n.state), 
"undefined" != typeof i && (e._name = i, !n._namedSubviews && (n._namedSubviews = {}), 
n._namedSubviews[i] && n.destroySubview(i), n._namedSubviews[i] = e), n._subviews.push(e), 
e;
},
getSubview: function(e) {
var t = this;
return t._namedSubviews && t._namedSubviews[e];
},
destroySubview: function(e) {
var i = this, n = e instanceof t ? e : i._namedSubviews && i._namedSubviews[e];
n && n.destroy({
silent: !0
});
},
destroySubviews: function() {
var e = this;
if (e._subviews) for (var t, i = o.clone(e._subviews), n = 0, a = i.length; a > n; n++) t = i[n], 
t && !t.destroyed && t.destroy();
},
destroy: function() {
var e = this;
return e.destroyed ? e : (e._superView && a(e._superView, e), e.destroySubviews(), 
e._claimedElement ? (e.$el && e.$el.empty(), r.cleanData([ e.el ])) : e.$el && e.$el.remove(), 
n(e, !0), e = null);
},
detach: function() {
var e = this;
return e._detached = !0, e.$el.detach(), e;
},
cleanData: function() {
var e = this;
e.el && (r.cleanData(e.el.getElementsByTagName("*")), r.cleanData([ e.el ]));
},
delegateSubviewsEvents: function() {
var e = this;
o.invoke(e._subviews, "delegateSubviewEvents");
},
delegateSubviewEvents: function() {
var e = this;
e.delegateSubviewsEvents(), e.delegateEvents();
}
});
}), define("wunderbits/WBStyleApplier", [ "./lib/dependencies", "vendor/md5", "urls", "wunderbits/BaseEventEmitter", "project!core/lib/createUID" ], function(e, t, i, n, a) {
var o = e._, r = i.urlMap, s = i.baseUrl || "/", l = n.prototype, d = {};
return n.extend({
initialize: function(e, t) {
var i = this;
if (l.initialize.apply(i, arguments), !o.isString(e)) throw new Error("Cannot initialize WBStyleApplier without a namespace");
if (!o.isString(t)) throw new Error("Cannot initialize WBStyleApplier without styles");
i.name = e, i.rawStyle = t;
},
getElementId: function() {
var e = this;
return t(e.name);
},
remove: function() {
var e = this, t = e.getElementId();
if (d[t] && e.target && (d[t] = o.without(d[t], e.target.uid), !d[t].length)) {
var i = document.getElementById(t);
i.parentNode.removeChild(i);
}
e.target.off("destroy", e.remove, e);
},
apply: function(e) {
var t = this;
if (!e || !o.isFunction(e.on)) throw new Error("Cannot apply styles without valid target");
e.uid || (e.uid = a()), t.target = e;
var i = t.getElementId(), n = document.getElementById(i);
if (n) return void (~d[i].indexOf(e.uid) || (d[i].push(e.uid), e.on("destroy", t.remove, t)));
var l = document.getElementsByTagName("head")[0], c = document.createElement("style");
c.id = i, c.type = "text/css", c.setAttribute("data-requiremodule", t.name), c.setAttribute("data-requirecontext", "styles");
var u = t.rawStyle.replace(/url\(\"([^\"]+)/g, function(e) {
return e.replace(/url\(\"([^\"]+)/, function(e, t) {
return /^(https?:)?\/\//.test(t) ? 'url("' + t : /^data:/.test(t) ? 'url("' + t : (r && (t = r[t]), 
'url("' + s + t);
});
}), p = document.createTextNode(u);
c.styleSheet ? c.styleSheet.cssText = p.nodeValue : c.appendChild(p), l.appendChild(c), 
d[i] = [ e.uid ], e.on("destroy", t.remove, t);
}
});
}), define("wunderbits/mixins/WBStylesApplierMixin", [ "project!core/WBMixin", "../WBStyleApplier" ], function(e, t) {
return e.extend({
initialize: function() {
var e = this;
e.autoApplyStyles !== !1 && e.applyStyles();
},
applyStyles: function() {
var e = this;
if (Array.isArray(e.styles)) for (var i, n = 0, a = e.styles.length; a > n; n++) {
if (i = e.styles[n], i instanceof t || !i.name || !i.data || (i = new t(i.name, i.data)), 
"function" != typeof i && "function" != typeof i.apply) throw new Error("Cannot apply style, not valid WBStyleApplier (sub)class");
i.apply(e);
}
}
});
}), define("wunderbits/mixins/HidableViewMixin", [ "../lib/dependencies", "project!core/WBMixin", "project!core/WBDeferred" ], function(e, t, i) {
return t.extend({
show: function() {
var e = this;
return !e.destroyed && e.$el && e.$el.removeClass("hidden"), e;
},
hide: function() {
var e = this;
return !e.destroyed && e.$el && e.$el.addClass("hidden"), e;
},
fadeOut: function(e, t) {
var n = this, a = new i(), o = t ? n.$(t) : n.$el;
return o.fadeOut(e, function() {
a.resolve();
}), a.promise();
},
fadeIn: function(e, t) {
var n = this, a = new i(), o = t ? n.$(t) : n.$el;
return o ? o.fadeIn(e, function() {
a.resolve();
}) : a.resolve(), a.promise();
}
});
}), function(e) {
e("vendor/when", [ "require" ], function(e) {
function t(e, t, i, n) {
return a(e).then(t, i, n);
}
function i(e) {
return new n(e, W.PromiseStatus && W.PromiseStatus());
}
function n(e, t) {
function i() {
return c ? c.inspect() : S();
}
function n(e, t, i, n, a) {
function o(o) {
o._when(e, t, i, n, a);
}
u ? u.push(o) : L(function() {
o(c);
});
}
function a(e) {
if (u) {
var i = u;
u = H, c = d(s, e), L(function() {
t && g(c, t), l(i, c);
});
}
}
function o(e) {
a(new p(e));
}
function r(e) {
if (u) {
var t = u;
L(function() {
l(t, new m(e));
});
}
}
var s, c, u = [];
s = this, this._status = t, this.inspect = i, this._when = n;
try {
e(a, o, r);
} catch (f) {
o(f);
}
}
function a(e) {
return e instanceof n ? e : o(e);
}
function o(e) {
return i(function(t) {
t(e);
});
}
function r(e) {
return t(e, function(e) {
return new p(e);
});
}
function s() {
function e(e, i, r) {
t.resolve = t.resolver.resolve = function(t) {
return a ? o(t) : (a = !0, e(t), n);
}, t.reject = t.resolver.reject = function(e) {
return a ? o(new p(e)) : (a = !0, i(e), n);
}, t.notify = t.resolver.notify = function(e) {
return r(e), e;
};
}
var t, n, a;
return t = {
promise: H,
resolve: H,
reject: H,
notify: H,
resolver: {
resolve: H,
reject: H,
notify: H
}
}, t.promise = n = i(e), t;
}
function l(e, t) {
for (var i = 0; i < e.length; i++) e[i](t);
}
function d(e, t) {
if (t === e) return new p(new TypeError());
if (t instanceof n) return t;
try {
var i = t === Object(t) && t.then;
return "function" == typeof i ? c(i, t) : new u(t);
} catch (a) {
return new p(a);
}
}
function c(e, t) {
return i(function(i, n) {
L(function() {
try {
F(e, t, i, n);
} catch (a) {
n(a);
}
});
});
}
function u(e) {
this.value = e;
}
function p(e) {
this.value = e;
}
function m(e) {
this.value = e;
}
function g(e, t) {
function i() {
t.fulfilled();
}
function n(e) {
t.rejected(e);
}
e.then(i, n);
}
function f(e) {
return e && "function" == typeof e.then;
}
function b(e, n, a, o, r) {
return t(e, function(e) {
function s(i, a, o) {
function r(e) {
m(e);
}
function s(e) {
p(e);
}
var l, d, c, u, p, m, g, f;
if (g = e.length >>> 0, l = Math.max(0, Math.min(n, g)), c = [], d = g - l + 1, 
u = [], l) for (m = function(e) {
u.push(e), --d || (p = m = M, a(u));
}, p = function(e) {
c.push(e), --l || (p = m = M, i(c));
}, f = 0; g > f; ++f) f in e && t(e[f], s, r, o); else i(c);
}
return i(s).then(a, o, r);
});
}
function h(e, t, i, n) {
function a(e) {
return t ? t(e[0]) : e[0];
}
return b(e, 1, a, i, n);
}
function v(e, t, i, n) {
return x(e, M).then(t, i, n);
}
function _() {
return x(arguments, M);
}
function w(e) {
return x(e, C, T);
}
function k(e, t) {
return x(e, t);
}
function x(e, i, a) {
return t(e, function(e) {
function o(n, o, r) {
function s(e, s) {
t(e, i, a).then(function(e) {
l[s] = e, --c || n(l);
}, o, r);
}
var l, d, c, u;
if (c = d = e.length >>> 0, l = [], !c) return void n(l);
for (u = 0; d > u; u++) u in e ? s(e[u], u) : --c;
}
return new n(o);
});
}
function y(e, i) {
var n = F(P, arguments, 1);
return t(e, function(e) {
var a;
return a = e.length, n[0] = function(e, n, o) {
return t(e, function(e) {
return t(n, function(t) {
return i(e, t, o, a);
});
});
}, A.apply(e, n);
});
}
function C(e) {
return {
state: "fulfilled",
value: e
};
}
function T(e) {
return {
state: "rejected",
reason: e
};
}
function S() {
return {
state: "pending"
};
}
function L(e) {
1 === E.push(e) && B(D);
}
function D() {
l(E), E = [];
}
function M(e) {
return e;
}
function z(e) {
throw "function" == typeof W.reportUnhandled ? W.reportUnhandled() : L(function() {
throw e;
}), e;
}
t.promise = i, t.resolve = o, t.reject = r, t.defer = s, t.join = _, t.all = v, 
t.map = k, t.reduce = y, t.settle = w, t.any = h, t.some = b, t.isPromise = f, t.isPromiseLike = f, 
j = n.prototype, j.then = function(e, t, i) {
var a = this;
return new n(function(n, o, r) {
a._when(n, r, e, t, i);
}, this._status && this._status.observed());
}, j["catch"] = j.otherwise = function(e) {
return this.then(H, e);
}, j["finally"] = j.ensure = function(e) {
function t() {
return o(e());
}
return "function" == typeof e ? this.then(t, t)["yield"](this) : this;
}, j.done = function(e, t) {
this.then(e, t)["catch"](z);
}, j["yield"] = function(e) {
return this.then(function() {
return e;
});
}, j.tap = function(e) {
return this.then(e)["yield"](this);
}, j.spread = function(e) {
return this.then(function(t) {
return v(t, function(t) {
return e.apply(H, t);
});
});
}, j.always = function(e, t) {
return this.then(e, e, t);
}, I = Object.create || function(e) {
function t() {}
return t.prototype = e, new t();
}, u.prototype = I(j), u.prototype.inspect = function() {
return C(this.value);
}, u.prototype._when = function(e, t, i) {
try {
e("function" == typeof i ? i(this.value) : this.value);
} catch (n) {
e(new p(n));
}
}, p.prototype = I(j), p.prototype.inspect = function() {
return T(this.value);
}, p.prototype._when = function(e, t, i, n) {
try {
e("function" == typeof n ? n(this.value) : this);
} catch (a) {
e(new p(a));
}
}, m.prototype = I(j), m.prototype._when = function(e, t, i, n, a) {
try {
t("function" == typeof a ? a(this.value) : this.value);
} catch (o) {
t(o);
}
};
var j, I, A, P, F, B, E, O, $, R, W, N, V, U, H;
if (V = e, E = [], W = "undefined" != typeof console ? console : t, "object" == typeof process && process.nextTick) B = process.nextTick; else if (U = "function" == typeof MutationObserver && MutationObserver || "function" == typeof WebKitMutationObserver && WebKitMutationObserver) B = function(e, t, i) {
var n = e.createElement("div");
return new t(i).observe(n, {
attributes: !0
}), function() {
n.setAttribute("x", "x");
};
}(document, U, D); else try {
B = V("vertx").runOnLoop || V("vertx").runOnContext;
} catch (Y) {
N = setTimeout, B = function(e) {
N(e, 0);
};
}
return O = Function.prototype, $ = O.call, F = O.bind ? $.bind($) : function(e, t) {
return e.apply(t, P.call(arguments, 2));
}, R = [], P = R.slice, A = R.reduce || function(e) {
var t, i, n, a, o;
if (o = 0, t = Object(this), a = t.length >>> 0, i = arguments, i.length <= 1) for (;;) {
if (o in t) {
n = t[o++];
break;
}
if (++o >= a) throw new TypeError();
} else n = i[1];
for (;a > o; ++o) o in t && (n = e(n, t[o], o, t));
return n;
}, t;
});
}("function" == typeof define && define.amd ? define : function(e) {
module.exports = e(require);
}), define("helpers/domtools", [ "vendor/when", "application/runtime", "project!core/WBSingleton" ], function(e, t, i) {
function n(e, t) {
e.innerHTML = "", e.appendChild(document.createTextNode(t));
}
function a(e, t, i) {
function n() {
e.removeEventListener(t, n, !1), i.apply(null, arguments);
}
return e.addEventListener(t, n, !1), function() {
e.removeEventListener(t, n, !1);
};
}
function o(t, i, n, r) {
var s, l;
return t.parentElement ? n ? f().then(o.bind(null, t, i, !1, r)) : ("number" != typeof r && (r = 2e3), 
s = e.defer(), t.classList.contains(i) ? s.resolve() : (k.setTimeout(function() {
l && (l(), l = null), s.resolve(!1);
}, r), l = a(t, "transitionend", function(e) {
l = null, e.stopPropagation(), s.resolve(!0);
}), t.classList.add(i)), s.promise) : e.resolve();
}
function r(e, t) {
for (;e && e !== t && 1 === e.nodeType; ) e = e.parentNode;
return e === t;
}
function s(e, t, i) {
for (;e && e !== t && 1 === e.nodeType && !i(e); ) e = e.parentNode;
return e ? 1 !== e.nodeType ? null : e === t ? null : e : null;
}
function l(e, t) {
return s(t, e, function(t) {
return t.parentNode === e;
});
}
function d(e, t, i) {
return i = i.toUpperCase(), s(e, t, function(e) {
return e.tagName === i;
});
}
function c(e, t, i) {
return s(e, t, function(e) {
var t = i.some(function(t) {
return !e.classList.contains(t);
});
return !t;
});
}
function u() {
return !0;
}
function p(e, t) {
var i = e.parentElement.firstChild, n = 0;
for (t || (t = u); 1 !== i.nodeType; ) i = i.nextSibling;
for (;i !== e; ) {
t(i) && ++n;
do i = i.nextSibling; while (1 !== i.nodeType);
}
return n;
}
function m(t) {
var i = e.defer();
return k.setTimeout(i.resolve.bind(i), t), i.promise;
}
function g(e) {
"function" == typeof setImmediate ? k.setImmediate(e) : k.setTimeout(e, 1);
}
function f() {
var t = e.defer();
return g(t.resolve.bind(t)), t.promise;
}
function b(e) {
if (!e) return null;
do e = e.nextSibling; while (e && 1 !== e.nodeType);
return e;
}
function h(e) {
if (!e) return null;
do e = e.previousSibling; while (e && 1 !== e.nodeType);
return e;
}
function v(e, t) {
var i = t || document;
return i.querySelector('[rel="' + e + '"]');
}
function _(e, t) {
var i = e.matches || e.msMatchesSelector || e.webkitMatchesSelector || e.mozMatchesSelector;
return i.call(e, t);
}
function w(e, t, i) {
e.setAttribute(t, i);
}
var k = t.global;
return i.extend({
setAttribute: w,
setText: n,
once: a,
closest: d,
closestClassList: c,
getDirectChildOf: l,
isChildOf: r,
elementIndex: p,
transition: o,
delay: m,
setImmediate: g,
nextElement: b,
previousElement: h,
byRel: v,
elementMatchesSelector: _
});
}), define("wunderbits/mixins/LocalizedViewMixin", [ "helpers/domtools", "../lib/dependencies", "../helpers/xss", "../WBLanguageManager", "project!core/WBMixin", "project!core/lib/toArray" ], function(e, t, i, n, a, o) {
return a.extend({
initialize: function() {
var e = this;
e.bindTo(n, "done", e.renderLocalized);
},
renderLocalized: function() {
var e = this;
e.renderLabels(), e.renderPlaceHolders(), e.renderTitles(), e.renderOptions(), e.renderAriaAttributes(), 
e.trigger("localized");
},
convertSymbols: function(e) {
var t = 0;
return e.replace(/\$([^0-9]|$)/g, function(e, i) {
return "$" + ++t + (i || "");
});
},
replaceSymbols: function(e, t) {
var n = 0;
return e.replace(/\$([0-9])/g, function() {
var e = i.clean(t[n]), a = '<token class="token_' + n + '" title="' + e + '">' + e + "</token>";
return n++, a;
});
},
renderLabels: function(e) {
var t, i, a, o, r = this, s = n.getKeys(), l = e || r.el, d = l && l.querySelectorAll("text[rel]");
if (d.length) for (var c = 0, u = d.length; u > c; c++) t = d[c], i = t.getAttribute("rel"), 
a = s[i], a && (o = t.getAttribute("data"), o && o.length && (o = o.split("☃"), 
a = r.convertSymbols(a), o = n.localizationception(o), a = r.replaceSymbols(a, o)), 
t.innerHTML = a);
s = null;
},
renderAttributes: function(t, a, r, s) {
var l = this, d = l.el && l.el.querySelectorAll(a) || [];
d = o(d);
var c, u, p, m, g;
if (l.el && d.push(l.el), d.length) for (var f = 0, b = d.length; b > f; f++) c = d[f], 
u = c.getAttribute("data-key-" + t), u && (m = [ u ], p = c.getAttribute("data-" + t), 
p && (p = p.split("☃"), m.push(p)), g = n.getText.apply(n, m) || u, s && (g = i.reverseClean(g)), 
r ? e.setText(c, g) : c.setAttribute(t, g));
},
renderTitles: function() {
var e = this;
e.renderAttributes("title", "[data-key-title]");
},
renderPlaceHolders: function() {
var e = this;
e.renderAttributes("placeholder", "input[data-key-placeholder], textarea[data-key-placeholder], input[data-key-value]", !1, !0), 
e.renderAttributes("value", "input[data-key-value], textarea[data-key-value]");
},
renderOptions: function() {
var e = this, t = !0;
e.renderAttributes("text", "option[data-key-text]", t, !0);
},
renderAriaAttributes: function() {
var e = this;
e.renderAttributes("aria-label", "[data-key-aria-label]");
}
});
}), define("wunderbits/mixins/ABTestableMixin", [ "project!core/WBMixin" ], function(e) {
return e.extend({
makeABTestable: function(e, t) {
var i, n, a = this;
if (e = e || .5, "number" != typeof e || 0 >= e || e >= 1) throw new Error("weight for A/B testing should be a number between 0 & 1 , excluding those values");
t && (n = parseInt(t, 16), isNaN(n) || (i = Math.floor(n % (1 / e)))), i || (i = Math.floor(Math.random() / e)), 
a.ABMode = "AB".substr(1 > i ? 0 : 1, 1);
var o = a["initialize" + a.ABMode];
return "function" == typeof o ? o.apply(a) : void 0;
},
renderAB: function() {
var e = this, t = e["render" + e.ABMode];
return "function" == typeof t ? t.apply(e) : e;
},
forceInitOfType: function(e) {
var t = this;
t.ABMode = e;
var i = t["initialize" + e];
return "function" == typeof i ? i.apply(t) : void 0;
},
forceRenderOfType: function(e) {
var t = this;
t.ABMode = e;
var i = t["render" + e];
return "function" == typeof i ? i.apply(t) : t;
}
});
}), define("wunderbits/WBView", [ "./global", "./BaseView", "project!core/lib/fromSuper", "project!core/lib/merge", "./mixins/WBSubviewsMixin", "./mixins/WBStylesApplierMixin", "./mixins/HidableViewMixin", "./mixins/LocalizedViewMixin", "./mixins/ABTestableMixin" ], function(e, t, i, n, a, o, r, s, l) {
var d = e.requestAnimationFrame, c = t.prototype, u = t.extend({
renderData: {},
state: {},
styles: [],
initialize: function() {
var e = this;
c.initialize.apply(e, arguments), e.renderData = i.merge(e, "renderData"), e.state = i.merge(e, "state");
},
formatData: function(e) {
var t = this;
return n({}, t.renderData, e);
},
render: function(e) {
var t = this;
t.$el.empty();
var i = t.template;
if ("function" == typeof i) {
var n = t.data = t.formatData(e);
t.$el.html(i(n)), t.renderLocalized();
}
return t.ABMode && t.renderAB(), t.postRender(), t.delegateEvents(), t.isRendered = !0, 
t.trigger("rendered"), t;
},
postRender: function() {},
requestAnimationFrame: function(e) {
var t = this;
d(function() {
!t.destroyed && e();
});
}
}, {
extend: function(e, i) {
e || (e = {});
var n = [];
return n.push.apply(n, this.prototype.styles), n.push.apply(n, e.styles), e.styles = n, 
t.extend.call(this, e, i);
}
});
return [ a, o, s, l, r ].forEach(function(e) {
e.applyToClass(u);
}), u;
}), define("helpers/notifications", [ "application/runtime", "wunderbits/WBView", "helpers/URLResolver", "wunderbits/BaseSingleton" ], function(e, t, i, n) {
var a, o, r = e._, s = e.global, l = 1e3, d = 3e4, c = !1, u = !1, p = [], m = [], g = {}, f = i.resolve("images/icon.png"), b = {};
return n.extend({
start: function() {
var e = this;
a = e.delay("_showNextNotification", l);
},
stop: function() {
clearInterval(a);
},
_checkSupport: function() {
var e = this, t = s.chrome, i = !1;
try {
t && (i = !0);
} catch (n) {}
return !c && i && t.notifications ? (c = !0, o = t.notifications, e._setupChromeAppListeners()) : !c && s.Notification && (c = !0, 
o = s.Notification), c;
},
_setupChromeAppListeners: function() {
o.onClosed.addListener(function(e) {
var t = b[e] || {};
t.onClosed && t.onClosed(), b[e] = null;
}), o.onClicked.addListener(function(e) {
var t = b[e] || {};
t.onClick && t.onClick();
}), o.onButtonClicked.addListener(function(e, t) {
var i = b[e] || {}, n = i.buttons, a = n && n[t];
a && a.onClick && a.onClick();
});
},
_getPermission: function(e) {
var t = this;
t._permissionGranted() || o.requestPermission(function() {
t._permissionGranted() && "function" == typeof e && e();
});
},
_permissionGranted: function() {
return o.create ? u = !0 : o.checkPermission ? u = 0 === o.checkPermission() : o.permission && (u = "granted" === o.permission), 
u;
},
_createNotification: function(e) {
var t, i = this;
return g[e.notificationId] ? void 0 : (g[e.notificationId] = !0, s.Notification && !o.create ? t = i._createW3CNotification(e) : o.create && (t = i._createChromeAppNotification(e), 
b[e.notificationId] = {
onClick: e.onClick,
onClose: e.onClose,
buttons: e.buttonHandlers
}), i._attachNotificationEventHandlers(t, e), t);
},
_createW3CNotification: function(e) {
var t = new o(e.title, {
title: e.title,
body: e.text,
icon: e.icon
});
return t;
},
_createChromeAppNotification: function(e) {
var t = o.create(e.notificationId, {
type: e.templateType || "basic",
iconUrl: e.icon,
title: e.title,
message: e.text,
eventTime: e.eventTime,
buttons: e.buttons,
imageUrl: e.imageUrl,
items: e.items
}, function() {
console.log(arguments);
});
return t;
},
_attachNotificationEventHandlers: function(e, t) {
e && (e.ondisplay = e.onshow = t.onOpen || function() {
t.timeout && r.delay(function() {
e.cancel();
}, d);
}, e.onclick = t.onClick || function() {
e.cancel();
}, e.onclose = t.onClose || null);
},
_queueNotification: function(e) {
p.push(e);
},
_displayQueuedNotifications: function() {
var e, t, i = this, n = 2e3, a = 50, o = {
type: "text",
icon: f,
title: ""
};
c && u && p.length ? (p.length >= a ? o.text = i._groupNotifications(n) : (t = p.shift(), 
o = r.extend({}, o, t), o.timeout = t.timeout === !1 ? !1 : !0, o.icon = t.userAvatar || f), 
e = i._createNotification(o), e && r.isFunction(e.show) && e.show()) : console.error("not allowed", c, u);
},
_groupNotifications: function(e) {
for (var t, i = ""; p.length && i.length <= e; ) t = p.shift(), i += t.text + ", ";
return i;
},
_showNextNotification: function() {
var e = this;
p.length > 0 && e._displayQueuedNotifications(), a = e.delay("_showNextNotification", l);
},
create: function(e) {
var t, i = this;
return c || i._checkSupport() ? void (u || i._permissionGranted() ? (t = e, t && i._queueNotification(t)) : (m.push(e), 
i.requestPermission())) : !1;
},
requestPermission: function() {
var t = this, i = [ "preferences", "whatsnew", "social" ], n = !1, a = e.currentRoute();
if (r.each(i, function(e) {
a.indexOf(e) >= 0 && (n = !0);
}), !n && (c || t._checkSupport())) {
if ("false" === e.settings.attributes.notifications_desktop_enabled || t._permissionGranted()) return;
e.trigger("modal:confirm", {
customTitle: e.language.getLabel("notifications_desktop_enable_heading").toString(),
customText: e.language.getLabel("enable_desktop_notifications_text").toString(),
confirm: function() {
t._getPermission(function() {
t._emptyCreateQueue(), t._displayQueuedNotifications();
});
},
cancel: function() {
e.settings.save({
notifications_desktop_enabled: "false"
});
},
keepTrying: !0
});
}
},
_emptyCreateQueue: function() {
var e = this;
m.length > 0 && (r.each(m, function(t) {
e.create(t);
}), m = []);
}
});
}), define("models/NotificationModel", [ "models/BaseModel" ], function(e) {
return e.extend({
storeName: "desktopNotifications",
defaults: {
type: "desktop_notification"
},
neverSyncOut: !0,
isAbleToSync: function() {
return !1;
}
});
}), define("collections/NotificationCollection", [ "models/NotificationModel", "./BaseCollection" ], function(e, t) {
return t.extend({
model: e
});
}), define("actions/services/ListLookup", [ "project!core/WBClass", "collections/FolderCollection", "collections/ListCollection", "collections/TaskCollection" ], function(e, t, i, n) {
function a(e, t) {
var i, n = e.length;
for (i = 0; n > i; ++i) if (t(e[i])) return i;
return -1;
}
var o = e.extend({
getTaskCollection: function(e) {
var t = new n("/lists/" + e + "/tasks");
return t;
},
getListModel: function(e) {
var t = new i("/lists/all");
return t.get(e);
},
getFolderModel: function(e) {
var i = new t("/folders/all");
return i.findFolderForListId(e);
},
getLastListPosition: function() {
var e = new i("/lists/sortable");
e.sort();
var t = e.at(e.length - 1);
return t ? t.attributes.position : void 0;
},
getListBefore: function(e) {
var t = new i("/lists/sortable").models, n = this._getListIndex(t, e);
return n > 0 ? t[n - 1] : void 0;
},
getListAfter: function(e) {
var t = new i("/lists/sortable").models, n = this._getListIndex(t, e);
return n >= 0 && n < t.length - 1 ? t[n + 1] : void 0;
},
_getListIndex: function(e, t) {
var i = a(e, function(e) {
return e.id === t;
});
return i;
}
});
return o;
}), define("models/FeatureModel", [ "./BaseModel" ], function(e) {
return e.extend({
storeName: "features",
defaults: {
type: "feature"
},
neverSyncOut: !0,
isAbleToSync: function() {
return !1;
}
});
}), define("collections/FeatureCollection", [ "models/FeatureModel", "./BaseCollection" ], function(e, t) {
return t.extend({
model: e
});
}), define("actions/services/FeatureLookup", [ "project!core/WBClass", "collections/FeatureCollection" ], function(e, t) {
var i = e.extend({
initialize: function() {
this.allFeatures = new t("/features/all");
},
getFeatureModelByName: function(e) {
return this.allFeatures.findWhere({
name: e
});
},
getFeaturesCollection: function() {
return this.allFeatures;
},
isFeatureEnabled: function(e) {
var t = this, i = t.getFeatureModelByName(e);
return !(!i || "on" !== i.attributes.variant);
}
});
return i;
}), define("actions/services/FileLookup", [ "project!core/WBClass", "collections/FileCollection" ], function(e, t) {
var i = e.extend({
initialize: function() {
this.allFiles = new t("/files/all");
},
getFileModel: function(e) {
return this.allFiles.get(e);
},
getFileCollection: function(e) {
return new t("/tasks/" + e + "/files");
},
getFileModels: function(e) {
var t = this;
return e.map(function(e) {
return t.getFileModel(e);
});
}
});
return i;
}), define("actions/services/FolderLookup", [ "project!core/WBClass", "collections/FolderCollection" ], function(e, t) {
var i = e.extend({
initialize: function() {
var e = this;
e.allFolders = new t("/folders/all");
},
getFolderModel: function(e) {
return this.allFolders.get(e);
}
});
return i;
}), define("actions/services/MembershipLookup", [ "project!core/WBClass", "collections/MembershipCollection" ], function(e, t) {
var i = e.extend({
initialize: function() {
var e = this;
e.allMemberships = new t("/memberships/all");
},
getMembershipModel: function(e) {
var t = this;
return t.allMemberships.get(e);
},
getMembershipCollection: function(e) {
return new t("/lists/" + e + "/memberships");
}
});
return i;
}), define("actions/services/TaskLookup", [ "application/runtime", "project!core/WBClass", "collections/TaskCollection" ], function(e, t, i) {
function n(e, t) {
var i, n = e.length;
for (i = 0; n > i; ++i) if (t(e[i])) return i;
return -1;
}
var a = e._, o = t.extend({
initialize: function() {
this.allTasks = new i("/tasks/all");
},
getTaskModel: function(e) {
return this.allTasks.get(e);
},
getTaskCollection: function(e) {
return new i("/lists/" + e + "/tasks");
},
getTaskModels: function(e) {
var t = this;
return a.compact(e.map(function(e) {
return t.getTaskModel(e);
}));
},
getLastTaskPosition: function(e) {
var t = new i("/lists/" + e + "/tasks");
t.sort();
var n = t.at(t.length - 1);
return n ? n.attributes.position : void 0;
},
getTaskAfter: function(e) {
var t = this, n = t.getTaskModel(e);
if (n) {
var a = new i("/lists/" + n.attributes.list_id + "/tasks").models, o = t._getTaskIndex(a, e);
if (o >= 0 && o < a.length - 1) return a[o + 1];
}
},
_getTaskIndex: function(e, t) {
var i = n(e, function(e) {
return e.id === t;
});
return i;
}
});
return o;
}), define("models/TaskCommentModel", [ "application/runtime", "wunderbits/helpers/strings", "models/TaskResourceBaseModel" ], function(e, t, i, n) {
var a = i.prototype;
return i.extend({
storeName: "taskComments",
defaults: {
type: "task_comment",
author: n,
text: n,
local_created_at: n,
read: n,
revision: n
},
observes: {
self: {
"change:local_created_at": "forceDateFormat"
}
},
initialize: function() {
var e = this;
a.initialize.apply(e, arguments), e.forceDateFormat();
},
isRead: function() {
return !!this.attributes.read;
},
canDelete: function() {
return !!this.attributes.canDelete;
},
forceDateFormat: function() {
var e = this, i = e.attributes, n = i.local_created_at;
n = n && n.replace(/\.([\d]*)Z/, function(e, i) {
return i = i.substr(0, 3), i = t.pad(i, 3, !0), "." + i + "Z";
}), e.save("local_created_at", n);
}
});
}), define("collections/TaskCommentsCollection", [ "application/runtime", "models/TaskCommentModel", "./BaseCollections/SortedByCreatedAtCollection", "vendor/moment" ], function(e, t, i, n) {
var a = e._;
return i.extend({
model: t,
newestOnTop: !1,
getUserCreatedModels: function() {
var t = this, i = n(), o = a.where(t.models, function(t) {
return e.user.isIDEqual(t.attributes.author.id) && 0 === n(t.attributes.created_at).diff(i, "days");
});
return o;
}
});
}), define("actions/services/CommentLookup", [ "project!core/WBClass", "collections/TaskCommentsCollection" ], function(e, t) {
var i = e.extend({
initialize: function() {
var e = this;
e.allComments = new t("/taskComments/all");
},
getCommentModel: function(e) {
var t = this;
return t.allComments.get(e);
},
getCommentsCollection: function(e) {
return new t("/tasks/" + e + "/comments");
}
});
return i;
}), define("actions/services/SubTaskLookup", [ "project!core/WBClass", "collections/SubtaskCollection" ], function(e, t) {
var i = e.extend({
initialize: function() {
var e = this;
e.allSubTasks = new t("/subtasks/all");
},
getSubTaskModel: function(e) {
var t = this;
return t.allSubTasks.get(e);
},
getSubTaskCollection: function(e) {
return new t("/tasks/" + e + "/subtasks");
},
getSubTaskModels: function(e) {
var t = this;
return e.map(function(e) {
return t.getSubTaskModel(e);
});
}
});
return i;
}), define("actions/services/ReminderLookup", [ "project!core/WBClass", "collections/ReminderCollection" ], function(e, t) {
var i = e.extend({
initialize: function() {
this.allReminders = new t("/reminders/all");
},
getReminderModel: function(e) {
return this.allReminders.get(e);
},
getReminderCollectionForTask: function(e) {
return new t("/tasks/" + e + "/reminders");
},
getReminderModelForTask: function(e) {
return this.getReminderCollectionForTask(e).models[0];
}
});
return i;
}), define("models/NoteModel", [ "models/TaskResourceBaseModel" ], function(e, t) {
return e.extend({
storeName: "notes",
defaults: {
type: "note",
task_id: t,
content: t
}
});
}), define("collections/NoteCollection", [ "models/NoteModel", "./BaseCollection" ], function(e, t) {
return t.extend({
model: e
});
}), define("actions/services/NoteLookup", [ "project!core/WBClass", "collections/NoteCollection" ], function(e, t) {
var i = e.extend({
initialize: function() {
this.allNotes = new t("/notes/all");
},
getNoteModel: function(e) {
return this.allNotes.get(e);
},
getNoteCollectionForTask: function(e) {
return new t("/tasks/" + e + "/notes");
},
getNoteModelForTask: function(e) {
return this.getNoteCollectionForTask(e).models[0];
}
});
return i;
}), define("actions/services/UserLookup", [ "project!core/WBClass", "collections/UserCollection" ], function(e, t) {
var i = e.extend({
initialize: function() {
this.allUsers = new t("/users/all");
},
getUserModel: function(e) {
return this.allUsers.get(e);
},
getAssignableCollectionForList: function(e) {
return new t("/lists/" + e + "/assignables");
}
});
return i;
}), define("actions/services/Date", [ "project!core/WBClass", "wunderbits/helpers/date" ], function(e, t) {
var i = e.extend({
getServerNow: function() {
return t.getServerNow();
},
today: function() {
return new Date();
},
tomorrow: function() {
var e = new Date();
return e.setDate(e.getDate() + 1), e;
}
});
return i;
}), define("actions/services/DesktopNotificationLookup", [ "project!core/WBClass", "collections/NotificationCollection" ], function(e, t) {
var i = e.extend({
initialize: function() {
var e = this;
e.allNotifications = new t("/notifications/all");
},
getNotificationModel: function(e) {
var t = this;
return t.allNotifications.get(e);
},
getReminderNotificationForTask: function(e) {
var t = this;
return t.allNotifications.findWhere({
url: "wunderlist://tasks/" + e,
event: "ReminderDue"
});
}
});
return i;
}), define("actions/Duplication", [ "project!core/lib/toArray", "project!core/lib/when", "project!core/WBDeferred", "project!core/WBClass" ], function(e, t, i, n) {
var a = n.extend({
initialize: function(e, t, i, n, a, o, r, s, l, d, c, u) {
var p = this;
p.createList = e, p.createTask = t, p.createSubtask = i, p.createReminder = n, p.createNote = a, 
p.repositionTask = o, p.listLookup = r, p.taskLookup = s, p.reminderLookup = l, 
p.subtaskLookup = d, p.noteLookup = c, p.sidebarActions = u, p._copiedTaskIds = [];
},
duplicateNote: function(e, t) {
var n = this, a = new i(), o = n.noteLookup.getNoteModelForTask(e);
return o ? n.createNote.createNote(o.attributes.content, t).done(a.resolve, a).fail(a.reject, a) : a.reject(), 
a.promise();
},
duplicateReminder: function(e, t) {
var n = this, a = new i(), o = n.reminderLookup.getReminderModelForTask(e);
return o ? n.createReminder.createReminder(o.attributes.date, t).done(a.resolve, a).fail(a.reject, a) : a.reject(), 
a.promise();
},
duplicateSubtasks: function(e, n) {
var a = this, o = new i(), r = a.subtaskLookup.getSubTaskCollection(e);
if (r) {
var s = r.models.map(function(e, t) {
var i = e.attributes;
return a.createSubtask.createSubtask(i.title, 10 * t, n);
});
t(s).done(o.resolve, o).fail(o.reject, o);
} else o.reject();
return o.promise();
},
duplicateTaskResources: function(e, i) {
var n = this;
return t([ n.duplicateSubtasks(e, i), n.duplicateReminder(e, i), n.duplicateNote(e, i) ]).promise();
},
duplicateTasks: function(e, t) {
var i = this, n = i.taskLookup.getTaskCollection(e);
n && n.models.forEach(function(e) {
var n = e.attributes;
i.createTask.createTask(n.title, t, n.starred, n.due_date, void 0, void 0, void 0, n.position, void 0, n.completed).done(function(t) {
i.duplicateTaskResources(e.id, t.id);
});
});
},
duplicateList: function(e) {
var t = this, n = new i(), a = t.listLookup.getListModel(e);
if (a) {
var o = a.attributes.title + " copy";
t.createList.createList(o).done(function(e) {
t.duplicateTasks(a.id, e.id), t._positionNewList(e, a), n.resolve(e);
});
} else n.reject();
return n.promise();
},
copyTasks: function(e) {
Array.isArray(e) && (this._copiedTaskIds = e);
},
pasteTasks: function(e) {
var t = this, n = new i(), a = t.taskLookup.getTaskModel(e), o = a && t.listLookup.getListModel(a.attributes.list_id);
return t._copiedTaskIds && t._copiedTaskIds.length && a && o ? t._createPastedTasks(o, e).always(n.resolve, n) : n.resolve(), 
n.promise();
},
_positionNewList: function(e, t) {
var i = this, n = i.listLookup.getListBefore(t.id), a = i.sidebarActions.getFolderforList(t.id);
a ? i.sidebarActions.getFolderActions(a.id).moveList(e.id, n.id, t.id) : i.sidebarActions.repositionList.moveListsTo([ e ], n, t);
},
_createPastedTasks: function(n, a) {
var o = this, r = new i(), s = o._copiedTaskIds.map(function(e) {
var t = new i(), a = o.taskLookup.getTaskModel(e), r = o.taskLookup.getLastTaskPosition(n.id), s = a && a.attributes;
return a ? o.createTask.createTask(s.title, n.id, s.starred, s.due_date, void 0, void 0, void 0, r, void 0, void 0).done(function(i) {
o.duplicateTaskResources(e, i.id).always(t.resolve.bind(t, i));
}).fail(t.resolve, t) : t.resolve(), t.promise();
});
return t(s).done(function() {
var t = o._flattenPastedTasks(e(arguments));
o._movePastedTasks(t, a, n.id), r.resolve(t);
}), r.promise();
},
_flattenPastedTasks: function(e) {
var t = e.map(function(e) {
return e[0];
});
return t.filter(function(e) {
return !!e;
});
},
_extractIds: function(e) {
return e.map(function(e) {
return e.id;
});
},
_movePastedTasks: function(e, t, i) {
var n = this, a = n._extractIds(e), o = n.taskLookup.getTaskAfter(t), r = o && o.id;
n.repositionTask.moveTasksBetweenIds(i, a, t, r);
}
});
return a;
}), define("actions/Print", [ "project!core/WBClass" ], function(e) {
return e.extend({
initialize: function(e) {
var t = this;
t.runtime = e;
},
_print: function(e) {
var t = this, i = t.runtime;
i.trigger("set:printType", e), (i.env.isChrome() || i.env.isNodeWebkit()) && i.trigger("print:start"), 
setTimeout(function() {
window.print(), setTimeout(function() {
i.trigger("set:printType", null);
}, 1e3);
}, 300), i.trigger("analytics:TaskActionBar:PrintList", e);
},
printList: function() {
this._print("list");
},
printSelected: function() {
this._print("selectedTasks");
}
});
}), define("actions/DeleteTask", [ "project!core/WBClass" ], function(e) {
return e.extend({
initialize: function(e) {
var t = this;
t.taskLookup = e;
},
deleteTasks: function(e, t) {
var i = this;
e.forEach(function(e) {
var n = i.taskLookup.getTaskModel(e);
n && n.destroy(t);
});
}
});
}), define("actions/MoveTask", [ "project!core/WBClass" ], function(e) {
return e.extend({
initialize: function(e) {
var t = this;
t.taskLookup = e;
},
moveTasks: function(e, t, i) {
var n = this;
e.forEach(function(e) {
var a = n.taskLookup.getTaskModel(e);
a && a.save({
list_id: t
}, i);
});
}
});
}), define("actions/StarTask", [ "project!core/WBClass" ], function(e) {
var t = e.extend({
initialize: function(e, t) {
var i = this;
i.listLookup = e, i.taskLookup = t;
},
_unstarTask: function(e, t) {
var i = {
starred: !1
};
e.save(i, t);
},
_starTask: function(e, t) {
var i = this, n = {
starred: !0
};
if (t.moveToTop) {
var a = i.listLookup.getTaskCollection(e.attributes.list_id);
n.position = a.getNewTopPosition();
}
e.save(n, t);
},
unstarTasks: function(e, t) {
var i = this;
e.reverse(), e.forEach(function(e) {
var n = i.taskLookup.getTaskModel(e);
n && i._unstarTask(n, t);
});
},
starTasks: function(e, t) {
var i = this;
e.reverse(), e.forEach(function(e) {
var n = i.taskLookup.getTaskModel(e);
n && i._starTask(n, t);
});
},
toggleStarred: function(e, t) {
var i = this;
e.reverse(), e.forEach(function(e) {
var n = i.taskLookup.getTaskModel(e);
n && n.isStarred() ? i._unstarTask(n, t) : n && i._starTask(n, t);
});
}
});
return t;
}), define("actions/CompleteTask", [ "project!core/WBClass" ], function(e) {
var t = e.extend({
initialize: function(e, t, i) {
var n = this;
n.listLookup = e, n.taskLookup = t, n.dateService = i;
},
_uncompleteTask: function(e, t) {
var i = this, n = i.taskLookup.getTaskCollection(e.attributes.list_id), a = n.getNewBottomPosition() + 10;
e.save({
completed: !1,
completed_at: null,
position: a
}, t);
},
_completeTask: function(e, t) {
var i = this, n = i.taskLookup.getTaskCollection(e.attributes.list_id), a = n.getNewTopPosition() - 10;
e.save({
completed: !0,
completed_at: i.dateService.getServerNow(),
position: a
}, t);
},
uncompleteTasks: function(e, t) {
var i = this;
e.forEach(function(e) {
var n = i.taskLookup.getTaskModel(e);
n && i._uncompleteTask(n, t);
});
},
completeTasks: function(e, t) {
var i = this;
e.forEach(function(e) {
var n = i.taskLookup.getTaskModel(e);
n && i._completeTask(n, t);
});
},
toggleCompleted: function(e, t) {
var i = this;
return e.map(function(e) {
var n = i.taskLookup.getTaskModel(e);
return n && n.isCompleted() ? (i._uncompleteTask(n, t), !1) : n ? (i._completeTask(n, t), 
!0) : void 0;
});
}
});
return t;
}), define("actions/CompleteSubTask", [ "project!core/WBClass" ], function(e) {
var t = e.extend({
initialize: function(e, t, i) {
var n = this;
n.listLookup = e, n.subTaskLookup = t, n.dateService = i;
},
_uncompleteTask: function(e, t) {
e.save({
completed: !1,
completed_at: null
}, t);
},
completeSubTask: function(e, t) {
this._completeTask(e, t);
},
unCompleteSubTask: function(e, t) {
this._uncompleteTask(e, t);
},
_completeTask: function(e, t) {
var i = this;
e.save({
completed: !0,
completed_at: i.dateService.getServerNow()
}, t);
},
uncompleteSubTasks: function(e, t) {
var i = this;
i.subTaskLookup.forEach(function(e) {
var n = i.subTaskLookup.getsubTaskModel(e);
n && i._uncompleteSubTask(n, t);
});
},
completeSubTasks: function(e, t) {
var i = this;
e.forEach(function(e) {
var n = i.subTaskLookup.getSubTaskModel(e);
n && i._completeTask(n, t);
});
}
});
return t;
}), define("actions/DeleteSubTask", [ "project!core/WBClass" ], function(e) {
return e.extend({
initialize: function(e) {
var t = this;
t.subTaskLookup = e;
},
deleteSubTask: function(e, t) {
var i = this, n = i.subTaskLookup.getSubTaskModel(e);
n && n.destroy(t);
}
});
}), define("actions/ReparentTask", [ "project!core/WBClass" ], function(e) {
var t = e.extend({
initialize: function(e, t) {
var i = this;
i.listLookup = e, i.taskLookup = t;
},
moveTasksToList: function(e, t) {
var i = this, n = i.taskLookup.getTaskModels(t), a = i.listLookup.getListModel(e), o = i.listLookup.getTaskCollection(e);
n.forEach(function(e) {
e.attributes.list_id !== a.id && o.addTaskToList(e, a);
});
}
});
return t;
}), define("actions/AutomaticReminder", [ "application/runtime", "project!core/WBClass", "wunderbits/helpers/date", "vendor/moment" ], function(e, t, i, n) {
var a = "YYYY-MM-DD", o = "YYYY-MM-DDTHH:mm:ssZ", r = "YYYY-MM-DDTHH:mm:ss", s = t.extend({
initialize: function(e, t, i, n) {
var a = this;
a._reminderLookup = e, a._taskLookup = t, a._dateService = i, a._featureLookup = n;
},
_momentToday: function() {
return n().sod();
},
_isDueToday: function(e) {
var t = this, i = t._momentToday(), a = n(e).sod(), o = i.diff(a, "days"), r = 0 === o;
return r;
},
_isTaskModelDueToday: function(e) {
var t = this, i = t._momentToday(), o = n(e.attributes.due_date, a).sod(), r = i.diff(o, "days"), s = 0 === r;
return s;
},
_isDueInThePast: function(e) {
var t = this, i = t._momentToday(), a = n(e).sod(), o = a.diff(i, "days"), r = 0 > o;
return r;
},
_isTaskModelDueInThePast: function(e) {
var t = this, i = t._momentToday(), o = n(e.attributes.due_date, a).sod(), r = o.diff(i, "days"), s = 0 > r;
return s;
},
_shouldUpdateTaskModelReminder: function(e, t) {
if (!t) return !0;
var i = e.previousAttributes(), r = i && i.due_date && n(i.due_date, a).sod(), s = r && n(t.attributes.date, o).sod(), l = r && 0 === r.diff(s, "days");
return !!l;
},
_oneHourLaterServerTime: function() {
var e = n().add("hours", 1).format(r);
return e = i.convertLocalTimeToServerTime(e);
},
_nineAmOnServerTime: function(e) {
var t = n(e).sod().add("hours", 9).format(r);
return t = i.convertLocalTimeToServerTime(t);
},
_nineAmOnModelDateServerTime: function(e) {
var t = n(e, a).sod().add("hours", 9).format(r);
return t = i.convertLocalTimeToServerTime(t);
},
_getReminderTimeForTimestamp: function(e) {
var t, i = this, n = i._isDueInThePast(e);
if (!n) {
var a = i._isDueToday(e);
return t = a ? i._oneHourLaterServerTime() : i._nineAmOnServerTime(e);
}
},
_getReminderTimeForTaskModel: function(e, t) {
var i, n = this, a = n._isTaskModelDueInThePast(e);
if (!a) {
var o = n._shouldUpdateTaskModelReminder(e, t);
if (o) {
var r = n._isTaskModelDueToday(e);
i = r ? n._oneHourLaterServerTime() : n._nineAmOnModelDateServerTime(e.attributes.due_date);
}
return i;
}
},
_createUpdate: function(t, i, n) {
var a = this;
e.trigger("trackingService", "client.reminder.autocreate"), n ? n.save({
date: t
}) : a._reminderLookup.allReminders.add({
task_id: i.id,
date: t
});
},
isFeatureEnabled: function() {
return this._featureLookup.isFeatureEnabled("experiment.automatic-reminders");
},
isSettingEnabled: function() {
var t = e.settings.get("automatic_reminders");
return "off" !== t;
},
enabled: function() {
var e = this, t = e.isFeatureEnabled(), i = e.isSettingEnabled();
return i && t;
},
getForTimestamp: function(e) {
var t, i = this;
return i.enabled() && (t = i._getReminderTimeForTimestamp(e)), t;
},
getForTask: function(e, t) {
var i, n = this;
if (n.enabled()) {
var a = n._taskLookup.getTaskModel(e), o = n._reminderLookup.getReminderModelForTask(e);
i = n._getReminderTimeForTaskModel(a, o), i && t && n._createUpdate(i, a, o);
}
return i;
},
destroyForTask: function(e) {
var t = this, i = t._taskLookup.getTaskModel(e), n = t._reminderLookup.getReminderModelForTask(e);
if (i && n) {
var a = t._shouldUpdateTaskModelReminder(i, n);
a && n.destroy();
}
}
});
return s;
}), define("actions/TaskDue", [ "project!core/WBClass", "wunderbits/helpers/date", "vendor/moment" ], function(e, t, i) {
var n = [ "never", "days", "weeks", "months", "years", "custom" ], a = e.extend({
initialize: function(e, t, i) {
var n = this;
n.dateService = t, n.taskLookup = e, n.automaticReminderService = i;
},
setTasksDueToday: function(e, t) {
var i = this, n = i.dateService.today();
i.setTasksDueAt(e, n, null, null, !0, t);
},
setTasksDueTomorrow: function(e, t) {
var i = this, n = i.dateService.tomorrow();
i.setTasksDueAt(e, n, null, null, !0, t);
},
removeDueDate: function(e, t) {
var i = this;
i.setTasksDueAt(e, null, null, null, !1, t);
},
setTasksDueAt: function(e, a, o, r, s, l) {
var d = this;
null !== r && void 0 !== r && (-1 === n.indexOf(r) && console.error("invalid recurrenceType when setting task due date: " + r), 
r = String(r).substr(0, r.length - 1).toLowerCase()), null !== o && void 0 !== o && (o = 0 !== o ? Number(o) : void 0), 
e.forEach(function(e) {
var n = d.taskLookup.getTaskModel(e);
if (n) {
var c = n.attributes;
if (!o && s && (o = c.recurrence_count), !r && s && (r = c.recurrence_type), n.save({
due_date: a && t.convertLocalDateToServerDate(i(a).format("YYYY-MM-DD")),
recurrence_count: o,
recurrence_type: r,
local_change: !0
}, l), a) {
var u = !0;
d.automaticReminderService.getForTask(e, u);
} else d.automaticReminderService.destroyForTask(e);
}
o = null, r = null;
});
}
});
return a;
}), define("actions/TaskReminder", [ "application/runtime", "project!core/WBClass", "wunderbits/helpers/date", "wunderbits/helpers/strings", "vendor/moment" ], function(e, t, i, n, a) {
var o = e._, r = t.extend({
initialize: function(e, t) {
var i = this;
i.reminderLookup = e, i.createReminder = t;
},
upsertTaskReminder: function(e, t, r, s, l, d) {
var c, u = this, p = u.reminderLookup.getReminderModelForTask(e);
"number" != typeof t || o.isNaN(t) ? p && p.destroy() : (null !== r && null !== s && null !== l && (r = d ? i.convertHourTo24HourTime(r, l) : r, 
c = a(t).sod().add({
h: n.pad(r, 2),
m: n.pad(s, 2)
}).format("YYYY-MM-DDTHH:mm:ss")), c = i.convertLocalTimeToServerTime(c), p ? p.save({
task_id: e,
date: c
}) : u.createReminder.createReminder(c, e));
}
});
return r;
}), define("actions/AssignTask", [ "project!core/WBClass" ], function(e) {
var t = e.extend({
initialize: function(e, t, i) {
var n = this;
n.listLookup = e, n.taskLookup = t, n.currentUserId = i;
},
assignTasksToMe: function(e, t) {
var i = this;
i.assignTasksToUserId(e, i.currentUserId, t);
},
assignTasksToUserId: function(e, t, i) {
var n = this, a = n.taskLookup.getTaskModels(e);
a.forEach(function(e) {
var a = n.listLookup.getListModel(e.attributes.list_id);
a.isShared() && e.set("assignee_id", t, i);
});
}
});
return t;
}), define("actions/RepositionTask", [ "project!core/WBClass" ], function(e) {
var t = e.extend({
initialize: function(e, t) {
var i = this;
i.listLookup = e, i.taskLookup = t;
},
moveTasksBetweenIds: function(e, t, i, n, a) {
var o = this, r = o.taskLookup.getTaskModels(t), s = o.listLookup.getTaskCollection(e);
s.moveTasksBetweenIds(r, i, n, a);
}
});
return t;
}), define("actions/RepositionSubTask", [ "project!core/WBClass", "project!core/lib/clone" ], function(e, t) {
var i = e.extend({
initialize: function(e, t) {
var i = this;
i.taskLookup = e, i.subTaskLookup = t;
},
moveSubTaskTo: function(e, i, n, a, o) {
var r = this, s = r.subTaskLookup.getSubTaskCollection(a), l = r.subTaskLookup.getSubTaskModel(e);
if (s && l) {
var d = t(s.models), c = d.indexOf(l);
d.splice(c, 1);
var u = r._getIndex(i, d), p = r._getIndex(n, d);
p > -1 ? d.splice(p, 0, l) : u > -1 && u > d.length - 1 ? d.splice(u + 1, 0, l) : d.push(l), 
d.forEach(function(e, t) {
e.save({
position: 10 * t
}, o);
});
}
},
_getIndex: function(e, t) {
var i = this, n = e && t.indexOf(i.subTaskLookup.getSubTaskModel(e));
return null === n || void 0 === n ? -1 : n;
}
});
return i;
}), define("actions/CreateList", [ "project!core/WBClass", "project!core/WBDeferred", "collections/ListCollection", "collections/MembershipCollection" ], function(e, t, i, n) {
var a = e.extend({
initialize: function(e, t) {
var i = this;
i.listLookup = e, i.reparentTask = t;
},
createListWith: function(e, i, n, a) {
var o = this, r = new t();
return o.createList(e, i).done(function(e) {
n && o.addListMemberships(e.attributes.id, n), a && a.length && o.reparentTask.moveTasksToList(e.attributes.id, a), 
r.resolve(e);
}).fail(r.reject.bind(r)), r.promise();
},
createList: function(e, n) {
var a = this, o = new t(), r = new i("/lists/all"), s = a.listLookup.getLastListPosition();
return void 0 === s ? s = 0 : s += 10, r.add({
title: e,
position: s,
role: "owner",
"public": !!n
}, {
success: function(e) {
o.resolve(e);
},
error: function(e) {
o.reject(e);
}
}), o.promise();
},
addListMemberships: function(e, t) {
var i = new n("/memberships/all");
t.forEach(function(t) {
var n = {
list_id: e
};
t.indexOf("@") >= 0 ? n.email = t : n.user_id = t, i.add(n);
});
},
modifyListWith: function(e, t, i, n) {
var a = this, o = a.listLookup.getListModel(e);
o.save({
title: t
}), n.destroyRemoved(), a.addListMemberships(e, i);
}
});
return a;
}), define("actions/DeleteList", [ "project!core/WBClass" ], function(e) {
return e.extend({
initialize: function(e) {
var t = this;
t.listLookup = e;
},
deleteList: function(e, t) {
var i = this, n = i.listLookup.getListModel(e);
n && n.destroy(t);
}
});
}), define("actions/DeleteComment", [ "application/runtime", "project!core/WBClass" ], function(e, t) {
return t.extend({
initialize: function(e, t) {
var i = this;
i.commentLookup = e, i.settings = t;
},
_deleteCommentModel: function(e) {
e && e.destroy();
},
deleteComment: function(t, i) {
var n = this, a = n.commentLookup.getCommentModel(t);
if (a && a.canDelete()) {
var o = "true" === n.settings.attributes.confirm_delete_entity;
o ? e.trigger("modal:confirm", {
customTitle: e.language.getLabel("label_are_you_sure_permanently_delete_X_comment").toString(),
customText: e.language.getLabel("label_cant_undo").toString(),
confirmText: e.language.getLabel("button_delete").toString(),
confirm: function() {
n._deleteCommentModel(a), i && i.confirm && i.confirm();
},
cancel: function() {
i && i.cancel && i.cancel();
}
}) : n._deleteCommentModel(a);
}
}
});
}), define("actions/CreateTask", [ "project!core/WBClass", "project!core/WBDeferred", "models/TaskModel", "wunderbits/helpers/date", "collections/TaskCollection", "collections/ListCollection", "collections/NoteCollection", "collections/SubtaskCollection" ], function(e, t, i, n, a, o, r, s) {
var l = e.extend({
initialize: function(e) {
var t = this;
t.taskLookup = e, t.lists = new o("/lists/all"), t.notes = new r("/notes/all"), 
t.subTasks = new s("/subtasks/all");
},
createTask: function(e, i, o, r, s, l, d, c, u, p) {
var m = this, g = new t(), f = new a("/tasks/all");
return void 0 === c ? c = 0 : c += 10, f.add({
title: e,
list_id: i,
assignee_id: u,
position: c,
due_date: r ? n.convertLocalDateToServerDate(r) : null,
starred: o || !1,
recurrence_count: s && s.frequency,
recurrence_type: s && s.interval,
completed: !!p
}, {
success: function(e) {
l && m.notes.add({
content: l,
task_id: e.id
}), d && d.forEach(function(t) {
m.subTasks.add({
title: t.title,
list_id: i,
task_id: e.id
});
}), g.resolve(e);
},
error: function(e) {
g.reject(e);
}
}), g.promise();
}
});
return l;
}), define("actions/CreateSubtask", [ "project!core/WBClass", "project!core/WBDeferred" ], function(e, t) {
var i = e.extend({
initialize: function(e) {
this.allSubtasks = e.allSubTasks;
},
createSubtask: function(e, i, n) {
var a = this, o = new t();
return a.allSubtasks.add({
title: e,
position: i,
task_id: n
}, {
success: function(e) {
o.resolve(e);
},
error: function(e) {
o.reject(e);
}
}), o.promise();
}
});
return i;
}), define("actions/CreateReminder", [ "project!core/WBClass", "project!core/WBDeferred" ], function(e, t) {
var i = e.extend({
initialize: function(e) {
this.allReminders = e.allReminders;
},
createReminder: function(e, i) {
var n = this, a = new t();
return n.allReminders.add({
date: e,
task_id: i
}, {
success: function(e) {
a.resolve(e);
},
error: function(e) {
a.reject(e);
}
}), a.promise();
}
});
return i;
}), define("actions/CreateNote", [ "project!core/WBClass", "project!core/WBDeferred" ], function(e, t) {
var i = e.extend({
initialize: function(e) {
this.allNotes = e.allNotes;
},
createNote: function(e, i) {
var n = this, a = new t();
return n.allNotes.add({
content: e,
task_id: i
}, {
success: function(e) {
a.resolve(e);
},
error: function(e) {
a.reject(e);
}
}), a.promise();
}
});
return i;
}), define("actions/MuteList", [ "project!core/WBClass", "project!core/mixins/WBBindableMixin" ], function(e, t) {
var i = e.prototype, n = e.extend({
mixins: [ t ],
initialize: function(e, t) {
var n = this;
i.initialize.apply(n, arguments), n.membershipLookup = e, n.userID = t;
},
setListMuted: function(e, t) {
var i = this, n = "" + i.userID, a = i.membershipLookup.getMembershipCollection(e), o = a.findWhere({
user_id: n
}), r = {
muted: !!t
};
if (o) o.save(r); else var s = i.bindTo(a, "add", function(e) {
n === e.attributes.user_id && (e.save(r), i.unbindFrom(s));
});
}
});
return n;
}), define("actions/sidebar/Hierarchy", [ "application/runtime", "project!core/WBClass", "project!core/mixins/WBBindableMixin", "collections/SortedCollection", "collections/comparators" ], function(e, t, i, n, a) {
var o = e._, r = t.extend({
initialize: function(e, t) {
var i = this;
i.lists = e, i.folders = t, i.rootCollection = new n(), i.rootCollection.enableSortedCollection(a.position, [ "position" ]), 
i.folderCollections = {}, i.collectionsFilled = !1, i.bindTo(i.lists, "add", "_listAdded"), 
i.bindTo(i.lists, "remove", "_listRemoved"), i.bindTo(i.folders, "change:list_ids", "_folderListsChanged"), 
i.bindTo(i.folders, "add", "_folderAdded"), i.bindTo(i.folders, "remove", "_folderRemoved");
},
getCollectionForFolder: function(e) {
var t = this, i = t.folders.get(e), o = t.folderCollections[e];
return o || (t.folderCollections[e] = o = new n(), o.enableSortedCollection(a.position, [ "position" ]), 
t.bindTo(o, "add remove change:position", t._updateFolderPosition.bind(t, i, o))), 
o;
},
getRootCollection: function() {
var e = this;
return e.collectionsFilled || (e.collectionsFilled = !0, e._fillCollectionWithInitialData()), 
e.rootCollection;
},
_fillCollectionWithInitialData: function() {
var e = this, t = e.getRootCollection();
e.lists.models.forEach(function(t) {
var i = e._getCollectionForList(t);
i.add(t);
}), e.folders.models.forEach(function(e) {
t.add(e);
});
},
_updateFolderPosition: function(e, t) {
var i = t.models[0];
e && e.save({
position: i && i.attributes.position
});
},
_getCollectionForList: function(e) {
var t, i = this, n = i.folders.findFolderForListId(e.id);
return t = n ? i.getCollectionForFolder(n.id) : i.getRootCollection();
},
_listAdded: function(e) {
var t = this, i = t._getCollectionForList(e);
i.add(e);
},
_listRemoved: function(e) {
var t = this, i = t._getCollectionForList(e);
i.remove(e);
},
_folderListsChanged: function(e) {
var t = this, i = e.previous("list_ids"), n = e.attributes.list_ids, a = o.difference(i, n), r = o.difference(n, i);
a.forEach(function(i) {
var n = t.lists.get(i);
n && t._listRemovedFromFolder(n, e);
}), r.forEach(function(i) {
var n = t.lists.get(i);
n && t._listAddedToFolder(n, e);
});
},
_listRemovedFromFolder: function(e, t) {
var i = this, n = i.getCollectionForFolder(t.id);
n.remove(e);
var a = i.getRootCollection();
a.add(e);
},
_listAddedToFolder: function(e, t) {
var i = this, n = i.getCollectionForFolder(t.id);
n.add(e);
var a = i.getRootCollection();
a.remove(e);
},
_folderAdded: function(e) {
var t = this, i = t.getRootCollection(), n = t.getCollectionForFolder(e.id);
e.attributes.list_ids.forEach(function(e) {
var a = t.lists.get(e);
a && (n.add(a), i.remove(a));
}), i.add(e);
},
_folderRemoved: function(e) {
var t = this, i = t.getCollectionForFolder(e.id), n = t.getRootCollection();
i.models.forEach(function(e) {
n.add(e);
}), i.reset(), delete t.folderCollections[e.id], n.remove(e);
}
});
return i.applyToClass(r), r;
}), define("actions/sidebar/RepositionList", [ "project!core/WBClass" ], function(e) {
var t = e.extend({
initialize: function(e) {
this.listLookup = e;
},
moveListsTo: function(e, t, i, n) {
var a = t && t.attributes.position || 0, o = i && i.attributes.position || 0, r = (o - a) / (e.length + 1);
!t && i ? a = o - 10 : !i && t && (r = 10), e.forEach(function(e, t) {
if (e) {
var i = a + r * (t + 1);
e.save({
position: i
}, n);
}
});
},
repositionHandleAtRoot: function(e, t, i) {
var n = this;
return n.moveListsTo(e.getLists(), t && t.getBottomList(), i && i.getTopList());
},
repositionListInFolder: function(e, t, i) {
var n, a, o = this, r = o.listLookup.getListModel(e);
return n = t ? o.listLookup.getListModel(t) : o.listLookup.getListBefore(i), a = i ? o.listLookup.getListModel(i) : o.listLookup.getListAfter(t), 
o.moveListsTo([ r ], n, a);
},
ensureListIsSiblingOrAfter: function(e, t) {
var i, n = this, a = n.listLookup.getListModel(e), o = n.listLookup.getListModel(t);
a.attributes.position < o.attributes.position && (i = n.listLookup.getListBefore(o.id), 
i && n.moveListsTo([ a ], i, o));
}
});
return t;
}), define("actions/sidebar/FolderHandle", [ "project!core/WBClass" ], function(e) {
var t = e.extend({
initialize: function(e, t) {
this.folderId = e, this.hierarchy = t;
},
getTopList: function() {
var e = this.getLists();
return e[0];
},
getBottomList: function() {
var e = this.getLists();
return e[e.length - 1];
},
getLists: function() {
return this.hierarchy.getCollectionForFolder(this.folderId).models.slice();
}
});
return t;
}), define("actions/sidebar/ListHandle", [ "project!core/WBClass" ], function(e) {
var t = e.extend({
initialize: function(e) {
this.listModel = e;
},
getTopList: function() {
return this.listModel;
},
getBottomList: function() {
return this.listModel;
},
getLists: function() {
return [ this.listModel ];
}
});
return t;
}), define("actions/sidebar/Folder", [ "actions/sidebar/FolderHandle", "project!core/WBClass" ], function(e, t) {
var i = t.extend({
initialize: function(e, t, i, n, a) {
var o = this;
o.folderModel = e, o.allFolders = t, o.repositionList = i, o.hierarchy = n, o.listLookup = a;
},
dissolve: function() {
var e = this;
e.folderModel.destroy();
},
rename: function(e) {
var t = this;
t.folderModel.save({
title: e
});
},
getListCollection: function() {
var e = this;
return e.hierarchy.getCollectionForFolder(e.folderModel.id);
},
moveList: function(e, t, i) {
var n = this;
n.repositionList.repositionListInFolder(e, t, i);
var a = n.allFolders.findFolderForListId(e);
a && a.removeListId(e), n.folderModel.addListId(e);
},
appendList: function(t) {
var i = this, n = new e(i.folderModel.id, i.hierarchy), a = n.getBottomList(), o = a && i.listLookup.getListAfter(a.id);
i.moveList(t, a && a.id, o && o.id);
}
});
return i;
}), define("actions/Sidebar", [ "project!core/WBClass", "models/FolderModel", "actions/sidebar/Hierarchy", "actions/sidebar/RepositionList", "actions/sidebar/FolderHandle", "actions/sidebar/ListHandle", "actions/sidebar/Folder" ], function(e, t, i, n, a, o, r) {
var s = "application/x-wunderlist-list", l = "application/x-wunderlist-folder", d = e.extend({
initialize: function(e, t, a) {
var o = this;
o.listLookup = a, o.allFolders = t, o.sortedLists = e, o.hierarchy = new i(o.sortedLists, o.allFolders), 
o.repositionList = new n(a);
},
createFolder: function(e, t, i) {
var n = this;
n.allFolders.models.forEach(function(e) {
e.isListIdInFolder(t) && e.removeListId(t);
}), i && n.repositionList.ensureListIsSiblingOrAfter(t, i);
var a = [ t ];
i && a.unshift(i);
var o = {
title: e,
list_ids: a,
expanded: !0
}, r = this.allFolders.add(o);
return r.id;
},
removeListFromFolder: function(e) {
var t = this, i = t.listLookup.getFolderModel(e);
if (i) {
var n = new a(i.id, t.hierarchy), r = n.getBottomList(), s = r && t.listLookup.getListAfter(r.id), l = s && new o(s);
t.moveListInRoot(e, n, l);
}
},
moveListInRoot: function(e, t, i) {
var n = this, a = n.getFolderforList(e);
a && a.removeListId(e);
var r = n.sortedLists.get(e), s = new o(r);
n.repositionList.repositionHandleAtRoot(s, t, i);
},
repositionFolder: function(e, t, i) {
var n = new a(e, this.hierarchy);
this.repositionList.repositionHandleAtRoot(n, t, i);
},
expandFolderForList: function(e) {
var t = this.getFolderforList(e);
t && t.save("expanded", !0);
},
getRootCollection: function() {
return this.hierarchy.getRootCollection();
},
getFolderforList: function(e) {
return this.allFolders.findFolderForListId(e);
},
getFolderActions: function(e) {
var t = this, i = t.allFolders.get(e);
return new r(i, t.allFolders, t.repositionList, t.hierarchy, t.listLookup);
},
createIdHandle: function(e, t) {
var i, n = this;
return t === s ? (i = n.sortedLists.get(e), new o(i)) : t === l ? new a(e, n.hierarchy) : void console.trace("invalid mimeType to be used in the sidebar reordering: " + t);
}
});
return d;
}), define("actions/Factory", [ "project!core/WBSingleton", "application/runtime", "collections/ListCollection", "collections/FolderCollection", "actions/services/ListLookup", "actions/services/FeatureLookup", "actions/services/FileLookup", "actions/services/FolderLookup", "actions/services/MembershipLookup", "actions/services/TaskLookup", "actions/services/CommentLookup", "actions/services/SubTaskLookup", "actions/services/ReminderLookup", "actions/services/NoteLookup", "actions/services/UserLookup", "actions/services/Date", "actions/services/DesktopNotificationLookup", "actions/Duplication", "actions/Print", "actions/DeleteTask", "actions/MoveTask", "actions/StarTask", "actions/CompleteTask", "actions/CompleteSubTask", "actions/DeleteSubTask", "actions/ReparentTask", "actions/AutomaticReminder", "actions/TaskDue", "actions/TaskReminder", "actions/AssignTask", "actions/RepositionTask", "actions/RepositionSubTask", "actions/CreateList", "actions/DeleteList", "actions/DeleteComment", "actions/CreateTask", "actions/CreateSubtask", "actions/CreateReminder", "actions/CreateNote", "actions/MuteList", "actions/Sidebar" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m, g, f, b, h, v, _, w, k, x, y, C, T, S, L, D, M, z, j, I, A, P, F, B, E, O, $, R) {
function W(e) {
var t;
return function() {
return void 0 === t && (t = e.call(this)), t;
};
}
var N = e.extend({
_dateService: W(function() {
return new f();
}),
taskLookup: W(function() {
return new d();
}),
commentLookup: W(function() {
return new c();
}),
subTaskLookup: W(function() {
return new u();
}),
listLookup: W(function() {
return new a();
}),
featureLookup: W(function() {
return new o();
}),
fileLookup: W(function() {
return new r();
}),
folderLookup: W(function() {
return new s();
}),
membershipLookup: W(function() {
return new l();
}),
reminderLookup: W(function() {
return new p();
}),
noteLookup: W(function() {
return new m();
}),
userLookup: W(function() {
return new g();
}),
desktopNotificationLookup: W(function() {
return new b();
}),
_currentUserId: W(function() {
var e = t.user;
return e && e.id;
}),
automaticReminder: W(function() {
var e = this;
return new S(e.reminderLookup(), e.taskLookup(), e._dateService(), e.featureLookup());
}),
duplication: W(function() {
var e = this;
return new h(e.createList(), e.createTask(), e.createSubtask(), e.createReminder(), e.createNote(), e.repositionTask(), e.listLookup(), e.taskLookup(), e.reminderLookup(), e.subTaskLookup(), e.noteLookup(), e.sidebar());
}),
taskDue: W(function() {
var e = this;
return new L(e.taskLookup(), e._dateService(), e.automaticReminder());
}),
taskReminder: W(function() {
var e = this;
return new D(e.reminderLookup(), e.createReminder());
}),
print: W(function() {
return new v(t);
}),
deleteTask: W(function() {
var e = this;
return new _(e.taskLookup());
}),
moveTask: W(function() {
var e = this;
return new w(e.taskLookup());
}),
starTask: W(function() {
var e = this;
return new k(e.listLookup(), e.taskLookup());
}),
completeTask: W(function() {
var e = this;
return new x(e.listLookup(), e.taskLookup(), e._dateService());
}),
completeSubTask: W(function() {
var e = this;
return new y(e.listLookup(), e.subTaskLookup(), e._dateService());
}),
deleteSubTask: W(function() {
var e = this;
return new C(e.subTaskLookup());
}),
reparentTask: W(function() {
var e = this;
return new T(e.listLookup(), e.taskLookup());
}),
assignTask: W(function() {
var e = this;
return new M(e.listLookup(), e.taskLookup(), e._currentUserId());
}),
repositionTask: W(function() {
var e = this;
return new z(e.listLookup(), e.taskLookup());
}),
repositionSubTask: W(function() {
var e = this;
return new j(e.taskLookup(), e.subTaskLookup());
}),
createList: W(function() {
var e = this;
return new I(e.listLookup(), e.reparentTask());
}),
deleteList: W(function() {
var e = this;
return new A(e.listLookup());
}),
deleteComment: W(function() {
var e = this;
return new P(e.commentLookup(), t.settings);
}),
createTask: W(function() {
var e = this;
return new F(e.taskLookup());
}),
createSubtask: W(function() {
var e = this;
return new B(e.subTaskLookup());
}),
createReminder: W(function() {
var e = this;
return new E(e.reminderLookup());
}),
createNote: W(function() {
var e = this;
return new O(e.noteLookup());
}),
muteList: W(function() {
var e = this;
return new $(e.membershipLookup(), e._currentUserId());
}),
sidebar: W(function() {
var e = new i("/lists/sortable"), t = new n("/folders/all"), a = this.listLookup();
return new R(e, t, a);
})
});
return N;
}), define("collections/Managers/BaseNotificationsManager", [ "application/runtime", "actions/Factory", "helpers/pinnedSite", "helpers/URLResolver", "helpers/BlobHelper", "helpers/notifications", "./BaseManager", "collections/NotificationCollection", "collections/TaskCollection", "collections/FileCollection", "project!core/WBDeferred", "project!core/lib/when" ], function(e, t, i, n, a, o, r, s, l, d, c, u) {
var p = e._, m = e.config, g = p.once(i.createJumpListCategory), f = r.prototype;
return r.extend({
CollectionClass: s,
collections: {
all: "/desktopNotifications/all",
unread: "/desktopNotifications/unread"
},
observes: {
"collections.all": {
"change:read": "notificationReadCheck",
add: [ "persistModel", "notificationReadCheck", "passToIEPinnedSite" ]
},
"runtime.settings": {
"change:notifications_desktop_enabled": "onDesktopNotificationsSettingChange"
}
},
tasks: new l("/tasks/all"),
initialize: function() {
var e = this;
e.reminderLookup = t.reminderLookup(), e.taskLookup = t.taskLookup(), f.initialize.apply(e, arguments);
},
passToIEPinnedSite: function(t) {
if (e.env.isIE()) {
var a = n.resolve("images/favicon.ico"), o = t.attributes.summary, r = e.language.getText("label_activity_center");
e.ready.done(function() {
g(r), p.defer(function() {
i.addJumpListItem(o, "/#/activitycenter", a);
}), i.flashWindow();
});
}
},
getAvatar: function(e) {
var t = new c(), i = e.attributes, n = i.sender_id;
if (n) {
var o = m.api.host + "/v1/avatar?user_id=" + n + "&fallback=false";
a.fetchDataURI(o).always(function(e) {
t.resolve(e);
});
} else t.resolve();
return t.promise();
},
getFile: function(e, t) {
var i = this, n = new c(), o = e.attributes, r = i.extractFileID(o.url);
if (r && t) {
var s = new d("/tasks/" + t.id + "/files"), l = s.get(r);
l ? l.getPreviewUrl().done(function(e) {
e ? a.fetchDataURI(e).always(function(e) {
n.resolve(e, l);
}) : n.resolve();
}) : n.resolve();
} else n.resolve();
return n.promise();
},
createNotification: function(t, i, n, a) {
var r = t.attributes, s = function() {
t.save({
read: !0
}), this.cancel && this.cancel();
}, l = function() {
var t = r.url && r.url.replace(/^wunderlist:\/\//, "");
t && e.trigger("route:" + t), s.call(this);
}, d = {
notificationId: t.id,
type: "text",
title: "Wunderlist",
text: t.attributes.message,
timeout: !1,
onClick: l,
onClose: s,
userAvatar: i
};
n && (d.templateType = "image", d.imageUrl = n), a && (d.buttons = [ {
title: "Download " + a.attributes.file_name
} ], d.buttonHandlers = [ {
onClick: function() {
e.openUrl(a.attributes.url);
}
} ]), o.create(d), t.save({
notified: !0
});
},
isReminderLocallyNotified: function(e) {
var t, i = this, n = i.taskLookup.getTaskModel(e);
if (n) {
var a = i.reminderLookup.getReminderModelForTask(n.id);
t = a && a.attributes.reminded;
}
return !!t;
},
notificationReadCheck: function(t) {
var i, n = this, a = t.attributes, o = e.settings.attributes, r = n.extractTaskID(a.url);
"ReminderDue" === a.event && (i = n.isReminderLocallyNotified(r));
var s = !!a.read, l = !!a.notified, d = "true" === o.notifications_desktop_enabled;
if (n.collections.unread[s ? "remove" : "add"](t), !i && !s && !l && d) {
var c = r && n.tasks.get(r), p = n.getAvatar(t), m = n.getFile(t, c);
u(p, m).done(function(e, i) {
var a = e[0], o = i[0], r = i[1];
n.createNotification(t, a, o, r);
});
}
},
extractTaskID: function(e) {
var t, i = /wunderlist:\/\/tasks\/(\d+).?/, n = e && e.match(i);
return n && n.length && (t = n[1]), t;
},
extractFileID: function(e) {
var t, i = /\/files\/(\d+).?/, n = e && e.match(i);
return n && n.length && (t = n[1]), t;
},
onDesktopNotificationsSettingChange: function(t) {
var i = this, n = t.attributes.notifications_desktop_enabled;
n !== !0 || o._permissionGranted || (e.trigger("popover:close"), e.trigger("settings:close"), 
i.delay(o.requestPermission, 300));
}
});
}), define("collections/Managers/DesktopNotificationsManager", [ "application/runtime", "helpers/pinnedSite", "helpers/URLResolver", "helpers/BlobHelper", "helpers/notifications", "wunderbits/helpers/date", "collections/NotificationCollection", "collections/TaskCollection", "collections/FileCollection", "collections/Managers/BaseNotificationsManager" ], function(e, t, i, n, a, o, r, s, l, d, c) {
var u = e._;
return d.extend({
observes: {
runtime: {
"browser:marketplace:add": [ "checkToCreateBrowserNotification", "checkToCreateChromeInstallNotification" ],
"iyf:notification": "deferIYFNotificationCreation",
"iyf:removeNotification": "deferIYFNotificationRemoval"
}
},
debounceUpdateCommentNotification: c,
setupBinds: function() {
var e = this;
e.debounceUpdateCommentNotification = u.debounce(e.updateCommentNotification, 250);
},
deferIYFNotificationCreation: function() {
var t = this;
e.ready.done(function() {
t.createIYFNotification();
});
},
deferIYFNotificationRemoval: function() {
var t = this;
e.ready.done(function() {
t.removeIYFNotification();
});
},
checkToCreateBrowserNotification: function() {
var t = this, i = parseInt(e.settings.attributes.app_open_count, 10);
2 === i && t.createAddToBrowserNotification();
},
checkToCreateChromeInstallNotification: function() {
var t = this, i = parseInt(e.settings.attributes.app_open_count, 10);
4 === i && t.createChromeInstallQuickAddNotification();
},
removeIYFNotification: function() {
var t = this, i = t.collections.all;
t.bindTo(e, "notifications:ready", function() {
var e = "campaign_iyf", t = i.get(e);
t && t.destroy();
});
},
createIYFNotification: function() {
var t = this, i = {};
i.id = "campaign_iyf";
var n = "iyf4_notification_label", a = "iyf4_notification_button_label_var_a";
i.message = i.summary = e.language.getText(n), i.buttonText = e.language.getText(a), 
i.position = Date.now(), i.trigger = "campaign:iyf", i.read = !1;
var o = t.collections.all;
t.bindTo(e, "notifications:ready", function() {
var e = o.get(i.id);
e && e.destroy(), o.add(i, t.fromSyncOptions);
});
},
updateCommentNotification: function(e) {
var t = this, i = t.collections.all, n = i.get(e.id);
n && (i.remove(n), n.destroy()), i.add(e, t.fromSyncOptions);
},
createAddToBrowserNotification: function() {
var t = this, i = e.env.getBrowser(), n = {};
if (e.env.isChrome()) {
var a = t.collections.all;
e.settings.attributes.add_to_chrome || a.get(i) || (n.id = i, n.message = e.language.getText("notification_add_to_browser"), 
n.summary = n.message, n.position = 0, n.trigger = "browser:add", n.read = !1, a.add(n, t.fromSyncOptions), 
e.settings.save({
add_to_chrome: "true"
}));
}
},
createChromeInstallQuickAddNotification: function() {
var t = this, i = e.env.getBrowser(), n = {};
if ("chrome" === i) {
var a = i + "_extension", o = t.collections.all;
e.settings.attributes.add_extension_to_chrome || o.get(a) || (n.message = e.language.getText("notification_add_extension_to_browser"), 
n.summary = n.message, n.id = a, n.position = 0, n.trigger = "browser:add", n.read = !1, 
o.add(n, t.fromSyncOptions), e.settings.save({
add_extension_to_chrome: "true"
}));
}
}
});
}), define("collections/Managers/FilesCollectionManager", [ "./BaseManager", "wunderbits/collections/WBCollection", "collections/FileCollection", "collections/TaskCollection" ], function(e, t, i, n, a) {
var o = t.collections;
return e.extend({
CollectionClass: i,
collections: {
all: "/files/all"
},
observes: {
"collections.all": {
add: [ "persistModel", "onFilesAdd", "updateTaskHasFilesFromFile" ],
remove: [ "detachModel", "updateTaskHasFilesFromFile" ]
},
tasks: {
add: [ "updateTaskHasFilesFromTask" ]
}
},
tasks: new n("/tasks/all"),
onFilesAdd: function(e, t, n) {
n || (n = {});
var a = e.attributes.task_id, o = new i("/tasks/" + a + "/files");
o.add(e, n);
},
detachModel: function(e, t, n) {
var a = e.attributes.task_id, o = new i("/tasks/" + a + "/files");
o.remove(e, n);
},
updateTaskHasFilesFromFile: function(e, t, i) {
var n = this;
if (n.hasUpdateOptions(i)) {
var o = e.attributes.task_id, r = n.tasks.get(o);
r && n.updateTaskHasFilesFromTask(r, a, i);
}
},
updateTaskHasFilesFromTask: function(e, t, i) {
var n = this;
if (n.hasUpdateOptions(i)) {
i = n.getLocalSaveOptions(i);
var a = n.taskHasFiles(e.id);
e.attributes.hasFiles !== a && e.save({
hasFiles: a
}, i);
}
},
taskHasFiles: function(e) {
var t = o["/tasks/" + e + "/files"], i = t && t.length;
return !!i;
}
});
}), define("collections/Managers/TaskCommentsCollectionManager", [ "application/runtime", "./BaseManager", "wunderbits/collections/WBCollection", "collections/TaskCommentsCollection", "collections/TaskCollection", "collections/ListCollection" ], function(e, t, i, n, a, o, r) {
var s = i.collections;
return t.extend({
CollectionClass: n,
collections: {
all: "/taskComments/all"
},
observes: {
"collections.all": {
add: [ "persistModel", "onCommentAdd", "updateTaskHasCommentsFromComment", "updateListHasCommentsFromComment", "updateCanDeleteComment" ],
"change:read": [ "updateTasAndListkHasCommentsOnChange" ],
remove: [ "updateTaskHasCommentsFromComment", "updateListHasCommentsFromComment" ]
},
tasks: {
remove: "updateListHasCommentsFromTask",
"change:list_id": "updateListHasCommentsFromTask",
"change:hasUnreadComments": "updateListHasCommentsFromTask",
"change:completed": "updateListHasCommentsFromTask"
},
lists: {
add: "updateListHasCommentsFromList",
"change:muted": "updateListHasCommentsFromList",
"change:role": "updateCanDeleteCommentsFromList",
"change:owner_id": "updateCanDeleteCommentsFromList"
}
},
tasks: new a("/tasks/all"),
lists: new o("/lists/all"),
onCommentAdd: function(e, t, i) {
var a = this;
i || (i = {});
var o = e.get("task_id");
o = a.tasks.getIdByAltId(o) || o;
var r = new n("/tasks/" + o + "/comments");
r.add(e, i);
},
updateTasAndListkHasCommentsOnChange: function(e, t, i) {
var n = this;
n.updateTaskHasCommentsFromComment(e, r, i), n.updateListHasCommentsFromComment(e, r, i);
},
updateTaskHasComments: function(e, t) {
var i = this;
t = i.getLocalSaveOptions(t);
var a = new n("/tasks/" + e + "/comments"), o = i.tasks.get(e);
if (o) {
var r = o.attributes, s = r.hasComments ? r.hasComments : !!a.length;
o.attributes.hasComments !== s && o.save({
hasComments: s
}, t);
}
},
updateCanDeleteComment: function(t, i, n) {
var a = this;
if (a.hasUpdateOptions(n)) {
var o = t.attributes, r = o.author, s = e.user.isIDEqual(r.id), l = a.tasks.get(o.task_id), d = l && a.lists.get(l.attributes.list_id), c = d && d.isOwner() || s;
t.save({
canDelete: c
});
}
},
updateCanDeleteCommentsFromList: function(e, t, i) {
var n = this;
if (n.hasUpdateOptions(i)) {
var a = s["/lists/" + e.id + "/tasks"];
a && a.each(function(e) {
var t = s["/tasks/" + e.id + "/comments"];
t && t.each(function(e) {
n.updateCanDeleteComment(e, t, {});
});
});
}
},
updateTaskHasCommentsFromComment: function(e, t, i) {
var n = this, a = e.attributes.task_id;
n.updateTaskHasComments(a, i);
},
updateListHasComments: function(e, t) {
var i = this;
t = i.getLocalSaveOptions(t);
var n = i.lists.get(e);
if (n) {
var o = new a("/lists/" + n.id + "/tasks"), r = o.findWhere({
hasUnreadComments: !0,
completed: !1
}), s = !n.isMuted() && !!r;
n.attributes.hasUnreadComments !== s && n.save({
hasUnreadComments: s
}, t);
}
},
updateListHasCommentsFromComment: function(e, t, i) {
var n = this;
if (n.hasUpdateOptions(i)) {
var a = e.attributes.task_id, o = n.tasks.get(a), r = o && o.attributes.list_id;
r && n.updateListHasComments(r, i);
}
},
updateListHasCommentsFromList: function(e, t, i) {
var n = this;
if (n.hasUpdateOptions(i)) {
var a = e.id;
n.updateListHasComments(a, i);
}
},
updateListHasCommentsFromTask: function(e, t, i) {
var n = this;
if (n.hasUpdateOptions(i)) {
var a = e.previous("list_id"), o = e.attributes.list_id;
n.defer(function() {
n.updateListHasComments(o, i), a && a !== o && n.updateListHasComments(a, i);
});
}
}
});
}), define("models/TaskCommentsStateModel", [ "models/BaseModel" ], function(e) {
return e.extend({
storeName: "taskCommentsStates",
defaults: {
type: "task_comments_state"
},
isAbleToSync: function() {
return !0;
}
});
}), define("collections/TaskCommentsStateCollection", [ "models/TaskCommentsStateModel", "./BaseCollection" ], function(e, t) {
return t.extend({
model: e
});
}), define("collections/Managers/TaskCommentsStatesCollectionManager", [ "./BaseManager", "wunderbits/collections/WBCollection", "collections/TaskCommentsStateCollection", "collections/TaskCollection" ], function(e, t, i, n, a) {
var o = t.collections;
return e.extend({
CollectionClass: i,
collections: {
all: "/taskCommentsStates/all"
},
observes: {
"collections.all": {
add: [ "persistModel", "addToScopedCollection", "updateTasksHaveCommentsFromState" ],
"change:unread_count": "updateTasksHaveCommentsFromStateChange",
remove: [ "updateTasksHaveCommentsFromStateRemoval" ]
},
tasks: {
add: "updateTaskHasCommentsFromTask"
}
},
tasks: new n("/tasks/all"),
addToScopedCollection: function(e, t, n) {
var a = this;
n = a.getLocalSaveOptions(n);
var o = e.attributes.task_id, r = new i("/tasks/" + o + "/taskCommentsStates");
r.add(e);
},
updateTaskUnreadCount: function(e, t, i) {
var n = this;
i = n.getLocalSaveOptions(i);
var a = n.tasks.get(e);
a && a.save({
unreadCount: t || 0
}, i);
},
updateTaskHasStateReadComments: function(e, t) {
var i = this;
t = i.getLocalSaveOptions(t);
var n = i.tasks.get(e);
n && n.save({
hasComments: !0,
hasUnreadComments: !1
}, t);
},
updateTaskHasStateUnreadComments: function(e, t) {
var i = this;
t = i.getLocalSaveOptions(t);
var n = i.tasks.get(e);
n && n.save({
hasComments: !0,
hasUnreadComments: !0
}, t);
},
updateTasksHaveCommentsFromState: function(e, t, i) {
var n = this;
if (n.hasUpdateOptions(i)) {
var a = e.attributes, o = a.task_id;
a.unread_count > 0 ? n.updateTaskHasStateUnreadComments(o, i) : n.updateTaskHasStateReadComments(o, i), 
n.updateTaskUnreadCount(o, a.unread_count, i);
}
},
updateTasksHaveCommentsFromStateRemoval: function(e, t, i) {
var n = this;
i = n.getLocalSaveOptions(i);
var a = n.tasks.get(e.attributes.task_id);
a && a.save({
hasComments: !1,
hasUnreadComments: !1,
unreadCount: 0
}, i);
},
updateTasksHaveCommentsFromStateChange: function(e, t) {
this.updateTasksHaveCommentsFromState(e, a, t);
},
updateTaskHasCommentsFromTask: function(e, t, i) {
var n = this;
if (n.hasUpdateOptions(i)) {
i = n.getLocalSaveOptions(i);
var a = n.getStateFromTask(e.id);
if (a) {
var o = a.attributes, r = e.attributes, s = {
hasComments: !0,
hasUnreadComments: o.unread_count > 0,
unreadCount: o.unread_count || 0
}, l = {};
Object.keys(s).forEach(function(e) {
r[e] !== s[e] && (l[e] = s[e]);
}), Object.keys(l).length && e.save(l, i);
}
}
},
getStateFromTask: function(e) {
var t = o["/tasks/" + e + "/taskCommentsStates"];
return t && t.models[0];
}
});
}), define("models/ProductModel", [ "wunderbits/WBModel" ], function(e) {
return e.extend({
storeName: "none",
defaults: {
type: "Product"
},
idAttribute: "product_id"
});
}), define("collections/ProductsCollection", [ "models/ProductModel", "./BaseCollection" ], function(e, t) {
return t.extend({
model: e
});
}), define("collections/Managers/ProductsCollectionManager", [ "./BaseManager", "collections/ProductsCollection" ], function(e, t) {
return e.extend({
CollectionClass: t,
collections: {
all: "/products/all"
}
});
}), define("collections/Managers/NotesCollectionManager", [ "./BaseManager", "wunderbits/collections/WBCollection", "collections/NoteCollection", "collections/TaskCollection" ], function(e, t, i, n) {
var a = t.collections;
return e.extend({
CollectionClass: i,
collections: {
all: "/notes/all"
},
observes: {
"collections.all": {
add: [ "persistModel", "noteTaskIdCheck", "updateTaskHasNote" ],
"change remove": "updateTaskHasNote"
},
tasks: {
add: "updateTaskHasNoteFromTask"
}
},
tasks: new n("/tasks/all"),
updateTaskHasNote: function(e, t, n) {
var a = this;
if (a.hasUpdateOptions(n)) {
n = a.getLocalSaveOptions(n);
var o = e.attributes.task_id, r = new i("/tasks/" + o + "/notes"), s = a.tasks.get(o);
if (s) {
var l = r.at(0), d = l && l.attributes, c = d && d.content && d.content.length, u = !!c;
s.attributes.hasNote !== u && s.save({
hasNote: u
}, n);
}
}
},
noteTaskIdCheck: function(e) {
var t = e.attributes.task_id, n = new i("/tasks/" + t + "/notes");
n.add(e);
},
updateTaskHasNoteFromTask: function(e, t, i) {
var n = this;
if (n.hasUpdateOptions(i)) {
i = n.getLocalSaveOptions(i);
var a = n.taskHasNote(e.id);
e.attributes.hasNote !== a && e.save({
hasNote: a
}, i);
}
},
taskHasNote: function(e) {
var t = a["/tasks/" + e + "/notes"], i = t && t.models[0], n = i && i.attributes, o = n && n.content && n.content.length;
return !!o;
}
});
}), define("models/SettingModel", [ "models/BaseModel" ], function(e) {
return e.extend({
storeName: "settings",
defaults: {
type: "setting"
},
isAbleToSync: function() {
return !0;
}
});
}), define("collections/SettingCollection", [ "models/SettingModel", "./BaseCollection" ], function(e, t) {
return t.extend({
indices: [ "key" ],
model: e
});
}), define("backend/Sync/DataProcessors/CrossClientSettings", [], function() {
var e = [ "new_task_location", "confirm_delete_entity", "behavior_star_tasks_to_top", "automatic_reminders", "account_locale", "auto_reminder_noticeperiod", "auto_reminder_timeinterval", "background", "migrated_wunderlist_one_user", "newsletter_subscription_enabled", "notifications_email_enabled", "notifications_push_enabled", "notifications_desktop_enabled", "print_completed_items", "show_completed_items", "smartlist_visibility_all", "smartlist_visibility_assigned_to_me", "smartlist_visibility_done", "smartlist_visibility_starred", "smartlist_visibility_today", "smartlist_visibility_week", "sound_checkoff_enabled", "sound_notification_enabled", "start_of_week", "today_smart_list_visible_tasks", "consumed_quota_assigning_overall", "consumed_quota_assigning_daily", "consumed_quota_assigning_daily_date", "consumed_quota_comments_overall", "consumed_quota_comments_daily", "consumed_quota_comments_daily_date", "consumed_quota_files_overall", "consumed_quota_files_daily", "consumed_quota_files_daily_date", "campaign_iyf4_invited_friends", "campaign_iyf4_notification", "campaign_iyf4_notification_last_date", "campaign_iyf4_notification_variation", "terms_accepted_at" ], t = {};
return e.forEach(function(e) {
t[e] = !0;
}), t;
}), define("collections/Managers/SettingsCollectionManager", [ "application/runtime", "./BaseManager", "collections/SettingCollection", "backend/Sync/DataProcessors/CrossClientSettings", "project!core/WBDeferred" ], function(e, t, i, n, a, o) {
var r = t.prototype;
return t.extend({
CollectionClass: i,
collections: {
all: "/settings/all"
},
observes: {
"collections.all": {
add: "persistModel",
"add change remove": "onSetting"
},
"runtime.settings": {
change: "onLocalSettingChange",
"change:language": "onLanguageChange"
}
},
settingsReady: o,
initialize: function() {
var t = this;
r.initialize.apply(t, arguments);
var i = t.settingsReady = new a();
t.bindOnceTo(e, "db:allDataLoaded", i.resolve, i);
},
onSetting: function(e, t, i) {
var n = this;
i = n.getLocalSaveOptions(i);
var a = n.runtime.settings, r = e.attributes, s = i.remove ? "unset" : "set";
a[s](r.key, r.value, i), a.save(o, i);
},
onLocalSettingChange: function(e, t) {
if (!t.fromStorage && !t.fromSync) {
var i = this, n = i.collections.all, a = e.changedAttributes();
a && i.settingsReady.done(function() {
Object.keys(a).forEach(function(e) {
i.saveSetting(e, a[e], n);
});
});
}
},
saveSetting: function(t, i, a) {
e.settings.ready.done(function() {
var e = a.getFromIndex(t);
if (e) e.save({
value: i
}); else {
var o = {
key: t,
value: i
};
n[t] || (o.web = !0), a.add(o);
}
});
},
onLanguageChange: function(e, t) {
var i = this;
i.defer(function() {
e.save("account_locale", t);
});
}
});
}), define("collections/Managers/UsersCollectionManager", [ "application/runtime", "./BaseManager", "collections/UserCollection", "collections/MembershipCollection", "project!core/lib/clone" ], function(e, t, i, n, a) {
return t.extend({
CollectionClass: i,
collections: {
all: "/users/all"
},
observes: {
"collections.all": {
add: [ "persistModel", "addUserToAssignableCollection" ],
remove: "removeUserFromAssignableCollection",
change: "updateOwnUser"
}
},
updateOwnUser: function(t, i) {
var n = this;
if (i.fromSync && e.user.isIDEqual(t.id)) {
var o = a(t.changed);
delete o.revision, delete o.matryoshkaRevision, e.user.save(o, n.fromSyncOptions);
}
},
addUserToAssignableCollection: function(e) {
var t = !0;
this.addOrRemoveUserAssignable(e, t);
},
removeUserFromAssignableCollection: function(e) {
var t = !1;
this.addOrRemoveUserAssignable(e, t);
},
addOrRemoveUserAssignable: function(e, t) {
var a = this, o = new n("/users/" + e.id + "/memberships");
o.each(function(n) {
var o = n.attributes.list_id, r = new i("/lists/" + o + "/assignables");
a.addOrRemoveFromCollection(t, r, e);
});
}
});
}), define("models/TasksCountModel", [ "./LocallyImmutableModel" ], function(e) {
return e.extend({
storeName: "tasksCounts",
defaults: {
type: "tasks_count"
},
neverSyncOut: !0,
isAbleToSync: function() {
return !1;
}
});
}), define("collections/TasksCountCollection", [ "models/TasksCountModel", "./BaseCollection" ], function(e, t) {
return t.extend({
model: e
});
}), define("collections/Managers/TasksCountsCollectionManager", [ "./BaseManager", "collections/TasksCountCollection", "collections/ListCollection" ], function(e, t, i) {
return e.extend({
CollectionClass: t,
collections: {
all: "/tasksCounts/all"
},
observes: {
"collections.all": {
add: [ "persistModel", "updateListCompletedCount" ],
"change:completed_count change:uncompleted_count": "updateListCompletedCount"
}
},
lists: new i("/lists/all"),
updateListCompletedCount: function(e, t, i) {
var n = this;
i = n.getLocalSaveOptions(i);
var a = e.attributes, o = a.list_id, r = n.lists.get(o);
r && r.save({
completedTasksCount: a.completed_count
}, i);
}
});
}), define("models/UnreadActivitiesCountModel", [ "models/BaseModel" ], function(e) {
return e.extend({
storeName: "unreadActivitiesCounts",
defaults: {
type: "unread_activities_count"
},
neverSyncOut: !0,
isAbleToSync: function() {
return !1;
}
});
}), define("collections/UnreadActivitiesCountCollection", [ "models/UnreadActivitiesCountModel", "./BaseCollection" ], function(e, t) {
return t.extend({
model: e
});
}), define("collections/Managers/UnreadActivitiesCountCollectionManager", [ "application/runtime", "./BaseManager", "collections/UnreadActivitiesCountCollection" ], function(e, t, i) {
var n = e._, a = t.prototype;
return t.extend({
CollectionClass: i,
collections: {
all: "/unreadActivitiesCounts/all"
},
observes: {
"collections.all": {
add: [ "persistModel", "checkForNewNotifications" ],
"change:activities change:conversations": [ "checkForNewNotifications" ]
}
},
previousCounts: {
activities: 0,
conversations: 0
},
initialize: function() {
var e = this;
e.triggerSound = n.debounce(e.triggerSound, 500), a.initialize.apply(e, arguments);
},
checkForNewNotifications: function(e) {
var t = this, i = e.attributes, n = t.previousCounts, a = i.activities, o = i.conversations, r = a && a > n.activities, s = o && o > n.conversations;
(r || s) && t.triggerSound(), n.activities = a || 0, n.conversations = o || 0;
},
triggerSound: function() {
"true" === e.settings.attributes.sound_notification_enabled && e.trigger("sounds:play", "bell");
}
});
}), define("models/ActivitiesModel", [ "./LocallyImmutableModel" ], function(e) {
return e.extend({
storeName: "activities",
defaults: {
type: "activities"
},
isAbleToSync: function() {
return !1;
}
});
}), define("collections/ActivitiesCollection", [ "models/ActivitiesModel", "./BaseCollection" ], function(e, t) {
return t.extend({
model: e
});
}), define("collections/Managers/ActivitiesCollectionManager", [ "./BaseManager", "collections/ActivitiesCollection" ], function(e, t) {
return e.extend({
CollectionClass: t,
collections: {
all: "/activities/all"
},
observes: {
"collections.all": {
add: [ "persistModel" ]
}
}
});
}), define("models/ConversationsModel", [ "models/LocallyImmutableModel" ], function(e) {
return e.extend({
storeName: "conversations",
defaults: {
type: "conversations"
},
neverSyncOut: !0,
isAbleToSync: function() {
return !1;
}
});
}), define("collections/ConversationsCollection", [ "models/ConversationsModel", "./BaseCollection" ], function(e, t) {
return t.extend({
model: e
});
}), define("collections/Managers/ConversationsCollectionManager", [ "./BaseManager", "collections/ConversationsCollection" ], function(e, t) {
return e.extend({
CollectionClass: t,
collections: {
all: "/conversations/all"
},
observes: {
"collections.all": {
add: [ "persistModel" ]
}
}
});
}), define("models/SubscriptionModel", [ "./BaseModel" ], function(e) {
return e.extend({
storeName: "subscriptions",
defaults: {
type: "subscription"
},
neverSyncOut: !0,
isAbleToSync: function() {
return !1;
},
getTeamMembers: function() {
return this.attributes.members || [];
},
resetTeamStatus: function() {}
});
}), define("collections/SubscriptionCollection", [ "models/SubscriptionModel", "./BaseCollection" ], function(e, t) {
return t.extend({
model: e
});
}), define("collections/Managers/SubscriptionCollectionManager", [ "application/runtime", "./BaseManager", "collections/SubscriptionCollection" ], function(e, t, i, n) {
return t.extend({
CollectionClass: i,
collections: {
all: "/subscriptions/all"
},
observes: {
"collections.all": {
add: [ "persistModel", "updateSubCollections", "updateUserFlags" ],
remove: [ "cleanupFromCollections", "updateUserFlags" ]
}
},
activeSubscriptions: new i("/subscriptions/active"),
individualSubscriptions: new i("/subscriptions/individual"),
teamSubscriptions: new i("/subscriptions/team"),
expiredSubscriptions: new i("/subscriptions/expired"),
updateSubCollections: function(e) {
var t = this, i = e.attributes, n = !!i.expired_at;
if (n) t.expiredSubscriptions.add(e), t.removeFromActiveSubCollections(e); else {
t.activeSubscriptions.add(e);
var a = i.team ? t.teamSubscriptions : t.individualSubscriptions;
a.add(e);
}
},
removeFromActiveSubCollections: function(e) {
var t = this;
t.activeSubscriptions.remove(e), t.teamSubscriptions.remove(e), t.individualSubscriptions.remove(e);
},
cleanupFromCollections: function(e) {
var t = this;
[ "active", "expired", "individual", "team" ].forEach(function(i) {
t[i + "Subscriptions"].remove(e);
});
},
updateUserFlags: function(t, i, a) {
var o = this, r = o.getLocalSaveOptions(a), s = !!o.individualSubscriptions.length, l = !!o.teamSubscriptions.length, d = s && o.individualSubscriptions.at(0), c = l && o.teamSubscriptions.at(0), u = s || l, p = {
pro: u,
individualSubscription: s ? d.id : n,
teamSubscription: l ? c.id : n,
isAdmin: l && e.user.isIDEqual(c.attributes.admin.id),
productID: u && (d ? d.attributes.product_id : c.attributes.product_id)
};
e.user.save(p, r);
}
});
}), define("collections/Managers/FeaturesCollectionManager", [ "application/runtime", "./BaseManager", "collections/FeatureCollection" ], function(e, t, i) {
return t.extend({
CollectionClass: i,
collections: {
all: "/features/all"
},
observes: {
"collections.all": {
add: [ "persistModel" ]
}
}
});
}), define("collections/CollectionManager", [ "application/runtime", "wunderbits/helpers/strings", "wunderbits/BaseEventEmitter", "backend/database", "collections/Managers/SearchManager", "collections/Managers/TagsManager", "collections/Managers/TasksCollectionManager", "collections/Managers/SubtasksCollectionManager", "collections/Managers/TaskPositionsCollectionManager", "collections/Managers/SubtaskPositionsCollectionManager", "collections/Managers/ListsCollectionManager", "collections/Managers/FoldersCollectionManager", "collections/Managers/ListPositionsCollectionManager", "collections/Managers/MembershipsCollectionManager", "collections/Managers/RemindersCollectionManager", "collections/Managers/ServicesCollectionManager", "collections/Managers/DesktopNotificationsManager", "collections/Managers/FilesCollectionManager", "collections/Managers/TaskCommentsCollectionManager", "collections/Managers/TaskCommentsStatesCollectionManager", "collections/Managers/ProductsCollectionManager", "collections/Managers/NotesCollectionManager", "collections/Managers/SettingsCollectionManager", "collections/Managers/UsersCollectionManager", "collections/Managers/TasksCountsCollectionManager", "collections/Managers/UnreadActivitiesCountCollectionManager", "collections/Managers/ActivitiesCollectionManager", "collections/Managers/ConversationsCollectionManager", "collections/Managers/SubscriptionCollectionManager", "collections/Managers/FeaturesCollectionManager", "vendor/setImmediate", "project!core/WBDeferred", "project!core/lib/when" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m, g, f, b, h, v, _, w, k, x, y, C, T, S, L, D, M, z, j, I) {
var A = e._, P = i.prototype, F = Function.prototype, B = {
features: M,
settings: x,
memberships: m,
folders: u,
listPositions: p,
lists: c,
users: y,
taskPositions: l,
tasks: r,
subtaskPositions: d,
subtasks: s,
reminders: g,
services: f,
desktopNotifications: b,
files: h,
taskComments: v,
taskCommentsStates: _,
notes: k,
tasksCounts: C,
products: w,
subscriptions: D,
unreadActivitiesCounts: T,
activities: S,
conversations: L
}, E = [ "files", "notes", "reminders", "subtaskPositions", "subtasks", "taskComments", "taskCommentsStates" ];
return i.extend({
properties: {
collections: {}
},
initialize: function() {
var i = this;
P.initialize.apply(i, arguments), i.setupManagers(), i.loadAllFromDB(), i.initialDataLoaded = new j(), 
i.allDataLoaded = new j(), i.tasksLoaded = new j(), i.membershipsLoaded = new j(), 
i.bindOnceTo(e, "db:allTasksLoaded", i.tasksLoaded.resolve, i.tasksLoaded), i.bindOnceTo(e, "db:allMembershipsLoaded", i.membershipsLoaded.resolve, i.membershipsLoaded);
var n = [ i.tasksLoaded, i.membershipsLoaded ];
E.forEach(function(a) {
var o = i[a + "Loaded"] = new j();
n.push(o), i.bindOnceTo(e, "db:all" + t.capitalizeFirstLetter(a) + "Loaded", o.resolve, o);
}), I(n).done(i.allDataLoaded.resolve, i.allDataLoaded), i.bindToRuntime();
},
bindToRuntime: function() {
var t = this;
t.allDataLoaded.done(function() {
t.bindTo(e, "storage:updated", function(i, n) {
var a = n.split(":"), o = a[0], r = a[2];
if (o !== e.sessionID) {
var s = Array.isArray(i) && i[0];
s && r && t.onStorageUpdate(s, r);
}
}), t.bindTo(e, "storage:destroyed", function(i, n) {
var a = n.split(":"), o = a[0], r = a[2];
if (o !== e.sessionID) {
var s = Array.isArray(i) && i[0];
s && r && t.onStorageDestroy(s, r);
}
});
});
},
onStorageUpdate: function(e, t) {
var i = this, a = i.collections[e];
a && setTimeout(function() {
n.crud.read(e, {
id: t
}).then(function(e) {
if (e) {
if (e.online_id && e.online_id !== e.id) {
var i = a._byId[e.online_id];
i && i.destroy({
fromSync: !0
});
}
var n = a.get(t);
n ? (delete e.id, n.save(e, {
fromStorage: !0
})) : a.add(e, {
fromStorage: !0
});
}
});
}, 100);
},
onStorageDestroy: function(e, t) {
var i = this, n = i.collections[e];
if (n) {
var a = n._byId[t];
a && a.destroy({
fromStorage: !0,
fromSync: !0
});
}
},
getCollectionFromStoreName: function(e) {
return this.collections[e];
},
onDestroy: function() {
var e, t = this;
for (var i in B) e = t[i + "CollectionManager"], e.destroy();
},
setupManagers: function() {
var e, t, i = this, n = i.collections;
for (var r in B) e = B[r], t = i[r + "CollectionManager"] = new e(), n[r] = t.collections.all, 
t.collections.all.sort = F;
i.searchManager = new a(), i.tagsManager = new o();
},
loadAllFromDB: function() {
var t = this, i = t.collections;
e.trigger("timeline:start", "refresh_db_load"), t.collectionsArr = A.toArray(i), 
t.collectionKeys = A.keys(i), t.getCollection(0);
},
getCollection: function(t) {
var i = this, n = i.collectionsArr[t], a = i.collectionKeys[t];
i.loadCollectionFromDB(n, a).done(function() {
++t, t < i.collectionsArr.length ? i.getCollection(t) : (i.initialDataLoaded.resolve(), 
i.allDataLoaded.done(function() {
e.isSyncing = !1, e.trigger("sync:database:ended"), e.trigger("timeline:end", "refresh_db_load"), 
e.publish("db:allDataLoaded");
}));
});
},
loadCollectionFromDB: function(i, a) {
var o = this;
e.trigger("sync:database:started"), e.isSyncing = !0;
var r = new j(), s = !1, l = i.model, d = l.prototype.storeName;
return "none" !== d && d ? (n.getAll(d, function(n) {
for (var l, d = 0, c = n.length; c > d; d++) l = n[d], (!l || l.deleted_at || l["delete"]) && (n.splice(d, 1), 
--d, --c);
if ("tasks" === a) {
var u = o.loadTasksForRoute(n, i, s);
n = u[0], s = u[1], o.initialTaskIDs = n.map(function(e) {
return e.id;
});
} else if (E.indexOf(a) >= 0) {
var p = o.loadTaskResourceForRoute(a, o.initialTaskIDs, n, i, s);
n = p[0], s = p[1];
} else if ("memberships" === a) {
var m = o.loadOwnMemberships(n, i, s);
n = m[0], s = m[1];
}
o.addToCollection(n, i).done(function() {
s || e.publish("db:all" + t.capitalizeFirstLetter(a) + "Loaded"), e.publish(a + ":ready", i), 
"tasks" === a && (e.trigger("timeline:end", "user_login"), e.trigger("timeline:start", "wanted_tasks_loaded")), 
r.resolve();
});
}), r.promise()) : (e.publish(a + ":ready", i), r.resolve().promise());
},
addToCollection: function(e, t) {
function i() {
if (e.length) {
var r = e.splice(0, n);
t.add(r, o), z(i);
} else a.resolve();
}
var n = 250, a = new j(), o = {
sort: !1,
fromStorage: !0,
merge: !0
};
return z(i), a.promise();
},
loadTasksForRoute: function(t, i, n) {
var a, o = this;
if (e.isOnListRoute() && (a = e.getIdFromRoute()), e.isOnTaskRoute()) {
var r = e.getIdFromRoute(), s = A.find(t, function(e) {
return e.id === r || e.online_id === r;
});
a = s && s.list_id;
}
if (a) {
var l = new RegExp(e.smartLists.join("|"), "i");
l.test(a) && (a = "inbox");
for (var d = [], c = [], u = 0, p = t.length; p > u; u++) t[u].list_id === a || t[u].online_list_id === a ? d.push(t[u]) : c.push(t[u]);
d.length && (n = !0, t = d, I(e.hasRouted, o.initialDataLoaded).done(function() {
o.addToCollection(c, i).done(function() {
e.publish("db:allTasksLoaded");
});
}));
}
return [ t, n ];
},
loadTaskResourceForRoute: function(i, n, a, o, r) {
var s = this;
n = n || [];
for (var l, d = [], c = [], u = !1, p = 0, m = a.length; m > p; p++) l = a[p], u = n.indexOf(l.task_id) >= 0, 
u = u || n.indexOf(l.online_task_id) >= 0, u ? d.push(a[p]) : c.push(a[p]);
return d.length && (r = !0, a = d, I(e.hasRouted, s.initialDataLoaded).done(function() {
s.addToCollection(c, o).done(function() {
e.publish("db:all" + t.capitalizeFirstLetter(i) + "Loaded");
});
})), [ a, r ];
},
loadOwnMemberships: function(t, i, n) {
for (var a = this, o = [], r = [], s = "" + e.user.id, l = 0, d = t.length; d > l; l++) t[l].user_id === s ? o.push(t[l]) : r.push(t[l]);
return o.length && (n = !0, t = o, I(e.hasRouted, a.initialDataLoaded).done(function() {
a.addToCollection(r, i).done(function() {
e.publish("db:allMembershipsLoaded");
});
})), [ t, n ];
}
});
}), define("models/RootModel", [ "application/runtime", "wunderbits/WBModel", "project!core/WBDeferred" ], function(e, t, i, n) {
var a = t.prototype;
return t.extend({
storeName: "root",
defaults: {
_key: "root",
matryoshkaRevision: n
},
initialize: function() {
var e = this;
return a.initialize.apply(e, arguments), e.hasFetched = new i(), e.fetch({
success: e.onFetchSuccess.bind(e),
error: e.onFetchError.bind(e)
}), e;
},
onFetchSuccess: function() {
var t = this;
t.hasFetched.resolve(), t.trigger("ready", t), e.publish("root:ready", t);
},
onFetchError: function() {
var e = this;
e.hasFetched.resolve();
},
isIDEqual: function(e) {
return e = "" + e, "" + this.attributes.id === e;
}
});
}), define("models/UserModel", [ "project!database", "application/runtime", "vendor/moment", "collections/SubscriptionCollection", "helpers/Cookie", "helpers/Auth/facebook", "wunderbits/WBModel", "wunderbits/WBValidationHelper", "project!sdk", "project!core/WBDeferred", "project!core/lib/extend", "project!core/lib/when" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p) {
var m = t._, g = t.config, f = t.global, b = t.console, h = r.prototype, v = s, _ = new d(), w = new e.WBLocalStorage();
return r.extend({
storeName: "user",
defaults: {
_key: "wunderlist_user_1",
language: "en",
avatar: null,
token: null,
pro: !1,
terms_accepted_at: null,
group_product: null,
matryoshkaRevision: 0
},
initialize: function() {
var e = this;
return h.initialize.apply(e, arguments), e.hasFetched = new d(), e.subscriptionsReady = new d(), 
e.subscriptionCollection = new n("/subscriptions/active"), e.bindOnceTo(t, "subscriptions:ready", e.subscriptionsReady.resolve, e.subscriptionsReady), 
e.bindTo(t, "user:logout", e.logout), e.fetch({
success: e._onFetchSuccess.bind(e),
error: e._onFetchSuccess.bind(e)
}), e.authorization = _.promise(), e.bindTo(t, "day:ended", e.trackStillLoggedIn), 
e.avatarCacheTimestamp = i().unix(), e.bindTo(e, "change:avatar", function() {
e.avatarCacheTimestamp = i().unix();
}), e.bindTo(e, "deleted", function() {
w.setItem("user:logout", !0);
}), f.addEventListener("storage", function(t) {
"user:logout" === t.key && e.forceLogout();
}), e;
},
getAuthorization: function() {
var e = this, t = new d();
return e.hasFetched.done(function() {
!e.attributes.access_token || e.attributes.deleted_at ? t.reject() : (_.resolve(), 
t.resolve.apply(t, arguments));
}), t.promise();
},
isLoggedIn: function() {
var e = this, t = new d();
return e.hasFetched.done(function() {
!e.attributes.access_token || e.attributes.deleted_at ? t.reject() : t.resolve.apply(t, arguments);
}), t.promise();
},
_onFetchSuccess: function() {
var e, i = this;
i.hasFetched.resolve(), _.resolve(), t.trigger("analytics:User:previouslyLoggedIn"), 
e = -1 !== t.currentRoute().indexOf("start/") ? "login" : "normalLoad", i.trigger("ready", i), 
t.publish("user:ready", i, e);
},
validate: function(e) {
var t = this;
return e.email && e.email && !v.isValidEmail(e.email) ? t.trigger("error", "login_email_not_valid") : void 0;
},
url: function() {
return "/me";
},
registerSuccess: function(e, i) {
var n = this;
n.unset("password"), delete e.password_confirmation, e.new_user = !0, t.trigger("analytics:User:registerSuccess"), 
n.save(e, {
success: function() {
n.trigger("registered"), n.trigger("ready", n), t.trigger("browser:marketplace:add"), 
i && m.isFunction(i.success) && i.success();
}
});
},
registerFailure: function(e, i) {
var n = this;
if (n.clear(), e && e.error) {
if ("api_error_account_already_exists" === e.error.translation_key) return n.trigger("error", "api_error_account_already_exists"), 
void t.trigger("analytics:User:registerFailure", "api_error_account_already_exists");
if ("api_error_validation_error_unable_to_signup" === e.error.translation_key) return n.trigger("error", "api_error_validation_error_unable_to_signup"), 
void t.trigger("analytics:User:registerFailure", "api_error_validation_error_unable_to_signup");
if (e.error && e.translation_key) {
var a = e.translation_key;
if (a.indexOf("validation_error") > 0) return n.trigger("error", a), void t.trigger("analytics:User:registerFailure", a);
}
}
n.trigger("error", "api_error_internet_connection_error");
var o = "[" + i + "] " + (e && e.message || "No error information provided by the API");
t.trigger("analytics:User:registerFailure", o);
},
register: function(e, t) {
var i = this;
delete e.FBOauth, delete e.FBId, t = t || {}, e.password_confirmation = e.password;
var n = i.getInviteToken();
n && (e.invite_token = n, i.unsetInviteToken());
var a = l.services.auth, o = new a({
config: g,
clientID: g.clientID
}), r = o.signup(e.name, e.email, e.password, e.password_confirmation, f.navigator.language);
r.done(function() {
o.login(e.email, e.password).done(function(e) {
i.registerSuccess(e, t);
}).fail(i.registerFailure, i);
}).fail(i.registerFailure, i);
},
setInviterId: function(e) {
var i = this;
t.env.isPackagedApp() || (i.inviterId = e, w.setItem("inviterId", e));
},
unsetInviterId: function() {
t.env.isPackagedApp() || w.removeItem("inviterId");
},
getInviterId: function() {
var e, i = this;
return t.env.isPackagedApp() || (e = i.inviterId ? i.inviterId : w.getItem("inviterId")), 
e;
},
setInviteToken: function(e) {
var i = this;
t.env.isPackagedApp() || (i.inviteToken = e, w.setItem("inviteToken", e));
},
unsetInviteToken: function() {
t.env.isPackagedApp() || w.removeItem("inviteToken");
},
getInviteToken: function() {
var e, i = this;
return t.env.isPackagedApp() || (e = i.inviteToken ? i.inviteToken : w.getItem("inviteToken")), 
e;
},
loginSuccess: function(e, i) {
var n = this;
n.unset("password"), e.deleted_at = null, t.trigger("analytics:User:loginSuccess");
var a = function() {
i && "function" == typeof i.callback && i.callback(), n.trigger("loggedIn"), n.loginReady();
};
n.save(e, {
success: function() {
a();
},
error: function() {
b.log("model save error", arguments);
}
});
},
loginReady: function() {
var e = this;
e.trigger("ready", e), t.unpublish("user:ready").publish("user:ready", e, "login"), 
t.trigger("browser:marketplace:add");
},
loginFailure: function(e) {
var i = this, n = "object" == typeof e ? e : p, a = n && n.error;
a ? "incorrect_credentials" === a.type ? (t.trigger("analytics:User:loginFailure", "not_found"), 
i.trigger("error", "api_error_incorrect_login")) : a.translation_key && i.trigger("error", a.translation_key) : i.trigger("error", "api_error_connection_error"), 
i.clear();
},
login: function(e, i) {
var n = this;
if (!e.email) return n.trigger("error", "login_empty_email");
if (!e.password || e.password.length < 1) return n.trigger("error", "login_empty_password");
var a = t.config, o = l.services.auth, r = new o({
config: a,
clientID: a.clientID
});
r.login(e.email, e.password).done(function(e) {
n.loginSuccess(e, i);
}).fail(n.loginFailure.bind(n));
},
pseudoLogin: function(e) {
var i = this;
t.bindOnceTo(i, "change:token", i.loginReady), i.set({
token: e
});
},
logout: function() {
var e = this;
t.publish("user:loggingOut"), e.bindOnceTo(t, "sync:ended", function() {
t.unpublish("user:loggingOut"), e.forceLogout();
}), t.trigger("timer:stop"), t.pendingChanges() ? (b.debug("triggering a sync ..."), 
t.trigger("sync:start", !1, "logout")) : t.isSyncing ? b.debug("I think I am still syncing ...") : (b.debug("calling forceLogout"), 
e.forceLogout()), e.delay(e._checkLogoutStatus, 5e3);
},
showSocialButtons: function() {
return "CN" !== this.attributes.country;
},
forceLogout: function(e) {
"object" == typeof e && (e = "");
var i = this;
t.trigger("timer:stop"), i.clear(), i.save(), a.killCookie(), w.removeItem("wl_instance_id").always(function() {
b.debug("localStorage remove completed ..."), t.trigger("db:truncate", function() {
b.debug("db:truncate completed"), t.trigger("trackers:clear", function() {
b.debug("trackers:clear completed"), t.trigger("db:nuke"), t.unpublish("user:ready"), 
i.trigger("deleted", e);
});
});
});
},
_checkLogoutStatus: function() {
var e = this;
e.bindOnceTo(t, "user:loggingOut", function() {
t.trigger("popover:close"), m.delay(function() {
e.logOutPopoverOpen || (e.logOutPopoverOpen = !0, t.trigger("modal:confirm", {
customTitle: t.language.getLabel("logout_timeout_title").toString(),
customText: t.language.getLabel("logout_timeout_text").toString(),
confirmText: t.language.getLabel("button_log_out").toString(),
cancelText: t.language.getLabel("button_retry").toString(),
confirm: function() {
e.forceLogout();
},
cancel: function() {
e.logOutPopoverOpen = !1, e.delay(e._checkLogoutStatus, 5e3);
}
}));
}, 500);
});
},
getUserService: function() {
var e = this, t = l.services.user, i = c(g, {
accessToken: e.attributes.access_token
}), n = new t({
config: i
});
return n;
},
changePassword: function(e, t, i, n) {
var a = this;
if (n = n || {}, e !== t || !e || !t) return void a.trigger("error");
var o = a.getUserService().changePassword(e, i);
o.done(function() {
n.success && n.success();
}).fail(function() {
n.error && n.error();
});
},
forgotPassword: function(e, t) {
var i = l.services.forgot_password, n = new i({
config: g
});
n.requestReset(e.email).done(function() {
t.success();
}).fail(function(e) {
var i = e && e.error && e.error.translation_key;
t.error(i ? "login_email_not_valid" : "api_error_connection_error");
});
},
changeName: function(e, t) {
var i = this, n = i.attributes, a = n.name;
t = t || {}, i.getUserService().update(n.revision, e).done(function(e) {
i.save({
name: e.name
}, {
fromSync: !0
}), t.success && t.success(e);
}).fail(function(e) {
i.save({
name: a
}), t.error && t.error(e);
});
},
changeEmail: function(e, t, i) {
i = i || {};
var n = this, a = n.attributes, o = a.email;
n.getUserService().changeEmail(e, t).done(function(e) {
n.save({
email: e.email
}, {
fromSync: !0
}), i.success && i.success(e);
}).fail(function(e) {
n.save({
email: o
}), i.error && i.error(e);
});
},
deleteUser: function(e, i) {
var n = this;
i = i || {}, t.trigger("analytics:User:deleteAccount"), n.getUserService().deleteSelf(e).done(function() {
n.forceLogout();
}).fail(function(e) {
i.error(e);
});
},
loginWithOAuthToken: function(e, i) {
var n = this, a = new d();
i || (i = {});
var o = {
oauth_provider: i.providerType,
oauth_access_token: e
};
return "google" === o.oauth_provider && (o.gmail = !0), n.isLoggedIn().fail(function() {
t.io.post("/login", o).success(function(e) {
n.loginWithOAuthTokenSuccess(e, a);
}).error(function() {
i.error && i.error(), a.reject();
});
}), a.promise();
},
loginWithOAuthTokenSuccess: function(e, i) {
var n = this;
n.unset("oauth_access_token"), e.deleted_at = null, n.save(e, {
success: function() {
n.trigger("ready", n), t.unpublish("user:ready").publish("user:ready", n, "login"), 
i.resolve();
},
error: function() {
i.reject();
}
});
},
loginWithFacebookSuccess: function(e, i) {
var n = this;
n.unset("oauth_access_token"), e.deleted_at = null, n.save(e, {
success: function() {
n.trigger("ready", n), t.unpublish("user:ready").publish("user:ready", n, "login"), 
i.resolve();
},
error: function() {
i.reject();
}
});
},
loginWithFacebookOAuth: function(e, i) {
var n = this, a = new d();
i || (i = {});
var o = {
oauth_access_token: e
};
return n.isLoggedIn().fail(function() {
t.io.post("/login", o).success(function(e) {
n.loginWithFacebookSuccess(e, a);
}).error(function() {
i.error && i.error(), a.reject();
});
}), a.promise();
},
getAvatarURL: function(e, t) {
var i = this;
return t = t || 128, g.api.host + "/v1/avatar?user_id=" + i.id + "&size=" + t + "&timestamp=" + i.avatarCacheTimestamp + (e ? "&fallback=false" : "");
},
cancelProAutoRenew: function(e, n) {
var a = this;
t.sdk.getServices().done(function(t) {
var o = a.subscriptionCollection.get(a.attributes.individualSubscription), r = o.attributes.revision;
t.http.subscriptions.update(parseInt(o.id, 10), r, {
canceled_at: i().sod().valueOf()
}).done(e).fail(n);
});
},
isPro: function() {
var e = this;
return !!e.attributes.pro;
},
getAdminName: function() {
return t.user.attributes.product.admin && t.user.attributes.product.admin.name;
},
isProTeamMember: function() {
var e, t = this, i = t.attributes, n = i.teamSubscription;
return u(t.subscriptionsReady).done(function() {
e = t.subscriptionCollection.get(n);
}), !!e && !t.isIDEqual(e.attributes.admin.id);
},
isProTeamAdmin: function() {
return this.attributes.isAdmin;
},
trackStillLoggedIn: function() {
var e = this;
e.attributes.access_token && t.trigger("analytics:User:previouslyLoggedIn", "newDay");
},
isIDEqual: function(e) {
return e = "" + e, "" + this.attributes.id === e;
}
});
}), define("models/data/DefaultSettings", {
id: "userSettings",
type: "userSettings",
language: "en_US",
date_format: "DD.MM.YYYY",
start_of_week: "sun",
enable_natural_date_recognition: "true",
new_task_location: "top",
behavior_star_tasks_to_top: "true",
confirm_delete_entity: "true",
print_completed_items: "false",
time_format: "12 hour",
account_locale: "en",
migrated_wunderlist_one_user: "true",
add_to_chrome: "false",
add_to_firefox: "false",
app_first_used: "false",
significant_event_count: "0",
new_installation: "false",
last_open_app_date: "0",
chrome_rating_later: "undefined",
chrome_app_rating_later: "undefined",
shortcut_delete: "CTRL + BACKSPACE",
shortcut_add_new_list: "CTRL + L",
shortcut_goto_inbox: "CTRL + I",
shortcut_add_new_task: "CTRL + N",
shortcut_mark_task_done: "CTRL + D",
shortcut_mark_task_starred: "CTRL + S",
shortcut_goto_search: "CTRL + F",
shortcut_goto_filter_assigned: "CTRL + 1",
shortcut_goto_filter_starred: "CTRL + 2",
shortcut_goto_filter_today: "CTRL + 3",
shortcut_goto_filter_week: "CTRL + 4",
shortcut_goto_filter_all: "CTRL + 5",
shortcut_goto_filter_completed: "CTRL + 6",
shortcut_goto_preferences: "CTRL + P",
shortcut_show_notifications: "CTRL + SHIFT + A",
shortcut_select_all_tasks: "CTRL + A",
shortcut_copy_tasks: "CTRL + C",
shortcut_paste_tasks: "CTRL + V",
shortcut_send_via_email: "CTRL + E",
shortcut_sync: "R",
smartlist_visibility_starred: "auto",
smartlist_visibility_all: "hidden",
smartlist_visibility_today: "auto",
smartlist_visibility_done: "hidden",
smartlist_visibility_week: "auto",
smartlist_visibility_assigned_to_me: "auto",
today_smart_list_visible_tasks: "all",
background: "wlbackground06",
automatic_reminders: "on",
notifications_email_enabled: "true",
notifications_push_enabled: "true",
notifications_desktop_enabled: "true",
sound_checkoff_enabled: "true",
sound_notification_enabled: "true",
newsletter_subscription_enabled: "false",
show_completed_items: "true",
pro_trial_limit_assigning: "3",
pro_trial_limit_files: "3",
pro_trial_limit_comments: "10",
onboarding_add_todo: "false",
onboarding_click_share_list: "false",
onboarding_click_create_list: "false"
}), define("models/UserSettingsModel", [ "application/runtime", "./data/DefaultSettings", "wunderbits/helpers/strings", "wunderbits/helpers/date", "wunderbits/WBModel", "project!core/WBDeferred" ], function(e, t, i, n, a, o, r) {
var s = e._, l = a.prototype, d = i, c = (e.global.navigator.language || "en").substr(0, 2).toLowerCase(), u = t;
return u.time_format = n.getDefaultTimeFormat(c), u._locale = c, a.extend({
defaults: s.clone(u),
initialize: function() {
var t = this;
return l.initialize.apply(t, arguments), t.ready = new o(), t.hasFetched = new o(), 
t.bindOnceTo(e, "sync:ended", "_checkDefaultCompatibility"), t.bindTo(e, "settings:ready", "_fetchSuccess"), 
t.bindTo(t, "change", "checkShortcutValues"), t;
},
resetShortcuts: function() {
var e = this, t = {};
s.each(e.defaults, function(e, i) {
/^shortcut_/.test(i) && (t[i] = e);
}), e.save(t), e.defer("_checkDefaultCompatibility");
},
set: function(e, t, i) {
var n = this;
if (s.isObject(e)) s.each(e, function(t, i) {
if (s.isObject(t)) throw new Error("Cannot set nested object as value");
var n = null === t || t === r;
e[i] = n ? null : d.convertValueToString(t);
}); else {
var a = null === t || t === r;
t = a ? null : d.convertValueToString(t);
}
return l.set.call(n, e, t, i), n;
},
_checkDefaultCompatibility: function(e) {
var t = this, i = [ "shortcut_add_new_task", "shortcut_goto_preferences" ];
s.each(i, function(i) {
if (t.defaults[i] === t.get(i)) {
var n = t["_getDefault_" + i];
if (s.isFunction(n)) {
var a = n.call(t), o = {};
o[i] = a, t[e ? "save" : "set"](o);
}
}
});
},
_getDefault_shortcut_add_new_task: function() {
var t;
return t = e.env.isWindows() && e.env.isChrome() ? "CTRL + 0" : "CTRL + N";
},
_getDefault_shortcut_goto_preferences: function() {
var t;
return t = e.env.isWindows() && e.env.isIE() || e.env.isNodeWebkit() ? "CTRL + M" : "CTRL + P";
},
_fetchSuccess: function() {
var t = this;
t.trigger("change:background"), t.hasFetched.resolve(), e.user.attributes.loginSuccessful ? t.ready.resolve() : t.bindOnceTo(e.user, "change:loginSuccessful", function() {
t.ready.resolve();
});
},
isSettingSet: function(e) {
return "true" === this.get(e);
},
isTouchEnabled: function() {
var t = e.env.getEnvIdentifier();
return "1" === this.attributes[t];
},
isScopedFiltersEnabled: function() {
var e = "today_smart_list_visible_tasks";
return "current_user" === this.attributes[e];
},
checkShortcutValues: function() {
var e = this, t = e.changedAttributes(), i = [];
s.each(t, function(t, n) {
0 === n.indexOf("shortcut_") && (i.push(n), s.each(e.attributes, function(i, a) {
0 === a.indexOf("shortcut_") && n !== a && i === t && e.set(a, "INVALID");
}));
});
},
isAbleToSync: function() {
return !0;
}
});
}), define("models/LanguageModel", [ "application/runtime", "wunderbits/WBModel", "project!core/WBDeferred" ], function(e, t, i) {
var n = t.prototype;
return t.extend({
defaults: {
id: "wunderlist_language",
code: "en"
},
initialize: function() {
var e = this;
return n.initialize.apply(e, arguments), e.ready = new i(), e;
},
url: function() {
return "/languages";
}
});
}), define("helpers/TrackingService", [ "application/runtime", "wunderbits/helpers/date", "wunderbits/helpers/SafeParse", "project!database", "project!sdk", "project!sync", "project!core/lib/createUID", "project!core/WBSingleton", "project!core/WBDeferred" ], function(e, t, i, n, a, o, r, s, l) {
var d = new n.WBLocalStorage(), c = e.config, u = e._;
return s.extend({
ready: new l(),
init: function() {
var t = this;
t.tryToUploadOutOfAppEvent = u.debounce(t.tryToUploadOutOfAppEvent, 500), t.trackEvent = t.trackEvent.bind(t), 
e.ready.done(function() {
e.on("trackingService", t.trackEvent), e.on("page:visible", t.trackAppVisible), 
t.trackAppVisible(), d.getItem("wl_uuid").done(function(e) {
e ? (t.uuid = e, t.ready.resolve()) : t.createNewUUID();
}).fail(function() {
t.createNewUUID();
});
});
},
trackAppVisible: function() {
e.trigger("trackingService", "UI.Show", "App");
},
createNewUUID: function() {
var e = this;
e.uuid = r(), d.setItem("wl_uuid", e.uuid).always(e.ready.resolve, e.ready);
},
trackEvent: function(e, i) {
var n = this, a = {
event: e,
time: t.ISOString(new Date())
};
return i && (a.params = {
element: i
}), n.addEventToOutOfAppQueue(a);
},
getUserEventsService: function() {
var e = this;
if (!e.userEventsService) {
var t = a.services.userEvents, i = o.helpers.headers;
c.extendHeaders = function(t) {
i.extendHeaders(t), t["x-client-device-id"] = e.uuid;
}, e.userEventsService = new t({
config: c,
clientID: c.clientID
}), a.headers.init(c);
}
return e.userEventsService;
},
createOutOfAppQueue: function() {
var e = new l(), t = [];
return d.setItem("wl_events_queue", JSON.stringify(t)).always(function() {
e.resolve(t);
}), e.promise();
},
getOutOfAppQueue: function() {
function e() {
t.createOutOfAppQueue().done(n.resolve, n);
}
var t = this, n = new l();
return d.getItem("wl_events_queue").done(function(t) {
var a = i.json(t);
Array.isArray(a) ? n.resolve(a) : e();
}).fail(e, t), n.promise();
},
updateOutOfAppQueue: function(e) {
return d.setItem("wl_events_queue", JSON.stringify(e));
},
addEventToOutOfAppQueue: function(e) {
var t = this;
e.id = t.uuid + r(), t.getOutOfAppQueue().done(function(i) {
i.push(e), t.updateOutOfAppQueue(i).done(t.tryToUploadOutOfAppEvent, t);
});
},
tryToUploadOutOfAppEvent: function() {
var e = this;
e.uploadOutOfAppEvent();
},
uploadOutOfAppEvent: function() {
var e = this;
e.uploadingOutOfAppEvent ? e.shouldTryToUploadOutOfAppEvent = !0 : (e.uploadingOutOfAppEvent = !0, 
e.getOutOfAppQueue().done(function(t) {
var i = t.shift(), n = "[object Object]" === Object.prototype.toString.call(i);
if (n) {
var a = e.getUserEventsService();
a.create(i, i.id).done(function() {
e.updateOutOfAppQueue(t);
}).always(function() {
e.uploadingOutOfAppEvent = !1, e.shouldTryToUploadOutOfAppEvent && u.defer(function() {
e.tryToUploadOutOfAppEvent();
});
});
} else e.uploadingOutOfAppEvent = !1, t.length && u.defer(function() {
e.tryToUploadOutOfAppEvent();
});
}));
}
});
}), define("backend/Sync/Mixins/ScopedCollections", [ "project!core/WBMixin", "wunderbits/helpers/strings", "wunderbits/collections/WBCollection" ], function(e, t, i) {
var n = i.collections;
return e.extend({
getScopedCollection: function(e, t, i, a) {
var o = this, r = o.getScopedCollectionURL(e, t, i), s = n[r];
return a && a(s), s;
},
getScopedCollectionURL: function(e, t, i) {
var n, a = this, o = [ "feature", "service", "setting", "subscription", "user" ];
if (o.indexOf(e) > -1 && (t = i = void 0), e && t && i) {
t = a.mapScopeType(t, e);
var r = a.normalizeCollectionType(t), s = "" + i, l = a.collections[r], d = l && l.get(s), c = d ? d.id : s;
n = "/" + a.formatScopedType(t) + "/" + c + "/" + a.formatScopedType(e);
} else e && (n = "/" + a.formatScopedType(e) + "/all");
return n;
},
mapScopeType: function(e, t) {
var i = {
reminder: "list",
task_comments_state: "list"
};
return i[t] ? i[t] : e;
},
formatScopedType: function(e) {
var i = this, n = e.split("_");
n.forEach(function(e, i) {
n[i] = i > 0 ? t.capitalizeFirstLetter(e) : e;
});
var a = n.join("");
return i.normalizeCollectionType(a);
}
});
}), define("backend/Sync/Mixins/UtilityFunctions", [ "project!core/WBMixin" ], function(e) {
return e.extend({
normalizeCollectionType: function(e) {
return "s" === e[e.length - 1] ? e : e + "s";
}
});
}), define("backend/Sync/DataProcessors/Incoming/CollectionsByType", [ "collections/FeatureCollection", "collections/FileCollection", "collections/ListCollection", "collections/FolderCollection", "collections/Positions/ListPositionsCollection", "collections/MembershipCollection", "collections/NotificationCollection", "collections/TaskCollection", "collections/TaskCommentsCollection", "collections/TaskCommentsStateCollection", "collections/Positions/TaskPositionsCollection", "collections/TasksCountCollection", "collections/ReminderCollection", "collections/ServiceCollection", "collections/SettingCollection", "collections/SubtaskCollection", "collections/Positions/SubtaskPositionsCollection", "collections/NoteCollection", "collections/UserCollection", "collections/UnreadActivitiesCountCollection", "collections/SubscriptionCollection" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m, g, f, b, h, v, _, w) {
var k = {
desktop_notifications: new r("/desktopNotifications/all"),
features: new e("/features/all"),
files: new t("/files/all"),
lists: new i("/lists/all"),
folders: new n("/folders/all"),
list_positions: new a("/listPositions/all"),
memberships: new o("/memberships/all"),
notes: new h("/notes/all"),
reminders: new p("/reminders/all"),
services: new m("/services/all"),
settings: new g("/settings/all"),
subtasks: new f("/subtasks/all"),
subtask_positions: new b("/subtaskPositions/all"),
tasks: new s("/tasks/all"),
task_comments: new l("/taskComments/all"),
task_comments_states: new d("/taskCommentsStates/all"),
task_positions: new c("/taskPositions/all"),
tasks_counts: new u("/tasksCounts/all"),
users: new v("/users/all"),
unread_activities_counts: new _("/unreadActivitiesCounts/all"),
subscriptions: new w("/subscriptions/all")
}, x = {
desktop_notification: k.desktop_notifications,
assignee: k.users,
created_by: k.users,
feature: k.features,
file: k.files,
list: k.lists,
folder: k.folders,
list_position: k.list_positions,
membership: k.memberships,
note: k.notes,
reminder: k.reminders,
sender: k.users,
service: k.services,
setting: k.settings,
subtask: k.subtasks,
subtask_position: k.subtask_positions,
task: k.tasks,
task_comment: k.task_comments,
last_read: k.task_comments,
task_comments_state: k.task_comments_states,
task_position: k.task_positions,
tasks_count: k.tasks_counts,
user: k.users,
unread_activities_count: k.unread_activities_counts,
subscription: k.subscriptions
};
return x;
}), define("backend/Sync/DataProcessors/Incoming/Base", [ "project!core/WBClass", "./CollectionsByType" ], function(e, t) {
return e.extend({
type: void 0,
remapIDTypes: [],
collections: t,
processData: function(e) {
var t = this;
return e = t.remapIDs(e);
},
remapIDs: function(e) {
var t = this;
return "id" in e && (e = t.remapID(e)), t.remapIDTypes.forEach(function(i) {
i + "_id" in e && (e = t.remapIDofType(e, i));
}), e;
},
remapID: function(e) {
var t = this;
e.id = "" + e.id, e.online_id = e.id;
var i = t.collections[t.type], n = i.get(e.id);
return n && e.id !== n.id && (e.id = n.id), e;
},
remapIDofType: function(e, t) {
var i = this, n = t ? t + "_id" : "id";
if (void 0 !== e[n]) {
var a = "online_" + n;
e[n] = "" + e[n], e[a] = e[n];
var o = i.collections[t], r = o.get(e[n]);
r && (e[n] = r.id);
}
return e;
}
});
}), define("backend/Sync/DataProcessors/Incoming/DesktopNotification", [ "backend/Sync/DataProcessors/Incoming/Base" ], function(e) {
return e.extend({
type: "desktop_notification"
});
}), define("backend/Sync/DataProcessors/Incoming/Feature", [ "backend/Sync/DataProcessors/Incoming/Base" ], function(e) {
return e.extend({
type: "feature"
});
}), define("backend/Sync/DataProcessors/Incoming/File", [ "./Base" ], function(e) {
return e.extend({
type: "file",
remapIDTypes: [ "list", "task", "user" ]
});
}), define("backend/Sync/DataProcessors/Incoming/List", [ "backend/Sync/DataProcessors/Incoming/Base" ], function(e) {
var t = e.prototype;
return e.extend({
type: "list",
remapIDs: function(e) {
var i = this;
return e = t.remapIDs.call(i, e), "list_type" in e && "inbox" === e.list_type && (e.id = "inbox"), 
e;
}
});
}), define("backend/Sync/DataProcessors/Incoming/Folder", [ "backend/Sync/DataProcessors/Incoming/Base" ], function(e) {
var t = e.prototype;
return e.extend({
type: "folder",
processData: function(e) {
var i = this;
return e = t.processData.call(i, e), e.list_ids && (e.list_ids = i._mapListIDsToLocalIDs(e.list_ids)), 
delete e.position, e;
},
_mapListIDsToLocalIDs: function(e) {
var t = this, i = t.collections.list;
return e.map(function(e) {
var t = i.get(e);
return "" + (t ? t.id : e);
});
}
});
}), define("backend/Sync/DataProcessors/Incoming/PositionBase", [ "backend/Sync/DataProcessors/Incoming/Base", "project!core/lib/clone" ], function(e, t) {
return e.extend({
parentType: void 0,
valueType: void 0,
processData: function(e) {
var t = this;
return e = t.remapIDs(e), t.parentType && (e = t.remapIDByParentLookup(e)), "values" in e && Array.isArray(e.values) && (e = t.remapValuesIDs(e), 
e = t.spliceInLocalIDs(e)), e;
},
remapIDByParentLookup: function(e) {
var t = this, i = t.collections[t.type], n = t.parentType + "_id", a = e[n], o = t.collections[t.parentType], r = o && o.get(a), s = {};
s[n] = r ? r.id : a;
var l = s[n] && i.findWhere(s);
return l && (e.id = l.id), e;
},
remapValuesIDs: function(e) {
for (var i, n, a = this, o = a.collections[a.valueType], r = e.values, s = 0, l = r.length; l > s; s++) i = "" + r[s], 
n = o.get(i), r[s] = n ? n.id : i;
return e.values = r, e.remoteValues = t(r), e;
},
spliceInLocalIDs: function(e) {
var i = this, n = i.collections[i.type], a = n.get(e.id), o = e.values;
if (a) {
var r = a.attributes.localValues, s = a.attributes.syncedIDs || [];
i.iterateAndSplice(o, r, s);
}
return e.localValues = t(o), e;
},
iterateAndSplice: function(e, t, i) {
var n = this;
t.forEach(function(a) {
n.spliceInLocalID(a, e, t, i);
});
},
spliceInLocalID: function(e, t, i, n) {
var a = this, o = i.indexOf(e), r = a.isIDSynced(e, n), s = {
localBeforeIndex: void 0,
localAfterIndex: void 0,
localBeforeID: void 0,
localAfterID: void 0
};
r ? a.getIDsAndIndexesRelativeToRemoteValues(e, t, s) : a.getIDsAndIndexesRelativeToLocalValues(o, i, s), 
a.cleanOutLocalID(e, t);
var l = s.localBeforeID ? t.indexOf(s.localBeforeID) : -1, d = s.localAfterID ? t.indexOf(s.localAfterID) : -1;
r && s.localBeforeID && l >= 0 ? t.splice(l + 1, 0, e) : r && s.localAfterID && d >= 0 ? a.insertBeforeRemoteValue(t, d, e) : 0 === o ? t.unshift(e) : a.spliceRelativeToLocalValuesOnly(o, t, i, e);
},
getIDsAndIndexesRelativeToLocalValues: function(e, t, i) {
var n = i.localBeforeIndex = 0 !== e && e - 1, a = i.localAfterIndex = e !== t.length - 1 && e + 1;
i.localBeforeID = n ? t[n] : void 0, i.localAfterID = a ? t[a] : void 0;
},
getIDsAndIndexesRelativeToRemoteValues: function(e, t, i) {
var n = t.indexOf(e), a = i.localBeforeIndex = 0 !== n && n - 1, o = i.localAfterIndex = n !== t.length - 1 && n + 1;
i.localBeforeID = a ? t[a] : void 0, i.localAfterID = o ? t[o] : void 0;
},
cleanOutLocalID: function(e, t) {
var i = t.indexOf(e);
i >= 0 && t.splice(i, 1);
},
insertBeforeRemoteValue: function(e, t, i) {
0 === t ? e.unshift(i) : e.splice(t, 0, i);
},
spliceRelativeToLocalValuesOnly: function(e, t, i, n) {
var a = i[e - 1], o = t.indexOf(a);
t.splice(o + 1, 0, n);
},
isIDSynced: function(e, t) {
return /^lw/.test(e) ? t.indexOf(e) >= 0 : !0;
},
logValues: function(e, t) {
var i = this, n = t.map(function(e) {
var t = i.collections[i.valueType].get("" + e);
return t ? t.attributes.title : e;
});
console.debug(e, n);
}
});
}), define("backend/Sync/DataProcessors/Incoming/ListPosition", [ "./PositionBase" ], function(e) {
return e.extend({
type: "list_position",
valueType: "list"
});
}), define("backend/Sync/DataProcessors/Incoming/ListChildResource", [ "./Base" ], function(e) {
return e.extend({
remapIDTypes: [ "list", "created_by", "assignee" ]
});
}), define("backend/Sync/DataProcessors/Incoming/Membership", [ "backend/Sync/DataProcessors/Incoming/ListChildResource" ], function(e) {
return e.extend({
type: "membership",
remapIDTypes: [ "list", "user", "sender" ]
});
}), define("backend/Sync/DataProcessors/Incoming/TaskChildResource", [ "./Base" ], function(e) {
return e.extend({
remapIDTypes: [ "task", "list" ]
});
}), define("backend/Sync/DataProcessors/Incoming/Note", [ "./TaskChildResource" ], function(e) {
return e.extend({
type: "note"
});
}), define("backend/Sync/DataProcessors/Incoming/Reminder", [ "./TaskChildResource" ], function(e) {
return e.extend({
type: "reminder"
});
}), define("backend/Sync/DataProcessors/Incoming/Service", [ "backend/Sync/DataProcessors/Incoming/Base" ], function(e) {
return e.extend({
type: "service"
});
}), define("backend/Sync/DataProcessors/Incoming/Setting", [ "./Base", "../CrossClientSettings" ], function(e, t) {
var i = /^web_/;
return e.extend({
type: "setting",
processData: function(e) {
var t = this;
return e = t.remapID(e), e = t.remapKeys(e);
},
remapKeys: function(e) {
var n, a = this, o = {}, r = e.key, s = e.value;
if (!r) {
var l = a.collections.setting.get(e.id);
if (l) {
var d = l.attributes;
r = d.web ? "web_" + d.key : d.key;
}
}
return r && i.test(r) ? (n = r.replace(i, ""), t[n] || (o.key = n, "value" in e && (o.value = s), 
o.web = !0)) : r && t[r] && (o.key = r, "value" in e && (o.value = s), o.web = !1), 
a.mapImportantSettingsAttributes(e, o), o;
},
mapImportantSettingsAttributes: function(e, t) {
return Object.keys(t).length && [ "id", "online_id", "revision", "matryoshkaRevision", "type" ].forEach(function(i) {
void 0 !== e[i] && (t[i] = e[i]);
}), t;
}
});
}), define("backend/Sync/DataProcessors/Incoming/Subtask", [ "./TaskChildResource" ], function(e) {
return e.extend({
type: "subtask"
});
}), define("backend/Sync/DataProcessors/Incoming/SubtaskPosition", [ "./PositionBase" ], function(e) {
return e.extend({
type: "subtask_position",
parentType: "task",
remapIDTypes: [ "task" ],
valueType: "subtask"
});
}), define("backend/Sync/DataProcessors/Incoming/Task", [ "backend/Sync/DataProcessors/Incoming/ListChildResource" ], function(e) {
var t = e.prototype;
return e.extend({
type: "task",
importantAttributes: [ "assignee_id", "due_date", "recurrence_type", "recurrence_count", "recurring_parent_id" ],
processData: function(e, i) {
var n = this;
return e = t.processData.apply(n, arguments), i && (e = n.checkForMissingImportantAttributes(e)), 
e;
},
checkForMissingImportantAttributes: function(e) {
return this.importantAttributes.forEach(function(t) {
t in e || (e[t] = void 0);
}), e;
}
});
}), define("backend/Sync/DataProcessors/Incoming/TaskComment", [ "./TaskChildResource" ], function(e) {
return e.extend({
type: "task_comment"
});
}), define("backend/Sync/DataProcessors/Incoming/TaskCommentsState", [ "./Base" ], function(e) {
return e.extend({
type: "task_comments_state",
remapIDTypes: [ "task", "list", "last_read" ]
});
}), define("backend/Sync/DataProcessors/Incoming/TaskPosition", [ "./PositionBase" ], function(e) {
return e.extend({
type: "task_position",
parentType: "list",
remapIDTypes: [ "list" ],
valueType: "task"
});
}), define("backend/Sync/DataProcessors/Incoming/TasksCount", [ "./Base" ], function(e) {
return e.extend({
type: "tasks_count",
remapIDTypes: [ "list" ]
});
}), define("backend/Sync/DataProcessors/Incoming/User", [ "backend/Sync/DataProcessors/Incoming/Base" ], function(e) {
return e.extend({
type: "user"
});
}), define("backend/Sync/DataProcessors/Incoming/UnreadActivitiesCount", [ "./Base" ], function(e) {
return e.extend({
type: "unread_activities_count"
});
}), define("backend/Sync/DataProcessors/Incoming/Subscription", [ "backend/Sync/DataProcessors/Incoming/Base" ], function(e) {
return e.extend({
type: "subscription"
});
}), define("backend/Sync/DataProcessors/Incoming", [ "project!core/WBClass", "./Incoming/DesktopNotification", "./Incoming/Feature", "./Incoming/File", "./Incoming/List", "./Incoming/Folder", "./Incoming/ListPosition", "./Incoming/Membership", "./Incoming/Note", "./Incoming/Reminder", "./Incoming/Service", "./Incoming/Setting", "./Incoming/Subtask", "./Incoming/SubtaskPosition", "./Incoming/Task", "./Incoming/TaskComment", "./Incoming/TaskCommentsState", "./Incoming/TaskPosition", "./Incoming/TasksCount", "./Incoming/User", "./Incoming/UnreadActivitiesCount", "./Incoming/Subscription" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m, g, f, b, h, v, _, w, k) {
return e.extend({
processors: {
desktop_notification: new t(),
feature: new i(),
file: new n(),
list: new a(),
folder: new o(),
list_position: new r(),
membership: new s(),
note: new l(),
reminder: new d(),
service: new c(),
setting: new u(),
subtask: new p(),
subtask_position: new m(),
task: new g(),
task_comment: new f(),
task_comments_state: new b(),
task_position: new h(),
tasks_count: new v(),
user: new _(),
unread_activities_count: new w(),
subscription: new k()
},
processData: function(e, t) {
var i = this, n = i.processors[e.type];
return n ? e = n.processData(e, t) : console.warn("no incomming processor defined for type", e.type), 
e;
}
});
}), define("backend/Sync/DataProcessors/Outgoing/Base", [ "project!core/WBClass", "collections/FileCollection", "collections/ListCollection", "collections/FolderCollection", "collections/Positions/ListPositionsCollection", "collections/MembershipCollection", "collections/TaskCollection", "collections/TaskCommentsCollection", "collections/TaskCommentsStateCollection", "collections/Positions/TaskPositionsCollection", "collections/ReminderCollection", "collections/ServiceCollection", "collections/SettingCollection", "collections/SubtaskCollection", "collections/Positions/SubtaskPositionsCollection", "collections/NoteCollection", "collections/UserCollection" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m, g, f, b) {
var h = {
files: new t("/files/all"),
lists: new i("/lists/all"),
folders: new n("/folders/all"),
list_positions: new a("/listPositions/all"),
memberships: new o("/memberships/all"),
notes: new f("/notes/all"),
reminders: new c("/reminders/all"),
services: new u("/services/all"),
settings: new p("/settings/all"),
subtasks: new m("/subtasks/all"),
subtask_positions: new g("/subtaskPositions/all"),
tasks: new r("/tasks/all"),
task_comments: new s("/taskComments/all"),
task_comments_states: new l("/taskCommentsStates/all"),
task_positions: new d("/taskPositions/all"),
users: new b("/users/all")
};
return e.extend({
type: void 0,
remapIDTypes: [],
collections: {
assignee: h.users,
created_by: h.users,
file: h.files,
list: h.lists,
folder: h.folders,
list_position: h.list_positions,
membership: h.memberships,
note: h.notes,
reminder: h.reminders,
sender: h.users,
service: h.services,
setting: h.settings,
subtask: h.subtasks,
subtask_position: h.subtask_positions,
task: h.tasks,
task_comment: h.task_comments,
task_comments_state: h.task_comments_states,
last_read: h.task_comments,
task_position: h.task_positions,
user: h.users
},
processData: function(e) {
var t = this;
return e = t.remapIDs(e);
},
remapIDs: function(e) {
var t = this;
return "id" in e && (e = t.remapID(e)), t.remapIDTypes.forEach(function(i) {
i + "_id" in e && (e = t.remapIDofType(e, i));
}), e;
},
remapID: function(e) {
var t = this, i = t.collections[t.type], n = i.get(e.id);
return n && n.attributes.online_id && (e.id = n.attributes.online_id, e.id = parseInt(e.id, 10)), 
e;
},
remapIDofType: function(e, t) {
var i = this, n = t + "_id", a = i.collections[t], o = a.get(e[n]);
return o && (e[n] = o.attributes.online_id), e[n] = parseInt(e[n], 10), ("number" != typeof e[n] || isNaN(e[n])) && (e[n] = null), 
e;
}
});
}), define("backend/Sync/DataProcessors/Outgoing/File", [ "./Base" ], function(e) {
var t = e.prototype, i = [ "type", "id", "content_type", "file_icon", "file_name", "file_size", "file_provider", "local_created_at", "task_id", "upload_id", "url" ];
return e.extend({
type: "file",
processData: function(e) {
var n = this;
e = t.processData.apply(n, arguments);
for (var a in e) i.indexOf(a) < 0 && delete e[a];
return e;
},
remapIDTypes: [ "list", "task", "user" ]
});
}), define("backend/Sync/DataProcessors/Outgoing/List", [ "./Base" ], function(e) {
return e.extend({
type: "list"
});
}), define("backend/Sync/DataProcessors/Outgoing/Folder", [ "./Base" ], function(e) {
var t = e.prototype;
return e.extend({
type: "folder",
processData: function(e) {
var i = this;
return e = t.processData.call(i, e), e.list_ids && (e.list_ids = i._mapListIDsToOnlineID(e.list_ids)), 
delete e.position, delete e.expanded, e;
},
_mapListIDsToOnlineID: function(e) {
var t = this, i = t.collections.list, n = e.map(function(e) {
var t = i.get(e), n = t && t.attributes.online_id;
return n && parseInt(n, 10);
}), a = n.filter(function(e) {
return void 0 !== e;
});
return a;
}
});
}), define("backend/Sync/DataProcessors/Outgoing/PositionBase", [ "backend/Sync/DataProcessors/Outgoing/Base" ], function(e) {
return e.extend({
valueType: void 0,
processData: function(e) {
var t = this;
return e = t.remapIDs(e), "values" in e && Array.isArray(e.values) && (e = t.remapValuesIDs(e)), 
e;
},
remapValuesIDs: function(e) {
for (var t, i, n, a = this, o = a.collections[a.valueType], r = e.values, s = !1, l = [], d = 0, c = r.length; c > d; d++) t = r[d], 
i = o.get(t), i && i.attributes.online_id && (n = parseInt(i.attributes.online_id, 10), 
!isNaN(n) && l.push(n));
if (l.length) {
var u = a.collections[a.type].get(e.id), p = u.attributes.remoteValues;
l.forEach(function(e, t) {
e !== p[t] && (s = !0);
});
}
return s ? e.values = l : delete e.values, e.localValues && delete e.localValues, 
e.remoteValues && delete e.remoteValues, e.syncedIDs && delete e.syncedIDs, e;
},
logValues: function(e, t) {
var i = this, n = t.map(function(e) {
var t = i.collections[i.valueType].get("" + e);
return t ? t.attributes.title : e;
});
console.debug(e, n);
}
});
}), define("backend/Sync/DataProcessors/Outgoing/ListPosition", [ "./PositionBase" ], function(e) {
return e.extend({
type: "list_position",
valueType: "list"
});
}), define("backend/Sync/DataProcessors/Outgoing/ListChildResource", [ "./Base" ], function(e) {
return e.extend({
remapIDTypes: [ "list", "created_by", "assignee" ]
});
}), define("backend/Sync/DataProcessors/Outgoing/Membership", [ "./ListChildResource" ], function(e) {
return e.extend({
type: "membership",
remapIDTypes: [ "list", "user", "sender" ]
});
}), define("backend/Sync/DataProcessors/Outgoing/TaskChildResource", [ "./Base" ], function(e) {
return e.extend({
remapIDTypes: [ "task", "list" ]
});
}), define("backend/Sync/DataProcessors/Outgoing/Note", [ "./TaskChildResource" ], function(e) {
return e.extend({
type: "note"
});
}), define("backend/Sync/DataProcessors/Outgoing/Reminder", [ "./TaskChildResource" ], function(e) {
var t = e.prototype;
return e.extend({
type: "reminder",
processData: function() {
var e = this, i = t.processData.apply(e, arguments);
return delete i.reminded, i;
}
});
}), define("backend/Sync/DataProcessors/Outgoing/Setting", [ "./Base", "../CrossClientSettings", "project!core/lib/clone" ], function(e, t) {
return e.extend({
type: "setting",
processData: function(e, t) {
var i = this;
return e = i.remapID(e), e = "add" === t ? i.remapKey(e) : e, delete e.web, e;
},
remapKey: function(e) {
var i = e.key;
return t[i] || (e.key = "web_" + i), e;
}
});
}), define("backend/Sync/DataProcessors/Outgoing/Subtask", [ "./TaskChildResource" ], function(e) {
return e.extend({
type: "subtask"
});
}), define("backend/Sync/DataProcessors/Outgoing/SubtaskPosition", [ "./PositionBase" ], function(e) {
return e.extend({
type: "subtask_position",
parentType: "task",
remapIDTypes: [ "task" ],
valueType: "subtask"
});
}), define("backend/Sync/DataProcessors/Outgoing/Task", [ "./ListChildResource" ], function(e) {
return e.extend({
type: "task"
});
}), define("backend/Sync/DataProcessors/Outgoing/TaskComment", [ "./TaskChildResource" ], function(e) {
var t = e.prototype;
return e.extend({
type: "task_comment",
processData: function() {
var e = this, i = t.processData.apply(e, arguments);
return delete i.canDelete, i;
}
});
}), define("backend/Sync/DataProcessors/Outgoing/TaskCommentsState", [ "./Base" ], function(e) {
var t = e.prototype;
return e.extend({
type: "task_comments_state",
processData: function(e) {
var i = this;
return e = t.processData.apply(i, arguments), delete e.unread_count, e;
},
remapIDTypes: [ "task", "list", "last_read" ]
});
}), define("backend/Sync/DataProcessors/Outgoing/TaskPosition", [ "./PositionBase" ], function(e) {
return e.extend({
type: "task_position",
remapIDTypes: [ "list" ],
valueType: "task"
});
}), define("backend/Sync/DataProcessors/Outgoing", [ "project!core/WBClass", "./Outgoing/File", "./Outgoing/List", "./Outgoing/Folder", "./Outgoing/ListPosition", "./Outgoing/Membership", "./Outgoing/Note", "./Outgoing/Reminder", "./Outgoing/Setting", "./Outgoing/Subtask", "./Outgoing/SubtaskPosition", "./Outgoing/Task", "./Outgoing/TaskComment", "./Outgoing/TaskCommentsState", "./Outgoing/TaskPosition" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m, g) {
return e.extend({
processors: {
file: new t(),
list: new i(),
folder: new n(),
list_position: new a(),
membership: new o(),
note: new r(),
reminder: new s(),
setting: new l(),
subtask: new d(),
subtask_position: new c(),
task: new u(),
task_comment: new p(),
task_comments_state: new m(),
task_position: new g()
},
processData: function(e, t) {
var i = this, n = i.processors[e.type];
return n ? e = n.processData(e, t) : console.warn("no outgoing data processor defined for type", e.type), 
e;
}
});
}), define("backend/Sync/Queues/CreateQueueModel", [ "application/runtime" ], function(e) {
var t = e.Backbone;
return t.Model.extend({
storeName: "storage",
defaults: {
id: "createQueue"
}
});
}), define("backend/Sync/Queues/CreateQueue", [ "./CreateQueueModel", "project!core/WBClass", "project!core/WBDeferred" ], function(e, t, i) {
return t.extend({
initialize: function() {
var t = this;
t.ready = new i(), t.queue = [], t.queueModel = window.CreateQueue = new e({
id: "createQueue"
}), t.queueModel.fetch({
success: function() {
t.queue = t.queueModel.attributes.queue || [], t.ready.resolve();
},
error: function() {
t.queue = [], t.ready.resolve();
}
});
},
add: function(e) {
var t = this;
t.queue.push(e.toJSON()), t.saveQueue();
},
getQueue: function() {
var e = this;
return e.queue = e.queue || [], e.queue;
},
removeByID: function(e) {
for (var t, i = this, n = i.queue, a = n.length; a--; ) t = n[a], t.id === e && n.splice(a, 1);
this.saveQueue();
},
resetQueue: function() {
var e = this;
e.queue = [], e.saveQueue();
},
saveQueue: function() {
var e = this;
e.queueModel.save({
queue: e.queue
});
}
});
}), define("backend/Sync/Queues/UpdateQueueModel", [ "./CreateQueueModel" ], function(e) {
return e.extend({
defaults: {
id: "updateQueue"
}
});
}), define("backend/Sync/Queues/UpdateQueue", [ "./UpdateQueueModel", "./CreateQueue", "project!core/WBDeferred" ], function(e, t, i) {
return t.extend({
initialize: function() {
var t = this;
t.ready = new i(), t.queue = [], t.queueModel = window.UpdateQueue = new e({
id: "updateQueue"
}), t.queueModel.fetch({
success: function() {
t.queue = t.queueModel.attributes.queue || [], t.ready.resolve();
},
error: function() {
t.queue = [], t.ready.resolve();
}
});
}
});
}), define("backend/Sync/SyncController/LocalToRemoteMixin", [ "project!core/WBMixin", "../Queues/CreateQueue", "../Queues/UpdateQueue", "project!core/lib/clone" ], function(e, t, i, n) {
var a = [ "task_position", "subtask_position" ];
return e.extend({
add: function(e, t, i) {
var n = this;
n.eventHasSyncableOptions(i) && n.whenModelIsAbleToSync(e, "create", function() {
var t = e.attributes.type;
if (-1 === a.indexOf(t)) {
var o = e.toJSON();
o = n.dataProcessors.outgoing.processData(o, "add"), n.sync.trigger("local:create", e.id, o);
} else n.change(e, i);
});
},
change: function(e, t) {
var i = this, a = e.attributes, o = n(e.changedAttributes(), !0);
o.type = a.type, o.id = a.id;
var r = function() {
o = i.dataProcessors.outgoing.processData(o, "change"), i.sync.trigger("local:update", a.online_id || a.id, a.revision, o);
}, s = i.eventHasSyncableOptions(t);
s && e.isAbleToSync() ? r() : s && a.online_id && i.whenModelIsAbleToSync(e, "update", function() {
r();
});
},
destroy: function(e, t, i) {
var n = this, a = n.eventHasSyncableOptions(i), o = e.isAbleToSync();
if (a && o) {
var r = e.attributes, s = e.toJSON();
n.sync.trigger("local:delete", r.online_id || r.id, s.revision, s);
} else n.createQueue.removeByID(e.id), n.updateQueue.removeByID(e.id);
},
eventHasSyncableOptions: function(e) {
return e = e || {}, !(e.fromSync || e.fromStorage);
},
whenModelIsAbleToSync: function(e, t, i) {
var n = this, a = n[t + "Queue"];
e.isAbleToSync() ? (a.removeByID(e.id), "function" == typeof i && i()) : e.isNotAllowedToSync() || (a.add(e), 
n.bindOnceTo(e, "change:isAbleToSync", function() {
a.removeByID(e.id), i();
}));
},
loadFromQueue: function(e) {
for (var t, i, a, o = this, r = o[e + "Queue"], s = n(r.getQueue(), !0), l = s.length; l--; ) t = s[l], 
r.removeByID(t.id), i = o.collections[o.normalizeCollectionType(t.type)], a = i.get(t.id), 
a && o.add(a, i, {});
}
});
}), define("backend/Sync/SyncController/RemoteToLocalMixin", [ "vendor/lodash", "project!core/WBMixin", "project!core/lib/clone", "project!core/lib/extend", "vendor/setImmediate" ], function(e, t, i, n, a) {
var o = {
fromSync: !0,
merge: !0
}, r = {
task_positions: "tasks",
list_positions: "lists",
subtask_positions: "subtasks"
}, s = 15, l = s, d = 30;
return t.extend({
remoteToLocalQueue: [],
flushingRemoteToLocalQueue: !1,
flushRemoteToLocalQueue: function() {
for (var e = this, t = 0, i = Date.now(); l > t && e.remoteToLocalQueue.length; ) {
var n = e.remoteToLocalQueue.shift();
n(), ++t;
}
if (t === l) {
var o = Date.now() - i;
d >= o ? l = s > l ? s : ++l : l > s ? l = s : l > 1 && --l;
}
e.remoteToLocalQueue.length ? (e.flushingRemoteToLocalQueue = !0, a(function() {
e.flushRemoteToLocalQueue();
})) : e.flushingRemoteToLocalQueue = !1;
},
tryToFlushRemoteToLocalQueue: e.debounce(function() {
var e = this;
!e.flushingRemoteToLocalQueue && e.flushRemoteToLocalQueue();
}, d),
queueRemoteToLocalOp: function(e) {
var t = this;
t.remoteToLocalQueue.push(e), t.tryToFlushRemoteToLocalQueue();
},
getRemoteToLocalOptions: function(t, n, a, r) {
var s = i(o);
return (n || a) && (s.success = void 0, s.error = void 0, e.isFunction(n) && (s.success = n), 
e.isFunction(a) && (s.error = a)), t && (s.remoteState = t), r && (s.fromMatryoshka = !0), 
s;
},
create: function(t, n, a, o, r, s) {
var l = this;
t && !a.id ? console.warn(n, "has id", t, "but id not in data") : t || a.length || l.warnNoID(n);
var d = l.normalizeCollectionType(n), c = l.collections[d];
c ? l.queueRemoteToLocalOp(function() {
t = t ? "" + t : void 0, a.type = n, a = l.dataProcessors.incoming.processData(a);
var d = c.get(t);
!d && o && (d = c.get(o));
var u = l.getRemoteToLocalOptions(i(a), r, s);
"id" in a && a.id !== t ? (d = c.get(a.id), d && d.save(a, u)) : !d && a && a.id ? c.add(a, u) : e.isFunction(r) && r();
}) : (l.warnNoCollection("create", n), e.isFunction(r) && r());
},
update: function(t, n, a, o, r, s, l) {
var d = this;
if (t || d.warnNoID(n), !a || !Object.keys(a).length) return void (e.isFunction(r) && r());
var c = d.normalizeCollectionType(n), u = d.collections[c];
u ? d.queueRemoteToLocalOp(function() {
if (t = t ? "" + t : void 0, !a.id && (a.id = t), a.type = n, a = d.dataProcessors.incoming.processData(a, l === !0), 
delete a.id, !Object.keys(a).length) return void (e.isFunction(r) && r());
var c = u.get(t) || o && u.get(o);
if (c) {
var p = i(a), m = d.trimSameValues(a, c);
if (Object.keys(m).length) {
var g = d.getRemoteToLocalOptions(p, r, s);
g.remoteState = p, c.save(m, g);
} else e.isFunction(r) && r();
} else e.isFunction(r) && r();
}) : (d.warnNoCollection("update", n), e.isFunction(r) && r());
},
updateSuccess: function(e, t) {
var i = this;
/position/.test(t) && i.onPositionUpdateSuccess.apply(i, arguments);
},
onPositionUpdateSuccess: function(e, t, i) {
var n = this, a = n.normalizeCollectionType(t), o = i.values, s = n.collections[a].get(e);
s && o && o.forEach(function(e) {
var t = n.collections[r[a]].get("" + e), i = t && t.id;
i && s.markIDAsSyncedOut(i);
});
},
trimSameValues: function(e, t) {
var i = t.attributes;
for (var n in e) e[n] === i[n] && delete e[n];
return e;
},
"delete": function(e, t, i, n, a) {
var o = this;
e || o.warnNoID(t), e = e ? "" + e : void 0, a && "task" === t ? o.handleMatryoshkaTaskDeletion(e, t, i, n) : o.handleNormalDeletion(e, t, i, n);
},
handleNormalDeletion: function(t, i, n, a) {
var o = this, r = o.collections[o.normalizeCollectionType(i)];
r ? o.queueRemoteToLocalOp(function() {
var i = r.get(t);
if (i) {
var s = o.getRemoteToLocalOptions(void 0, n, a);
i.destroy(s);
} else e.isFunction(n) && n();
}) : (o.warnNoCollection("delete", i), e.isFunction(n) && n());
},
handleMatryoshkaTaskDeletion: function(e, t, i, n) {
var a = this, o = a.collections.tasks, r = o.get(e), s = r && r.isCompleted();
s || a.handleNormalDeletion(e, t, i, n);
},
warnNoCollection: function(e, t) {
console.warn("no local collection to handle " + e + " for type " + t);
},
warnNoID: function(e) {
console.warn(e, "has no id");
}
});
}), define("backend/Sync/SyncLabs", [ "wunderbits/BaseSingleton", "application/runtime" ], function(e, t) {
var i, n = e.extend({
init: function(e) {
i = e;
var a = t.settings;
n.bindTo(a, "change:labs_force_http_sync_enabled", "checkForForcedHTTP"), n.checkForForcedHTTP();
},
checkForForcedHTTP: function() {
var e = t.isLabsEnabled("force_http_sync");
console.info("using %s for syncing", e ? "REST" : "WebSocket"), i.options && (i.options.forceHTTP = e);
}
});
return n;
}), define("backend/Sync/SyncController", [ "application/runtime", "project!database", "project!core/WBEventEmitter", "project!core/lib/createUID", "backend/database", "project!sdk", "project!sync", "helpers/TrackingService", "./Mixins/ScopedCollections", "./Mixins/UtilityFunctions", "./DataProcessors/Incoming", "./DataProcessors/Outgoing", "./Queues/CreateQueue", "./Queues/UpdateQueue", "./SyncController/LocalToRemoteMixin", "./SyncController/RemoteToLocalMixin", "./SyncLabs", "project!core/WBDeferred", "project!core/lib/when", "project!core/lib/clone", "project!core/lib/toArray" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m, g, f, b, h, v, _, w) {
var k = new t.WBLocalStorage(), x = e._, y = [ "activities", "desktop_notifications", "conversations", "features", "files", "folders", "list_positions", "lists", "memberships", "notes", "reminders", "services", "settings", "subscriptions", "subtask_positions", "subtasks", "task_comments", "task_comments_states", "task_positions", "tasks", "tasks_counts", "unread_activities_counts", "users" ], C = r.models.Tracker, T = C.prototype;
T.storeName = "storage", T.sync = a.sync;
var S = i.prototype;
return i.extend({
mixins: [ l, g, f, d ],
SyncClass: r,
sync: void 0,
collections: void 0,
dataProcessors: {
incoming: new c(),
outgoing: new u()
},
dbReady: void 0,
initialize: function(t) {
var i = this;
S.initialize.apply(i, arguments), i.dbReady = new h(), i.hasSyncedOnce = new h(), 
i.bindOnceTo(e, "db:allDataLoaded", i.dbReady.resolve, i.dbReady), i.instanceReady = new h(), 
i.setupInstance(), i.collections = t.collections, i.setupSync(), i.setupBinds(), 
e.pendingChanges = function() {
return i.pendingChanges.call(i);
}, i.onOwnRootTouch = x.debounce(i.onOwnRootTouch, 1e3);
},
setupInstance: function() {
function e() {
t.instanceID = n(), k.setItem(i, t.instanceID).always(t.instanceReady.resolve, t.instanceReady);
}
var t = this, i = "wl_instance_id";
k.getItem(i).done(function(i) {
i ? (t.instanceID = i, t.instanceReady.resolve()) : e();
}).fail(function() {
e();
});
},
setupSync: function() {
var t = this, i = t.SyncClass, n = e.config;
t.syncInitialized = new h(), t.sdkInitialized = new h(), v(s.ready, t.instanceReady).done(function() {
t.sync = new i({
WunderlistSDK: o,
clientID: n.clientID,
deviceID: s.uuid,
instanceID: t.instanceID,
accessToken: e.user.attributes.access_token,
config: n,
models: {
root: e.root,
user: e.user
},
collections: t.collections
}), e.sdk = t.sync.sdk, e.sync = t.sync, b.init(t.sync.sdk), t.bindToSync(), t.sync.initialized.done(function() {
e.trackers = t.sync.trackers;
}), t.sync.initialized.done(t.syncInitialized.resolve, t.syncInitialized), t.sync.sdk.initialized.done(t.sdkInitialized.resolve, t.sdkInitialized);
});
},
destroySync: function() {
var e = this;
e.unbindFromSync(), e.sync.destroy();
},
setupBinds: function() {
var t = this;
t.createQueue = window.createQueue = new p(), t.updateQueue = window.updateQueue = new m(), 
t.dbReady.done(function() {
t.createQueue.ready.done(function() {
t.loadFromQueue("create");
}), t.updateQueue.ready.done(function() {
t.loadFromQueue("update");
}), t.hasSyncedOnce.done(function() {
e.trigger("hasSyncedOnce");
}), t.bindToCollections();
}), t.bindToRuntime();
},
bindToRuntime: function() {
var t = this;
t.bindTo(e, "sync:start", "onSync"), t.bindTo(e, "trackers:clear", function(e) {
t.sync.clearTrackers.call(t.sync), "function" == typeof e && e();
}), t.bindTo(e, "time:nextMinute", "onNextMinute"), t.bindTo(e.user, "change:access_token", "onReauthorize");
},
onSync: function(e) {
var t = this, i = arguments, n = t.syncInitialized, a = t.sdkInitialized, o = s.ready, r = [ t.dbReady, t.instanceReady, n, a, o ], l = [ t.dbReady, t.instanceReady, n ], d = e ? r : l;
v(d).done(function() {
var e = t.sync;
e.onSync.apply(e, i);
});
},
bindToCollections: function() {
var e = this, t = [ "add", "change", "destroy" ];
y.forEach(function(i) {
var n = e.collections[i];
t.forEach(function(t) {
e.bindTo(n, t, function() {
e[t].apply(e, arguments);
});
});
});
},
bindToSync: function() {
var t = this, i = [ "create", "update", "delete", "fetchLocalData", "fetchPreviousData", "updateSuccess", "invalidMutation" ], n = t.sync, a = n.sdk;
i.forEach(function(e) {
t.bindTo(n, e, t[e].bind(t));
});
var o;
t.bindTo(a, "online", function() {
e.state.set("online", !0), o = setTimeout(function() {
t.onSync();
}, 1e3);
}), t.bindTo(a, "offline", function() {
o && clearTimeout(o), e.state.set("online", !1);
}), t.bindTo(a, "timing:io", function(t) {
e.trigger("timeline:api", t);
}), t.bindTo(n, "flushing", "onFlush"), t.bindTo(n, "sync:ended", function(i, n, a) {
"matryoshka" !== n && "login" !== n || !a || t.hasSyncedOnce.resolve(), e.trigger("sync:ended", i, n, a);
});
var r = [ "timeline:start", "timeline:end" ];
r.forEach(function(i) {
t.bindTo(n, i, function() {
var t = w(arguments);
t.unshift(i), e.trigger.apply(e, t);
});
}), t.bindTo(n, "touch", "onTouch"), t.bindTo(n, "isSyncing", function(t) {
e.isSyncing = t, e.trigger("sync");
}), t.bindTo(a, "unauthorized", "onUnauthorized"), t.bindTo(n, "fetchScopedCollection", "getScopedCollection"), 
t.bindTo(n, "before:sync:ended", function() {
e.trigger("before:sync:ended");
}), n.initialized.done(function() {
a.initialized.done(function() {
e.state.set("online", a.appState.attributes.online);
});
});
},
unbindFromSync: function() {
var e = this;
e.unbindFromTarget(e.sync), e.unbindFromTarget(e.sync.sdk);
},
onFlush: function(t, i) {
var n = this;
t = Array.isArray(t) ? t[0] : t, n.flushing = "started" === t, e.trigger("sync:" + t, i, "flushing");
var a = n.sync, o = a.sdk, r = o && !o.destroyed, s = r && o.isSocketOnline(), l = a.watcher.isStrategySyncing("matryoshka");
"ended" !== t || !r || s || l || n.onOwnRootTouch();
},
onUnauthorized: function() {
var t = this;
t.dbReady.done(function() {
e.user.forceLogout();
});
},
onReauthorize: function(e) {
if (e.attributes.access_token) {
var t = this;
t.destroySync(), t.setupSync();
}
},
onNextMinute: function() {
var t = this, i = 6e4, n = "matryoshka", a = t.isSocketConnected();
if (!a) {
var o = t.sync && t.sync.watcher, r = Date.now(), s = t.lastPoll || 0, l = r - s >= i;
l && o && !o.isStrategySyncing(n) && (t.lastPoll = Date.now(), e.trigger("sync:start", "false", n));
}
},
isSocketConnected: function() {
var e = this, t = e.sync && e.sync.sdk, i = t && t.restSocket, n = i && i.socket;
return !(!n || !n.isConnected());
},
onTouch: function(t, i) {
"root" === i && e.root.isIDEqual(t) && this.onOwnRootTouch();
},
onOwnRootTouch: function() {
var t = this, i = "matryoshka";
t.onOwnRootTouchTimout && clearTimeout(t.onOwnRootTouchTimout);
var n = !t.pendingChangesInSync(), a = !t.sync.watcher.isStrategySyncing(i), o = !t.sync.watcher.isStrategySyncing("login"), r = !t.flushing;
r && n && a && o ? e.trigger("sync:start", "false", i) : t.onOwnRootTouchTimout = setTimeout(function() {
t.onOwnRootTouch();
}, 1e3);
},
fetchLocalData: function(e, t, i) {
var n = this;
e = "" + e;
var a = n.collections[n.normalizeCollectionType(t)], o = a && a.get(e), r = o && _(o.attributes);
return "function" == typeof i && i(r), r;
},
fetchPreviousData: function(e, t, i) {
var n = this;
e = "" + e;
var a = n.collections[n.normalizeCollectionType(t)], o = a && a.get(e), r = o && _(o.attributes.lastUpdateData);
return r = r && n.dataProcessors.outgoing.processData(r), "function" == typeof i && i(r), 
r;
},
pendingChangesInSync: function() {
var e = this.sync;
return e && e.pendingChanges && e.pendingChanges.call(e) || 0;
},
pendingChanges: function() {
var e = this, t = e.pendingChangesInSync(), i = e.createQueue.getQueue().length || 0, n = e.updateQueue.getQueue().length || 0;
return t + i + n;
},
invalidMutation: function(t) {
e.error.notify("invalid_mutation", "invalid realtime mutation from the api", {
mutation: t
});
}
});
}), define("backend/sync", [ "application/runtime", "backend/database", "collections/TaskCommentsCollection", "collections/TaskCommentsStateCollection", "collections/FeatureCollection", "collections/FileCollection", "collections/ListCollection", "collections/FolderCollection", "collections/MembershipCollection", "collections/TaskCollection", "collections/SubtaskCollection", "collections/ReminderCollection", "collections/SettingCollection", "collections/ServiceCollection", "collections/NotificationCollection", "collections/NoteCollection", "collections/Positions/ListPositionsCollection", "collections/Positions/SubtaskPositionsCollection", "collections/Positions/TaskPositionsCollection", "collections/TasksCountCollection", "collections/UserCollection", "collections/SubscriptionCollection", "collections/UnreadActivitiesCountCollection", "collections/ActivitiesCollection", "collections/ConversationsCollection", "wunderbits/BaseEventEmitter", "backend/Sync/SyncController" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m, g, f, b, h, v, _, w, k, x, y, C, T, S) {
var L, D = T.prototype, M = e._;
return T.extend({
initialize: function() {
var t = this;
D.initialize.apply(t, arguments), L = t.initCollections(), e.once("user:ready", t.initSync, t);
},
initSync: function(e, t) {
var i = this;
i.initOnLoggedIn(t);
},
initOnLoggedIn: function(t) {
new S({
collections: L
});
var i = !0;
if ("payment" !== t) {
var n = !1;
e.on("database:upgraded", function() {
n = !0;
}), e.hasRouted.done(function() {
M.defer(function() {
n && "normalLoad" === t ? e.trigger("sync:start", i, "login") : e.trigger("sync:start", i, t);
});
});
}
},
initCollections: function() {
return {
features: new a("/features/all"),
files: new o("/files/all"),
lists: new r("/lists/all"),
folders: new s("/folders/all"),
list_positions: new b("/listPositions/all"),
memberships: new l("/memberships/all"),
tasks: new d("/tasks/all"),
task_comments: new i("/taskComments/all"),
task_comments_states: new n("/taskCommentsStates/all"),
task_positions: new v("/taskPositions/all"),
tasks_counts: new _("/tasksCounts/all"),
subtasks: new c("/subtasks/all"),
subtask_positions: new h("/subtaskPositions/all"),
reminders: new u("/reminders/all"),
notes: new f("/notes/all"),
services: new m("/services/all"),
settings: new p("/settings/all"),
desktop_notifications: new g("/desktopNotifications/all"),
users: new w("/users/all"),
subscriptions: new k("/subscriptions/all"),
unread_activities_counts: new x("/unreadActivitiesCounts/all"),
activities: new y("/activities/all"),
conversations: new C("/conversations/all")
};
}
});
}), define("backend/timer", [ "application/runtime", "project!core/WBSingleton" ], function(e, t) {
function i() {
return b.setTime(Date.now()), b.getDate();
}
function n() {
return b.setTime(Date.now()), b.getMinutes();
}
function a() {
return b.setTime(Date.now()), b.getHours();
}
function o() {
r = i(), r !== v && (e.trigger("day:ended"), v = r), s = n(), s !== _ && (e.trigger("time:nextMinute"), 
_ = s, l = a(), l !== w && (e.trigger("time:nextHour"), w = l)), --h <= 0 && (e.trigger("reminders:check"), 
h = f), c = p(o, g);
}
var r, s, l, d, c, u = e.global, p = u.setTimeout, m = u.clearTimeout, g = 1e3, f = 1, b = new Date(), h = f, v = i(), _ = n(), w = a();
return t.extend({
init: function() {
d = !1;
},
isRunning: function() {
return !!d;
},
start: function() {
var e = this;
e.isRunning() || (c = p(o, g), d = !0);
},
stop: function() {
var e = this;
e.isRunning() && (m(c), d = !1);
}
});
}), define("helpers/GoogleAnalytics", [ "application/runtime", "wunderbits/helpers/strings", "vendor/ga", "project!core/WBSingleton" ], function(e, t, i, n) {
var a = e._, o = e.config, r = null;
return n.extend({
init: function() {
var n = this;
if (o.analytics && o.analytics.ga) {
i.init(o.analytics.ga), i.gaq.push([ "_setDomainName", "wunderlist.com" ]), i.gaq.push([ "_setAllowLinker", !0 ]), 
e.on("analytics", n._trackEvent), window.onhashchange = n._trackGAPageView;
var a = e.env.isPackagedApp() ? "/" : location.pathname, s = a + t.sanitizeHash(location.hash);
i.gaq.push([ "_trackPageview", s ]), r = s;
}
},
_trackEvent: function() {
var e = a.toArray(arguments);
if (a.isArray(e[0])) {
var t = e.shift();
("APIBenchmark-Latency" === t[0] || "APIBenchmark-DownloadTime" === t[0]) && (t[1] = decodeURIComponent(t[1]));
var n = [ "_trackEvent", t[0], t[1] || "" ];
e.length && (1 === e.length && (a.isNumber(e[0]) ? e.unshift(void 0) : e.push(void 0)), 
e[2] = !1, n.push.apply(n, e)), i.gaq.push(n);
}
},
_trackGAPageView: function() {
var e = t.sanitizeHash(location.hash), n = location.pathname + e;
n !== r && (i.gaq.push([ "_trackPageview", n ]), r = n);
}
});
}), define("helpers/iyfRules", [ "application/runtime", "wunderbits/helpers/date", "wunderbits/BaseEventEmitter", "vendor/moment" ], function(e, t, i) {
var n = i.prototype;
return i.extend({
initialize: function(t) {
var i = this;
t = t || {}, n.initialize.apply(i, arguments), e.env.isPackagedApp() || e.user.authorization.done(function() {
i.bindOnceTo(e, "sync:ended", i.start);
});
},
start: function() {
var t = this;
if (!e.user.isPro()) {
var i = "true" === e.settings.attributes.campaign_iyf4_notification;
i ? (t.handleNotificationCampaign(), t.bindTo(e.user, "change:pro", t.handleProductChange)) : t.bindTo(e.settings, "change:campaign_iyf4_notification", t.start);
}
},
handleNotificationCampaign: function() {
var i = e.settings.attributes.campaign_iyf4_notification_last_date;
i || (e.publish("iyf:notification"), e.settings.save({
campaign_iyf4_notification_last_date: t.getServerNow()
}), e.trigger("analytics:campaignIyf4Notification:NotificationShown"));
},
handleProductChange: function() {
e.user.isPro() && e.trigger("iyf:removeNotification");
}
});
}), define("helpers/PrintHelper", [ "application/runtime", "project!core/WBSingleton" ], function(e, t) {
var i = e._;
return t.extend({
init: function() {
var t = this;
if (t._debouncedBeforePrint = i.debounce(t.beforePrint, 500, {
leading: !0
}), e.env.isFirefox() || e.env.isIE()) window.onbeforeprint = t._debouncedBeforePrint; else if (window.matchMedia) {
var n = window.matchMedia("print"), a = function(e) {
e.matches && t._debouncedBeforePrint();
};
n.addListener(a);
}
},
beforePrint: function() {
e.trigger("print:start");
}
});
}), define("helpers/socialPrompts", [ "application/runtime", "wunderbits/BaseEventEmitter", "vendor/moment", "project!core/WBDeferred" ], function(e, t, i, n) {
var a = e._, o = t.prototype, r = e.config, s = !1, l = {
rate: "rate",
tell: "tell-your-friends"
};
return t.extend({
initialize: function() {
var t = this;
o.initialize.apply(t, arguments), t._ready = new n(), t.bindOnceTo(e, "interface:ready", t._ready.resolve, t._ready), 
t._ready.done(t.checkRelease.bind(t));
},
triggerRoute: function(t) {
var i = l[t];
e.trigger("route:" + i);
},
checkShouldOpenDelayedPrompt: function() {
var t = this, n = e.settings.attributes.should_open_social_prompt_on, a = e.settings.attributes.should_open_prompt;
a && n && n === i().format("YYYY-MM-DD") && (t.isOnDisallowedRoute() || (e.settings.save({
should_open_social_prompt_on: null,
should_open_prompt: null
}), t.triggerRoute(a)));
},
checkRelease: function() {
var t = this, i = new n();
return e.isLocalDev() ? i.resolve() : (t.bindOnceTo(e, "settings:ready", function() {
e.settings.ready.done(function() {
var n = e.settings.attributes.last_used_release;
if (r.release && n !== r.release) {
var a = n && n.split("."), o = r.release && r.release.split("."), l = a && a[0], d = a && a[1], c = l !== o[0] || !l, u = l >= o[0];
(l && c || u && d < o[1]) && (t._ready.done(function() {
e.settings.save({
last_used_release: r.release
}), t.isOnDisallowedRoute() || e.trigger("onboarding:existingUser");
}), s = !0, t.updateNewInstallationStatus());
} else s = !1;
i.resolve();
});
}), i);
},
updateNewInstallationStatus: function(t) {
e.isInstalledOnChrome() && (t || t !== !1 && "true" !== e.settings.attributes.new_installation ? e.settings.save("new_installation", "true") : e.settings.save("new_installation", "false"));
},
openPrompt: function(t) {
var n = this;
("rate" !== t || e.user.showSocialButtons()) && (n.isOnDisallowedRoute() ? e.currentRoute().indexOf("whatsnew") >= 0 ? e.settings.save({
should_open_social_prompt_on: i().add("days", 1).format("YYYY-MM-DD"),
should_open_prompt: t
}) : n.delayOpenPrompt(t, 60) : "socialPrompt" !== e.focus && n.triggerRoute(t));
},
delayOpenPrompt: function(t, i) {
function n() {
a.isOnDisallowedRoute() || (clearTimeout(o), e.off("routed", n));
}
var a = this, o = setTimeout(function() {
a.openPrompt(t);
}, 1e3 * i);
e.on("routed", n);
},
isOnDisallowedRoute: function() {
var t = [ "preferences", "social", "whatsnew", "conversations", "activities" ], i = !1, n = e.currentRoute();
return a.each(t, function(e) {
n.indexOf(e) >= 0 && (i = !0);
}), i;
}
});
}), define("helpers/onboarding/BaseOnboardingFlow", [ "application/runtime", "project!core/WBEventEmitter" ], function(e, t) {
var i = t.prototype, n = e._;
return t.extend({
initialize: function() {
var e = this;
i.initialize.apply(e, arguments), e.bindEvents();
},
order: [ "AddItem", "AddPeople", "CreateList" ],
settingsMap: {
AddItem: "onboarding_add_todo",
AddPeople: "onboarding_click_share_list",
CreateList: "onboarding_click_create_list"
},
bindEvents: function() {
var t = this, i = t.nextInOrder();
switch (i) {
case "AddItem":
t.chooseListBind = t.bindOnceTo(e, "onboarding:chooseListClosed", "showNextAction"), 
t.inputFocusBind = t.bindOnceTo(e, "onboarding:addItemFocus", "closeTooltip"), t.itemAddedBind = t.bindOnceTo(e, "onboarding:itemAdded", "itemAdded");
break;

case "AddPeople":
t.shareListClickBind = t.bindTo(e, "onboarding:shareListClicked", "shareListClicked"), 
t.shareListCloseBind = t.bindTo(e, "onboarding:shareListClose onboarding:shareListCancel", "shareListClosed");
break;

case "CreateList":
t.addListClickBind = t.bindTo(e, "onboarding:addListClicked", "closeTooltip");
break;

default:
t.unbindAll();
}
t.bindTooltipClose();
},
bindTooltipClose: function() {
var t = this;
t.bindTo(e, "tooltip:close", "_closeTooltip");
},
_closeTooltip: function(e, t, i) {
var n = this;
n["hide" + e + "Tooltip"](t, i), t && t.unbindAll(), n.bindEvents();
},
closeTooltip: function() {
e.trigger("hideTooltip");
},
itemAdded: function() {
var t = this;
e.trigger("hideTooltip"), e.settings.save("onboarding_add_todo", "true"), t.showNextAction();
},
shareListClicked: function() {
var t = this;
e.settings.save("onboarding_click_share_list", "true", {
success: t.closeTooltip.bind(t)
});
},
shareListClosed: function() {
var e = this;
e.showNextAction();
},
showAddItemTooltip: function() {
e.trigger("showTooltip:AddItem");
},
showAddPeopleTooltip: function() {
e.trigger("showTooltip:AddPeople");
},
showCreateListTooltip: function() {
e.trigger("showTooltip:CreateList");
},
hideAddItemTooltip: function(t, i) {
var n = this;
t && t.popover.trigger("popover:close"), e.settings.save("onboarding_add_todo", "true"), 
n.inputFocusBind && n.unbindFrom(n.inputFocusBind), i && n.showNextAction();
},
hideAddPeopleTooltip: function(t, i) {
var n = this;
t && t.popover.trigger("popover:close"), e.settings.save("onboarding_click_share_list", "true"), 
i && n.showNextAction();
},
hideCreateListTooltip: function(t) {
var i = this;
t && t.popover.trigger("popover:close"), e.settings.save("onboarding_click_create_list", "true"), 
i.addListClickBind && i.unbindFrom(i.addListClickBind), i.showNextAction();
},
nextInOrder: function() {
var t = this;
return n.find(t.order, function(i) {
return !e.settings.isSettingSet(t.settingsMap[i]);
});
},
showNextAction: function() {
var e = this, t = e.nextInOrder();
t && t !== e.lastAction && (e["show" + t + "Tooltip"](), e.lastAction = t);
}
});
}), define("helpers/onboarding/ExistingUserOnboardingFlow", [ "application/runtime", "./BaseOnboardingFlow" ], function(e, t) {
var i = e._;
return t.extend({
order: [ "CreateList", "AddPeople" ],
bindEvents: function() {
var t = this, i = t.nextInOrder();
switch (i) {
case "AddItem":
break;

case "AddPeople":
t.bindTo(e, "onboarding:addedList", t.addListClosed), t.bindTo(e, "onboarding:shareListClicked", t.shareListClicked);
break;

case "CreateList":
t.bindWhatsnewCloseBind = t.bindTo(e, "onboarding:whatsNewClosed", t.whatsnewClosed);
break;

default:
t.unbindAll();
}
t.bindTooltipClose();
},
whatsnewClosed: function() {
var t = this;
t.showNextAction(), t.addListClickBind = t.bindTo(e, "onboarding:addListClicked", t.closeTooltip);
},
hideCreateListTooltip: function(t, i) {
var n = this;
t && t.popover.trigger("popover:close"), e.settings.save("onboarding_click_create_list", "true"), 
i && n.showNextAction(), n.bindEvents();
},
addListClosed: function() {
var e = this;
i.delay(function() {
e.showNextAction(), e.bindEvents();
}, 250);
}
});
}), define("helpers/unload", [ "application/runtime", "collections/FileCollection", "project!core/WBSingleton" ], function(e, t, i) {
var n = e._;
return i.extend({
init: function() {
var t = this;
e.env.isPackagedApp() || (e.on("sync:unload", function() {
(e.pendingChanges ? e.pendingChanges() : 0) > 0 && e.trigger("sync:start");
}), e.global.addEventListener("beforeunload", function() {
var i = !0;
if (e.on("email:emailing", function() {
i = !1;
}), e.on("application:reloading", function() {
i = !1;
}), i) {
var n, a = e.pendingChanges ? e.pendingChanges() : 0, o = t.getUploadingCount();
a > 0 || o > 0 ? (a > 0 && e.trigger("sync:unload"), a += o, n = 1 === a ? e.language.getText("userbar_$_unsynced_item", a) : e.language.getText("userbar_$_unsynced_item_plural", a)) : e.isSyncing && (n = e.language.getText("userbar_sync_in_progress"));
var r = new Date().valueOf(), s = Math.round((r - e.started) / 1e3 / 60);
return e.trigger("analytics:Application:unload", s + " minutes"), n;
}
}), e.global.addEventListener("unload", function() {
e.trigger("window:unload");
}));
},
getUploadingCount: function() {
var e = new t("/files/all"), i = n.filter(e.models, function(e) {
return e.file;
});
return i.length;
}
});
}), define("helpers/RateDialogManager", [ "application/runtime", "collections/FeatureCollection", "vendor/moment", "project!core/WBEventEmitter" ], function(e, t, i, n) {
var a = n.prototype;
return n.extend({
blockerUrls: [ "preferences", "whatsnew", "conversations", "activities" ],
initialize: function() {
var i = this;
a.initialize.apply(i, arguments), i.features = new t("/features/all"), i.bindOnceTo(e, "features:ready", function() {
i.setDefaults(), i.bindTo(e, "significantEvent:added", "incrementSignificantEvents"), 
i.bindTo(i.features, "add remove change", "tryOpen"), i.bindTo(e, "change:significant_event_count", "tryOpen"), 
i.tryOpen();
});
},
setDefaults: function() {
var t = e.settings.attributes, n = t.app_first_used;
"false" === n && e.settings.save({
app_first_used: i().sod().valueOf()
});
},
incrementSignificantEvents: function() {
var t = parseInt(e.settings.attributes.significant_event_count, 10);
e.settings.save({
significant_event_count: ++t
});
},
isOpenOnRouteAllowed: function() {
var t = this, i = e.currentRoute(), n = !0;
return t.blockerUrls.forEach(function(e) {
0 === i.indexOf(e) && (n = !1);
}), n;
},
hasBeenTwoDaysSinceFirstUse: function() {
var t = this, n = i().sod(), a = i(e.settings.attributes.app_first_used), o = t.features.findWhere({
name: "app_rating.days_until_prompt"
}), r = o ? parseInt(o.attributes.variant, 10) : 2;
return n.diff(a, "days") >= r && t.hasNeverSeenDialog();
},
hasTriggeredSignificantEvents: function() {
var t = this, i = parseInt(e.settings.attributes.significant_event_count, 10), n = t.features.findWhere({
name: "app_rating.significant_events_until_prompt"
}), a = n ? parseInt(n.attributes.variant, 10) : 5;
return i >= a && t.hasNeverSeenDialog();
},
getRateLaterKey: function() {
var t = e.env.isChromeApp() ? "chrome_app" : "chrome";
return t + "_rating_later";
},
hasNeverSeenDialog: function() {
var t = this;
return "undefined" === e.settings.attributes[t.getRateLaterKey()];
},
neverShowAgain: function() {
var t = this;
return "false" === e.settings.attributes[t.getRateLaterKey()];
},
hasWaitedToShowAgain: function() {
var t = this, n = e.settings.attributes[t.getRateLaterKey()];
if (!a) return !1;
var a = i(n), o = i().sod(), r = t.features.findWhere({
name: "app_rating.days_before_reminding_again"
}), s = r ? parseInt(r.attributes.variant, 10) : 10;
return o.diff(a, "days") >= s;
},
shouldOpen: function() {
var e = this;
return !e.isOpenOnRouteAllowed() || e.neverShowAgain() ? !1 : e.hasBeenTwoDaysSinceFirstUse() || e.hasTriggeredSignificantEvents() || e.hasWaitedToShowAgain() ? !0 : !1;
},
tryOpen: function() {
var t = this;
t.shouldOpen() && (e.trigger("route:rate"), e.settings.save(t.getRateLaterKey(), i().sod().valueOf()));
}
});
}), define("wunderbits/WBViewPresenter", [ "application/runtime", "./lib/dependencies", "./WBView", "project!core/lib/merge", "project!core/lib/toArray", "project!core/lib/fromSuper", "project!core/mixins/ControllableMixin" ], function(e, t, i, n, a, o, r) {
var s = i.prototype, l = t._, d = i.extend({
emits: {},
observes: {
model: {},
collection: {},
runtime: {}
},
eventProxies: {
tap: [ "click", "touchstart" ],
move: [ "mousemove", "touchmove" ]
},
initialize: function() {
var e = this;
e.emits = o.merge(e, "emits"), s.initialize.apply(e, arguments), e.options = o.merge(e, "options"), 
e.createObserveBindings();
},
trigger: function(e) {
var t = this;
s.trigger.apply(t, arguments);
var i = a(arguments, 1);
return t.iterate(e, function(e) {
t.triggered.apply(t, [ e ].concat(i));
}), t;
},
triggered: function() {
var e = this, t = l.toArray(arguments), i = "*children", n = "*parents";
if (e._superView && t[0].indexOf(n) < 0) {
var a = l.clone(t);
a[0].indexOf(i) < 0 && (a[0] = i + ":" + a[0]), e._superView.trigger.apply(e._superView, a);
}
if (e._subviews && t[0].indexOf(i) < 0) {
var o = l.clone(t);
o[0].indexOf(n) < 0 && (o[0] = n + ":" + o[0]);
for (var r, s = 0, d = e._subviews.length; d > s; s++) r = e._subviews[s], r.trigger.apply(r, o);
}
},
renderSubview: function(e, t, i) {
var n = this;
t || (t = {}), i || (i = e.toString()), t.state = t.state || n.state;
var a = n.addSubview(new e(t), i);
return n.el.appendChild(a.render().el), a;
},
createObserveBindings: function(t) {
var i = this;
t = t || i;
var n, a, o, r = t.observes;
for (var s in r) {
if (n = "events" === s || "*parents" === s || "*children" === s ? i : "runtime" === s ? e : i[s], 
o = r[s], n && l.isFunction(n.on) && l.size(o)) for (var d in o) {
if (a = o[d], l.isArray(a)) for (var c = 0, u = a.length; u > c; c++) i._bindObserveeEvent(a[c], n, d, s); else i._bindObserveeEvent(a, n, d, s);
a = null;
}
n = null;
}
t.constructor.__super__ && i.createObserveBindings.call(i, t.constructor.__super__);
},
_bindObserveeEvent: function(e, t, i, n) {
var a, o = this;
"*" === n[0] && (i = n + ":" + i), a = l.isFunction(e) ? e : ">" === e[0] ? function() {
var t = [ e.substr(1) ].concat(l.toArray(arguments));
o.trigger.apply(o, t);
} : o[e], l.isFunction(a) && o.bindTo(t, i, a);
},
getEvents: function(e) {
var t = this, i = l.isFunction(t.emits) ? t.emits() : t.emits;
return n({}, i, e);
},
delegateEvents: function(e) {
var t = this;
e = t.getEvents(e), e = t.mapEventProxies(e), l.each(e, function(i, n) {
e[n] = function() {
var e = [ i ].concat(l.toArray(arguments));
t.trigger.apply(t, e);
};
}), e = n({}, e, l.result(t, "events")), s.delegateEvents.call(t, e);
},
mapEventProxies: function(e) {
var t = this;
return l.each(e, function(i, n) {
var a = t.eventProxies[n];
a && a.length && (l.each(a, function(t) {
e[t] = i;
}), delete e[n]);
}), e;
},
onDestroy: function() {},
destroy: function() {
var e = this, t = e.deferred();
e.renderDestroy(t).always(function() {
!e.destroyed && s.destroy.call(e);
});
},
renderDestroy: function(e) {
return e.resolve().promise();
}
});
return r.applyToClass(d), d;
}), define("views/Login/StackView", [ "application/runtime", "wunderbits/WBViewPresenter", "project!core/WBDeferred", "project!core/lib/when" ], function(e, t, i, n) {
var a = e._, o = e.w_, r = t.prototype;
return t.extend({
viewClasses: {},
initialize: function() {
var e = this;
r.initialize.apply(e, arguments), e.views = [];
},
createView: function(e, t, i) {
var n = this, a = n.viewClasses[e];
return new a(o.merge({
previousView: i
}, t));
},
pushViews: function(e, t) {
var i = this, n = e.pop();
return a.each(e, function(e) {
i.pushView(e, !1, t);
}), i.pushView(n, !0, t);
},
pushView: function(e, t, n) {
var r = this, s = new i();
if (a.isArray(e)) return r.pushViews(e, n);
var l = r.beforePushView(e);
if (l) {
var d = r.views[r.views.length - 1];
d && d.trigger("before:push");
var c = r.addSubview(r.createView(e, {}, d));
c.stackViewName = e, o.merge(c.state, d && d.state || {}, n || {}), r.views.push(c), 
c.bindTo(c, "close", r.popView, r), c.bindTo(c, "open", r.pushView, r), c.bindTo(c, "sync", r.syncViews, r), 
r.appendView(c), t !== !1 && (r.viewMadeVisible(c), a.defer(function() {
r.showView(c, d).done(s.resolve, s);
}));
} else s.resolve();
return s.promise();
},
syncViews: function(e, t) {
for (var o, r, s = this, l = new i(), d = [], c = [], u = [], p = e[e.length - 1], m = !1, g = 0, f = s.views.length; f > g; g++) o = s.views[g], 
r = e[g], (r && o.stackViewName !== r || !r) && d.push(o), p && o.stackViewName === p && (m = !0), 
o = r = null;
a.each(d.reverse(), function(e) {
c.push(s.popView(e, {
triggerEvents: m,
animate: m,
fromSyncViews: !0
}));
});
var b = function() {
var t = e.shift(), i = a.find(s.views, function(e) {
return e.stackViewName === t;
});
i || u.push(t), e.length && b();
}, h = function() {
b(), n(s.pushViews(u, t)).done(function() {
l.resolve();
});
};
return c.length ? n(c).done(h) : h(), l.promise();
},
popView: function(e, t) {
var i = this;
e = e || i.views[i.views.length - 1], t || (t = {}), t.triggerEvents !== !1 && (t.triggerEvents = !0);
var n = t.animate;
e.trigger("before:pop"), i.views.pop();
var a = i.views[i.views.length - 1];
return a && o.merge(a.state, e.state), t.triggerEvents && a && i.viewMadeVisible(a), 
i.removeView(e, a, n);
},
appendView: function(e) {
var t = this;
e.$el.hide(), t.el.appendChild(e.render().el);
},
showView: function() {
return !0;
},
removeView: function() {
return !0;
},
viewMadeVisible: function() {},
beforePushView: function(e) {
return "string" == typeof e;
}
});
}), define("wunderbits/WBViewController", [ "./lib/dependencies", "./WBController", "./WBViewPresenter", "project!core/lib/fromSuper" ], function(e, t, i, n, a) {
var o = e._, r = t.prototype;
return t.extend({
model: a,
options: a,
state: a,
view: a,
_viewEvents: a,
"implements": {
visible: "viewMadeVisible",
hidden: "viewMadeHidden"
},
initialize: function(e) {
var t = this;
if (r.initialize.apply(t, arguments), t.view = e || t.view, !t.view instanceof i) throw new Error("Cannot initialize without instance of WBViewPresenter as self.view");
t.model = t.view.model, t.options = n.merge(t, "options"), t.state = n.merge(t, "state"), 
t.bindViewEvents();
},
onDestroy: function() {
var e = this;
e.destroyObject(e.options), e.destroyObject(e.state), e.destroyObject(e._viewEvents), 
r.onDestroy.apply(e, arguments);
},
bindViewEvents: function(e) {
var t = this;
e || (e = t);
for (var i in e["implements"]) t.bindInstanceEvent(i, e);
e.constructor && e.constructor.__super__ && t.bindViewEvents(e.constructor.__super__);
},
bindInstanceEvent: function(e, t) {
var i, n = this;
n._viewEvents || (n._viewEvents = {}), t["implements"].hasOwnProperty(e) && (i = t["implements"][e], 
i = o.isFunction(i) ? i : o.isFunction(n[i]) ? n[i] : null, i && n._viewEvents[e] !== i && (n.bindTo(n.view, e, i), 
n._viewEvents[e] = i));
},
stopItCold: function(e) {
e.preventDefault(), e.stopPropagation();
}
});
}), define("views/Login/SelectorController", [ "application/runtime", "wunderbits/WBViewController" ], function(e, t) {
var i = e.$, n = t.prototype;
return t.extend({
"implements": {
"click:select": "onClickSelect"
},
initialize: function() {
var e = this;
n.initialize.apply(e, arguments), e.bindTo(e.view, "visible", e.viewMadeVisible);
},
viewMadeVisible: function() {
var e = this;
delete e.hasSelected;
},
onClickSelect: function(t) {
var n = this;
if (!n.hasSelected) {
var a = i(t.target);
"A" !== t.target.tagName && (a = i(t.target).closest("a"));
var o = a.attr("rel");
n.hasSelected = !0, o && e.trigger("route:" + o);
}
}
});
}), define("controllers/Auth/BaseController", [ "application/runtime", "helpers/Auth/OAuthHelper", "helpers/ChromeIdentity", "project!sdk", "wunderbits/WBViewController" ], function(e, t, i, n, a, o) {
var r = a.prototype, s = e.config, l = i.identity;
return a.extend({
"implements": {
"create:service": "createService"
},
initialize: function() {
var e = this;
r.initialize.apply(e, arguments), e.on("loading:start", e.loadingStart), e.on("loading:end", e.loadingEnd);
},
providerName: null,
authBaseUrl: null,
authUrl: function() {
var e = this, i = e.authParams();
return t.authUrl(e.authBaseUrl, i);
},
parseToken: function(e) {
var t, i = "access_token=", n = e.indexOf(i);
return n > 0 && (n += i.length, t = e.substr(n), t = t.split("&")[0]), t;
},
connectExternal: function() {
var e = this;
e.trigger("loading:start"), l && l.launchWebAuthFlow({
url: e.authUrl(),
interactive: !0
}, function(t) {
var i = t !== o && e.parseToken(t);
t !== o && i ? e.handleToken(i) : e.oauthError();
});
},
handleToken: function(e) {
var t = this;
e ? t.requestAPIUser(e).done(t.apiSuccess, t).fail(function(i, n) {
t.apiError(n, e);
}) : t.oauthError();
},
requestAPIUser: function(e) {
var t = this, i = n.services.auth, a = new i({
config: s,
clientID: s.clientID
});
return a.exchangeToken(t.providerName, e);
},
_loggedIn: function() {
e.reload("/start/lists/inbox");
},
apiSuccess: function(t) {
var i = this;
i.loadingEnd(), e.user.loginSuccess(t, {
callback: i._loggedIn
});
},
oauthError: function() {
var e = this;
e.loadingEnd();
},
apiError: function(e, t) {
var i = this;
404 === e ? i.requestUserProfile(t).done(i.profileSuccess, i).fail(i.profileError, i) : i.loadingEnd();
},
profileSuccess: function(e, t) {
var i = this;
i.loadingEnd(), i.view.trigger("open", "external-signup", !0, {
providerType: i.providerName,
providerId: e.providerId,
name: e.name,
email: e.email,
avatar: e.avatar,
token: t
});
},
profileError: function() {
var e = this;
e.loadingEnd();
},
createService: function(e, i) {
return t.createService(e.providerType, e.token).then(i).promise();
},
loadingStart: function() {
var e = this;
e.view.toggleLoading(!0, e.providerName);
},
loadingEnd: function() {
var e = this;
e.view.toggleLoading(!1, e.providerName);
}
});
}), define("controllers/Auth/FacebookController", [ "application/runtime", "helpers/Auth/facebook", "controllers/Auth/BaseController", "project!core/WBDeferred" ], function(e, t, i, n) {
return i.extend({
"implements": {
"click:facebook": "connectWithFacebook",
"createService:facebook": "createService"
},
providerName: t.providerName,
authBaseUrl: t.authBaseUrl,
authParams: t.authParams,
connectWithFacebook: function() {
var i = this;
e.env.isChromeApp() ? i.connectExternal() : t.getFacebookOAuthToken("login/", !1);
},
requestUserProfile: function(e) {
var i = this, a = new n();
return t.getFacebookUserGraph(e, function(t) {
a.resolve({
providerType: i.providerName,
providerId: t.id,
name: t.name,
email: t.email,
locale: t.locale,
avatar: t.avatar,
confirmed: !1
}, e);
}), a.promise();
}
});
}), define("controllers/Auth/GoogleController", [ "application/runtime", "helpers/Auth/google", "helpers/ChromeIdentity", "controllers/Auth/BaseController", "project!core/WBDeferred" ], function(e, t, i, n, a) {
var o = i.identity, r = n.prototype;
return n.extend({
"implements": {
"click:google": "connectWithGoogle"
},
providerName: t.providerName,
authBaseUrl: t.authBaseUrl,
authParams: function(e) {
return t.authParams(e);
},
connectWithGoogle: function() {
var e = this, i = !1;
e.trigger("loading:start"), t.connectWithGoogle("googleOAuthLogin", i).done(function(t) {
e.handleToken(t);
}).fail(e.oauthError, e);
},
requestUserProfile: function(e) {
var i = new a();
return t.requestPlusProfile(e).done(function(t) {
i.resolve(t, e);
}), i.promise();
},
loadingStart: function() {
var t = this;
e.env.isChromeApp() && o ? o.getProfileUserInfo(function(e) {
var i = e || {};
(i.email || i.id) && r.loadingStart.apply(t, arguments);
}) : r.loadingStart.apply(t, arguments);
}
});
}), define("helpers/LocationHelper", [ "wunderbits/global", "project!core/WBSingleton" ], function(e, t) {
var i = e.navigator;
return t.extend({
isProbablyInChina: function() {
var e = i.language, t = [ "zh", "zh-cn" ], n = -(new Date().getTimezoneOffset() / 60);
return t.indexOf(e) >= 0 && 8 === n;
}
});
}), define("loaders/lib/normalize", [], function() {
return function(e) {
return function(t, i) {
var n = "/" + e + "/";
if (0 === t.indexOf(n) || /\.js$/.test(t)) return t;
var a, o = t.split("/")[0], r = "." === o || ".." === o;
if (r) return a = o + n + t.slice(o.length + 1), "/" + i(a + ".js");
var s = "" === o;
return a = s ? t : n + t, i(a + ".js");
};
};
}), define("template", [ "vendor/handlebars.runtime", "loaders/lib/normalize" ], function(e, t) {
return {
load: function(t, i, n) {
i([ t ], function(t) {
var a;
i.isBrowser && (a = e.template(t.data)), n(a);
});
},
normalize: t("templates")
};
}), define("/templates/login/selector.js", {
name: "login/selector",
data: {
"1": function(e, t, i, n) {
var a, o = ' <div class="cols buttons-external"> <div class="col-50"> <a class="button big external facebook auth ';
return a = t.unless.call(e, e && e.isChromeApp, {
name: "unless",
hash: {},
fn: this.program(2, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), o += '"> <div class="icon-login facebook"></div> <span></span>Facebook </a> </div> <div class="col-50"> <a class="button big external google auth ', 
a = t.unless.call(e, e && e.isChromeApp, {
name: "unless",
hash: {},
fn: this.program(2, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), o + '"> <div class="icon-login google"></div> <span></span>Google </a> </div> </div> ';
},
"2": function() {
return "disabled";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = "";
return a = t["if"].call(e, e && e.showSocialButtons, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l + ' <a rel="signup" class="button big blue"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "login_create_new_account", {
name: "localized",
hash: {},
data: n
}))) + ' </a> <a rel="login" class="button big"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_log_in", {
name: "localized",
hash: {},
data: n
}))) + " </a> ";
},
useData: !0
}
}), define("style", [ "loaders/lib/normalize" ], function(e) {
return {
load: function(e, t, i) {
t([ e ], i);
},
normalize: e("styles")
};
}), define("/styles/login/_selector.js", {
name: "login/_selector",
data: "#wunderlist-base .login-selector{position:absolute;bottom:0;right:14px;left:14px;}#wunderlist-base .login-selector .button{margin-bottom:14px}"
}), define("views/Login/SelectorView", [ "application/runtime", "wunderbits/WBViewPresenter", "views/Login/SelectorController", "controllers/Auth/FacebookController", "controllers/Auth/GoogleController", "helpers/LocationHelper", "template!login/selector", "style!login/_selector" ], function(e, t, i, n, a, o, r, s) {
var l = t.prototype;
return t.extend({
url: "welcome",
className: "login-selector",
state: {
enableShortcuts: !1
},
styles: [ s ],
"implements": [ i, n, a ],
template: r,
emits: {
"touchstart .button": "click:select",
"click .button": "click:select",
"click .auth.facebook": "click:facebook",
"click .auth.google": "click:google"
},
formatData: function(t) {
return t = t || {}, t.showSocialButtons = !o.isProbablyInChina() && !e.env.isNodeWebkit(), 
t.isChromeApp = e.env.isChromeApp(), t;
},
fadeIn: function() {
var e = this;
return e.state.enableShortcuts = !0, l.fadeIn.apply(e, arguments);
},
fadeOut: function() {
var e = this;
return e.state.enableShortcuts = !1, l.fadeOut.apply(e, arguments);
},
toggleLoading: function(e, t) {
var i = this;
e = !!e, i.$el.toggleClass("loading", e), i.$(".button, page-form, .auth").toggleClass("disabled", e), 
t && i.$(".auth." + t).toggleClass("loading", e), i.$("input").attr("readonly", e);
}
});
}), define("/templates/login/error.js", {
name: "login/error",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression;
return '<div class="arrow"></div> <p class="message">' + r((a = t.message || e && e.message, 
typeof a === o ? a.call(e, {
name: "message",
hash: {},
data: n
}) : a)) + "</p>";
},
useData: !0
}
}), define("/styles/login/_error.js", {
name: "login/_error",
data: '#wunderlist-base .error{position:absolute;z-index:9999;border:1px solid #aa201b;max-width:210px;background:#d62822;-webkit-border-radius:3px;border-radius:3px;padding:6px 12px;}#wunderlist-base .error .message{margin:0;font-size:12px;color:#fff;text-shadow:none;font-weight:bold}#wunderlist-base .error .arrow{position:absolute;border-style:solid;border-color:#aa201b transparent transparent transparent;border-width:7px;bottom:-14px;height:0;width:0;opacity:1;-ms-filter:none;filter:none;}#wunderlist-base .error .arrow:before{position:absolute;content:"";margin-left:-7px;bottom:-6px;border-style:solid;border-width:7px;border-color:#d62822 transparent transparent transparent}'
}), define("views/Login/ErrorView", [ "application/runtime", "wunderbits/WBViewPresenter", "template!login/error", "style!login/_error" ], function(e, t, i, n) {
var a = e.$, o = t.prototype;
return t.extend({
className: "error popover",
template: i,
styles: [ n ],
renderData: {
message: null
},
initialize: function() {
var e = this;
if (o.initialize.apply(e, arguments), "string" != typeof e.options.errorKey) throw new Error("options.errorKey must be a string");
if (!e.options.target || !e.options.target.tagName) throw new Error("options.target must be a DOM node element");
e.options.inputType = e.options.target.getAttribute("type");
},
formatData: function(t) {
var i = this;
t || (t = {});
var n = i.options.errorKey;
return "empty_value" === n ? n = "text" === i.options.inputType ? "login_empty_" + i.options.target.getAttribute("name") : "login_empty_" + i.options.inputType : "too_short" === n ? n = "login_" + i.options.target.getAttribute("name") + "_too_short" : "invalid_email" === n && (n = "login_email_not_valid"), 
t.message = e.language.getText(n), t;
},
render: function() {
var e = this, t = a(e.options.target);
return e.bindTo(t, "blur keydown keyup change", e.destroy), t.after(o.render.call(e).el), 
e.renderPosition(), e;
},
renderPosition: function() {
var e = this, t = a(e.options.target), i = t.position(), n = t.offsetParent().outerHeight() - i.top;
e.$el.css({
left: i.left - 12,
bottom: n + 10
});
}
});
}), define("wunderbits/data/tld", {
list: [ "aaa", "aarp", "abarth", "abb", "abbott", "abbvie", "abc", "able", "abogado", "abudhabi", "ac", "academy", "accenture", "accountant", "accountants", "acer", "aco", "active", "actor", "ad", "adac", "ads", "adult", "ae", "aeg", "aero", "aetna", "af", "afamilycompany", "afl", "africa", "africamagic", "ag", "agakhan", "agency", "ai", "aig", "aigo", "airbus", "airforce", "airtel", "akdn", "al", "alcon", "alfaromeo", "alibaba", "alipay", "allfinanz", "allfinanzberater", "allfinanzberatung", "allstate", "ally", "alsace", "alstom", "am", "amazon", "americanexpress", "americanfamily", "amex", "amfam", "amica", "amp", "amsterdam", "an", "analytics", "and", "android", "anquan", "ansons", "anthem", "antivirus", "anz", "ao", "aol", "apartments", "app", "apple", "aq", "aquarelle", "aquitaine", "ar", "arab", "aramco", "archi", "architect", "are", "army", "arpa", "art", "arte", "as", "asda", "asia", "associates", "astrium", "at", "athleta", "attorney", "au", "auction", "audi", "audible", "audio", "auspost", "author", "auto", "autoinsurance", "autos", "avery", "avianca", "aw", "aws", "ax", "axa", "axis", "az", "azure", "ba", "baby", "baidu", "banamex", "bananarepublic", "band", "bank", "banque", "bar", "barcelona", "barclaycard", "barclays", "barefoot", "bargains", "baseball", "basketball", "bauhaus", "bayern", "bb", "bbb", "bbc", "bbt", "bbva", "bcg", "bcn", "bd", "be", "beats", "beauty", "beer", "beknown", "bentley", "berlin", "best", "bestbuy", "bet", "bf", "bg", "bh", "bharti", "bi", "bible", "bid", "bike", "bing", "bingo", "bio", "biz", "bj", "black", "blackfriday", "blanco", "blockbuster", "blog", "bloomberg", "bloomingdales", "blue", "bm", "bms", "bmw", "bn", "bnl", "bnpparibas", "bo", "boats", "boehringer", "bofa", "bom", "bond", "boo", "book", "booking", "boots", "bosch", "bostik", "boston", "bot", "boutique", "box", "br", "bradesco", "bridgestone", "broadway", "broker", "brother", "brussels", "bs", "bt", "budapest", "bugatti", "buick", "build", "builders", "business", "buy", "buzz", "bv", "bw", "bway", "by", "bz", "bzh", "ca", "cab", "cadillac", "cafe", "cal", "call", "calvinklein", "cam", "camera", "camp", "canalplus", "cancerresearch", "canon", "capetown", "capital", "capitalone", "car", "caravan", "cards", "care", "career", "careers", "caremore", "carinsurance", "cars", "cartier", "casa", "case", "caseih", "cash", "cashbackbonus", "casino", "cat", "catalonia", "catering", "catholic", "cba", "cbn", "cbre", "cbs", "cc", "cd", "ceb", "center", "ceo", "cern", "cf", "cfa", "cfd", "cg", "ch", "chanel", "changiairport", "channel", "charity", "chartis", "chase", "chat", "chatr", "cheap", "chesapeake", "chevrolet", "chevy", "chintai", "chk", "chloe", "christmas", "chrome", "chrysler", "church", "ci", "cialis", "cimb", "cipriani", "circle", "cisco", "citadel", "citi", "citic", "city", "cityeats", "ck", "cl", "claims", "cleaning", "click", "clinic", "clinique", "clothing", "cloud", "club", "clubmed", "cm", "cn", "co", "coach", "codes", "coffee", "college", "cologne", "com", "comcast", "commbank", "community", "company", "compare", "computer", "comsec", "condos", "connectors", "construction", "consulting", "contact", "contractors", "cooking", "cookingchannel", "cool", "coop", "corp", "corsica", "country", "coupon", "coupons", "courses", "cpa", "cr", "credit", "creditcard", "creditunion", "cricket", "crown", "crs", "cruise", "cruises", "csc", "cu", "cuisinella", "cv", "cw", "cx", "cy", "cymru", "cyou", "cz", "dabur", "dad", "dance", "data", "date", "dating", "datsun", "day", "dclk", "dds", "de", "deal", "dealer", "deals", "degree", "delivery", "dell", "delmonte", "deloitte", "delta", "democrat", "dental", "dentist", "desi", "design", "deutschepost", "dev", "dhl", "diamonds", "diet", "digikey", "digital", "direct", "directory", "discount", "discover", "dish", "diy", "dj", "dk", "dm", "dnb", "dnp", "do", "docomo", "docs", "doctor", "dodge", "dog", "doha", "domains", "doosan", "dot", "dotafrica", "download", "drive", "dstv", "dtv", "dubai", "duck", "dunlop", "duns", "dupont", "durban", "dvag", "dvr", "dwg", "dz", "earth", "eat", "ec", "eco", "ecom", "edeka", "edu", "education", "ee", "eg", "email", "emerck", "emerson", "energy", "engineer", "engineering", "enterprises", "epost", "epson", "equipment", "er", "ericsson", "erni", "es", "esq", "est", "estate", "esurance", "et", "etisalat", "eu", "eurovision", "eus", "events", "everbank", "exchange", "expert", "exposed", "express", "extraspace", "fage", "fail", "fairwinds", "faith", "family", "fan", "fans", "farm", "farmers", "fashion", "fast", "fedex", "feedback", "ferrari", "ferrero", "fi", "fiat", "fidelity", "fido", "film", "final", "finance", "financial", "financialaid", "finish", "fire", "firestone", "firmdale", "fish", "fishing", "fit", "fitness", "fj", "fk", "flickr", "flights", "flir", "florist", "flowers", "fls", "flsmidth", "fly", "fm", "fo", "foo", "food", "foodnetwork", "football", "ford", "forex", "forsale", "forum", "foundation", "fox", "fr", "free", "fresenius", "frl", "frogans", "frontdoor", "frontier", "ftr", "fujitsu", "fujixerox", "fun", "fund", "furniture", "futbol", "fyi", "ga", "gal", "gallery", "gallo", "gallup", "game", "games", "gap", "garden", "garnier", "gay", "gb", "gbiz", "gcc", "gd", "gdn", "ge", "gea", "gecompany", "ged", "gent", "genting", "geo", "george", "gf", "gg", "ggee", "gh", "gi", "gift", "gifts", "gives", "giving", "gl", "glade", "glass", "gle", "glean", "global", "globalx", "globo", "gm", "gmail", "gmbh", "gmc", "gmo", "gmx", "gn", "godaddy", "gold", "goldpoint", "golf", "goo", "goodhands", "goodyear", "goog", "google", "gop", "got", "gotv", "gov", "gp", "gq", "gr", "grainger", "graphics", "gratis", "gree", "green", "gripe", "grocery", "group", "gs", "gt", "gu", "guardian", "guardianlife", "guardianmedia", "gucci", "guge", "guide", "guitars", "guru", "gw", "gy", "hair", "halal", "hamburg", "hangout", "haus", "hbo", "hdfc", "hdfcbank", "health", "healthcare", "heart", "heinz", "help", "helsinki", "here", "hermes", "hgtv", "hilton", "hiphop", "hisamitsu", "hitachi", "hiv", "hk", "hkt", "hm", "hn", "hockey", "holdings", "holiday", "home", "homedepot", "homegoods", "homes", "homesense", "honda", "honeywell", "horse", "hospital", "host", "hosting", "hot", "hoteis", "hotel", "hoteles", "hotels", "hotmail", "house", "how", "hr", "hsbc", "ht", "htc", "hu", "hughes", "hyatt", "hyundai", "ibm", "icbc", "ice", "icu", "id", "idn", "ie", "ieee", "ifm", "iinet", "ikano", "il", "im", "imamat", "imdb", "immo", "immobilien", "in", "inc", "indians", "industries", "infiniti", "info", "infosys", "infy", "ing", "ink", "institute", "insurance", "insure", "int", "intel", "international", "intuit", "investments", "io", "ipiranga", "iq", "ir", "ira", "irish", "is", "iselect", "islam", "ismaili", "ist", "istanbul", "it", "itau", "itv", "iveco", "iwc", "jaguar", "java", "jcb", "jcp", "je", "jeep", "jetzt", "jewelry", "jio", "jlc", "jll", "jm", "jmp", "jnj", "jo", "jobs", "joburg", "jot", "joy", "jp", "jpmorgan", "jpmorganchase", "jprs", "juegos", "juniper", "jupiter", "justforu", "kaufen", "kddi", "ke", "kerastase", "kerryhotels", "kerrylogisitics", "kerryproperties", "ketchup", "kfh", "kg", "kh", "ki", "kia", "kid", "kids", "kiehls", "kim", "kinder", "kindle", "kitchen", "kiwi", "km", "kn", "koeln", "komatsu", "konami", "kone", "kosher", "kp", "kpmg", "kpn", "kr", "krd", "kred", "ksb", "kuokgroup", "kw", "ky", "kyknet", "kyoto", "kz", "la", "lacaixa", "ladbrokes", "lamborghini", "lamer", "lancaster", "lancia", "lancome", "land", "landrover", "lanxess", "lasalle", "lat", "latino", "latrobe", "law", "lawyer", "lb", "lc", "lds", "le", "lease", "leclerc", "lefrak", "legal", "lego", "lexus", "lgbt", "li", "liaison", "lidl", "life", "lifeinsurance", "lifestyle", "lighting", "like", "lilly", "limited", "limo", "lincoln", "linde", "link", "lipsy", "live", "livestrong", "living", "lixil", "lk", "llc", "llp", "ln", "loan", "loans", "locker", "locus", "loft", "lol", "london", "loreal", "lotte", "lotto", "love", "lpl", "lplfinancial", "lr", "ls", "lt", "ltd", "ltda", "lu", "lunar", "lundbeck", "lupin", "luxe", "luxury", "lv", "ly", "ma", "macys", "madrid", "maif", "mail", "maison", "makeup", "man", "management", "mango", "map", "market", "marketing", "markets", "marriott", "mars", "marshalls", "maserati", "matrix", "mattel", "maybelline", "mba", "mc", "mcd", "mcdonalds", "mckinsey", "md", "me", "med", "media", "medical", "meet", "melbourne", "meme", "memorial", "men", "menu", "meo", "merck", "merckmsd", "metlife", "mg", "mh", "miami", "microsoft", "mih", "mii", "mil", "mini", "mint", "mit", "mitek", "mitsubishi", "mk", "ml", "mlb", "mls", "mm", "mma", "mn", "mnet", "mo", "mobi", "mobile", "mobily", "moda", "moe", "moi", "mom", "monash", "money", "monster", "montblanc", "moon", "mopar", "mormon", "mortgage", "moscow", "moto", "motorcycles", "mov", "movie", "movistar", "mozaic", "mp", "mq", "mr", "mrmuscle", "mrporter", "ms", "msd", "mt", "mtn", "mtpc", "mtr", "mu", "multichoice", "museum", "music", "mutual", "mutualfunds", "mutuelle", "mv", "mw", "mx", "my", "mz", "mzansimagic", "na", "nab", "nadex", "nagoya", "name", "naspers", "nationwide", "natura", "navy", "nba", "nc", "ne", "nec", "neptune", "net", "netaporter", "netbank", "netflix", "network", "neustar", "new", "newholland", "news", "next", "nextdirect", "nexus", "nf", "nfl", "ng", "ngo", "nhk", "ni", "nico", "nike", "nikon", "ninja", "nissan", "nissay", "nl", "no", "nokia", "northlandinsurance", "northwesternmutual", "norton", "now", "nowruz", "nowtv", "np", "nr", "nra", "nrw", "ntt", "nu", "nyc", "nz", "obi", "observer", "off", "office", "okinawa", "olayan", "olayangroup", "oldnavy", "ollo", "olympus", "om", "omega", "one", "ong", "onl", "online", "onyourside", "ooo", "open", "oracle", "orange", "org", "organic", "orientexpress", "origins", "osaka", "otsuka", "ott", "overheidnl", "ovh", "pa", "page", "pamperedchef", "panasonic", "panerai", "paris", "pars", "partners", "parts", "party", "passagens", "patagonia", "patch", "pay", "payu", "pccw", "pe", "persiangulf", "pet", "pets", "pf", "pfizer", "pg", "ph", "pharmacy", "phd", "philips", "phone", "photo", "photography", "photos", "physio", "piaget", "pics", "pictet", "pictures", "pid", "pin", "ping", "pink", "pioneer", "piperlime", "pitney", "pizza", "pk", "pl", "place", "play", "playstation", "plumbing", "plus", "pluto", "pm", "pn", "pnc", "pohl", "poker", "politie", "polo", "porn", "post", "pr", "pramerica", "praxi", "press", "prime", "pro", "prod", "productions", "prof", "progressive", "promo", "properties", "property", "protection", "pru", "prudential", "ps", "pt", "pub", "pw", "pwc", "py", "qa", "qpon", "qtel", "quebec", "quest", "qvc", "racing", "radio", "raid", "ram", "re", "read", "realestate", "realtor", "realty", "recipes", "red", "redken", "redstone", "redumbrella", "rehab", "reise", "reisen", "reit", "reliance", "ren", "rent", "rentals", "repair", "report", "republican", "rest", "restaurant", "retirement", "review", "reviews", "rexroth", "rich", "richardli", "ricoh", "rightathome", "ril", "rio", "rip", "rmit", "ro", "rocher", "rocks", "rockwool", "rodeo", "rogers", "roma", "room", "rs", "rsvp", "ru", "rugby", "ruhr", "run", "rw", "rwe", "ryukyu", "sa", "saarland", "safe", "safety", "safeway", "sakura", "sale", "salon", "samsclub", "samsung", "sandvik", "sandvikcoromant", "sanofi", "sap", "sapo", "sapphire", "sarl", "sas", "saturn", "save", "saxo", "sb", "sbi", "sbs", "sc", "sca", "scb", "schaeffler", "schmidt", "scholarships", "school", "schule", "schwarz", "schwarzgroup", "science", "scjohnson", "scor", "scot", "sd", "se", "search", "seat", "secure", "security", "seek", "select", "sener", "services", "ses", "seven", "sew", "sex", "sexy", "sfr", "sg", "sh", "shangrila", "sharp", "shaw", "shell", "shia", "shiksha", "shoes", "shop", "shopping", "shopyourway", "shouji", "show", "showtime", "shriram", "si", "silk", "sina", "singles", "site", "sj", "sk", "ski", "skin", "skolkovo", "sky", "skydrive", "skype", "sl", "sling", "sm", "smart", "smile", "sn", "sncf", "so", "soccer", "social", "softbank", "software", "sohu", "solar", "solutions", "song", "sony", "soy", "spa", "space", "spiegel", "sport", "sports", "spot", "spreadbetting", "sr", "srl", "srt", "st", "stada", "staples", "star", "starhub", "statebank", "statefarm", "statoil", "stc", "stcgroup", "stockholm", "storage", "store", "stream", "stroke", "studio", "study", "style", "su", "sucks", "supersport", "supplies", "supply", "support", "surf", "surgery", "suzuki", "sv", "svr", "swatch", "swiftcover", "swiss", "sx", "sy", "sydney", "symantec", "systems", "sz", "tab", "taipei", "talk", "taobao", "target", "tata", "tatamotors", "tatar", "tattoo", "tax", "taxi", "tc", "tci", "td", "tdk", "team", "tech", "technology", "tel", "telecity", "telefonica", "temasek", "tennis", "terra", "teva", "tf", "tg", "th", "thai", "thd", "theater", "theatre", "theguardian", "thehartford", "tiaa", "tickets", "tienda", "tiffany", "tips", "tires", "tirol", "tj", "tjmaxx", "tjx", "tk", "tkmaxx", "tl", "tm", "tmall", "tn", "to", "today", "tokyo", "tools", "top", "toray", "toshiba", "total", "tour", "tours", "town", "toyota", "toys", "tp", "tr", "trade", "tradershotels", "trading", "training", "transformers", "translations", "transunion", "travel", "travelchannel", "travelers", "travelersinsurance", "travelguard", "trust", "trv", "tt", "tube", "tui", "tunes", "tushu", "tv", "tvs", "tw", "tz", "ua", "ubank", "ubs", "uconnect", "ug", "uk", "ultrabook", "ummah", "unicom", "unicorn", "university", "uno", "uol", "ups", "uranus", "us", "uy", "uz", "va", "vacations", "vana", "vanguard", "vanish", "vc", "ve", "vegas", "ventures", "venus", "verisign", "vermögensberater", "vermögensberatung", "versicherung", "vet", "vg", "vi", "viajes", "video", "vig", "viking", "villas", "vin", "vip", "virgin", "visa", "vision", "vista", "vistaprint", "viva", "vivo", "vlaanderen", "vn", "vodka", "volkswagen", "volvo", "vons", "vote", "voting", "voto", "voyage", "vu", "vuelos", "wales", "walmart", "walter", "wang", "wanggou", "warman", "watch", "watches", "weather", "weatherchannel", "web", "webcam", "weber", "webjet", "webs", "website", "wed", "wedding", "weibo", "weir", "wf", "whoswho", "wien", "wiki", "williamhill", "wilmar", "win", "windows", "wine", "winners", "wme", "wolterskluwer", "woodside", "work", "works", "world", "wow", "ws", "wtc", "wtf", "xbox", "xerox", "xfinity", "xihuan", "xin", "xperia", "xxx", "xyz", "yachts", "yahoo", "yamaxun", "yandex", "ye", "yellowpages", "yodobashi", "yoga", "yokohama", "you", "youtube", "yt", "yun", "za", "zappos", "zara", "zero", "zip", "zippo", "zm", "zone", "zuerich", "zulu", "zw", "广东", "дети", "мон", "москва", "онлайн", "орг", "рус", "рф", "сайт", "срб", "укр", "қаз", "الاردن", "الجزائر", "السعودية", "السعوديه", "السعودیة", "السعودیۃ", "المغرب", "اليمن", "امارات", "ايران", "ایران", "بازار", "بھارت", "تونس", "سوريا", "سورية", "شبكة", "عمان", "فلسطين", "قطر", "مصر", "مليسيا", "موقع", "भारत", "संगठन", "বাংলা", "ভারত", "ਭਾਰਤ", "ભારત", "இந்தியா", "இலங்கை", "சிங்கப்பூர்", "భారత్", "ලංකා", "ไทย", "გე", "みんな", "世界", "中信", "中国", "中國", "中文网", "企业", "佛山", "八卦", "公司", "公益", "台湾", "台灣", "商城", "商店", "商标", "在线", "娱乐", "我爱你", "手机", "政务", "政府", "新加坡", "机构", "游戏", "移动", "组织机构", "网址", "网店", "网络", "臺灣", "集团", "香港", "삼성", "한국" ]
}), define("wunderbits/helpers/tokenizer", [ "project!core/WBSingleton", "wunderbits/data/tld" ], function(e, t) {
function i() {
throw new Error("not implemented");
}
var n = t.list, a = /\.(\w{2,13})(?:\/|:|$)/;
return e.extend({
createNode: i,
isValidMatch: function(e) {
var t = this, i = t.validationRegExp;
if (!i) return !0;
if (!e || !t.validationRegExp.test(e)) return !1;
if (t.validateTLD) {
var o = e.match(a);
return !!(o && o[1] && n.indexOf(o[1].toLowerCase()) >= 0);
}
return !0;
},
extractTokens: function(e) {
if (e && e.length) {
var t = this, i = [], n = 0;
return e.replace(t.extractionRegExp, function(e, a, o) {
var r = t.invalidLeadingChars;
if (!(a > 0 && r && r.test(o[a - 1]))) {
if (a > 0) {
var s = o.substring(n, a);
n += s.length, i.push(s);
}
i.push(e), n += e.length;
}
}), n > 0 && n < e.length && i.push(e.substring(n)), i;
}
},
tokenize: function(e) {
var t = this;
if (!e.parentNode || "a" !== e.parentNode.nodeName.toLowerCase()) {
var i = e.nodeValue, n = t.extractTokens(i);
if (n && n.length && (1 !== n.length || t.isValidMatch(n[0]))) {
for (var a, o = []; n.length; ) a = n.shift(), a.length && (t.isValidMatch(a) ? o.push(t.createNode(a)) : a && o.push(document.createTextNode(a)));
return o;
}
}
}
});
}), define("wunderbits/helpers/email", [ "./tokenizer" ], function(e) {
return e.extend({
validateTLD: !0,
invalidLeadingChars: /[#=@&]/,
validationRegExp: /^[^\s@＠=]+[@|＠][^\.\s@＠]+(\.[^\.\s@＠]+)+$/,
extractionRegExp: /[a-z0-9][\/\(\)\{\}\[\]\-\.\+\w]*[@|＠][a-z0-9][\/\(\)\{\}\[\]\-\.\+\w]*\.[a-z]{2,6}/gi,
createNode: function(e) {
var t = document.createElement("a");
return t.className = "email linkout", t.target = "_blank", t.href = "mailto:" + e, 
t.textContent = e, t;
},
isValidEmail: function(e) {
return this.isValidMatch(e);
},
extractEmails: function(e) {
return this.extractTokens(e);
}
});
}), define("vendor/mailcheck", [ "vendor/jquery" ], function(e) {
var t = {
mailcheck: {
threshold: 3,
defaultDomains: [ "yahoo.com", "google.com", "hotmail.com", "gmail.com", "me.com", "aol.com", "mac.com", "live.com", "comcast.net", "googlemail.com", "msn.com", "hotmail.co.uk", "yahoo.co.uk", "facebook.com", "verizon.net", "sbcglobal.net", "att.net", "gmx.com", "mail.com" ],
defaultTopLevelDomains: [ "co.uk", "com", "net", "org", "info", "edu", "gov", "mil" ],
run: function(e) {
e.domains = e.domains || t.mailcheck.defaultDomains, e.topLevelDomains = e.topLevelDomains || t.mailcheck.defaultTopLevelDomains, 
e.distanceFunction = e.distanceFunction || t.sift3Distance;
var i = t.mailcheck.suggest(encodeURI(e.email), e.domains, e.topLevelDomains, e.distanceFunction);
i ? e.suggested && e.suggested(i) : e.empty && e.empty();
},
suggest: function(e, t, i, n) {
e = e.toLowerCase();
var a = this.splitEmail(e), o = this.findClosestDomain(a.domain, t, n);
if (o) {
if (o != a.domain) return {
address: a.address,
domain: o,
full: a.address + "@" + o
};
} else {
var r = this.findClosestDomain(a.topLevelDomain, i);
if (a.domain && r && r != a.topLevelDomain) {
var s = a.domain;
return o = s.substring(0, s.lastIndexOf(a.topLevelDomain)) + r, {
address: a.address,
domain: o,
full: a.address + "@" + o
};
}
}
return !1;
},
findClosestDomain: function(e, t, i) {
var n, a = 99, o = null;
if (!e || !t) return !1;
i || (i = this.sift3Distance);
for (var r = 0; r < t.length; r++) {
if (e === t[r]) return e;
n = i(e, t[r]), a > n && (a = n, o = t[r]);
}
return a <= this.threshold && null !== o ? o : !1;
},
sift3Distance: function(e, t) {
if (null == e || 0 === e.length) return null == t || 0 === t.length ? 0 : t.length;
if (null == t || 0 === t.length) return e.length;
for (var i = 0, n = 0, a = 0, o = 0, r = 5; i + n < e.length && i + a < t.length; ) {
if (e.charAt(i + n) == t.charAt(i + a)) o++; else {
n = 0, a = 0;
for (var s = 0; r > s; s++) {
if (i + s < e.length && e.charAt(i + s) == t.charAt(i)) {
n = s;
break;
}
if (i + s < t.length && e.charAt(i) == t.charAt(i + s)) {
a = s;
break;
}
}
}
i++;
}
return (e.length + t.length) / 2 - o;
},
splitEmail: function(e) {
var t = e.split("@");
if (t.length < 2) return !1;
for (var i = 0; i < t.length; i++) if ("" === t[i]) return !1;
var n = t.pop(), a = n.split("."), o = "";
if (0 == a.length) return !1;
if (1 == a.length) o = a[0]; else {
for (var i = 1; i < a.length; i++) o += a[i] + ".";
a.length >= 2 && (o = o.substring(0, o.length - 1));
}
return {
topLevelDomain: o,
domain: n,
address: t.join("@")
};
}
}
};
return e && !function(e) {
e.fn.mailcheck = function(e) {
var i = this;
if (e.suggested) {
var n = e.suggested;
e.suggested = function(e) {
n(i, e);
};
}
if (e.empty) {
var a = e.empty;
e.empty = function() {
a.call(null, i);
};
}
e.email = this.val(), t.mailcheck.run(e);
};
}(e), t;
}), define("views/Login/ValidationController", [ "application/runtime", "wunderbits/WBViewController", "wunderbits/helpers/email", "vendor/mailcheck", "wunderbits/data/tld" ], function(e, t, i, n, a) {
var o = e.$, r = n.mailcheck, s = r.defaultDomains.slice();
s.push("6wunderkinder.com");
var l = r.defaultTopLevelDomains.slice();
l.push.apply(l, a.list);
var d = [ /[a-z]/, /[A-Z]/, /[0-9]/, /[^a-zA-Z0-9]/ ];
return t.extend({
"implements": {
"blur:input": "check"
},
correct: function(e) {
var t = this;
e = e && e.target || e;
var i = o(e), a = i.attr("type"), r = i.val(), d = t.deferred();
if ("email" === a) {
var c = r.split("@");
if ("6w" === c[1]) {
if (r = c[0] + "@6wunderkinder", t.corrected || (t.corrected = {}), t.corrected[r] === e) return;
t.corrected[r] = e, n.mailcheck.run({
email: r,
domains: s,
topLevelDomains: l,
suggested: function(e) {
i.val(e.full), d.resolve(e.full);
},
empty: function() {
d.resolve();
}
});
}
} else d.resolve();
return d.promise();
},
validate: function(e) {
var t = this;
e = e && e.target || e;
var i = o(e), n = i.attr("type"), a = i.val(), r = t.deferred();
return "file" === n && r.resolve(), "email" === n ? t.validateEmail(e, a, r) : "password" === n ? t.validatePassword(e, a, r) : t.validateLength(e, a, r), 
r.promise();
},
validatePassword: function(e, t, i) {
var n = this, a = n.view.validatePassword, o = n.hasPasswordVariety(t), r = n.passwordContainsEmail(t), s = !o || r;
return a && s ? i.reject("too_short", e) : void n.validateLength(e, t, i);
},
passwordContainsEmail: function(e) {
var t = this, i = t.view.$("input[type=email]").val(), n = i.split(/@/)[0];
return n && e && e.indexOf(n) > -1 ? !0 : !1;
},
hasPasswordVariety: function(e) {
var t = 0;
return d.forEach(function(i) {
i.test(e) && (t += 1);
}), t >= 2;
},
validateEmail: function(e, t, n) {
i.isValidEmail(t) ? n.resolve(t, e) : n.reject("invalid_email", e);
},
validateLength: function(e, t, i) {
var n = e.getAttribute("data-validate-length") || 1;
t ? t.length < n ? i.reject("too_short", e) : i.resolve(t, e) : i.reject("empty_value", e);
},
validateList: function(e) {
function t() {
var o = e.shift();
i.validate(o).fail(function(e, t) {
i.view.renderError(e, t), n.reject(e, t);
}, i).done(function(i) {
var r = o.getAttribute("name");
a[r] = i, e.length && t() || n.resolve(a);
}, i);
}
var i = this, n = i.deferred(), a = {};
return t(), n.promise();
},
check: function(e) {
var t = this;
e = e && e.target || e;
var i = t.view.options.correctOnBlur ? t.correct(e) : t.deferred().resolve();
t.when(i).then(function() {
t.view.options.validateOnBlur && t.validate(e).fail(t.view.renderError);
});
}
});
}), define("wunderbits/data/keycodes", {
backspace: 8,
tab: 9,
enter: 13,
esc: 27,
shift: 16,
spacebar: 32,
left: 37,
up: 38,
right: 39,
down: 40,
del: 46,
zero: 48,
nine: 57,
padZero: 96,
padNine: 105,
dash: 189,
8: "backspace",
9: "tab",
13: "enter",
16: "shift",
17: "ctrl",
18: "alt",
20: "capslock",
27: "esc",
32: "space",
33: "pageup",
34: "pagedown",
35: "end",
36: "home",
37: "left",
38: "up",
39: "right",
40: "down",
45: "ins",
46: "del",
91: "meta",
93: "meta",
224: "meta",
106: "*",
107: "+",
109: "-",
110: ".",
111: "/",
186: ";",
187: "=",
188: ",",
189: "-",
190: ".",
191: "/",
192: "`",
219: "[",
220: "\\",
221: "]",
222: "'"
}), define("views/Login/FormViewController", [ "application/runtime", "views/Login/ValidationController", "wunderbits/data/keycodes" ], function(e, t, i) {
var n = e.$;
return t.extend({
"implements": {
"click:submit": "trySubmitForm",
"change:input": "checkInputKeys",
before: "beforePopOrPush",
visible: "bindGlobalKeys",
hidden: "unbindGlobalKeys"
},
viewMadeVisible: function() {
var e = this;
e.view.state.email && e.view.renderInputValue(e.view.getInput(".email"), e.view.state.email), 
e.view.state.name && e.view.renderInputValue(e.view.getInput(".name"), e.view.state.name), 
e.view.renderInputValue(null, null, !0);
},
beforePopOrPush: function() {
var e = this;
e.view.state.email = e.view.$(e.view.getInput(".email")).val();
},
bindGlobalKeys: function() {
var t = this;
t.view.globalKeysBind || (t.view.globalKeysBind = t.bindTo(n(e.global.document), "keyup", t.checkGlobalKeys));
},
unbindGlobalKeys: function() {
var e = this;
e.view.globalKeysBind && e.unbindFrom(e.view.globalKeysBind);
},
checkGlobalKeys: function(e) {
var t = this;
e.which === i.enter ? t.trySubmitForm() : e.which === i.esc && t.cancelForm();
},
checkInputKeys: function(e) {
var t = this, a = n(e.target);
t.view.renderSubmitEnabled(!0), e.which === i.enter ? t.validate(e.target).done(function() {
t.stepToNext(e.target);
}).fail(t.view.renderError, t.view) : e.which === i.esc && a.val("").focus(), e.stopPropagation();
},
stepToNext: function(e) {
var t = this, i = t.view.$("input"), a = i.index(e), o = a + 1, r = i[o];
r ? n(r).select() : (n(e).blur(), t.trySubmitForm());
},
submitForm: function() {
var e = this, t = e.deferred();
return t.resolve().promise();
},
cancelForm: function() {},
trySubmitForm: function() {
var t = this, i = t.view.$("input"), n = i.length && t.validateList(i.toArray()) || t.deferred().resolve();
n.done(function(i) {
function n(e) {
t.view.renderError(e), t.unbindFrom(a), t.view.renderSubmitLoading(!1);
}
t.view.renderSubmitLoading(!0);
var a = t.bindTo(e.user, "error", n);
t.submitForm(i).done(function() {
t.destroyed || (t.unbindFrom(a), t.view.renderSubmitLoading(!1));
}).fail(n);
}).fail(function() {
t.view.renderSubmitEnabled(!1);
});
}
});
}), define("/styles/login/_form.js", {
name: "login/_form",
data: "#wunderlist-base .content{background:#fff;-webkit-border-radius:6px;border-radius:6px;border:1px solid #e0e0e0;-webkit-border-radius:3px;border-radius:3px}#wunderlist-base .separator{position:relative;padding:14px;-webkit-box-shadow:inset 0 -1px 0 #e0e0e0;box-shadow:inset 0 -1px 0 #e0e0e0;}#wunderlist-base .separator.noline{-webkit-box-shadow:none;box-shadow:none;}#wunderlist-base .separator.noline.no-bottom-padding{padding-bottom:0}#wunderlist-base .separator.noline.no-top-padding{padding-top:0}#wunderlist-base .separator:last-child{-webkit-box-shadow:none;box-shadow:none}"
}), define("views/Login/FormView", [ "application/runtime", "wunderbits/WBViewPresenter", "views/Login/ErrorView", "views/Login/FormViewController", "style!login/_form", "style!login/_error" ], function(e, t, i, n, a, o) {
var r = t.prototype;
return t.extend({
renderData: {
isChromeApp: e.env.isChromeApp()
},
formatData: function(t) {
return t = t || {}, t.isChromeApp = e.env.isChromeApp(), t;
},
options: {
validateOnBlur: !1,
correctOnBlur: !0,
showBackButton: !0
},
className: "login-form",
styles: [ a, o ],
"implements": [ n ],
emits: {
"keyup input": "change:input",
"blur input": "blur:input",
"click .submit": "click:submit"
},
getInput: function(e) {
var t = this;
return t.$("input" + (e || ""))[0];
},
render: function() {
var e = this;
return r.render.apply(e, arguments), e.renderLocalized(), e;
},
renderError: function(e, t) {
var n = this;
"api_error_account_already_exists" === e && (t = n.$("input.email")[0]), t = t || n.$("input")[0], 
n.$(t).select(), n.addSubview(new i({
errorKey: e,
target: t
}), "error").render();
},
renderInputValue: function(e, t, i) {
var n = this, a = n.$(e || n.getInput()), o = a.attr("type");
t && "file" !== o && a.val(t), i && a.select();
},
renderSubmitEnabled: function(e) {
var t = this;
t.$(".submit").toggleClass("disabled", !e);
},
renderSubmitLoading: function(t) {
var i = this;
i.destroyed || (i.$(".submit").toggleClass("loading", t), i.renderSubmitEnabled(!t), 
e.trigger("login:enable", !t));
}
});
}), define("views/Login/SignUpController", [ "application/runtime", "views/Login/FormViewController", "project!core/WBDeferred" ], function(e, t, i) {
return t.extend({
"implements": {
"click:signin": "openSignIn"
},
submitForm: function(t) {
var n = this, a = new i();
return e.user.register(t, {
success: function() {
a.resolve(), n.openApp();
}
}), a.promise();
},
openApp: function() {
var t = this, i = t.view, n = i.state.path || "lists/inbox";
n.indexOf("setup") < 0 && (n = "setup/" + n), "main" === e.application ? e.trigger("route:" + n) : e.reload("/" + n, !1);
},
openSignIn: function() {
var e = this;
e.view.trigger("sync", [ "selector", "login" ]);
}
});
}), define("wunderbits/views/WBFileSelectorView", [ "../lib/dependencies", "../WBView" ], function(e, t) {
function i(e) {
return e = e.originalEvent || e, e.preventDefault(), e.stopPropagation(), !1;
}
function n(e) {
function t() {
s.trigger("drop:stop");
}
function n(e) {
var t = e.originalEvent, i = t.dataTransfer, n = Array.prototype.slice.call(i.types), a = -1 !== n.indexOf("Files"), o = -1 !== n.indexOf("text/html"), r = -1 !== n.indexOf("text/plain") || -1 !== n.indexOf("Text");
return a || o || r;
}
function a() {
s.on("dragstart", function(e) {
n(e) && s.trigger("drag:origin", e.target);
}), s.on("dragover", function(e) {
n(e) && (s.trigger("drop:start"), i(e), clearTimeout(r));
}), s.on("drop", function(e) {
t(), i(e);
}), s.on("dragleave", function(e) {
n(e) && (e = e.originalEvent || e, r = setTimeout(t, 200));
}), s.bindDrops = null;
}
var r, s = o(e);
return a(), s;
}
var a = e._, o = e.$, r = t.prototype, s = '<input type="file" multiple style="display:none" />', l = t.extend({
input: null,
events: {
click: "select"
},
initialize: function(e) {
var t = this;
return e = e || {}, r.initialize.call(t), t.dropTarget = e.dropTarget && e.dropTarget.length ? e.dropTarget : t.$el, 
t.dragAndDropWrapper = n(t.dropTarget), e.blocker && (t.blocker = e.blocker), e.urlBlocker && (t.urlBlocker = e.urlBlocker), 
t._bindDropEvents(), t;
},
select: function(e) {
var t = this;
t.blocker && t.blocker() || e && o(e.target).is("input[type=file]") || (t.input = o(s), 
t.$el.append(t.input), t.input.on("change", function(e) {
t._filesSelected(e);
}), t.input.click());
},
_filesSelected: function(e) {
var t = this;
t.input && (t.input.off("change", t._filesSelected), t.input.remove(), t.input = null);
var i = e.target.files;
i.length && t.trigger("selected:files", i);
},
_bindDropEvents: function() {
var e = this;
e.bindTo(e.dragAndDropWrapper, "drop:start", e._dropStart), e.bindTo(e.dragAndDropWrapper, "drop:stop", e._dropStop), 
e.bindTo(e.dragAndDropWrapper, "drop", e._drop), e.bindTo(e.dragAndDropWrapper, "drag:origin", e._setOrigin);
},
_setOrigin: function(e, t) {
var i = this;
i.dropOrigin = t;
},
_dropStart: function() {
var e = this, t = !e.urlBlocker || -1 === window.location.hash.indexOf(e.urlBlocker);
t && e.dropTarget.addClass("drop");
},
_dropStop: function() {
var e = this;
e.dropTarget.removeClass("drop");
},
_drop: function(e) {
var t = this;
if (i(e), e = e.originalEvent, t.dropOrigin) return t.dropOrigin = null, void t._dropStop();
t.dropTarget.removeClass("drop");
var n = e.dataTransfer, o = n.files, r = n.items;
if (o.length > 0) {
if (r && "webkitGetAsEntry" in r[0]) {
var s = [];
a.each(r, function(e, t) {
var i = e.webkitGetAsEntry();
i && i.isFile && s.push(o[t]);
}), o = s;
} else o = a.filter(o, function(e) {
return e.size > 0;
});
o.length && t.trigger("selected:files", o);
} else {
n.dropEffect = "copy";
var l = e.dataTransfer.getData("text/plain");
!!l && t.trigger("dropped:text", l);
var d = e.dataTransfer.getData("text/html");
!!d && t.trigger("dropped:html", d);
}
}
});
return l;
}), define("/templates/login/avatar-upload.js", {
name: "login/avatar-upload",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<div class="icon-login picture choose"> <img class="hidden" /> <span></span> </div> <div class="drop-zone"></div> <div class="avatar-upload-el"> </div>';
},
useData: !0
}
}), define("/styles/login/_avatar-upload.js", {
name: "login/_avatar-upload",
data: '#wunderlist-base .avatar-upload{position:relative;cursor:pointer;}#wunderlist-base .avatar-upload .picture{overflow:hidden}#wunderlist-base .avatar-upload .avatar-upload-el{display:none}#wunderlist-base .avatar-upload input{left:auto !important;right:0 !important;z-index:999}#wunderlist-base .avatar-upload img{height:66px;width:66px;margin:0 -100%;}#wunderlist-base .avatar-upload img.landscape{width:auto !important}#wunderlist-base .avatar-upload img.portrait{height:auto !important}#wunderlist-base .avatar-upload .choose.drop + .drop-zone{display:block}#wunderlist-base .avatar-upload .drop-zone{display:none;position:absolute;top:10px;left:50%;margin-left:-33px;height:66px;width:66px;background:rgba(0,0,0,0.2);z-index:9999;-webkit-border-radius:2px;border-radius:2px}#wunderlist-base .avatar-upload.loading .choose{background:-webkit-linear-gradient(#ececec, #e1e1e1) !important;background:-moz-linear-gradient(#ececec, #e1e1e1) !important;background:-o-linear-gradient(#ececec, #e1e1e1) !important;background:-ms-linear-gradient(#ececec, #e1e1e1) !important;background:linear-gradient(#ececec, #e1e1e1) !important;-webkit-box-shadow:inset 0 0 10px rgba(0,0,0,0.25);box-shadow:inset 0 0 10px rgba(0,0,0,0.25);height:66px;width:66px;-webkit-border-radius:2px;border-radius:2px;margin-top:1px}#wunderlist-base .avatar-upload.loading span{-webkit-animation:rotate .8s linear infinite;-moz-animation:rotate .8s linear infinite;-webkit-animation:rotate .8s linear infinite;-moz-animation:rotate .8s linear infinite;-o-animation:rotate .8s linear infinite;-ms-animation:rotate .8s linear infinite;animation:rotate .8s linear infinite;display:block;position:absolute;left:50%;top:50%;margin-left:-10px;margin-top:-10px;width:19px;height:19px;background:url("images/loading_black.png");opacity:.5;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";filter:alpha(opacity=50)}@media only screen and (-webkit-min-device-pixel-ratio: 1.5), only screen and (min--moz-device-pixel-ratio: 1.5){#wunderlist-base .avatar-upload.loading span{background:url("images/loading_black@2x.png");-webkit-background-size:19px;-moz-background-size:19px;background-size:19px}}'
}), define("views/Login/AvatarUploadView", [ "application/runtime", "project!database", "helpers/BlobHelper", "wunderbits/WBViewPresenter", "wunderbits/views/WBFileSelectorView", "wunderbits/WBFileUploader", "project!core/lib/when", "template!login/avatar-upload", "style!login/_avatar-upload" ], function(e, t, i, n, a, o, r, s, l) {
var d = n.prototype, c = e.global, u = new t.WBLocalStorage();
return n.extend({
className: "avatar-upload",
template: s,
styles: [ l ],
render: function() {
var e = this;
if (d.render.apply(e, arguments), !e.fileSelectorView) {
var t = e.$(".choose"), i = new a({
dropTarget: t
});
e.fileSelectorView = e.addSubview(i, "selectorView"), e.fileSelectorView.setElement(e.$(".choose")), 
e.bindTo(e.fileSelectorView, "selected:files", e.setAvatar);
}
return e;
},
setAvatar: function(e) {
var t = this, i = c.FileReader, n = new i();
t.handleDimensions(e[0]), n.onload = function() {
t.$("img").removeClass("hidden").attr("src", this.result);
var i = u.setItem("localAvatarName", e[0].name), n = u.setItem("localAvatar", this.result);
r(i, n).fail(function() {
c.alert("Please choose an avatar image with a filesize that is less than 5mb.");
});
}, n.readAsDataURL(e[0]);
},
handleDimensions: function(e) {
var t, i = this, n = c.URL, a = c.Image, o = new a();
i.$("img").removeClass("landscape portrait"), o.onload = function() {
t = this.width < this.height ? "portrait" : "landscape", i.$("img").addClass(t);
}, o.src = n.createObjectURL(e);
}
});
}), define("/views/Login/templates/signup.js", {
name: "views/Login/templates/signup",
data: {
"1": function(e, t, i, n) {
var a, o = ' <div class="cols buttons-external"> <div class="col-50"> <a class="button big external facebook auth ';
return a = t.unless.call(e, e && e.isChromeApp, {
name: "unless",
hash: {},
fn: this.program(2, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), o += '"> <div class="icon-login facebook"></div> <span></span>Facebook </a> </div> <div class="col-50"> <a class="button big external google auth ', 
a = t.unless.call(e, e && e.isChromeApp, {
name: "unless",
hash: {},
fn: this.program(2, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), o + '"> <div class="icon-login google"></div> <span></span>Google </a> </div> </div> ';
},
"2": function() {
return "disabled";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = '<div class="page-form"> <div class="title center"> Wunderlist </div> <div class="separator center noline"> <div class="picture-wrapper"> </div> </div> <div class="content"> <div class="separator"> <input type="text" name="name" class="chromeless text" data-key-placeholder="label_name"/> </div> <div class="separator"> <input type="email" name="email" class="chromeless email" data-key-placeholder="label_email"/> </div> <div class="separator"> <input type="password" data-validate-length="8" name="password" class="chromeless password" data-key-placeholder="label_password"/> </div> <div class="separator last noline"> <a class="submit button blue big"><span></span>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "login_create_new_account", {
name: "localized",
hash: {},
data: n
}))) + "</a> </div> </div> </div> ";
return a = t["if"].call(e, e && e.showSocialButtons, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l + ' <p class="small center accept-terms"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "login_accept_terms", "$settings_terms_of_use", "$settings_privacy_policy", {
name: "localized",
hash: {},
data: n
}))) + ' </p> <p class="center borderTop"> <a class="sign-in">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_log_in", {
name: "localized",
hash: {},
data: n
}))) + "</a> </p> ";
},
useData: !0
}
}), define("/views/Login/styles/_signup.js", {
name: "views/Login/styles/_signup",
data: "#wunderlist-base .login-signup,#wunderlist-base .login-external-signup{margin-top:0;}#wunderlist-base .login-signup .title,#wunderlist-base .login-external-signup .title{padding:0;margin-top:-3px}#wunderlist-base .login-signup .button.cancel,#wunderlist-base .login-external-signup .button.cancel{margin-top:10px}#wunderlist-base .login-external-signup .external-avatar{width:100%}"
}), define("views/Login/SignUpView", [ "application/runtime", "views/Login/FormView", "views/Login/SignUpController", "controllers/Auth/FacebookController", "controllers/Auth/GoogleController", "helpers/LocationHelper", "views/Login/AvatarUploadView", "template!./signup", "style!./_signup" ], function(e, t, i, n, a, o, r, s, l) {
var d = e.$, c = t.prototype;
return t.extend({
validatePassword: !0,
url: [ "signup" ],
className: "login-form login-signup",
template: s,
styles: [ l ],
"implements": [ i, n, a ],
emits: {
"click .auth.facebook": "click:facebook",
"click .auth.google": "click:google",
"click .sign-in": "click:signin"
},
formatData: function(t) {
return t = t || {}, t.showSocialButtons = !o.isProbablyInChina() && !e.env.isNodeWebkit(), 
t.isChromeApp = e.env.isChromeApp(), t;
},
render: function() {
var e = this;
c.render.apply(e, arguments), e.renderTermsLinks();
var t = e.addSubview(new r(), "avatar");
return e.$(".picture-wrapper").html(t.render().el), e;
},
renderTermsLinks: function() {
var e = this, t = "http://www.wunderlist.com/", i = e.$(".accept-terms"), n = i.find(".token_0"), a = i.find(".token_1"), o = d('<a href="' + t + 'terms-of-use" target="_blank"></a>').append(n.clone());
n.replaceWith(o);
var r = d('<a href="' + t + 'privacy-policy" target="_blank"></a>').append(a.clone());
a.replaceWith(r);
},
toggleLoading: function(e, t) {
var i = this;
e = !!e, i.$el.toggleClass("loading", e), i.$(".button, page-form, .auth").toggleClass("disabled", e), 
t && i.$(".auth." + t).toggleClass("loading", e), i.$("input").attr("readonly", e);
}
});
}), define("views/Login/SignInController", [ "application/runtime", "views/Login/FormViewController" ], function(e, t) {
var i = e.$, n = e._;
return t.extend({
"implements": {
"click:forgot-password": "openForgotPassword",
"click:sign-up": "openSignUp"
},
submitForm: function(t) {
var a = this;
e.trigger("timeline:start", "login_clicked"), e.trigger("timeline:start", "login_load_app"), 
e.trigger("timeline:start", "user_login");
var o = a.deferred(), r = this.view.state.path || "lists/inbox";
return e.user.login(t, {
callback: function() {
e.trigger("timeline:start", "login_refreshing");
var a = i(".fake-form form")[0], o = a.elements;
o.namedItem("email").value = t.email, o.namedItem("password").value = t.password, 
a.submit(), n.delay(function() {
e.reload("/start/" + r, !1);
}, 50);
}
}), o.promise();
},
openForgotPassword: function() {
var e = this;
e.view.trigger("open", "forgot");
},
openSignUp: function() {
var e = this;
e.view.trigger("sync", [ "selector", "signup" ]);
}
});
}), define("/templates/login/signin.js", {
name: "login/signin",
data: {
"1": function(e, t, i, n) {
var a, o = ' <div class="cols buttons-external"> <div class="col-50"> <a class="button big external facebook auth ';
return a = t.unless.call(e, e && e.isChromeApp, {
name: "unless",
hash: {},
fn: this.program(2, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), o += '"> <div class="icon-login facebook"></div> <span></span>Facebook </a> </div> <div class="col-50"> <a class="button big external google auth ', 
a = t.unless.call(e, e && e.isChromeApp, {
name: "unless",
hash: {},
fn: this.program(2, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), o + '"> <div class="icon-login google"></div> <span></span>Google </a> </div> </div> ';
},
"2": function() {
return "disabled";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = '<div class="page-form"> <div class="content"> <div class="separator"> <input type="email" name="email" class="chromeless email" data-key-placeholder="label_email"/> </div> <div class="separator"> <input type="password" name="password" class="chromeless password" data-key-placeholder="label_password"/> </div> <div class="separator last noline"> <a class="submit button blue big"> <span></span> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_log_in", {
name: "localized",
hash: {},
data: n
}))) + ' </a> <p class="center"> <a class="forgot-password">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "login_forgot_password", {
name: "localized",
hash: {},
data: n
}))) + "</a> </p> </div> </div> </div> ";
return a = t["if"].call(e, e && e.showSocialButtons, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l + ' <p class="center borderTop"> <a class="sign-up">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "login_create_new_account", {
name: "localized",
hash: {},
data: n
}))) + "</a> </p> ";
},
useData: !0
}
}), define("/styles/login/_signin.js", {
name: "login/_signin",
data: "#wunderlist-base .login-signin .buttons-external{margin-bottom:14px}"
}), define("views/Login/SignInView", [ "application/runtime", "views/Login/FormView", "views/Login/SignInController", "controllers/Auth/FacebookController", "controllers/Auth/GoogleController", "helpers/LocationHelper", "template!login/signin", "style!login/_signin" ], function(e, t, i, n, a, o, r, s) {
return t.extend({
url: [ "login" ],
className: "login-form login-signin",
styles: [ s ],
template: r,
"implements": [ i, n, a ],
emits: {
"click .auth.facebook": "click:facebook",
"click .auth.google": "click:google",
"click .forgot-password": "click:forgot-password",
"click .sign-up": "click:sign-up"
},
formatData: function(t) {
return t = t || {}, t.showSocialButtons = !o.isProbablyInChina() && !e.env.isNodeWebkit(), 
t.isChromeApp = e.env.isChromeApp(), t;
},
toggleLoading: function(e, t) {
var i = this;
e = !!e, i.$el.toggleClass("loading", e), i.$(".button, page-form, .auth").toggleClass("disabled", e), 
t && i.$(".auth." + t).toggleClass("loading", e), i.$("input").attr("readonly", e);
}
});
}), define("views/Login/ForgotPasswordController", [ "application/runtime", "views/Login/FormViewController", "project!core/WBDeferred" ], function(e, t, i) {
return t.extend({
"implements": {
"click:go-back": "close"
},
submitForm: function(t) {
var n = this, a = new i();
return e.user.forgotPassword(t, {
success: function() {
a.resolve(), n.view.renderConfirmation();
},
error: function(e) {
a.reject(e);
}
}), a.promise();
},
close: function() {
var e = this;
e.view.trigger("close");
}
});
}), define("/templates/login/forgot.js", {
name: "login/forgot",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return '<div class="page-form"> <div class="content form"> <div class="separator"> <span class="icon-login questionmark"></span> <h2 class="center">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "login_forgot_password_heading", {
name: "localized",
hash: {},
data: n
}))) + '</h2> <p class="center"> ' + r((a = t.localized || e && e.localized || o, 
a.call(e, "login_forgot_password_text", {
name: "localized",
hash: {},
data: n
}))) + ' </p> </div> <div class="separator"> <input type="email" name="email" class="chromeless email" data-key-placeholder="label_email"> </div> <div class="separator"> <a class="button big blue submit"> <span></span> ' + r((a = t.localized || e && e.localized || o, 
a.call(e, "label_reset_password", {
name: "localized",
hash: {},
data: n
}))) + '</a> </div> </div> <p class="small center go-back-link"> ' + r((a = t.localized || e && e.localized || o, 
a.call(e, "login_want_to_try_again", {
name: "localized",
hash: {},
data: n
}))) + ' <a class="go-back">' + r((a = t.localized || e && e.localized || o, a.call(e, "button_go_back", {
name: "localized",
hash: {},
data: n
}))) + '</a> </p> <div class="content confirm" style="display:none;"> <div class="separator noline forgotpwconfirm"> <h2 class="center">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "button_reset_password", {
name: "localized",
hash: {},
data: n
}))) + '</h2> <p class="center">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "login_password_reset_email_has_been_sent", {
name: "localized",
hash: {},
data: n
}))) + '</p> </div> <div class="separator noline no-top-padding"> <a class="button big blue go-back">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "button_go_back_sentence", {
name: "localized",
hash: {},
data: n
}))) + "</a> </div> </div> </div> ";
},
useData: !0
}
}), define("views/Login/ForgotPasswordView", [ "application/runtime", "views/Login/FormView", "views/Login/ForgotPasswordController", "template!login/forgot" ], function(e, t, i, n) {
return t.extend({
url: "forgot-password",
className: "login-form login-forgot-password",
template: n,
"implements": [ i ],
emits: {
"click .go-back": "click:go-back"
},
renderConfirmation: function() {
var e = this;
e.fadeOut(300, ".content.form, p.go-back-link").done(function() {
e.fadeIn(300, ".content.confirm");
});
}
});
}), define("controllers/Auth/ExternalSignupController", [ "application/runtime", "views/Login/FormViewController", "project!core/WBDeferred" ], function(e, t, i) {
return t.extend({
"implements": {
visible: "renderAvatar",
"click:signin": "openSignIn"
},
renderAvatar: function() {
var e = this;
e.view.renderAvatar();
},
submitForm: function(t) {
var n = this, a = new i(), o = this.view.state.path || "lists/inbox";
return e.user.register(t, {
success: function() {
n.view.state.token ? n.view.trigger("create:service", n.view.state, function() {
e.reload("/setup/" + o);
}) : e.reload("/setup/" + o);
},
error: function() {
a.reject();
}
}), a.promise();
},
openSignIn: function() {
var e = this;
e.view.trigger("sync", [ "selector", "login" ]);
}
});
}), define("/templates/login/externalSignUp.js", {
name: "login/externalSignUp",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression, s = "function";
return '<div class="page-form"> <div class="content"> <div class="separator center"> <div class="icon-login picture"> <img class="external-avatar" /> </div> <div class="center almost-done"> <h2>' + r((a = t.localized || e && e.localized || o, 
a.call(e, "login_enter_password", {
name: "localized",
hash: {},
data: n
}))) + "</h2> <p>" + r((a = t.localized || e && e.localized || o, a.call(e, "login_enter_password_hint", {
name: "localized",
hash: {},
data: n
}))) + '</p> </div> </div> <div class="separator"> <input type="text" name="name" class="chromeless text" data-key-placeholder="label_name" value="' + r((a = t.name || e && e.name, 
typeof a === s ? a.call(e, {
name: "name",
hash: {},
data: n
}) : a)) + '" /> </div> <div class="separator"> <input type="email" name="email" class="chromeless email" data-key-placeholder="label_email" value="' + r((a = t.email || e && e.email, 
typeof a === s ? a.call(e, {
name: "email",
hash: {},
data: n
}) : a)) + '" /> </div> <div class="separator"> <input type="password" data-validate-length="8" name="password" class="chromeless password" data-key-placeholder="label_password" /> </div> <div class="separator last noline"> <a class="submit button blue big"><span></span>' + r((a = t.localized || e && e.localized || o, 
a.call(e, "login_create_new_account", {
name: "localized",
hash: {},
data: n
}))) + '</a> </div> </div> </div> <p class="small center accept-terms"> ' + r((a = t.localized || e && e.localized || o, 
a.call(e, "login_accept_terms", "$settings_terms_of_use", "$settings_privacy_policy", {
name: "localized",
hash: {},
data: n
}))) + ' </p> <p class="center borderTop"> <a class="sign-in">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "button_log_in", {
name: "localized",
hash: {},
data: n
}))) + "</a> </p> ";
},
useData: !0
}
}), define("views/Login/ExternalSignUpView", [ "application/runtime", "helpers/BlobHelper", "views/Login/FormView", "controllers/Auth/ExternalSignupController", "controllers/Auth/BaseController", "template!login/externalSignUp", "style!./_signup" ], function(e, t, i, n, a, o, r) {
var s = e.$, l = i.prototype;
return i.extend({
className: "login-form login-external-signup",
options: {
showBackButton: !0,
hideRibbon: !0
},
styles: [ r ],
template: o,
"implements": [ n, a ],
emits: {
"click .sign-in": "click:signin"
},
render: function() {
var e = this;
return l.render.apply(e, arguments), e.renderTermsLinks(), e;
},
renderTermsLinks: function() {
var e = this, t = "http://www.wunderlist.com/", i = e.$(".accept-terms"), n = i.find(".token_0"), a = i.find(".token_1"), o = s('<a href="' + t + 'terms-of-use" target="_blank"></a>').append(n.clone());
n.replaceWith(o);
var r = s('<a href="' + t + 'privacy-policy" target="_blank"></a>').append(a.clone());
a.replaceWith(r);
},
renderAvatar: function() {
var e = this, i = e.$("img.external-avatar"), n = e.state && e.state.avatar;
n && t.loadImage(n, i);
}
});
}), define("views/Login/FormsStackController", [ "application/runtime", "wunderbits/WBViewController" ], function(e, t) {
var i = e._, n = t.prototype;
return t.extend({
"implements": {
"click:back": "onClickBack",
"click:close": "triggerClose"
},
initialize: function() {
var t = this;
n.initialize.apply(t, arguments), t.bindTo(e, "forceLoginState", t.forceStackState);
},
forceStackState: function(t) {
var n = this;
i.isArray(t) && (t = t[0]), i.each(n.view.views, function(e) {
e.destroy();
}), n.view.views = [], e.global.location.hash = "/" + t, n.defer(function() {
e.trigger("startHistory");
});
},
onClickBack: function() {
var e = this;
e.view.popView();
},
triggerClose: function() {
e.post("close");
}
});
}), define("/templates/login/formsStack.js", {
name: "login/formsStack",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<a class="arrow-back transparent"><span class="arrow-back-image"></span></a> <div class="logo icon-login wl-icon small"></div> <div class="icon-login wl-logotype small"></div> <a class="close transparent"><span class="close-icon"></span></a>  <div class="hidden fake-form"> <iframe src="about:blank" name="fakeFormFrame"></iframe> <form action="/blank" method="post" target="fakeFormFrame"> <input type="text" name="email" /> <input type="password" name="password" /> <input type="submit" /> </form> </div>';
},
useData: !0
}
}), define("/styles/login/_formsStack.js", {
name: "login/_formsStack",
data: '#wunderlist-base .login-stack{background:rgba(250,250,250,0.8);position:absolute;min-height:510px;width:320px;z-index:9999;top:50%;left:50%;margin-top:-255px;margin-left:-160px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:5px;border-radius:5px;-webkit-box-shadow:0 4px 24px 6px rgba(0,0,0,0.3);box-shadow:0 4px 24px 6px rgba(0,0,0,0.3);padding:14px;overflow:hidden;}#wunderlist-base .login-stack .buttons-external{padding:14px 0 0 0;letter-spacing:-1px;}#wunderlist-base .login-stack .buttons-external div{letter-spacing:normal}#wunderlist-base .login-stack .logo{position:absolute;top:90px;left:50%;margin-left:-63px;z-index:777;-webkit-transition:all 400ms ease;-moz-transition:all 400ms ease;-o-transition:all 400ms ease;-ms-transition:all 400ms ease;transition:all 400ms ease;-webkit-transform:translate3d(0,0,0) scale(1);-moz-transform:translate3d(0,0,0) scale(1);-o-transform:translate3d(0,0,0) scale(1);-ms-transform:translate3d(0,0,0) scale(1);transform:translate3d(0,0,0) scale(1);}#wunderlist-base .login-stack .logo.small{-webkit-transform:translate3d(0,-50px,0) scale(.9);-moz-transform:translate3d(0,-50px,0) scale(.9);-o-transform:translate3d(0,-50px,0) scale(.9);-ms-transform:translate3d(0,-50px,0) scale(.9);transform:translate3d(0,-50px,0) scale(.9)}#wunderlist-base .login-stack .logo.invisible{-webkit-transform:translate3d(0,-50px,0) scale(.9);-moz-transform:translate3d(0,-50px,0) scale(.9);-o-transform:translate3d(0,-50px,0) scale(.9);-ms-transform:translate3d(0,-50px,0) scale(.9);transform:translate3d(0,-50px,0) scale(.9);opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}#wunderlist-base .login-stack .wl-logotype{position:absolute;left:50%;top:220px;margin-left:-100px;-webkit-transition:all 400ms ease;-moz-transition:all 400ms ease;-o-transition:all 400ms ease;-ms-transition:all 400ms ease;transition:all 400ms ease;tansform:translate3d(0,0,0);opacity:1;-ms-filter:none;filter:none;}#wunderlist-base .login-stack .wl-logotype.small{opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0);-webkit-transform:translate3d(0,-60px,0) scale(.6);-moz-transform:translate3d(0,-60px,0) scale(.6);-o-transform:translate3d(0,-60px,0) scale(.6);-ms-transform:translate3d(0,-60px,0) scale(.6);transform:translate3d(0,-60px,0) scale(.6)}#wunderlist-base .login-stack .wl-logotype.invisible{opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}#wunderlist-base .login-stack .arrow-back{-webkit-transition:opacity 400ms ease;-moz-transition:opacity 400ms ease;-o-transition:opacity 400ms ease;-ms-transition:opacity 400ms ease;transition:opacity 400ms ease;z-index:9999;position:absolute;padding:14px;top:0;left:0;opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}#wunderlist-base .login-stack h2{font-size:15px}#wunderlist-base .login-stack p{color:#737272;margin-top:14px;font-size:13px;line-height:18px;text-shadow:0 1px 0 rgba(255,255,255,0.6);}#wunderlist-base .login-stack p a:hover{text-decoration:underline}#wunderlist-base .login-stack p.borderTop{border-top:1px solid rgba(0,0,0,0.08);padding-top:14px}#wunderlist-base .login-stack p.small{color:#818181;font-size:12px;line-height:15px;}#wunderlist-base .login-stack p.small a{color:#818181}#wunderlist-base .login-stack input{font-size:16px}#wunderlist-base .login-stack .icon-login.wl-icon{background-position:0 0;width:115px;height:115px}#wunderlist-base .login-stack .icon-login.wl-logotype{background-position:-185px 0;width:202px;height:32px}#wunderlist-base .login-stack .icon-login.whoops,#wunderlist-base .login-stack .icon-login.questionmark{margin:0 auto 10px auto;display:block}#wunderlist-base .login-stack .icon-login.whoops{background-position:0 -115px;width:45px;height:46px}#wunderlist-base .login-stack .icon-login.questionmark{background-position:-115px -70px;width:43px;height:44px}#wunderlist-base .login-stack .icon-login.picture{background-position:-115px 0;width:70px;height:70px;margin:10px 0 9px 0}#wunderlist-base .login-stack .icon-login.facebook{background-position:-185px -32px;width:24px;height:24px}#wunderlist-base .login-stack .icon-login.google{background-position:-209px -32px;width:24px;height:24px}#wunderlist-base .login-form{margin-top:190px}@media only screen and (-webkit-min-device-pixel-ratio: 1.5), only screen and (min--moz-device-pixel-ratio: 1.5){#wunderlist-base .icon-login{background-image:url("images/sprites/login-retina.png") !important;-webkit-background-size:387px;-moz-background-size:387px;background-size:387px}}html[dir=rtl] #wunderlist-base .icon-login.picture{margin-left:initial;margin-right:-5px}'
}), define("views/Login/FormsStackView", [ "application/runtime", "views/Login/StackView", "views/Login/SelectorView", "views/Login/SignUpView", "views/Login/SignInView", "views/Login/ForgotPasswordView", "views/Login/ExternalSignUpView", "views/Login/FormsStackController", "template!login/formsStack", "style!login/_formsStack" ], function(e, t, i, n, a, o, r, s, l, d) {
var c = e._, u = t.prototype;
return t.extend({
className: "login-stack",
viewClasses: {
selector: i,
signup: n,
login: a,
forgot: o,
"external-signup": r
},
animationTime: 250,
styles: [ d ],
template: l,
"implements": [ s ],
emits: {
"click .arrow-back": "click:back",
"click .close": "click:close"
},
selectors: {
logo: ".logo",
arrow: ".arrow-back"
},
initialize: function() {
var t = this;
u.initialize.apply(t, arguments), t.bindTo(e, "login:enable", t.renderEnabled);
},
render: function(t) {
var i = this;
return u.render.call(i, i.formatData(t)), e.isEmbedded() && i.$("a.close").removeClass("transparent"), 
i;
},
createView: function(e) {
var t = this, i = {};
return i.animationTime = t.animationTime, i.state = t.state, u.createView.call(t, e, i);
},
appendView: function(e) {
var t = this;
e.$el.hide(), t.$(t.selectors.logo).after(e.render().el);
},
showView: function(e, t) {
var i = this, n = i.deferred(), a = t ? i.animationTime : 2 * i.animationTime, o = t && t.fadeOut(i.animationTime) || i.deferred().resolve();
return i.when(o).then(function() {
t && t.trigger("hidden"), e.fadeIn(a).done(function() {
e.trigger("visible"), n.resolve();
});
}), n.promise();
},
removeView: function(e, t, i) {
var n = this, a = n.deferred(), o = t ? n.animationTime : 2 * n.animationTime;
return i !== !1 && (i = !0), e.fadeOut(o).done(function() {
var o = t && !t.destroyed && i, r = o && t.fadeIn(n.animationTime) || n.deferred().resolve();
r.done(function() {
!e.destroyed && e.destroy();
var i = t && !t.destroyed;
i && t.trigger("visible"), a.resolve();
});
}), a.promise();
},
updateArrowVisible: function(e) {
var t = this, i = !e.options.showBackButton;
t.$(t.selectors.arrow).toggleClass("transparent", i);
},
updateLogo: function(e) {
var t = this, i = !0, n = !1;
"selector" === e.stackViewName ? i = !1 : ("signup" === e.stackViewName || "external-signup" === e.stackViewName) && (n = !0), 
c.defer(function() {
t.$(".wl-icon, .wl-logotype").toggleClass("small", i).toggleClass("invisible", n);
});
},
viewMadeVisible: function(t) {
var i = this, n = t.url, a = [];
if (i.updateArrowVisible(t), i.updateLogo(t), n) {
c.isArray(n) ? (a = n, n = a[0]) : a = [ n ];
var o = e.currentRoute();
a.indexOf(o) < 0 && e.trigger("route:" + n, {
trigger: !1
});
}
},
renderEnabled: function(e) {
var t = this;
t.$el.toggleClass("disabled", !e);
}
});
}), define("/templates/packaged/mactitlebar.js", {
name: "packaged/mactitlebar",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<div class="mac-traffic-lights"> <a class="close"></a> <a class="min"></a> <a class="max"></a> </div> <!--<div class="mac-fullscreen"></div>-->';
},
useData: !0
}
}), define("/styles/packaged/_mactitlebar.js", {
name: "packaged/_mactitlebar",
data: '#wunderlist-base.packaged:after{display:none}#wunderlist-base.packaged #lists .lists-scroll{top:0}#wunderlist-base.packaged .mac-titlebar{position:fixed;z-index:1000;right:0;left:0;top:0;height:40px;background-image:-webkit-linear-gradient(top, #fdfdfd, #dbdbdb);background-image:-moz-linear-gradient(top, #fdfdfd, #dbdbdb);background-image:-o-linear-gradient(top, #fdfdfd, #dbdbdb);background-image:-ms-linear-gradient(top, #fdfdfd, #dbdbdb);background-image:linear-gradient(to bottom, #fdfdfd, #dbdbdb);-webkit-app-region:drag;-webkit-box-shadow:0 1px 0 rgba(0,0,0,0.3),0 1px 3px rgba(0,0,0,0.3);box-shadow:0 1px 0 rgba(0,0,0,0.3),0 1px 3px rgba(0,0,0,0.3);-webkit-border-radius:4px 4px 0 0;border-radius:4px 4px 0 0}#wunderlist-base.packaged .main-interface{top:40px}#wunderlist-base.packaged .mac-title{position:absolute;left:100px;right:100px;top:12px;text-shadow:0 1px 0 #fff;text-align:center;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}#wunderlist-base.packaged .mac-fullscreen{position:absolute;background:url("images/packaged/fullscreen.png");-webkit-background-size:14px;-moz-background-size:14px;background-size:14px;right:12px;top:12px;width:14px;height:15px;opacity:.8;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";filter:alpha(opacity=80);-webkit-app-region:no-drag;}#wunderlist-base.packaged .mac-fullscreen:hover{opacity:1;-ms-filter:none;filter:none}#wunderlist-base.packaged .mac-traffic-lights{margin-left:15px;margin-top:16px;float:left;-webkit-app-region:no-drag;}#wunderlist-base.packaged .mac-traffic-lights a{height:13px;width:12px;-webkit-background-size:12px;-moz-background-size:12px;background-size:12px;display:inline-block;margin-right:4px;}#wunderlist-base.packaged .mac-traffic-lights a.close{background-image:url("images/packaged/close.png");}#wunderlist-base.packaged .mac-traffic-lights a.close:active{background-image:url("images/packaged/close_selected.png") !important}#wunderlist-base.packaged .mac-traffic-lights a.max{background-image:url("images/packaged/maximixe.png");}#wunderlist-base.packaged .mac-traffic-lights a.max:active{background-image:url("images/packaged/maximixe_selected.png") !important}#wunderlist-base.packaged .mac-traffic-lights a.min{background-image:url("images/packaged/minimize.png");}#wunderlist-base.packaged .mac-traffic-lights a.min:active{background-image:url("images/packaged/minimize_selected.png") !important}#wunderlist-base.packaged .mac-traffic-lights:hover a.close{background-image:url("images/packaged/close_hover.png")}#wunderlist-base.packaged .mac-traffic-lights:hover a.max{background-image:url("images/packaged/maximixe_hover.png")}#wunderlist-base.packaged .mac-traffic-lights:hover a.min{background-image:url("images/packaged/minimize_hover.png")}:-webkit-full-screen .mac-fullscreen,:-webkit-full-screen .mac-traffic-lights{display:none !important}#wunderlist-base.packaged #search-toolbar{position:absolute;width:220px;right:12px;top:0;}#wunderlist-base.packaged #search-toolbar #reset-search{z-index:1000;right:-6px}#wunderlist-base.packaged #toolbar{position:fixed;z-index:1001;top:3px;left:75px;right:4px;background:none;border:none;-webkit-box-shadow:none;box-shadow:none;}#wunderlist-base.packaged #toolbar #notifications-count{left:50%;right:auto}:-webkit-full-screen #toolbar{left:5px !important;right:5px !important}'
}), define("views/Packaged/MacTitleBarView", [ "application/runtime", "wunderbits/WBView", "template!packaged/mactitlebar", "style!packaged/_mactitlebar" ], function(e, t, i, n) {
var a = e.global, o = a.chrome, r = t.prototype;
return t.extend({
id: "titlebar",
className: "mac-titlebar",
styles: [ n ],
template: i,
events: {
"click .close": "_closeWindow",
"click .min": "_minimizeWindow",
"click .max": "_maximizeWindow",
"click .mac-fullscreen": "_enterFullscreenWindow"
},
initialize: function() {
var t = this;
r.initialize.apply(t, arguments), e.env.isChromeApp() ? t.initializeChromeApp() : e.env.isNodeWebkit() && t.initializeNodeWebkitApp();
},
initializeChromeApp: function() {
var e = this, t = o.app && o.app.window;
e.currentWindow = t && t.current() || a;
var i = e.currentWindow.onRestored;
i && i.addListener(function() {
document.webkitCancelFullScreen();
});
},
initializeNodeWebkitApp: function() {
var e = this, t = a.win;
e.currentWindow = t;
},
_closeWindow: function() {
var e = this;
e.currentWindow.close();
},
_minimizeWindow: function() {
var e = this;
e.currentWindow.minimize();
},
_maximizeWindow: function() {
var t = this, i = t.currentWindow;
e.env.isChromeApp() ? i.isMaximized() ? i.restore() : i.maximize() : e.env.isNodeWebkit() && i.maximize();
},
_enterFullscreenWindow: function() {
var t = this;
e.env.isNodeWebkit() ? t.currentWindow.toggleFullscreen() : (document.webkitCancelFullScreen(), 
document.body.webkitRequestFullScreen());
}
});
}), define("/styles/_lists.js", {
name: "_lists",
data: "#lists{top:0;bottom:0;left:0;width:270px;background-color:#fcfcfc;}#lists .lists-scroll{overflow-y:auto;overflow-x:hidden;position:absolute;bottom:38px;top:38px;right:0;left:0}#lists .lists-collection{position:relative;z-index:300}@media all and (max-width:900px){#wunderlist-base:not(.packaged) #lists{width:200px;}#wunderlist-base:not(.packaged) #lists .name-label{max-width:45px}#wunderlist-base:not(.packaged) #tasks{left:200px !important}}html[dir=rtl] #lists li .options{left:6px;right:initial}html[dir=rtl] #lists li a .count{float:left}"
}), define("/styles/_bars.js", {
name: "_bars",
data: '#toolbar{-webkit-backface-visibility:hidden;height:37px;border-bottom:1px solid rgba(175,175,175,0.6);-webkit-box-shadow:0 1px 2px rgba(0,0,0,0.1);box-shadow:0 1px 2px rgba(0,0,0,0.1);z-index:100;position:relative;}#toolbar svg{fill:#737272}#toolbar a:focus svg{fill:#186ab2}#toolbar .avatar:hover{cursor:pointer}#toolbar #user{position:relative;margin:6px;}#toolbar #user img{border:none}#toolbar #user:hover{cursor:pointer}#toolbar #user span{height:25px;width:25px;position:absolute;background:transparent;-webkit-box-shadow:0 1px 0 rgba(255,255,255,0.5),inset 0 0 0 1px rgba(0,0,0,0.15);box-shadow:0 1px 0 rgba(255,255,255,0.5),inset 0 0 0 1px rgba(0,0,0,0.15);-webkit-border-radius:3px;border-radius:3px}#toolbar #user .pro-small{position:absolute;right:-8px;top:-5px;z-index:99999}#toolbar .name{cursor:pointer;position:absolute;left:38px;padding:10px 10px 10px 0;}#toolbar .name .chevron{display:inline-block;vertical-align:top;font-size:8px;margin-top:4px}#toolbar .name-label{display:inline-block;max-width:115px;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;font-size:12px;font-weight:bold;margin-top:1px}#toolbar #sync{display:inline-block;height:10px;width:10px;vertical-align:top;}#toolbar #sync .offline{margin-top:-1px}#toolbar #sync .api-error .offline{fill:#f00}#toolbar #sync .syncing{margin-left:3px;-webkit-animation:rotate .8s linear infinite;-moz-animation:rotate .8s linear infinite;-webkit-animation:rotate .8s linear infinite;-moz-animation:rotate .8s linear infinite;-o-animation:rotate .8s linear infinite;-ms-animation:rotate .8s linear infinite;animation:rotate .8s linear infinite;display:inline-block;background:url("images/syncing.png");width:10px;height:10px}#toolbar #search-toolbar{display:none;}#toolbar #search-toolbar.active{display:block}#toolbar #search-toolbar input{position:absolute;padding-left:28px;width:190px;left:40px;top:4px;z-index:999;-webkit-app-region:no-drag}#toolbar #search-toolbar .tag-suggestion{position:absolute;color:#bdbcbb;top:11px;margin-left:18px;z-index:0}#toolbar #search-toolbar .search{position:absolute;z-index:1000;top:9px;left:44px}#toolbar #reset-search,#toolbar #search{right:0;top:0;position:absolute;padding:8px 9px 6px 3px;display:block;}#toolbar #reset-search:hover,#toolbar #search:hover,#toolbar #reset-search:focus,#toolbar #search:focus{fill:#737272}#toolbar .stream-counts{position:absolute;top:8px;right:38px;width:50px;display:-webkit-box;display:-moz-box;display:-webkit-flex;display:-ms-flexbox;display:box;display:flex;-webkit-box-pack:justify;-moz-box-pack:justify;-o-box-pack:justify;-ms-flex-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}#toolbar .conversations-count,#toolbar .activities-count{display:inline-block;position:relative;}#toolbar .conversations-count .count,#toolbar .activities-count .count{position:absolute;background:#d62822;color:#fff;font-size:10px;line-height:10px;-webkit-border-radius:20px;border-radius:20px;padding:2px 2px 3px 2px;text-align:center;min-width:11px;top:-5px;right:-5px}#toolbar .button,#toolbar button{height:14px;}#toolbar .button .icon,#toolbar button .icon{opacity:.6;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";filter:alpha(opacity=60)}#toolbar .button.active .icon,#toolbar button.active .icon,#toolbar .button:active .icon,#toolbar button:active .icon{opacity:1;-ms-filter:none;filter:none}@media all and (max-width:900px){#wunderlist-base:not(.packaged) #toolbar #search-toolbar input{width:120px}}@media only screen and (-webkit-min-device-pixel-ratio: 1.5), only screen and (min--moz-device-pixel-ratio: 1.5){#toolbar #sync span.syncing{background:url("images/syncing@2x.png");-webkit-background-size:10px;-moz-background-size:10px;background-size:10px}}html[dir=rtl] #toolbar .name{padding-left:10px;padding-right:0;left:initial;right:38px}html[dir=rtl] #toolbar .stream-counts{left:38px;right:initial}html[dir=rtl] #toolbar #sync{right:35px;left:initial}html[dir=rtl] #toolbar #search{right:initial;left:0;padding:8px 3px 6px 9px}html[dir=rtl] #toolbar #search-toolbar input{padding-left:5px;padding-right:30px}html[dir=rtl] #toolbar #search-toolbar .search{right:45px;left:initial}html[dir=rtl] #toolbar #reset-search{right:initial;left:0;padding:8px 3px 6px 9px}'
}), define("/styles/login/_interface.js", {
name: "login/_interface",
data: '#wunderlist-base .login-interface{background:url("images/packaged/blurbg.jpg") center;-webkit-background-size:cover;-moz-background-size:cover;background-size:cover;-webkit-box-shadow:inset 0 0 50px rgba(0,0,0,0.3);box-shadow:inset 0 0 50px rgba(0,0,0,0.3);top:0;height:100%;width:100%;position:fixed;z-index:9999;}#wunderlist-base .login-interface p{font-weight:500}#wunderlist-base .login-interface .icon-login{background-image:url("images/sprites/login.png");vertical-align:middle;display:inline-block}'
}), define("views/Login/InterfaceView", [ "application/runtime", "wunderbits/WBViewPresenter", "views/Login/FormsStackView", "views/Packaged/MacTitleBarView", "style!_lists", "style!_bars", "style!login/_interface" ], function(e, t, i, n, a, o, r) {
var s = e.$, l = t.prototype;
return t.extend({
styles: [ a, o, r ],
className: "login-interface",
"implements": [],
syncViews: function(e, t) {
var i = this;
return i.isRendered || i.render(), i.stack && i.stack.syncViews(e, t);
},
render: function() {
var t = this;
return t.isRendered ? t : (l.render.apply(t, arguments), t.stack = t.renderSubview(i), 
e.env.isPackagedApp() && (s("body").addClass("packaged"), e.env.isMac() && t.renderSubview(n)), 
(e.isEmbedded() || e.env.isPackagedApp()) && t.$el.attr("id", "wunderlist-base"), 
t);
}
});
}), define("wunderbits/WBBlurHelper", [ "./lib/dependencies", "project!core/WBSingleton" ], function(e, t) {
var i = e.$;
return t.extend({
run: function() {
var e = i('<input id="blur-hack" style="opacity:0;margin-top:-5000px;position:absolute;" aria-hidden="true"/>');
i("body").append(e), e.click().focus().blur().remove();
}
});
}), define("application/FocusManager", [ "application/runtime", "vendor/mousetrap", "actions/Factory", "wunderbits/data/keycodes", "wunderbits/BaseEventEmitter", "wunderbits/WBBlurHelper" ], function(e, t, i, n, a, o) {
var r = e._, s = e.$, l = e.global.document, d = s(l), c = s("body"), u = a.prototype, p = o, m = t, g = null, f = [], b = e.smartLists, h = {
add_new_list: [ "lists:new", "analytics:KeyboardShortcut:addList" ],
add_new_task: [ "sidebar:selected:add:task", "analytics:KeyboardShortcut:addTask" ],
mark_task_done: [ "tasks:markDone", "analytics:KeyboardShortcut:toggleDone" ],
mark_task_starred: [ "tasks:markStarred", "analytics:KeyboardShortcut:toggleStarred" ],
goto_preferences: [ "route:preferences/general" ],
show_notifications: [ "route:activitycenter" ],
select_all_tasks: [ "tasks:selectAll" ],
send_via_email: [ "email:list", "analytics:KeyboardShortcut:sendTaskViaEmail" ],
sync: [ "sync:start", "analytics:KeyboardShortcut:sync" ],
copy_tasks: [ "tasks:copy" ],
paste_tasks: [ "tasks:paste" ],
goto_search: [ "route:search", "analytics:KeyboardShortcut:gotoSearch" ],
goto_inbox: [ "route:lists/inbox", "analytics:KeyboardShortcut:gotoInbox" ]
}, v = [ 37, 38, 39, 40 ], _ = [ 187, 189 ], w = {
fullscreenNote: "fullscreenNote:close",
confirmation: "confirmation:cancel",
settings: "settings:close",
assignPopover: "assignPopover:cancel",
tagPopover: "tagPopover:cancel",
goProPopover: "goProPopover:cancel",
sidebar: "route:me",
"sidebar-drag": "list:sorting:end",
userMenu: "toolbar:userMenu:close",
browser: "browser:drag:clean",
comments: "comments:close",
detail: "detail:navigate:left",
rate: "modal:close",
tell: "modal:close",
inviteYourFriends: "modal:close",
listOptions: "modal:close",
addTaskDatePicker: "addTaskDatePicker:cancel"
}, k = {
confirmation: "confirmation:confirm",
sidebar: "actions:edit",
browser: "tasks:editTitle",
addTaskDatePicker: "addTaskDatePicker:close",
userMenu: "userMenu:select",
goProPopover: "goProPopover:select",
assignPopover: "assign:select",
tagPopover: "tag:select",
listOptions: "modal:trySubmit"
}, x = {
browser: "tasks:toggleSelected"
}, y = {
browser: "taskActions:focus",
goProPopover: "tab:fromPopover"
}, C = {
browser: "focus:addTaskInput"
};
return a.extend({
initialize: function() {
var t = this;
u.initialize.apply(t, arguments), t.print = i.print(), t.bindOnceTo(e, "interface:ready", "initShortcuts");
},
initShortcuts: function() {
var e = this;
e.forEach(h, "_generateShortcutTriggers"), e.forEach(b, "_generateSmartListShortcutCallback"), 
e._loadUserShortcuts(), e._bindEvents();
},
_bindEvents: function() {
var t = this;
t.bindTo(e.settings, "change", "_loadUserShortcuts"), t.bindTo(e, "focus:revert", t.revertFocus), 
t.bindTo(e, "focus:set", t.setFocus), t.bindTo(e, "focus:changed", t._onFocusChanged), 
t.bindTo(d, "keydown", t.handleKeys);
},
destroy: function() {
function e(e) {
r.each(e, function(t, i) {
"uid" !== i && "cid" !== i && delete e[i];
});
}
var t = this;
t.trigger && t.trigger("destroy"), t.unbindAll && t.unbindAll(), t.onDestroy && t.onDestroy(), 
e(t), t.destroyed = !0;
},
setFocus: function(t) {
t && t !== g && (f.push(t), g = t, e.trigger("focus:changed", g));
},
revertFocus: function() {
var t = f.pop(), i = r.last(f), n = i || t;
g = n, e.trigger("focus:changed", g);
},
_generateShortcutTriggers: function(t, i) {
var n = this;
n["shortcut_" + i] = function() {
return n.forEach(t, function(t) {
e.trigger(t);
}), !1;
};
},
_generateSmartListShortcutCallback: function(t) {
var i = this;
i["shortcut_goto_filter_" + t] = function() {
return e.trigger("route:lists/" + t).trigger("analytics:KeyboardShortcut:gotoSmartList", t), 
!1;
};
},
_onFocusChanged: function(t) {
var i = this, n = c[0].className.split(/\s/), a = /(focus-\w+)/;
r.each(n, function(e) {
a.test(e) && c.removeClass(e);
}), c.addClass("focus-" + t), i.analyticsTrigger || (i.analyticsTrigger = r.debounce(function() {
e.trigger("analytics:Application:changedFocus", g);
}, 250)), i.analyticsTrigger();
},
_loadUserShortcuts: function() {
var t = this;
m.reset();
var i = e.settings.attributes;
r.each(i, function(e, n) {
/^shortcut/.test(n) && e && (e = e.toLowerCase().replace(/\s/g, ""), "arrowkeys" === e || "+-" === e ? t[n] = e : i[n].toLowerCase().length > 1 && e !== i.shortcut_sync.toLowerCase() && t[n] && m.bind(e, t[n]));
});
},
handleKeys: function(t) {
var i = this, a = t.which, o = e.settings.attributes.shortcut_sync || "r", s = o.toLowerCase().charCodeAt(0);
return e.env.isNodeWebkit() && t.ctrlKey && 80 === a && (i.print.printList(), e.trigger("print:start"), 
t.stopPropagation()), e.env.isChromeApp() && t.ctrlKey && 78 === a ? t.preventDefault() : void (a === n.esc ? i.handleEscapeKey(t) : a === n.spacebar ? i.handleSpacebar(t) : a === n.enter ? i.handleEnterKey(t) : a === n.tab ? i.handleTabKey(t) : r.include(v, a) || r.include(_, a) ? i.handleArrowKeys(t) : (a === s || a === s - 32) && i.handleSyncShortcut(t));
},
handleEscapeKey: function() {
var t = this, i = new Date().valueOf(), n = e.env.getEnvInfo().browser, a = "safari" === n ? 500 : 1, o = !t._lastTriggeredEscape || t._lastTriggeredEscape < i - a;
if (o) {
if (t._lastTriggeredEscape = i, e.state.attributes.inSearchState && "browser" === g) return void e.trigger("search:focus");
var r = w[g];
r ? ("browser" === g && e.trigger("browser:navigate", "left"), e.trigger(r)) : p.run();
}
},
handleSpacebar: function(t) {
var i = x[g];
i && (e.trigger(i, t), t.preventDefault());
},
handleEnterKey: function(t) {
var i = k[g];
i && (e.trigger(i, t), t.preventDefault());
},
handleTabKey: function(t) {
var i = t.originalEvent, n = i.metaKey || i.ctrlKey, a = t.shiftKey ? C : y, o = a[g];
o && !n && (e.trigger(o, t), t.preventDefault());
},
handleArrowKeys: function(t) {
var i = this, n = g && g.charAt(0).toUpperCase() + g.slice(1), a = n && i["_handle" + n + "Navigation"];
"function" == typeof a && (a.call(i, t), e.trigger("analytics:KeyboardNavigation:" + g, t.which));
},
handleSyncShortcut: function(e) {
var t = this, i = l.activeElement;
if (!i || !/input|textarea/i.test(i.tagName)) {
var n = e.originalEvent;
n.metaKey || n.ctrlKey || t.shortcut_sync();
}
},
_handleBrowserNavigation: function(t) {
var i = this, n = i.navKeyToDirection(t, "arrowkeys");
e.trigger("browser:navigate", n, t.shiftKey);
},
_handleDetailNavigation: function(t) {
var i = this, n = i.navKeyToDirection(t, "arrowkeys");
e.trigger("detail:navigate", n);
},
_handleSidebarNavigation: function(t) {
var i = this, n = i.navKeyToDirection(t, "arrowkeys");
e.trigger("sidebar:navigate", n);
},
_handleSettingsNavigation: function(t) {
var i = this, n = i.navKeyToDirection(t, "arrowkeys");
e.trigger("settings:navigate", n);
},
_handleUserMenuNavigation: function(t) {
var i = this, n = i.navKeyToDirection(t, "arrowkeys");
e.trigger("userMenu:navigate", n);
},
_handleTagPopoverNavigation: function(t) {
var i = this, n = i.navKeyToDirection(t, "arrowkeys");
e.trigger("tagPopover:navigate", n);
},
_handleAssignPopoverNavigation: function(t) {
var i = this, n = i.navKeyToDirection(t, "arrowkeys");
e.trigger("assignPopover:navigate", n);
},
navKeyToDirection: function(e, t) {
var i = e.target || e.srcElement, n = i.tagName, a = e.which, o = [ "assignPopover", "tagPopover" ], s = [ "INPUT", "SELECT", "TEXTAREA" ], l = -1 !== r.indexOf(s, n) || i && "true" === i.contentEditable, d = -1 === r.indexOf(o, g);
if (l && d) return !1;
switch (e.preventDefault(), a) {
case 37:
return "left";

case 39:
return "right";
}
if ("arrowkeys" === t) switch (a) {
case 38:
return "up";

case 40:
return "down";
} else if ("+-" === t) switch (a) {
case 187:
return "up";

case 189:
return "down";
}
},
shortcut_delete: function() {
if ("browser" === g) e.trigger("tasks:delete"), e.trigger("analytics:KeyboardShortcut:deleteTask"); else if ("sidebar" === g) e.trigger("lists:delete"), 
e.trigger("analytics:KeyboardShortcut:deleteList"); else if ("detail" === g) {
var t = e.currentRoute().toLowerCase();
t.indexOf("subtasks") >= 0 ? e.trigger("subtask:delete") : t.indexOf("files") >= 0 ? e.trigger("file:delete") : t.indexOf("comments") >= 0 && e.trigger("comment:delete");
}
return !1;
}
});
}), define("controllers/Tracking/TrackableEventsController", [ "application/runtime", "wunderbits/WBViewController", "project!core/lib/assert" ], function(e, t) {
var i = e._, n = e.$, a = t.prototype;
return t.extend({
validEvents: [ "UI.Tap", "UI.Show", "UI.Dismiss", "UI.Focus" ],
"implements": {
"track:tap": "trackTap",
"track:show": "trackShow",
"track:dismiss": "trackDismiss",
"track:focus": "trackFocus"
},
initialize: function() {
var e = this;
i.each(e.validEvents, function(t) {
var i = t.replace("UI.", ""), a = "track" + i;
e[a] = function(i) {
var a;
if ("string" == typeof i) a = i; else if ("target" in i) {
var o = n(i.target);
o = o.closest("[data-track-path]"), a = o.attr("data-track-path");
}
e.trackableElementName && a && 0 !== a.indexOf(e.trackableElementName) && (a = e.trackableElementName + "/" + a), 
a && e.track(t, a);
};
}), a.initialize.apply(e, arguments);
},
track: function(t, i) {
var n = this;
if (!t || n.validEvents.indexOf(t) < 0) throw new Error("Cannot track event without valid event name");
if (!i || "string" != typeof i) throw new Error("Cannot track event without valid element path");
e.trigger("trackingService", t, i);
}
});
}), define("wunderbits/WBModalViewController", [ "application/runtime", "controllers/Tracking/TrackableEventsController" ], function(e, t) {
var i = t.prototype;
return t.extend({
"implements": {
close: "closeView",
"click:close": "closeView"
},
initialize: function() {
var e = this;
i.initialize.apply(e, arguments), e.triggerOpened();
},
triggerOpened: function() {
var e = this, t = e.trackableElementName;
t && e.trackShow(t);
},
triggerClosed: function() {
var e = this, t = e.trackableElementName;
t && e.trackDismiss(t);
},
closeView: function() {
var e = this, t = e.view;
e.destroyed || t.destroyed || (e.triggerClosed(), e.onClose = t.options.onClose, 
e.returnFocus = t.returnFocus, t.destroy());
},
onDestroy: function() {
var t = this;
i.onDestroy.call(t), "function" == typeof t.onClose && (t.onClose(), t.onClose = null), 
t.returnFocus && e.trigger("focus:set", t.returnFocus);
}
});
}), define("/templates/modals/modal.js", {
name: "modals/modal",
data: {
"1": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return ' <div class="content-footer"> <div class="cols"> <div class="col-40"></div> <div class="col-40"></div> <div class="col-20"><button class="full blue close">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "button_done", {
name: "localized",
hash: {},
data: n
}))) + "</button></div> </div> </div> ";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = "function", s = this.escapeExpression, l = '<div id="' + s((o = t.id || e && e.id, 
typeof o === r ? o.call(e, {
name: "id",
hash: {},
data: n
}) : o)) + '" class="dialog ' + s((o = t.name || e && e.name, typeof o === r ? o.call(e, {
name: "name",
hash: {},
data: n
}) : o)) + ' shown"> <div class="content"/> ';
return a = t["if"].call(e, e && e.close, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l + " </div>";
},
useData: !0
}
}), define("wunderbits/WBModalView", [ "application/runtime", "./WBViewPresenter", "./WBModalViewController", "template!modals/modal" ], function(e, t, i, n) {
var a = e.Backbone, o = e._, r = t.prototype;
return t.extend({
template: n,
className: "dialog-wrapper",
"implements": [ i ],
emits: {
"click .close": "click:close"
},
observes: {
runtime: {
"window:resize": "checkScrolling"
}
},
initialize: function(t) {
var i = this;
r.initialize.apply(i, arguments), t && t.model instanceof a.Model && (i.model = t.model), 
t && t.opaque && i.$el.addClass("opaque"), i.returnFocus = e.focus;
},
render: function(e) {
var t, i = this;
if (o.isEmpty(e) && i.model instanceof a.Model) e = i.model.toJSON(); else if (o.isEmpty(e)) throw new Error("Cannot render modal view without data.");
return e.name = i.options.name, r.render.call(i, e), t = n(e), i.$el.html(t), i.scrollCheckBinding && i.unbindFrom(i.scrollCheckBinding), 
i.scrollCheckBinding = i.bindTo(i.$el.parent(), "scrollcheck", i.checkScrolling), 
i;
},
addScrolling: function() {
var e = this;
e.$(".dialog").addClass("scroll");
},
removeScrolling: function() {
var e = this;
e.$el && e.$(".dialog").removeClass("scroll");
},
checkScrolling: function() {
var e, t, i = this, n = i.$el && i.$(".dialog");
n && i.isVisible() && (i.removeScrolling(), e = n.height(), 94 > e && null !== e && !i.$el.parent().hasClass("hidden") ? (n.addClass("invisible"), 
i.delay("checkScrolling", 500)) : (t = i.$el.height() - 100, e > t && i.addScrolling(), 
n.removeClass("invisible")));
},
isVisible: function() {
var e = this;
return e.$el.is(":visible");
}
});
}), define("labs/FlashCards/FlashCardController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/WBViewController" ], function(e, t, i) {
return i.extend({
"implements": {
"input:keydown": "onKeyDown"
},
onKeyDown: function(e) {
var i = this;
if (e.which === t.enter) {
var n = i.view.$("input").val();
i.view.model.answer(n);
}
}
});
}), define("/templates/labs/flashCard.js", {
name: "labs/flashCard",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression;
return "<h2>" + r((a = t.question || e && e.question, typeof a === o ? a.call(e, {
name: "question",
hash: {},
data: n
}) : a)) + '</h2> <input type="text" class="big"> <div class="wrong-answer hidden"> <h3>The correct answer is <strong class="correct"></strong></h3> </div> ';
},
useData: !0
}
}), define("labs/FlashCards/FlashCardView", [ "application/runtime", "wunderbits/WBViewPresenter", "labs/FlashCards/FlashCardController", "template!labs/flashCard" ], function(e, t, i, n) {
var a = e._, o = t.prototype;
return t.extend({
className: "flash-card",
template: n,
"implements": [ i ],
emits: {
"keydown input": "input:keydown"
},
initialize: function(e) {
var t = this;
o.initialize.apply(t, arguments), t.model = e.model, t.bindTo(t.model, "answer:incorrect", t.renderIncorrectAnswer), 
t.bindTo(t.model, "answer:correct", t.renderCorrectAnswer);
},
render: function() {
var e = this;
return o.render.call(e, e.options.card), a.defer(function() {
e.$("input").select();
}), e;
},
renderCorrectAnswer: function() {
var e = this;
e.$("input").addClass("correct").attr("disabled", !0);
},
renderIncorrectAnswer: function(e, t) {
var i = this;
i.$("input").addClass("incorrect").attr("disabled", !0), i.$(".wrong-answer").removeClass("hidden"), 
i.$(".correct").text(t);
}
});
}), define("labs/FlashCards/FlashCardsModel", [ "application/runtime", "collections/TaskCollection", "collections/ListCollection", "wunderbits/WBModel", "wunderbits/helpers/date", "wunderbits/helpers/strings" ], function(e, t, i, n, a, o) {
var r = n.prototype, s = e._;
return n.extend({
defaults: {
progress: 0,
current: null,
correctAnswers: [],
incorrectAnswers: [],
correctAnswerDelay: 1e3,
incorrectAnswerDelay: 3e3,
correctAnswerLimit: 5
},
initialize: function(e, n) {
var a = this;
r.initialize.apply(a, arguments), a.options = n, a.tasks = new t("/lists/" + n.listId + "/tasks"), 
a.allTasks = new t("/tasks/all"), a.lists = new i("/lists/all");
},
start: function() {
var t = this;
e.once("lists:ready", function() {
var i = t.lists.get(t.options.listId);
i.isShared() ? t.trigger("stop:error", "shared-list") : e.once("tasks:ready", function() {
t.cards = t.getCards(), t.remainingCards = t.cards.slice(0), t.cards.length ? t.nextCard() : t.trigger("stop:error", "no-cards");
});
});
},
copyAndOpenList: function() {
var t = this, i = t.lists.get(t.options.listId), n = {
title: i.attributes.title,
position: i.attributes.position + .1
};
t.lists.add(n, {
success: function(i) {
var n = i.attributes.id, a = t.tasks.models.length, o = 0;
t.tasks.each(function(i) {
var r = i.attributes, s = {
title: r.title,
list_id: n,
starred: r.starred,
position: r.position
};
t.allTasks.add(s, {
success: function() {
o++, o === a - 1 && e.trigger("route:labs/flash-cards/" + n);
}
});
});
}
});
},
onCorrectAnswer: function() {
var e = this, t = e.attributes.current, i = e.tasks.get(t.id), n = i.attributes.note, o = parseInt(n, 10), r = e.attributes.correctAnswerLimit;
if (s.isNaN(o) ? o = 1 : o++, o >= r) o = 0, i.save({
completed: !0,
completed_at: a.getServerNow(),
note: "0",
starred: !1
}); else {
var l = e.attributes.incorrectAnswers.indexOf(t) >= 0;
i.save({
note: "" + o,
starred: l
});
}
e.trigger("answer:correct", t.answer), e.delay("nextCard", e.attributes.correctAnswerDelay), 
e.attributes.correctAnswers.push(t), e.set("correctAnswers", e.attributes.correctAnswers), 
e.updateProgress();
},
onIncorrectAnswer: function(e) {
var t = this, i = t.attributes.current, n = t.tasks.get(i.id);
t.remainingCards.push(i), t.remainingCards = s.shuffle(t.remainingCards), n.save({
note: "0",
starred: !0
}), t.trigger("answer:incorrect", e, i.answer), t.delay("nextCard", t.attributes.incorrectAnswerDelay), 
t.attributes.incorrectAnswers.push(i), t.set("incorrectAnswers", t.attributes.incorrectAnswers);
},
answer: function(e) {
var t = this, i = t.attributes.current, n = e === i.answer;
n ? t.onCorrectAnswer() : t.onIncorrectAnswer(e);
},
nextCard: function() {
var e = this, t = e.remainingCards.length;
if (e.updateProgress(), t) {
var i = e.remainingCards.pop(), n = e.attributes.current;
if (n && n.id === i.id && t > 1) return e.remainingCards.push(i), e.remainingCards = s.shuffle(e.remainingCards), 
e.nextCard();
e.set("current", null, {
silent: !0
}), e.set("current", i);
} else e.trigger("stop:done", e.getCorrectPercent());
},
getCorrectPercent: function() {
var e = this, t = e.attributes.correctAnswers.length, i = e.attributes.incorrectAnswers.length, n = t + i, a = t / n * 100;
return a;
},
updateProgress: function() {
var e = this, t = 100 - e.remainingCards.length / e.cards.length * 100;
e.set("progress", t);
},
getCards: function() {
var e = this, t = [];
return e.tasks.each(function(i) {
if (!i.isCompleted()) {
var n = e.getCard(i.attributes);
n && t.push(n);
}
}), s.shuffle(t);
},
getCard: function(e) {
var t = e.title.split("="), i = o.trim(t[0]), n = o.trim(t[1]);
return i && n ? {
id: e.id,
question: i,
answer: n
} : void 0;
}
});
}), define("/templates/labs/flashCards.js", {
name: "labs/flashCards",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<div class="content-inner"> <div class="progress-outer"> <div class="progress-inner"></div> </div> <div class="cards"></div> <div class="message hidden">Awesome job!</div> </div>';
},
useData: !0
}
}), define("/styles/labs/_flashCards.js", {
name: "labs/_flashCards",
data: "#flashCards.dialog .content-inner{text-align:center;}#flashCards.dialog .content-inner .progress-outer{margin-top:5px;width:100%;height:20px;background-color:#000}#flashCards.dialog .content-inner .progress-inner{height:20px;background-color:#008000;width:0;-webkit-transition:width;-moz-transition:width;-o-transition:width;-ms-transition:width;transition:width}#flashCards.dialog .content-inner h2{margin:75px 20px;font-size:45px}#flashCards.dialog .content-inner input{margin-bottom:10px;text-align:center;padding:23px 10px;font-size:35px;}#flashCards.dialog .content-inner input.incorrect{background-color:#f00;color:#fff}#flashCards.dialog .content-inner input.correct{background-color:#008000;color:#fff}#flashCards.dialog .content-inner .message{font-size:30px;margin:30px;font-weight:bold}#flashCards.dialog .content-inner .wrong-answer{margin-top:10px;margin-bottom:15px;font-size:25px}#flashCards.dialog .content-inner strong.correct{color:#008000}"
}), define("labs/FlashCards/FlashCardsModalView", [ "application/runtime", "wunderbits/WBModalView", "collections/ListCollection", "./FlashCardView", "./FlashCardsModel", "template!labs/flashCards", "style!labs/_flashCards" ], function(e, t, i, n, a, o, r) {
var s = t.prototype;
return t.extend({
template: o,
styles: [ r ],
initialize: function(e) {
var t = this;
e.opaque = !0, s.initialize.call(t, e), t.lists = new i("/lists/all"), t.model = new a({}, e), 
t.bindTo(t.model, "change:progress", t.renderProgress), t.bindTo(t.model, "change:current", t.renderCard), 
t.bindTo(t.model, "stop:done", t.renderDone), t.bindTo(t.model, "stop:error", t.handleError);
},
render: function() {
var t = this, i = t.lists.get(t.options.listId);
s.render.call(t, {
id: "flashCards",
title: "Flash cards: " + i.attributes.title,
close: e.language.getText("button_done")
});
var n = t.$(".content");
return n.html(t.template(t.formatData(t.renderData))), t.$el.addClass("flash-cards"), 
t.$el.css("display", "none"), t.renderLocalized(), t.defer(t.model.start, t.model), 
t;
},
renderDone: function(e) {
var t, i = this;
i.destroySubview("card"), 25 >= e ? t = "Not so great, keep at it! Practice makes perfect!" : 50 >= e ? t = "Good job! A few more rounds then you got this!" : 75 >= e ? t = "Great work, and the only way from here is up!" : 95 >= e ? t = "Awesome, you're nailing this!" : 100 === e && (t = "Amazing! Are you sure you're not cheating? ;)"), 
i.$(".message").text(t).removeClass("hidden"), i.delay("close", 2e3);
},
renderCard: function() {
var e = this;
e.$el.css("display", "block");
var t = e.model.attributes.current, i = e.addSubview(new n({
card: t,
model: e.model
}), "card");
e.$(".cards").append(i.render().el);
},
renderProgress: function() {
var e = this, t = e.model.attributes.progress, i = e.$(".progress-outer").width();
e.$(".progress-inner").width(i * (t / 100));
},
close: function() {
var e = this;
e.onClose && (e.onClose(), e.onClose = null);
},
handleError: function(t) {
var i = this, n = i.model;
i.close();
var a = "Failed to start Flash Cards";
"no-cards" === t ? e.trigger("modal:confirm", {
customTitle: a,
customText: 'It doesn\'t look like this list contain any tasks that can be used as flash cards. Create one or more tasks with a title like "question = answer", excluding the quotes.',
confirmText: e.language.getLabel("button_ok").toString(),
hideCancel: !0
}) : "shared-list" === t && e.trigger("modal:confirm", {
customTitle: a,
customText: "This list is shared, and because of that you can't run it as flash cards. Do you want to make a copy of the list and then start a round of Flash Cards?",
confirmText: e.language.getLabel("button_yes").toString(),
cancelText: e.language.getLabel("button_no").toString(),
confirm: n.copyAndOpenList
});
}
});
}), define("views/Labs/Controllers/LabsViewController", [ "application/runtime", "wunderbits/WBModalViewController" ], function(e, t) {
var i = e.$, n = e._;
return t.extend({
"implements": {
"change:input": "onChangeToggleable"
},
onChangeToggleable: function(t) {
var a = i(t.currentTarget), o = {}, r = a.attr("id").replace(/-/g, "_"), s = a.is(":checked");
o[r] = s ? "true" : "false", e.trigger("analytics:Labs:toggleLabs-" + r, s), e.settings.save(o), 
n.delay(function() {
e.reload("/labs");
}, 500);
}
});
}), define("/templates/labs/labs.js", {
name: "labs/labs",
data: {
"1": function() {
return "checked";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = '<div class="content-inner"> <div class="separator"> <div class="cols"> <div class="col-100"> <p>As a beta tester and Wunderlist Pro subscriber, we are giving you a taste of the wicked fresh sauce we are cooking up in our labs. Please give these features a run and send any feedback to <a href="mailto:beta@6wunderkinder.com">beta@6wunderkinder.com</a>.</p> </div> </div> </div> <!-- tag autocomplete --> <div class="separator"> <div class="cols top"> <div class="col-10"> <input id="labs-tag-autocomplete-enabled" type="checkbox" ';
return a = t["if"].call(e, e && e.labsTagAutoComplete, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), o += '/> </div> <div class="col-90"> <h3>Tag Autocomplete <small>(requires reload)</small></h3> <p> Typing \'#\' in the add task input field will popup a list of previously used tags that you can use for autocompletion. </p> </div> </div> </div> <!-- tag cloud --> <div class="separator"> <div class="cols top"> <div class="col-10"> <input id="labs-tag-cloud-enabled" type="checkbox" ', 
a = t["if"].call(e, e && e.labsTagCloud, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), o += '/> </div> <div class="col-90"> <h3>Tag Cloud <small>(requires reload)</small></h3> <p> Display a tag cloud below the lists in the side bar, with style weights based on the tags\' frequency of occerence. </p> </div> </div> </div> <!-- flash cards --> <div class="separator"> <div class="cols top"> <div class="col-10"> <input id="labs-flash-cards-enabled" type="checkbox" ', 
a = t["if"].call(e, e && e.labsFlashCards, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), o += '/> </div> <div class="col-90"> <h3>Flash Cards <small>(requires reload)</small></h3> <p> Use the task titles in your list to practice words and phrases. When you\'ve answered correctly five times, the task will be completed. </p> </div> </div> </div> <!-- developer labs --> <div class="separator"> <div class="cols"> <div class="col-100"> <h2 class="section">Developer Labs (use with caution)</h2> </div> </div> </div> <!-- forces http --> <div class="separator"> <div class="cols top"> <div class="col-10"> <input id="labs-force-http-sync-enabled" type="checkbox" ', 
a = t["if"].call(e, e && e.labsForcedHttpSync, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), o + '/> </div> <div class="col-90"> <h3>Forced HTTP Sync <small>(requires reload)</small></h3> <p> If this option is enabled, Sync will use REST api instead of the websocket. </p> </div> </div> </div> </div>';
},
useData: !0
}
}), define("/styles/labs/_labs.js", {
name: "labs/_labs",
data: "#labs.dialog{width:500px;}#labs.dialog h2.section{text-align:center;font-weight:bold}#labs.dialog input[type=checkbox]{margin-top:3px;margin-left:5px}"
}), define("labs/LabsView", [ "application/runtime", "wunderbits/WBModalView", "views/Labs/Controllers/LabsViewController", "template!labs/labs", "style!labs/_labs" ], function(e, t, i, n, a, o) {
var r = e._, s = t.prototype;
return t.extend({
template: n,
styles: [ a ],
"implements": [ i ],
emits: {
"change input": "change:input"
},
renderData: {
labsTagAutoComplete: o,
labsTagCloud: o,
labsFlashCards: o,
labsForcedHttpSync: o
},
formatData: function(t) {
return t.labsTagAutoComplete = e.isLabsEnabled("tag_autocomplete"), t.labsTagCloud = e.isLabsEnabled("tag_cloud"), 
t.labsFlashCards = e.isLabsEnabled("flash_cards"), t.labsForcedHttpSync = e.isLabsEnabled("force_http_sync"), 
t;
},
initialize: function() {
var t = this;
t._isRendered = !1, s.initialize.apply(t, arguments), t.toggleables = [], r.each(t.toggleables, function(i) {
t.bindTo(e.settings, "change:" + i, function() {
t._updateToggleable(i);
});
});
},
render: function(t) {
var i = this;
t = t || {};
var n = {
id: "labs",
close: e.language.getText("button_done")
};
i.onClose = i.onClose || t && t.onClose, s.render.call(i, n);
var a = i.$(".content");
return a.html(i.template(i.formatData(i.renderData))), i.$el.addClass("labs"), i.renderLocalized(), 
i;
},
_updateToggleable: function(t) {
var i = this, n = e.settings.get(t), a = i.$el.find("#" + t.replace(/_/g, "-"));
a.prop("checked", "true" === n);
}
});
}), define("views/Social/controllers/RateModalController", [ "application/runtime", "wunderbits/data/keycodes", "vendor/moment", "wunderbits/WBModalViewController" ], function(e, t, i, n) {
var a = e.$;
return n.extend({
trackableElementName: "AppRating/Dialog",
"implements": {
"click:later": "scheduleLater",
"click:nothanks": "scheduleNever",
"click:rate": "scheduleNever",
"keydown:buttons": "handleButtonKeys",
keydown: "handleKeys"
},
saveAndClose: function(t) {
var i = this, n = e.env.isChromeApp() ? "chrome_app_rating_later" : "chrome_rating_later", a = {};
a[n] = t, e.settings.save(a), i.closeView();
},
scheduleLater: function(e) {
var t = this, n = i().sod().valueOf();
t.trackTap(e), t.saveAndClose(String(n));
},
scheduleNever: function(e) {
var t = this;
t.trackTap(e), t.saveAndClose("false");
},
handleButtonKeys: function(e) {
var i = this;
e.which === t.tab && i.handleTabKey(e);
},
handleTabKey: function(e) {
var t = a(e.target), i = this;
!e.shiftKey && t.hasClass("later") ? (i.view.focusRate(), i.stopEventFully(e)) : e.shiftKey && t.hasClass("no-thanks") ? (i.view.focusRate(), 
i.stopEventFully(e)) : e.shiftKey && t.hasClass("rate") && (i.view.focusLater(), 
i.stopEventFully(e));
}
});
}), define("/templates/modals/rateModal.js", {
name: "modals/rateModal",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression, s = "function";
return '<div class="content-inner notice" tabindex="0"> <span class="icon wunderlist-icon"></span> <div class="confirm-text"> <h3>' + r((a = t.localized || e && e.localized || o, 
a.call(e, "rate_app_heading", {
name: "localized",
hash: {},
data: n
}))) + "</h3> <p>" + r((a = t.localized || e && e.localized || o, a.call(e, "rate_app_message_web_chrome", {
name: "localized",
hash: {},
data: n
}))) + '</p> </div> </div> <div class="content-footer"> <div class="cols"> <div class="col-28"> <button class="full no-thanks" data-track-path="NoThankYouButton">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "rate_app_button_no", {
name: "localized",
hash: {},
data: n
}))) + '</button> </div> <div class="col-28"> <button class="full later" data-track-path="LaterButton">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "rate_app_button_later", {
name: "localized",
hash: {},
data: n
}))) + '</button> </div> <div class="col-44"> <a class="button blue full rate" href="' + r((a = t.url || e && e.url, 
typeof a === s ? a.call(e, {
name: "url",
hash: {},
data: n
}) : a)) + '" target="_blank" data-track-path="RateButton">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "rate_app_button_yes", {
name: "localized",
hash: {},
data: n
}))) + "</a> </div> </div> </div> ";
},
useData: !0
}
}), define("views/Social/RateModalView", [ "application/runtime", "wunderbits/WBModalView", "./controllers/RateModalController", "template!modals/rateModal" ], function(e, t, i, n) {
var a = t.prototype;
return t.extend({
template: n,
"implements": [ i ],
emits: {
"click .later": "click:later",
"click .no-thanks": "click:nothanks",
"click .rate": "click:rate",
"keydown button": "keydown:buttons",
"keydown a.rate": "keydown:buttons",
keydown: "keydown"
},
renderData: {
url: null
},
formatData: function(t) {
var i = this;
return t = a.formatData.call(i, t), t.id = "rateModal", t.url = e.env.isChromeApp() ? "https://chrome.google.com/webstore/detail/wunderlist-for-chrome/ojcflmmmcfpacggndoaaflkmcoblhnbh/reviews" : "https://chrome.google.com/webstore/detail/wunderlist/fjliknjliaohjgjajlgolhijphojjdkc/reviews", 
t;
},
render: function() {
var e = this;
a.render.call(e, e.formatData(e.renderData));
var t = e.$(".content");
return t.html(e.template(e.formatData(e.renderData))), e.defer(function() {
e.delegateEvents(), e.$(".content-inner").focus();
}), e.renderLocalized(), e;
},
focusRate: function() {
this.$("a.rate").focus();
},
focusNoThanks: function() {
this.$("button.no-thanks").focus();
},
focusLater: function() {
this.$("button.later").focus();
}
});
}), define("views/Social/controllers/TellModalController", [ "application/runtime", "wunderbits/data/keycodes", "vendor/moment", "wunderbits/WBModalViewController" ], function(e, t, i, n) {
var a = e.$;
return n.extend({
"implements": {
"click:link": "clickLink",
"keydown:links": "handleKeys"
},
clickLink: function() {
var e = this, t = e.view;
t.showThanks();
},
handleKeys: function(e) {
var i = this;
e.which === t.tab ? i.handleTabKey(e) : e.which === t.enter && e.stopPropagation();
},
handleTabKey: function(e) {
var t = a(e.target), i = this;
!e.shiftKey && t.closest("li").hasClass("share-twitter") ? (i.view.focusGoogle(), 
i.stopEventFully(e)) : e.shiftKey && t.closest("li").hasClass("share-google") && (i.view.focusTwitter(), 
i.stopEventFully(e));
}
});
}), define("/templates/modals/tellModal.js", {
name: "modals/tellModal",
data: {
"1": function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression, s = t.helperMissing;
return ' <li class="link share-weibo"> <span class="icon weibo-btn arrow-btn"></span> <a href="http://service.weibo.com/share/share.php?url=' + r((a = t.url || e && e.url, 
typeof a === o ? a.call(e, {
name: "url",
hash: {},
data: n
}) : a)) + "&amp;title=" + r((a = t.shareText || e && e.shareText, typeof a === o ? a.call(e, {
name: "shareText",
hash: {},
data: n
}) : a)) + '" target="_blank" class="button withArrow">' + r((a = t.localized || e && e.localized || s, 
a.call(e, "social_sharing_button_facebook", {
name: "localized",
hash: {},
data: n
}))) + "</a> </li> ";
},
"3": function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression, s = t.helperMissing;
return ' <li class="link share-google"> <span class="icon google-btn arrow-btn"></span> <a href="https://plus.google.com/share?url=' + r((a = t.url || e && e.url, 
typeof a === o ? a.call(e, {
name: "url",
hash: {},
data: n
}) : a)) + '" target="_blank" class="button withArrow">+1</a> </li> <li class="link share-facebook"> <span class="icon facebook-btn arrow-btn"></span> <a href="http://www.facebook.com/dialog/feed?app_id=208559595824260&amp;link=' + r((a = t.url || e && e.url, 
typeof a === o ? a.call(e, {
name: "url",
hash: {},
data: n
}) : a)) + "&amp;redirect_uri=" + r((a = t.url || e && e.url, typeof a === o ? a.call(e, {
name: "url",
hash: {},
data: n
}) : a)) + "&amp;name=" + r((a = t.shareText || e && e.shareText, typeof a === o ? a.call(e, {
name: "shareText",
hash: {},
data: n
}) : a)) + '" target="_blank" class="button withArrow" data-key-aria-label="iyf_dialog_share_on_facebook">' + r((a = t.localized || e && e.localized || s, 
a.call(e, "social_sharing_button_facebook", {
name: "localized",
hash: {},
data: n
}))) + '</a> </li> <li class="link share-twitter"> <span class="icon twitter-btn arrow-btn"></span> <a href="http://twitter.com/share?text=' + r((a = t.tweetText || e && e.tweetText, 
typeof a === o ? a.call(e, {
name: "tweetText",
hash: {},
data: n
}) : a)) + '" target="_blank" class="button withArrow">' + r((a = t.localized || e && e.localized || s, 
a.call(e, "social_sharing_button_twitter", {
name: "localized",
hash: {},
data: n
}))) + "</a> </li> ";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = '<div class="content-inner" tabindex="0"> <span class="icon stripe"></span> <a class="close"> <span class="icon dismiss"></span> </a> <div class="separator noline"> <div class="cols"> <div class="image-headline" aria-hidden="true"> <h1 class="icon love-wunderlist prompt" title="Love Wunderlist?"></h1> <h1 class="icon danke thanks hidden" title="Dankeschön!"></h1> </div> <div class="text-headline hidden"> <h1 class="blue prompt">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "social_sharing_dialog_headline", {
name: "localized",
hash: {},
data: n
}))) + '</h1> <h1 class="blue thanks hidden">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "social_sharing_dialog_danke", {
name: "localized",
hash: {},
data: n
}))) + "</h1> </div> <p>" + s((o = t.localized || e && e.localized || r, o.call(e, "social_sharing_heading", {
name: "localized",
hash: {},
data: n
}))) + '</p> </div> </div> </div> <div class="content-footer"> <ul class="social-links"> ';
return a = t["if"].call(e, e && e.isChina, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.program(3, n),
data: n
}), (a || 0 === a) && (l += a), l + " </ul> </div>";
},
useData: !0
}
}), define("/styles/modals/tellModal.js", {
name: "modals/tellModal",
data: "#tellModal{width:330px;margin-left:-165px;}#tellModal .content-inner{text-align:center}#tellModal p{font-size:15px}#tellModal h1{margin:7px auto 14px auto}#tellModal .stripe{position:absolute;top:0;left:0;width:100%;margin-left:5px}#tellModal .close{position:absolute;right:10px;padding:0;margin:0;z-index:100}"
}), define("views/Social/TellModalView", [ "application/runtime", "wunderbits/WBModalView", "./controllers/TellModalController", "template!modals/tellModal", "style!modals/tellModal" ], function(e, t, i, n, a) {
var o = e._, r = t.prototype;
return t.extend({
template: n,
styles: [ a ],
"implements": [ i ],
emits: {
"click .link a": "click:link",
"keydown .link a": "keydown:links"
},
formatData: function(t) {
var i = this;
return t = r.formatData.call(i, t), t.id = "tellModal", t.url = "https://www.wunderlist.com", 
t.isChina = "CN" === e.user.attributes.country, t.shareText = encodeURIComponent(e.language.getText("general_sharing_placeholder")), 
t.tweetText = encodeURIComponent(e.language.getText("twitter_sharing_placeholder").replace("http://wunderli.st", "https://www.wunderlist.com")), 
t;
},
render: function() {
var e = this;
r.render.call(e, e.formatData(e.renderData));
var t = e.$(".content");
return t.html(e.template(e.formatData(e.renderData))), e.updateHeadlineType(), e.defer(function() {
e.delegateEvents(), e.$(".content-inner").focus();
}), e.renderLocalized(), e;
},
updateHeadlineType: function() {
var t = this, i = [ "ko_KR", "ja_JP", "zh_CN", "zh_TW" ], n = e.settings.attributes.language, a = i.indexOf(n) < 0;
t.$(".image-headline").toggleClass("hidden", !a), t.$(".text-headline").toggleClass("hidden", a);
},
showThanks: function() {
var e = this;
o.delay(function() {
e.$(".prompt").addClass("hidden"), e.$(".thanks").removeClass("hidden");
}, 1e3);
},
focusTwitter: function() {
this.$(".share-twitter a").focus();
},
focusGoogle: function() {
this.$(".share-google a").focus();
}
});
}), define("views/Debug/controllers/DebugModalController", [ "application/runtime", "wunderbits/WBModalViewController" ], function(e, t) {
return t.extend({
"implements": {
"click:purge": "purgeTrackers",
"toggle:updating": "toggleUpdating",
"click:export": "exportTrackers"
},
purgeTrackers: function() {
var t = this, i = t.view, n = "You should only purge the tracker models if you absolutely know what you are doing.  Any unsynced local changes will be lost FOREVER. Are you sure that you want to purge all sync trackers?";
window.confirm(n) && (e.trigger("trackers:clear"), i.renderTrackerData());
},
toggleUpdating: function() {
var e = this, t = e.view;
t.update = !t.update, t.$(".toggle-updating").text(t.update ? "Pause Updating" : "Resume Updating");
},
exportTrackers: function() {
var t = this;
e.global.trackers = t.view.trackerModels;
}
});
}), define("/templates/debug/debug.js", {
name: "debug/debug",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<div class="content-inner"> <div class="heading"> <p> Queued for Syncing items are reflected as "# unsynced items" in the user menu. <br/> Currently Syncing items are items that have been sent out as part of an API<br/> request and awaiting API response. </p> <p> <a class="toggle-updating">Pause Updating</a> <a class="export-trackers">Expose Trackers on window</a> <a class="purge-trackers">Clear all Trackers</a> </p> </div> <h2>Queued for Syncing</h2> <div class="queued"> <ul class="trackers"></ul> </div> <h2>Currently Syncing</h2> <div class="syncing"> <ul class="trackers"></ul> </div> </div>';
},
useData: !0
}
}), define("/styles/debug/_debug.js", {
name: "debug/_debug",
data: '.dialog-wrapper.debug.active{background:rgba(0,0,0,0.6)}#debug.dialog,#debug button,#debug .button{font-family:Terminus,Consolas,Profont,"Andale Mono",Monaco,Inconsolata,Inconsolata-g,Unifont,Lime,"ClearlyU PUA",Clean,"DejaVu Sans Mono","Lucida Console","Bitstream Vera Sans Mono",Freemono,"Liberation Mono",Dina,Anka,Droid Sans Mono,Anonymous Pro,Proggy fonts,Envy Code R,Gamow,Courier,"Courier New",Terminal,monospace}#debug.dialog{width:80%;margin-left:-40%;background:#000;-webkit-box-shadow:none;box-shadow:none;color:#737272;-webkit-border-radius:0;border-radius:0;}#debug.dialog .content-inner{-webkit-border-radius:0;border-radius:0;min-height:100px;background:#000;}#debug.dialog .content-inner *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;font-size:16px}#debug.dialog .content-inner a{color:#87ceeb;}#debug.dialog .content-inner a:hover{color:#fff}#debug.dialog .content-inner a.purge-trackers{color:#dc143c;}#debug.dialog .content-inner a.purge-trackers:hover{color:#f00}#debug.dialog .content-inner h2{padding-bottom:14px;color:#0c0;line-height:14px}#debug.dialog .content-inner p{margin:5px 0}#debug.dialog .content-inner .heading{border-bottom:1px solid #333;margin:14px 0;padding-bottom:14px;}#debug.dialog .content-inner .heading *{font-size:13px}#debug.dialog .content-inner ul.trackers{margin-left:2em;list-style:square;text-transform:uppercase;font-weight:bold;color:#87ceeb}#debug.dialog .content-inner ul.items{margin-left:2em;list-style:decimal;text-transform:none;font-weight:normal;color:#737272;}#debug.dialog .content-inner ul.items .failure{color:#f00}#debug.dialog .content-inner ul li{margin-top:1em;}#debug.dialog .content-inner ul li table tr td:nth-child(1){text-align:right}#debug.dialog .content-inner ul li table tr td:nth-child(2){font-weight:bold}'
}), define("views/Debug/DebugModalView", [ "application/runtime", "wunderbits/WBModalView", "./controllers/DebugModalController", "template!debug/debug", "style!debug/_debug" ], function(e, t, i, n, a) {
var o = e.$, r = e._, s = t.prototype;
return t.extend({
template: n,
styles: [ a ],
"implements": [ i ],
emits: {
"click .purge-trackers": "click:purge",
"click .toggle-updating": "toggle:updating",
"click .export-trackers": "click:export"
},
initialize: function() {
var e = this;
e.throttledRenderTrackerData = r.throttle(e.renderTrackerData, 250), s.initialize.apply(e, arguments), 
e.update = !0;
},
render: function(t) {
var i = this;
i.trackerModels = e.trackers;
var n = {
id: "debug",
close: e.language.getText("button_done")
};
return i.onClose = i.onClose || t && t.onClose, s.render.call(i, n), i.$(".content").append(i.template()), 
i.$el.addClass("debug"), i.$(".blue.button").removeClass("blue"), i.$(".toggle-updating").text(i.update ? "Pause Updating" : "Resume Updating"), 
i.renderTrackerData(), i.renderLocalized(), i.bindToCollections(), i;
},
bindToCollections: function() {
var e = this;
r.each(e.trackerModels, function(t) {
e.bindTo(t, "change", e.throttledRenderTrackerData);
});
},
renderTrackerData: function() {
var e = this;
e.update && (e.$(".syncing .trackers, .queued .trackers").empty(), r.each(e.trackerModels, function(t, i) {
if (!/meta|failures|localIDs/.test(i)) {
var n = /settings/.test(i), a = t.attributes;
if (!(r.size(a) < 2)) {
var s = e.$(/Syncing/.test(i) ? ".syncing .trackers" : ".queued .trackers"), l = o("<li>" + i + '<ul class="items"/></li>'), d = l.find("ul.items");
s.append(l), r.each(a, function(e, t) {
var a = t;
if ("id" !== t && e) {
var o = "<li>" + t + "<table>";
n && (a = i), n ? o += "<tr><td>" + t + ":</td><td>" + r.escape(String(e)) + "</td></tr>" : r.each(e, function(e, t) {
o += "<tr><td>" + t + ":</td><td>" + r.escape(String(e)) + "</td></tr>";
}), o += "</table></li>", d.append(o);
}
});
}
}
}), e.checkScrolling());
}
});
}), define("views/IYF/Controllers/IYFController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/WBValidationHelper", "wunderbits/WBModalViewController" ], function(e, t, i, n) {
var a = e.$, o = n.prototype;
return n.extend({
trackableElementName: "IYF/Dialog",
"implements": {
"click:showStep": "onClickShowStep",
"click:inviteMore": "onClickInviteMore",
"click:url": "selectUrl",
"focus:url": "onFocusUrlInput",
"click:sendInvites": "sendInvites",
"click:social": "trackSocialClicks",
"focus:email": "onInputFocus",
"keyup:email": "afterInputChange",
"blur:email": "afterInputChange",
"keydown:tabTarget": "onTabTargetKeydown"
},
initialize: function() {
var t = this;
o.initialize.apply(t, arguments), t.sdk = e.sdk;
},
sendInvites: function() {
var t = this, n = t.view, o = n.$(".list-invite-item input[type=text]"), r = [];
o.each(function() {
this.value && i.isValidEmail(this.value) && r.push(this.value);
}), r.length && (n.updateSendButton(!1), o.attr("disabled", !0), t.sdk.getOutlet().invites.create({
emails: r
}).done(function() {
"true" === e.settings.attributes.campaign_iyf4_notification && e.settings.save({
campaign_iyf4_invited_friends: "true"
}), n.showStep(2), n.updateSendButton(!0), n.$(".list-invite-item").each(function(e, t) {
3 > e ? a(t).find("input.email").val("") : a(t).remove();
});
}));
},
afterInputChange: function(e) {
var n, o, r = this, s = r.view, l = s.$(e.target), d = l.val();
a("input.email").each(function(e, t) {
if (t.value) {
if (!i.isValidEmail(t.value)) return n = t, !1;
o = t;
}
}), !e.which && n ? (s.updateSendButton(!1), a(n).select()) : (n ? s.updateSendButton(!1) : o && s.updateSendButton(!0), 
s.ensureEmptyInput(), (e.which === t.enter || e.which === t.tab) && (d ? s.focusFirstEmpty() : e.which === t.enter && r.sendInvites()));
},
selectUrl: function() {
var e = this;
e.defer(function() {
e.view.$(".url").select();
});
},
onClickShowStep: function(e) {
var t = this;
t.view.showStep(e.currentTarget.getAttribute("rel"));
},
onTabTargetKeydown: function(e) {
var i = this, n = i.view;
if (e.which === t.tab) {
var o = a(e.target);
e.shiftKey && o.hasClass("email") ? (n.focusUrl(), i.stopEventFully(e)) : !e.shiftKey && o.hasClass("url") && (n.focusFirstEmpty(), 
i.stopEventFully(e));
}
}
});
}), define("/templates/IYF/IYF.js", {
name: "IYF/IYF",
data: {
"1": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return ' <div class="col-50"> <a target="_blank" class="button external facebook auth"> <span class="icon facebook-btn"/> ' + r((a = t.localized || e && e.localized || o, 
a.call(e, "iyf_dialog_share_on_facebook", {
name: "localized",
hash: {},
data: n
}))) + '</a> </div> <div class="col-50"> <a target="_blank" class="button external twitter auth"> <span class="icon twitter-btn"/> ' + r((a = t.localized || e && e.localized || o, 
a.call(e, "iyf_dialog_post_on_twitter", {
name: "localized",
hash: {},
data: n
}))) + " </a> </div> ";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = '<!-- STEP ONE --> <div class="icon big-star"></div> <div class="content-inner step step-1"> <div class="separator noline"> <h2 class="center">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "iyf4_dialog_invite_headline_$", "$iyf4_dialog_invite_headline_incentive", {
name: "localized",
hash: {},
data: n
}))) + '</h2> </div> <div class="scroll-padding"> <div class="separator noline"> <ul class="list-invite"> <li class="list-invite-item"> <input type="text" class="email chromeless" data-key-placeholder="iyf_dialog_email_placeholder" value=""> </li> <li class="list-invite-item"> <input type="text" class="email chromeless" data-key-placeholder="iyf_dialog_more_placeholder" value=""> </li> </ul> </div> <div class="separator bigger"> <button class="green big disabled send-invites"><b>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_send", {
name: "localized",
hash: {},
data: n
}))) + '</b></a> </div> <div class="separator noline"> <div class="cols"> <div class="separator-label"><span>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "iyf_dialog_step2_divider_label", {
name: "localized",
hash: {},
data: n
}))) + "</span></div> ";
return a = t["if"].call(e, e && e.showSocialButtons, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l + ' </div> </div> <div class="separator big"> <ul class="list-invite url-selector"> <li> <input type="text" class="url chromeless" value="" data-key-aria-label="iyf_dialog_step2_divider_label"/> </li> </ul> </div> <div class="separator"> <div class="cols"> <div class="col-100"> <small>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "iyf4_dialog_invite_incentive_$", "$iyf4_dialog_invite_incentive_terms", {
name: "localized",
hash: {},
data: n
}))) + '</small> </div> </div> </div> </div> </div> <!-- STEP TWO --> <div class="content-inner step step-2"> <div class="scroll-padding"> <div class="separator big"> <h2 class="center"><strong>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "iyf_dialog_step3_success_headline", {
name: "localized",
hash: {},
data: n
}))) + '</strong></h2> <h2 class="center">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "iyf_dialog_step3_subheadline", {
name: "localized",
hash: {},
data: n
}))) + '</h2> </div> <div class="separator"> <div class="cols"> <div class="col-50"> <a class="button big close">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_done", {
name: "localized",
hash: {},
data: n
}))) + '</a> </div> <div class="col-50"> <a class="button big green show-step invite-more" rel="1"><b>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "iyf_dialog_step3_invite_more", {
name: "localized",
hash: {},
data: n
}))) + "</b></a> </div> </div> </div> </div> </div> ";
},
useData: !0
}
}), define("/styles/IYF/_iyf.js", {
name: "IYF/_iyf",
data: "#wunderlist-base #invite-friends.shown ~ #tasks{top:110px}#wunderlist-base #invite-friends.shown ~ #detail{top:110px}#wunderlist-base #inviteYourFriends{width:540px;left:50%;margin-left:-270px;overflow:visible;}#wunderlist-base #inviteYourFriends .content-inner{background:none;margin-top:8px;-webkit-box-shadow:none;box-shadow:none}#wunderlist-base #inviteYourFriends .scroll-padding{padding:0 60px}#wunderlist-base #inviteYourFriends .big-star{display:block;margin:-46px auto 0 auto}#wunderlist-base #inviteYourFriends .head{display:none}#wunderlist-base #inviteYourFriends small{display:block;text-align:center;color:#737272;line-height:18px}#wunderlist-base #inviteYourFriends h2{font-weight:200;padding-left:20px;padding-right:20px;}#wunderlist-base #inviteYourFriends h2 text{font-size:24px}#wunderlist-base #inviteYourFriends h3{font-size:15px;line-height:20px}#wunderlist-base #inviteYourFriends p{font-size:13px;line-height:18px}#wunderlist-base #inviteYourFriends.scroll .content-inner{margin-top:0;top:55px}#wunderlist-base #inviteYourFriends .show-step{padding:11px 17px}#wunderlist-base #inviteYourFriends input.url:disabled{color:#262626}#wunderlist-base #inviteYourFriends .circle{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding-top:5px;text-align:center;cursor:default}@media all and (max-width:1024px){#wunderlist-base #invite-friends.shown{display:none;}#wunderlist-base #invite-friends.shown ~ #tasks,#wunderlist-base #invite-friends.shown ~ #detail{top:0;top:0}}"
}), define("/styles/_listings.js", {
name: "_listings",
data: ".list-invite{background:#fff;-webkit-border-radius:4px;border-radius:4px;border:1px solid #c9c9c9;overflow-y:auto;}.list-invite li{position:relative;padding:12px;border-bottom:1px solid #ddd;}.list-invite li:last-child{border:none}.list-invite li .icon{position:absolute;top:14px}.list-invite li .list-invite-name{white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;padding-left:30px;padding-right:40px}.list-invite li .list-invite-check{position:absolute;right:12px;top:15px}"
}), define("views/IYF/InviteYourFriendsView", [ "project!core/lib/fromSuper", "application/runtime", "wunderbits/WBModalView", "views/IYF/Controllers/IYFController", "template!IYF/IYF", "style!IYF/_iyf", "style!_listings" ], function(e, t, i, n, a, o, r) {
var s = t.$, l = i.prototype;
return i.extend({
template: a,
styles: [ o, r ],
"implements": [ n ],
emits: {
"click .close": "click:close",
"click .show-step": "click:showStep",
"click .invite-more": "click:inviteMore",
"click .url-selector": "click:url",
"focus .url-selector input": "focus:url",
"click .send-invites": "click:sendInvites",
"click .facebook, .twitter": "click:social",
"focus input.email": "focus:email",
"keyup input.email": "keyup:email",
"blur input.email": "blur:email",
"keydown .url": "keydown:tabTarget",
"keydown .list-invite input:eq(0)": "keydown:tabTarget"
},
initialize: function() {
var e = this;
l.initialize.apply(e, arguments), e.sdk = t.sdk, e.url = e.getShortUrl();
},
getShortUrl: function() {
var e, i = this, n = i.deferred();
if (t.env.isPackagedApp()) e = "https://www.wunderlist.com/"; else {
var a = t.global.location;
e = a.protocol + "//" + a.hostname + "/";
}
return i.sdk.getOutlet().invite_tokens.create({}).done(function(i) {
e += "signup/token/" + i.string, t.io.post(t.config.urlshortener.host, {
url: e,
owner_id: t.user.id
}).done(function(e) {
n.resolve(e.url);
}).fail(n.reject);
}), n.promise();
},
render: function(e) {
var i = this;
e = e || i.options;
var n = {
id: "inviteYourFriends",
close: t.language.getText("button_done")
};
return i.onClose = i.onClose || e && e.onClose, l.render.call(i, n), i.$el.addClass("inviteYourFriends"), 
i.renderContent(), i;
},
renderContent: function() {
var e = this, i = e.formatData(e.renderData);
i.showSocialButtons = t.user.showSocialButtons(), e.destroySubviews(), e.$(".content").empty().append(e.template(i)), 
e.renderLocalized(), e.renderAvatar(), e.wrapTokens(), e.showStep(1), e.defer(e.focusFirstEmpty), 
e.url.done(e.updateUrl, e).fail(e.renderBroken, e);
},
renderBroken: function() {
var e = this;
e.showStep(1), e.$(".step-1 .show-step").addClass("disabled").text("Inviting friends is currently unavailable");
},
updateUrl: function(e) {
var i = this;
if (!i.destroyed) {
var n = encodeURIComponent(e), a = "https://www.facebook.com/sharer/sharer.php?u=" + n, o = t.language.getText("iyf4_dialog_tweet"), r = "http://twitter.com/home?status=" + encodeURIComponent(o + " ") + n;
i.$(".url").val(e), i.$(".facebook").attr("href", a).removeClass("disabled"), i.$(".twitter").attr("href", r).removeClass("disabled");
}
},
wrapTokens: function() {
var e = this;
e.$(".token_0").wrap("<strong/>");
},
renderAvatar: function() {
var e = this;
e.$(".avatar .picture").attr("src", t.user.getAvatarURL());
},
showStep: function(e) {
var t = this, i = t.$(".step");
e > i.length && (console.error("step number " + e + " does not exist"), e = 1), 
i.addClass("hidden"), t.$(".step-" + e).removeClass("hidden"), t.checkScrolling();
},
ensureEmptyInput: function() {
var e = this, t = e.$("input.email").filter(function() {
return !this.value;
}), i = e.$("input.email")[0], n = e.$("input.email")[1];
if (t.length) t.length > 1 && t.each(function(e, t) {
e > 0 && t !== i && t !== n && s(t).closest(".list-invite-item").remove();
}); else {
var a = e.$(".list-invite-item").last(), o = a.clone();
a.after(o), o.find("input.email").val("");
}
},
focusFirstEmpty: function() {
var e = this, i = e.$("input.email").filter(function() {
return !this.value;
}).first();
i.attr("aria-label", t.language.getText("iyf4_dialog_invite_headline_$", "$iyf4_dialog_invite_headline_incentive")), 
i.focus();
},
updateSendButton: function(e) {
var t = this;
e && t.$("input.email").attr("disabled", !1), t.$(".send-invites").toggleClass("disabled", !e);
},
focusUrl: function() {
this.$("input.url").focus();
}
});
}), define("views/Main/Controllers/WhatsNewViewController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/WBModalViewController" ], function(e, t, i) {
var n = e.$, a = i.prototype;
return i.extend({
"implements": {
"click:close": "onClickClose",
"click:upgrade": "onClickUpgrade",
"keydown:button": "handleButtonKeys"
},
onClickClose: function() {
var t = this;
a.closeView.call(t), e.trigger("onboarding:whatsNewClosed");
},
onClickUpgrade: function() {
var t = this;
t.view.trigger("click:close"), e.trigger("route:preferences/account/pro");
},
handleButtonKeys: function(e) {
var i = this;
e.which === t.tab && i.handleButtonTab(e);
},
handleButtonTab: function(e) {
var t = n(e.target), i = this, a = i.view;
!e.shiftKey && t.hasClass("done-slide") ? (a.focusUpgradeNow(), i.stopEventFully(e)) : e.shiftKey && t.hasClass("upgrade-pro") && (a.focusDone(), 
i.stopEventFully(e));
}
});
}), define("/templates/whatsNew.js", {
name: "whatsNew",
data: {
"1": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return ' <div class="col-10"></div> <div class="col-40"> <button class="green full upgrade-pro"><b>' + r((a = t.localized || e && e.localized || o, 
a.call(e, "settings_upgrade_to_pro_label", "$settings_account_header_pro", {
name: "localized",
hash: {},
data: n
}))) + '</b></a> </div> <div class="col-40"> <button class="blue full done-slide">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "button_done", {
name: "localized",
hash: {},
data: n
}))) + '</a> </div> <div class="col-10"></div> ';
},
"3": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return ' <div class="col-30"/> <div class="col-40"> <button class="blue full done-slide">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "button_done", {
name: "localized",
hash: {},
data: n
}))) + '</a> </div> <div class="col-30"/> ';
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = '<div class="content-header"> <h2 class="center">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "whatsnew_title", {
name: "localized",
hash: {},
data: n
}))) + '</h2> </div> <div class="content-inner"> <div class="separator whatsnew-items"> <div class="whatsnew-item"> <div class="whatsnew-item-image public"></div> <h3>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "whatsnew_1_title", {
name: "localized",
hash: {},
data: n
}))) + "</h3> <p>" + s((o = t.localized || e && e.localized || r, o.call(e, "whatsnew_1_description", {
name: "localized",
hash: {},
data: n
}))) + '</p> </div> <div class="whatsnew-item"> <div class="whatsnew-item-image sync"></div> <h3>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "whatsnew_2_title", {
name: "localized",
hash: {},
data: n
}))) + "</h3> <p>" + s((o = t.localized || e && e.localized || r, o.call(e, "whatsnew_2_description", {
name: "localized",
hash: {},
data: n
}))) + '</p> </div> <div class="whatsnew-item"> <div class="whatsnew-item-image faster"></div> <h3>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "whatsnew_3_title", {
name: "localized",
hash: {},
data: n
}))) + "</h3> <p>" + s((o = t.localized || e && e.localized || r, o.call(e, "whatsnew_3_description", {
name: "localized",
hash: {},
data: n
}))) + '</p> </div> <div class="whatsnew-item"> <div class="whatsnew-item-image seamless"></div> <h3>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "whatsnew_4_title", {
name: "localized",
hash: {},
data: n
}))) + "</h3> <p>" + s((o = t.localized || e && e.localized || r, o.call(e, "whatsnew_4_description", {
name: "localized",
hash: {},
data: n
}))) + '</p> </div> <div class="whatsnew-item"> <div class="whatsnew-item-image conversation"></div> <h3>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "whatsnew_5_title", {
name: "localized",
hash: {},
data: n
}))) + "</h3> <p>" + s((o = t.localized || e && e.localized || r, o.call(e, "whatsnew_5_description", {
name: "localized",
hash: {},
data: n
}))) + '</p> </div> <div class="whatsnew-item"> <div class="whatsnew-item-image reengineered"></div> <h3>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "whatsnew_6_title", {
name: "localized",
hash: {},
data: n
}))) + "</h3> <p>" + s((o = t.localized || e && e.localized || r, o.call(e, "whatsnew_6_description", {
name: "localized",
hash: {},
data: n
}))) + '</p> </div> <div class="whatsnew-item"> <div class="whatsnew-item-image search"></div> <h3>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "whatsnew_7_title", {
name: "localized",
hash: {},
data: n
}))) + "</h3> <p>" + s((o = t.localized || e && e.localized || r, o.call(e, "whatsnew_7_description", {
name: "localized",
hash: {},
data: n
}))) + '</p> </div> </div> </div> <div class="content-footer"> <div class="cols"> ';
return a = t.unless.call(e, e && e.isPro, {
name: "unless",
hash: {},
fn: this.program(1, n),
inverse: this.program(3, n),
data: n
}), (a || 0 === a) && (l += a), l + " </div> </div> ";
},
useData: !0
}
}), define("/styles/dialogs/_whatsnew.js", {
name: "dialogs/_whatsnew",
data: '.dialog#whatsNew{width:350px;left:50%;margin-left:-175px;overflow:hidden;padding:0 !important;text-shadow:1px solid #fff !important;max-height:475px;z-index:9999;background:#fafafa;}.dialog#whatsNew .content-inner{padding:0 !important;left:12px}.dialog#whatsNew.scroll .content-inner{top:70px}.dialog#whatsNew .whatsnew-items{margin-right:12px}.dialog#whatsNew .whatsnew-item{min-height:90px;margin-bottom:10px;}.dialog#whatsNew .whatsnew-item:last-child{margin-bottom:0}.dialog#whatsNew .whatsnew-item h3,.dialog#whatsNew .whatsnew-item p{padding-left:110px}.dialog#whatsNew .whatsnew-item h3{font-size:14px;margin:0}.dialog#whatsNew .whatsnew-item p{padding-top:5px;line-height:20px}.dialog#whatsNew .whatsnew-item-image{float:left;display:inline-block;background-image:url("images/sprites/whatsnew.png");}.dialog#whatsNew .whatsnew-item-image.public{background-position:-100px 0;width:100px;height:84px}.dialog#whatsNew .whatsnew-item-image.sync{background-position:0 -84px;width:100px;height:84px}.dialog#whatsNew .whatsnew-item-image.faster{background-position:0 0;width:100px;height:84px}.dialog#whatsNew .whatsnew-item-image.seamless{background-position:-200px -84px;width:100px;height:84px}.dialog#whatsNew .whatsnew-item-image.conversation{background-position:0 -168px;width:100px;height:84px}.dialog#whatsNew .whatsnew-item-image.reengineered{background-position:-100px -84px;width:100px;height:84px}.dialog#whatsNew .whatsnew-item-image.search{background-position:-200px 0;width:100px;height:84px}@media only screen and (-webkit-min-device-pixel-ratio: 1.5), only screen and (min--moz-device-pixel-ratio: 1.5){.dialog#whatsNew .whatsnew-image{background-image:url("images/sprites/whatsnew-retina.png") !important;-webkit-background-size:300px;-moz-background-size:300px;background-size:300px}}html[dir=rtl] .dialog#whatsNew .whatsnew-items{margin-right:initial;margin-left:12px}html[dir=rtl] .dialog#whatsNew .whatsnew-image.comments{left:initial}'
}), define("views/Main/WhatsNewView", [ "application/runtime", "helpers/URLResolver", "wunderbits/WBModalView", "views/Main/Controllers/WhatsNewViewController", "template!whatsNew", "style!dialogs/_whatsnew" ], function(e, t, i, n, a, o) {
var r = i.prototype;
return i.extend({
template: a,
styles: [ o ],
className: "scroll",
"implements": [ n ],
emits: {
"click .done-slide": "click:close",
"click .upgrade-pro": "click:upgrade",
"keydown button": "keydown:button"
},
renderData: {
id: "whatsNew",
isPro: !1
},
formatData: function(t) {
return t.isPro = e.user && e.user.isPro(), console.debug(t.isPro), t;
},
initialize: function() {
var e = this;
e.isRendered = !1, r.initialize.apply(e, arguments);
},
render: function(t) {
var i = this;
return i.onClose = i.onClose || t && t.onClose, i.returnFocus = e.focus, i.isRendered ? void i.$el.removeAttr("style") : (r.render.call(i, i.formatData(i.renderData)), 
i.$(".content").append(i.template(i.formatData(i.renderData))), i.isRendered = !0, 
i.renderLocalized(), i);
},
handleButtonVisibility: function() {
var t = this, i = t.$(".upgrade-pro"), n = !1;
e.user.isPro() && (n = !0), i.toggleClass("hidden", n);
},
focusUpgradeNow: function() {
var e = this, t = e.$(".upgrade-pro:visible");
t.length && t.focus();
},
focusDone: function() {
this.$(".done-slide").focus();
}
});
}), define("views/Modals/Controllers/ConfirmationModalController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/WBModalViewController" ], function(e, t, i) {
var n = e.$;
return i.extend({
"implements": {
"click:cancel": "onCancel",
"click:confirm": "onConfirm",
"keydown:buttons": "handleKeys"
},
onCancel: function() {
var e = this, t = e.view;
t.onCancel && t.onCancel(), e.closeView();
},
onConfirm: function() {
var e = this, t = e.view;
t.onConfirm && t.onConfirm(), e.closeView();
},
handleKeys: function(e) {
var i = this;
e.which === t.tab ? i.handleTabKey(e) : e.which === t.enter && e.stopPropagation();
},
handleTabKey: function(e) {
var t = n(e.target), i = this;
t.hasClass("confirm") ? i.view.focusCancel() : i.view.focusConfirm(), e.preventDefault(), 
e.stopPropagation();
}
});
}), define("wunderbits/helpers/emoji", [ "../lib/dependencies", "./strings", "./xss", "project!core/WBSingleton", "../mixins/EmojiData", "wunderbits/global" ], function(e, t, i, n, a, o) {
var r = e.$, s = o.requestAnimationFrame;
return n.extend({
emojify: function(e) {
var t = this, n = i.clean(e.nodeValue), a = t.getEmojifiedString(n);
n !== a && s(function() {
r(e).replaceWith(r("<div/>").html(a).html());
});
},
getEmojifiedString: function(e) {
for (var i, n, o = this, r = 0, s = e.length; s > r; r++) i = e && t.unicodeAt(e, r).toString(16), 
n = a.unicodeIndex[i], n && (i = '<span title="' + n + '" class="emoji emoticon _' + i + '">&#x' + i + "</span>", 
e = t.replaceAt(e, r, i, 1), e = o.getEmojifiedString(e));
return e;
}
});
}), define("wunderbits/mixins/DomTreeMixin", [ "../global", "project!core/WBMixin" ], function(e, t, i) {
function n(e, t, i) {
var n = t.call(i, e);
n && a(e, n);
}
function a(e, t) {
var i = e.parentNode;
if (i) {
var n, a = e;
for (t = [].slice.call(t); t.length; ) n = t.pop(), i.insertBefore(n, a), a = n;
i.removeChild(e);
}
}
function o(e, t, i, a) {
for (var o, r = [].slice.call(e.childNodes); r.length; ) o = r.shift(), 3 === o.nodeType ? n(o, t, i) : a && o.childNodes.length && r.push.apply(r, o.childNodes);
}
return t.extend({
renderTokens: function(e, t) {
var i = this;
return e = e || i.$el, e.length && i.walkTextNodes(e[0], t.tokenize, t), i;
},
walkTextNodes: function(e, t, n, a) {
n || (n = this), a === i && (a = !0), o(e, t, n, a);
}
});
}), define("wunderbits/mixins/UnicodeEmojiViewMixin", [ "../helpers/emoji", "./DomTreeMixin" ], function(e, t) {
return t.extend({
renderEmoji: function(t) {
var i = this;
return t = t || i.$el, t.length && i.walkTextNodes(t[0], e.emojify, e), i;
}
});
}), define("/templates/modals/confirmationModal.js", {
name: "modals/confirmationModal",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return '<div class="content-inner notice" tabindex="0"> <span class="icon wunderlist-icon" aria-hidden="true"></span> <div class="confirm-text"> <div class="default-text"> <h3>' + r((a = t.localized || e && e.localized || o, 
a.call(e, "label_are_you_sure_permanently_delete_item", {
name: "localized",
hash: {},
data: n
}))) + "</h3> <p>" + r((a = t.localized || e && e.localized || o, a.call(e, "label_cant_undo", {
name: "localized",
hash: {},
data: n
}))) + '</p> </div> <div class="custom-text hidden"> <h3/> <p/> </div> </div> </div> <div class="content-footer"> <div class="cols"> <div class="col-20"></div> <div class="col-40"> <button class="full cancel" tabindex="0">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "button_cancel", {
name: "localized",
hash: {},
data: n
}))) + '</button> </div> <div class="col-40"> <button class="blue full confirm" tabindex="0">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "button_confirm", {
name: "localized",
hash: {},
data: n
}))) + "</button> </div> </div> </div>";
},
useData: !0
}
}), define("views/Modals/ConfirmationModalView", [ "application/runtime", "wunderbits/WBModalView", "wunderbits/WBBlurHelper", "views/Modals/Controllers/ConfirmationModalController", "wunderbits/mixins/UnicodeEmojiViewMixin", "template!modals/confirmationModal" ], function(e, t, i, n, a, o, r) {
var s = e._, l = t.prototype, d = t.extend({
template: o,
"implements": [ n ],
observes: {
runtime: {
"confirmation:cancel": ">click:cancel",
"confirmation:confirm": ">click:confirm"
}
},
emits: {
"click button.cancel": "click:cancel",
"click button.confirm": "click:confirm",
"keydown button.cancel": "keydown:buttons",
"keydown button.confirm": "keydown:buttons"
},
renderData: {
id: "confirmation",
customTitle: r,
text: r,
confirm: r,
cancel: r,
customIconClass: r
},
formatData: function() {
var e = this, t = e.options, i = l.formatData.apply(e, arguments);
return i.customTitle = t.customTitle, i.text = t.customText, i.confirm = t.confirmText, 
i.cancel = t.cancelText, i.customIconClass = t.customIconClass, i;
},
initialize: function(e) {
var t = this;
l.initialize.apply(t, arguments), t.onConfirm = e && e.confirm, t.onCancel = e && e.cancel;
},
shouldRender: function() {
var t = this, i = [ "settings", "coachmark", "addTask" ];
return t.keepTryingTimeout && window.clearTimeout(t.keepTryingTimeout), -1 !== s.indexOf(i, e.focus) ? (t.options.keepTrying && (t.keepTryingTimeout = t.delay("render", 2500)), 
!1) : !0;
},
renderBase: function(e) {
var t = this;
l.render.call(t, e);
},
render: function() {
var t = this, n = t.formatData(t.renderData);
if (!t.shouldRender()) return !t.el && !t.destroyed && t.renderBase(n), t;
if (t.renderBase(n), t.$el.find(".content").append(t.template()), n.text || n.customTitle) {
var a = t.$el.find(".custom-text");
t.$el.find(".default-text").addClass("hidden"), a.find("h3").html(n.customTitle), 
a.find("p").html(n.text), a.removeClass("hidden");
} else t.$el.find(".default-text").removeClass("hidden");
return n.customIconClass && t.$(".icon").removeClass("wunderlist-icon icon").addClass(n.customIconClass), 
n.confirm && t.$("button.confirm").html(n.confirm), n.cancel && t.$("button.cancel").html(n.cancel), 
t.options.hideCancel && t.$("button.cancel").remove(), e.trigger("focus:set", "confirmation"), 
t.defer(function() {
t.$(".content-inner").focus();
}), t.renderLocalized(), t.renderEmoji(t.$(".custom-text .token_0")), i.run(), t;
},
focusConfirm: function() {
this.$(".confirm").focus();
},
focusCancel: function() {
this.$(".cancel").focus();
}
});
return a.applyToClass(d), d;
}), define("views/Modals/controllers/ListOptionsModalController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/helpers/strings", "collections/ListCollection", "collections/MembershipCollection", "vendor/moment", "wunderbits/WBModalViewController", "actions/Factory" ], function(e, t, i, n, a, o, r, s) {
var l = e.$, d = r.prototype;
return r.extend({
"implements": {
"keydown:title": "handleTitleKeys",
"keydown:save": "onSaveKeydown",
"keydown:cancel": "onCancelKeydown",
"click:submit": "saveChanges",
"click:trash": "onTrash",
"click:duplicate": "duplicateList",
"click:close": "onClose",
"click:tab": "showTab",
"modal:update": "updateTab"
},
initialize: function() {
var e = this;
d.initialize.apply(e, arguments), e.createList = s.createList(), e.muteList = s.muteList(), 
e.duplication = s.duplication();
},
onTrash: function() {
var e = this, t = e.view, i = t.model.attributes.role;
"owner" === i ? e.deleteList() : e.leaveList();
},
duplicateList: function() {
var t = this, i = t.view.model;
i && t.duplication.duplicateList(i.id).done(function(t) {
t && e.trigger("route:" + t.route());
});
},
leaveList: function() {
var t, i = this, n = i.view, a = n.model;
if (a && (t = n.memberships.findWhere({
user_id: "" + e.user.id
}))) {
var o = "true" === e.settings.attributes.confirm_delete_entity, r = function() {
t.destroy();
}, s = {
confirm: r,
cancel: l.noop,
customTitle: e.language.getLabel("sharing_leave_action").toString(),
customText: e.language.getLabel("label_cant_undo").toString(),
confirmText: e.language.getLabel("sharing_leave_button").toString()
};
e.trigger("leaving:list"), o ? e.trigger("modal:confirm", s) : r();
}
},
deleteList: function() {
var t = this, i = t.view.model;
i && (e.trigger("leaving:list"), e.trigger("focus:set", "listOptions"), e.trigger("sidebar:deleteAndSelectNext", i));
},
handleTitleKeys: function(i) {
var n = this;
i.which === t.enter ? n.saveChanges(i) : i.which === t.esc && n.defer(function() {
e.trigger("modal:close");
});
},
onSaveKeydown: function(e) {
var i = this;
e.which !== t.tab || e.shiftKey || (i.view.focusTitleInput(), i.stopEventFully(e));
},
onCancelKeydown: function(e) {
var i = this;
i.view.hasTitleInput() || e.which !== t.tab || e.shiftKey || (i.view.focusTitleInput(), 
i.stopEventFully(e));
},
saveChanges: function(t) {
var n, a = this, o = a.view, r = o.$(".listOptions-title"), s = i.emojiTokensToUnicode(r.val().trim());
!a.isSavingChanges && s && (a.isSavingChanges = !0, o.options.model ? (n = o.options.model.id, 
a.createList.modifyListWith(n, s, a._getNewMembersIDs(), o.memberships), a.defer(a.closeView)) : (e.trigger("onboarding:addedList"), 
a.addList(t, s)), e.trigger("title:set", s), e.trigger("onboarding:shareListClose"));
},
onClose: function() {
e.trigger("onboarding:shareListCancel"), this.destroyed || this.view.addedMembers.reset();
},
destroy: function() {
var e = this, t = e.view;
t.memberships && t.memberships.restoreRemoved(), d.destroy.apply(e, arguments);
},
_getNewMembersIDs: function() {
var e = this;
return e.view.addedMembers.map(function(e) {
return e.attributes.id;
});
},
addList: function(t, i) {
var n = this, a = n.view, o = a.options.taskIds, r = !!a.saveOptions["public"], s = !!a.saveOptions.muted;
n.createList.createListWith(i, r, n._getNewMembersIDs(), o).then(function(t) {
s && n.muteList.setListMuted(t.id, !0), a.memberships && a.memberships.destroyRemoved(), 
e.trigger("route:" + t.route()), n.defer(n.closeView);
});
},
showTab: function(t) {
var i, n = this;
if ("string" == typeof t) i = t; else {
var a = l(t.target);
"A" !== t.target.tagName && (a = a.closest("a")), i = a.attr("rel");
}
var o = "lists/";
o = n.view.model ? n.view.model.route("/edit") : "lists/new", e.trigger("route:" + o + "/" + i, {
trigger: !1
}), n.view.showTab(i, !0);
},
updateTab: function(e) {
var t = this, i = t.view;
i.showTab(e.tab, !!e.tab);
}
});
}), define("views/ListView", [ "application/runtime", "wunderbits/WBViewPresenter" ], function(e, t) {
var i = t.prototype;
return t.extend({
tagName: "ul",
itemView: null,
emits: {
"click li": "click:item"
},
observes: {
events: {
"*parents:filter": "filterCollection"
}
},
initialize: function() {
var e = this;
if (i.initialize.apply(e, arguments), e.collection = e.getCollection(), !e.collection) throw new Error("Cannot create collection view without a collection");
if (!e.itemView) throw new Error("Cannot create ListView without item view class");
e.bindTo(e.collection, "remove", e.removeItem);
},
getCollection: function() {
return !1;
},
filterCollection: function() {},
getModels: function() {
return this.collection.models.slice();
},
render: function() {
for (var e, t, i = this, n = document.createDocumentFragment(), a = i.getModels(), o = 0, r = a.length; r > o; o++) e = a[o], 
t = i.addSubview(new i.itemView(i.getItemOptions(e)), e.id), n.appendChild(t.render().el);
return i.el.appendChild(n), i.filterCollection(i.startQuery || ""), i;
},
getItemOptions: function(e) {
return {
model: e
};
},
removeItem: function(e) {
var t = this, i = t.getSubview(e.id);
i && i.destroy();
}
});
}), define("views/AvatarView", [ "application/runtime", "project!database", "helpers/BlobHelper", "helpers/URLResolver", "collections/UserCollection", "wunderbits/WBView" ], function(e, t, i, n, a, o, r) {
var s = e.config, l = e._, d = new t.WBLocalStorage(), c = o.prototype;
return o.extend({
className: "avatar",
renderData: {
id: r
},
initialize: function(e) {
var t = this;
t.options = e || {}, c.initialize.apply(t, arguments);
var i = t.options.listId || "all", n = "all" === i ? "/users/" + i : "/lists/" + i + "/assignables";
t.assignables = new a(n), t.bindTo(t.assignables, "add", function(e) {
t.destroyed || e.attributes.id !== t.options.id || t.render();
});
},
formatData: function(e) {
var t = this;
return e = c.formatData.call(t, e), e.id = t.options.id, e;
},
render: function(t) {
var i = this;
i.options = l.extend(i.options, t) || t || {}, i.options.id = t && t.id || i.options && i.options.id, 
i.options.isOwnAvatar = t && t.isOwnAvatar;
var n = i.formatData(i.renderData);
return i.renderSize(), i.options.system ? (i.$el.addClass("wunderlist-avatar"), 
i) : (i.$el.html('<img src=""/>'), i.options.isOwnAvatar || e.user.isIDEqual(n.id) ? i.renderOwnAvatar() : i.renderAvatar(n), 
i);
},
renderSize: function() {
var t = this, i = t.options.size;
if (i) {
if ("string" == typeof i) t.$el.addClass(i), "medium" === t.options.size ? 32 : i; else {
var n = 32 === i ? "medium" : "";
t.$el.addClass(n);
}
e.env.isRetina() && "number" == typeof i && (t.options.size = 2 * i);
}
},
renderAvatar: function(e) {
var t = this, i = t.assignables.findWhere({
id: e.id
});
t.updateAvatar(i), t.options && t.options.url ? t.setImage(t.options.url) : t.$el.addClass("no-avatar"), 
t.updateTitle(i);
},
renderOwnAvatar: function() {
var t = this;
t.options.showPro && (t.updateOwnProBadge(), t.bindTo(e.user, "change:pro", t.updateOwnProBadge)), 
t.updateOwnAvatar(), t.updateTitle(e.user), t.bindUserAvatarChanges();
},
bindUserAvatarChanges: function() {
var t = this;
t.bindTo(e.user, "change:avatar", t.updateOwnAvatar), t.bindTo(e.user, "change:id", t.updateOwnAvatar);
},
updateTitle: function(e) {
var t = this;
e && t.$el.attr("title", e.attributes.name);
},
updateAvatar: function(e) {
var t, i = this;
if (e) {
var n = e.attributes;
t = n.avatar ? n.avatar : s.api.host + "/v1/avatar?user_id=" + n.online_id + "&fallback=false", 
t && i.setImage(t);
}
i.$el.toggleClass("blank", !!t);
},
updateOwnAvatar: function() {
var t = this;
d.getItem("localAvatar").always(function(i) {
var n = i ? i : e.user.getAvatarURL(null, t.options.size);
t.setImage(n);
});
},
updateOwnProBadge: function() {
var t = this, i = e.user.isPro();
t.$el.toggleClass("pro-user", i);
},
setImage: function(e) {
var t = this, n = t.$("img"), a = t.$el, o = !1, r = l.once(function(e) {
!o && t.replaceBrokenAvatar(e);
});
a.addClass("no-avatar"), e && i.loadImage(e, n, function() {
o = !0, n.removeClass("hidden"), a.removeClass("no-avatar");
}, r);
},
replaceBrokenAvatar: function() {
var e = this;
e.destroyed || e.$("img").addClass("hidden");
}
});
}), define("/templates/listOptions/person.js", {
name: "listOptions/person",
data: {
"1": function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression;
return ' <span class="badge ' + r((a = t.tagColor || e && e.tagColor, typeof a === o ? a.call(e, {
name: "tagColor",
hash: {},
data: n
}) : a)) + '">' + r((a = t.tag || e && e.tag, typeof a === o ? a.call(e, {
name: "tag",
hash: {},
data: n
}) : a)) + "</span> ";
},
"3": function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression;
return ' <span class="content-people-email">' + r((a = t.email || e && e.email, 
typeof a === o ? a.call(e, {
name: "email",
hash: {},
data: n
}) : a)) + "</span> ";
},
"5": function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression, s = t.helperMissing;
return ' <a class="button delete" tabindex="0" role="button" data-key-aria-label="voiceover_sharing_remove_button_$_label" data-aria-label="' + r((a = t.name || e && e.name, 
typeof a === o ? a.call(e, {
name: "name",
hash: {},
data: n
}) : a)) + '">' + r((a = t.localized || e && e.localized || s, a.call(e, "button_remove", {
name: "localized",
hash: {},
data: n
}))) + "</a> ";
},
"7": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return ' <a class="button leave-list" tabindex="0" role="button">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "button_leave", {
name: "localized",
hash: {},
data: n
}))) + "</a> ";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = "function", s = this.escapeExpression, l = '<span class="content-people-image"></span> <div class="content-people-meta"> <span class="content-people-name">' + s((o = t.name || e && e.name, 
typeof o === r ? o.call(e, {
name: "name",
hash: {},
data: n
}) : o)) + "</span> ";
return a = t["if"].call(e, e && e.tag, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += " ", a = t["if"].call(e, e && e.email, {
name: "if",
hash: {},
fn: this.program(3, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += " </div> ", a = t["if"].call(e, e && e.canDelete, {
name: "if",
hash: {},
fn: this.program(5, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += " ", a = t["if"].call(e, e && e.canLeave, {
name: "if",
hash: {},
fn: this.program(7, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l;
},
useData: !0
}
}), define("views/ListOptions/PersonView", [ "application/runtime", "wunderbits/WBViewPresenter", "views/AvatarView", "template!listOptions/person" ], function(e, t, i, n, a) {
var o = t.prototype;
return t.extend({
tagName: "li",
template: n,
renderData: {
email: a,
icon: a,
id: a,
isCircle: a,
buttonClass: a,
name: a
},
formatData: function(e) {
var t = this;
e = o.formatData.call(t, e);
var i = t.model && t.model.attributes || t.data || {};
return e.id = i.id, e.name = i.name, e.email = i.email, e;
},
render: function() {
var e = this;
return o.render.apply(e, arguments), e.data.icon && e.$el.attr("rel", e.data.id), 
e.renderAvatar(e.data.id), e;
},
renderAvatar: function(e) {
var t = this;
t.avatarView = t.avatarView || t.addSubview(new i({
size: 32
}), "avatarView"), t.$(".content-people-image")[0].appendChild(t.avatarView.render({
id: e
}).el);
}
});
}), define("views/ListOptions/controllers/MemberViewController", [ "application/runtime", "wunderbits/WBViewController" ], function(e, t) {
var i = e.$;
return t.extend({
"implements": {
"click:delete": "deleteMember",
"click:leave": "leaveList"
},
deleteMember: function() {
var e = this, t = e.view, i = t.options.addedMembers, n = i.get(t.model.id);
n ? n && i.remove(n) : t.model.set({
removed: !0
}, {
silent: !0
}), e.view && e.view.destroy();
},
leaveList: function() {
var t = this, n = t.view, a = "true" === e.settings.attributes.confirm_delete_entity, o = n.model, r = function() {
o.destroy();
}, s = {
confirm: r,
cancel: i.noop,
customTitle: e.language.getLabel("sharing_leave_action").toString(),
customText: e.language.getLabel("label_cant_undo").toString(),
confirmText: e.language.getLabel("sharing_leave_button").toString()
};
e.trigger("leaving:list"), a ? e.trigger("modal:confirm", s) : r();
}
});
}), define("views/ListOptions/MemberView", [ "application/runtime", "./PersonView", "./controllers/MemberViewController", "collections/UserCollection" ], function(e, t, i, n, a) {
var o = t.prototype;
return t.extend({
"implements": [ i ],
emits: {
"click .delete": "click:delete",
"click .leave-list": "click:leave"
},
renderData: {
canLeave: a,
email: a,
icon: a,
id: a,
isCircle: a,
name: a,
tag: a,
tagColor: a
},
formatData: function(t) {
var i = this;
t = o.formatData.call(i, t);
var n = i.model.attributes, a = i.user && i.user.attributes, r = "accepted" === n.state;
return t.id = n.user_id || i.model.id, t.name = a && a.name, t.tag = !r && e.language.getText("sharing_list_pending_member"), 
t.tagColor = r ? "blue" : "yellow", t.canLeave = r && e.user.isIDEqual(t.id), t.email = n.email || a && a.email, 
t = i.formatTemporary(t, a, n), t.canDelete = i.options.canDelete || "user" === n.type, 
t;
},
initialize: function() {
var e = this;
o.initialize.apply(e, arguments), e.widthsReady = new e.deferred();
var t = e.model.attributes && e.model.attributes.user_id || e.model.id, i = new n("/users/all");
e.user = i.get(t), e.model && e.bindTo(e.model, "change", e.render), e.user && e.bindTo(e.user, "change", e.render);
},
render: function() {
var e = this;
return e.el.style.visibility = "hidden", o.render.apply(e, arguments), e.defer("setMaxWidths"), 
e.when(e.widthsReady).then(function() {
e.$el.removeAttr("style");
}), e;
},
formatTemporary: function(t, i, n) {
return !t.name && t.id.indexOf("@") > 0 ? t.name = t.id : !t.name && t.email && (t.name = t.email, 
t.email = null), n.query && (t.tag = e.language.getText("sharing_list_not_saved_member"), 
t.tagColor = "red"), t;
},
setMaxWidths: function() {
var e = this, t = 240, i = e.$(".button").width(), n = e.$(".badge").width(), a = t - (i + n), o = e.$(".content-people-name");
o.width() > a && o.width(a), e.widthsReady.resolve();
}
});
}), define("views/ListOptions/OwnerView", [ "application/runtime", "./PersonView", "collections/UserCollection" ], function(e, t, i) {
var n = t.prototype;
return t.extend({
formatData: function(t) {
var i = this;
return t = n.formatData.call(i, t), t.tag = e.language.getText("sharing_list_owner"), 
t.tagColor = "blue", t.icon = null, t.isCircle = !1, t;
},
initialize: function() {
var t = this;
n.initialize.apply(t, arguments);
var a = t.ownerID = t.options.id;
if (e.user.isIDEqual(a)) t.model = e.user; else {
var o = new i("/users/all");
t.model = o.get(a);
}
t.model && t.bindTo(t.model, "change", t.render), t.toggleVisibility = t.debounce(t.toggleVisibility, 1);
},
toggleVisibility: function(e) {
var t = this, i = !1;
if (e) {
e = e.toLowerCase();
var n = t.model && t.model.attributes, a = n ? n.name && n.name.toLowerCase() : t.ownerID, o = n && n.email && n.email.toLowerCase();
a && a.indexOf(e) < 0 && o && o.indexOf(e) < 0 && (i = !0);
}
t.$el.toggleClass("hidden", i);
}
});
}), define("views/ListOptions/MembersListView", [ "application/runtime", "../ListView", "./MemberView", "./OwnerView", "collections/MembershipCollection", "collections/UserCollection" ], function(e, t, i, n, a, o) {
var r = t.prototype, s = e._;
return t.extend({
tagName: "ul",
className: "content-people",
itemView: i,
initialize: function() {
var e = this;
r.initialize.apply(e, arguments), e.users = new o("/users/all");
},
getCollection: function() {
var e = this, t = "/memberships/temporary";
return e.model && (t = "/lists/" + e.model.id + "/memberships"), new a(t);
},
getModels: function() {
var e = this;
return s.unique(s.compact([].concat(e.collection.models, e.options.addedMembers.models)));
},
filterCollection: function(t) {
var i = this;
t = (t || "").toLowerCase();
var n = i.getModels(), a = s.find(n, function(e) {
return e.attributes.owner;
});
return i.model && a ? void s.each(n, function(e) {
if (e.attributes.owner) return void i.renderOwner(e);
var n = i.users.get(e.id), a = !0, o = e.id;
if (t && n) {
var r = n.attributes, s = r.name && r.name.toLowerCase().indexOf(t) >= 0, l = r.email && r.email.toLowerCase().indexOf(t) >= 0;
a = s || l;
} else o && o.indexOf("@") > 0 && (a = !t || o.indexOf(t) >= 0);
e.attributes.removed && (a = !1);
var d = i.getSubview(o);
d && d.$el.toggleClass("hidden", !a);
}) : i.renderOwner(e.user);
},
getItemOptions: function(t) {
var i = this, n = i.model && i.model.attributes;
return {
model: t,
canDelete: !n || "owner" === n.role || e.user.isIDEqual(n.owner_id),
addedMembers: i.options.addedMembers,
collection: i.getCollection()
};
},
renderOwner: function(t) {
var i = this, a = i.getSubview(t.id);
a && a.$el.addClass("hidden");
var o = t.attributes.user_id || t.attributes.id, r = e.user.isIDEqual(o) ? e.user : i.users.get(o), s = r && r.attributes, l = s ? s.id : o, d = i.getSubview("owner");
d || (d = i.addSubview(new n({
id: l
}), "owner")), i.$(d).length || i.$el.prepend(d.render().$el.addClass("disabled")), 
d.toggleVisibility(s ? s.name : o);
}
});
}), define("views/ListOptions/controllers/ListSelectionController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/helpers/email", "wunderbits/WBViewController" ], function(e, t, i, n) {
var a = e._, o = e.$;
return n.extend({
"implements": {
"handle:keydown": "handleKeyDown",
"select:id": "setSelection",
"save:fromElement": "saveFromElement",
"move:up": "moveUp",
"move:down": "moveDown"
},
handleKeyDown: function(e) {
var i = this;
e.which === t.esc ? i.view.reset(e) : e.which !== t.enter || i.view.blockEnter ? e.which === t.down ? i.moveDown(e) : e.which === t.up && i.moveUp(e) : i.handleEnter(e);
},
handleEnter: function(e) {
var t = this, i = t.view.stateModel.attributes, n = i.selected || i["default"];
t.trySaveSelected(e, n);
},
saveFromElement: function(e) {
var t = this, i = o(e.target).closest("li"), n = i.attr("rel");
t.trySaveSelected(e, n);
},
isValidInvite: function(t) {
var i = this, n = i.view.options.currentMembers, a = i.view.options.addedMembers;
t = t && t.toLowerCase();
var o = n && n.find(function(e) {
return e.attributes.user_id === t;
}), r = n && n.find(function(e) {
var i = e.attributes;
return i.user_id === t && i.removed === !0;
}), s = a && a.find(function(e) {
return e.attributes.id.toLowerCase() === t;
}), l = i.view.collection.find(function(e) {
return e.attributes.email.toLowerCase() === t;
});
return r ? !0 : e.user.isIDEqual(t) || e.user.attributes.email.toLowerCase() === t || s || o || l ? !1 : !0;
},
trySaveSelected: function(e, t) {
var n = this, a = n.view.stateModel.attributes.query, o = !0;
"fake" === t && i.isValidEmail(a) && (t = a), a && n.stopItCold(e), o = n.isValidInvite(t), 
t && "fake" !== t && o && n.view.trigger("save:selected", t);
},
moveUp: function(e) {
var t = this, i = t.view, n = i.stateModel, a = n.attributes, o = a.possibles || [], r = a.selected || a["default"], s = o[o.length - 1];
if (!r && o.length) n.set("selected", s); else if (r && o.length) {
var l = o.indexOf(r), d = l >= 0, c = d && o[l - 1];
n.set("selected", c || s);
}
t.stopItCold(e);
},
moveDown: function(e) {
var t = this, i = t.view, n = i.stateModel, a = n.attributes, o = a.possibles || [], r = a.selected || a["default"], s = o[0];
if (!r && o.length) n.set("selected", s); else if (r && o.length) {
var l = o.indexOf(r), d = l >= 0, c = d && o[l + 1];
n.set("selected", c || s);
}
t.stopItCold(e);
},
savePossibles: function(e) {
var t = this, i = t.view, n = a.pluck(e, "id");
i.stateModel.set("possibles", n);
},
ensureSelection: function() {
var e = this, t = e.view, i = t.stateModel, n = i.attributes.possibles || [], a = i.attributes.selected, o = a && n.indexOf(a) >= 0;
!o && n.length ? i.set("default", n[0]) : n.length || (i.set("default", "fake"), 
i.unset("selected"));
}
});
}), define("helpers/collectionSorting", [ "vendor/lodash", "vendor/moment", "project!core/WBSingleton" ], function(e, t, i) {
return i.extend({
dualBinarySort: function(e, i, n, a, o, r) {
var s, l, d, c = n.attributes[e], u = a.attributes[e], p = n.attributes[i], m = a.attributes[i];
if (c === u && p === m) l = n.id, d = a.id, s = l > d ? 1 : d > l ? -1 : 0; else if (c === u) {
if ("due_date" === i) l = t(p).valueOf(), d = t(m).valueOf(); else {
if ("completed_at" === i || n.attributes.completed_at && a.attributes.completed_at) return this.handleCompletedSorting(n, a);
l = p, d = m;
}
s = l > d ? 1 : d > l ? -1 : 0;
} else if (c && !u) s = o ? 1 : -1; else if (!c && u) s = o ? -1 : 1; else if (c && u && r) {
if ("due_date" === e) l = t(c).valueOf(), d = t(u).valueOf(); else {
if ("completed_at" === i || n.attributes.completed && a.attributes.completed) return this.handleCompletedSorting();
l = c, d = u;
}
s = l > d ? 1 : d > l ? -1 : 0;
}
return s;
},
handleCompletedSorting: function(e, t) {
var i = e.attributes.completed_at && Date.parse(e.attributes.completed_at), n = t.attributes.completed_at && Date.parse(t.attributes.completed_at);
return i > n ? -1 : n > i ? 1 : 0;
},
sortAndRemove: function(t, i) {
var n = e.groupBy(t, i);
return delete n[-1], t = [], e.each(n, function(e) {
t = t.concat(e);
}), t;
}
});
}), define("views/ListOptions/controllers/InviteAutocompleteController", [ "application/runtime", "./ListSelectionController", "wunderbits/data/keycodes", "helpers/collectionSorting", "collections/UserCollection" ], function(e, t, i, n, a) {
var o = e.$, r = e._, s = t.prototype;
return t.extend({
"implements": {
"set:query": "updateQuery",
"save:selected": "addUser",
focus: "handleFocus",
blur: "handleBlur",
"prevent:blur": "preventBlur"
},
initialize: function() {
var e = this;
e.updateQuery = e.debounce(e.updateQuery, 10), s.initialize.apply(e, arguments), 
e.bindTo(e.view.stateModel, "change:query", "updateSuggestions"), e.users = new a("/users/all");
},
preventBlur: function() {
var e = this;
e.preventingBlur = !0, e.unpreventBlur && clearTimeout(e.unpreventBlur), e.unpreventBlur = e.delay(function() {
e.preventingBlur = !1;
}, 250);
},
handleBlur: function() {
var e = this;
e.defer(function() {
e.preventingBlur || e.view.hide();
});
},
handleFocus: function() {
var e = this;
e.defer(function() {
e.view.stateModel.attributes.query && (e.updateSuggestions(), e.view.selectTargetValue());
});
},
addUser: function(e) {
var t = this;
t.preventBlur = !0;
var i = t.view.options.addedMembers, n = t.view.options.currentMembers, a = n && n.findWhere({
user_id: e
});
e || console.error("Cannot add user to list, invalid ID"), a ? a.set({
removed: !1
}, {
fromSync: !0
}) : i.add({
id: e,
query: t.view.stateModel.attributes.query
}), t.view.stateModel.attributes.query = "", t.view.stateModel.attributes.selected = "", 
t.updateDefault(), t.view.reset();
},
updateQuery: function(e) {
var t = this, i = t.view;
i.stateModel && i.stateModel.set("query", o(e.target).val());
},
updateDefault: function() {
var e = this, t = e.view, i = r.find(t.collection.models, function(t) {
return !e.view.options.addedMembers.get(t);
});
t.stateModel.set("default", i && i.id);
},
getSuggestions: function(e) {
var t = this;
if (e = e && e.toLowerCase(), !e) return [];
var i = r.first(n.sortAndRemove(t.view.collection.models, function(i) {
if (!t.isValidInvite(i.id)) return -1;
var n = i.attributes.email, a = n ? n.toLowerCase().indexOf(e) : -1, o = i.attributes.name, r = o ? o.toLowerCase().indexOf(e) : -1;
return r >= a ? r : a;
}), 5);
return i;
},
hasSuggestionsChanged: function(e) {
var t = this, i = r.map(e, function(e) {
return e.attributes.id;
}).join(""), n = i === t.lastSuggestedsHash;
return t.lastSuggestedsHash = i, !n || !i;
},
updateSuggestions: function() {
var e = this, t = e.view, i = t.stateModel.attributes.query, n = e.getSuggestions(i);
e.hasSuggestionsChanged(n) && (e.savePossibles(n), t.renderSuggestions(n, i)), n.length || e.isValidInvite(i) || t.renderSuggestions([], "not-valid"), 
e.ensureSelection();
}
});
}), define("/templates/listOptions/autocompletePerson.js", {
name: "listOptions/autocompletePerson",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression;
return '<div class="content-people-image"></div> <div class="content-people-meta"> <span class="content-people-name">' + r((a = t.name || e && e.name, 
typeof a === o ? a.call(e, {
name: "name",
hash: {},
data: n
}) : a)) + '</span> <span class="content-people-email">' + r((a = t.email || e && e.email, 
typeof a === o ? a.call(e, {
name: "email",
hash: {},
data: n
}) : a)) + "</span> </div> ";
},
useData: !0
}
}), define("views/ListOptions/SuggestedPersonView", [ "application/runtime", "wunderbits/WBViewPresenter", "views/AvatarView", "wunderbits/helpers/email", "template!listOptions/autocompletePerson" ], function(e, t, i, n, a, o) {
var r = t.prototype;
return t.extend({
tagName: "li",
template: a,
renderData: {
email: o,
icon: o,
id: o,
isCircle: o,
buttonClass: o,
name: o
},
formatData: function(t) {
var i = this;
t = r.formatData.call(i, t);
var a = i.model && i.model.attributes || {};
if (a.name) t.name = a.name, t.email = t.name === a.email ? "" : a.email; else if (a.email) t.name = a.email; else if ("fake" === i.options.id) {
var o = i.options.email;
n.isValidEmail(o) && o !== e.user.attributes.email ? t.name = o : (t.name = e.language.getText("login_email_not_valid"), 
t.invalid = !0);
}
return i.data = t, t;
},
render: function() {
var e = this;
r.render.apply(e, arguments);
var t = e.model && e.model.id || e.options.id;
return e.renderAvatar(t), e.$el.attr("rel", t), e;
},
renderAvatar: function(e) {
var t = this, n = t.$(".content-people-image");
t.avatarView = t.avatarView || t.addSubview(new i({
size: "medium"
}), "avatarView"), t.avatarView.$el.toggleClass("fake-user", "fake" === e), n.html(t.avatarView.render({
id: e
}).el);
}
});
}), define("views/ListOptions/InviteAutocompleteView", [ "application/runtime", "./controllers/InviteAutocompleteController", "wunderbits/WBViewPresenter", "project!core/lib/assert", "./SuggestedPersonView", "project!core/WBStateModel" ], function(e, t, i, n, a, o) {
var r = i.prototype, s = e._;
return i.extend({
tagName: "ul",
className: "content-people inviteAutocomplete hidden",
"implements": [ t ],
emits: {
"click li": "save:fromElement",
"mousedown li": "prevent:blur"
},
targetEvents: {
keydown: "handle:keydown",
keyup: "set:query",
focus: "focus",
blur: "blur"
},
initialize: function() {
var e = this;
e.stateModel = new o(), r.initialize.apply(e, arguments), e.bindTo(e.stateModel, "change:selected change:default", "updateSelection"), 
e.target = e.options.target, n.object(e.target, "Cannot initialize InviteAutocompleteView without a target"), 
e.bindTargetEvents();
},
bindTargetEvents: function() {
var e = this;
s.each(e.targetEvents, function(t, i) {
e.bindTo(e.target, i, function(i) {
e.trigger(t, i);
});
});
},
render: function() {
var e = this;
if (e.isRendered) return e;
var t = 14, i = e.target.offset().top - t;
return e.$el.css("top", i), e.isRendered = !0, e;
},
reset: function(e) {
var t = this;
t.hide();
var i = t.target.val();
t.target.val(""), i && (s.defer(function() {
t.destroyed || t.target.focus();
}), e && e.stopPropagation()), t.blockEnter = !0;
},
selectTargetValue: function() {
var e = this;
s.defer(function() {
e.target.select();
});
},
updateSelection: function() {
var e = this, t = e.stateModel.attributes, i = t.selected || t["default"];
e.$("li").removeClass("active"), i && e.$('li[rel="' + i + '"]').addClass("active");
},
showFakePerson: function(e) {
var t = this, i = new a({
email: e,
id: "fake"
});
t.render().$el.html(i.render().el).removeClass("hidden");
},
renderSuggestions: function(e, t) {
var i = this;
if (t && e.length) {
var n = document.createDocumentFragment();
s.each(e, function(e) {
var t = new a({
model: e
});
n.appendChild(t.render().el);
}), i.render().$el.html(n).removeClass("hidden");
} else t ? i.showFakePerson(t) : i.$el.addClass("hidden");
i.updateSelection(), i.blockEnter = !1;
}
});
}), define("views/ListOptions/controllers/OptionsController", [ "application/runtime", "wunderbits/WBViewController", "actions/Factory" ], function(e, t, i) {
var n = e.$, a = t.prototype;
return t.extend({
"implements": {
"click:mute": "toggleMuted",
"click:public": "togglePublic",
"click:copyPublicURL": "copyPublicURL"
},
initialize: function() {
var e = this;
a.initialize.apply(e, arguments), e.muteList = i.muteList();
},
toggleMuted: function(e) {
var t = this, i = n(e.currentTarget), a = i.is(":checked"), o = t.view.ownMembership;
o ? t.muteList.setListMuted(o.attributes.list_id, a) : (t.view.saveOptions.muted = a, 
t.view.trigger("update:saveOptions"));
},
togglePublic: function(e) {
var t = this, i = n(e.currentTarget), a = i.is(":checked"), o = t.view.model;
o ? o.save({
"public": a
}) : (t.view.saveOptions["public"] = a, t.view.trigger("update:saveOptions"));
},
copyPublicURL: function(e) {
var t = n(e.currentTarget);
t.select();
}
});
}), define("partial", [ "vendor/handlebars.runtime", "loaders/lib/normalize" ], function(e, t, i) {
return e.registerHelper("symbol", function(t) {
var i = "symbols/" + t, n = e.partials[i];
return n ? new e.SafeString(n()) : "MISSING ICON: " + t;
}), {
load: function(t, n, a) {
n([ t ], function(o) {
if (n.isBrowser) {
var r = t.replace(/^\/templates\//, "").replace(/.js$/, "");
e.registerPartial(r, o.data.main);
}
a(i);
});
},
normalize: t("templates")
};
}), define("/templates/symbols/duplicate-lists.js", {
name: "symbols/duplicate-lists",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>duplicate</title> <desc>Created with Sketch.</desc> <defs></defs> <g id="Page-1" stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="duplicate" sketch:type="MSArtboardGroup"> <g id="duplicate-lists" sketch:type="MSLayerGroup" transform="translate(2.000000, 2.000000)"> <g id="Duplicate-List" sketch:type="MSShapeGroup"> <g id="Artboard-9"> <path d="M5.5,0 C4.3,0 3.28,0.86 3.06,2 L2.5,2 C1.12,2 0,3.12 0,4.5 L0,13.5 C0,14.88 1.12,16 2.5,16 L11.5,16 C12.88,16 14,14.88 14,13.5 L14,12.94 C15.14,12.72 16,11.7 16,10.5 L16,2.5 C16,1.12 14.88,0 13.5,0 L5.5,0 L5.5,0 Z M15,10.5 C15,11.32 14.32,12 13.5,12 L5.5,12 C4.68,12 4,11.32 4,10.5 L4,2.5 C4,1.68 4.68,1 5.5,1 L13.5,1 C14.32,1 15,1.68 15,2.5 L15,10.5 L15,10.5 Z M2.5,15 C1.68,15 1,14.32 1,13.5 L1,4.5 C1,3.68 1.68,3 2.5,3 L3,3 L3,10.5 C3,11.88 4.12,13 5.5,13 L13,13 L13,13.5 C13,14.32 12.32,15 11.5,15 L2.5,15 L2.5,15 Z M6,3 C5.44,3 5,3.44 5,4 L5,5 C5,5.56 5.44,6 6,6 L7,6 C7.56,6 8,5.56 8,5 L8,4 C8,3.44 7.56,3 7,3 L6,3 L6,3 Z M7,4 L7,5 L6,5 L6,4 L7,4 L7,4 Z M9.5,4 C9.22,4 9,4.22 9,4.5 C9,4.78 9.22,5 9.5,5 L13.5,5 C13.78,5 14,4.78 14,4.5 C14,4.22 13.78,4 13.5,4 L9.5,4 L9.5,4 Z M6,7 C5.44,7 5,7.44 5,8 L5,9 C5,9.56 5.44,10 6,10 L7,10 C7.56,10 8,9.56 8,9 L8,8 C8,7.44 7.56,7 7,7 L6,7 L6,7 Z M7,8 L7,9 L6,9 L6,8 L7,8 L7,8 Z M9.5,8 C9.22,8 9,8.22 9,8.5 C9,8.78 9.22,9 9.5,9 L13.5,9 C13.78,9 14,8.78 14,8.5 C14,8.22 13.78,8 13.5,8 L9.5,8 L9.5,8 Z" id="≥"></path> </g> </g> </g> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/listOptions/options.js", {
name: "listOptions/options",
data: {
"1": function() {
return "disabled";
},
"3": function() {
return 'checked="checked"';
},
"5": function(e, t, i, n) {
var a, o, r = "function", s = this.escapeExpression, l = ' <li> <label> <input class="public-list" type="checkbox" ';
return a = t["if"].call(e, e && e.isPublic, {
name: "if",
hash: {},
fn: this.program(3, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '> Public </label> <div class="public-info ', 
a = t.unless.call(e, e && e.hasPublicPreview, {
name: "unless",
hash: {},
fn: this.program(6, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '"> <input class="big public-list-copy" name="public-list-copy" type="text" value="' + s((o = t.publicURL || e && e.publicURL, 
typeof o === r ? o.call(e, {
name: "publicURL",
hash: {},
data: n
}) : o)) + '"/> <ul class="social-links"> ', a = t["if"].call(e, e && e.isChina, {
name: "if",
hash: {},
fn: this.program(8, n),
inverse: this.program(10, n),
data: n
}), (a || 0 === a) && (l += a), l + " </ul> </div> </li> ";
},
"6": function() {
return "hidden";
},
"8": function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression, s = t.helperMissing;
return ' <li class="link share-weibo"> <span class="icon weibo-btn arrow-btn"></span> <a href="http://service.weibo.com/share/share.php?url=' + r((a = t.publicURL || e && e.publicURL, 
typeof a === o ? a.call(e, {
name: "publicURL",
hash: {},
data: n
}) : a)) + "&amp;title=" + r((a = t.listTitle || e && e.listTitle, typeof a === o ? a.call(e, {
name: "listTitle",
hash: {},
data: n
}) : a)) + '" target="_blank" class="button withArrow">' + r((a = t.localized || e && e.localized || s, 
a.call(e, "social_sharing_button_facebook", {
name: "localized",
hash: {},
data: n
}))) + "</a> </li> ";
},
"10": function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression, s = t.helperMissing;
return ' <li class="link share-google"> <span class="icon google-btn arrow-btn"></span> <a href="https://plus.google.com/share?url=' + r((a = t.publicURL || e && e.publicURL, 
typeof a === o ? a.call(e, {
name: "publicURL",
hash: {},
data: n
}) : a)) + '" target="_blank" class="button withArrow">+1</a> </li> <li class="link share-facebook"> <span class="icon facebook-btn arrow-btn"></span> <a href="http://www.facebook.com/dialog/feed?app_id=208559595824260&amp;link=' + r((a = t.publicURL || e && e.publicURL, 
typeof a === o ? a.call(e, {
name: "publicURL",
hash: {},
data: n
}) : a)) + "&amp;redirect_uri=" + r((a = t.publicURL || e && e.publicURL, typeof a === o ? a.call(e, {
name: "publicURL",
hash: {},
data: n
}) : a)) + "&amp;name=" + r((a = t.listTitle || e && e.listTitle, typeof a === o ? a.call(e, {
name: "listTitle",
hash: {},
data: n
}) : a)) + '" target="_blank" class="button withArrow" data-key-aria-label="iyf_dialog_share_on_facebook">' + r((a = t.localized || e && e.localized || s, 
a.call(e, "social_sharing_button_facebook", {
name: "localized",
hash: {},
data: n
}))) + '</a> </li> <li class="link share-twitter"> <span class="icon twitter-btn arrow-btn"></span> <a href="http://twitter.com/share?text=' + r((a = t.listTitle || e && e.listTitle, 
typeof a === o ? a.call(e, {
name: "listTitle",
hash: {},
data: n
}) : a)) + " " + r((a = t.publicURL || e && e.publicURL, typeof a === o ? a.call(e, {
name: "publicURL",
hash: {},
data: n
}) : a)) + '" target="_blank" class="button withArrow">' + r((a = t.localized || e && e.localized || s, 
a.call(e, "social_sharing_button_twitter", {
name: "localized",
hash: {},
data: n
}))) + "</a> </li> ";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = '<li> <label class="mute-list-label ';
return a = t.unless.call(e, e && e.isShared, {
name: "unless",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '"> <input class="mute-list" ', a = t.unless.call(e, e && e.isShared, {
name: "unless",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += ' type="checkbox" ', a = t["if"].call(e, e && e.isMuted, {
name: "if",
hash: {},
fn: this.program(3, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += "> " + s((o = t.localized || e && e.localized || r, 
o.call(e, "options_do_not_disturb", {
name: "localized",
hash: {},
data: n
}))) + " </label> </li> ", a = t["if"].call(e, e && e.isOwner, {
name: "if",
hash: {},
fn: this.program(5, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l;
},
useData: !0
}
}), define("views/ListOptions/OptionsView", [ "application/runtime", "wunderbits/WBViewPresenter", "./controllers/OptionsController", "collections/MembershipCollection", "project!core/lib/when", "partial!symbols/duplicate-lists", "template!listOptions/options" ], function(e, t, i, n, a, o, r, s) {
var l = t.prototype;
return t.extend({
tagName: "ul",
className: "content-options",
template: r,
"implements": [ i ],
renderData: {
isShared: !1,
isOwner: !1,
isMuted: !1,
isPublic: !1,
hasPublicPreview: !1,
listID: s,
listTitle: s,
publicURL: s
},
emits: {
"click .mute-list": "click:mute",
"click .public-list": "click:public",
"click .public-list-copy": "click:copyPublicURL"
},
observes: {
model: {
"change:shared": "updatedIsShared"
}
},
formatData: function(t) {
var i = this;
t = l.formatData.call(i, t);
var n = i.model, a = n && n.attributes || {}, o = i.memberships && i.memberships.findWhere({
user_id: "" + e.user.id
}), r = o && o.attributes || {};
return t.isChina = "CN" === e.user.attributes.country, t.isShared = n && n.isShared(), 
t.isOwner = !!r.owner || "owner" === a.role || !n, t.isMuted = !!r.muted, t.isPublic = !!a["public"], 
t.hasPublicPreview = !!(t.isPublic && n && a.online_id), t.listID = a.online_id ? a.online_id : s, 
t.listTitle = a.title, t.publicURL = n && n.getFullPublicURL(), t;
},
initialize: function() {
var t = this;
l.initialize.apply(t, arguments), t.saveOptions = {}, t.model && (t.memberships = new n("/lists/" + t.model.id + "/memberships"), 
t.ownMembership = t.memberships.findWhere({
user_id: "" + e.user.id
}), t.setupModelBinds(), t.getUrls());
},
updatedIsShared: function(e) {
var t = this;
t.$(".mute-list")[e.isShared() ? "removeAttr" : "attr"]("disabled"), t.$(".mute-list-label").toggleClass("disabled", e.isShared());
},
setupModelBinds: function() {
var e = this;
e.bindTo(e.model, "change:public", function() {
e.getUrls(), e.updatePublicToggle(), e.updatePublicPreview();
}), e.ownMembership && e.bindTo(e.ownMembership, "change:muted", "updateMuteToggle");
},
getUrls: function() {
var e = this;
e.longURL = e.model.getFullPublicURL(), e.shortURL || a(e.model.getShortenedURL()).always(function(t) {
e.shortURL = t && t[0], e.updatePublicPreview();
});
},
updateMuteToggle: function() {
var e = this, t = e.ownMembership, i = t && t.attributes || {}, n = e.$(".mute-list");
n.prop("checked", !!i.muted);
},
updatePublicToggle: function() {
var e = this, t = e.model, i = t && t.attributes || {}, n = e.$(".public-list");
n.prop("checked", !!i["public"]);
},
updatePublicPreview: function() {
var e = this;
if (!e.destroyed) {
var t = e.model, i = t && t.attributes || {}, n = !(!i["public"] || !i.online_id), a = e.shortURL ? e.shortURL : e.longURL;
e.$(".public-info").toggleClass("hidden", !n), a && e.$(".public-list-copy").prop("value", a);
}
}
});
}), define("collections/TemporaryInviteCollection", [ "./UserCollection", "models/OtherUserModel", "./BaseCollection" ], function(e, t, i) {
return i.extend({
model: t.extend({
storeName: "none"
}),
contacts: new e("/users/all"),
sync: function() {},
comparator: function(e) {
var t = this, i = t.contacts.get(e.id);
return i && i.attributes.name || e.id;
}
});
}), define("/templates/symbols/trash.js", {
name: "symbols/trash",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return ' <svg class="trash" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>trash</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="trash" sketch:type="MSArtboardGroup" > <path d="M12,3.5 C12,2.4 11.1,1.5 10,1.5 C8.9,1.5 8,2.4 8,3.5 L5.5,3.5 C4.68,3.5 4,4.18 4,5 L4,7 C4,7.28 4.22,7.5 4.5,7.5 L15.5,7.5 C15.78,7.5 16,7.28 16,7 L16,5 C16,4.18 15.32,3.5 14.5,3.5 L12,3.5 Z M10,2.5 C10.56,2.5 11,2.94 11,3.5 L9,3.5 C9,2.94 9.44,2.5 10,2.5 L10,2.5 Z M15,6.5 L5,6.5 L5,5 C5,4.72 5.22,4.5 5.5,4.5 L14.5,4.5 C14.78,4.5 15,4.72 15,5 L15,6.5 Z M14.5,8.5 C14.22,8.5 14,8.72 14,9 L14,16 C14,16.28 13.78,16.5 13.5,16.5 L6.5,16.5 C6.22,16.5 6,16.28 6,16 L6,9 C6,8.72 5.78,8.5 5.5,8.5 C5.22,8.5 5,8.72 5,9 L5,16 C5,16.82 5.68,17.5 6.5,17.5 L13.5,17.5 C14.32,17.5 15,16.82 15,16 L15,9 C15,8.72 14.78,8.5 14.5,8.5 L14.5,8.5 Z M9,9 C9,8.72 8.78,8.5 8.5,8.5 C8.22,8.5 8,8.72 8,9 L8,15 C8,15.28 8.22,15.5 8.5,15.5 C8.78,15.5 9,15.28 9,15 L9,9 Z M12,9 C12,8.72 11.78,8.5 11.5,8.5 C11.22,8.5 11,8.72 11,9 L11,15 C11,15.28 11.22,15.5 11.5,15.5 C11.78,15.5 12,15.28 12,15 L12,9 Z" id="j" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/modals/listOptionsModal.js", {
name: "modals/listOptionsModal",
data: {
"1": function(e, t, i, n) {
var a, o = " ";
return a = t["if"].call(e, e && e.editing, {
name: "if",
hash: {},
fn: this.program(2, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), o + " ";
},
"2": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return ' <a tabindex="0" role="button" class="delete-list" data-key-aria-label="label_delete_list"> ' + r((a = t.symbol || e && e.symbol || o, 
a.call(e, "trash", {
name: "symbol",
hash: {},
data: n
}))) + " </a> ";
},
"4": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return ' <a tabindex="0" role="button" class="duplicate-list" data-key-aria-label="actionbar_duplicate_list" data-key-title="actionbar_duplicate_list"> ' + r((a = t.symbol || e && e.symbol || o, 
a.call(e, "duplicate-lists", {
name: "symbol",
hash: {},
data: n
}))) + " <span> " + r((a = t.localized || e && e.localized || o, a.call(e, "actionbar_duplicate_list", {
name: "localized",
hash: {},
data: n
}))) + " </span> </a> ";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = "function", d = '<div class="content-header" tabindex="0"> <h3 class="center">' + s((o = t.localized || e && e.localized || r, 
o.call(e, e && e.headerKey, {
name: "localized",
hash: {},
data: n
}))) + '</h3> <div class="separator noline"> <input class="big listOptions-title" type="text" data-key-placeholder="placeholder_list_name" data-key-aria-label="placeholder_list_name" maxlength="255" value="' + s((o = t.listTitle || e && e.listTitle, 
typeof o === l ? o.call(e, {
name: "listTitle",
hash: {},
data: n
}) : o)) + '"/> </div> <div class="separator noline"> <ul class="content-tabs"> <li> <a tabindex="0" role="button" rel="members">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "sharing_list_members", {
name: "localized",
hash: {},
data: n
}))) + '</a> </li> <li> <a tabindex="0" role="button" rel="options">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "sharing_list_options", {
name: "localized",
hash: {},
data: n
}))) + '</a> </li> </ul> </div> <div class="tab members header"> <div class="separator noline"> <div class="input-fake big"> <input class="chromeless listOptions-search hasIcon" type="text" data-key-placeholder="placeholder_sharing_search" data-key-aria-label="placeholder_sharing_search"/> ' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "share", {
name: "symbol",
hash: {},
data: n
}))) + ' </div> </div> </div> </div> <div class="tab members"> <div class="content-inner"/> </div> <div class="tab options"> <div class="content-inner"/> </div> <div class="content-footer"> <div class="cols"> <div class="col-40"> ';
return a = t["if"].call(e, e && e.isOwner, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d += " ", a = t["if"].call(e, e && e.duplicateListsEnabled, {
name: "if",
hash: {},
fn: this.program(4, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d + ' </div> <div class="col-30"><button class="cancel full close">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_cancel", {
name: "localized",
hash: {},
data: n
}))) + '</button></div> <div class="col-30"><button class="submit full blue">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_done", {
name: "localized",
hash: {},
data: n
}))) + "</button></div> </div> </div> ";
},
useData: !0
}
}), define("/styles/modals/listOptions.js", {
name: "modals/listOptions",
data: '#wunderlist-base .listOptions{width:392px;left:50%;margin-left:-196px;}#wunderlist-base .listOptions .content-header{height:169px;padding:14px 14px 0;border-bottom:0}#wunderlist-base .listOptions .content-inner{-webkit-border-radius:0;border-radius:0;height:225px;overflow:auto;padding:0;margin-left:14px;margin-right:14px}#wunderlist-base .listOptions.scroll .content-inner{top:169px;bottom:54px;left:14px;right:14px;height:auto !important;margin-bottom:0;margin-left:0;margin-right:0}#wunderlist-base .listOptions.scroll .tab.options .content-inner{margin-top:0;top:130px}#wunderlist-base .listOptions .tab.options .content-inner{height:264px;margin-top:-39px;}#wunderlist-base .listOptions .tab.options .content-inner li{padding:5px 0;}#wunderlist-base .listOptions .tab.options .content-inner li label{font-size:12px;font-weight:bold;}#wunderlist-base .listOptions .tab.options .content-inner li label.disabled{opacity:.5;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";filter:alpha(opacity=50)}#wunderlist-base .listOptions .tab.options .content-inner li .public-info,#wunderlist-base .listOptions .tab.options .content-inner li .social-links{margin:10px 0}#wunderlist-base .listOptions .content-people{padding-top:6px;padding-bottom:6px;}#wunderlist-base .listOptions .content-people li{position:relative;padding:6px 0;margin-left:44px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;height:44px;}#wunderlist-base .listOptions .content-people li:last-child{border:none}#wunderlist-base .listOptions .content-people li .content-people-meta{padding-left:10px;vertical-align:middle;display:inline-block}#wunderlist-base .listOptions .content-people li .content-people-name,#wunderlist-base .listOptions .content-people li .content-people-email{line-height:16px;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;cursor:default;display:inline-block}#wunderlist-base .listOptions .content-people li .content-people-name{max-width:154px;font-weight:bold;}#wunderlist-base .listOptions .content-people li .content-people-name:only-child{max-width:230px}#wunderlist-base .listOptions .content-people li .content-people-email{display:block;max-width:230px;font-size:12px;color:#737272}#wunderlist-base .listOptions .content-people li .content-people-image{vertical-align:middle;display:inline-block;margin-left:-44px}#wunderlist-base .listOptions .content-people li .button{position:absolute;right:0;top:9px;cursor:pointer}#wunderlist-base .listOptions .content-people.inviteAutocomplete{position:absolute;left:10px;right:10px;background-color:#fff;list-style:none;-webkit-box-shadow:0 2px 3px rgba(0,0,0,0.15);box-shadow:0 2px 3px rgba(0,0,0,0.15);-webkit-border-radius:4px;border-radius:4px;max-height:285px;overflow:auto;z-index:1000;margin:4px;border:1px solid #bcbcbc;margin-top:2px;padding:0 0 0 10px;}#wunderlist-base .listOptions .content-people.inviteAutocomplete li .content-people-name{max-width:290px}#wunderlist-base .listOptions .content-people.inviteAutocomplete li.active .content-people-name,#wunderlist-base .listOptions .content-people.inviteAutocomplete li.active .content-people-email{color:#fff}#wunderlist-base .listOptions .content-people.inviteAutocomplete li.active:before{content:\'\';position:absolute;top:4px;right:4px;height:42px;bottom:4px;left:-50px;background:#186ab2;z-index:-1;-webkit-border-radius:2px;border-radius:2px}#wunderlist-base .listOptions .invite li:hover{cursor:pointer}#wunderlist-base .listOptions .content-tabs{border-bottom:1px solid #d6d6d6;padding-bottom:4px;}#wunderlist-base .listOptions .content-tabs li{display:inline-block;margin-right:8px;}#wunderlist-base .listOptions .content-tabs li a{font-weight:bold;text-transform:uppercase;color:#737272;font-size:10px;position:relative;}#wunderlist-base .listOptions .content-tabs li a:hover{color:#737272}#wunderlist-base .listOptions .content-tabs li a.active{color:#262626;}#wunderlist-base .listOptions .content-tabs li a.active:after{content:\'\';position:absolute;height:0;border-bottom:1px solid #186ab2;left:0;right:0;bottom:-6px}#wunderlist-base .listOptions .content-tabs li a:focus{color:#186ab2}#wunderlist-base .listOptions .content-footer .delete-list,#wunderlist-base .listOptions .content-footer .duplicate-list{opacity:.6;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";filter:alpha(opacity=60);}#wunderlist-base .listOptions .content-footer .delete-list:hover,#wunderlist-base .listOptions .content-footer .duplicate-list:hover{opacity:.8;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";filter:alpha(opacity=80)}#wunderlist-base .listOptions .content-footer .delete-list:active,#wunderlist-base .listOptions .content-footer .duplicate-list:active{opacity:1;-ms-filter:none;filter:none}#wunderlist-base .listOptions .content-footer .delete-list:focus,#wunderlist-base .listOptions .content-footer .duplicate-list:focus{fill:#186ab2;color:#186ab2}#wunderlist-base .listOptions .content-footer .delete-list{margin-right:8px}#wunderlist-base .listOptions .content-footer .duplicate-list{letter-spacing:initial;}#wunderlist-base .listOptions .content-footer .duplicate-list > span{-webkit-transition:opacity 0.2s ease-in-out;-moz-transition:opacity 0.2s ease-in-out;-o-transition:opacity 0.2s ease-in-out;-ms-transition:opacity 0.2s ease-in-out;transition:opacity 0.2s ease-in-out;display:inline-block;vertical-align:top;margin-top:2px;opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}#wunderlist-base .listOptions .content-footer .duplicate-list:hover > span{opacity:1;-ms-filter:none;filter:none}html[dir="rtl"] #wunderlist-base .listOptions .content-people li{margin-left:0;margin-right:44px;}html[dir="rtl"] #wunderlist-base .listOptions .content-people li .content-people-image{margin-right:-44px;margin-left:initial}html[dir="rtl"] #wunderlist-base .listOptions .content-people li .content-people-meta{padding-left:initial;padding-right:10px}html[dir="rtl"] #wunderlist-base .listOptions .content-people li .button{left:0;right:initial}'
}), define("views/Modals/ListOptionsModalView", [ "application/runtime", "wunderbits/WBModalView", "./controllers/ListOptionsModalController", "../ListOptions/MembersListView", "../ListOptions/InviteAutocompleteView", "../ListOptions/OptionsView", "collections/MembershipCollection", "collections/TemporaryInviteCollection", "collections/UserCollection", "project!core/WBDeferred", "partial!symbols/trash", "template!modals/listOptionsModal", "style!modals/listOptions" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m) {
var g = t.prototype;
return t.extend({
template: u,
styles: [ p ],
"implements": [ i ],
renderData: {
url: null,
editing: !1,
listTitle: m,
headerKey: m,
isOwner: m,
duplicateListsEnabled: !1
},
formatData: function(t) {
var i = this;
t = g.formatData.call(i, t);
var n = i.model;
return n && (t.editing = !0), n && (t.listTitle = n.attributes.title), t.headerKey = t.editing ? "button_edit_list" : "label_new_list", 
t.isOwner = !n || n && i.model.isOwner(), t.duplicateListsEnabled = e.isNightly() || e.isDev(), 
t;
},
emits: {
"keyup .listOptions-title": "change:title",
"keydown .listOptions-title": "keydown:title",
"keydown .submit": "keydown:save",
"keydown .close": "keydown:cancel",
"click .submit": "click:submit",
"click .delete-list": "click:trash",
"click .duplicate-list": "click:duplicate",
"click .content-tabs a": "click:tab"
},
observes: {
events: {
"change:title": "updateButtons"
},
runtime: {
"leaving:list": ">click:close",
"modal:trySubmit": ">click:submit"
}
},
initialize: function(t) {
var i = this;
g.initialize.apply(i, arguments), i.taskIds = t.taskIds, i.ready = new d(), i.bindOnceTo(e, "db:allMembershipsLoaded", i.ready.resolve, i.ready), 
i.model && (i.memberships = new r("/lists/" + i.model.id + "/memberships")), i.addedMembers = i.options.addedMembers = new s("/memberships/temporary"), 
i.bindTo(i.addedMembers, "add remove", "updateButtons"), i.hasRendered = i.deferred(), 
i.saveOptions = {};
},
onDestroy: function() {
var e = this;
e.addedMembers.reset(), g.onDestroy.call(e);
},
render: function() {
var e = this, t = e.formatData(e.renderData);
return g.render.call(e, t), e.ready.done(function() {
e.deferredRender(t), e.hasRendered.resolve();
}), e;
},
deferredRender: function(e) {
var t = this;
if (!t.destroyed) {
var i = t.$(".content");
i.html(t.template(e));
var r = !t.model || t.model && t.model.isOwner();
t.delay(function() {
if (!t.destroyed) {
t.delegateEvents();
var e = t.$(".listOptions-title");
t.options.tab && (e = t.$(".listOptions-search")), r && e.select();
}
}, 50);
var s = t.addSubview(new a({
target: t.$(".listOptions-search"),
collection: new l("/users/all"),
addedMembers: t.addedMembers,
currentMembers: t.memberships
}), "invite");
t.$(".listOptions").append(s.el);
var d = t.membersView = t.addSubview(new n(t.options), "members"), c = t.optionsView = t.addSubview(new o(t.options), "options");
t.$(".tab.members .content-inner")[0].appendChild(d.render().el), t.$(".tab.options .content-inner")[0].appendChild(c.render().el), 
t.bindTo(t.addedMembers, "add remove", d.render, d), t.memberships && t.bindTo(t.memberships, "change:removed", d.render, d), 
t.bindTo(c, "update:saveOptions", "updateSaveOptions"), t.updateButtons(), t.renderLocalized();
}
},
updateSaveOptions: function() {
var e = this;
e.saveOptions = {
"public": e.optionsView.saveOptions["public"],
muted: e.optionsView.saveOptions.muted
};
},
updateButtons: function() {
var t = this, i = t.hasMembersChanged(), n = t.hasTitleChanged(), a = i || n || !t.model, o = t.hasTitleInput();
t.$("button.cancel").toggleClass("hidden", !a);
var r = a ? "button_save" : "button_done", s = t.$("button.submit");
s.text(e.language.getText(r)), s.toggleClass("disabled", !o), s.attr("aria-disabled", !o), 
s.attr("tabindex", o ? 0 : -1);
},
hasTitleInput: function() {
return !!this.$(".listOptions-title").val().trim();
},
hasTitleChanged: function() {
var e = this, t = e.$(".listOptions-title").val().trim();
return e.model ? t !== e.model.attributes.title : !!t;
},
hasMembersChanged: function() {
var e = this, t = e.addedMembers.models.length, i = e.memberships && e.memberships.getPendingRemovals(), n = i && i.length || 0;
return !(!t && !n);
},
showTab: function(e, t) {
var i = this;
e = e || "members", i.hasRendered.done(function() {
var n = i.$(".listOptions-invite");
i.$(".tab").addClass("hidden"), i.$(".tab." + e).removeClass("hidden"), i.tab = e, 
i.cachedFilterValues || (i.cachedFilterValues = {});
var a = i.$(".content-tabs li a.active").attr("rel");
a && (i.cachedFilterValues[a] = n.val()), i.$(".content-tabs li a").removeClass("active"), 
i.$('.content-tabs [rel="' + e + '"]').addClass("active"), n.val(i.cachedFilterValues[e] || ""), 
i.trigger("filter", i.cachedFilterValues[e] || "");
var o = i.$(".content-inner");
o.scrollTop(0), o.toggleClass("members", "members" === e), t && i.defer(function() {
n.select();
});
});
},
focusTitleInput: function() {
this.$(".listOptions-title").focus();
}
});
}), define("views/Modals/controllers/ChooseBackgroundModalController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/WBModalViewController" ], function(e, t, i) {
var n = e.$;
return i.extend({
"implements": {
"click:background": "changeBackground"
},
changeBackground: function(e) {
var t = this, i = n(e.target).closest("li"), a = i[0].className, o = a.split("-").pop();
t.view.choose(o), t.saveBackground(a);
},
saveBackground: function(t) {
var i = n.trim(t.replace("background-", "wlbackground").replace("selected", "")), a = e.settings.attributes.background;
a !== i && (e.settings.save("background", i), e.trigger("analytics:backgroundModal:changeBackground", i));
}
});
}), define("/templates/symbols/completed.js", {
name: "symbols/completed",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<svg class="completed" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>completed</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="completed" sketch:type="MSArtboardGroup" > <path d="M7.48412073,16.9975 C7.36412073,16.9975 7.24412073,16.9375 7.14412073,16.8575 C5.66412073,15.3575 4.00412073,14.0375 2.24412073,12.9175 C2.00412073,12.7775 1.92412073,12.4575 2.08412073,12.2375 C2.22412073,11.9975 2.54412073,11.9375 2.76412073,12.0775 C4.42412073,13.1175 5.98412073,14.3375 7.38412073,15.6975 C10.3441207,10.8175 13.3841207,6.9175 17.1441207,3.1375 C17.3441207,2.9575 17.6641207,2.9575 17.8641207,3.1375 C18.0441207,3.3375 18.0441207,3.6575 17.8641207,3.8575 C14.0041207,7.6975 10.9441207,11.6775 7.92412073,16.7575 C7.84412073,16.8775 7.70412073,16.9775 7.56412073,16.9975 L7.48412073,16.9975 Z" id="H" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/modals/backgroundModal.js", {
name: "modals/backgroundModal",
data: {
"1": function() {
return "not-pro";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = '<div class="content-header"> <h2 class="center">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "userbar_change_background", {
name: "localized",
hash: {},
data: n
}))) + '</h2> </div> <div class="content-inner"> <div class="background-list"> <ul> <li class="background-06">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-02">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-17">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-01">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-03">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-04">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-05">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-20">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-07">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-08">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-25">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-26">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-09">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-10">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-11">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-12">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-13">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-14">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-15">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-16">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-21 ';
return a = t.unless.call(e, e && e.isPro, {
name: "unless",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-23 ', a = t.unless.call(e, e && e.isPro, {
name: "unless",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-27 ', a = t.unless.call(e, e && e.isPro, {
name: "unless",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-22 ', a = t.unless.call(e, e && e.isPro, {
name: "unless",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-24 ', a = t.unless.call(e, e && e.isPro, {
name: "unless",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-18 ', a = t.unless.call(e, e && e.isPro, {
name: "unless",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-29 ', a = t.unless.call(e, e && e.isPro, {
name: "unless",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-28 ', a = t.unless.call(e, e && e.isPro, {
name: "unless",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-19 ', a = t.unless.call(e, e && e.isPro, {
name: "unless",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="background-30 ', a = t.unless.call(e, e && e.isPro, {
name: "unless",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l + '">' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + '</li> <li class="break"></li> </ul> </div> </div> <div class="content-footer"> <div class="cols"> <div class="col-30"></div> <div class="col-40"><button class="blue full close">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_done", {
name: "localized",
hash: {},
data: n
}))) + '</button></div> <div class="col-30"></div> </div> </div>';
},
useData: !0
}
}), define("/styles/modals/backgroundModal.js", {
name: "modals/backgroundModal",
data: '#backgroundModal{width:406px;left:50%;margin-left:-203px;}#backgroundModal .content-inner{padding:0}#backgroundModal.scroll .content-inner{left:0;right:0;top:70px}#backgroundModal .background-list{margin:7px 14px;font-size:0;text-align:justify;}#backgroundModal .background-list li{width:64px;height:64px;display:inline-block;-webkit-box-shadow:inset 0 0 0 1px rgba(0,0,0,0.1);box-shadow:inset 0 0 0 1px rgba(0,0,0,0.1);-webkit-border-radius:4px;border-radius:4px;margin:7px 0;-webkit-background-size:120px;-moz-background-size:120px;background-size:120px;position:relative;}#backgroundModal .background-list li:before{opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0);position:absolute;-webkit-border-radius:4px;border-radius:4px;content:\'\';width:100%;height:100%;background:rgba(0,0,0,0.2)}#backgroundModal .background-list li .completed{content:\'\';-webkit-transition:300ms cubic-bezier(0.11, 1.16, 0.49, 1.25) 50ms;-moz-transition:300ms cubic-bezier(0.11, 1.16, 0.49, 1.25) 50ms;-o-transition:300ms cubic-bezier(0.11, 1.16, 0.49, 1.25) 50ms;-ms-transition:300ms cubic-bezier(0.11, 1.16, 0.49, 1.25) 50ms;transition:300ms cubic-bezier(0.11, 1.16, 0.49, 1.25) 50ms;opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0);fill:#fff;position:absolute;top:50%;left:50%;width:38px;height:38px;margin-left:-19px;margin-top:-19px;-webkit-transform:scale(.4);-moz-transform:scale(.4);-o-transform:scale(.4);-ms-transform:scale(.4);transform:scale(.4)}#backgroundModal .background-list li.not-pro{opacity:.5;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";filter:alpha(opacity=50);pointer-events:none}#backgroundModal .background-list li.selected .completed,#backgroundModal .background-list li.selected:before{opacity:1;-ms-filter:none;filter:none;-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}#backgroundModal .background-list li.break{width:100%;height:0;margin-bottom:0}'
}), define("views/Modals/ChooseBackgroundModalView", [ "application/runtime", "wunderbits/WBModalView", "./controllers/ChooseBackgroundModalController", "partial!symbols/completed", "template!modals/backgroundModal", "style!modals/backgroundModal" ], function(e, t, i, n, a, o, r) {
var s = t.prototype;
return t.extend({
template: a,
styles: [ o ],
"implements": [ i ],
emits: {
"click li": "click:background"
},
renderData: {
id: r,
background: r,
isPro: r
},
formatData: function(t) {
var i = this;
return t = s.formatData.call(i, t), t.id = "backgroundModal", t.background = parseInt(e.settings.attributes.background.substr(-2), 10), 
t.isPro = e.user.isPro(), t;
},
render: function() {
var e = this, t = e.formatData(e.renderData);
s.render.call(e, t);
var i = e.$(".content");
return i.html(e.template(t)), e.choose(t.background), e.renderLocalized(), e;
},
choose: function(e) {
var t = this;
t.$("li").removeClass("selected"), t.$(".background-" + e).addClass("selected");
}
});
}), define("views/Modals/controllers/ChooseListsModalController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/WBModalViewController", "actions/Factory" ], function(e, t, i, n) {
var a = e.$, o = i.prototype;
return i.extend({
"implements": {
"click:start": "start",
"click:list": "onClickList"
},
initialize: function() {
var e = this;
o.initialize.apply(e, arguments), e.createList = n.createList();
},
onClickList: function(e) {
var t = a(e.currentTarget);
t.toggleClass("selected"), t.find(".list-toggle").toggleClass("blue"), this.updateStartButtonState();
},
updateStartButtonState: function() {
var e = this.view.$el, t = e.find(".first-list li.selected");
e.find("button.start").toggleClass("disabled", !t.length);
},
start: function() {
var t = this, i = t.view, n = !1, o = i.$(".first-list li.selected");
o.each(function(i, o) {
var r = a(o), s = r.find(".list-title").text();
s && t.createList.createList(s).done(function(t) {
n || (n = t, e.trigger("route:lists/" + n.id), e.trigger("onboarding:chooseListClosed"));
});
});
}
});
}), define("/templates/modals/chooseListModal.js", {
name: "modals/chooseListModal",
data: {
"1": function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = "function", d = " <li> " + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "list", {
name: "symbol",
hash: {},
data: n
}))) + ' <span class="list-title">';
return a = typeof e === l ? e.apply(e) : e, (a || 0 === a) && (d += a), d + '</span> <button class="list-toggle circle"> ' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "completed", {
name: "symbol",
hash: {},
data: n
}))) + " </button> </li> ";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = '<div class="content-header"> <h3 class="center">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "label_onboarding_choose_your_first_lists", {
name: "localized",
hash: {},
data: n
}))) + '</h3> <p class="center">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "label_onboarding_choose_your_first_lists_description", {
name: "localized",
hash: {},
data: n
}))) + '</p> </div> <div class="content-inner"> <div class="first-list"> <ul> ';
return a = t.each.call(e, e && e.listKeys, {
name: "each",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l + ' </ul> </div> </div> <div class="content-footer"> <div class="center"> <button class="blue half start disabled">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_get_started", {
name: "localized",
hash: {},
data: n
}))) + "</button> </div> </div> ";
},
useData: !0
}
}), define("/styles/modals/chooseListModal.js", {
name: "modals/chooseListModal",
data: "#chooseListModal,#chooseBusinessListModal{width:380px;left:50%;margin-left:-190px;background:#fafafa;}#chooseListModal .content-inner,#chooseBusinessListModal .content-inner{padding:7px 14px 14px 14px;border-top:1px solid transparent}#chooseListModal .content-header,#chooseBusinessListModal .content-header{height:97px;}#chooseListModal .content-header h3,#chooseBusinessListModal .content-header h3{margin-bottom:5px}#chooseListModal .content-header p,#chooseBusinessListModal .content-header p{font-size:13px;color:#737272;padding:0 30px}#chooseListModal.scroll .content-inner,#chooseBusinessListModal.scroll .content-inner{border-top:1px solid #e0e0df;left:0;right:0;top:96px}#chooseListModal li,#chooseBusinessListModal li{position:relative;border-bottom:1px solid #d6d6d6;border-left:1px solid #d6d6d6;border-right:1px solid #d6d6d6;font-size:14px;height:42px;}#chooseListModal li:first-child,#chooseBusinessListModal li:first-child{border-top:1px solid #d6d6d6;-webkit-border-radius:5px 5px 0 0;border-radius:5px 5px 0 0}#chooseListModal li:last-child,#chooseBusinessListModal li:last-child{-webkit-border-radius:0 0 5px 5px;border-radius:0 0 5px 5px}#chooseListModal li.selected .list-toggle svg.completed,#chooseBusinessListModal li.selected .list-toggle svg.completed{visibility:visible}#chooseListModal .list-title,#chooseBusinessListModal .list-title,#chooseListModal .list-toggle,#chooseBusinessListModal .list-toggle,#chooseListModal svg.list,#chooseBusinessListModal svg.list{position:absolute}#chooseListModal .list-title,#chooseBusinessListModal .list-title{left:42px;top:12px;font-weight:bold}#chooseListModal svg.list,#chooseBusinessListModal svg.list{left:13px;top:10px;fill:#737272}#chooseListModal .list-toggle,#chooseBusinessListModal .list-toggle{top:8px;right:14px;height:26px;width:26px}#chooseListModal svg.completed,#chooseBusinessListModal svg.completed{margin-top:-3px;margin-left:-3px;visibility:hidden;fill:#fff}#chooseListModal .content-footer button,#chooseBusinessListModal .content-footer button{margin:0}"
}), define("views/Modals/ChooseListsModalView", [ "application/runtime", "wunderbits/WBModalView", "./controllers/ChooseListsModalController", "template!modals/chooseListModal", "style!modals/chooseListModal" ], function(e, t, i, n, a, o) {
var r = t.prototype;
return t.extend({
template: n,
styles: [ a ],
"implements": [ i ],
emits: {
"click .start": "click:start",
"click .first-list li": "click:list"
},
renderData: {
id: o
},
formatData: function(t) {
var i = this;
return t = r.formatData.call(i, t), t.id = "chooseListModal", t.listKeys = [ "groceries", "movies", "travel", "work", "family", "private" ], 
t.listKeys.forEach(function(i, n) {
t.listKeys[n] = e.language.getLabel("label_onboarding_" + i + "_list").toString();
}), t;
},
render: function() {
var e = this, t = e.formatData(e.renderData);
r.render.call(e, t);
var i = e.$(".content");
return i.html(e.template(t)), e.renderLocalized(), e;
}
});
}), define("views/Modals/controllers/ChooseBusinessListsModalController", [ "application/runtime", "wunderbits/data/keycodes", "project!core/WBDeferred", "project!core/lib/when", "./ChooseListsModalController", "actions/Factory", "vendor/moment" ], function(e, t, i, n, a, o, r) {
var s = e.$, l = e._, d = a.prototype, c = {
"Team Tasks": "team",
"At Work": "work",
"At Home": "home",
"Getting Started": "tutorial"
};
return a.extend({
"implements": {
"click:start": "start",
"click:list": "onClickList"
},
initialize: function() {
var e = this;
d.initialize.apply(e, arguments), e.createList = o.createList(), e.createTask = o.createTask();
},
createData: {
team: [ {
title: "Share this list with colleagues and start working together!",
position: 0,
note: "Having a Team List is an ideal starting point for your team's tasks. \n Please share this list with your team members to foster teamwork and experience the power of sharing and assigning tasks."
} ],
tutorial: [ {
title: "This is a task. Double-click to open the detail-view.",
due_date: r().add("days", 3).format("YYYY-MM-DD"),
note: "This is a note. The notes section is handy for briefings, instructions, or the context of a task. Use the comments field below to start a focused conversation about what needs to be done.",
position: 50,
subtasks: [ {
title: "This is a subtask. Subtasks let you divide tasks into small, more actionable steps."
}, {
title: "And another actionable step here"
} ]
}, {
title: "This task has a due date. Add due dates and reminders to keep your projects on schedule.",
position: 100,
due_date: r().add("months", 2).format("YYYY-MM-DD"),
note: "Due dates set a deadline for each task while reminders pop up specifically for your account on all your devices. \n You can add due dates to your calendar using the calendar integration link towards the bottom of the account settings."
}, {
title: "This task has been starred for priority. You can star a task by clicking the star at the right.",
position: 200,
starred: !0,
note: "Once your tasks have been starred, you can sort by priority by clicking the sort button at the bottom of the app."
}, {
title: "Add a file to this task at the bottom of the detail-view.",
position: 300,
note: "You can add files by drag-and-dropping them into the dropzone. \n With our new Dropbox integration, attaching files and keeping them updated is a breeze!"
}, {
title: "Create and share new lists for your projects or teams by clicking the big + button on the bottom left.",
position: 600,
note: "Choose descriptive list names and be sure to invite everyone that needs to be kept in the loop."
}, {
title: 'View our 90 second "Getting Started" video: http://youtu.be/nQ_-V6owiyk',
position: 1
} ]
},
onClickList: function(e) {
var t = s(e.currentTarget);
t.toggleClass("selected"), t.find(".list-toggle").toggleClass("blue"), this.updateStartButtonState();
},
updateStartButtonState: function() {
var e = this.view.$el, t = e.find(".first-list li.selected");
e.find("button.start").toggleClass("disabled", !t.length);
},
start: function() {
var t = this, a = t.view, o = !1, r = new i(), d = a.$(".first-list li.selected");
d.each(function(e, i) {
var n = s(i), a = n.find(".list-title").text();
a && t.createList.createList(a).done(function(i) {
o || (o = i);
var n = c[a];
n && t.createTasksForList(i.id, n), e === d.length - 1 && r.resolve();
});
}), n(r).done(function() {
l.delay(function() {
e.trigger("route:lists/" + o.id), e.trigger("onboarding:chooseListClosed");
}, 250);
});
},
createTasksForList: function(e, t) {
var i = this, n = i.createData[t];
n && (n = n.reverse(), l.each(n, function(t) {
t.interval && t.frequency && (t.repeat = {
interval: t.interval,
frequency: t.frequency
}), i.createTask.createTask(t.title, e, t.starred, t.due_date, t.repeat, t.note, t.subtasks, t.position);
}));
}
});
}), define("views/Modals/ChooseBusinessListsModalView", [ "application/runtime", "./ChooseListsModalView", "./controllers/ChooseBusinessListsModalController", "template!modals/chooseListModal", "style!modals/chooseListModal" ], function(e, t, i, n, a) {
var o = t.prototype;
return t.extend({
styles: [ a ],
"implements": [ i ],
formatData: function(e) {
var t = this;
return e = o.formatData.call(t, e), e.id = "chooseBusinessListModal", e.listKeys = [ "Team Tasks", "At Work", "At Home", "Getting Started" ], 
e;
}
});
}), define("/templates/symbols/delete.js", {
name: "symbols/delete",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<svg class="delete" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>delete</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="delete" sketch:type="MSArtboardGroup" > <path d="M10.72,9.9975 L13.86,6.8575 C14.04,6.6575 14.04,6.3375 13.86,6.1375 C13.66,5.9575 13.34,5.9575 13.14,6.1375 L10,9.2775 L6.86,6.1375 C6.66,5.9575 6.34,5.9575 6.14,6.1375 C5.96,6.3375 5.96,6.6575 6.14,6.8575 L9.28,9.9975 L6.14,13.1375 C5.96,13.3375 5.96,13.6575 6.14,13.8575 C6.24,13.9575 6.38,13.9975 6.5,13.9975 C6.62,13.9975 6.76,13.9575 6.86,13.8575 L10,10.7175 L13.14,13.8575 C13.24,13.9575 13.38,13.9975 13.5,13.9975 C13.62,13.9975 13.76,13.9575 13.86,13.8575 C14.04,13.6575 14.04,13.3375 13.86,13.1375 L10.72,9.9975 Z" id="4" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/reminderItem.js", {
name: "reminderItem",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return '<div class="reminderItem-content"> <span class="icon reminder"/> <div class="reminderItem-text"> ' + r((a = t.localized || e && e.localized || o, 
a.call(e, "label_reminder_message_$", e && e.title, {
name: "localized",
hash: {},
data: n
}))) + '. </div> </div> <a class="delete"> ' + r((a = t.symbol || e && e.symbol || o, 
a.call(e, "delete", {
name: "symbol",
hash: {},
data: n
}))) + " </a>";
},
useData: !0
}
}), define("views/Reminders/ReminderItemView", [ "application/runtime", "wunderbits/helpers/date", "wunderbits/WBView", "vendor/moment", "partial!symbols/delete", "template!reminderItem" ], function(e, t, i, n, a, o) {
var r = i.prototype;
return i.extend({
tagName: "li",
className: "reminderItem dialog",
template: o,
events: {
"click .delete": "_onDismissReminder",
click: "_onClick"
},
initialize: function(e) {
var t = this;
e = e || {}, t.taskModel = e.taskModel, r.initialize.apply(t, arguments);
},
renderData: {
title: null
},
formatData: function(e) {
var t = this, i = t.taskModel;
return e.title = i.escape("title"), e;
},
render: function() {
var e = this, t = e.formatData(e.renderData);
return r.render.call(e, t), e;
},
_onDismissReminder: function(e) {
var t = this;
t.model && t.model.set({
reminded: !0
}), !t.destroyed && t.destroy(), e.stopPropagation();
},
_onClick: function(t) {
var i = this;
e.trigger("reminder:clicked"), i.taskModel && e.trigger("route:" + i.taskModel.route()), 
i._onDismissReminder(t);
}
});
}), define("/styles/modals/reminderModal.js", {
name: "modals/reminderModal",
data: '.dialog-wrapper.reminders{background:none;height:auto;overflow:visible;pointer-events:none}.dialog.reminderItem{pointer-events:bounding-box;position:relative;width:300px;margin-left:-150px;top:auto;padding:6px;margin-top:10px;zoom:1;}.dialog.reminderItem:before,.dialog.reminderItem:after{content:"";display:table}.dialog.reminderItem:after{clear:both}.dialog.reminderItem .reminderItem-text{line-height:18px;padding-left:45px;padding-right:20px;word-break:break-word}.dialog.reminderItem .icon.reminder{top:5px;left:5px;float:left}.dialog.reminderItem .delete{cursor:pointer;position:absolute;top:2px;right:2px}'
}), define("views/Reminders/RemindersView", [ "vendor/moment", "application/runtime", "actions/Factory", "wunderbits/helpers/date", "helpers/notifications", "views/Reminders/ReminderItemView", "wunderbits/WBView", "style!modals/reminderModal" ], function(e, t, i, n, a, o, r, s) {
var l = n, d = a, c = r.prototype;
return r.extend({
tagName: "ul",
className: "reminders dialog-wrapper",
styles: [ s ],
events: {},
initialize: function() {
var e = this;
e.taskLookup = i.taskLookup(), e.reminderLookup = i.reminderLookup(), e.desktopNotificationLookup = i.desktopNotificationLookup(), 
c.initialize.apply(e, arguments), e.bindTo(t, "reminders:check", e._onCheckReminders);
},
render: function() {
var e = this, t = {};
return c.render.call(e, t), e;
},
_onCheckReminders: function() {
var t = this, i = e().format("YYYY-MM-DDTHH:mm"), n = t.reminderLookup.allReminders;
n.models.forEach(function(n) {
var a = n.attributes.date, o = a && e(l.convertServerTimeToLocalTime(a)).format("YYYY-MM-DDTHH:mm"), r = !!n.attributes.reminded, s = !!t.getSubview(n.id), d = o === i;
o && !r && !s && d && (n.save({
reminded: !0
}), t._handleDueReminder(n));
});
},
_handleDueReminder: function(e) {
var i = this, n = i.taskLookup.getTaskModel(e.attributes.task_id);
if (n && !n.isCompleted()) {
var a = {
model: e,
taskModel: n
}, r = i.addSubview(new o(a), e.id);
r && i.$el.prepend(r.render().el);
var s = n.attributes.online_id, l = i.desktopNotificationLookup.getReminderNotificationForTask(s);
s && l || i._displayDesktopNotification(a, r), "true" === t.settings.attributes.sound_notification_enabled && t.trigger("sounds:play", "bell");
}
},
_displayDesktopNotification: function(e, i) {
var n = this, a = function(i) {
this.close();
var a = n.getSubview(e.model.id);
a && a.destroy(), "click" === i.type && (t.trigger("reminder:clicked"), t.trigger("route:" + e.taskModel.route()));
}, o = "true" === t.settings.attributes.notifications_desktop_enabled;
o && d.create({
type: "text",
title: "wunderlist reminder",
text: i.$el.find(".reminderItem-text").text(),
timeout: !1,
onClick: a,
onClose: a
});
}
});
}), define("views/Settings/Controllers/SettingsSubviewController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/WBModalViewController" ], function(e, t, i) {
return i.extend({
"implements": {
"tabStart:keydown": "handleTabStartKeys",
"tabEnd:keydown": "handleTabEndKeys"
},
handleTabStartKeys: function(e) {
var i = this.view;
e.which === t.tab && e.shiftKey && (i.trigger("focus:tab"), e.preventDefault(), 
e.stopPropagation());
},
handleTabEndKeys: function(e) {
var i = this.view;
e.which !== t.tab || e.shiftKey || (i.$(".tabStart").focus(), e.preventDefault(), 
e.stopPropagation());
}
});
}), define("views/Settings/SettingsSubview", [ "views/Settings/Controllers/SettingsSubviewController", "wunderbits/WBViewPresenter" ], function(e, t) {
return t.extend({
"implements": [ e ],
emits: {
"keydown .tabStart": "tabStart:keydown",
"keydown .tabEnd": "tabEnd:keydown",
"keydown .tabBackOnly": "tabBackOnly:keydown",
"keydown .tabForwardOnly": "tabForwardOnly:keydown"
}
});
}), define("views/Settings/Controllers/SettingsGeneralViewController", [ "application/runtime", "wunderbits/WBModalViewController" ], function(e, t) {
var i = e.$;
return t.extend({
"implements": {
"change:selectable": "onChangeSelectable",
"change:toggleable": "onChangeToggleable",
"change:radio": "onChangeRadio"
},
selectableEventsMap: {
"edit-date-format": "date_format",
"edit-language": "language",
"edit-new-task-location": "new_task_location",
"edit-start-of-week": "start_of_week"
},
toggleableEventsMap: {
"edit-ask-before-delete": "confirm_delete_entity",
"edit-print-completed-items": "print_completed_items",
"edit-sound-checkoff-enabled": "sound_checkoff_enabled",
"edit-sound-notification-enabled": "sound_notification_enabled",
"edit-star-tasks-behavior": "behavior_star_tasks_to_top",
"edit-automatic-reminders": "automatic_reminders"
},
radioEventsMap: {
"edit-time-format": "time_format"
},
onChangeSelectable: function(t) {
var n = i(t.currentTarget), a = {};
a[this.selectableEventsMap[n.attr("id")]] = n.val(), e.settings.save(a);
},
onChangeToggleable: function(t) {
var n = i(t.currentTarget), a = {};
a[this.toggleableEventsMap[n.attr("id")]] = n.is(":checked").toString(), a.automatic_reminders && (a.automatic_reminders = "true" === a.automatic_reminders ? "on" : "off"), 
e.settings.save(a);
},
onChangeRadio: function(t) {
var n = i(t.currentTarget), a = {};
a[this.radioEventsMap[n.attr("name")]] = n.val(), e.settings.save(a);
}
});
}), define("/templates/settings/settingsGeneral.js", {
name: "settings/settingsGeneral",
data: {
"1": function(e, t, i, n) {
var a, o, r = "function", s = this.escapeExpression, l = ' <option value="' + s((o = t.code || e && e.code, 
typeof o === r ? o.call(e, {
name: "code",
hash: {},
data: n
}) : o)) + '">';
return o = t.name || e && e.name, a = typeof o === r ? o.call(e, {
name: "name",
hash: {},
data: n
}) : o, (a || 0 === a) && (l += a), l + "</option> ";
},
"3": function() {
return " selected";
},
"5": function() {
return " checked";
},
"7": function() {
return "checked";
},
"9": function() {
return "selected";
},
"11": function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = ' <div class="separator"> <div class="cols"> <div class="col-60 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_automatic_reminders", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-40"> <input id="edit-automatic-reminders" type="checkbox" ';
return a = t["if"].call(e, e && e["is automatic_reminders on"], {
name: "if",
hash: {},
fn: this.program(7, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l + ' data-key-aria-label="settings_automatic_reminders"/> </div> </div> </div> ';
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = ' <div class="separator"> <!-- Language --> <div class="cols"> <div class="col-60 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_general_language", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-40"> <span class="select"> <select id="edit-language" data-key-aria-label="settings_general_language" class="tabStart">  ';
return a = t.each.call(e, e && e.languages, {
name: "each",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += ' </select> </span> </div> </div> <!-- Date Format --> <div class="cols"> <div class="col-60 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_general_date_format", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-40"> <span class="select"> <select id="edit-date-format" data-key-aria-label="settings_general_date_format"> <option value="DD.MM.YYYY" ', 
a = t["if"].call(e, e && e["is date_format DD.MM.YYYY"], {
name: "if",
hash: {},
fn: this.program(3, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '>DD.MM.YYYY</option> <option value="MM/DD/YYYY" ', 
a = t["if"].call(e, e && e["is date_format MM/DD/YYYY"], {
name: "if",
hash: {},
fn: this.program(3, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '>MM/DD/YYYY</option> <option value="DD/MM/YYYY" ', 
a = t["if"].call(e, e && e["is date_format DD/MM/YYYY"], {
name: "if",
hash: {},
fn: this.program(3, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '>DD/MM/YYYY</option> <option value="YYYY/MM/DD" ', 
a = t["if"].call(e, e && e["is date_format YYYY/MM/DD"], {
name: "if",
hash: {},
fn: this.program(3, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '>YYYY/MM/DD</option> <option value="YYYY-MM-DD" ', 
a = t["if"].call(e, e && e["is date_format YYYY-MM-DD"], {
name: "if",
hash: {},
fn: this.program(3, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '>YYYY-MM-DD</option> </select> </span> </div> </div> <!-- Time Format --> <div class="cols"> <div class="col-60 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_general_time_format", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-40"> <div aria-role="radiogroup" data-key-aria-label="settings_general_time_format" tabindex="0"> <input name="edit-time-format" type="radio" value="12 hour" ', 
a = t["if"].call(e, e && e["is time_format 12 hour"], {
name: "if",
hash: {},
fn: this.program(5, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += ' data-key-aria-label="settings_general_12_hour"></input>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_general_12_hour", {
name: "localized",
hash: {},
data: n
}))) + ' <input name="edit-time-format" type="radio" value="24 hour" ', a = t["if"].call(e, e && e["is time_format 24 hour"], {
name: "if",
hash: {},
fn: this.program(5, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += ' data-key-aria-label="settings_general_24_hour"></input>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_general_24_hour", {
name: "localized",
hash: {},
data: n
}))) + ' </div> </div> </div> <!-- Start of Week --> <div class="cols"> <div class="col-60 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_general_start_of_week", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-40"> <div class="select"> <span class="select"> <select id="edit-start-of-week" data-key-aria-label="settings_general_start_of_week"> <option value="sat" ', 
a = t["if"].call(e, e && e["is start_of_week sat"], {
name: "if",
hash: {},
fn: this.program(3, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += ' data-key-text="settings_general_start_of_week_saturday"></option> <option value="sun" ', 
a = t["if"].call(e, e && e["is start_of_week sun"], {
name: "if",
hash: {},
fn: this.program(3, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += ' data-key-text="settings_general_start_of_week_sunday"></option> <option value="mon" ', 
a = t["if"].call(e, e && e["is start_of_week mon"], {
name: "if",
hash: {},
fn: this.program(3, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += ' data-key-text="settings_general_start_of_week_monday"></option> </select> </span> </div> </div> </div> </div> <!-- Sounds --> <div class="separator"> <div class="cols"> <div class="col-60 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_general_sound_task_completion", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-40"> <input id="edit-sound-checkoff-enabled" type="checkbox" ', 
a = t["if"].call(e, e && e["is sound_checkoff_enabled true"], {
name: "if",
hash: {},
fn: this.program(7, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += ' data-key-aria-label="settings_general_sound_task_completion"/> </div> </div> <div class="cols"> <div class="col-60 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_general_sound_new_notifications", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-40"> <input id="edit-sound-notification-enabled" type="checkbox" ', 
a = t["if"].call(e, e && e["is sound_notification_enabled true"], {
name: "if",
hash: {},
fn: this.program(7, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += ' data-key-aria-label="settings_general_sound_new_notifications"/> </div> </div> </div> <!-- Create New Tasks --> <div class="separator"> <div class="cols"> <div class="col-60 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_general_create_new_tasks", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-40"> <span class="select"> <select id="edit-new-task-location" data-key-aria-label="settings_general_create_new_tasks"> <option value="top" ', 
a = t["if"].call(e, e && e["is new_task_location top"], {
name: "if",
hash: {},
fn: this.program(9, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += ' data-key-text="settings_general_tasks_top"></option> <option value="bottom" ', 
a = t["if"].call(e, e && e["is new_task_location bottom"], {
name: "if",
hash: {},
fn: this.program(9, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += ' data-key-text="settings_general_tasks_bottom"></option> </select> </span> </div> </div> <!-- Ask to confirm before deleting --> <div class="cols"> <div class="col-60 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_general_confirm_deletion", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-40"> <input id="edit-ask-before-delete" type="checkbox" ', 
a = t["if"].call(e, e && e["is confirm_delete_entity true"], {
name: "if",
hash: {},
fn: this.program(7, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += ' data-key-aria-label="settings_general_confirm_deletion"/> </div> </div> <!-- Starring tasks behavior --> <div class="cols"> <div class="col-60 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_general_starred_tasks_to_top", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-40"> <input id="edit-star-tasks-behavior" type="checkbox" ', 
a = t["if"].call(e, e && e["is behavior_star_tasks_to_top true"], {
name: "if",
hash: {},
fn: this.program(7, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += ' data-key-aria-label="settings_general_starred_tasks_to_top"/> </div> </div> <!-- Auto Reminder --> ', 
a = t["if"].call(e, e && e.isAutoRemindersFeatureEnabled, {
name: "if",
hash: {},
fn: this.program(11, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += ' </div> <!-- Print completed tasks --> <div class="separator"> <div class="cols"> <div class="col-60 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_general_print_done_tasks", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-40"> <input id="edit-print-completed-items" type="checkbox" ', 
a = t["if"].call(e, e && e["is print_completed_items true"], {
name: "if",
hash: {},
fn: this.program(7, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l + ' data-key-aria-label="settings_general_print_done_tasks"/> </div> </div> </div> ';
},
useData: !0
}
}), define("views/Settings/SettingsGeneralView", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/helpers/strings", "languages/available", "actions/Factory", "views/Settings/SettingsSubview", "views/Settings/Controllers/SettingsGeneralViewController", "template!settings/settingsGeneral" ], function(e, t, i, n, a, o, r, s) {
var l = e._, d = o.prototype;
return o.extend({
template: s,
className: "settings-content-inner",
"implements": [ r ],
emits: {
"change #edit-date-format": "change:selectable",
"change #edit-start-of-week": "change:selectable",
"change #edit-language": "change:selectable",
"change #edit-new-task-location": "change:selectable",
"change #edit-ask-before-delete": "change:toggleable",
"change #edit-print-completed-items": "change:toggleable",
"change #edit-sound-checkoff-enabled": "change:toggleable",
"change #edit-sound-notification-enabled": "change:toggleable",
"change #edit-star-tasks-behavior": "change:toggleable",
"change #edit-sync-settings": "change:toggleable",
"change #edit-automatic-reminders": "change:toggleable",
'change input[name="edit-time-format"]': "change:radio"
},
initialize: function() {
var t = this;
d.initialize.apply(t, arguments), t.selectables = [ "date_format", "language", "new_task_location" ], 
t.radios = [ "time_format" ], l.each(t.selectables, function(i) {
t.bindTo(e.settings, "change:" + i, function() {
t.updateSelectable(i);
});
}), l.each(t.radios, function(i) {
t.bindTo(e.settings, "change:" + i, function() {
t.updateRadio(i);
});
}), t.automaticReminderService = a.automaticReminder();
},
render: function() {
var t = this, i = e.settings.toJSON();
l.each(i, function(e, t) {
i["is " + t + " " + e] = !0;
}), i.isAutoRemindersFeatureEnabled = t.automaticReminderService.isFeatureEnabled(), 
i.languages = [], l.each(n.data, function(e, t) {
e.code = t, i.languages.push(e);
}), d.render.call(t, i);
var a = e.language.attributes.code;
return t.$el.find('option[value="' + a + '"]').first().prop("selected", !0), t;
},
updateSelectable: function(t) {
var i = this, n = e.settings.get(t), a = i.$el.find("#edit-" + t.replace(/_/g, "-")).find('option[value="' + n + '"]').first();
a.prop("selected", !0);
},
updateRadio: function(t) {
var i = this, n = e.settings.get(t), a = i.$el.find('[name="edit-' + t.replace(/_/g, "-") + '"]').filter('[value="' + n + '"]').first();
a.prop("checked", !0);
}
});
}), define("mixins/TermsOfUseMixin", [ "application/runtime", "vendor/moment", "project!core/WBMixin" ], function(e, t, i) {
var n = e.$, a = e._;
return i.extend({
renderTermsLinks: function() {
var e = this;
if (!e.destroyed) {
var t = "http://www.6wunderkinder.com/", i = e.$(".accept-terms");
i.each(function() {
var e = n(this), i = e.find(".token_0"), a = e.find(".token_1");
if ("A" !== i.parent().prop("tagName")) {
var o = n('<a href="' + t + 'terms-of-use" target="_blank"></a>').append(i.clone());
i.replaceWith(o);
var r = n('<a href="' + t + 'privacy-policy" target="_blank"></a>').append(a.clone());
a.replaceWith(r);
}
});
}
},
cancelTerms: function(t, i) {
var n = this;
e.trigger("route" + t), a.delay(function() {
n.$(".pro-section-terms-of-use, .buy-options, .teams").toggleClass("hidden"), i && (n.selectedProduct = null);
}, 200);
},
acceptTerms: function(i) {
var n = this, a = n.$(".accept-terms"), o = n.$(".button, button"), r = {
terms_accepted_at: t().format("YYYY-MM-DD")
};
a.addClass("loading"), o.addClass("disabled").attr("disabled", "disabled"), e.settings.save(r, {
success: function() {
a.removeClass("loading"), o.removeClass("disabled").removeAttr("disabled"), i && i.callback && "function" == typeof i.callback && i.callback();
}
});
}
});
}), define("/templates/pro/subscription.js", {
name: "pro/subscription",
data: {
"1": function() {
return ' <div class="col-50"> <button class="big green buy" disabled tabindex="0"></button> </div> ';
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = '<div class="page-buy"> <!-- Go premium --> <div class="separator"> <div class="cols top"> <div class="col-32"> <div class="avatar-frame"> <div class="avatar large"> <span class="icon pro"></span> <img /> </div> </div> </div> <div class="col-68 pro-section-style"> <!-- Products --> <div class="buy-options tabStart" tabindex="0"> <h3 class="upgrade-header"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "benefit_header_$", "$benefit_name", {
name: "localized",
hash: {},
data: n
}))) + " </h3> <p>" + s((o = t.localized || e && e.localized || r, o.call(e, "benefit_header_description", {
name: "localized",
hash: {},
data: n
}))) + '</p> <div class="cols"> ';
return a = t.each.call(e, e && e.products, {
name: "each",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l + ' </div> <a data-path="preferences/teams" class="button big green buy" role="button" data-key-aria-label="group_billing_packages_title" tabindex="0">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "group_billing_packages_title", {
name: "localized",
hash: {},
data: n
}))) + '</a> </div> <!-- TOU --> <div class="pro-section-terms-of-use hidden"> <h3>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_terms_of_use", {
name: "localized",
hash: {},
data: n
}))) + '</h3> <p class="accept-terms">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "benefit_label_accept_terms", "$settings_terms_of_use", "$settings_privacy_policy", {
name: "localized",
hash: {},
data: n
}))) + '</p> <div class="cols"> <div class="col-50"> <a class="button big cancel-terms-of-use">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_cancel", {
name: "localized",
hash: {},
data: n
}))) + '</a> </div> <div class="col-50"> <a class="button big green accept-terms-of-use"><b>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "notifications_event_accept", {
name: "localized",
hash: {},
data: n
}))) + '</b><span/></a> </div> </div> </div> </div> </div> </div> <!-- Premium benefits --> <div class="separator pro-benefits"> <div class="cols"> <div class="col-32"> <div class="benefit attachments"></div> </div> <div class="col-68" tabindex="0"> <h4>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "benefit_files_title", {
name: "localized",
hash: {},
data: n
}))) + "</h4> <p>" + s((o = t.localized || e && e.localized || r, o.call(e, "benefit_files_description", {
name: "localized",
hash: {},
data: n
}))) + '</p> </div> </div> <div class="cols"> <div class="col-32"> <div class="benefit assigning"></div> </div> <div class="col-68" tabindex="0"> <h4>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "benefit_assign_tasks_title", {
name: "localized",
hash: {},
data: n
}))) + "</h4> <p>" + s((o = t.localized || e && e.localized || r, o.call(e, "benefit_assign_tasks_description", {
name: "localized",
hash: {},
data: n
}))) + '</p> </div> </div> <div class="cols"> <div class="col-32"> <div class="benefit backgrounds"></div> </div> <div class="col-68" tabindex="0"> <h4>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "benefit_additional_backgrounds_title", {
name: "localized",
hash: {},
data: n
}))) + "</h4> <p>" + s((o = t.localized || e && e.localized || r, o.call(e, "benefit_additional_backgrounds_description", {
name: "localized",
hash: {},
data: n
}))) + '</p> </div> </div> <div class="cols"> <div class="col-32"> <div class="benefit subtasks"></div> </div> <div class="col-68" tabindex="0"> <h4>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "benefit_unlimited_subtasks_title", {
name: "localized",
hash: {},
data: n
}))) + "</h4> <p>" + s((o = t.localized || e && e.localized || r, o.call(e, "benefit_unlimited_subtasks_decription", {
name: "localized",
hash: {},
data: n
}))) + '</p> </div> </div> </div> <div class="separator center"> <a class="button nofloat cancel-benefits tabEnd" data-path="preferences/account" role="button" data-key-aria-label="social_sharing_button_later" tabindex="0">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "social_sharing_button_later", {
name: "localized",
hash: {},
data: n
}))) + "</a> </div> </div> ";
},
useData: !0
}
}), define("views/Pro/SubscriptionView", [ "application/runtime", "vendor/moment", "collections/ProductsCollection", "mixins/TermsOfUseMixin", "helpers/BlobHelper", "wunderbits/WBView", "template!pro/subscription" ], function(e, t, i, n, a, o, r, s) {
var l = e.$, d = o.prototype;
return o.extend({
template: r,
className: "pro-subscription",
events: {
"click .buy": "_buy",
"click .cancel-terms-of-use": "clickCancelTerms",
"click .accept-terms-of-use": "clickAcceptTerms"
},
initialize: function() {
var t = this;
n.applyTo(t), d.initialize.apply(t, arguments), t._online = e.env.isOnline(), t._isPro = e.user.attributes.pro, 
t.products = new i("/products/all"), t._isPro || t.bindConnectionEvents();
},
bindConnectionEvents: function() {
var t = this;
t._onlineHandler = t.bindTo(e.env, "online", function() {
t.delay("_fetchProducts", 500);
}), t._offlineHandler = t.bindTo(e.env, "offline", function() {
t._online = !1, t._renderButtons();
}), t.bindTo(e.user, "change:pro", function() {
e.user.attributes.pro && (t.unbindFrom(t._onlineHandler), t.unbindFrom(t._offlineHandler));
});
},
render: function() {
var t = this, i = e.user.toJSON();
return i.avatar = i.avatar || e.user.getAvatarURL(), d.render.call(t, {
user: i,
products: [ 0, 1 ]
}), t._renderButtons(), t._isPro || t._fetchProducts(), t.defer(t.renderTermsLinks), 
i.avatar && a.loadImage(i.avatar, t.$("img")), t;
},
_renderButtons: function() {
var t = this;
if (!t.destroyed) {
var i = t.$("button.buy").removeClass("loading disabled").removeAttr("disabled");
if (t._online && 0 !== t.products.length) {
var n = [ 7, 8 ];
n.forEach(function(e, n) {
var a = t.products.findWhere({
id: e
}), o = a && a.attributes;
if (o) {
var r = i.eq(n), s = o.title || o.name, d = l("<strong>" + o.price.formatted + "</strong>");
s = s.replace("{price}", d[0].outerHTML), r.html(s).attr("rel", o.pid);
}
});
} else i.html(e.language.getLabel("benefit_payment_service_unavailable").toString()), 
i.addClass("disabled").attr("disabled", "disabled"), t.renderLabels();
}
},
_fetchProducts: function() {
var t = this, i = e.sdk;
if (!t._isPro) {
t.$("button.buy").addClass("loading").append("<span/>");
var n = e.settings.attributes.account_locale || "en";
i.initialized.done(function() {
i.http.products.all(s, n).done(function(e) {
t.destroyed || (t.products.reset(e), t._online = !0, t._renderButtons());
}).fail(function() {
t.destroyed || (t._online = !1, t._renderButtons());
});
});
}
},
renderTermsLinks: function() {
var e = this, t = "http://www.wunderlist.com/", i = e.$(".accept-terms");
i.each(function() {
var e = l(this), i = e.find(".token_0"), n = e.find(".token_1");
if ("A" !== i.parent().prop("tagName")) {
var a = l('<a href="' + t + 'terms-of-use" target="_blank"></a>').append(i.clone());
i.replaceWith(a);
var o = l('<a href="' + t + 'privacy-policy" target="_blank"></a>').append(n.clone());
n.replaceWith(o);
}
});
},
showBenefits: function() {
var e = this;
e.$el.closest(".settings-content-inner-wrapper").find(".settings, .pro-status").addClass("hidden"), 
e.$el.removeClass("hidden");
},
hideBenefits: function() {
var e = this;
e.$el.closest(".settings-content-inner-wrapper").find(".settings, .pro-status").removeClass("hidden"), 
e.$el.addClass("hidden");
},
_buy: function(t) {
var i = this, n = t && l(t.target).closest("button")[0], a = t ? n && n.getAttribute("rel") : i.selectedProduct;
return e.settings.attributes.terms_accepted_at ? void (a ? (e.trigger("analytics:ProAccounts:clickedOnBuy", a), 
e.sdk.http.payments.generateURL(a, "web").done(function(t) {
if (t.uuid) {
e.trigger("analytics:ProAccounts:sentToAdyen", a);
var n = e.config.api.host + "/v1/payments/adyen/" + t.uuid;
i.delay(e.openUrl, 500, e, n);
}
}).fail(function() {
var t = arguments[1];
e.trigger("analytics:ProAccounts:paymentAPIAJAXFailure", t);
})) : e.trigger("analytics:ProAccounts:noProductDefinedForBuyButton")) : (i.selectedProduct = a, 
void i.$(".pro-section-terms-of-use, .buy-options, .teams").toggleClass("hidden"));
},
clickCancelTerms: function() {
var e = "preferences/account";
this.cancelTerms(e, !0);
},
clickAcceptTerms: function() {
var e = this;
e.acceptTerms({
callback: e._buy.bind(e)
});
}
});
}), define("/templates/pro/status.js", {
name: "pro/status",
data: {
"1": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return ' <h3 class="yay-pro">' + r((a = t.localized || e && e.localized || o, a.call(e, "settings_account_header_pro_account_$", "$settings_account_header_pro", {
name: "localized",
hash: {},
data: n
}))) + "</h3> <p>" + r((a = t.localized || e && e.localized || o, a.call(e, "settings_account_header_pro_description", {
name: "localized",
hash: {},
data: n
}))) + "</p> ";
},
"3": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return " <h3>" + r((a = t.localized || e && e.localized || o, a.call(e, "settings_account_header_account_$", "$settings_account_header_free", {
name: "localized",
hash: {},
data: n
}))) + "</h3> <p>" + r((a = t.localized || e && e.localized || o, a.call(e, "settings_account_pro_description", {
name: "localized",
hash: {},
data: n
}))) + '</p> <a class="button big left green go-pro" data-path="preferences/account/pro" data-key-aria-label="settings_upgrade_to_pro_label" data-aria-label="$benefit_name" tabindex="0"> <strong>' + r((a = t.localized || e && e.localized || o, 
a.call(e, "settings_upgrade_to_pro_label", "$benefit_name", {
name: "localized",
hash: {},
data: n
}))) + "</strong> </a> ";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a;
return a = t["if"].call(e, (a = e && e.user, null == a || a === !1 ? a : a.isPro), {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.program(3, n),
data: n
}), a || 0 === a ? a : "";
},
useData: !0
}
}), define("views/Pro/StatusView", [ "application/runtime", "wunderbits/WBView", "template!pro/status" ], function(e, t, i) {
return t.extend({
template: i,
className: "pro-status pro-section-style tabStart",
attributes: {
tabindex: 0
}
});
}), define("views/Settings/Controllers/SettingsICSViewController", [ "application/runtime", "wunderbits/WBViewController" ], function(e, t) {
var i = e.$;
return t.extend({
"implements": {
"click:ics-link": "onClickInput"
},
onClickInput: function(e) {
var t = i(e.currentTarget);
t.select();
}
});
}), define("/templates/settings/ICS.js", {
name: "settings/ICS",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return '<div class="separator"> <div class="ics"> <div class="cols"> <div class="col-32 text-right">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "ical_feed_label", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-68"> <input type="text" class="ics-link" data-key-value="ical_feed_fetching"/> </div> </div> <div class="cols"> <div class="col-32"></div> <div class="col-68"> <p><small>' + r((a = t.localized || e && e.localized || o, 
a.call(e, "ical_feed_description", {
name: "localized",
hash: {},
data: n
}))) + '</small></p> <p><small> <a href ="https://support.wunderlist.com/customer/portal/articles/1710196-how-to-show-wunderlist-tasks-in-google-calendar-ical-or-outlook" target="_blank">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "ical_feed_read_more_link", {
name: "localized",
hash: {},
data: n
}))) + "</a> </small></p> </div> </div> </div> </div>";
},
useData: !0
}
}), define("views/Settings/SettingsICSView", [ "application/runtime", "wunderbits/WBViewPresenter", "views/Settings/Controllers/SettingsICSViewController", "template!settings/ICS" ], function(e, t, i, n) {
var a = t.prototype;
return t.extend({
template: n,
"implements": [ i ],
className: "ICS",
emits: {
"click .ics-link": "click:ics-link"
},
initialize: function() {
var t = this;
t.sdk = e.sdk, a.initialize.apply(t, arguments);
},
render: function() {
var e = this;
return a.render.apply(e, arguments), e.getFeedUrl(), e;
},
getFeedUrl: function() {
var e = this;
e.sdk.getOutlet().ical_feed.getURL().done(e.updateFeedURL, e).fail(e.renderError, e);
},
updateFeedURL: function(e) {
var t = this;
if (!t.destroyed) {
var i = e.url, n = t.$(".ics-link");
n.val(i);
}
},
renderError: function() {
var t = this;
if (!t.destroyed) {
var i = e.language.getText("ical_feed_fetch_error"), n = t.$(".ics-link");
n.val(i);
}
}
});
}), define("models/InvoiceModel", [ "wunderbits/WBModel" ], function(e) {
return e.extend({
storeName: "invoices",
defaults: {
type: "Invoice"
},
idAttribute: "number"
});
}), define("collections/InvoiceCollection", [ "models/InvoiceModel", "./BaseCollection" ], function(e, t) {
return t.extend({
model: e
});
}), define("/templates/settings/invoiceDownloader.js", {
name: "settings/invoiceDownloader",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return '<div class="cols separator cols-no-indent"> <div class="col-32 text-right"> ' + r((a = t.localized || e && e.localized || o, 
a.call(e, "settings_label_invoices", {
name: "localized",
hash: {},
data: n
}))) + ' </div> <div class="col-40"> <span class="select"> <select class="invoices"> </select> </span> </div> <div class="col-28"> <a class="button full download-invoice"> ' + r((a = t.localized || e && e.localized || o, 
a.call(e, "button_download", {
name: "localized",
hash: {},
data: n
}))) + " </a> </div> </div>";
},
useData: !0
}
}), define("views/Settings/InvoiceDownloaderView", [ "application/runtime", "vendor/moment", "wunderbits/WBView", "collections/InvoiceCollection", "template!settings/invoiceDownloader" ], function(e, t, i, n, a) {
var o = e.$, r = e._, s = i.prototype;
return i.extend({
template: a,
className: "invoice-downloader separator hidden",
events: {
"change select.invoices": "updateDownloadLink"
},
initialize: function() {
var e = this;
e.invoices = new n("/invoices/all"), s.initialize.apply(e, arguments);
},
render: function() {
var t = this;
return e.sdk.getOutlet().invoices.all().done(t.deferredRender, t), t;
},
deferredRender: function(e) {
var t = this;
!t.destroyed && e.length && (s.render.apply(t, arguments), t.$el.removeClass("hidden"), 
t.invoices.reset(e), r.each(t.invoices.models, t.appendInvoiceOption.bind(t)), t.$(".invoices option").last().attr("selected", !0), 
t.updateDownloadLink());
},
appendInvoiceOption: function(e) {
var t = this, i = t.getUserFormattedDate(e.attributes.starts), n = t.getUserFormattedDate(e.attributes.expires_at), a = o('<option value="' + e.attributes.id + '">' + i + " - " + n + "</option>");
t.$("select.invoices").append(a);
},
updateDownloadLink: function(e) {
var t = this, i = e ? o(e.currentTarget).val() : t.$(".invoices option:selected")[0].value, n = t.invoices.findWhere({
id: parseInt(i, 10)
}), a = t.$(".button.download-invoice");
n && a.attr("href", n.attributes.link), n && a.attr("download", t.generateFileName(n));
},
generateFileName: function(e) {
var t = this, i = t.getUserFormattedDate(e.attributes.starts).replace(/\D+/g, "_"), n = t.getUserFormattedDate(e.attributes.expires_at).replace(/\D+/g, "_");
return "wunderlist_invoice_" + i + "-" + n;
},
getUserFormattedDate: function(i) {
var n = e.settings.attributes.date_format;
return t(i, "MM-DD-YYYY").format(n);
}
});
}), define("views/Settings/RestoreDataViewController", [ "application/runtime", "wunderbits/helpers/SafeParse", "collections/ListCollection", "wunderbits/WBViewController" ], function(e, t, i, n) {
var a = e.global;
return n.extend({
"implements": {
"click:restore": "_onClickRestore",
"change:input": "_onFileSelected"
},
_onClickRestore: function(e) {
var t = this;
e && e.preventDefault(), e && e.stopPropagation(), t.view.input && t.view.input.click();
},
_onFileSelected: function(e) {
var t = this;
e.target.files && e.target.files.length && t.uploadBackupFile(e.target.files[0]);
},
uploadBackupFile: function(i) {
var n = this, o = a.FileReader, r = new o(), s = e.sdk;
r.onload = function() {
var e = t.json(this.result);
e ? (n.view.startSpinner(), n.view.updateText(), s.http["import"].create(e).done(n.onSuccess, n).fail(n.onError, n).always(function() {
n.view.resetFileInput();
})) : n.onError();
}, r.readAsText(i);
},
onSuccess: function() {
var t = this;
e.trigger("analytics:Importer:addedBackupData"), t.view.stopSpinner(), t.view.trigger("processing:complete");
},
onError: function() {
var t = this;
e.trigger("analytics:Importer:backupDataFailed"), t.view.stopSpinner(), t.view.showError();
}
});
}), define("/templates/settings/restoreData.js", {
name: "settings/restoreData",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return '<a class="button full restore-data" role="button" data-key-aria-label="settings_account_restore_backup" tabindex="0"><span class="dark"/> ' + r((a = t.localized || e && e.localized || o, 
a.call(e, "settings_account_restore_backup", {
name: "localized",
hash: {},
data: n
}))) + ' </a> <input type="file" class="hidden" accept="application/json" >';
},
useData: !0
}
}), define("views/Settings/RestoreDataView", [ "application/runtime", "wunderbits/WBViewPresenter", "views/Settings/RestoreDataViewController", "template!settings/restoreData" ], function(e, t, i, n) {
var a = t.prototype;
return t.extend({
template: n,
"implements": [ i ],
className: "restoreData",
emits: {
"click .restore-data": "click:restore",
"change input": "change:input"
},
initialize: function() {
var e = this;
a.initialize.apply(e, arguments);
},
render: function() {
var e = this;
return a.render.apply(e, arguments), e.input = e.$("input"), e;
},
resetFileInput: function() {
var e = this;
e.render();
},
startSpinner: function() {
var e = this;
e.$(".restore-data").addClass("disabled loading");
},
stopSpinner: function() {
var e = this;
e.$(".restore-data").removeClass("disabled loading");
},
showError: function() {
var e = this;
e.trigger("processing:error");
},
updateText: function() {
var e = this;
e.trigger("processing:backupData");
}
});
}), define("views/Settings/Controllers/SettingsAccountViewController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/WBValidationHelper", "wunderbits/WBModalViewController" ], function(e, t, i, n, a) {
var o = e.$, r = {
"cancel-password": {
confirm: "#save-password",
refocus: ".old-password"
},
"cancel-email": {
confirm: "#save-email",
refocus: "#edit-email"
},
"cancel-delete-account": {
confirm: "#delete-account",
refocus: ".delete-password"
},
"save-email": {
refocus: "#edit-email"
},
"save-password": {
refocus: ".old-password"
},
"delete-account": {
refocus: ".delete-password"
}
};
return n.extend({
"implements": {
"click:showDelete": "onShowDeleteAccount",
"click:cancelDeleteAccount": "onCancelDeleteAccount",
"click:changeEmail": "onChangeEmail",
"click:cancelEmail": "onCancelChangeEmail",
"click:saveEmail": "onSaveEmail",
"click:changePassword": "onChangePassword",
"click:cancelPassword": "onCancelPassword",
"click:savePassword": "onSavePassword",
"click:deleteAccount": "onDeleteAccount",
"click:goPro": "closeAllEdits",
"toggle:confirmation": "onToggleConfirmation",
"click:confirmCancel": "cancelProAutoRenew",
"blur:editFullName": "onSaveFullName",
keydown: "onKeydown",
"keydown:cancelEdit": "onCancelEditKeydown",
"keydown:confirmEdit": "onConfirmEditKeydown",
"keyup:confirmPassword": "checkForValidEmailOnPasswordConfirm",
"keyup:delete": "onValidateDeleteAccount",
"keyup:password": "onCheckPasswordMatch",
"force:window:resize": "triggerWindowResize",
"check:email": "checkForValidEmail"
},
onKeydown: function(e) {
var i = this, n = o(e.currentTarget), r = n.attr("id"), s = {
"edit-full-name": "FullName",
"edit-email": "Email",
"edit-email-pw-confirm": "Email",
"confirm-password": "Password"
};
e.which === t.enter ? i["onSave" + s[r]]() : e.which === t.esc && i.view.resetEditInputs(e), 
"edit-email" === r && i.checkForValidEmail(a, n.val());
},
onCancelEditKeydown: function(e) {
var i = this, n = i.getCancelSaveData(e);
n && e.which === t.tab && !e.shiftKey && i.view.$(n.confirm).attr("disabled") && i.refocusAndStop(n.refocus, e);
},
onConfirmEditKeydown: function(e) {
var i = this, n = i.getCancelSaveData(e);
e.which !== t.tab || e.shiftKey || i.refocusAndStop(n.refocus, e);
},
getCancelSaveData: function(e) {
var t, i = o(e.target), n = i.attr("id");
return t = r[n];
},
refocusAndStop: function(e, t) {
var i = this;
i.view.$(e).focus(), i.stopEventCold(t);
},
onShowDeleteAccount: function() {
this.view.showDeleteAccount();
},
onCancelDeleteAccount: function() {
this.view.hideDeleteAccount();
},
triggerWindowResize: function() {
o(window).trigger("resize");
},
onChangeEmail: function() {
this.view.showChangeEmail();
},
onCancelChangeEmail: function() {
this.view.hideChangeEmail();
},
onCheckPasswordMatch: function() {
var e = this.view, t = e.$(".new-password").val(), i = e.$(".confirm-password").val(), n = t === i && "" !== t && "" !== i;
e.toggleSavePasswordButton(n);
},
onToggleConfirmation: function() {
this.view.toggleConfirmation();
},
checkForValidEmailOnPasswordConfirm: function() {
var e = this, t = e.view.$("#edit-email").val();
e.checkForValidEmail(a, t);
},
checkForValidEmail: function(e, t) {
var n = this;
t = t ? t : e && e.target ? o(e.target).val() : null, n.view.updateEmailInputs(i.isValidEmail(t));
},
onSaveEmail: function() {
var t = this.view, i = t.$("#edit-email").val(), n = t.$(".password-confirm input").val();
e.user.changeEmail(i, n, {
success: t.hideChangeEmail.bind(t),
error: t.renderEmailError.bind(t)
});
},
onSaveFullName: function() {
var t = this.view, i = t.$el.find("#edit-full-name"), n = i.val(), a = e.user.attributes.name;
n !== a && n.length ? e.user.changeName({
name: n
}) : i.val(a);
},
onChangePassword: function() {
this.view.showChangePassword();
},
onCancelPassword: function() {
this.view.hideChangePassword();
},
cancelProAutoRenew: function() {
var t = this, i = t.view, n = i.$(".confirm-cancel");
n.addClass("loading");
var a = function() {
t.bindOnceTo(e, "sync:ended", function() {
n.removeClass("loading"), i.deferredRender();
});
}, o = function() {
n.removeClass("loading"), i.$(".manage-account-error").removeClass("hidden");
};
e.user.cancelProAutoRenew(a, o);
},
onSavePassword: function() {
var t = this.view;
if (!t.$("#save-password").hasClass("disabled")) {
var i = t.$(".change-password-buttons .new-password").val(), n = t.$(".change-password-buttons .confirm-password").val(), a = t.$(".show-password-buttons .old-password").val();
e.user.changePassword(i, n, a, {
success: function() {
t.destroyed || (t.hidePasswordError(), t.hideChangePassword());
},
error: function() {
!t.destroyed && t.showPasswordError();
}
});
}
},
onDeleteAccount: function() {
var t = this.view, i = t.$(".delete-password").val();
t.$("#delete-account").addClass("loading"), e.user.deleteUser(i, {
error: t.renderDeleteAccountError.bind(t)
});
},
onValidateDeleteAccount: function() {
var t = this.view, i = t.$(".delete-password").val(), n = t.$(".delete-confirm").val(), a = e.language.getText("settings_account_delete_confirmation_text"), o = "" !== i && n.toLowerCase() === a.toLowerCase();
t.toggleDeleteButton(o);
},
closeAllEdits: function() {
this.view.closeAllEdits();
},
stopEventCold: function(e) {
e.preventDefault(), e.stopPropagation();
}
});
}), define("views/Settings/Controllers/SettingsAccountViewOAuthController", [ "application/runtime", "backend/Sync/DataProcessors/Incoming", "collections/ServiceCollection", "helpers/Auth/facebook", "helpers/Auth/google", "wunderbits/WBModalViewController" ], function(e, t, i, n, a, o) {
var r = e.config, s = e.global, l = r.auth && r.auth.host || "//" + s.location.host, d = new t(), c = new i("/services/all");
return o.extend({
"implements": {
"click:facebook:disconnect": "onDisconnectFacebook",
"click:facebook:connect": "onConnectFacebook",
"click:google:connect": "onConnectGoogle",
"click:google:disconnect": "onDisconnectGoogle"
},
onConnectFacebook: function() {
var t = this.view, i = !0;
e.trigger("analytics:Preferences:connectFacebook"), t.toggleConnectButtonStatus("facebook", "connecting"), 
e.env.isChromeApp() ? n.getFacebookOAuthToken("connect/facebook/", i).done(this.saveService).done(function() {
e.trigger("sync:start");
}).fail(function() {
t.toggleConnectButtonStatus("facebook");
}) : s.location = l + "/connect/facebook";
},
onDisconnectFacebook: function() {
var t = this.view;
t.toggleConnectButtonStatus("facebook"), t.facebookService && t.facebookService.destroy(), 
t.updateServiceButtons(), e.trigger("analytics:Preferences:disconnectFacebook");
},
onConnectGoogle: function() {
var t = this, i = t.view, n = !0;
e.trigger("analytics:Preferences:connectGoogle"), i.toggleConnectButtonStatus("google", "connecting"), 
e.env.isChromeApp() ? a.connectWithGoogle("googleOAuthConnect", n).done(this.saveService).done(function() {
e.trigger("sync:start");
}).fail(function() {
i.toggleConnectButtonStatus("google");
}) : s.location = l + "/connect/google";
},
onDisconnectGoogle: function() {
var t = this.view;
t.toggleConnectButtonStatus("google"), t.googleService && t.googleService.destroy(), 
t.updateServiceButtons(), e.trigger("analytics:Preferences:disconnectGoogle");
},
saveService: function(e) {
e = d.processData(e), c.add(e, {
merge: !0,
fromSync: !0
});
}
});
}), define("backend/export", [ "application/runtime", "wunderbits/helpers/strings", "project!core/WBSingleton" ], function(e, t, i) {
var n = e.global;
return i.extend({
fetchAllTheData: function() {
return e.sdk.http["export"].all();
},
forceDownload: function(t) {
var i = this;
if (i.supportsBlob()) {
var n = i.getBlobLink(t), a = document.createEvent("Event");
a.initEvent("click", !0, !0), e.trigger("analytics:Exporter:createdBackup"), n.dispatchEvent(a);
}
},
getBlobLink: function(e) {
var i = this;
if (i.supportsBlob()) {
var a = JSON.stringify(e), o = new n.Blob([ a ], {
type: "application/json"
}), r = (window.URL || window.webkitURL).createObjectURL(o), s = window.document.createElement("a");
s.href = r;
var l = t.dateString();
return s.download = "wunderlist-" + l + ".json", s;
}
},
supportsBlob: function() {
return (window.URL || !window.webkitURL) && window.Blob;
}
});
}), define("views/Settings/Controllers/SettingsAccountViewExportController", [ "application/runtime", "backend/export", "wunderbits/WBModalViewController" ], function(e, t, i) {
var n = e.$;
return i.extend({
"implements": {
"click:export": "export"
},
"export": function() {
var i = this, a = i.view;
if (!i.exporting && !e.env.isIE()) {
i.exporting = !0, i.exportLinkClickBind && i.unbindFrom(i.exportLinkClickBind), 
i.exportLinkContextmenuBind && i.unbindFrom(i.exportLinkContextmenuBind);
var o = a.$(".export"), r = a.$(".export-start"), s = a.$(".export-download"), l = r.text();
i.view.trigger("backup:error:hide"), r.addClass("disabled").text(e.language.getText("settings_account_fetching_data")), 
s.remove(), t.fetchAllTheData().fail(function() {
i.exporting = !1, r.removeClass("disabled").text(l), i.view.trigger("backup:error:show");
}).done(function(a) {
e.trigger("analytics:Backup:ExportGenerated");
var s;
if (r.addClass("hidden"), e.env.isChrome() || e.env.isFirefox()) s = n(t.getBlobLink(a)).text(e.language.getText("settings_account_click_to_download_backup")), 
i.exportLinkClickBind = i.bindTo(s, "click", function() {
s.addClass("hidden"), r.removeClass("hidden"), e.trigger("analytics:Backup:ExportDownloaded", "click");
}); else {
var l = JSON.stringify(a), d = "data:application/json," + encodeURIComponent(l);
s = n("<a/>").attr("href", d).text(e.language.getText("settings_account_right_click_and_save_as")), 
i.exportLinkClickBind = i.bindTo(s, "click", function(e) {
return e.preventDefault(), !1;
}), i.exportLinkContextmenuBind = i.bindTo(s, "contextmenu", function() {
var t = n(this);
i.delay(function() {
t.addClass("hidden"), r.removeClass("hidden");
}, 1e3), e.trigger("analytics:Backup:ExportDownloaded", "rightClick");
});
}
o.append(s), s.addClass("button full blue export-download").removeClass("hidden"), 
r.removeClass("disabled").text("Create Backup"), i.exporting = !1;
});
}
}
});
}), define("/templates/settings/settingsAccount.js", {
name: "settings/settingsAccount",
data: {
"1": function() {
return ' <span class="icon pro"></span> ';
},
"3": function(e, t, i, n) {
var a, o = " ";
return a = t.unless.call(e, e && e.isNodeWebkit, {
name: "unless",
hash: {},
fn: this.program(4, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), o + " ";
},
"4": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return ' <div class="separator account-backup-settings" data-key-aria-label="settings_account_backup_description" tabindex="0"> <div class="cols"> <div class="col-32 text-right">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "settings_account_account_backup", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-35 export"> <a class="button full export-start" role="button" data-key-aria-label="settings_account_create_backup" tabindex="0"> ' + r((a = t.localized || e && e.localized || o, 
a.call(e, "settings_account_create_backup", {
name: "localized",
hash: {},
data: n
}))) + ' </a> </div> <div class="col-33 import"> </div> </div> <div class="cols back-up-error hidden"> <div class="col-32"></div> <div class="col-68">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "api_error_service_down", {
name: "localized",
hash: {},
data: n
}))) + '</div> </div> <div class="cols backup-feedback hidden"> <div class="col-32"></div> <div class="col-68">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "settings_account_data_is_being_processed", {
name: "localized",
hash: {},
data: n
}))) + '</div> </div> <div class="cols backup-complete hidden"> <div class="col-32"></div> <div class="col-68">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "settings_account_import_complete", {
name: "localized",
hash: {},
data: n
}))) + '</div> </div> <div class="cols"> <div class="col-32 text-right"></div> <div class="col-68"> <small> ' + r((a = t.localized || e && e.localized || o, 
a.call(e, "settings_account_backup_description", {
name: "localized",
hash: {},
data: n
}))) + " </small> </div> </div> </div> ";
},
"6": function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = ' <div class="separator pro-account-settings"> <div class="cols pro-account-status"> ';
return a = t["if"].call(e, e && e.adyenSubscription, {
name: "if",
hash: {},
fn: this.program(7, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += ' </div> <div class="cancelation-options closed"> <div class="cols"> <div class="col-32"></div> <div class="col-68"> <h3>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "setting_heading_cancel_subscription", {
name: "localized",
hash: {},
data: n
}))) + '</h3> <p class="small">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "setting_description_cancel_subscription", {
name: "localized",
hash: {},
data: n
}))) + '</p> <p class="manage-account-error error-message hidden"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_manage_subscription_error", {
name: "localized",
hash: {},
data: n
}))) + ' </p> </div> </div> <div class="cols small"> <div class="col-32"></div> <div class="col-40"> <div class="cols"> <div class="col-50"> <button class="return-cancel full" data-key-aria-label="button_no" tabindex="0">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_no", {
name: "localized",
hash: {},
data: n
}))) + '</button> </div> <div class="col-50"> <button class="confirm-cancel full red" data-key-aria-label="button_yes" tabindex="0">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_yes", {
name: "localized",
hash: {},
data: n
}))) + '<span/></button> </div> </div> </div> <div class="col-28"></div> </div> </div> ', 
a = t["if"].call(e, e && e.isGroupProduct, {
name: "if",
hash: {},
fn: this.program(20, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += " ", a = t.unless.call(e, e && e.isGroupProduct, {
name: "unless",
hash: {},
fn: this.program(35, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l + " </div> ";
},
"7": function(e, t, i, n) {
var a, o = " ";
return a = t.unless.call(e, e && e.isCanceled, {
name: "unless",
hash: {},
fn: this.program(8, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), o += " ", a = t["if"].call(e, e && e.isGroupProduct, {
name: "if",
hash: {},
fn: this.program(12, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), o + " ";
},
"8": function(e, t, i, n) {
var a, o = " ";
return a = t.unless.call(e, e && e.isGroupProduct, {
name: "unless",
hash: {},
fn: this.program(9, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), o + " ";
},
"9": function(e, t, i, n) {
var a, o = " ";
return a = t.unless.call(e, e && e.isTelekomPromo, {
name: "unless",
hash: {},
fn: this.program(10, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), o + " ";
},
"10": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return ' <div class="col-32 text-right pro-label"> ' + r((a = t.localized || e && e.localized || o, 
a.call(e, "settings_label_pro_account", {
name: "localized",
hash: {},
data: n
}))) + ' </div> <div class="col-40"> <button id="cancel-pro" class="full" data-key-aria-label="setting_label_cancel_subscription" tabindex="0"> ' + r((a = t.localized || e && e.localized || o, 
a.call(e, "setting_label_cancel_subscription", {
name: "localized",
hash: {},
data: n
}))) + ' </button> </div> <div class="col-28"></div> ';
},
"12": function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = ' <div class="col-32 text-right pro-label"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_label_pro_account", {
name: "localized",
hash: {},
data: n
}))) + " </div> ";
return a = t["if"].call(e, e && e.isAdmin, {
name: "if",
hash: {},
fn: this.program(13, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += " ", a = t.unless.call(e, e && e.isAdmin, {
name: "unless",
hash: {},
fn: this.program(15, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l + " ";
},
"13": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return ' <div class="col-40"> <small> ' + r((a = t.localized || e && e.localized || o, 
a.call(e, "settings_label_purchased_from_$", "6Wunderkinder", {
name: "localized",
hash: {},
data: n
}))) + ' </small> </div> <div class="col-28"></div> ';
},
"15": function(e, t, i, n) {
var a, o = ' <div class="col-68"> <small> ';
return a = t["if"].call(e, e && e.isTelekomPromo, {
name: "if",
hash: {},
fn: this.program(16, n),
inverse: this.program(18, n),
data: n
}), (a || 0 === a) && (o += a), o + " </small> </div> ";
},
"16": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return " " + r((a = t.localized || e && e.localized || o, a.call(e, "settings_label_purchased_from_$", "Telekom", {
name: "localized",
hash: {},
data: n
}))) + " ";
},
"18": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return " " + r((a = t.localized || e && e.localized || o, a.call(e, "settings_label_purchased_from_$_by_$", "6Wunderkinder", e && e.adminName, {
name: "localized",
hash: {},
data: n
}))) + " ";
},
"20": function(e, t, i, n) {
var a, o = " ";
return a = t["if"].call(e, e && e.isAdmin, {
name: "if",
hash: {},
fn: this.program(21, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), o += " ", a = t["if"].call(e, e && e.isMember, {
name: "if",
hash: {},
fn: this.program(30, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), o + " ";
},
"21": function(e, t, i, n) {
var a, o = ' <div class="cols"> <div class="col-32 text-right"/> <div class="col-68"> ';
return a = t["if"].call(e, e && e.billOn, {
name: "if",
hash: {},
fn: this.program(22, n),
inverse: this.program(25, n),
data: n
}), (a || 0 === a) && (o += a), o + " </div> </div> ";
},
"22": function(e, t, i, n) {
var a, o = " ";
return a = t.unless.call(e, e && e.isTelekomPromo, {
name: "unless",
hash: {},
fn: this.program(23, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), o + " ";
},
"23": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression, s = "function";
return ' <p class="pro-account-billing"> <small> ' + r((a = t.localized || e && e.localized || o, 
a.call(e, "setting_label_next_billing_date", {
name: "localized",
hash: {},
data: n
}))) + " " + r((a = t.billOn || e && e.billOn, typeof a === s ? a.call(e, {
name: "billOn",
hash: {},
data: n
}) : a)) + " (" + r((a = t.subscriptionType || e && e.subscriptionType, typeof a === s ? a.call(e, {
name: "subscriptionType",
hash: {},
data: n
}) : a)) + ") </small> </p> ";
},
"25": function(e, t, i, n) {
var a, o = ' <p class="pro-account-expire"> <small> ';
return a = t["if"].call(e, e && e.expiresRelative, {
name: "if",
hash: {},
fn: this.program(26, n),
inverse: this.program(28, n),
data: n
}), (a || 0 === a) && (o += a), o + " </small> </p> ";
},
"26": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return " " + r((a = t.localized || e && e.localized || o, a.call(e, "settings_payment_info_expires_$_relative", e && e.expiresRelative, {
name: "localized",
hash: {},
data: n
}))) + " ";
},
"28": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression, s = "function";
return " " + r((a = t.localized || e && e.localized || o, a.call(e, "settings_payment_info_expires_$_absolute", e && e.expiresIn, {
name: "localized",
hash: {},
data: n
}))) + " " + r((a = t.expiresOn || e && e.expiresOn, typeof a === s ? a.call(e, {
name: "expiresOn",
hash: {},
data: n
}) : a)) + " ";
},
"30": function(e, t, i, n) {
var a, o = ' <div class="cols"> <div class="col-32 text-right"/> <div class="col-68"> ';
return a = t["if"].call(e, e && e.billOn, {
name: "if",
hash: {},
fn: this.program(31, n),
inverse: this.program(33, n),
data: n
}), (a || 0 === a) && (o += a), o + " </div> </div> ";
},
"31": function() {
return " ";
},
"33": function() {
return ' <p class="pro-account-expire"> <small/> </p> ';
},
"35": function(e, t, i, n) {
var a, o = ' <div class="cols ';
return a = t.unless.call(e, e && e.adyen_subscription, {
name: "unless",
hash: {},
fn: this.program(36, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), o += '"> <div class="col-32 text-right"> ', a = t.unless.call(e, e && e.adyenSubscription, {
name: "unless",
hash: {},
fn: this.program(38, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), o += " ", a = t["if"].call(e, e && e.isCanceled, {
name: "if",
hash: {},
fn: this.program(38, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), o += ' </div> <div class="col-68"> <p class="pro-account-platform"> <small> ', 
a = t["if"].call(e, e && e.isTelekomPromo, {
name: "if",
hash: {},
fn: this.program(16, n),
inverse: this.program(40, n),
data: n
}), (a || 0 === a) && (o += a), o += " </small> </p> ", a = t["if"].call(e, e && e.billOn, {
name: "if",
hash: {},
fn: this.program(23, n),
inverse: this.program(25, n),
data: n
}), (a || 0 === a) && (o += a), o += " ", a = t["if"].call(e, e && e.isManageEnabled, {
name: "if",
hash: {},
fn: this.program(42, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), o + " </div> </div> ";
},
"36": function() {
return "top";
},
"38": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return " " + r((a = t.localized || e && e.localized || o, a.call(e, "settings_label_pro_account", {
name: "localized",
hash: {},
data: n
}))) + " ";
},
"40": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return " " + r((a = t.localized || e && e.localized || o, a.call(e, "settings_label_purchased_from_$", e && e.store, {
name: "localized",
hash: {},
data: n
}))) + " ";
},
"42": function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = "function";
return ' <p class="pro-account-manage" data-key-aria-label="settings_manage_subscription_button" tabindex="0"> <small> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_manage_subscription_button", {
name: "localized",
hash: {},
data: n
}))) + ': <a class="manage" href="' + s((a = e && e.user, a = null == a || a === !1 ? a : a.product, 
a = null == a || a === !1 ? a : a.manage_link, typeof a === l ? a.apply(e) : a)) + '" target="_blank" data-key-aria-label="store" tabindex="0">' + s((o = t.store || e && e.store, 
typeof o === l ? o.call(e, {
name: "store",
hash: {},
data: n
}) : o)) + "</a> </small> </p> ";
},
"44": function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = ' <!-- Google --> <div class="separator google-connect-settings"> <div class="cols google"> <div class="col-32 text-right">Google</div> <div class="col-40"> <button class="full connect ';
return a = t["if"].call(e, e && e.connectedToGoogle, {
name: "if",
hash: {},
fn: this.program(45, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '" role="button" data-key-aria-label="button_connect" tabindex="0"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_connect", {
name: "localized",
hash: {},
data: n
}))) + ' </button> <button class="full disconnect ', a = t.unless.call(e, e && e.connectedToGoogle, {
name: "unless",
hash: {},
fn: this.program(45, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '" role="button" data-key-aria-label="button_disconnect" tabindex="0"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_disconnect", {
name: "localized",
hash: {},
data: n
}))) + ' </button> </div> <div class="col-28"></div> </div> </div> <!-- Facebook --> <div class="separator facebook-connect-settings"> <div class="facebook"> <div class="cols"> <div class="col-32 text-right">Facebook</div> <div class="col-40"> <button class="full connect ', 
a = t["if"].call(e, e && e.connectedToFacebook, {
name: "if",
hash: {},
fn: this.program(45, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '" role="button" data-key-aria-label="button_connect_facebook" tabindex="0"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_connect", {
name: "localized",
hash: {},
data: n
}))) + ' </button> <button class="full disconnect ', a = t.unless.call(e, e && e.connectedToFacebook, {
name: "unless",
hash: {},
fn: this.program(45, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l + '" role="button" data-key-aria-label="button_disconnect" tabindex="0"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_disconnect", {
name: "localized",
hash: {},
data: n
}))) + ' </button> </div> <div class="col-28"></div> </div> <div class="cols"> <div class="col-32"></div> <div class="col-68"> <span class="icon facebook-icon"></span> <p><small>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_account_connect_facebook_account", {
name: "localized",
hash: {},
data: n
}))) + "</small></p> </div> </div> </div> </div> ";
},
"45": function() {
return "hidden";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = "function", d = '<div class="settings"> <!-- Picture --> <div class="separator"> <div class="cols"> <div class="col-32"> <div class="avatar-frame"> <div class="avatar large hover choose"> ';
return a = t["if"].call(e, (a = e && e.user, null == a || a === !1 ? a : a.isPro), {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d += ' <span class="icon options"></span> <img /> <div class="progress-bar-wrapper hidden"><span></span></div> <div class="drop-message"><span>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_account_drop_image", {
name: "localized",
hash: {},
data: n
}))) + '</span></div> <div class="message error hidden"><span>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "file_uploaded_failed", {
name: "localized",
hash: {},
data: n
}))) + '</span></div> <div class="state loading spinner"><span class="dark"/></div> </div> <div class="avatar-upload"> <div class="drop-zone"></div> </div> </div> </div> <div class="col-68"> <div class="pro-status-wrapper"></div> </div> </div> </div> <div class="separator basic-account-settings"> <!-- Full Name --> <div class="cols"> <div class="col-32 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "label_name", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-68"> <input type="text" id="edit-full-name" data-key-aria-label="label_name" data-key-placeholder="label_name" value="' + s((a = e && e.user, 
a = null == a || a === !1 ? a : a.name, typeof a === l ? a.apply(e) : a)) + '" initial-value="' + s((o = t.name || e && e.name, 
typeof o === l ? o.call(e, {
name: "name",
hash: {},
data: n
}) : o)) + '" tabindex="0"/> </div> </div> <!-- Email --> <div class="cols"> <div class="col-32 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "label_email", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-40"> <input type="text" id="edit-email" data-key-aria-label="label_email" data-key-placeholder="label_email" value="' + s((a = e && e.user, 
a = null == a || a === !1 ? a : a.email, typeof a === l ? a.apply(e) : a)) + '" initial-value="' + s((o = t.email || e && e.email, 
typeof o === l ? o.call(e, {
name: "email",
hash: {},
data: n
}) : o)) + '" disabled tabindex="0"/> </div> <div class="col-28"> <button id="change-email" class="full" data-key-aria-label="settings_account_change_email" tabindex="0"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_account_change_email", {
name: "localized",
hash: {},
data: n
}))) + ' </button> </div> </div> <!-- Password for email confirm --> <div class="cols password-confirm"> <div class="col-32 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "label_password", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-40"> <input type="password" id="edit-email-pw-confirm" data-key-aria-label="label_password" disabled tabindex="0"/> </div> <div class="col-28"></div> </div> <!-- Change Email --> <div class="cols change-email-buttons"> <div class="col-32 text-right"></div> <div class="col-40"> <div class="cols email-error error-message"> <div class="col-100">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "api_error_incorrect_password", {
name: "localized",
hash: {},
data: n
}))) + '</div> </div> <div class="cols"> <div class="col-50"> <button class="full" id="cancel-email" data-key-aria-label="button_cancel" tabindex="0"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_cancel", {
name: "localized",
hash: {},
data: n
}))) + ' </button> </div> <div class="col-50"> <button class="full blue disabled" id="save-email" disabled data-key-aria-label="button_save" tabindex="0" > ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_save", {
name: "localized",
hash: {},
data: n
}))) + ' </button> </div> </div> </div> <div class="col-28"></div> </div> <!-- Change Password --> <div class="cols show-password-buttons"> <div class="col-32 text-right"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "label_password", {
name: "localized",
hash: {},
data: n
}))) + ' </div> <div class="col-40"> <input type="password" class="old-password" data-key-placeholder="settings_account_current_password" data-key-aria-label="settings_account_current_password" tabindex="0"/> <button id="change-password" class="full" data-key-aria-label="settings_account_change_password" tabindex="0"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_account_change_password", {
name: "localized",
hash: {},
data: n
}))) + ' </button> </div> <div class="col-28"></div> </div> <div class="cols change-password-buttons"> <div class="col-32"/> <div class="col-40"> <div class="cols"> <div class="col-100"> <input type="password" class="new-password" data-key-placeholder="settings_account_new_password" data-key-aria-label="settings_account_new_password" tabindex="0"/> </div> </div> <div class="cols"> <div class="col-100"> <input id="confirm-password" type="password" class="confirm-password" data-key-placeholder="settings_account_repeat_new_password" data-key-aria-label="settings_account_repeat_new_password" tabindex="0"/> </div> </div> <div class="cols change-password-error error-message"> <div class="col-100"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_account_change_password_error", {
name: "localized",
hash: {},
data: n
}))) + ' </div> </div> <div class="cols"> <div class="col-50"> <button class="full" id="cancel-password" data-key-aria-label="button_cancel" tabindex="0"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_cancel", {
name: "localized",
hash: {},
data: n
}))) + ' </button> </div> <div class="col-50"> <button class="full blue" id="save-password" data-key-aria-label="button_save" tabindex="0"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_save", {
name: "localized",
hash: {},
data: n
}))) + ' </button> </div> </div> </div> <div class="col-28"></div> </div> </div> ', 
a = t.unless.call(e, e && e.isIE, {
name: "unless",
hash: {},
fn: this.program(3, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d += " <!-- Pro Account Status --> ", a = t["if"].call(e, (a = e && e.user, 
null == a || a === !1 ? a : a.isPro), {
name: "if",
hash: {},
fn: this.program(6, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d += " ", a = t["if"].call(e, e && e.showSocialConnectButtons, {
name: "if",
hash: {},
fn: this.program(44, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d + ' <!-- ICS --> <div class="ics-container"></div> <!-- Delete Account --> <div class="separator noline delete-form" tabindex="0"> <div class="cols delete-account-heading"> <div class="col-30"> <div class="icon wunderlist-icon"></div> </div> <div class="col-70"> <h3>' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_account_delete_account_confirm", {
name: "localized",
hash: {},
data: n
}))) + "</h3> <p>" + s((o = t.localized || e && e.localized || r, o.call(e, "settings_account_delete_account_confirm_text", {
name: "localized",
hash: {},
data: n
}))) + '</p> </div> </div> <div class="cols delete-account-password"> <div class="col-50 text-right"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_account_current_password", {
name: "localized",
hash: {},
data: n
}))) + ' </div> <div class="col-50"> <input type="password" class="delete-password" data-key-aria-label="settings_account_current_password" tabindex="0"/> </div> </div> <div class="cols delete-account-confirm"> <div class="col-50 text-right"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_account_delete_confirmation", {
name: "localized",
hash: {},
data: n
}))) + ' </div> <div class="col-50"> <input type="text" class="delete-confirm" data-key-aria-label="settings_account_delete_confirmation" tabindex="0"/> </div> </div> <div class="cols delete-password-error error-message"> <div class="col-100 text-right"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "api_error_incorrect_password", {
name: "localized",
hash: {},
data: n
}))) + ' </div> </div> <div class="cols text-right"> <div class="col-50"></div> <div class="col-25"> <button class="full" id="cancel-delete-account" data-key-aria-label="button_cancel" tabindex="0"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_cancel", {
name: "localized",
hash: {},
data: n
}))) + ' </button> </div> <div class="col-25"> <button class="full red disabled" id="delete-account" disabled data-key-aria-label="button_delete" tabindex="0"><span/> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_delete", {
name: "localized",
hash: {},
data: n
}))) + ' </button> </div> </div> </div> <div class="separator show-delete-wrapper"> <div class="cols"> <div class="col-100 center"> <button class="red show-delete tabEnd" data-key-aria-label="settings_account_delete_account" tabindex="0"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_account_delete_account", {
name: "localized",
hash: {},
data: n
}))) + " </button> </div> </div> </div> </div> ";
},
useData: !0
}
}), define("/styles/settings/settingsAccount.js", {
name: "settings/settingsAccount",
data: '.dialog .avatar-frame{width:120px;height:120px;-webkit-box-shadow:0 1px 6px rgba(0,0,0,0.35),0 0 0 1px rgba(0,0,0,0.05);box-shadow:0 1px 6px rgba(0,0,0,0.35),0 0 0 1px rgba(0,0,0,0.05);-webkit-border-radius:5px;border-radius:5px;padding:4px;margin-left:auto;margin-right:10px;}.dialog .avatar-frame.small{height:60px;width:60px}.dialog .avatar-frame .avatar .options{position:absolute;bottom:4px;right:4px;opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0);z-index:100}.dialog .avatar-frame .avatar input{left:auto !important;right:0 !important}.dialog .avatar-frame .avatar:before{position:absolute;background:transparent;width:120px;height:120px}.dialog .avatar-frame .avatar.hover:hover:before{background:rgba(0,0,0,0.3)}.dialog .avatar-frame .avatar.hover:hover .options{position:absolute;bottom:4px;right:4px;opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0);z-index:100}.dialog .avatar-frame .avatar.hover:hover:before{position:absolute;background:transparent;width:120px;height:120px;-webkit-box-shadow:inset 0 0 3px rgba(0,0,0,0.5);box-shadow:inset 0 0 3px rgba(0,0,0,0.5);-webkit-border-radius:0;border-radius:0}.dialog .avatar-frame .avatar.hover:hover.hover:hover:before{background:rgba(0,0,0,0.3)}.dialog .avatar-frame .avatar.hover:hover.hover:hover .options{opacity:1;-ms-filter:none;filter:none}.dialog .avatar-frame .avatar .spinner{opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0);height:0;-webkit-transition:trasform 250ms ease;-moz-transition:trasform 250ms ease;-o-transition:trasform 250ms ease;-ms-transition:trasform 250ms ease;transition:trasform 250ms ease;position:absolute;z-index:99999;top:41px;left:50%;}.dialog .avatar-frame .avatar .spinner span{top:0;margin-top:10px}.dialog .avatar-frame .avatar .spinner.spinning{opacity:1;-ms-filter:none;filter:none;height:32px}.dialog .avatar-frame .icon.pro{position:absolute;z-index:100;top:-19px;right:-19px}.dialog .choose input{z-index:999}.dialog .page-buy{position:relative}.dialog .facebook p{margin-left:20px}.dialog .facebook .facebook-icon{float:left;margin-left:-4px}.dialog .delete .show-delete-wrapper{color:#959494;text-shadow:1px 1px 1px #f6f6f6;height:16px;}.dialog .delete .show-delete-wrapper:hover{cursor:pointer}.dialog .delete .show-delete-wrapper.invisible{visibility:visible;height:0;opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}.dialog .cancelation-options{display:none;overflow:hidden}.dialog .change-password-buttons,.dialog .change-email-buttons,.dialog .delete-form,.dialog .old-password,.dialog .password-confirm{display:none}.dialog .back-up-error{color:#d62822}html[dir=rtl] .dialog .avatar-frame{margin-right:auto;margin-left:10px;}html[dir=rtl] .dialog .avatar-frame .icon.pro{left:-19px;right:initial}'
}), define("/styles/_fileupload.js", {
name: "_fileupload",
data: '.progress-bar-wrapper{margin-left:12px;width:100px;height:11px;position:absolute;bottom:50px;-webkit-border-radius:20px;border-radius:20px;border:2px solid #fff;opacity:.8;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";filter:alpha(opacity=80);}.progress-bar-wrapper span{height:7px !important;margin:2px;width:0%;position:absolute;-webkit-border-radius:20px;border-radius:20px;background-color:#fff;-webkit-transition:400ms width;-moz-transition:400ms width;-o-transition:400ms width;-ms-transition:400ms width;transition:400ms width}.drop-message{width:120px;height:120px;position:absolute;top:1px;left:0;background:rgba(0,0,0,0.5);display:none;}.drop-message span{text-align:center;display:block;margin-top:50px;color:#fff;opacity:1;-ms-filter:none;filter:none}.message{display:block}.choose.drop .drop-message{display:block}.choose.loading .spinner{-webkit-animation:rotate .8s linear infinite;-moz-animation:rotate .8s linear infinite;-o-animation:rotate .8s linear infinite;-ms-animation:rotate .8s linear infinite;animation:rotate .8s linear infinite;display:block;position:absolute !important;left:50%;top:50%;margin-left:-10px;margin-top:-10px;width:19px !important;height:19px !important;background:url("images/loading.png");opacity:.5;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";filter:alpha(opacity=50)}@media only screen and (-webkit-min-device-pixel-ratio: 1.5), only screen and (min--moz-device-pixel-ratio: 1.5){#wunderlist-base .avatar-upload.loading span{background:url("images/loading@2x.png");-webkit-background-size:19px;-moz-background-size:19px;background-size:19px}}'
}), define("views/Settings/SettingsAccountView", [ "application/runtime", "vendor/moment", "helpers/BlobHelper", "helpers/PlatformHeaders", "collections/ProductsCollection", "views/Pro/SubscriptionView", "views/Pro/StatusView", "views/Settings/SettingsICSView", "views/Settings/InvoiceDownloaderView", "views/Settings/RestoreDataView", "views/Settings/SettingsSubview", "wunderbits/views/WBFileSelectorView", "views/Settings/Controllers/SettingsAccountViewController", "views/Settings/Controllers/SettingsAccountViewOAuthController", "views/Settings/Controllers/SettingsAccountViewExportController", "wunderbits/WBFileUploader", "collections/ServiceCollection", "collections/SubscriptionCollection", "template!settings/settingsAccount", "style!settings/settingsAccount", "style!_fileupload" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m, g, f, b, h, v, _, w, k) {
var x = e.$, y = e._, C = e.config, T = c.prototype, S = {
echo: "6Wunderkinder",
mac_app_store: "Mac App Store",
google_play: "Google Play",
ios_app_store: "iOS App Store",
adyen: "6Wunderkinder",
invite_your_friends: "6Wunderkinder",
"6wunderkinder": "6Wunderkinder"
};
return c.extend({
template: v,
styles: [ _, w ],
className: "settings-content-inner",
"implements": [ p, m, g ],
emits: {
"click .facebook .disconnect": "click:facebook:disconnect",
"click .facebook .connect": "click:facebook:connect",
"click .google .connect": "click:google:connect",
"click .google .disconnect": "click:google:disconnect",
"click .show-delete": "click:showDelete",
"click #change-email": "click:changeEmail",
"click #cancel-email": "click:cancelEmail",
"click #save-email": "click:saveEmail",
"click #change-password": "click:changePassword",
"click #cancel-password": "click:cancelPassword",
"click #save-password": "click:savePassword",
"click #cancel-delete-account": "click:cancelDeleteAccount",
"click #delete-account": "click:deleteAccount",
"click .go-pro": "click:goPro",
"click #cancel-pro": "toggle:confirmation",
"click .return-cancel": "toggle:confirmation",
"click .confirm-cancel": "click:confirmCancel",
"blur #edit-full-name": "blur:editFullName",
"keydown #edit-full-name": "keydown",
"keydown #edit-email": "keydown",
"keydown #edit-email-pw-confirm": "keydown",
"keydown #confirm-password": "keydown",
"keydown #cancel-password, #cancel-email, #cancel-delete-account": "keydown:cancelEdit",
"keydown #save-password, #save-email, #delete-account": "keydown:confirmEdit",
"keyup .password-confirm input": "keyup:confirmPassword",
"keyup .delete-password, .delete-confirm": "keyup:delete",
"keyup .new-password": "keyup:password",
"keyup .confirm-password": "keyup:password",
"click .export-start": "click:export"
},
observes: {
events: {
"backup:error:show": "showBackupError",
"backup:error:hide": "hideBackupError"
}
},
renderData: {
adminName: k,
adyenSubscription: k,
billOn: k,
connectedToFacebook: k,
expiresIn: k,
expiresOn: k,
expiresRelative: k,
isAdmin: k,
isCanceled: k,
isNodeWebkit: e.env.isNodeWebkit(),
isChromeApp: e.env.isChromeApp(),
isGroupProduct: k,
isIE: e.env.isIE(),
isManageEnabled: k,
isMember: k,
isTelekomPromo: k,
recurring: k,
showSocialButtons: k,
store: k,
subscriptionType: k,
user: k
},
formatData: function(i) {
var n = this;
i = T.formatData.call(n, i);
var a = e.user, o = a.attributes, r = o.individualSubscription, s = o.teamSubscription, l = n.subscriptions.get(r), d = n.subscriptions.get(s), c = !!o.productID && n.products.findWhere({
id: o.productID
}), u = a.isPro();
if (i.user = a.toJSON(), i.user.isPro = u, i.showSocialConnectButtons = a.showSocialButtons() && !e.env.isNodeWebkit(), 
i.connectedToFacebook = !!n.facebookService, u && (l || d)) {
var p = l || d;
p = p.attributes;
var m = e.settings.attributes.date_format;
i.expiresIn = t(p.expires_at).diff(t(), "days"), i.expiresOn = t(p.expires_at).format(m), 
i.billOn = p.recurring && !p.canceled ? t(p.expires_at).format(m) : !1, i.expiresRelative = 0 === i.expiresIn ? e.language.getText("label_relative_date_today_mid_sentence") : 1 === i.expiresIn ? e.language.getText("label_relative_date_tomorrow") : !1, 
i.subscriptionType = p.value, i.adyenSubscription = c && "adyen" === c.attributes.provider, 
i.isGroupProduct = p.team, i.isAdmin = e.user.isProTeamAdmin(), i.adminName = p.team && p.admin.name, 
i.isMember = p.team && e.user.isProTeamMember(), i.isCanceled = !!p.canceled_at, 
i.recurring = p.recurring, c && (i.isManageEnabled = "google_play" === c.attributes.platform || "ios_app_store" === c.attributes.platform), 
i.store = c && S[c.attributes.platform || c.provider] || "6Wunderkinder", i.isTelekomPromo = "telekom_6month_promotion" === o.productID;
}
return i;
},
initialize: function() {
var t = this;
T.initialize.apply(t, arguments), t.sdk = e.sdk, t.subscriptions = new h("/subscriptions/all"), 
t.products = new a("/products/all"), t.services = new b("/services/all"), t.proStatusView = t.addSubview(new r()), 
t.subscriptionView = t.addSubview(new o()), t.invoiceDownloader = t.addSubview(new l()), 
t.importer = t.addSubview(new d()), t.icsView = t.addSubview(new s()), t.initFileUploader(), 
t.bindTo(e, "services:ready", t.updateServices), t.bindTo(t.services, "add remove", t.updateServices), 
t.bindTo(e.user, "change:avatar", t.updateAvatar), t.bindTo(e.user, "change:email", t.updateEmail), 
t.bindTo(e.user, "change:name", t.updateName), t.bindTo(e.user, "change:pro", t.deferredRender), 
t.bindTo(e.settings, "change:date_format", t.deferredRender), t.bindTo(e, "subscriptions:ready", t.deferredRender), 
t.bindTo(e, "close:edits", t.closeAllEdits), t.getProducts();
},
render: function() {
var t = this;
return e.settings.hasFetched.done(t.getProducts, t), t;
},
deferredRender: function() {
var t = this;
if (!t.destroyed) {
var i = t.formatData(t.renderData);
t = T.render.call(t, i), t.facebookButtons = {
connect: t.$(".facebook .connect"),
disconnect: t.$(".facebook .disconnect")
}, t.googleButtons = {
connect: t.$(".google .connect"),
disconnect: t.$(".google .disconnect")
};
var n = t.proStatusView.render(i).$el;
t.$(".pro-status-wrapper").html(n);
var a = t.subscriptionView.render().$el, o = e.currentRoute().indexOf("/pro") >= 0;
o ? t.$(".settings").addClass("hidden") : a.addClass("hidden"), t.renderICSView(), 
t.setupImportButton(), t.el.appendChild(a[0]), t.updateAvatar(), t.updateServices(), 
t.setupAvatarUpload(), t.setupInvoicesDownload();
}
},
initFileUploader: function() {
var t = this, i = y.extend({
"X-Access-Token": e.user.attributes.access_token,
"X-Client-ID": C.clientID,
"X-Requested-With": "XMLHttpRequest",
"X-File-Name": ""
}, n.headers);
t.fileUploader = new f({
acceptedFileTypes: [ "image/gif", "image/jpeg", "image/png" ],
uploadAction: "POST",
uploadURL: C.api.host + "/v1/avatar",
customHeaders: i,
fileName: "newAvatar",
onProgress: function() {
!t.destroyed && t.$(".spinner").addClass("spinning"), e.trigger("analytics:Preferences:avatarUploadStarted");
},
onUploadComplete: function(i) {
t.destroyed || (t.dropTarget.addClass("loading"), t.$(".spinner").removeClass("spinning")), 
e.user.save({
avatar: i.url
}, {
success: function() {
if (e.trigger("analytics:Preferences:avatarUploadFinished"), !t.destroyed) {
var i = t.dropTarget.find("img").removeClass("hidden"), n = t.bindTo(i, "load", function() {
t.dropTarget.removeClass("loading"), t.unbindFrom(n);
});
t.delay(function() {
t.dropTarget.removeClass("loading");
}, 3e3), t.bindOnceTo(e, "sync:ended", t.updateAvatar), e.trigger("sync:start");
}
}
});
},
onError: function() {
if (!t.destroyed) {
t.$progressBar.addClass("hidden"), t.dropTarget.removeClass("loading");
var e = t.$(".message.error");
e.removeClass("hidden"), t.delay(function() {
e.addClass("hidden");
}, 5e3);
}
}
});
},
getProducts: function() {
var t = this, i = e.settings.attributes.account_locale || "en";
t.sdk.http.products.all(k, i).done(function(e) {
t.destroyed || (t.products.reset(e), t.deferredRender());
}).fail(function() {
t.deferredRender();
});
},
updateServices: function() {
var e = this;
e.facebookService = e.services.find(function(e) {
return "facebook" === e.attributes.provider_type;
}), e.googleService = e.services.find(function(e) {
return "google" === e.attributes.provider_type;
}), (e.facebookService || e.googleService) && e.updateServiceButtons();
},
renderICSView: function() {
var e = this, t = e.$(".ics-container");
t.append(e.icsView.render().el);
},
setupImportButton: function() {
var e = this, t = e.$(".backup-feedback"), i = e.$(".backup-complete");
e.$(".account-backup-settings .import").prepend(e.importer.render().el), e.bindTo(e.importer, "processing:backupData", function() {
i.addClass("hidden"), t.removeClass("hidden");
}), e.bindTo(e.importer, "processing:complete", function() {
t.addClass("hidden"), i.removeClass("hidden");
}), e.bindTo(e.importer, "processing:error", function() {
i.addClass("hidden"), t.addClass("hidden"), e.$(".back-up-error").removeClass("hidden");
});
},
showBackupError: function() {
var e = this;
e.$(".back-up-error").removeClass("hidden");
},
hideBackupError: function() {
var e = this;
e.$(".back-up-error").addClass("hidden");
},
uploadAvatar: function(t) {
var i = this;
"preferences/account" === e.currentRoute() && i.fileUploader.upload(t[0]);
},
updateAvatar: function() {
function n() {
o.destroyed || o.lastUpdatedAvatarTimestamp === s || (o.$(".options").removeClass("hidden").hide().fadeIn(100), 
o.$(".progress-bar-wrapper").fadeOut(100), o.lastUpdatedAvatarTimestamp = s, r.off("load"), 
o.subscriptionView.$("img").attr("src", r.attr("src")), r.toggleClass("opaque", null === e.user.attributes.avatar), 
r.removeClass("hidden"));
}
function a() {
o.destroyed || (o.$(".avatar").addClass("no-avatar"), r.addClass("hidden"));
}
var o = this, r = o.$(".avatar.choose img"), s = t().unix(), l = e.user.getAvatarURL();
l && r.length ? i.loadImage(l, r, n, a) : r.addClass("hidden");
},
updateEmail: function() {
var t = this;
t.$("#edit-email").val(e.user.attributes.email);
},
updateName: function() {
var t = this;
t.$("#edit-full-name").val(e.user.attributes.name);
},
setupAvatarUpload: function() {
var e = this;
e.dropTarget = e.$(".choose");
var t = new u({
dropTarget: e.dropTarget,
urlBlocker: "tasks/"
});
e.$progressBar = e.$(".progress-bar-wrapper"), e.fileSelectorView = e.addSubview(t, "selectorView"), 
e.fileSelectorView.setElement(e.dropTarget), e.bindTo(e.fileSelectorView, "selected:files", e.uploadAvatar);
},
setupInvoicesDownload: function() {
var e = this;
e.destroyed || e.invoiceDownloader && e.$(".google-connect-settings").before(e.invoiceDownloader.render().el);
},
resetEditInputs: function(t) {
var i = x(t.currentTarget), n = i.attr("id"), a = {
"edit-full-name": "name",
"edit-email": "email"
};
i.val(e.settings.get(a[n]));
},
showChangeEmail: function() {
var e = this, t = e.$("#edit-email"), i = e.$("#change-email");
t.prop("disabled", !1).focus(), i.addClass("hidden"), e.$(".password-confirm, .change-email-buttons").slideDown(200), 
e.$("#edit-full-name, #change-password, .delete-account, .facebook a, #cancel-pro").prop("disabled", !0).addClass("disabled"), 
e.trigger("check:email", k, e.$("#edit-email").val());
},
hideChangeEmail: function() {
var t = this;
if (!t.destroyed) {
var i = t.$("#edit-email");
i.prop("disabled", !0), i.val(e.user.attributes.email), t.$("#edit-email-pw-confirm").val("").attr("aria-label", e.language.getText("label_password")), 
t.$(".password-confirm, .password-error, .change-email-buttons").slideUp(200, function() {
!t.destroyed && t.$("#change-email").removeClass("hidden").focus();
}), t.enableAllInputs();
}
},
updateEmailInputs: function(e) {
var t = this;
if (e) {
t.$("#edit-email-pw-confirm").prop("disabled", !1);
var i = "" === t.$(".password-confirm input").val();
t.$("#save-email").prop("disabled", i).toggleClass("disabled", i);
} else t.$("#edit-email-pw-confirm, #save-email").prop("disabled", !0);
},
enableAllInputs: function() {
var e = this;
e.$(".settings .disabled").removeClass("disabled").prop("disabled", !1);
},
renderEmailError: function(t) {
var i, n = this, a = t && t.error, o = a && a.translation_key, r = n.$(".email-error"), s = n.$("#edit-email-pw-confirm"), l = o ? o : "api_error_unknown";
i = "api_error_validation_error" === l && a.email && "has already been taken" === a.email[0] ? e.language.getLabel("api_error_account_already_exists").toString() : e.language.getLabel(l).toString(), 
r.html(i), s.attr("aria-label", e.language.getText(l)), n.renderLabels(), r.slideDown(200, function() {
s.focus();
});
},
showChangePassword: function() {
var e = this, t = e.$(".change-password-buttons"), i = e.$("#change-password"), n = e.$(".old-password");
i.hide(), t.slideDown(200, function() {
n.focus();
}), n.show(), e.toggleSavePasswordButton(!1), e.$("#edit-full-name, #change-email, .delete-account, .facebook a, #cancel-pro").prop("disabled", !0).addClass("disabled");
},
toggleSavePasswordButton: function(e) {
var t = this;
t.$("#save-password").toggleClass("disabled", !e).prop("disabled", !e);
},
hideChangePassword: function() {
var t = this, i = t.$(".change-password-buttons"), n = t.$("#change-password");
n.show(), i.slideUp(200), t.$(".old-password").val("").hide().attr("aria-label", e.language.getText("settings_account_current_password")), 
t.$(".error-message").css("display", "none"), i.find("input").each(function(e, t) {
x(t).val(""), n.focus();
}), t.enableAllInputs();
},
showPasswordError: function() {
var t = this, i = t.$(".change-password-error"), n = t.$(".old-password");
n.attr("aria-label", e.language.getText("settings_account_change_password_error")), 
i.slideDown(200, function() {
n.focus();
});
},
hidePasswordError: function() {
this.$(".error-message").slideUp(200);
},
showDeleteAccount: function() {
var e = this, t = e.$(".delete-form"), i = e.$(".show-delete-wrapper");
i.addClass("hidden"), t.slideDown(400, function() {
e.trigger("force:window:resize"), e.$(".delete-form").focus(), e.$el.closest(".settings-content-inner-wrapper").animate({
scrollTop: t.offset().top
});
}), e.$(".delete-password-confirm").show(), e.$("#edit-full-name, #change-email, #change-password, #delete-account, .facebook a, #cancel-pro").prop("disabled", !0).addClass("disabled");
},
hideDeleteAccount: function() {
var t = this, i = t.$(".delete-form"), n = t.$(".show-delete-wrapper");
t.$(".delete-password").attr("aria-label", e.language.getText("settings_account_current_password")), 
n.removeClass("hidden"), i.slideUp(200, function() {
t.destroyed || (t.trigger("force:window:resize"), t.$(".show-delete").focus());
}), t.$(".delete-password-confirm").hide(), i.find("input").val(""), t.$(".delete-password-error").slideUp(200), 
t.enableAllInputs();
},
renderDeleteAccountError: function() {
var t = this, i = t.$(".delete-password-error"), n = t.$("#delete-account"), a = t.$(".delete-password"), o = "api_error_incorrect_password";
i.find("div").html(e.language.getLabel(o).toString()), t.renderLabels(), a.attr("aria-label", e.language.getText(o)), 
i.slideDown(200, function() {
a.focus();
}), n.removeClass("loading");
},
toggleDeleteButton: function(e) {
var t = this, i = t.$("#delete-account");
i.prop("disabled", !e).toggleClass("disabled", !e);
},
updateServiceButtons: function() {
var e = this, t = !!e.facebookService, i = !!e.googleService;
e.facebookButtons && (e.facebookButtons.connect.toggleClass("hidden", t), e.facebookButtons.disconnect.toggleClass("hidden", !t)), 
e.googleButtons && (e.googleButtons.connect.toggleClass("hidden", i), e.googleButtons.disconnect.toggleClass("hidden", !i));
},
toggleConnectButtonStatus: function(t, i) {
var n, a = this, o = "connecting" === i ? "label_connecting" : "button_connect";
"facebook" === t ? n = a.facebookButtons.connect : "google" === t && (n = a.googleButtons.connect), 
n && n.text(e.language.getText(o));
},
toggleConfirmation: function() {
var e = this, t = e.$(".cancelation-options"), i = t.hasClass("closed");
e.$(".confirm-cancel").removeClass("loading"), e.$("#edit-full-name, #change-password, .delete-account, .facebook a, #change-email").prop("disabled", i).toggleClass("disabled", i), 
e.$("#cancel-pro").prop("disabled", i).toggleClass("disabled", i), t[i ? "slideDown" : "slideUp"](200), 
t.toggleClass("closed", !i);
},
closeAllEdits: function() {
var e = this;
e.destroyed || (e.hideChangeEmail(), e.hideDeleteAccount(), e.hideChangePassword());
}
});
}), define("views/Settings/Controllers/SettingsSelectController", [ "application/runtime", "wunderbits/WBModalViewController" ], function(e, t) {
return t.extend({
"implements": {
"change:select": "updateSettingFromSelect"
},
updateSettingFromSelect: function() {
e.settings.save(this.view.settingsKey, this.view.getSelectValue());
}
});
}), define("/templates/settings/settingsSelectItem.js", {
name: "settings/settingsSelectItem",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression, s = "function";
return '<div class="separator filter-setting"> <div class="cols"> <div class="col-50"> <span class="label"> ' + r((a = t.localized || e && e.localized || o, 
a.call(e, e && e.label, {
name: "localized",
hash: {},
data: n
}))) + ' </span> </div> <div class="col-50 text-right"> <span class="select"> <select class="small" id="edit-smartlist-visibility-' + r((a = t.name || e && e.name, 
typeof a === s ? a.call(e, {
name: "name",
hash: {},
data: n
}) : a)) + '" data-key-aria-label="' + r((a = t.label || e && e.label, typeof a === s ? a.call(e, {
name: "label",
hash: {},
data: n
}) : a)) + '"> <option value="all" data-key-text="settings_today_smart_list_show_all_tasks"></option> <option value="current_user" data-key-text="settings_today_smart_list_show_current_user_tasks"></option> </select> </span> </div> </div> </div>';
},
useData: !0
}
}), define("views/Settings/SettingsTodayWeekSelectView", [ "application/runtime", "./Controllers/SettingsSelectController", "wunderbits/WBViewPresenter", "template!settings/settingsSelectItem" ], function(e, t, i, n) {
var a = i.prototype;
return i.extend({
template: n,
settingsKey: "today_smart_list_visible_tasks",
renderData: {
label: "settings_today_smart_list_visible_tasks"
},
"implements": [ t ],
emits: {
"change select": "change:select"
},
initialize: function() {
a.initialize.apply(this, arguments), this.bindTo(e.settings, "change:" + this.settingsKey, "renderSelectedValue");
},
postRender: function() {
this.renderSelectedValue();
},
renderSelectedValue: function() {
var t = this, i = e.settings.attributes[t.settingsKey];
t.$("option").each(function() {
var e = t.$(this), n = e.val();
e.attr("selected", n === i);
});
},
getSelectValue: function() {
return this.$("select").val();
}
});
}), define("/templates/settings/settingsFiltersItem.js", {
name: "settings/settingsFiltersItem",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression, s = t.helperMissing;
return '<div class="separator filter-setting"> <div class="cols"> <div class="col-50"> <label for="show-smartlist-visibility-' + r((a = t.name || e && e.name, 
typeof a === o ? a.call(e, {
name: "name",
hash: {},
data: n
}) : a)) + '"> ' + r((a = t.symbol || e && e.symbol || s, a.call(e, e && e.icon, {
name: "symbol",
hash: {},
data: n
}))) + ' <span class="label">' + r((a = t.localized || e && e.localized || s, a.call(e, e && e.label, {
name: "localized",
hash: {},
data: n
}))) + '</span> </label> </div> <div class="col-50 text-right"> <span class="select"> <select class="small" id="edit-smartlist-visibility-' + r((a = t.name || e && e.name, 
typeof a === o ? a.call(e, {
name: "name",
hash: {},
data: n
}) : a)) + '" data-key-aria-label="' + r((a = t.label || e && e.label, typeof a === o ? a.call(e, {
name: "label",
hash: {},
data: n
}) : a)) + '"> <option value="auto" data-key-text="settings_sidebar_smart_lists_auto"></option> <option value="visible" data-key-text="settings_sidebar_smart_lists_visible"></option> <option value="hidden" data-key-text="settings_sidebar_smart_lists_hidden"></option> </select> </span> </div> </div> </div>';
},
useData: !0
}
}), define("views/Settings/SettingsFiltersView", [ "application/runtime", "./SettingsSubview", "./SettingsTodayWeekSelectView", "template!settings/settingsFiltersItem" ], function(e, t, i, n) {
var a = e.$, o = e._, r = t.prototype, s = o.clone(e.smartLists), l = o.clone(e.smartLists), d = s.indexOf("completed");
s[d] = "done";
var c = s.indexOf("assigned");
return s[c] = "assigned_to_me", t.extend({
template: n,
className: "settings-content-inner",
initialize: function() {
var t = this;
r.initialize.apply(t, arguments), t.selectables = [], o.each(s, function(e) {
t.selectables.push("smartlist_visibility_" + e);
}), o.each(t.selectables, function(i) {
t.bindTo(e.settings, "change:" + i, function() {
t.updateSelectable(i);
});
});
},
render: function() {
var t = this;
t.$el.empty();
var n = document.createDocumentFragment();
o.each(s, function(i, o) {
var r = i;
r = "done" === i ? "completed" : r;
var s = "smart_list_" + r, d = a(t.template({
name: i,
label: s,
icon: l[o]
})), c = "smartlist_visibility_" + i, u = e.settings.get(c), p = d.find("select"), m = p.find('option[value="' + u + '"]');
m.length && m.prop("selected", !0), "hidden" === u && d.addClass("disabled"), t.bindTo(p, "change", function() {
var t = p.val();
d.toggleClass("disabled", "hidden" === t), e.settings.save(c, t), e.trigger("analytics:Preferences:change-" + c, t);
}), n.appendChild(d[0]);
});
var r = new i();
n.appendChild(r.render().el), t.el.appendChild(n), t.renderLocalized(), t.$("select:last").addClass("tabEnd");
var d = new Date();
return t.$el.find(".wundercon.today").attr("data-label", d.getDate()), t;
},
updateSelectable: function(t) {
var i = this, n = e.settings.get(t), a = i.$el.find("#edit-" + t.replace(/_/g, "-"));
"hidden" === n ? a.parent().addClass("disabled") : a.parent().removeClass("disabled");
var o = a.find('option[value="' + n + '"]');
o.prop("selected", !0);
}
});
}), define("views/Settings/Controllers/SettingsShortcutsViewController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/WBModalViewController" ], function(e, t, i, n) {
var a = e.$, o = e._;
return i.extend({
"implements": {
"focus:input": "onFocusInput",
keydown: "onKeydown",
"change:select": "onSelectChange",
blur: "onBlur",
"click:showMore": "onToggleAdvancedShortcuts",
"click:reset": "resetShortcuts"
},
onSelectChange: function(e) {
this.saveChanges(a(e.currentTarget));
},
onFocusInput: function(e) {
var t = this;
t.defer(function() {
a(e.target).select();
});
},
onBlur: function(t) {
var i = this, n = a(t.currentTarget), o = a.trim(n.val()), r = n.attr("id"), s = r.replace(/-/g, "_");
o !== e.settings.get(s) ? i.saveChanges(n) : n.val(e.settings.get(s));
},
onKeydown: function(i) {
var n = this, r = [ 9 ], s = a(i.currentTarget), l = s.attr("id"), d = l.replace(/-/g, "_"), c = !1;
i.which === t.esc ? (s.val(e.settings.get(d)), s.blur()) : o.include(r, i.which) || (i.preventDefault(), 
i.stopPropagation(), c = n.getShortcutKeys(i, d), c !== !1 && s.val(c));
},
onToggleAdvancedShortcuts: function() {
var t, i = this, n = i.view, a = n.$(".advanced-shortcuts"), o = a.hasClass("hidden");
t = o ? e.language.getLabel("settings_shortcuts_hide").toString() : e.language.getLabel("settings_shortcuts_show_more").toString(), 
n.$(".show-advanced-shortcuts").html(t), n.renderLocalized(), a.toggleClass("hidden", !o), 
n.$("#shortcut-goto-preferences").focus(), e.trigger("analytics:Preferences:toggleShowAdvancedShortcuts", o ? "show" : "hide"), 
n.trigger("change:content");
},
resetShortcuts: function() {
e.settings.resetShortcuts();
},
saveChanges: function(t) {
var i = a.trim(t.val()), n = t.attr("id"), o = n.replace(/-/g, "_");
i !== e.settings.get(o) && e.settings.save(o, i);
},
getShortcutKeys: function(e, i) {
var a = [ 16, 17, 18, 91, 93, 27 ], r = [ "altKey", "ctrlKey", "metaKey", "shiftKey" ], s = e.which, l = t[s] !== n ? t[s] : String.fromCharCode(s);
l = l.toUpperCase();
var d = {
returns: /^((ALT|SHIFT|META|CTRL)\s\+\s)*RETURN$/,
deletes: /^((ALT|SHIFT|META|CTRL)\s\+\s)*BACKSPACE|DEL$/,
keyCombos: /^((ALT|SHIFT|META|CTRL)\s\+\s)+.$/,
singleKeys: /^.$/
}, c = {
shortcut_delete: [ d.deletes ],
shortcut_add_new_task: [ d.keyCombos ],
shortcut_add_new_list: [ d.keyCombos ],
shortcut_goto_filter_all: [ d.keyCombos ],
shortcut_goto_filter_completed: [ d.keyCombos ],
shortcut_goto_filter_starred: [ d.keyCombos ],
shortcut_goto_filter_today: [ d.keyCombos ],
shortcut_goto_filter_week: [ d.keyCombos ],
shortcut_goto_inbox: [ d.keyCombos ],
shortcut_goto_search: [ d.keyCombos ],
shortcut_goto_preferences: [ d.keyCombos ],
shortcut_mark_task_done: [ d.keyCombos ],
shortcut_mark_task_starred: [ d.keyCombos ],
shortcut_select_all_tasks: [ d.keyCombos ],
shortcut_send_via_email: [ d.keyCombos ],
shortcut_sync: [ d.singleKeys ],
shortcut_copy_tasks: [ d.keyCombos ],
shortcut_cut_tasks: [ d.keyCombos ],
shortcut_paste_tasks: [ d.keyCombos ]
}, u = !1, p = !1;
return o.include(a, e.which) ? u : (o.each(r, function(t) {
e[t] === !0 && (t = t.replace("Key", "").toUpperCase(), u ? u += " + " + t : u = t);
}), u ? u += " + " + l : u = l, c[i] && (o.each(c[i], function(e) {
null !== u.match(e) && (p = !0);
}), p === !1 && (u = !1)), u);
}
});
}), define("/templates/settings/settingsShortcuts.js", {
name: "settings/settingsShortcuts",
data: {
"1": function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression;
return ' <div class="separator"> <div class="cols"> <div class="col-50 text-right">Copy tasks</div> <div class="col-50"> <input class="shortcut" id="shortcut-copy-tasks" type="text" value="' + r((a = t.shortcut_copy_tasks || e && e.shortcut_copy_tasks, 
typeof a === o ? a.call(e, {
name: "shortcut_copy_tasks",
hash: {},
data: n
}) : a)) + '"/> </div> </div> <div class="cols"> <div class="col-50 text-right">Paste tasks</div> <div class="col-50"> <input class="shortcut" id="shortcut-paste-tasks" type="text" value="' + r((a = t.shortcut_paste_tasks || e && e.shortcut_paste_tasks, 
typeof a === o ? a.call(e, {
name: "shortcut_paste_tasks",
hash: {},
data: n
}) : a)) + '"/> </div> </div> </div> ';
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = "function", d = '<!-- Tasks --> <div class="separator"> <div class="cols"> <div class="col-50 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_shortcuts_new_task", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-50"> <input class="shortcut tabStart" id="shortcut-add-new-task" type="text" value="' + s((o = t.shortcut_add_new_task || e && e.shortcut_add_new_task, 
typeof o === l ? o.call(e, {
name: "shortcut_add_new_task",
hash: {},
data: n
}) : o)) + '" data-key-aria-label="settings_shortcuts_new_task"/> </div> </div> <div class="cols"> <div class="col-50 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_shortcuts_new_list", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-50"> <input class="shortcut" id="shortcut-add-new-list" type="text" value="' + s((o = t.shortcut_add_new_list || e && e.shortcut_add_new_list, 
typeof o === l ? o.call(e, {
name: "shortcut_add_new_list",
hash: {},
data: n
}) : o)) + '" data-key-aria-label="settings_shortcuts_new_list"/> </div> </div> <div class="cols"> <div class="col-50 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_shortcuts_mark_done", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-50"> <input class="shortcut" id="shortcut-mark-task-done" type="text" value="' + s((o = t.shortcut_mark_task_done || e && e.shortcut_mark_task_done, 
typeof o === l ? o.call(e, {
name: "shortcut_mark_task_done",
hash: {},
data: n
}) : o)) + '" data-key-aria-label="settings_shortcuts_mark_done"/> </div> </div> <div class="cols"> <div class="col-50 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_shortcuts_mark_starred", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-50"> <input class="shortcut" id="shortcut-mark-task-starred" type="text" value="' + s((o = t.shortcut_mark_task_starred || e && e.shortcut_mark_task_starred, 
typeof o === l ? o.call(e, {
name: "shortcut_mark_task_starred",
hash: {},
data: n
}) : o)) + '" data-key-aria-label="settings_shortcuts_mark_starred"/> </div> </div> <div class="cols"> <div class="col-50 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_shortcuts_select_all_tasks", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-50"> <input class="shortcut" id="shortcut-select-all-tasks" type="text" value="' + s((o = t.shortcut_select_all_tasks || e && e.shortcut_select_all_tasks, 
typeof o === l ? o.call(e, {
name: "shortcut_select_all_tasks",
hash: {},
data: n
}) : o)) + '" data-key-aria-label="settings_shortcuts_select_all_tasks"/> </div> </div> <div class="cols"> <div class="col-50 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_shortcuts_delete_item", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-50"> <input class="shortcut" id="shortcut-delete" type="text" value="' + s((o = t.shortcut_delete || e && e.shortcut_delete, 
typeof o === l ? o.call(e, {
name: "shortcut_delete",
hash: {},
data: n
}) : o)) + '" data-key-aria-label="settings_shortcuts_delete_item"/> </div> </div> </div> <!-- copy and paste --> ';
return a = t["if"].call(e, e && e.copyAndPasteEnabled, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d + ' <div class="separator"> <div class="cols"> <div class="col-50 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_shortcuts_open_search", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-50"> <input class="shortcut" id="shortcut-goto-search" type="text" value="' + s((o = t.shortcut_goto_search || e && e.shortcut_goto_search, 
typeof o === l ? o.call(e, {
name: "shortcut_goto_search",
hash: {},
data: n
}) : o)) + '" data-key-aria-label="settings_shortcuts_open_search"/> </div> </div> </div> <!-- Advanced --> <div class="separator advanced-shortcuts hidden"> <div class="cols"> <div class="col-50 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_shortcuts_open_preferences", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-50"> <input class="shortcut" id="shortcut-goto-preferences" type="text" value="' + s((o = t.shortcut_goto_preferences || e && e.shortcut_goto_preferences, 
typeof o === l ? o.call(e, {
name: "shortcut_goto_preferences",
hash: {},
data: n
}) : o)) + '" data-key-aria-label="settings_shortcuts_open_preferences"/> </div> </div> <div class="cols"> <div class="col-50 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_email_list", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-50"> <input class="shortcut" id="shortcut-send-via-email" type="text" value="' + s((o = t.shortcut_send_via_email || e && e.shortcut_send_via_email, 
typeof o === l ? o.call(e, {
name: "shortcut_send_via_email",
hash: {},
data: n
}) : o)) + '" data-key-aria-label="button_email_list"/> </div> </div> <div class="cols"> <div class="col-50 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_shortcuts_show_notifications", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-50"> <input class="shortcut" id="shortcut-show-notifications" type="text" value="' + s((o = t.shortcut_show_notifications || e && e.shortcut_show_notifications, 
typeof o === l ? o.call(e, {
name: "shortcut_show_notifications",
hash: {},
data: n
}) : o)) + '" data-key-aria-label="settings_shortcuts_show_notifications"/> </div> </div> <div class="cols"> <div class="col-50 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_shortcuts_open_inbox", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-50"> <input class="shortcut" id="shortcut-goto-inbox" type="text" value="' + s((o = t.shortcut_goto_inbox || e && e.shortcut_goto_inbox, 
typeof o === l ? o.call(e, {
name: "shortcut_goto_inbox",
hash: {},
data: n
}) : o)) + '" data-key-aria-label="settings_shortcuts_open_inbox"/> </div> </div> <div class="cols"> <div class="col-50 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_shortcuts_open_assigned_smart_list", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-50"> <input class="shortcut" id="shortcut-goto-filter-assigned" type="text" value="' + s((o = t.shortcut_goto_filter_assigned || e && e.shortcut_goto_filter_assigned, 
typeof o === l ? o.call(e, {
name: "shortcut_goto_filter_assigned",
hash: {},
data: n
}) : o)) + '" data-key-aria-label="settings_shortcuts_open_assigned_smart_list"/> </div> </div> <div class="cols"> <div class="col-50 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_shortcuts_open_starred_smart_list", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-50"> <input class="shortcut" id="shortcut-goto-filter-starred" type="text" value="' + s((o = t.shortcut_goto_filter_starred || e && e.shortcut_goto_filter_starred, 
typeof o === l ? o.call(e, {
name: "shortcut_goto_filter_starred",
hash: {},
data: n
}) : o)) + '" data-key-aria-label="settings_shortcuts_open_starred_smart_list"/> </div> </div> <div class="cols"> <div class="col-50 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_shortcuts_open_today_smart_list", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-50"> <input class="shortcut" id="shortcut-goto-filter-today" type="text" value="' + s((o = t.shortcut_goto_filter_today || e && e.shortcut_goto_filter_today, 
typeof o === l ? o.call(e, {
name: "shortcut_goto_filter_today",
hash: {},
data: n
}) : o)) + '" data-key-aria-label="settings_shortcuts_open_today_smart_list"/> </div> </div> <div class="cols"> <div class="col-50 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_shortcuts_open_week_smart_list", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-50"> <input class="shortcut" id="shortcut-goto-filter-week" type="text" value="' + s((o = t.shortcut_goto_filter_week || e && e.shortcut_goto_filter_week, 
typeof o === l ? o.call(e, {
name: "shortcut_goto_filter_week",
hash: {},
data: n
}) : o)) + '" data-key-aria-label="settings_shortcuts_open_week_smart_list"/> </div> </div> <div class="cols"> <div class="col-50 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_shortcuts_open_all_smart_list", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-50"> <input class="shortcut" id="shortcut-goto-filter-all" type="text" value="' + s((o = t.shortcut_goto_filter_all || e && e.shortcut_goto_filter_all, 
typeof o === l ? o.call(e, {
name: "shortcut_goto_filter_all",
hash: {},
data: n
}) : o)) + '" data-key-aria-label="settings_shortcuts_open_all_smart_list"/> </div> </div> <div class="cols"> <div class="col-50 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_shortcuts_open_done_smart_list", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-50"> <input class="shortcut" id="shortcut-goto-filter-done" type="text" value="' + s((o = t.shortcut_goto_filter_completed || e && e.shortcut_goto_filter_completed, 
typeof o === l ? o.call(e, {
name: "shortcut_goto_filter_completed",
hash: {},
data: n
}) : o)) + '" data-key-aria-label="settings_shortcuts_open_done_smart_list"/> </div> </div> </div> <div class="separator"> <div class="cols"> <div class="col-50 text-right">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "label_sync", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="col-50"> <input class="shortcut" id="shortcut-sync" type="text" value="' + s((o = t.shortcut_sync || e && e.shortcut_sync, 
typeof o === l ? o.call(e, {
name: "shortcut_sync",
hash: {},
data: n
}) : o)) + '" data-key-aria-label="label_sync"/> </div> </div> </div> <div class="separator text-right noline"> <div class="cols"> <button class="reset-shortcuts" tabindex="0">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_shortcuts_reset", {
name: "localized",
hash: {},
data: n
}))) + '</button> <button class="show-advanced-shortcuts tabEnd" tabindex="0">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_shortcuts_show_more", {
name: "localized",
hash: {},
data: n
}))) + "</button> </div> </div>";
},
useData: !0
}
}), define("views/Settings/SettingsShortcutsView", [ "application/runtime", "wunderbits/data/keycodes", "views/Settings/Controllers/SettingsShortcutsViewController", "views/Settings/SettingsSubview", "template!settings/settingsShortcuts" ], function(e, t, i, n, a) {
var o = e._, r = n.prototype, s = [ "shortcut_delete", "shortcut_add_new_task", "shortcut_add_new_list", "shortcut_goto_filter_all", "shortcut_goto_filter_assigned", "shortcut_goto_filter_completed", "shortcut_goto_filter_starred", "shortcut_goto_filter_today", "shortcut_goto_filter_week", "shortcut_goto_inbox", "shortcut_goto_search", "shortcut_goto_preferences", "shortcut_mark_task_done", "shortcut_mark_task_starred", "shortcut_select_all_tasks", "shortcut_send_via_email", "shortcut_sync", "shortcut_copy_tasks", "shortcut_paste_tasks" ];
return n.extend({
template: a,
className: "settings-content-inner",
"implements": [ i ],
emits: {
"focus input": "focus:input",
"keydown input.shortcut": "keydown",
"change select.shortcut": "change:select",
"blur .shortcut": "blur",
"click .show-advanced-shortcuts": "click:showMore",
"click .reset-shortcuts": "click:reset"
},
initialize: function() {
var t = this;
r.initialize.apply(t, arguments), o.each(s, function(i) {
t.bindTo(e.settings, "change:" + i, function() {
t.updateShortcut(i);
});
});
},
render: function() {
var t, i = this;
return t = e.settings.toJSON(), o.each(t, function(e, i) {
"INVALID" === e ? t[i] = "" : e && (t["is " + i + " " + e] = !0);
}), t.copyAndPasteEnabled = e.isNightly() || e.isDev(), i = r.render.call(i, t);
},
updateShortcut: function(t) {
var i = this, n = e.settings.get(t);
"INVALID" === n && (n = ""), i.$("#" + t.replace(/_/g, "-")).val(n);
}
});
}), define("views/Settings/Controllers/SettingsNotificationsViewController", [ "application/runtime", "wunderbits/WBModalViewController" ], function(e, t) {
var i = e.$;
return t.extend({
"implements": {
"change:toggle": "onChangeToggleable"
},
onChangeToggleable: function(t) {
var n = i(t.currentTarget), a = {}, o = {
"edit-notifications-email-enabled": "notifications_email_enabled",
"edit-notifications-push-enabled": "notifications_push_enabled",
"edit-notifications-desktop-enabled": "notifications_desktop_enabled"
};
a[o[n.attr("id")]] = n.is(":checked") ? "true" : "false", e.trigger("analytics:Preferences:toggleNotification-" + o[n.attr("id")], n.is(":checked")), 
e.settings.save(a);
}
});
}), define("/templates/settings/settingsNotifications.js", {
name: "settings/settingsNotifications",
data: {
"1": function() {
return "checked";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = '<!-- Notifications --> <div class="tabStart" tabindex="0" role="heading"> <div class="separator"> <p class="strong">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_notifications_notify_me_of_important_events_mobile", {
name: "localized",
hash: {},
data: n
}))) + "</p> <p>" + s((o = t.localized || e && e.localized || r, o.call(e, "settings_notifications_notify_me_on_text", {
name: "localized",
hash: {},
data: n
}))) + '</p> </div> </div> <div class="separator"> <div class="cols"> <div class="col-50"> <label> <input id="edit-notifications-email-enabled" type="checkbox" ';
return a = t["if"].call(e, e && e["is notifications_email_enabled true"], {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += "/> " + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_notifications_email_enabled", {
name: "localized",
hash: {},
data: n
}))) + ' </label> </div> <div class="col-50"> <label> <input id="edit-notifications-push-enabled" type="checkbox" ', 
a = t["if"].call(e, e && e["is notifications_push_enabled true"], {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += "/> " + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_notifications_push_enabled", {
name: "localized",
hash: {},
data: n
}))) + ' </label> </div> </div> </div> <div class="separator"> <div class="cols"> <div class="col-50"> <label> <input id="edit-notifications-desktop-enabled" class="tabEnd" type="checkbox" ', 
a = t["if"].call(e, e && e["is notifications_desktop_enabled true"], {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l + "/> " + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_notifications_desktop_enabled", {
name: "localized",
hash: {},
data: n
}))) + ' </label> </div> <div class="col-50"></div> </div> </div>';
},
useData: !0
}
}), define("views/Settings/SettingsNotificationsView", [ "application/runtime", "views/Settings/Controllers/SettingsNotificationsViewController", "views/Settings/SettingsSubview", "template!settings/settingsNotifications" ], function(e, t, i, n) {
var a = e._, o = i.prototype;
return i.extend({
template: n,
className: "settings-content-inner",
"implements": [ t ],
emits: {
"change input": "change:toggle"
},
initialize: function() {
var t = this;
o.initialize.apply(t, arguments), t.selectables = [ "notifications_email_enabled", "notifications_push_enabled", "notifications_desktop_enabled" ], 
a.each(t.selectables, function(i) {
t.bindTo(e.settings, "change:" + i, function() {
t.updateToggleable(i);
});
});
},
render: function() {
var t, i = this;
return t = e.settings.toJSON(), a.each(t, function(e, i) {
e && (t["is " + i + " " + e] = !0);
}), i = o.render.call(i, t);
},
updateToggleable: function(t) {
var i = this, n = e.settings.get(t), a = i.$el.find("#edit-" + t.replace(/_/g, "-"));
a.prop("checked", "true" === n);
}
});
}), define("views/Settings/Controllers/SettingsAboutViewController", [ "application/runtime", "wunderbits/WBModalViewController" ], function(e, t) {
var i = e.$;
return t.extend({
"implements": {
"click:privacyPolicy": "onClickTogglePrivacyPolicy",
"click:link": "onClickLink"
},
onClickTogglePrivacyPolicy: function() {
this.view.showTogglePrivacyPolicy();
},
onClickLink: function(t) {
var n = i(t.target), a = n.attr("href");
a && e.trigger("analytics:Preferences:clickAboutLink", a);
}
});
}), define("/templates/privacyPolicy.js", {
name: "privacyPolicy",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<h2>Imprint</h2> <p> 6 Wunderkinder GmbH<br> Karl-Liebknecht-Straße 32<br> 10178 Berlin </p> <h3>Contact</h3> <p>Mail: hello@6wunderkinder.com</p> <h3>Handelsregister</h3> <p> AG Charlottenburg HRB 128663 B<br> UstID DE815214657 </p> <h3>Geschäftsführer</h3> <p>Christian Reber</p> <h2>Privacy Policy</h2> <p>We, 6Wunderkinder GmbH (hereinafter "6Wunderkinder"), regard the protection and the confidentiality of your data as very important. We collect and use your personal data in accordance with the relevant provisions of German data protection legislation. In this Privacy Policy, we would like to tell you which personal data we collect and what we use it for.</p> <p>Below, 6Wunderkinder tells you about the type and extent of and the purposes for which personal data are collected and used. You can call up this information on our website anytime.</p> <h3>Controller</h3> <p>The controller within the meaning of German data protection laws is:</p> <p>6 Wunderkinder GmbH<br>Karl-Liebknecht-Straße 32<br>10178 Berlin<br></p> <p>If you have any questions or concerns about data protection, you are welcome to also contact us by email at this address: <a href="mailto:support@wunderlist.com" data-track="Mailto:Support Contact:Privacy Policy">support@wunderlist.com</a></p> <h3>Subject of Data Protection</h3> <p>The subject of data protection is personal data. According to Section 3, Subsection 1 of the German Federal Data Protection Act ("Bundesdatenschutzgesetz"), these are individual details on personal or objective circumstances of a certain person or certain persons. These include details such as your name, your postal address, your email address, your telephone number or, where appropriate, even use-data.</p> <h3>Collection and Use of Data</h3> <h4>Automated Data Collection</h4> <p>When you access 6Wunderkinder websites, your internet browser automatically transmits data for technical reasons. The following data are stored separately from other data that you may have sent us:</p> <ul> <li>your date and time of access,</li> <li>your browser-type and version,</li> <li>the operating system you use,</li> <li>the URL of the website you have previously visited,</li> <li>the quantity of data transmitted.</li> </ul> <p>For technical reasons these data are stored and are not assigned to any identifiable person at any time.</p> <h4>Data Entered by Users</h4> <p>You can use the Wunderlist product both with and without registering. However, you can only access Wunderlist using certain terminals such as an iPhone, iPod, iPad, Windows, Mac or Android and without additional functions. In order to make use of all its advantages, you have to register. To do this, you must enter your email address and select a password. We require these data in order to guarantee that you are able to make full use of our entire offer. We need these and possibly other data not least in order to respond to your wishes, questions and criticism.</p> <p>In future, we plan to introduce an option which will allow you to design your account personally. For example, you will be able to add a photo, choose a username and set up a connection to your Facebook user account. You will not be obliged to design your account personally; this will be entirely voluntary.</p> <p>The central function of Wunderlist product is task management. You will be able to use this product both online and offline.</p> <p>Where Wunderlist is used solely offline, the data you enter will be stored de-centrally on your storage medium. In such a case, we will not be able to access these data.</p> <p>If you use Wunderlist in combination with a registered account, all data and tasks entered will be integrated into a database. The purpose of this database is to allow you to use Wunderlist at various different levels and call up your tasks anywhere and at any time. Data are transmitted to the respective terminal using SSL encryption so that your data are transmitted securely.</p> <p>We use personal data in order to enable secure, effective and user-related use of Wunderlist services, including for:</p> <ul> <li>calling up the task-list via the internet;</li> <li>anonymously analysing task management statistics for press releases by 6Wunderkinder and studies;</li> <li>recommending Wunderlist by using the "Invite" function for friends and acquaintances (email address).</li> </ul> <h4>Transfer of Data</h4> <p>We will not transfer your data to third parties as a matter of course without letting you know in advance or asking for your prior permission. We may only transfer your data to third parties without informing you separately beforehand in the following exceptional cases as explained below:</p> <ul> <li>If required for investigating the illegal use of Wunderlist or for legal proceedings, personal data will be transferred to the criminal investigation authorities and, if appropriate, to injured third parties. We will only do this if there are concrete indications of illegal and/or abusive behaviour. We can only transfer on your personal data if this is used to enforce General Terms and Conditions of Business or other agreements. We are also legally obliged to give certain public authorities information. These are criminal investigation authorities, public authorities which prosecute administrative offences entailing fines and the German finance authorities.</li> <li>Occasionally we depend on contractually affiliated external companies and external service providers to supply services such as the supply of advertising measures (only if you have given your explicit prior consent), processing payments (PayPal, credit card etc.), storing your data and customer service. In such cases, information is transferred to these companies or individuals in order to enable them to process this information further. We carefully select these external service providers and review them regularly to ensure that your privacy is preserved. The service providers may only use the data for the purposes stipulated by us. We also contractually require the service providers to treat your data solely in accordance with this Privacy Policy and the German data protection laws.</li> <li>In order to further develop our business, we may alter the corporate structure of 6Wunderkinder GmbH by changing its legal form. We may also form, sell or buy subsidiaries, divisions or parts of the company. In such transactions, customer information together with the part of the company to be transferred will be passed on. Every time personal data are transferred to third parties to the extent prescribed, 6Wunderkinder will ensure that this is done in accordance with this Privacy Policy and the relevant data protection laws.</li> </ul> <h4>Newsletter</h4> <p>6Wunderkinder provides a newsletter service free of charge. We use the newsletter to inform you about new products and send you general information about 6Wunderkinder. We need your email address in order to send you the newsletter. You can enter your email address on 6Wunderkinder\'s start page, which is available at <a href="http://www.6wunderkinder.com">http://www.6wunderkinder.com</a>. We will store and use your email address solely to send you the newsletter.</p> <p>Of course you can unsubscribe the newsletter at any time. Every newsletter contains the information on how you can unsubscribe the newsletter with effect for the future.</p> <h4>Cookies</h4> <p>6Wunderkinder stores so-called "cookies" in order to be able to offer you a comprehensive range of functions and to make it easier to use our websites. "Cookies" are small files which are stored on your computer with the help of the internet browser. If you do not want to use "cookies", you can prevent "cookies" from being stored on your computer using the corresponding settings on your internet browser. Please note that this may restrict the functional capability and the range of functions of our offer.</p> <h3>Analysis of Wunderlist</h3> <h4>Statistical Data</h4> <p>When Wunderlist is used, we collect statistical data which can be traced to you. We use it to improve Wunderlist.</p> <h4>Google Analytics</h4> <p>6Wunderkinder uses Google Analytics, a web analysis service of Google Inc. ("Google"). Google Analytics uses so-called "cookies", text files which are stored on your computer and which enable you to analyse your use of Wunderlist. The information generated by the cookie on your use of Wunderlist (including your abbreviated IP address) is transmitted to a Google server in the USA and are stored there. Google will use this information to assess your use of Wunderlist, to compile reports on the activities for us and to provide more services connected with use of Wunderlist and the internet. It is also possible that Google may transmit this information to third parties if this is prescribed by law or if third parties process this information on behalf of Google.</p> <p><strong>You can deactivate Google Analytics by means of a browser add-on if you do not want Wunderlist analysis. You can download this here: <a href="http://tools.google.com/dlpage/gaoptout?hl=de"> http://tools.google.com/dlpage/gaoptout?hl=de.</a></strong></p> <h4>Deleting Your Data</h4> <p>If your data are no longer required for the aforementioned purposes, we will delete them. Completed tasks will remain stored and will be marked "Completed" in the database. If you delete your account, we will also delete all data completely from your account (lists, tasks and shared lists). Data you have entered in lists belonging to third parties will remain in existence as these are part of third party accounts. If data has to be retained for statutory reasons, these will be blocked and will then no longer be available for any further use.</p> <h4>Right to Information and Correction</h4> <p>You naturally have the right to receive information about the data held and stored by 6Wunderkinder about you. Equally, you have the right to have incorrect data corrected or blocked. To have this done, please contact: <a href="mailto:support@wunderlist.com" data-track="Mailto:Support Contact:Privacy Policy">support@wunderlist.com</a> or by post to the address given above.</p> <h4>Amendments to this Privacy Policy</h4> <p>We reserve the right to amend this Privacy Policy. You can call up the current version of the Privacy Policy at any time at: <a href="http://www.6wunderkinder.com/privacy-policy">www.6wunderkinder.com/privacy-policy</a>.</p>';
},
useData: !0
}
}), define("/styles/_privacyPolicy.js", {
name: "_privacyPolicy",
data: ".dialog .content .separator .privacy-policy{background:#fff;padding:30px;overflow:auto;max-height:150px;-webkit-box-shadow:inset 0 0 5px rgba(0,0,0,0.1);box-shadow:inset 0 0 5px rgba(0,0,0,0.1);border:1px solid #ccc;}.dialog .content .separator .privacy-policy p,.dialog .content .separator .privacy-policy h4,.dialog .content .separator .privacy-policy li{font-size:12px;margin-bottom:10px}.dialog .content .separator .privacy-policy h4{margin-bottom:0}.dialog .content .separator .privacy-policy h3{font-size:14px}.dialog .content .separator .privacy-policy h2{font-size:18px;margin-bottom:10px}.dialog .content .separator .privacy-policy a{color:#186ab2}.dialog .content .separator .privacy-policy ul{padding:0 20px;list-style:disc;font-weight:400;line-height:18px}"
}), define("views/Settings/SettingsPrivacyPolicyView", [ "application/runtime", "wunderbits/WBView", "template!privacyPolicy", "style!_privacyPolicy" ], function(e, t, i, n) {
var a = t.prototype;
return t.extend({
template: i,
styles: [ n ],
attributes: {
tabindex: 0
},
className: "privacy-policy",
render: function() {
var e = this;
return a.render.apply(e, arguments), e;
}
});
}), define("/templates/settings/settingsAbout.js", {
name: "settings/settingsAbout",
data: {
"1": function() {
return ' <ul class="social-links"> <li><span class="icon google-btn arrow-btn"></span><a href="https://plus.google.com/105356136092009396367" target="_blank" class="button withArrow">+1</a></li> <li><span class="icon facebook-btn arrow-btn"></span><a href="http://www.facebook.com/wunderlist" target="_blank" class="button withArrow">Like</a></li> <li><span class="icon twitter-btn arrow-btn"></span><a href="https://twitter.com/wunderlist" target="_blank" class="button withArrow">Follow</a></li> </ul> ';
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = "function", s = this.escapeExpression, l = t.helperMissing, d = '<div class="separator big center tabStart" tabindex="0"> <a href="/home" target="_blank"><span class="icon wunderlist-icon"></span></a> <h2> <a class="black" href="/home" target="_blank">Wunderlist</a> </h2> <h3 class="version">' + s((o = t.release || e && e.release, 
typeof o === r ? o.call(e, {
name: "release",
hash: {},
data: n
}) : o)) + "</h3> <p>Copyright © 2015 6 Wunderkinder GmbH</p> <p>" + s((o = t.localized || e && e.localized || l, 
o.call(e, "label_rights_reserved", {
name: "localized",
hash: {},
data: n
}))) + '</p> <p> <a class="toggle-privacy-policy" target="_blank" tabindex="0" role="link">' + s((o = t.localized || e && e.localized || l, 
o.call(e, "settings_privacy_policy", {
name: "localized",
hash: {},
data: n
}))) + " / " + s((o = t.localized || e && e.localized || l, o.call(e, "settings_imprint", {
name: "localized",
hash: {},
data: n
}))) + '</a> - <a href="http://www.wunderlist.com/terms-of-use" target="_blank" tabindex="0">' + s((o = t.localized || e && e.localized || l, 
o.call(e, "settings_terms_of_use", {
name: "localized",
hash: {},
data: n
}))) + '</a> </p> </div> <div class="separator privacy-wrapper hidden"></div> <div class="separator big"> ';
return a = t["if"].call(e, e && e.showSocialButtons, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d + ' <ul class="social-links"> <li><span class="icon sixw-btn arrow-btn"></span><a href="http://www.6wunderkinder.com" target="_blank" class="button withArrow">' + s((o = t.localized || e && e.localized || l, 
o.call(e, "settings_visit_website", {
name: "localized",
hash: {},
data: n
}))) + '</a></li> <li><span class="icon support-btn arrow-btn"></span><a href="http://support.wunderlist.com/" target="_blank" class="button withArrow">' + s((o = t.localized || e && e.localized || l, 
o.call(e, "settings_get_help", {
name: "localized",
hash: {},
data: n
}))) + '</a></li> </ul> </div> <div class="separator center"> <h2 tabindex="0">' + s((o = t.localized || e && e.localized || l, 
o.call(e, "settings_third_party_libraries", {
name: "localized",
hash: {},
data: n
}))) + '</h2> <div tabindex="0" class="separator noline"> <h3>RequireJS</h3> <p> Copyright © 2010-2015 The Dojo Foundation<br> License: <a href="https://github.com/jrburke/requirejs/blob/master/LICENSE" target="_blank">BSD, MIT</a> </p> </div> <div tabindex="0" class="separator noline"> <h3>jQuery</h3> <p> Copyright © 2015 jQuery Foundation and other contributors<br> License: <a href="http://jquery.org/license" target="_blank">jquery.org/license</a> </p> </div> <div tabindex="0" class="separator noline"> <h3>Backbone.js</h3> <p> Copyright © 2010-2015 Jeremy Ashkenas, DocumentCloud<br> License: <a href="https://github.com/documentcloud/backbone/blob/master/LICENSE" target="_blank">github.com/documentcloud/backbone</a> </p> </div> <div tabindex="0" class="separator noline"> <h3>Lo-Dash</h3> <p> Copyright © 2012-2015 John-David Dalton<br> License: <a href="https://github.com/bestiejs/lodash/blob/master/LICENSE.txt" target="_blank">MIT</a> </p> </div> <div tabindex="0" class="separator noline"> <h3>Stylus</h3> <p> Copyright © 2010–2015 LearnBoost<br> License: <a href="https://github.com/LearnBoost/stylus/blob/master/LICENSE" target="_blank">MIT</a> </p> </div> <div tabindex="0" class="separator noline"> <h3>handlebars.js</h3> <p> Copyright © 2011-2015 by Yehuda Katz<br> License: <a href="https://github.com/wycats/handlebars.js/blob/master/LICENSE" target="_blank">github.com/wycats/handlebars.js</a> </p> </div> <div tabindex="0" class="separator noline"> <h3>Moment.js</h3> <p> Copyright © 2011-2012 Tim Wood<br> License: <a href="https://github.com/timrwood/moment/blob/master/LICENSE" target="_blank">github.com/timrwood/moment</a> </p> </div> <div tabindex="0" class="separator noline"> <h3>Mousetrap</h3> <p>Copyright © 2012 Craig Campbell<br/>License: <a href="http://www.apache.org/licenses/LICENSE-2.0.html" target="_blank">Apache License 2.0</a></p> </div> <div tabindex="0" class="separator noline"> <h3>Mailcheck</h3> <p>Copyright © 2012 Received Inc<br/>License: <a href="https://github.com/mailcheck/mailcheck/blob/master/LICENSE" target="_blank">MIT</a></p> </div> <div tabindex="0" class="separator noline"> <h3>setImmediate</h3> <p>Copyright © 2012 Barnesandnoble.com, llc, Donavon West, and Domenic Denicola<br/>License: <a href="https://github.com/YuzuJS/setImmediate/blob/master/LICENSE.txt" target="_blank">MIT</a></p> </div> <div tabindex="0" class="separator noline"> <h3>visibly</h3> <p>Copyright © 2011 Addy Osmani <br/>License: <a href="https://github.com/addyosmani/visibly.js/blob/master/visibly.js" target="_blank">MIT</a></p> </div> <div tabindex="0" class="separator noline"> <h3>ES6 Unicode Shims 0.1</h3> <p>ES6 Unicode Shims 0.1 © 2012 Steven Levithan <br/>License: <a href="https://gist.github.com/slevithan/2290602#file-es6-unicode-shims-js-L4" target="_blank">MIT</a></p> </div> <div tabindex="0" class="separator noline"> <h3>Async.js</h3> <p>Copyright © 2010-2014 Caolan McMahon <br/>License: <a href="https://github.com/caolan/async/blob/master/LICENSE" target="_blank">MIT</a></p> </div> <div tabindex="0" class="separator noline"> <h3>MagiConsole</h3> <p>Copyright © 2015 Raymond May Jr. <br/>License: <a href="https://github.com/octatone/MagiConsole/blob/master/LICENSE" target="_blank">MIT</a></p> </div> <div tabindex="0" class="separator noline"> <h3>twemoji</h3> <p>Copyright © 2014 Twitter, Inc and other contributors<br/>Code License: <a href="https://github.com/twitter/twemoji/blob/gh-pages/LICENSE" target="_blank">MIT</a> - Graphics License: <a href="https://github.com/twitter/twemoji/blob/gh-pages/LICENSE-GRAPHICS" target="_blank">CC-BY 4.0</a></p> </div> <div tabindex="0" class="separator noline"> <h3>Stack Overflow</h3> <p> <a href="http://stackoverflow.com/questions/4811822/get-a-ranges-start-and-end-offsets-relative-to-its-parent-container/4812022#4812022" target="_blank"> Get a range\'s start and end offset\'s relative to its parent container </a> - <a href="http://stackoverflow.com/users/96100/tim-down" target="_blank"> Tim Down </a> </p> <p> <a href="http://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript/21963136#21963136" target="_blank"> Create GUID / UUID in JavaScript? </a> - <a href="http://stackoverflow.com/users/1026023/jeff-ward" target="_blank"> Jeff Ward </a> </p> <p> <a href="http://stackoverflow.com/questions/3545018/selected-text-event-trigger-in-javascript/3545105#3545105" target="_blank"> Selected text event trigger in Javascript </a> - <a href="http://stackoverflow.com/users/70393/karim79" target="_blank"> karim79 </a> </p> </div> <div tabindex="0" class="separator noline"> <h3>' + s((o = t.localized || e && e.localized || l, 
o.call(e, "settings_background_credits", {
name: "localized",
hash: {},
data: n
}))) + '</h3> <p> <a href="http://artcore-illustrations.de/" target="_blank">Artcore</a> - <a href="http://www.dvq.co.nz/" target="_blank">Matthew Skiles</a> - <a href="http://500px.com/constantin_gololobov" target="_blank">Constantin Gololobov</a> - <a href="http://www.flickr.com/photos/tycn" target="_blank">Brandon Harris</a> - <a href="http://www.justinkiner.com/" target="_blank">Justin Kiner</a> - <a href="http://bo0xvn.deviantart.com/" target="_blank">Vu Minh Hai</a> - <a href="http://www.jinnavanringen.com" target="_blank">Jinna Van Ringen</a> - <a href="http://fiftyfootshadows.net/" target="_blank">John Carey</a> - <a href="http://500px.com/Actionjesus" target="_blank">Frederik Falck Hole</a> - <a href="http://duncandavidson.com" target="_blank">Duncan Davidson</a> - <a href="http://500px.com/pat138241" target="_blank">Patrick Foto</a> - Candy Ho </p> </div> <div class="tabEnd" tabindex="0" data-key-aria-label="aria_user_menu_hint"/> </div> ';
},
useData: !0
}
}), define("/styles/settings/settingsAbout.js", {
name: "settings/settingsAbout",
data: "#wunderlist-base .settings-about a.black{color:#1c1c1c}"
}), define("views/Settings/SettingsAboutView", [ "application/runtime", "views/Settings/Controllers/SettingsAboutViewController", "views/Settings/SettingsSubview", "views/Settings/SettingsPrivacyPolicyView", "template!settings/settingsAbout", "style!settings/settingsAbout" ], function(e, t, i, n, a, o) {
var r = e.config, s = i.prototype;
return i.extend({
template: a,
styles: [ o ],
className: "settings-content-inner settings-about",
"implements": [ t ],
emits: {
"click .toggle-privacy-policy": "click:privacyPolicy",
"click a": "click:link"
},
initialize: function() {
var e = this;
s.initialize.apply(e, arguments), e.privacyView = e.addSubview(new n());
},
render: function() {
var t = this, i = {
release: r.release,
showSocialButtons: e.user.showSocialButtons()
};
return s.render.call(t, i), t.privacyEl = t.$(".privacy-wrapper"), t.privacyEl.html(t.privacyView.render().el), 
t;
},
showTogglePrivacyPolicy: function() {
var e = this;
e.privacyEl.toggleClass("hidden"), e.privacyEl.hasClass("hidden") || e.defer(function() {
e.privacyView.$el.focus();
});
}
});
}), define("/templates/settings/settingsGroupBilling.js", {
name: "settings/settingsGroupBilling",
data: {
"1": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return " " + r((a = t.localized || e && e.localized || o, a.call(e, "group_billing_manage_team", {
name: "localized",
hash: {},
data: n
}))) + " ";
},
"3": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return " " + r((a = t.localized || e && e.localized || o, a.call(e, "button_label_buy_wunderlist_for_business", {
name: "localized",
hash: {},
data: n
}))) + " ";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = "function", d = '<div class="group-billing"> <div class="hero-img"></div> <div class="separator noline center teams-heading"> <h2 class="strong">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "group_billing_packages_title", {
name: "localized",
hash: {},
data: n
}))) + '</h2> <p class="team-plan">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "group_billing_packages_text", {
name: "localized",
hash: {},
data: n
}))) + '</p> </div> <div class="separator noline"> <div class="cols"> <div class="col-20"></div> <div class="col-60"> <a href="' + s((o = t.domain || e && e.domain, 
typeof o === l ? o.call(e, {
name: "domain",
hash: {},
data: n
}) : o)) + '/business/admin" target="_blank" class="button big green go-to-business"> ';
return a = t["if"].call(e, e && e.isAdmin, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.program(3, n),
data: n
}), (a || 0 === a) && (d += a), d + ' </a> </div> <div class="col-20"></div> </div> </div> </div> ';
},
useData: !0
}
}), define("/styles/_groupBillingStyle.js", {
name: "_groupBillingStyle",
data: '#wunderlist-base .beta-disabled{pointer-events:none;opacity:.3;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=30)";filter:alpha(opacity=30);-webkit-filter:blur(2px)}#wunderlist-base .beta-message{top:40%;position:absolute;text-align:center;}#wunderlist-base .beta-message h2{font-size:34px}#wunderlist-base .beta-message p{font-size:18px;line-height:28px}#wunderlist-base .beta-message a{color:#2b88d9}#wunderlist-base .service-unavailable .line:after{height:50% !important}#wunderlist-base .service-unavailable .line:before{height:50% !important}#wunderlist-base .group-billing{overflow:hidden;}#wunderlist-base .group-billing h2{font-size:21px;color:#423e3e;margin:14px 0 10px 0;text-shadow:0 1px 0 #fff}#wunderlist-base .group-billing h3{width:90%;margin:0 auto}#wunderlist-base .group-billing .cancelation-options.closed{display:none}#wunderlist-base .group-billing .show-delete-wrapper{margin:14px 0}#wunderlist-base .group-billing .hero-img{margin:0 auto;background-image:url("images/team-pro-hero.png");background-repeat:no-repeat;width:100%;height:170px;-webkit-background-size:cover;-moz-background-size:cover;background-size:cover;background-position:center center}#wunderlist-base .group-billing .offline{text-align:center !important;font-weight:bold}#wunderlist-base .group-billing .manage-team{padding-bottom:0 !important;}#wunderlist-base .group-billing .manage-team h3{font-size:16px !important;text-shadow:0 1px 0 #fff;margin-bottom:0 !important}#wunderlist-base .group-billing .manage-team .counter{color:#bdbcbb;font-weight:bold;font-size:12px;text-shadow:0 1px 0 #fff;}#wunderlist-base .group-billing .manage-team .counter.maxed{color:#c82525}#wunderlist-base .group-billing p{line-height:24px;color:#423e3e;width:90%;font-size:14px;margin:0 auto;text-shadow:0 1px 0 #fff;}#wunderlist-base .group-billing p.team-plan{font-size:14px !important;line-height:21px !important}#wunderlist-base .group-billing p.cancel-error{color:#f00 !important}#wunderlist-base .group-billing p.cancel-notice .token_0{font-weight:bold}#wunderlist-base .group-billing p a{color:#186ab2}#wunderlist-base .group-billing input{padding:8px;-webkit-border-radius:4px;border-radius:4px;width:95%;margin:0 auto;display:block}#wunderlist-base .group-billing button,#wunderlist-base .group-billing .button{color:#fff;margin-bottom:3px;}#wunderlist-base .group-billing button.manage-link,#wunderlist-base .group-billing .button.manage-link{color:#666 !important;margin:-14px 0 0 0;position:absolute;width:79px;height:29px;display:none}#wunderlist-base .group-billing button.view,#wunderlist-base .group-billing .button.view{color:#666 !important;font-size:13px;line-height:13px;padding-top:4px;margin:0 0 1px 8px;-webkit-border-radius:3px;border-radius:3px}#wunderlist-base .group-billing button.buy-plan,#wunderlist-base .group-billing .button.buy-plan{margin:-14px 0 0 -42px;right:192px;position:absolute;width:120px;line-height:0;height:25px;height:29px;font-size:12px;-webkit-border-radius:3px;border-radius:3px}#wunderlist-base .group-billing button.upgrade,#wunderlist-base .group-billing .button.upgrade{font-size:13px;line-height:13px;padding-top:7px;margin:0 0 1px 8px;-webkit-border-radius:3px;border-radius:3px}#wunderlist-base .group-billing button.cancel-terms-of-use,#wunderlist-base .group-billing .button.cancel-terms-of-use,#wunderlist-base .group-billing button.return-cancel,#wunderlist-base .group-billing .button.return-cancel,#wunderlist-base .group-billing button.return-change,#wunderlist-base .group-billing .button.return-change{color:#423e3e}#wunderlist-base .group-billing .button-wrapper,#wunderlist-base .group-billing .manage{padding-right:0 !important}#wunderlist-base .group-billing .alert-image{text-align:right}#wunderlist-base .group-billing .plan-change .change-btn-group{margin:10px 0}#wunderlist-base .group-billing .plan-change p{font-size:14px !important;line-height:21px !important;font-weight:normal}#wunderlist-base .group-billing .member-count-response{text-align:center;color:#d62822;}#wunderlist-base .group-billing .member-count-response a{color:#d62822;font-weight:bold}#wunderlist-base .group-billing .buy-options .center{text-align:center;font-size:13px;font-weight:normal;margin-bottom:10px;line-height:17px !important;}#wunderlist-base .group-billing .buy-options .center.error{color:#c82525}#wunderlist-base .group-billing .manage{margin-top:8px !important;text-decoration:none !important;}#wunderlist-base .group-billing .manage .contacts.slots-free li .invitable{opacity:.5;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";filter:alpha(opacity=50);}#wunderlist-base .group-billing .manage .contacts.slots-free li .invitable .state{display:none}#wunderlist-base .group-billing .manage .group:first-child{background:none}#wunderlist-base .group-billing .manage li .name{color:#262626}#wunderlist-base .group-billing .manage li .description{color:$linkblue}#wunderlist-base .group-billing .manage li .state{float:right;position:relative;}#wunderlist-base .group-billing .manage li .state.add-pro-teammate{opacity:.5;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";filter:alpha(opacity=50);}#wunderlist-base .group-billing .manage li .state.add-pro-teammate:hover{opacity:1;-ms-filter:none;filter:none}#wunderlist-base .group-billing .manage li .state.save{color:#2b88d9;}#wunderlist-base .group-billing .manage li .state.save:hover:before{content:\'5\'}#wunderlist-base .group-billing .manage li .pro-small{position:absolute;right:-8px;top:-5px;z-index:9999}#wunderlist-base .group-billing .manage li::after{content:\'\';width:90%;height:1px;margin-top:-10px;position:absolute;background-image:-webkit-linear-gradient(left, #fff 0%, #dedede 50%, #fff 100%);background-image:-moz-linear-gradient(left, #fff 0%, #dedede 50%, #fff 100%);background-image:-o-linear-gradient(left, #fff 0%, #dedede 50%, #fff 100%);background-image:-ms-linear-gradient(left, #fff 0%, #dedede 50%, #fff 100%);background-image:linear-gradient(to right, #fff 0%, #dedede 50%, #fff 100%);background-repeat:no-repeat}#wunderlist-base .group-billing .manage li:last-child:after{height:0}#wunderlist-base .group-billing .groups{width:430px;margin:15px auto 15px auto;background:#fff;border:1px solid #cdcdcd;-webkit-border-radius:4px;border-radius:4px;color:#7d7b7c;position:relative;-webkit-box-shadow:0 1px 1px rgba(0,0,0,0.1);box-shadow:0 1px 1px rgba(0,0,0,0.1);font-size:14px;font-weight:normal;}#wunderlist-base .group-billing .groups.products .state{margin:0 11px 0 10px}#wunderlist-base .group-billing .groups.line:after{content:\'\';position:absolute;width:1px;height:87.5%;border-left:1px solid #cdcdcd;right:25%;top:0}#wunderlist-base .group-billing .groups.line-save:before{content:\'\';position:absolute;width:1px;height:87.5%;border-left:1px solid #cdcdcd;right:42%;top:0;z-index:99999}#wunderlist-base .group-billing .groups.summary{margin-bottom:10px;padding-top:3px;padding-bottom:3px;}#wunderlist-base .group-billing .groups.summary .group:first-child{-webkit-border-radius:4px !important;border-radius:4px !important;background:none !important}#wunderlist-base .group-billing .groups.summary:after{right:50%;height:100%}#wunderlist-base .group-billing .groups .group{padding-top:15px;padding-bottom:15px;text-align:left;margin-bottom:0 !important;border-top:1px solid #cdcdcd;position:relative;overflow:hidden;}#wunderlist-base .group-billing .groups .group.group-item.has-savings:hover{cursor:pointer;background:#f8fbfe;border-top:1px solid #dae8f7;border-bottom:1px solid #dae8f7;}#wunderlist-base .group-billing .groups .group.group-item.has-savings:hover:last-child{border-bottom:none !important;border-bottom-left-radius:4px;border-bottom-right-radius:4px}#wunderlist-base .group-billing .groups .group.group-item.has-savings:hover + .group{border-top:none !important;}#wunderlist-base .group-billing .groups .group.group-item.has-savings:hover + .group.selected{border-top:1px solid #b4d3e6 !important;margin-top:-1px}#wunderlist-base .group-billing .groups .group div.name span,#wunderlist-base .group-billing .groups .group div.name .token_0{font-weight:bold;min-width:25px;display:inline-block;text-align:center}#wunderlist-base .group-billing .groups .group div.price{text-align:center;color:#2b88d9;font-weight:bold;font-size:17px;line-height:15px;padding-right:0 !important}#wunderlist-base .group-billing .groups .group div.save{text-align:center;color:#fff;font-size:17px;font-weight:bold;position:relative;z-index:99;}#wunderlist-base .group-billing .groups .group div.save.amount{color:#94b978;font-weight:bold;font-size:16px;line-height:0}#wunderlist-base .group-billing .groups .group div.save .highlight{position:absolute;margin-left:-27px;margin-top:-5px;z-index:-50}#wunderlist-base .group-billing .groups .group div.accounts-summary{font-weight:normal;font-size:15px;line-height:15px;}#wunderlist-base .group-billing .groups .group div.accounts-summary .token_0{font-weight:bold}#wunderlist-base .group-billing .groups .group div.large-team{font-size:14px;color:#666;text-align:center;display:inline-block;font-weight:bold;}#wunderlist-base .group-billing .groups .group div.large-team a{display:inline-block;color:#2b88d9}#wunderlist-base .group-billing .groups .group .savings{position:absolute;font-size:10px;right:-70px;opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0);z-index:9999;display:block;margin-top:-4px}#wunderlist-base .group-billing .groups .group.headings{cursor:default;}#wunderlist-base .group-billing .groups .group.headings .team-heading{line-height:1;font-size:15px}#wunderlist-base .group-billing .groups .group.headings .price{line-height:17px;color:#737272;}#wunderlist-base .group-billing .groups .group.headings .price span{display:block;font-size:11px;font-weight:normal;color:#a3a3a2}#wunderlist-base .group-billing .groups .group:first-child{border-top-left-radius:4px;border-top-right-radius:4px;font-weight:bold;border-top:none !important;background:#fbfbfb !important;padding-top:6px;padding-bottom:5px;}#wunderlist-base .group-billing .groups .group:first-child.input-container{background:none !important;position:relative;}#wunderlist-base .group-billing .groups .group:first-child.input-container input{margin-top:5px;padding-right:30px}#wunderlist-base .group-billing .groups .group:first-child.input-container .clear{position:absolute;right:18px;top:18px}#wunderlist-base .group-billing .groups .group.search-container{border-top:none;padding-top:4px;padding-bottom:0;}#wunderlist-base .group-billing .groups .group.search-container .info-container{margin:-3px 0 20px 4px;vertical-align:top;}#wunderlist-base .group-billing .groups .group.search-container .info-container .name{font-weight:bold;font-size:13px;margin-top:2px}#wunderlist-base .group-billing .groups .group.search-container .info-container .description{margin-top:3px;font-size:11px;}#wunderlist-base .group-billing .groups .group.search-container .info-container .description.empty-name{font-size:13px;margin-top:10px;font-weight:bold}#wunderlist-base .group-billing .groups .group.search-container .info-container .description a{display:block;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}#wunderlist-base .group-billing .groups .group.search-container .error-already-pro{color:#d62822;padding:20px}#wunderlist-base .group-billing .groups .group.selected{border-top:1px solid #b4d3e6 !important;background:#e2f1fb !important;border-bottom:1px solid #b4d3e6 !important;}#wunderlist-base .group-billing .groups .group.selected:last-child{border-bottom:none !important;border-bottom-left-radius:4px;border-bottom-right-radius:4px}#wunderlist-base .group-billing .groups .group.selected + .group{border-top:none !important}#wunderlist-base .group-billing .groups .group.current .manage-link{display:block !important}#wunderlist-base .group-billing .groups .group.current .buy-plan{display:none !important}#wunderlist-base .group-billing .groups .group .owned{height:21px;margin-top:-7px;background-position:-275px -67px;cursor:default}#wunderlist-base .group-billing .groups .group .coachmark-text{font-size:12px;color:#bdbcbb;text-align:center;width:300px;line-height:17px;margin:0 auto;padding-bottom:20px}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (min--moz-device-pixel-ratio:1.5){#wunderlist-base .group-billing .hero-img{background-image:url("images/team-pro-hero@2x.png")}}'
}), define("views/Settings/GroupBillingOutlet", [ "application/runtime", "wunderbits/WBViewPresenter", "template!settings/settingsGroupBilling", "style!_groupBillingStyle" ], function(e, t, i, n, a) {
var o = e.config, r = t.prototype;
return t.extend({
template: i,
className: "settings-content-inner",
styles: [ n ],
observes: {
runtime: {
"language:change": "render"
}
},
renderData: {
isAdmin: a,
domain: ""
},
formatData: function(t) {
var i = this;
return t = r.formatData.call(i, t), t.isAdmin = e.user.isProTeamAdmin(), e.env.isChromeApp() && (t.domain = "https://" + (o.domain_name || "www.wunderlist.com")), 
t;
}
});
}), define("views/Settings/Controllers/SettingsViewController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/WBModalViewController" ], function(e, t, i) {
var n = e.$;
return i.extend({
trackableElementName: "Settings",
"implements": {
"click:tab": "onSelectSubview",
"keydown:tab": "handleKeys"
},
onSelectSubview: function(t) {
var i = this, a = i.view, o = n(t.target).closest("a").attr("rel");
"teams" === o && e.user.isProTeamAdmin() && (o = "team-manage"), e.trigger("analytics:Preferences:clickTab", o), 
e.trigger("route:preferences/" + o), a.accountView && !a.accountView.destroyed && a.accountView.closeAllEdits();
},
handleKeys: function(e) {
var i = this;
e.which === t.tab && i.handleTabKey(e);
},
handleTabKey: function(e) {
var t = this.view;
e.shiftKey || t.getSubview(t.currentSection).$(".tabStart").focus(), e.preventDefault(), 
e.stopPropagation();
}
});
}), define("/templates/settings/settings.js", {
name: "settings/settings",
data: {
"1": function() {
return " hidden ";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = '<div class="tabs"> <ul role="tabpanel"> <li role="tab" tabindex="0" tabindex="0" data-key-aria-label="settings_heading_general"> <a rel="general"> <span class="icon settings-general"></span> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_heading_general", {
name: "localized",
hash: {},
data: n
}))) + ' </a> </li> <li role="tab" tabindex="0"data-key-aria-label="settings_heading_account"> <a rel="account"> <span class="icon settings-account"></span> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_heading_account", {
name: "localized",
hash: {},
data: n
}))) + ' </a> </li> <li class="teams ';
return a = t["if"].call(e, e && e.isMember, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l + '" role="tab" tabindex="0" data-key-aria-label="settings_heading_team" data-key-aria-label=""> <a rel="team-manage"> <span class="icon settings-group"></span> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_heading_team", {
name: "localized",
hash: {},
data: n
}))) + ' </a> </li> <li role="tab" tabindex="0" data-key-aria-label="" data-key-aria-label="settings_heading_shortcuts"> <a rel="shortcuts"> <span class="icon settings-shortcuts"></span> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_heading_shortcuts", {
name: "localized",
hash: {},
data: n
}))) + ' </a> </li> <li role="tab" tabindex="0" data-key-aria-label="" data-key-aria-label="settings_heading_sidebar"> <a rel="sidebar"> <span class="icon settings-sidebar"></span> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_heading_sidebar", {
name: "localized",
hash: {},
data: n
}))) + ' </a> </li> <li role="tab" tabindex="0" data-key-aria-label="" data-key-aria-label="settings_heading_notification"> <a rel="notifications"> <span class="icon settings-notifications"></span> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_heading_notification", {
name: "localized",
hash: {},
data: n
}))) + ' </a> </li> <li role="tab" tabindex="0" data-key-aria-label="settings_heading_about"> <a rel="about"> <span class="icon settings-about"></span> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_heading_about", {
name: "localized",
hash: {},
data: n
}))) + " </a> </li> </ul> </div> ";
},
useData: !0
}
}), define("/styles/modals/settingsModal.js", {
name: "modals/settingsModal",
data: 'html[dir=rtl] #settings.scroll .settings-content-inner-wrapper{padding-left:14px;padding-right:0}#settings{width:auto;}#settings.scroll .settings-content-inner-wrapper{position:absolute;left:0;right:0;top:69px;bottom:54px;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch;padding:0;margin-bottom:0;margin-right:0}#settings.scroll .settings-content-inner{margin:0 auto}#settings .settings-content-inner{padding:0 30px;max-width:550px;margin:0 auto 54px auto;}#settings .settings-content-inner.team-manage{padding:0;max-width:600px}#settings .manage{color:#186ab2;text-decoration:underline}#settings .pro-section-style h3{font-size:24px;font-weight:600;margin-bottom:10px;color:#544f4f;}#settings .pro-section-style h3.upgrade-header,#settings .pro-section-style h3.yay-pro{font-weight:normal;}#settings .pro-section-style h3.upgrade-header .token_0,#settings .pro-section-style h3.yay-pro .token_0{font-weight:bold}#settings .pro-section-style .teams{margin-top:10px}#settings .pro-section-style p{color:#737272;text-shadow:0 1px 0 #fff;margin-bottom:11px;line-height:17px}#settings .pro-section-style b{display:block}#settings .pro-section-style .accept-terms a{font-weight:bold;color:#737272}#settings .pro-benefits div.benefit{background:url("images/sprites/benefits.png");}#settings .pro-benefits div.benefit.assigning{background-position:0 0;width:134px;height:102px}#settings .pro-benefits div.benefit.subtasks{background-position:-134px -102px;width:134px;height:102px}#settings .pro-benefits div.benefit.backgrounds{background-position:-134px 0;width:134px;height:102px}#settings .pro-benefits div.benefit.attachments{background-position:0 -102px;width:134px;height:102px;margin-left:1px}#settings .pro-benefits h4{font-size:16px;margin-bottom:6px;}#settings .pro-benefits h4 span.light{font-weight:200;font-size:14px}#settings .pro-benefits p{width:270px;font-size:13px;line-height:17px;color:#737272}#settings .filter-setting .label,#settings .filter-setting svg{vertical-align:middle}#settings .filter-setting svg{margin-right:10px}#settings .filter-setting.disabled .label,#settings .filter-setting.disabled svg{opacity:.6;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";filter:alpha(opacity=60)}#settings .filter-setting.disabled select{pointer-events:auto}@media only screen and (-webkit-min-device-pixel-ratio: 1.5), only screen and (min--moz-device-pixel-ratio: 1.5){#settings .pro-benefits div.benefit{background-image:url("images/sprites/benefits-retina.png");-webkit-background-size:268px;-moz-background-size:268px;background-size:268px}}html[dir=rtl] #settings .filter-setting .wundercon{margin-right:0;margin-left:10px}'
}), define("views/Settings/SettingsView", [ "application/runtime", "collections/ServiceCollection", "helpers/Auth/facebook", "wunderbits/WBModalView", "wunderbits/WBBlurHelper", "views/Settings/SettingsGeneralView", "views/Settings/SettingsAccountView", "views/Settings/SettingsFiltersView", "views/Settings/SettingsShortcutsView", "views/Settings/SettingsNotificationsView", "views/Settings/SettingsAboutView", "views/Settings/GroupBillingOutlet", "views/Settings/Controllers/SettingsViewController", "template!settings/settings", "style!modals/settingsModal" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m, g, f) {
var b = e._, h = e.$, v = n.prototype, _ = a, w = [ {
name: "general",
"const": o
}, {
name: "account",
"const": r
}, {
name: "shortcuts",
"const": l
}, {
name: "sidebar",
"const": s
}, {
name: "notifications",
"const": d
}, {
name: "about",
"const": c
}, {
name: "team-manage",
"const": u
} ];
return n.extend({
template: m,
styles: [ g ],
"implements": [ p ],
emits: {
"click .tabs li a": "click:tab",
"keydown .tabs li": "keydown:tab"
},
observes: {
runtime: {
"subscriptions:ready": "updateTeamsTab"
}
},
renderData: {
isMember: f
},
initialize: function(t) {
var i = this;
i.subViewMap = w.slice(0), e.user.isProTeamAdmin() ? i.subViewMap.splice(2, 0, {
name: "team-manage",
"const": u
}) : i.subViewMap.splice(2, 0, {
name: "teams",
"const": u
}), e.user.isProTeamMember() && !e.user.isProTeamAdmin() && i.subViewMap.splice(7, 1), 
i._isRendered = !1, t || (t = {}), v.initialize.apply(i, arguments), i.bindTo(e, "settings:navigate", i.navigate), 
i.bindTo(e, "settings:close", i.onSettingsClose), i.bindTo(e.user, "change:pro", function() {
i.updateTeamsTab(), i.render();
}), i.bindTo(e, "language:change", function() {
i.defer(function() {
i.adjustPosition();
});
}), i.bindTo(e, "settings:section", i.renderWithSection);
},
formatData: function(t) {
var i = e.user;
return t.isMember = i.isProTeamMember(), t;
},
render: function() {
var t = this, i = {
id: "settings",
close: e.language.getText("button_done")
};
if (!t._isRendered) {
v.render.call(t, i);
var n = h(t.template(t.formatData(t.renderData)))[0], a = t.$(".content");
a[0].appendChild(n);
var o = h(document.createElement("div"));
return o.addClass("settings-content-inner-wrapper"), a[0].appendChild(o[0]), t._isRendered = !0, 
t.renderLocalized(), t.updateTeamsTab(), t.defer(function() {
t.adjustPosition();
}), t;
}
},
adjustPosition: function() {
var e = this, t = e.$("#settings");
t.css({
"margin-left": -t.width() / 2
});
},
renderWithSection: function(t, i) {
var n = this;
n.currentSection = t, _.run(), n.render(), n.onClose = n.onClose || i && i.onClose, 
n.returnFocus = e.focus;
var a;
b.each(n.subViewMap, function(e) {
e.name !== t && (a = n[e.name + "View"], a && !a.destroyed && a.destroy());
});
var o = "account-pro" === t ? "account" : t;
"teams" === o && e.user.isProTeamAdmin() && (o = t = "team-manage");
var r = b.where(n.subViewMap, {
name: o
})[0];
if (!r) return e.trigger("route:preferences/account");
var s = n[r.name + "View"];
(!s || s.destroyed) && (s = n[r.name + "View"] = n.addSubview(new r["const"](f, i), r.name), 
s.render(), n.$(".settings-content-inner-wrapper")[0].appendChild(s.el), n.bindToSubview(s)), 
"account-pro" === t ? (t = "account", n.accountView && (n.accountView.subscriptionView.render(), 
n.accountView.subscriptionView.showBenefits(), n.defer(function() {
n.accountView.subscriptionView.$(".tabStart").focus();
}))) : n.accountView && n.accountView.subscriptionView && n.accountView.subscriptionView.hideBenefits(), 
n.showRenderedSection(t);
},
bindToSubview: function(e) {
var t = this;
t.bindTo(e, "focus:tab", t.refocusTab), t.bindTo(e, "change:content", t.checkScrolling);
},
refocusTab: function() {
var e = this;
e.$(".tabs li.active").focus();
},
showRenderedSection: function(t) {
var i = this;
i[t + "View"] && i[t + "View"].$el.removeClass("hidden"), i.$(".active").removeClass("active"), 
i.$("a[rel=" + t + "]").parent().addClass("active").focus(), i.checkScrolling(), 
i.$(".settings-content-inner-wrapper").scrollTop(0), i.$(".settings-content-inner").addClass(t), 
("teams" === t || "notifications" === t) && (t = t.substring(0, t.length - 1)), 
e.trigger("title:set", t, {
isPrefsTabKey: !0
});
},
onSettingsClose: function() {
var e = this;
e.isVisible() && e.trigger("click:close");
},
onRemove: function() {
var e = this;
b.each(e.subViewMap, function(t) {
e[t.name + "View"] = null;
});
},
updateTeamsTab: function() {
var t = this, i = !0;
e.user.isProTeamMember() && !e.user.isProTeamAdmin() && (i = !1, t.currentSection && t.currentSection.indexOf("team") >= 0 && t.renderWithSection("account")), 
t.$("li.teams").toggleClass("hidden", !i);
},
navigate: function(t) {
var i, n, a = this, o = b.pluck(a.subViewMap, "name"), r = "team-manage" === a.currentSection ? "teams" : a.currentSection, s = b.indexOf(o, r);
"right" === t ? i = s + 1 <= o.length - 2 ? s + 1 : 0 : "left" === t && (i = s - 1 >= 0 ? s - 1 : o.length - 2), 
("right" === t || "left" === t) && (n = "teams" === o[i] && e.user.isProTeamAdmin() ? "team-manage" : o[i], 
_.run(), e.trigger("route:preferences/" + n), a.accountView && !a.accountView.destroyed && a.accountView.closeAllEdits());
}
});
}), define("views/Main/ModalManagerView", [ "application/runtime", "wunderbits/WBViewPresenter", "labs/FlashCards/FlashCardsModalView", "labs/LabsView", "views/Social/RateModalView", "views/Social/TellModalView", "views/Debug/DebugModalView", "views/IYF/InviteYourFriendsView", "views/Main/WhatsNewView", "views/Modals/ConfirmationModalView", "views/Modals/ListOptionsModalView", "views/Modals/ChooseBackgroundModalView", "views/Modals/ChooseListsModalView", "views/Modals/ChooseBusinessListsModalView", "views/Reminders/RemindersView", "views/Settings/SettingsView" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m, g, f) {
var b = t.prototype;
return t.extend({
id: "modals",
modalClasses: {
flashCards: i,
labs: n,
inviteYourFriends: s,
whatsNew: l,
rate: a,
tell: o,
debug: r,
confirm: d,
preferences: f,
listOptions: c,
backgrounds: u,
chooseLists: p,
chooseBusinessLists: m
},
observes: {
runtime: {
"modal:show": "showModal",
"modal:close": "closeModal",
"modal:confirm": "showConfirmation"
}
},
render: function() {
var e = this;
b.render.apply(e, arguments);
var t = e.addSubview(new g(), "reminders");
return e.$el.append(t.render().el), e;
},
showConfirmation: function(e) {
var t = this;
t.showModal("confirm", e);
},
closeModal: function() {
var e = this, t = e.getSubview("modal");
t && t.trigger("close");
},
showModal: function(e, t) {
var i = this, n = i.modalClasses[e];
t.name = e;
var a = i.getSubview("modal");
a || (a = i.addSubview(new n(t), "modal"), a.name = e, i.el.appendChild(a.render().el)), 
a.trigger("modal:update", t), a.checkScrolling();
}
});
}), define("/templates/symbols/accept.js", {
name: "symbols/accept",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<svg class="accept" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>accept-invite</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage"> <g id="accept-invite" sketch:type="MSArtboardGroup" fill="#000000"> <path d="M7.48,17 C7.36,17 7.24,16.94 7.14,16.86 C5.66,15.36 4,14.04 2.24,12.92 C2,12.78 1.92,12.46 2.08,12.24 C2.22,12 2.54,11.94 2.76,12.08 C4.42,13.12 5.98,14.34 7.38,15.7 C10.34,10.82 13.38,6.92 17.14,3.14 C17.34,2.96 17.66,2.96 17.86,3.14 C18.04,3.34 18.04,3.66 17.86,3.86 C14,7.7 10.94,11.68 7.92,16.76 C7.84,16.88 7.7,16.98 7.56,17 L7.48,17 Z" id="H" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/pendingInviteItem.js", {
name: "pendingInviteItem",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression, s = t.helperMissing;
return '<div class="avatar-container"> </div> <div class="invite-text"> <div class="title">' + r((a = t.title || e && e.title, 
typeof a === o ? a.call(e, {
name: "title",
hash: {},
data: n
}) : a)) + '</div> <div class="from">from ' + r((a = t.inviter || e && e.inviter, 
typeof a === o ? a.call(e, {
name: "inviter",
hash: {},
data: n
}) : a)) + '</div> </div> <div class="buttonbar invite-buttons"> <button class="reject">' + r((a = t.symbol || e && e.symbol || s, 
a.call(e, "delete", {
name: "symbol",
hash: {},
data: n
}))) + '</button> <button class="accept">' + r((a = t.symbol || e && e.symbol || s, 
a.call(e, "accept", {
name: "symbol",
hash: {},
data: n
}))) + "</button> </div>";
},
useData: !0
}
}), define("/styles/pendingInviteItem.js", {
name: "pendingInviteItem",
data: ".sidebarItem.pendingInvite{height:48px;display:-webkit-box;display:-moz-box;display:-webkit-flex;display:-ms-flexbox;display:box;display:flex;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;}.sidebarItem.pendingInvite svg{position:static}.sidebarItem.pendingInvite .avatar-container,.sidebarItem.pendingInvite .invite-buttons{padding:10px;}.sidebarItem.pendingInvite .avatar-container button,.sidebarItem.pendingInvite .invite-buttons button{width:50%;padding:1px 10px;}.sidebarItem.pendingInvite .avatar-container button svg,.sidebarItem.pendingInvite .invite-buttons button svg{margin:-5px 0}.sidebarItem.pendingInvite .invite-text{-webkit-box-flex:1;-moz-box-flex:1;-o-box-flex:1;box-flex:1;-webkit-flex:1 auto;-ms-flex:1 auto;flex:1 auto;padding:10px 0}.sidebarItem.pendingInvite .title,.sidebarItem.pendingInvite .from{color:#737272;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;max-width:114px}.sidebarItem.pendingInvite .title{font-weight:700}.sidebarItem.pendingInvite .from{font-size:12px}@media all and (max-width:900px){.sidebarItem.pendingInvite .title,.sidebarItem.pendingInvite .from{max-width:50px}}"
}), define("views/Sidebar/PendingInviteItemView", [ "collections/UserCollection", "views/AvatarView", "wunderbits/WBViewPresenter", "partial!symbols/accept", "partial!symbols/delete", "template!pendingInviteItem", "style!pendingInviteItem" ], function(e, t, i, n, a, o, r, s) {
var l = i.prototype;
return i.extend({
className: "sidebarItem pendingInvite",
tagName: "li",
template: o,
styles: [ r ],
renderData: {
inviter: s,
title: s
},
users: new e("/users/all"),
formatData: function(e) {
var t = this;
e = l.formatData.call(t, e);
var i = t.users.get(t.membership.attributes.sender_id);
return e.inviter = i ? i.attributes.name : "Someone", e.title = t.list.attributes.title, 
t.data = e, e;
},
initialize: function(e) {
var t = this;
l.initialize.apply(t, arguments), t.membership = e.membership, t.list = e.list, 
t.bindTo(t.users, "add", "onUserAdd");
},
render: function() {
var e = this;
l.render.call(e, e.formatData(e.renderData));
var i = e.membership.attributes, n = new t({
size: "almostmedium"
});
return n.render({
id: i.sender_id
}), e.addSubview(n, "avatarView"), e.$(".avatar-container")[0].appendChild(n.el), 
e.$el.attr("rel", i.id), e.$el.attr("title", e.data.title + " from " + e.data.inviter), 
e.hasRenderedOnce = !0, e;
},
onUserAdd: function() {
var e = this;
if (!e.destroyed && e.hasRenderedOnce) {
var t = e.users.get(e.membership.attributes.sender_id);
t && e.render();
}
}
});
}), define("views/Sidebar/Controllers/PendingInviteController", [ "application/runtime", "wunderbits/WBViewController", "collections/ListCollection", "collections/MembershipCollection" ], function(e, t, i, n) {
var a = e.$;
return t.extend({
memberships: new n("/memberships/all"),
lists: new i("/lists/all"),
sortableLists: new i("/lists/sortable"),
"implements": {
"click:accept": "acceptMembership",
"click:reject": "rejectMembership"
},
acceptMembership: function(t) {
var i = this, n = i.getMembershipFromClick(t);
if (n) {
n.save({
state: "accepted"
});
var a = i.lists.get(n.attributes.list_id);
a && a.save("position", i.sortableLists.getFirstPosition()), a && e.trigger("route:" + a.route());
}
},
rejectMembership: function(e) {
var t = this, i = t.getMembershipFromClick(e);
i.destroy();
},
getMembershipFromClick: function(e) {
var t = this, i = a(e.target).closest(".pendingInvite").attr("rel"), n = i && t.memberships.get(i);
return n;
}
});
}), define("views/Sidebar/PendingInvitesCollectionView", [ "application/runtime", "collections/ListCollection", "collections/MembershipCollection", "views/Sidebar/PendingInviteItemView", "views/Sidebar/Controllers/PendingInviteController", "wunderbits/WBViewPresenter", "project!core/WBDeferred" ], function(e, t, i, n, a, o) {
var r = o.prototype;
return o.extend({
tagName: "ul",
className: "pending-invites-collection",
"implements": [ a ],
emits: {
"click .reject": "click:reject",
"click .accept": "click:accept"
},
observes: {
pendingMemberhips: {
"change:isReady": "handlePendingMembershipReady",
remove: "handleMembershipRemove"
},
pendingLists: {
add: "handleListAdd"
}
},
pendingMemberhips: new i("/memberships/me/pending"),
pendingLists: new t("/lists/pending"),
render: function() {
var e = this;
r.render.apply(e, arguments);
var t = e.renderInvitesToFragment();
return e.el.appendChild(t), e;
},
renderInvitesToFragment: function() {
var e = this, t = document.createDocumentFragment();
return e.pendingMemberhips.models.forEach(function(i) {
var n = e.getSingleInviteView(i);
n && t.appendChild(n.el);
}), t;
},
getSingleInviteView: function(e) {
var t, i = this;
i.destroySubview(e.id);
var a = i.pendingLists.get(e.attributes.list_id);
return e.isReady() && a && (t = new n({
membership: e,
list: a
}), i.addSubview(t, e.id), t.render()), t;
},
appendSingleInvite: function(e) {
var t = this, i = t.getSingleInviteView(e);
i && t.$el.prepend(i.el);
},
handlePendingMembershipReady: function(e) {
var t = this;
e.isReady() && t.appendSingleInvite(e);
},
handleListAdd: function(t) {
var n = this, a = new i("/lists/" + t.id + "/memberships"), o = a.findWhere({
user_id: "" + e.user.id
});
o && o.isReady() && n.appendSingleInvite(o);
},
handleMembershipRemove: function(e) {
var t = this;
t.destroySubview(e.id);
}
});
}), define("wunderbits/helpers/selection", [ "../lib/dependencies", "project!core/WBSingleton" ], function(e, t) {
var i = e.$;
return t.extend({
setSelectionRange: function(e, t, i) {
var n;
e.setSelectionRange ? (e.focus(), e.setSelectionRange(t, i)) : e.createTextRange && (n = e.createTextRange(), 
n.collapse(!0), n.moveEnd("character", i), n.moveStart("character", t), n.select());
},
setCaretToPos: function(e, t) {
var i = this;
i.setSelectionRange(e, t, t);
},
setCaretByClick: function(e, t, i) {
var n = this, a = n.getCaretFromMousePos(e, t, i);
n.setCaretToPos(e, a);
},
getCaretFromMousePos: function(e, t, n) {
var a = i(e), o = i(t), r = o.height(), s = o.offset().top, l = s + r / 2, d = n.pageY, c = 0;
if (d > l) {
var u = a.val();
c = u ? u.length : 0;
}
return c;
},
getCaretPos: function(e) {
var t, i, n;
return e.setSelectionRange ? t = e.selectionStart : document.selection && document.selection.createRange && (i = document.selection.createRange(), 
n = i.getBookmark(), t = n.charCodeAt(2) - 2), t;
},
getSelectedText: function() {
var e = "";
if (window.getSelection) {
if (e = window.getSelection().toString(), !e && document.activeElement && document.activeElement.value && "string" == typeof document.activeElement.value) {
var t = document.activeElement;
e = t.value.substring(t.selectionStart, t.selectionEnd);
}
} else document.getSelection ? e = document.getSelection().toString() : document.selection && (e = document.selection.createRange().text);
return e;
}
});
}), define("/templates/sidebarItem.js", {
name: "sidebarItem",
data: {
"1": function() {
return ' <span class="count" aria-hidden="true"></span> <span class="overdue-count" aria-hidden="true"></span> ';
},
"3": function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression;
return ' <span class="label" aria-hidden="true">' + r((a = t.iconLabel || e && e.iconLabel, 
typeof a === o ? a.call(e, {
name: "iconLabel",
hash: {},
data: n
}) : a)) + "</span> ";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = "function", s = this.escapeExpression, l = t.helperMissing, d = '<a href="' + s((o = t.url || e && e.url, 
typeof o === r ? o.call(e, {
name: "url",
hash: {},
data: n
}) : o)) + '" aria-hidden="true"> ' + s((o = t.symbol || e && e.symbol || l, o.call(e, e && e.icon, {
name: "symbol",
hash: {},
data: n
}))) + " ";
return a = t.unless.call(e, e && e.completedSmartList, {
name: "unless",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d += " ", a = t["if"].call(e, e && e.todaySmartList, {
name: "if",
hash: {},
fn: this.program(3, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d += ' <span class="title">', o = t.title || e && e.title, 
a = typeof o === r ? o.call(e, {
name: "title",
hash: {},
data: n
}) : o, (a || 0 === a) && (d += a), d + '</span> <span class="list-options" data-key-aria-label="sharing_list_options">' + s((o = t.symbol || e && e.symbol || l, 
o.call(e, "options", {
name: "symbol",
hash: {},
data: n
}))) + "</span> </a> ";
},
useData: !0
}
}), define("/templates/symbols/all.js", {
name: "symbols/all",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<svg class="all" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g stroke="none" stroke-width="1" fill-rule="evenodd"> <g> <g transform="translate(1.000000, 5.000000)"> <path d="M10.04,7.78 C9.88,7.56 10.16,7.1 10.16,7.1 L9.44,5.24 C9.44,5.24 6.92,10 4.5,10 C2.02,10 0,7.76 0,5 C0,2.24 2.02,0 4.5,0 C6.22,0 7.3,1.26 7.96,2.22 C8.12,2.44 7.84,2.92 7.84,2.92 L8.56,4.76 C8.56,4.76 11.08,0 13.5,0 C15.98,0 18,2.24 18,5 C18,7.76 15.98,10 13.5,10 C11.78,10 10.7,8.74 10.04,7.78 Z" fill-opacity="0.06"></path> <path d="M13.5,10 C11.78,10 10.7,8.74 10.04,7.78 C9.88,7.56 9.94,7.24 10.16,7.1 C10.38,6.94 10.7,6.98 10.86,7.22 C11.72,8.44 12.54,9 13.5,9 C15.42,9 17,7.2 17,5 C17,2.8 15.42,1 13.5,1 C11.68,1 10.6,3.06 9.44,5.24 C8.2,7.58 6.92,10 4.5,10 C2.02,10 0,7.76 0,5 C0,2.24 2.02,0 4.5,0 C6.22,0 7.3,1.26 7.96,2.22 C8.12,2.44 8.06,2.76 7.84,2.92 C7.62,3.06 7.3,3.02 7.14,2.78 C6.28,1.56 5.46,1 4.5,1 C2.58,1 1,2.8 1,5 C1,7.2 2.58,9 4.5,9 C6.32,9 7.4,6.94 8.56,4.76 C9.8,2.42 11.08,0 13.5,0 C15.98,0 18,2.24 18,5 C18,7.76 15.98,10 13.5,10 L13.5,10 Z"></path> </g> </g> </g> </svg> ';
},
useData: !0
}
}), define("/templates/symbols/inbox.js", {
name: "symbols/inbox",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return ' <svg class="inbox" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>inbox</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="inbox" sketch:type="MSArtboardGroup"> <path d="M10,15 C8.8,15 7.78,14.14 7.56,13 L2.5,13 C2.22,13 2,12.78 2,12.5 L2,3.5 C2,2.68 2.68,2 3.5,2 L16.5,2 C17.32,2 18,2.68 18,3.5 L18,12.5 C18,12.78 17.78,13 17.5,13 L12.44,13 C12.22,14.14 11.2,15 10,15 L10,15 Z M3,12 L8,12 C8.28,12 8.5,12.22 8.5,12.5 C8.5,13.32 9.18,14 10,14 C10.82,14 11.5,13.32 11.5,12.5 C11.5,12.22 11.72,12 12,12 L17,12 L17,3.5 C17,3.22 16.78,3 16.5,3 L3.5,3 C3.22,3 3,3.22 3,3.5 L3,12 Z M5.5,6 C5.22,6 5,5.78 5,5.5 C5,5.22 5.22,5 5.5,5 L14.5,5 C14.78,5 15,5.22 15,5.5 C15,5.78 14.78,6 14.5,6 L5.5,6 Z M5.5,8 C5.22,8 5,7.78 5,7.5 C5,7.22 5.22,7 5.5,7 L14.5,7 C14.78,7 15,7.22 15,7.5 C15,7.78 14.78,8 14.5,8 L5.5,8 Z M5.5,10 C5.22,10 5,9.78 5,9.5 C5,9.22 5.22,9 5.5,9 L14.5,9 C14.78,9 15,9.22 15,9.5 C15,9.78 14.78,10 14.5,10 L5.5,10 Z M3.5,18 C2.68,18 2,17.32 2,16.5 L2,14.5 C2,14.22 2.22,14 2.5,14 C2.78,14 3,14.22 3,14.5 L3,16.5 C3,16.78 3.22,17 3.5,17 L16.5,17 C16.78,17 17,16.78 17,16.5 L17,14.5 C17,14.22 17.22,14 17.5,14 C17.78,14 18,14.22 18,14.5 L18,16.5 C18,17.32 17.32,18 16.5,18 L3.5,18 Z" id="A" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/symbols/starred.js", {
name: "symbols/starred",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<svg class="starred" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g id="Web-svgs" stroke="none" stroke-width="1" fill-rule="evenodd"> <g id="starred"> <g id="Rectangle-3-+-A" transform="translate(1.000000, 0.000000)"> <path d="M3.74,18 C3.64,18 3.54,17.96 3.46,17.9 C3.28,17.76 3.2,17.54 3.28,17.34 L5.16,11.5 L0.2,7.9 C0.04,7.78 -0.04,7.56 0.02,7.34 C0.1,7.14 0.28,7 0.5,7 L6.64,7 L8.52,1.16 C8.66,0.76 9.34,0.76 9.48,1.16 L11.38,7 L17.5,7 C17.72,7 17.9,7.14 17.98,7.34 C18.04,7.56 17.96,7.78 17.8,7.9 L12.84,11.5 L14.72,17.34 C14.8,17.54 14.72,17.76 14.54,17.9 C14.38,18.02 14.14,18.02 13.96,17.9 L9,14.3 L4.04,17.9 C3.96,17.96 3.84,18 3.74,18 L3.74,18 Z M9,13.18 C9.1,13.18 9.2,13.2 9.3,13.28 L13.3,16.18 L11.78,11.46 C11.7,11.26 11.78,11.04 11.96,10.92 L15.96,8 L11,8 C10.8,8 10.6,7.86 10.54,7.66 L9,2.94 L7.46,7.66 C7.4,7.86 7.22,8 7,8 L2.04,8 L6.04,10.92 C6.22,11.04 6.3,11.26 6.22,11.46 L4.7,16.18 L8.7,13.28 C8.8,13.2 8.9,13.18 9,13.18 L9,13.18 Z" id="C"></path> <path d="M3.74,18 C3.64,18 3.54,17.96 3.46,17.9 C3.28,17.76 3.2,17.54 3.28,17.34 L5.16,11.5 L0.2,7.9 C0.04,7.78 -0.04,7.56 0.02,7.34 C0.1,7.14 0.28,7 0.5,7 L6.64,7 L8.52,1.16 C8.66,0.76 9.34,0.76 9.48,1.16 L11.38,7 L17.5,7 C17.72,7 17.9,7.14 17.98,7.34 C18.04,7.56 17.96,7.78 17.8,7.9 L12.84,11.5 L14.72,17.34 C14.8,17.54 14.72,17.76 14.54,17.9 C14.38,18.02 14.14,18.02 13.96,17.9 L9,14.3 L4.04,17.9 C3.96,17.96 3.84,18 3.74,18 L3.74,18 Z" id="D" opacity="0.06"> </path> </g> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/symbols/today.js", {
name: "symbols/today",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return ' <svg class="today" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>today</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="today" sketch:type="MSArtboardGroup" > <path d="M2.5,7 C2.22,7 2,6.78 2,6.5 L2,3.5 C2,2.68 2.68,2 3.5,2 L16.5,2 C17.32,2 18,2.68 18,3.5 L18,6.5 C18,6.78 17.78,7 17.5,7 L2.5,7 Z M3,6 L17,6 L17,3.5 C17,3.22 16.78,3 16.5,3 L3.5,3 C3.22,3 3,3.22 3,3.5 L3,6 Z M3.5,18 C2.68,18 2,17.32 2,16.5 L2,8.5 C2,8.22 2.22,8 2.5,8 C2.78,8 3,8.22 3,8.5 L3,16.5 C3,16.78 3.22,17 3.5,17 L16.5,17 C16.78,17 17,16.78 17,16.5 L17,8.5 C17,8.22 17.22,8 17.5,8 C17.78,8 18,8.22 18,8.5 L18,16.5 C18,17.32 17.32,18 16.5,18 L3.5,18 Z" id="E" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/symbols/week.js", {
name: "symbols/week",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return ' <svg class="week" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>week</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="week" sketch:type="MSArtboardGroup" > <path d="M2.5,7 C2.22,7 2,6.78 2,6.5 L2,3.5 C2,2.68 2.68,2 3.5,2 L16.5,2 C17.32,2 18,2.68 18,3.5 L18,6.5 C18,6.78 17.78,7 17.5,7 L2.5,7 Z M3,6 L17,6 L17,3.5 C17,3.22 16.78,3 16.5,3 L3.5,3 C3.22,3 3,3.22 3,3.5 L3,6 Z M3.5,18 C2.68,18 2,17.32 2,16.5 L2,8.5 C2,8.22 2.22,8 2.5,8 C2.78,8 3,8.22 3,8.5 L3,16.5 C3,16.78 3.22,17 3.5,17 L16.5,17 C16.78,17 17,16.78 17,16.5 L17,8.5 C17,8.22 17.22,8 17.5,8 C17.78,8 18,8.22 18,8.5 L18,16.5 C18,17.32 17.32,18 16.5,18 L3.5,18 Z M5.5,15 C5.22,15 5,14.78 5,14.5 L5,9.5 C5,9.22 5.22,9 5.5,9 C5.78,9 6,9.22 6,9.5 L6,14.5 C6,14.78 5.78,15 5.5,15 L5.5,15 Z M8.5,15 C8.22,15 8,14.78 8,14.5 L8,9.5 C8,9.22 8.22,9 8.5,9 C8.78,9 9,9.22 9,9.5 L9,14.5 C9,14.78 8.78,15 8.5,15 L8.5,15 Z M11.5,15 C11.22,15 11,14.78 11,14.5 L11,9.5 C11,9.22 11.22,9 11.5,9 C11.78,9 12,9.22 12,9.5 L12,14.5 C12,14.78 11.78,15 11.5,15 L11.5,15 Z M14.5,15 C14.22,15 14,14.78 14,14.5 L14,9.5 C14,9.22 14.22,9 14.5,9 C14.78,9 15,9.22 15,9.5 L15,14.5 C15,14.78 14.78,15 14.5,15 L14.5,15 Z" id="F" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/symbols/assigned.js", {
name: "symbols/assigned",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<svg class="assigned" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g id="Web-svgs" stroke="none" stroke-width="1" fill-rule="evenodd"> <g id="assigned"> <g id="Rectangle-3-+-A" transform="translate(1.000000, 2.000000)"> <path d="M10,10 C12.28,10 14,6.84 14,4 C14,1.8 12.2,0 10,0 C7.8,0 6,1.8 6,4 C6,6.5 7.52,10 10,10 L10,10 Z M4.94,7.74 C4.98,7.66 5,7.58 5,7.5 C5,7.42 4.98,7.34 4.94,7.26 C4.92,7.22 4.9,7.18 4.86,7.14 L2.86,5.14 C2.66,4.96 2.34,4.96 2.14,5.14 C1.96,5.34 1.96,5.66 2.14,5.86 L3.3,7 L0.5,7 C0.22,7 0,7.22 0,7.5 C0,7.78 0.22,8 0.5,8 L3.3,8 L2.14,9.14 C1.96,9.34 1.96,9.66 2.14,9.86 C2.24,9.96 2.38,10 2.5,10 C2.62,10 2.76,9.96 2.86,9.86 L4.86,7.86 C4.9,7.82 4.92,7.78 4.94,7.74 L4.94,7.74 Z M16.76,12.88 C16.56,12 15.9,11.28 15.02,11.04 L12.72,10.36 C12.58,10.32 12.46,10.26 12.36,10.14 C12.16,9.96 11.84,9.96 11.66,10.16 C11.46,10.34 8.54,10.34 8.36,10.14 C8.16,9.96 7.84,9.96 7.64,10.14 C7.54,10.24 7.42,10.32 7.28,10.36 L5.04,10.96 C4.14,11.2 3.46,11.92 3.24,12.82 L3.02,13.9 C2.98,14.06 3.02,14.24 3.14,14.36 C3.22,14.42 4.86,16 10,16 C15.14,16 16.78,14.42 16.86,14.36 C16.98,14.24 17.02,14.06 16.98,13.9 L16.76,12.88 Z" id="B" fill-opacity="0.06"></path> <path d="M10,10 C12.28,10 14,6.84 14,4 C14,1.8 12.2,0 10,0 C7.8,0 6,1.8 6,4 C6,6.5 7.52,10 10,10 L10,10 Z M10,1 C11.66,1 13,2.34 13,4 C13,6.26 11.62,9 10,9 C8.34,9 7,6.26 7,4 C7,2.34 8.34,1 10,1 L10,1 Z M4.94,7.74 C4.98,7.66 5,7.58 5,7.5 C5,7.42 4.98,7.34 4.94,7.26 C4.92,7.22 4.9,7.18 4.86,7.14 L2.86,5.14 C2.66,4.96 2.34,4.96 2.14,5.14 C1.96,5.34 1.96,5.66 2.14,5.86 L3.3,7 L0.5,7 C0.22,7 0,7.22 0,7.5 C0,7.78 0.22,8 0.5,8 L3.3,8 L2.14,9.14 C1.96,9.34 1.96,9.66 2.14,9.86 C2.24,9.96 2.38,10 2.5,10 C2.62,10 2.76,9.96 2.86,9.86 L4.86,7.86 C4.9,7.82 4.92,7.78 4.94,7.74 L4.94,7.74 Z M16.76,12.88 C16.56,12 15.9,11.28 15.02,11.04 L12.72,10.36 C12.58,10.32 12.46,10.26 12.36,10.14 C12.16,9.96 11.84,9.96 11.66,10.16 C11.46,10.34 11.46,10.66 11.66,10.86 C11.88,11.08 12.14,11.24 12.44,11.32 L14.74,12 C15.26,12.14 15.66,12.58 15.78,13.1 L15.94,13.8 C15.4,14.16 13.7,15 10,15 C6.3,15 4.6,14.14 4.06,13.8 L4.22,13.04 C4.34,12.5 4.76,12.06 5.3,11.92 L7.54,11.32 C7.84,11.24 8.12,11.08 8.36,10.86 C8.54,10.66 8.54,10.34 8.36,10.14 C8.16,9.96 7.84,9.96 7.64,10.14 C7.54,10.24 7.42,10.32 7.28,10.36 L5.04,10.96 C4.14,11.2 3.46,11.92 3.24,12.82 L3.02,13.9 C2.98,14.06 3.02,14.24 3.14,14.36 C3.22,14.42 4.86,16 10,16 C15.14,16 16.78,14.42 16.86,14.36 C16.98,14.24 17.02,14.06 16.98,13.9 L16.76,12.88 Z" id="B"> </path> </g> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/symbols/list.js", {
name: "symbols/list",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<svg class="list" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g id="Web-svgs" stroke="none" stroke-width="1" fill-rule="evenodd"> <g id="list"> <path d="M3,7 C2.44,7 2,6.56 2,6 L2,5 C2,4.44 2.44,4 3,4 L4,4 C4.56,4 5,4.44 5,5 L5,6 C5,6.56 4.56,7 4,7 L3,7 Z M4,5 L3,5 L3,6 L4,6 L4,5 Z M7.5,6 C7.22,6 7,5.78 7,5.5 C7,5.22 7.22,5 7.5,5 L17.5,5 C17.78,5 18,5.22 18,5.5 C18,5.78 17.78,6 17.5,6 L7.5,6 Z M3,12 C2.44,12 2,11.56 2,11 L2,10 C2,9.44 2.44,9 3,9 L4,9 C4.56,9 5,9.44 5,10 L5,11 C5,11.56 4.56,12 4,12 L3,12 Z M4,10 L3,10 L3,11 L4,11 L4,10 Z M7.5,11 C7.22,11 7,10.78 7,10.5 C7,10.22 7.22,10 7.5,10 L17.5,10 C17.78,10 18,10.22 18,10.5 C18,10.78 17.78,11 17.5,11 L7.5,11 Z M3,17 C2.44,17 2,16.56 2,16 L2,15 C2,14.44 2.44,14 3,14 L4,14 C4.56,14 5,14.44 5,15 L5,16 C5,16.56 4.56,17 4,17 L3,17 Z M4,15 L3,15 L3,16 L4,16 L4,15 Z M7.5,16 C7.22,16 7,15.78 7,15.5 C7,15.22 7.22,15 7.5,15 L17.5,15 C17.78,15 18,15.22 18,15.5 C18,15.78 17.78,16 17.5,16 L7.5,16 Z" id="K"> </path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/symbols/shared.js", {
name: "symbols/shared",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<svg class="shared" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g id="Web-svgs" stroke="none" stroke-width="1" fill-rule="evenodd"> <g id="shared-list"> <path d="M7.5,11 C5.34,11 4,7.8 4,5.5 C4,3.54 5.54,2 7.5,2 C9.46,2 11,3.54 11,5.5 C11,7.8 9.66,11 7.5,11 L7.5,11 Z M7.5,3 C6.1,3 5,4.1 5,5.5 C5,7.52 6.16,10 7.5,10 C8.84,10 10,7.52 10,5.5 C10,4.1 8.9,3 7.5,3 L7.5,3 Z M14.26,10.5 C12.56,10.5 11.5,8.58 11.5,6.8 C11.5,5.26 12.74,4 14.26,4 C15.78,4 17,5.26 17,6.8 C17,8.58 15.96,10.5 14.26,10.5 L14.26,10.5 Z M14.26,5 C13.3,5 12.5,5.8 12.5,6.8 C12.5,8.08 13.22,9.5 14.26,9.5 C15.28,9.5 16,8.08 16,6.8 C16,5.8 15.22,5 14.26,5 L14.26,5 Z M15.52,15 C15.24,15 15.02,14.8 15,14.52 C14.98,14.24 15.2,14.02 15.48,14 C16.72,13.94 17.54,13.66 17.94,13.48 L17.8,12.9 C17.74,12.56 17.5,12.3 17.2,12.16 L16.36,11.84 C16.08,11.72 15.82,11.54 15.62,11.3 C15.44,11.1 15.46,10.78 15.68,10.6 C15.88,10.42 16.2,10.46 16.38,10.66 C16.48,10.78 16.6,10.86 16.74,10.92 L17.56,11.24 C18.18,11.48 18.64,12.02 18.78,12.68 L18.98,13.64 C19.04,13.84 18.94,14.04 18.78,14.16 C18.74,14.2 17.66,14.9 15.52,15 L15.52,15 Z M7.5,17 C2.86,17 1.38,16.1 1.22,16 C1.06,15.9 0.98,15.7 1,15.5 L1.3,13.74 C1.46,12.74 2.2,11.94 3.18,11.7 L4.84,11.32 C4.96,11.28 5.06,11.22 5.14,11.14 C5.34,10.96 5.66,10.96 5.86,11.14 C6.06,11.34 6.04,11.66 5.86,11.86 C5.64,12.06 5.36,12.22 5.06,12.28 L3.42,12.68 C2.82,12.82 2.38,13.3 2.28,13.9 L2.06,15.3 C2.64,15.54 4.24,16 7.5,16 C10.76,16 12.36,15.54 12.94,15.3 L12.72,13.9 C12.62,13.3 12.18,12.82 11.58,12.68 L9.94,12.28 C9.64,12.22 9.36,12.06 9.14,11.86 C8.96,11.66 8.94,11.34 9.14,11.14 C9.34,10.96 9.66,10.96 9.86,11.14 C9.94,11.22 10.04,11.28 10.16,11.32 L11.82,11.7 C12.8,11.94 13.54,12.74 13.7,13.74 L14,15.5 C14.02,15.7 13.94,15.9 13.78,16 C13.62,16.1 12.14,17 7.5,17 L7.5,17 Z" id="L"> </path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/symbols/options.js", {
name: "symbols/options",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return ' <svg class="options" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>options</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="options" sketch:type="MSArtboardGroup" > <path d="M17.1330617,2.8594383 C15.9930617,1.7194383 14.0130617,1.7194383 12.8930617,2.8594383 L5.5130617,10.2394383 C5.3330617,10.4394383 5.3330617,10.7594383 5.5130617,10.9594383 C5.7130617,11.1394383 6.0330617,11.1394383 6.2330617,10.9594383 L13.5930617,3.5594383 C14.3530617,2.7994383 15.6730617,2.7994383 16.4130617,3.5594383 C17.1730617,4.3194383 17.1930617,5.5594383 16.4130617,6.3394383 L9.0330617,13.7594383 C8.7130617,14.0794383 8.9330617,14.6194383 9.3730617,14.6194383 C9.5130617,14.6194383 9.6330617,14.5594383 9.7330617,14.4594383 L17.1330617,7.0394383 C18.2930617,5.8794383 18.2930617,4.0194383 17.1330617,2.8594383 L17.1330617,2.8594383 Z M8.4930617,15.3594383 C8.0330617,13.4594383 6.5130617,11.9394383 4.6130617,11.4794383 C4.3530617,11.4194383 4.0930617,11.5794383 4.0130617,11.8194383 L2.0330617,17.3194383 C1.8730617,17.7194383 2.2730617,18.1194383 2.6730617,17.9594383 C8.6730617,15.7794383 8.2530617,15.9594383 8.3730617,15.8194383 C8.4930617,15.6994383 8.5330617,15.5194383 8.4930617,15.3594383 L8.4930617,15.3594383 Z M3.3330617,16.6594383 L4.8130617,12.5794383 C6.0130617,12.9994383 6.9730617,13.9794383 7.3930617,15.1794383 L3.3330617,16.6594383 Z" id="N" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/styles/sidebarItem.js", {
name: "sidebarItem",
data: '.sidebarItem{overflow:hidden;height:34px;z-index:15;}.sidebarItem.unreadComments.list .title,.sidebarItem.unreadComments.list .wundercon{color:#186ab2}.sidebarItem.animate-up{height:0 !important;overflow:hidden}.sidebarItem.collapsed{height:0;overflow:hidden}.sidebarItem.animate-down{height:34px;overflow:hidden}.sidebarItem.active-drag{background:#fafafa;}.sidebarItem.active-drag .options{display:none !important}.sidebarItem.overdue a .title{right:54px}.sidebarItem.overdue .overdue-count{display:block}.sidebarItem a{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;height:34px;padding:6px;padding-right:12px;display:block;color:#1c1c1c;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.sidebarItem a .wundercon{color:#737272;position:absolute;left:10px;top:7px}.sidebarItem a .options{cursor:pointer;display:none;position:absolute;right:6px;top:7px;left:auto;opacity:.6;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";filter:alpha(opacity=60);z-index:25}.sidebarItem a .count,.sidebarItem a .overdue-count{margin-top:3px;float:right;color:#b0b0b0;font-size:12px}.sidebarItem a .overdue-count{display:none;color:#d62822;font-weight:bold;margin-top:1px;margin-right:6px;background:rgba(214,40,34,0.1);padding:2px 6px;-webkit-border-radius:12px;border-radius:12px}.sidebarItem a .edit-mode{float:right}.sidebarItem a .title{font-size:13px;font-weight:400;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;position:absolute;top:9px;left:35px;right:42px}.sidebarItem a .list-options{display:block;height:20px;width:20px;margin-left:auto}.sidebarItem a .label{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-size:8px;padding-top:5px;font-weight:bold;text-align:center;position:absolute;left:10px;top:9px;width:16px;height:16px;color:#69ac35}.sidebarItem svg{position:absolute;top:7px;left:8px;}.sidebarItem svg.inbox{fill:#2b8dec}.sidebarItem svg.week{fill:#887ead}.sidebarItem svg.today{fill:#67ae2b}.sidebarItem svg.completed{fill:#b3b3b3}.sidebarItem svg.starred{fill:#ef5a54}.sidebarItem svg.assigned{fill:#d8a032}.sidebarItem svg.all{fill:#b89476}.sidebarItem svg.list,.sidebarItem svg.shared{fill:#b9b9b9}.sidebarItem.active svg{fill:#fff}.sidebarItem.active .wundercon{color:#fff}.sidebarItem.active .label{color:#fff}.sidebarItem.active.unreadComments .title,.sidebarItem.active.unreadComments .wundercon{color:#fff}.sidebarItem.active.overdue a .title{right:82px}.sidebarItem.active a{background:#186ab2;color:#fff;text-shadow:0 1px 1px rgba(0,0,0,0);font-weight:bold;}.sidebarItem.active a .count{color:rgba(255,255,255,0.75)}.sidebarItem.active a .overdue-count{color:#fcfcfc;background:rgba(252,252,252,0.1)}.sidebarItem.active a .title{right:65px}.sidebarItem.active.list .count{margin-right:20px;padding-right:8px}.sidebarItem.active.list .count:after{content:\'\';position:absolute;top:0;bottom:0;right:33px;border-right:1px solid rgba(255,255,255,0.3)}.sidebarItem.active.list .options{display:block;}.sidebarItem.active.list .options:hover{opacity:1;-ms-filter:none;filter:none}.sidebarItem.active.list.list-search .options{display:none}.sidebarItem.active.list.list-search .count{display:block}html[dir=ltr] .sidebarItem svg{left:8px;}html[dir=ltr] .sidebarItem svg.options{right:7px;left:auto}html[dir=rtl] .sidebarItem svg{right:8px;}html[dir=rtl] .sidebarItem svg.options{left:7px;right:auto}html[dir=rtl] .sidebarItem a{padding-right:6px;padding-left:12px;}html[dir=rtl] .sidebarItem a .title{left:42px;right:38px}html[dir=rtl] .sidebarItem.active.list .count{margin-right:initial;margin-left:20px;padding-right:initial;padding-left:8px;}html[dir=rtl] .sidebarItem.active.list .count:after{right:initial;left:33px}html .sidebarItem a .label{font-family:"Lato","Geneva CY","Lucida Grande","Arial Unicode MS","Helvetica Neue","Helvetica","Arial",sans-serif}html:lang(ja_JP) .sidebarItem a .label{font-family:"Lato","Meiryo UI","Meiryo","メイリオ","ＭＳ Ｐゴシック","MS PGothic","Hiragino Kaku Gothic Pro","Microsoft Yahei","微软雅黑","STXihei","Arial Unicode MS","Helvetica Neue","Helvetica","Arial",sans-serif}html:lang(zh_CN) .sidebarItem a .label{font-family:"Lato","Microsoft Yahei","微软雅黑","STXihei","Meiryo UI","Meiryo","メイリオ","ＭＳ Ｐゴシック","MS PGothic","Hiragino Kaku Gothic Pro","Arial Unicode MS","Helvetica Neue","Helvetica","Arial",sans-serif}html:lang(zh_TW) .sidebarItem a .label{font-family:"Lato","Microsoft Yahei","微软雅黑","STXihei","Meiryo UI","Meiryo","メイリオ","ＭＳ Ｐゴシック","MS PGothic","Hiragino Kaku Gothic Pro","Arial Unicode MS","Helvetica Neue","Helvetica","Arial",sans-serif}'
}), define("views/Sidebar/ItemView", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/helpers/selection", "collections/TaskCollection", "wunderbits/WBViewPresenter", "wunderbits/mixins/UnicodeEmojiViewMixin", "project!core/WBStateModel", "actions/Factory", "template!sidebarItem", "partial!symbols/all", "partial!symbols/inbox", "partial!symbols/starred", "partial!symbols/today", "partial!symbols/week", "partial!symbols/completed", "partial!symbols/assigned", "partial!symbols/list", "partial!symbols/shared", "partial!symbols/options", "style!sidebarItem" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m, g, f, b, h, v, _) {
var w = a.prototype, k = a.extend({
renderData: {
id: void 0,
url: void 0,
icon: void 0,
title: void 0
},
observes: {
stateModel: {
"change:count": [ "renderTasksCount", "renderAriaLabel" ],
"change:overdueCount": [ "renderAriaLabel", "renderOverdueCount" ]
}
},
template: l,
styles: [ _ ],
tagName: "li",
className: "sidebarItem",
attributes: {
role: "menuitem",
tabindex: 0
},
renderCountsDebounceTime: 250,
getCollection: null,
getOverdueCollection: null,
getPublicUrl: null,
getIconClass: null,
initialize: function() {
var e = this;
e.ready = e.deferred(), e.stateModel = new r({}), e._featureLookup = s.featureLookup(), 
w.initialize.apply(e, arguments), e.collection = e.getCollection(), e.overdueCollection = e.getOverdueCollection(), 
e.updateCount(), e.updateOverdueCount(), e.bindCountCollections(), e.bindUnreadState();
},
bindCountCollections: function() {
var e = this;
e.unbindFromTarget(e.collection), e.unbindFromTarget(e.overdueCollection), e.bindTo(e.collection, "add remove", "updateCount"), 
e.bindTo(e.overdueCollection, "add remove", "updateOverdueCount");
},
bindUnreadState: function() {
var e = this;
e.bindTo(e.model, "change:hasUnreadComments", "renderUnreadState");
},
formatData: function(e) {
var t = this;
return e = w.formatData.call(t, e), e.id = t.model.id, e.icon = t.getIconClass(), 
e.url = t.getPublicUrl(), e.title = t.model.escape("title"), e.titleText = e.title, 
e;
},
render: function() {
var e = this, t = e.formatData(e.renderData);
return w.render.call(e, t), e.$el.attr("rel", t.id), e.$el.attr("data-position", e.model.attributes.position), 
e.renderTasksCount(), e.renderOverdueCount(), e.renderUnreadState(), e.renderAriaLabel(), 
e.ready.resolve(), e;
},
renderTasksCount: function() {
var e = this, t = e.$(".count"), i = e.stateModel.attributes.count;
t.text(i || "");
},
isOverdueCountFeatureEnabled: function() {
var t = this, i = e.isNightly() || e.isDev();
return i && t._featureLookup.isFeatureEnabled("experiment.sidebar_overdue_task_count");
},
renderOverdueCount: function() {
var e = this;
if (e.isOverdueCountFeatureEnabled()) {
var t = e.stateModel.attributes.overdueCount;
e.$el.toggleClass("overdue", !!t), e.$(".overdue-count").text(t || "");
}
},
updateCount: function() {
var e = this;
e.stateModel.save({
count: e.collection.length
});
},
updateOverdueCount: function() {
var e = this;
e.stateModel.save({
overdueCount: e.overdueCollection.length
});
},
renderUnreadState: function() {
var e = this;
e.$el.toggleClass("unreadComments", !!e.model.attributes.hasUnreadComments);
},
renderAriaLabel: function() {
var t = this, i = t.model.escape("title"), n = e.language.getText("aria_list_$_with_$_items", i, t.collection.length), a = t.stateModel.attributes.overdueCount;
t.isOverdueCountFeatureEnabled() && a && (n += ", " + e.language.getText("voiceover_sidebar_list_$_items_overdue", a)), 
t.$el.attr("aria-label", n);
},
remove: function(e) {
function t() {
!i.destroyed && w.remove.apply(i, arguments);
}
var i = this;
e || (e = {}), e.animate === !1 ? t() : i.$el.slideUp(200, t);
}
});
return o.applyToClass(k), k;
}), define("views/Sidebar/InboxItemView", [ "application/runtime", "views/Sidebar/ItemView", "collections/TaskCollection" ], function(e, t, i) {
var n = t.prototype;
return t.extend({
getCollection: function() {
return new i("/lists/inbox/tasks").getOpenTasks();
},
getOverdueCollection: function() {
return new i("/lists/inbox/tasks").overdueTasks;
},
bindUnreadState: function() {
var e = this;
e.bindTo(e.model, "change:hasUnreadComments", "renderUnreadState");
},
getPublicUrl: function() {
return "#/lists/inbox";
},
getIconClass: function() {
return "inbox";
},
render: function() {
var e = this, t = e.formatData(e.renderData);
return n.render.call(e, t), e.renderTitle(), e.$el.attr("rel", "inbox"), e;
},
renderTitle: function() {
var t = this, i = t.$(".title");
i.html(e.language.getLabel("smart_list_inbox").toString()), t.renderLocalized();
}
});
}), define("views/Sidebar/ListItemView", [ "application/runtime", "views/Sidebar/ItemView", "collections/TaskCollection", "wunderbits/helpers/selection", "wunderbits/data/keycodes" ], function(e, t, i) {
var n = t.prototype;
return t.extend({
observes: {
model: {
"change:isShared": "render",
"change:role": "renderRole",
"change:title": "renderTitle",
"change:online_id": "render"
}
},
getCollection: function() {
return new i("/lists/" + this.model.id + "/tasks").getOpenTasks();
},
getOverdueCollection: function() {
return new i("/lists/" + this.model.id + "/tasks").overdueTasks;
},
bindUnreadState: function() {
var e = this;
e.bindTo(e.model, "change:hasUnreadComments", "renderUnreadState");
},
getPublicUrl: function() {
return "#/lists/" + (this.model.attributes.online_id || this.model.id);
},
getIconClass: function() {
var e = this, t = "list";
return e.model.isShared() && (t = "shared"), t;
},
formatData: function(e) {
var t = this;
return e = n.formatData.call(t, e);
},
render: function() {
var e = this, t = e.formatData(e.renderData);
return n.render.call(e, t), e.renderSharedState(), e.renderRole(), e.renderTasksCount(), 
e.renderOverdueCount(), e.$el.addClass("list draggable"), e.renderEmoji(e.$(".title")), 
e.$(".options").removeClass("hidden"), e;
},
renderTitle: function() {
var e = this, t = e.model, i = e.$(".title");
i.text(t.attributes.title), e.renderEmoji(i);
},
renderRole: function() {
var e = this, t = e.model.attributes.role;
e.$el.removeClass("owner member").addClass(t);
},
renderSharedState: function() {
var e = this, t = e.model.isShared();
e.$el.toggleClass("shared", t);
}
});
}), define("helpers/dnd/BaseDragAndDropHandler", [ "project!core/BaseEventEmitter" ], function(e) {
var t = e.extend({
setDOMEvents: function(e) {
var t = this;
t.domListeners = e;
},
enable: function() {
var e = this;
Object.keys(e.domListeners).forEach(function(t) {
var i = e.domListeners[t];
e.el.addEventListener(t, i, !1);
});
},
disable: function() {
var e = this;
Object.keys(e.domListeners).forEach(function(t) {
var i = e.domListeners[t];
e.el.removeEventListener(t, i, !1);
});
},
onDestroy: function() {
var e = this;
e.disable();
}
});
return t;
}), define("helpers/dnd/workaroundstate", [], function() {
var e = null, t = "none";
return {
clearWorkaround: function() {
e = null, t = "none";
},
hasWorkaroundSet: function() {
return !!e;
},
setWorkaroundMimeType: function(t) {
e = t;
},
getWorkaroundMimeType: function() {
return e;
},
setWorkaroundDropEffect: function(e) {
t = e;
},
getWorkaroundDropEffect: function() {
return t;
}
};
}), define("helpers/dnd/eventUtil", [ "project!core/WBClass", "./workaroundstate", "../domtools" ], function(e, t, i) {
function n(e, t) {
var i, n = e.dataTransfer, a = n.effectAllowed.toLowerCase();
if ("all" === a) return t[0];
for (i = 0; i < t.length; ++i) if (-1 !== a.indexOf(t[i])) return t[i];
return null;
}
function a(e, i) {
t.hasWorkaroundSet() ? t.setWorkaroundDropEffect(i) : e.dataTransfer.dropEffect = i;
}
function o(e, t) {
var i, n, a = t.length;
for (i = 0; a > i; ++i) for (n = 0; n < e.length; ++n) if (t[i] === e[n]) return t[i];
}
function r(e) {
e.preventDefault();
}
function s(e) {
e.preventDefault();
}
function l(e) {
return t.hasWorkaroundSet() ? [ t.getWorkaroundMimeType() ] : Array.prototype.slice.call(e.dataTransfer.types);
}
function d(e, i) {
return t.hasWorkaroundSet() ? i === t.getWorkaroundMimeType() ? e.dataTransfer.getData("Text") : "" : e.dataTransfer.getData(i);
}
function c(e, t) {
return i.getDirectChildOf(e, t);
}
return {
findMatchingDropEffect: n,
findMatchingMimetype: o,
setDropEffect: a,
allowDrop: r,
acceptDrop: s,
getDragMimetypes: l,
getDragData: d,
getItemFromTarget: c
};
}), define("helpers/dnd/DragList", [ "./BaseDragAndDropHandler", "./workaroundstate", "../domtools", "./eventUtil" ], function(e, t, i, n) {
var a = e.extend({
initialize: function(e, t) {
var i = this;
if (i.el = e, i.getDragImage = t.getDragImage ? t.getDragImage : !1, "function" != typeof t.itemToData) throw new Error("missing itemToData option");
if (i.itemToData = t.itemToData, i.disposeDragImage = t.disposeDragImage, "string" != typeof t.mimeType && "function" != typeof t.mimeType) throw new Error("missing mimeType option");
i.effectAllowed = i._effectAllowed(t.effectAllowed || [ "move" ]), i.options = t, 
i.currentDragImage = null, i.setDOMEvents({
dragstart: i._onDragStart.bind(i)
});
},
prepareItem: function(e) {
e.setAttribute("draggable", "true");
},
_effectAllowed: function(e) {
var t = -1 !== e.indexOf("copy"), i = -1 !== e.indexOf("link"), n = -1 !== e.indexOf("move");
return t && n && !i ? "copyMove" : !t && n && i ? "linkMove" : t && !n && i ? "copyLink" : !t || n || i ? t || n || !i ? t || !n || i ? t && n && i ? "all" : "none" : "move" : "link" : "copy";
},
_onDragStart: function(e) {
var o = this, r = n.getItemFromTarget(o.el, e.target);
if (r) {
var s, l = e.dataTransfer;
o.trigger("drag", r), s = o.itemToData(r), l.setDragImage && o.getDragImage && (o.currentDragImage = o.getDragImage(r, s), 
l.setDragImage(o.currentDragImage, 0, 0)), l.effectAllowed = o.effectAllowed;
var d;
"string" == typeof o.options.mimeType ? d = o.options.mimeType : "function" == typeof o.options.mimeType && (d = o.options.mimeType(r));
try {
l.setData(d, s);
} catch (c) {
t.setWorkaroundMimeType(d), l.setData("Text", s);
}
a.setSourceNode(e.target), i.once(e.target, "dragend", o._onDragEnd.bind(o)), e.stopPropagation();
}
},
_onDragEnd: function() {
var e = this;
a.setSourceNode(null), t.clearWorkaround(), e.disposeDragImage && e.disposeDragImage(e.currentDragImage), 
e.currentDragImage = null;
}
});
return a.setSourceNode = function(e) {
var t = this;
t.sourceNode = e;
}, a.getSourceNode = function() {
var e = this;
return e.sourceNode;
}, a;
}), define("helpers/dnd/DropZone", [ "./BaseDragAndDropHandler", "./eventUtil" ], function(e, t) {
var i = "no-pointer-events-for-children", n = e.prototype;
return e.extend({
initialize: function(e, t) {
var i = this;
n.initialize.call(i), i.el = e, i.noPointerEventsStyleElement = null, i.dropEffects = [ t.dropEffect ], 
i.hoverClass = t.hoverClass, i.mimeTypes = t.mimeTypes, i.setDOMEvents({
dragenter: i._onDragEnter.bind(i),
dragover: i._onDragOver.bind(i),
dragleave: i._onDragLeave.bind(i),
drop: i._onDrop.bind(i)
});
},
_onDragEnter: function(e) {
var i = this;
i._disablePointerEventsForChildren(), i._isDropAllowed(e) && (t.allowDrop(e), i._setDropEffectIfNeeded(e));
},
_onDragLeave: function() {
var e = this;
e._enablePointerEventsForChildren(), e.hoverClass && e.el.classList.remove(e.hoverClass), 
e.trigger("dragleave");
},
_onDragOver: function(e) {
var i = this;
i._isDropAllowed(e) && (t.allowDrop(e), i.hoverClass && i.el.classList.add(i.hoverClass), 
i.trigger("dragenter", e.clientY), i._setDropEffectIfNeeded(e));
},
_onDrop: function(e) {
var i, n, a = this;
a._enablePointerEventsForChildren(), a.hoverClass && a.el.classList.remove(a.hoverClass), 
a.trigger("dragleave"), a._isDropAllowed(e) && (t.acceptDrop(e), n = a._findMatchingMimetype(e), 
i = t.getDragData(e, n), a.trigger("drop", i, n));
},
_findMatchingMimetype: function(e) {
var i = this, n = t.getDragMimetypes(e);
return t.findMatchingMimetype(n, i.mimeTypes);
},
_isDropAllowed: function(e) {
var i = this, n = i._findMatchingMimetype(e), a = t.findMatchingDropEffect(e, i.dropEffects);
return n && a;
},
_disablePointerEventsForChildren: function() {
var e = this;
if (!e.noPointerEventsClassName) {
var t = "." + i + " * {pointer-events: none;}", n = document.createElement("style");
e.el.classList.add(i), n.appendChild(document.createTextNode(t)), document.head.appendChild(n), 
e.noPointerEventsStyleElement = n;
}
},
_enablePointerEventsForChildren: function() {
var e = this;
e.noPointerEventsStyleElement && (e.el.classList.remove(i), document.head.removeChild(e.noPointerEventsStyleElement), 
e.noPointerEventsStyleElement = null);
},
_setDropEffectIfNeeded: function(e) {
var i = this;
i.dropEffect && t.setDropEffect(e, i.dropEffect);
}
});
}), define("helpers/dnd/ItemDragEvent", [ "project!core/WBClass", "./workaroundstate", "./eventUtil" ], function(e, t, i) {
var n = e.extend({
initialize: function(e, t) {
var i = this;
i._nativeEvent = e, i._item = t;
},
findMatchingDropEffect: function(e) {
return i.findMatchingDropEffect(this._nativeEvent, e);
},
findMatchingMimetype: function(e) {
return i.findMatchingMimetype(this.mimeTypes, e);
},
isDropAllowedFor: function(e, t) {
var i, n, a = this;
return (i = a.findMatchingMimetype(e)) ? (n = a.findMatchingDropEffect(t), n ? !0 : !1) : !1;
},
setDropEffect: function(e) {
i.setDropEffect(this._nativeEvent, e);
},
allowDrop: function() {
return i.allowDrop(this._nativeEvent);
},
allowDropWithEffect: function(e) {
var t = this, i = t.findMatchingDropEffect(e);
return i ? (t.setDropEffect(i), t.allowDrop(), !0) : !1;
}
});
return Object.defineProperty(n.prototype, "mimeTypes", {
get: function() {
return i.getDragMimetypes(this._nativeEvent);
}
}), Object.defineProperty(n.prototype, "position", {
get: function() {
var e = this;
return {
x: e._nativeEvent.clientX,
y: e._nativeEvent.clientY
};
}
}), Object.defineProperty(n.prototype, "item", {
get: function() {
return this._item;
}
}), n;
}), define("helpers/dnd/ItemDropEvent", [ "./ItemDragEvent", "./workaroundstate", "./eventUtil" ], function(e, t, i) {
var n = e.extend({
getDragData: function(e) {
return i.getDragData(this._nativeEvent, e);
},
acceptDrop: function() {
return i.acceptDrop(this._nativeEvent);
}
});
return n;
}), define("helpers/dnd/ItemDragger", [ "./BaseDragAndDropHandler", "./ItemDragEvent", "./ItemDropEvent", "./eventUtil" ], function(e, t, i, n) {
var a = e.prototype, o = e.extend({
initialize: function(e) {
var t = this;
a.initialize.call(t), t.el = e, t.currentItem = null, t.hasDragEndHandler = !1, 
t.setDOMEvents({
dragenter: t._onDragEnter.bind(t),
dragleave: t._onDragLeave.bind(t),
dragover: t._onDragOver.bind(t),
drop: t._onDrop.bind(t)
});
},
_onDragEnter: function(e) {
var i, a = this, o = n.getItemFromTarget(a.el, e.target);
o !== a.currentItem && o && (i = new t(e, o), a.currentItem && a._leaveCurrentItem(e), 
a.currentItem = o, a.trigger("itementer", i));
},
_onDragEnd: function(e) {
var t = this;
t.currentItem && t._leaveCurrentItem(e), t.hasDragEndHandler = !1;
},
_onDragLeave: function(e) {
var t, i, a, o = this, r = n.getItemFromTarget(o.el, e.target);
o.currentItem && (r ? (i = o.currentItem.getBoundingClientRect(), a = {
x: e.clientX,
y: e.clientY
}, t = !1, (a.y < i.top || a.y > i.top + i.height) && (t = !0), (a.x < i.left || a.x > i.left + i.width) && (t = !0), 
t && o._leaveCurrentItem(e)) : o._leaveCurrentItem(e));
},
_onDragOver: function(e) {
var i, n = this;
n.currentItem && (i = new t(e, n.currentItem), n.trigger("itemover", i));
},
_onDrop: function(e) {
var t, a = this, o = n.getItemFromTarget(a.el, e.target);
o && (t = new i(e, o), a.trigger("itemdrop", t), a.currentItem && a._leaveCurrentItem(e));
},
_leaveCurrentItem: function(e) {
var i = this, n = new t(e, i.currentItem);
i.currentItem = null, i.trigger("itemleave", n);
}
});
return o;
}), define("helpers/dnd/ItemDropZoneList", [ "application/runtime", "project!core/BaseEventEmitter" ], function(e, t) {
function i(e, t, i) {
return Math.min(Math.max(e, i), t);
}
var n = e._, a = t.extend({
initialize: function(e, t) {
var i = this;
i.dropZones = t, i.itemDragger = e, i.currentDropZone = null, i.bindTo(i.itemDragger, "itementer", i.onItemOverAndEnter), 
i.bindTo(i.itemDragger, "itemover", i.onItemOverAndEnter), i.bindTo(i.itemDragger, "itemleave", i.onItemLeave), 
i.bindTo(i.itemDragger, "itemdrop", i.onItemDrop);
},
onItemDrop: function(e) {
var t = this;
t.currentDropZone && (t.currentDropZone.onDrop(e), t.currentDropZone.onLeave(e), 
t.currentDropZone = null);
},
onItemLeave: function(e) {
var t = this;
t.currentDropZone && (t.currentDropZone.onLeave(e), t.currentDropZone = null);
},
onItemOverAndEnter: function(e) {
var t = this, i = t._getDropZone(e.position, e.item), n = t.currentDropZone !== i;
t.currentDropZone && n && (t.currentDropZone.onLeave(e), t.currentDropZone = null), 
i && (n ? (t.currentDropZone = i, t.currentDropZone.onEnter(e)) : t.currentDropZone.onOver(e));
},
_getDropZone: function(e, t) {
var a = this, o = t.getBoundingClientRect(), r = {
width: o.width,
height: o.height
}, s = {
x: e.x - o.left,
y: e.y - o.top
};
a.currentDropZone && a.currentDropZone.normalizePosition(r, s), s.x = i(0, r.width, s.x), 
s.y = i(0, r.height, s.y);
var l = n.find(a.dropZones, function(e) {
return e.matches(t, r, s);
});
return l;
},
onDestroy: function() {
var e = this;
e.itemDragger.destroy();
},
enable: function() {
var e = this;
e.itemDragger.enable();
},
disable: function() {
var e = this;
e.itemDragger.disable();
}
});
return a;
}), define("helpers/dnd/ItemDropZone", [ "project!core/BaseEventEmitter" ], function(e) {
var t = e.extend({
initialize: function(e) {
var t = this;
t.top = e.top || 0, t.left = e.left || 0, t.bottom = e.bottom || 0, t.right = e.right || 0, 
t.className = e.className, t.ratioArea = e.ratioArea, t.topArea = e.topArea, t.bottomArea = e.bottomArea, 
t.acceptedMimetypes = e.acceptedMimetypes, t._appliesToItemCallback = e.appliesToItem, 
t.dropEffects = [ "move" ];
},
isDropAllowed: function(e) {
var t = this;
return e.isDropAllowedFor(t.acceptedMimetypes, t.dropEffects);
},
isDragEventsAllowed: function(e) {
var t = this;
return e.isDropAllowedFor(t.acceptedMimetypes, t.dropEffects);
},
normalizePosition: function(e, t) {
var i = this;
t.y -= i.top, t.x -= i.left, e.height -= i.bottom, e.width -= i.right;
},
appliesToItem: function(e) {
var t = this;
return t._appliesToItemCallback ? t._appliesToItemCallback(e) : !0;
},
matches: function(e, t, i) {
var n = this;
return n.appliesToItem(e) ? n.topArea ? n._matchesTopArea(i) : n.bottomArea ? n._matchesBottomArea(i, t) : n.ratioArea ? n._matchesRatioArea(i, t) : !1 : !1;
},
_matchesRatioArea: function(e, t) {
var i = this, n = e.y / t.height;
return "number" == typeof i.ratioArea[0] && n <= i.ratioArea[0] ? !1 : "number" == typeof i.ratioArea[1] && n > i.ratioArea[1] ? !1 : !0;
},
_matchesTopArea: function(e) {
var t = this, i = t.topArea[0], n = t.topArea[1], a = e.y <= i + n, o = e.y >= i;
return a && o;
},
_matchesBottomArea: function(e, t) {
var i = this, n = i.bottomArea[0], a = i.bottomArea[1], o = e.y <= t.height - n, r = e.y >= t.height - n - a;
return o && r;
},
applyVisualFeedback: function(e) {
var t = this;
e.classList.add(t.className);
},
clearVisualFeedback: function(e) {
var t = this;
e.classList.remove(t.className);
},
onEnter: function(e) {
var t = this;
t.isDragEventsAllowed(e) && (e.allowDropWithEffect(t.dropEffects), t.applyVisualFeedback(e.item), 
t.trigger("itementer", e, e.findMatchingMimetype(t.acceptedMimetypes)));
},
onLeave: function(e) {
var t = this;
t.isDragEventsAllowed(e) && (t.trigger("itemleave", e, e.findMatchingMimetype(t.acceptedMimetypes)), 
t.clearVisualFeedback(e.item));
},
onOver: function(e) {
var t = this;
t.isDragEventsAllowed(e) && e.allowDropWithEffect(t.dropEffects);
},
onDrop: function(e) {
var t = this;
t.isDropAllowed(e) && (e.acceptDrop(), t.trigger("drop", e, e.findMatchingMimetype(t.acceptedMimetypes)));
}
});
return t;
}), define("helpers/dnd/SortableDropList", [ "./ItemDropZoneList", "./ItemDropZone", "../domtools" ], function(e, t, i) {
var n = e.prototype, a = e.extend({
initialize: function(e, i) {
var a = this, o = new t({
acceptedMimetypes: i.mimeTypes,
className: i.dropTargetTopClass,
top: i.dropTargetTopHeight,
ratioArea: [ null, .5 ]
}), r = new t({
acceptedMimetypes: i.mimeTypes,
className: i.dropTargetBottomClass,
bottom: i.dropTargetBottomHeight,
ratioArea: [ .5, null ]
});
n.initialize.call(a, e, [ o, r ]), a.bindTo(o, "drop", "_onTopZoneDropped"), a.bindTo(r, "drop", "_onBottomZoneDropped");
},
_onTopZoneDropped: function(e, t) {
var n = this, a = e.item, o = i.previousElement(a);
n.trigger("droppedBetween", e.getDragData(t), o, a, t);
},
_onBottomZoneDropped: function(e, t) {
var n = this, a = e.item, o = i.nextElement(a);
n.trigger("droppedBetween", e.getDragData(t), a, o, t);
}
});
return a;
}), define("helpers/dnd/DropList", [ "project!core/BaseEventEmitter" ], function(e) {
var t = e.prototype;
return e.extend({
initialize: function(e, i) {
var n = this;
if (t.initialize.call(n, {}), n.itemDragger = e, !i.className) throw new Error("missing className option");
n.bindTo(n.itemDragger, "itementer", n.onItemEnter), n.bindTo(n.itemDragger, "itemleave", n.onItemLeave), 
n.bindTo(n.itemDragger, "itemover", n.onItemOver), n.bindTo(n.itemDragger, "itemdrop", n.onItemDrop), 
n._appliesToItemCallback = i.appliesToItem, n.className = i.className, n.acceptedMimetypes = i.acceptedMimetypes, 
n.dropEffects = [ "move", "copy" ];
},
_isDropAllowed: function(e) {
var t = this;
if (t._appliesToItemCallback && !t._appliesToItemCallback(e.item)) return !1;
var i = e.isDropAllowedFor(t.acceptedMimetypes, t.dropEffects);
return i;
},
onItemEnter: function(e) {
var t = this;
t._isDropAllowed(e) && (e.allowDropWithEffect(t.dropEffects), e.item.classList.add(t.className));
},
onItemOver: function(e) {
var t = this;
t._isDropAllowed(e) && e.allowDropWithEffect(t.dropEffects);
},
onItemLeave: function(e) {
var t = this;
t._isDropAllowed(e) && e.item.classList.remove(t.className);
},
onItemDrop: function(e) {
var t, i, n = this;
n._isDropAllowed(e) && (e.acceptDrop(), t = e.findMatchingMimetype(n.acceptedMimetypes), 
i = e.getDragData(t), n.trigger("drop", e.item, i));
},
onDestroy: function() {
var e = this;
e.itemDragger.destroy(), t.onDestroy.call(e);
},
enable: function() {
var e = this;
e.itemDragger.enable();
},
disable: function() {
var e = this;
e.itemDragger.disable();
}
});
}), define("helpers/dnd/index", [ "./DragList", "./DropZone", "./ItemDragger", "./SortableDropList", "./DropList" ], function(e, t, i, n, a) {
return {
createDragList: function(t, i) {
return new e(t, i);
},
createDropZone: function(e, i) {
return new t(e, i);
},
createDropList: function(e, t) {
var n = new i(e);
return new a(n, t);
},
createDropBetweenList: function(e, t) {
var a = new i(e), o = new n(a, t);
return o;
}
};
}), define("views/Sidebar/SidebarDropZoneView", [ "application/runtime", "wunderbits/WBViewPresenter", "views/Sidebar/ListItemView", "models/ListModel", "helpers/dnd/index" ], function(e, t, i, n, a) {
var o = "application/x-wunderlist-task", r = t.prototype;
return t.extend({
className: "new-list-dropzone",
tagName: "ol",
initialize: function() {
var e = this;
r.initialize.apply(this, arguments), e._setupTaskDropZone();
},
_setupTaskDropZone: function() {
var e = this;
e.dropZone || (e.dropZone = a.createDropZone(e.el, {
mimeTypes: [ o ],
dropEffect: "move"
}), e.bindTo(e.dropZone, "dragenter", e._dragEnter), e.bindTo(e.dropZone, "dragleave", e._dragLeave), 
e.bindTo(e.dropZone, "drop", e._drop), e.dropZone.enable());
},
_attachItemView: function() {
var t = this, a = e.language, o = a.getText("placeholder_new_list").toString(), r = new n({
title: o
});
t.listItemView = t.addSubview(new i({
model: r
})), t.listItemView.render(), t.listItemView.el.classList.add("active"), t.el.appendChild(t.listItemView.el);
},
_detachItemView: function() {
var e = this;
e.destroySubview(e.listItemView), e.listItemView = null;
},
_dragEnter: function(e) {
var t = this;
t.listItemView || t._attachItemView(), t.listItemView.el.style.top = t._calculateHoverItemTop(e) + "px";
},
_drop: function(t) {
var i = JSON.parse(t);
e.trigger("route:lists/new/" + i.join(","));
},
_calculateHoverItemTop: function(e) {
var t = this, i = t.el.offsetTop, n = e - i;
return n -= 19, n = Math.max(0, n);
},
_dragLeave: function() {
var e = this;
e.listItemView && e._detachItemView();
},
onDestroy: function() {
var e = this;
r.onDestroy.call(e), e.dropZone.destroy();
}
});
}), define("views/OrderedListView", [ "application/runtime", "wunderbits/WBViewPresenter", "helpers/domtools" ], function(e, t, i) {
var n = t.prototype;
return t.extend({
tagName: "ul",
collection: void 0,
observes: {
collection: {
add: "_onModelAdd",
remove: "_onModelRemove",
move: "_onModelMove"
}
},
initialize: function(e) {
var t = this;
if (t._hasRendered = !1, !e || !e.collection) throw new Error("This view requires options.collection to be initialized.");
t.collection = e.collection, n.initialize.apply(t, arguments);
},
render: function(e) {
var t = this;
if (e && e.collection && (t.collection = e.collection, t.createObserveBindings(t)), 
!t._hasRendered || e.reRender) {
var i = document.createDocumentFragment();
t.collection.models.forEach(function(e) {
var n = t.getViewInstanceForModel(e).render();
i.appendChild(n.el);
}), t.el.appendChild(i), t._hasRendered = !0;
}
return this;
},
getViewInstanceForModel: function() {
throw new Error("#getViewInstance not implemented.");
},
_onModelMove: function(e, t, i) {
this._onModelRemove(e, t, i), this._onModelAdd(e, t, i);
},
_onModelAdd: function(t, n, a) {
var o = this;
if (o._hasRendered) {
var r, s, l = o.getViewInstanceForModel(t), d = l.render().el, c = a.index;
if (c < n.length - 1) {
r = n.at(c + 1).id, s = i.byRel(r, o.el);
try {
o.el.insertBefore(d, s);
} catch (u) {
console.error("unable to instert node"), e.error.notify("OrderedListView", "unable to insert node", {
index: c,
length: n.length,
afterId: r,
afterNode: !!s,
destroyed: o.destroyed
});
}
} else o.el.appendChild(d);
}
},
_onModelRemove: function(e) {
var t = this;
if (t._hasRendered) {
var i = t.getSubview(e.attributes.type + e.id);
i && i.destroy();
}
}
});
}), define("views/Sidebar/DraggableListView", [ "application/runtime", "views/OrderedListView", "helpers/domtools", "helpers/dnd/index" ], function(e, t, i, n) {
var a = t.prototype;
return t.extend({
initialize: function() {
var e = this;
e.dragHelper = null, a.initialize.apply(e, arguments);
},
_setupDragHelper: function(e) {
var t = this;
t.dragHelper = n.createDragList(t.el, {
mimeType: e,
itemToData: t._itemToData.bind(t),
getDragImage: t._createDragImageElement.bind(t),
disposeDragImage: t._disposeDragImage.bind(t),
effectAllowed: [ "move" ]
}), t.dragHelper.enable();
},
_itemToData: function(e) {
var t = e.getAttribute("rel");
return t;
},
_disposeDragImage: function(e) {
try {
window.document.body.removeChild(e);
} catch (t) {}
},
_createDragImageElement: function(e) {
var t = window.getComputedStyle(e), i = e.cloneNode(!0);
i.classList.add("list-drag-clone"), i.style.height = t.height;
var n = window.document.body;
return n.insertBefore(i, n.firstChild), i;
}
});
}), define("views/Sidebar/Controllers/FolderItemController", [ "wunderbits/data/keycodes", "wunderbits/WBViewController", "wunderbits/helpers/strings" ], function(e, t, i) {
var n = t.prototype;
return t.extend({
"implements": {
"click:expand": "_toggleFolderExpanded",
"keydown:titleInput": "_onTitleInputKeys",
"keydown:folder": "_onFolderKeydown",
"keydown:folderOptions": "_onFolderOptionsKeydown",
"blur:titleInput": "_onTitleInputBlur",
focus: "_onMainElFocus"
},
initialize: function(e) {
var t = this;
t.folderActions = e.folderActions, n.initialize.apply(t, arguments);
},
_onMainElFocus: function() {
this._focusFolderHeader();
},
_toggleFolderExpanded: function() {
var e = this;
e._updateFolderExpandedState(!e.view.model.isExpanded()), e._focusFolderHeader();
},
_expandFolder: function() {
var e = this;
e._updateFolderExpandedState(!0), e._focusFolderHeader();
},
_collapseFolder: function() {
var e = this;
e._updateFolderExpandedState(!1), e._focusFolderHeader();
},
_updateFolderExpandedState: function(e) {
var t = this, i = t.view.model;
i.save("expanded", e);
},
_focusFolderHeader: function() {
this.view.$(".folder-header").focus();
},
_onFolderKeydown: function(t) {
var i = this;
t.which === e.enter || t.which === e.spacebar ? (i._toggleFolderExpanded(), i.stopItCold(t)) : t.which === e.right ? (i._expandFolder(), 
i.stopItCold(t)) : t.which === e.left ? (i._collapseFolder(), i.stopItCold(t)) : t.which === e.tab && (i._focusOptionButtonOrSelf(), 
i.stopItCold(t));
},
_onFolderOptionsKeydown: function(t) {
var i = this;
t.which === e.enter && (i.view._toggleMenu(t), i.stopItCold(t));
},
_focusOptionButtonOrSelf: function() {
var e = this, t = e.view.$(".folder-option-button");
t.is(":focus") ? e.view.$el.focus() : t.focus();
},
_onTitleInputKeys: function(t) {
var i = this, n = i.view, a = t.which === e.enter, o = t.which === e.esc, r = t.which === e.right, s = t.which === e.left, l = t.which === e.spacebar, d = t.which === e.tab;
if (a || o || d) {
var c = n.getTitleInputValue();
a && i._updateTitle(c), n.exitEditMode(), n.$el.focus(), i.stopItCold(t);
} else (r || s || l) && t.stopPropagation();
},
_onTitleInputBlur: function() {
var e = this, t = e.view, i = t.getTitleInputValue();
e._updateTitle(i), t.exitEditMode();
},
_updateTitle: function(e) {
var t = this;
e && e.length && (e = i.emojiTokensToUnicode(i.trim(e, 255)), t.folderActions.rename(e));
}
});
}), define("views/Sidebar/DropOnListMixin", [ "project!core/WBMixin", "helpers/dnd/ItemDragger", "helpers/dnd/DropList" ], function(e, t, i) {
var n = "application/x-wunderlist-task";
return e.extend({
enableDropOnList: function(e) {
var a = this;
a.dropOnListHelper = new i(new t(a.el), {
acceptedMimetypes: [ n ],
className: "list-hover",
appliesToItem: e
}), a.bindTo(a.dropOnListHelper, "drop", a._onTasksDroppedOnList), a.dropOnListHelper.enable();
},
_onTasksDroppedOnList: function(e, t) {
var i = this, n = e.getAttribute("rel"), a = JSON.parse(t);
i.trigger("tasksDropped", n, a);
}
});
}), define("views/Sidebar/Controllers/ListCollectionDragController", [ "wunderbits/WBViewController", "actions/Factory" ], function(e, t) {
var i = e.prototype;
return e.extend({
"implements": {
tasksDropped: "_handleMoveTasksToList"
},
initialize: function() {
var e = this;
e.reparentTask = t.reparentTask(), i.initialize.apply(e, arguments);
},
_handleMoveTasksToList: function(e, t) {
var i = this;
i.reparentTask.moveTasksToList(e, t);
}
});
}), define("views/Sidebar/FolderCollectionView", [ "views/Sidebar/DraggableListView", "views/Sidebar/ListItemView", "helpers/dnd/index", "views/Sidebar/DropOnListMixin", "views/Sidebar/Controllers/ListCollectionDragController" ], function(e, t, i, n, a) {
var o = e.prototype, r = "application/x-wunderlist-list", s = e.extend({
observes: {
collection: {
add: "_updateHeight",
remove: "_updateHeight"
}
},
"implements": [ a ],
initialize: function(e) {
var t = this;
t.folderActions = e.folderActions, o.initialize.call(t, {
collection: t.folderActions.getListCollection(),
model: e.model
}), t.dropHelper = i.createDropBetweenList(t.el, {
dropTargetTopClass: "dragAreaTop",
dropTargetTopHeight: 2,
dropTargetBottomClass: "dragAreaBottom",
dropTargetBottomHeight: 0,
mimeTypes: [ r ]
}), t.bindTo(t.dropHelper, "droppedBetween", t._onDropLists), t.dropHelper.enable(), 
t.enableDropOnList(), t._setupDragHelper(r);
},
render: function() {
var e = this, t = o.render.call(e);
return e._updateHeight(), e.$el.attr("id", "folder-collection-" + e.model.attributes.id), 
t;
},
getViewInstanceForModel: function(e) {
var i = this, n = new t({
model: e
});
return i.addSubview(n, e.attributes.type + e.id), i.dragHelper.prepareItem(n.el), 
n;
},
_onDropLists: function(e, t, i) {
var n = this, a = t && t.getAttribute("rel"), o = i && i.getAttribute("rel");
n.folderActions.moveList(e, a, o);
},
_updateHeight: function() {
var e = this;
e.el && (e.el.style.height = 34 * e.collection.length + "px");
}
});
return n.applyToClass(s), s;
}), define("/styles/_popover.js", {
name: "_popover",
data: "#wunderlist-base.safari .popover{-webkit-filter:none;-webkit-box-shadow:0 1px 4px rgba(0,0,0,0.3);box-shadow:0 1px 4px rgba(0,0,0,0.3)}#wunderlist-base .popover{display:none;position:absolute;-webkit-border-radius:4px;border-radius:4px;background:#fff;min-height:15px;min-width:200px;max-width:304px;z-index:1500;color:#262626;-webkit-filter:drop-shadow(0 1px 4px rgba(0,0,0,0.2));-webkit-box-shadow:0 1px 4px rgba(0,0,0,0.2);box-shadow:0 1px 4px rgba(0,0,0,0.2);}#wunderlist-base .popover .scroll-wrapper{position:relative;overflow:hidden;width:211px}#wunderlist-base .popover .buttonbar{zoom:1;}#wunderlist-base .popover .buttonbar:before,#wunderlist-base .popover .buttonbar:after{content:\"\";display:table}#wunderlist-base .popover .buttonbar:after{clear:both}#wunderlist-base .popover .buttonbar.full{padding:0;margin-bottom:12px;}#wunderlist-base .popover .buttonbar.full a{text-align:center;width:50%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}#wunderlist-base .popover .buttonbar.toggle-date-type{padding:12px 12px 0 12px}#wunderlist-base .popover .arrow{position:absolute;border-width:12px;border-style:solid;width:0;height:0;z-index:100;pointer-events:none}#wunderlist-base .popover.top .arrow{left:50%;margin-left:-12px;bottom:-23px;border-color:#fff transparent transparent transparent}#wunderlist-base .popover.right .arrow{top:50%;margin-top:-12px;left:-23px;border-color:transparent #fff transparent transparent}#wunderlist-base .popover.bottom .arrow{left:50%;margin-left:-12px;top:-23px;border-color:transparent transparent #fff transparent}#wunderlist-base .popover.left .arrow{top:50%;margin-top:-12px;right:-23px;border-color:transparent transparent transparent #fff}#wunderlist-base .popover .inner{padding:12px;font-size:13px;}#wunderlist-base .popover .inner .buttonbar{margin:12px 0 0 0}#wunderlist-base .popover .content p{zoom:1;font-size:11px;}#wunderlist-base .popover .content p:before,#wunderlist-base .popover .content p:after{content:\"\";display:table}#wunderlist-base .popover .content p:after{clear:both}#wunderlist-base .popover .content p.center{padding:10px}#wunderlist-base .popover .content p a{color:#2e93e3;font-weight:bold;}#wunderlist-base .popover .content p a:hover{text-decoration:underline}#wunderlist-base .popover .content.scroll{overflow:scroll}#wunderlist-base .popover div.header{text-align:center;font-weight:bold;height:19px;padding-top:2px;color:#262626;font-size:14px;}#wunderlist-base .popover div.header .button{margin:0;position:absolute;right:12px;top:12px;}#wunderlist-base .popover div.header .button.left{left:12px;right:auto}#wunderlist-base .popover .top{margin:-12px -12px 0 -12px;padding:12px;border-bottom:1px solid #bebebe;-webkit-box-shadow:0 2px 2px rgba(0,0,0,0.1);box-shadow:0 2px 2px rgba(0,0,0,0.1);-webkit-border-radius:4px 4px 0 0;border-radius:4px 4px 0 0;}#wunderlist-base .popover .top input{padding:8px;-webkit-border-radius:4px;border-radius:4px}#wunderlist-base .popover .list-menu{margin:-12px;}#wunderlist-base .popover .list-menu li.disabled{text-shadow:0 1px 0 #fff;display:block;padding:6px 10px;background:transparent !important;text-shadow:none !important;color:#aaa;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;}#wunderlist-base .popover .list-menu li.disabled.last-sync{white-space:normal;overflow:visible;}#wunderlist-base .popover .list-menu li.disabled.last-sync .icon.offline{display:none;margin-top:-2px}#wunderlist-base .popover .list-menu li.disabled.last-sync.offline .icon.offline{display:inline-block}#wunderlist-base .popover .list-menu li.active a{color:#fff;background:#3595e1;text-shadow:0 1px 0 rgba(0,0,0,0.5);}#wunderlist-base .popover .list-menu li.active a .popover{text-shadow:none;display:block}#wunderlist-base .popover .list-menu li a{text-shadow:0 1px 0 #fff;display:block;padding:5px 10px;color:#262626;}#wunderlist-base .popover .list-menu li a.open-backgrounds:before{content:'\\25b6';float:right}#wunderlist-base .popover .list-menu li a:hover{color:#fff;background:#3595e1;text-shadow:none !important;}#wunderlist-base .popover .list-menu li a:hover.open-backgrounds:after{margin-top:-10px;content:'';width:0;height:30px;position:absolute;right:-27px;border-bottom:51px solid transparent;border-right:106px solid transparent;border-bottom-left-radius:100%;-webkit-transform:rotate(-30deg);-moz-transform:rotate(-30deg);-o-transform:rotate(-30deg);-ms-transform:rotate(-30deg);transform:rotate(-30deg)}#wunderlist-base .popover .list-menu li a:hover .popover{text-shadow:none;display:block}#wunderlist-base .popover .list-menu li a.disabled{background:transparent !important;text-shadow:none !important;color:#aaa}#wunderlist-base .popover .list-menu li.separator{padding-bottom:5px;margin-bottom:5px;border-bottom:1px solid #fff;-webkit-box-shadow:inset 0 -1px 0 rgba(0,0,0,0.05);box-shadow:inset 0 -1px 0 rgba(0,0,0,0.05)}#wunderlist-base .popover .list-menu li:first-child a{-webkit-border-radius:3px 3px 0 0;border-radius:3px 3px 0 0}#wunderlist-base .popover .list-menu li:last-child a{-webkit-border-radius:0 0 3px 3px;border-radius:0 0 3px 3px}#wunderlist-base .popover .coachmark{padding:50px 30px;color:#737272;}#wunderlist-base .popover .coachmark svg{width:60px;height:60px;fill:#737272}#wunderlist-base .popover .coachmark h2{margin-bottom:10px}html[dir=rtl] #wunderlist-base .popover.datePicker .buttonbar .button{margin-left:0 !important}html[dir=rtl] #wunderlist-base .popover.backgrounds{right:initial;left:-227px}html[dir=rtl] #wunderlist-base .popover .list-menu li a.open-backgrounds:before{content:'\\25c0';float:left}html[dir=rtl] #wunderlist-base .popover .list-people li .name,html[dir=rtl] #wunderlist-base .popover .list-people li .description{padding-left:initial;padding-right:43px}html[dir=rtl] #wunderlist-base .popover .list-people li .button{margin-left:5px}html[dir=rtl] #wunderlist-base .popover .list-people li .button.leave-list,html[dir=rtl] #wunderlist-base .popover .list-people li .button.invite-person,html[dir=rtl] #wunderlist-base .popover .list-people li .button.delete-person,html[dir=rtl] #wunderlist-base .popover .list-people li .button.invite-person-success{float:left}"
}), define("wunderbits/WBPopoverView", [ "./WBRuntime", "./WBView", "style!_popover" ], function(e, t, i) {
var n = e._, a = e.$, o = e.Backbone, r = e.global, s = t.prototype;
return t.extend({
className: "popover",
styles: [ i ],
initialize: function(t) {
var i = this;
if (s.initialize.apply(i, arguments), !(i.options.content instanceof o.View)) throw new Error("Cannot init class without a Backbone view as content");
if (!(i.options.target instanceof a)) throw new Error("Cannot init class without a Jquery object as target");
i.name = t.name, i.content = i.options.content, i.$target = i.options.target, i.ignoredElements = i.options.ignoredElements, 
i._bindPopoverEvents(), i._bindTargetEvents(), i.popoverOpened = !1, i.forceTop = t.forceTop, 
t.id && (i.id = "error-handle"), i.debouncedClose = n.debounce(function(e) {
i.popoverOpened && i.trigger("popover:close", e);
}, 500, !0), i.bindTo(e, "interface:scroll", i.debouncedClose);
},
renderToDOM: function() {
var e = this, t = e.options.renderTarget || document.body, i = a("<div>").addClass("arrow"), n = document.createDocumentFragment();
return n.appendChild(i[0]), n.appendChild(e.options.prerenderedContent === !0 ? e.content.el : e.content.render().el), 
e.el.appendChild(n), a(t).append(e.el), e.options.hover && e._bindHoverEventsOnPopover(), 
e;
},
onDestroy: function() {
var e = this;
a(document).unbind("click." + e.cid), e.$(".arrow").remove(), e.options = null, 
e.content = null, e.$target = null;
},
toggleVisible: function() {
var e = this;
e.trigger(e.popoverOpened ? "popover:close" : "popover:open");
},
isEventOnIgnoredElement: function(e) {
var t = this, i = !1;
return e ? (n.each(t.ignoredElements, function(t) {
a(e.target)[0] === t[0] && (i = !0);
}), i) : !1;
},
_bindTargetEvents: function() {
var e = this;
if (e.options.bindToTarget !== !1) {
if (e.options.hover) return void e._bindHoverEventsOnTarget();
e._bindClickEventsOnTarget();
}
},
_bindOutsideClick: function() {
var e = this;
e.outsideClick = e.bindTo(a(document), "click." + e.cid, function(t) {
if (!e.destroyed && !e.isEventOnIgnoredElement(t) && t.target !== e.el && !a(t.target).parents(".popover").size()) {
var i = e.options;
"function" == typeof i.onBlur && i.onBlur.call(i.context), e.trigger("popover:close");
}
});
},
_bindClickEventsOnTarget: function() {
var e = this;
e.bindTo(e.$target, "click", function(t) {
e.isEventOnIgnoredElement(t) || (e.toggleVisible(), t.stopPropagation());
});
},
_bindHoverEventsOnTarget: function() {
var e, t, i = this;
t = i.options.delay || 500, i.bindTo(i.$target, "mouseenter", function() {
e = r.setTimeout(function() {
i.trigger("popover:open");
}, t), r.clearTimeout(i.timeClose);
}), i.bindTo(i.$target, "mouseleave", function() {
i.timeClose = r.setTimeout(function() {
i.trigger("popover:close");
}, t), r.clearTimeout(e);
});
},
_bindPopoverEvents: function() {
var e = this;
e.on("popover:open", e._openPopover, e), e.on("popover:close", e._closePopover, e);
},
_getTargetInfo: function() {
var e = this, t = e.roundValues(e.$target.offset());
return n.extend(t, {
width: e.$target.outerWidth(),
height: e.$target.outerHeight()
});
},
_setPopoverLocation: function() {
var e, t, i = this;
switch (i.margin = i.options.margin || 20, i.targetInfo = i._getTargetInfo(), i.popoverSize = {
width: i.$el.width(),
height: i.$el.height()
}, t = i.options.position || i._getDefaultPosition(), i.offset = i._getOffset(), 
i.quadrant = i._getQuadrant(), t) {
case "top":
e = i._getTopPosition();
break;

case "right":
e = i._getRightPosition();
break;

case "left":
e = i._getLeftPosition();
break;

case "bottom":
e = i._getBottomPosition();
break;

default:
e = i.getDefaultLocation();
}
e = i.roundValues(e), i.$el.css(e).addClass(t), i._setArrowLocation(t, i.options.arrowPosition, i.options.arrowOffset);
},
roundValues: function(e) {
return Object.keys(e).forEach(function(t) {
e[t] = Math.round(e[t]);
}), e;
},
_getTopPosition: function() {
var e = this, t = {};
return "top" === e.quadrant.vertical || e.forceTop ? t.top = e.targetInfo.top - e.popoverSize.height - e.margin : t.bottom = a(document).height() - e.targetInfo.top + e.margin, 
"left" === e.quadrant.horizontal ? t.left = e.targetInfo.left + e.targetInfo.width / 2 - e.popoverSize.width / 2 + e.offset : t.right = a(".main-interface").width() - e.targetInfo.left - e.targetInfo.width / 2 - e.popoverSize.width / 2 - e.offset, 
t;
},
_getRightPosition: function() {
var e = this, t = {};
return "top" === e.quadrant.vertical ? (t.top = e.targetInfo.top + e.targetInfo.height / 2 - e.popoverSize.height / 2, 
t.top < 0 && (e.offset = t.top - 10, t.top -= e.offset)) : (t.bottom = a(document).height() - e.targetInfo.top - e.popoverSize.height / 2 - e.targetInfo.height / 2, 
t.bottom < 0 && (e.offset = -1 * (t.bottom - 10), t.bottom += e.offset)), "left" === e.quadrant.horizontal ? t.left = e.targetInfo.left + e.targetInfo.width + e.margin : t.right = a(".main-interface").width() - e.targetInfo.left - e.targetInfo.width - e.popoverSize.width - e.margin, 
t;
},
_getBottomPosition: function() {
var e = this, t = {};
return "top" === e.quadrant.vertical ? t.top = e.targetInfo.top + e.targetInfo.height + e.margin : t.bottom = a(document).height() - e.targetInfo.top - e.targetInfo.height - e.popoverSize.height - e.margin, 
"left" === e.quadrant.horizontal ? t.left = e.targetInfo.left + e.targetInfo.width / 2 - e.popoverSize.width / 2 + e.offset : t.right = a(".main-interface").width() - e.targetInfo.left - e.targetInfo.width / 2 - e.popoverSize.width / 2 - e.offset, 
t;
},
_getLeftPosition: function() {
var e = this, t = {};
return "top" === e.quadrant.vertical ? (t.top = e.targetInfo.top + e.targetInfo.height / 2 - e.popoverSize.height / 2, 
t.top < 0 && (e.offset = t.top - 10, t.top -= e.offset)) : (t.bottom = a(document).height() - e.targetInfo.top - e.popoverSize.height / 2 - e.targetInfo.height / 2, 
t.bottom < 0 && (e.offset = -1 * (t.bottom - 10), t.bottom += e.offset)), "left" === e.quadrant.horizontal ? t.left = e.targetInfo.left - e.popoverSize.width - e.margin : t.right = a(".main-interface").width() - e.targetInfo.left + e.margin, 
t;
},
_getQuadrant: function() {
var e = this;
return {
vertical: e.targetInfo.top > .5 * a(document).height() ? "bottom" : "top",
horizontal: e.targetInfo.left > .5 * a(document).width() ? "right" : "left"
};
},
_getDefaultPosition: function() {
var e = this;
return e.targetInfo.top > .5 * a(document).height() ? "top" : "bottom";
},
_setArrowLocation: function(e, t, i) {
var n, a = this, o = 12, r = a.$el.find(".arrow");
"top" === e || "bottom" === e ? (n = "left" === t ? r.outerWidth() + a.offset : "right" === t ? a.popoverSize.width - r.outerWidth() + a.offset : "center" === t ? a.popoverSize.width / 2 + a.offset : a.popoverSize.width / 2, 
r.css("left", n + i + "px"), r.css("margin-left", -a.offset - o)) : (n = a.popoverSize.height / 2, 
r.css("top", n + i + "px"), r.css("margin-top", +a.offset - o));
},
_getOffset: function() {
var e = this, t = e.options.offset;
if (t = "undefined" == typeof t ? 0 : n.isFunction(t) ? t() : t, "string" == typeof t) switch (t) {
case "top":
t = e.popoverSize.height / 2 - e.targetInfo.height / 2;
break;

case "right":
t = e.popoverSize.width / 2 - e.targetInfo.width / 2;
break;

case "bottom":
t = -(e.popoverSize.height / 2 - e.targetInfo.height / 2);
break;

case "left":
t = -(e.popoverSize.width / 2 - e.targetInfo.width / 2);
}
return t;
},
_openPopover: function() {
var e = this, t = e.options, i = t.context;
t.closeOthers && a(document.body).click(), "function" == typeof t.preventOpen && t.preventOpen.call(i) || (e.popoverOpened = !0, 
e.renderToDOM(), e._bindOutsideClick(e.ignoredElements), e._setPopoverLocation(), 
e._show(), t.onShow && t.onShow.call(i));
},
_closePopover: function(e) {
var t = this;
if (("detail-date" !== t.name && "detail-assign" !== t.name || "lists" !== e) && t.popoverOpened) return e || (e = {}), 
t.options || (t.options = {}), t.outsideClick && t.unbindFrom(t.outsideClick), t.options.onClose && t.options.onClose.call(t.options.context), 
t.options && !t.options.animation ? void (e.fadeOut ? t.$el.fadeOut(150, function() {
t._cleanUpAndRemovePopover();
}) : t._cleanUpAndRemovePopover()) : void (t.$el && t.$el.fadeOut("fast", n.bind(t._cleanUpAndRemovePopover, t)));
},
_cleanUpAndRemovePopover: function() {
var e = this;
e.destroyed || (e.$el.removeClass("top right bottom left"), e.$el.css({
top: "",
bottom: "",
right: "",
left: ""
}), e.$el.remove()), e.popoverOpened = !1;
},
_show: function() {
var e = this;
return e.options.animation ? void e.$el.fadeIn("fast") : void e.$el.show();
},
_bindHoverEventsOnPopover: function() {
var e = this;
e.$el.on({
mouseenter: n.bind(function() {
r.clearTimeout(e.timeClose);
}, e),
mouseleave: n.bind(function() {
e.trigger("popover:close");
}, e)
});
}
});
}), define("views/Popovers/PopoverView", [ "application/runtime", "wunderbits/WBViewPresenter", "wunderbits/WBPopoverView" ], function(e, t, i) {
var n = e._, a = e.global, o = t.prototype;
return t.extend({
initialize: function() {
var t = this;
o.initialize.apply(t, arguments), t.bindTo(e, "popover:close", t.close);
},
open: function(e) {
var t = this;
e.reconfig && n.extend(t.config, e);
var i = t.getPopover(e);
t.returnRoute = e && e.returnRoute, i.trigger("popover:open"), t.trigger("opened");
},
close: function(e) {
var t = this;
if (!t.config || !t.config.preventDefaultClose) {
t.doNotRoute = e && e.doNotRoute;
var i = t.getPopover(n.extend(e || {}, {
autoCreate: !1
}));
i && i.trigger("popover:close", e), t.trigger("closed");
}
},
toggle: function(e, t) {
var i = this;
e = n.isArray(e) ? e[0] : e, e || (e = i.isOpen ? "close" : "open"), i[e](t);
},
updatePosition: function() {
var e = this, t = e.getPopover({
autoCreate: !1
});
t && t._setPopoverLocation();
},
getPopover: function(e) {
var t = this, n = t.getPopoverConfig();
return t.popover || e.autoCreate === !1 || (n.prerenderedContent && n.content.render(), 
t.popover = t.addSubview(new i(n))), t.popover;
},
getPopoverConfig: function() {
var e = this;
if (!e.destroyed) return n.extend({
context: e,
content: e,
target: e.options.target,
offset: e.options.offset,
margin: e.options.margin,
renderTarget: e.options.renderTarget,
arrowOffset: e.options.arrowOffset,
position: e.options.position,
onShow: e.onPopoverShow.bind(e),
onClose: e.onPopoverClose.bind(e)
}, e.config || {});
},
onPopoverShow: function() {
var e = this;
e.isOpen || (e.isOpen = !0, e.defer(function() {
e.openURL = a.location.href, n.isFunction(e.onShow) && e.onShow(), e.options && n.isFunction(e.options.onShow) && e.options.onShow();
}));
},
onPopoverClose: function() {
var t = this;
t.isOpen && (t.isOpen = !1, t.delay(function() {
if (!t.destroyed) {
var i = a.location.href, o = i === t.openURL, r = t.returnRoute || "lists/inbox";
o && e.trigger("route:" + r, {
trigger: !1
});
var s = t.options;
n.isFunction(t.onClose) && t.onClose(), n.isFunction(s.onClose) && s.onClose.call(t);
}
}, 50));
}
});
}), define("views/Popovers/Controllers/FolderMenuController", [ "application/runtime", "wunderbits/WBViewController", "wunderbits/data/keycodes" ], function(e, t, i) {
var n = e.$;
return t.extend({
"implements": {
keydown: "_onKeydown"
},
_onKeydown: function(e) {
var t = this;
e.which === i.esc ? t.view.close() : e.which === i.tab || e.which === i.up || e.which === i.down ? t.view.cycleFocus() : e.which === i.enter && n(e.target).click(), 
t.stopItCold(e);
}
});
}), define("/templates/folderMenu.js", {
name: "folderMenu",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = "function", s = '<ul class="folder-menu" aria-role="menu"> <li class="rename-folder" data-key-aria-label="button_rename_folder" rel="rename" tabindex="0" aria-role="menuitem">';
return o = t.renameLabel || e && e.renameLabel, a = typeof o === r ? o.call(e, {
name: "renameLabel",
hash: {},
data: n
}) : o, (a || 0 === a) && (s += a), s += '</li> <li class="remove-folder" data-key-aria-label="button_ungroup" rel="remove" tabindex="0" aria-role="menuitem">', 
o = t.removeLabel || e && e.removeLabel, a = typeof o === r ? o.call(e, {
name: "removeLabel",
hash: {},
data: n
}) : o, (a || 0 === a) && (s += a), s + "</li> </ul> ";
},
useData: !0
}
}), define("/styles/popover/folderMenu.js", {
name: "popover/folderMenu",
data: "#wunderlist-base #folder-menu{min-width:initial;overflow:hidden;}#wunderlist-base #folder-menu.bottom{margin-top:-20px}#wunderlist-base #folder-menu.top{margin-bottom:-20px}#wunderlist-base #folder-menu .arrow{display:none}#wunderlist-base #folder-menu ul.folder-menu{list-style:none;padding:0;position:relative;font-size:13px;}#wunderlist-base #folder-menu ul.folder-menu li{padding:4px 10px;}#wunderlist-base #folder-menu ul.folder-menu li:first-child{border-bottom:1px solid #d6d6d6}#wunderlist-base #folder-menu ul.folder-menu li:hover,#wunderlist-base #folder-menu ul.folder-menu li:focus{cursor:pointer}#wunderlist-base #folder-menu ul.folder-menu li:focus{background:rgba(24,106,178,0.1)}#wunderlist-base #folder-menu ul.folder-menu li:hover{background:#186ab2;color:#fcfcfc}"
}), define("views/Popovers/FolderMenu", [ "application/runtime", "views/Popovers/PopoverView", "views/Popovers/Controllers/FolderMenuController", "template!folderMenu", "style!popover/folderMenu" ], function(e, t, i, n, a, o) {
return t.extend({
template: n,
styles: [ a ],
config: {
bindToTarget: !1,
margin: 0,
offset: 0,
id: "folder-menu"
},
"implements": [ i ],
emits: {
"click li": "click",
"keydown li": "keydown",
"keydown folder-menu": "keydown"
},
renderData: {
email: o,
isPro: o,
isChrome: o,
isIE: o,
extensionLink: o,
isPackagedApp: o,
isLabsEnabled: o,
syncStatus: o,
pendingCount: o,
isTeamAdmin: o,
domain: o
},
formatData: function() {
return {
removeLabel: e.language.getLabel("button_ungroup").toString(),
renameLabel: e.language.getLabel("button_rename_folder").toString()
};
},
onShow: function() {
this.$(".rename-folder").focus();
},
onClose: function() {
var e = this;
e.destroy();
},
cycleFocus: function() {
var e = this, t = e.$(".folder-menu li"), i = t.index(":focus");
i < t.length - 1 ? t.get(i + 1).focus() : t.get(0).focus();
}
});
}), define("/templates/sidebarFolder.js", {
name: "sidebarFolder",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression, s = t.helperMissing;
return '<div class="folder-container"> <div class="folder-header" tabindex="0" role="button" aria-owns="folder-collection-' + r((a = t.id || e && e.id, 
typeof a === o ? a.call(e, {
name: "id",
hash: {},
data: n
}) : a)) + '"> <input type="text" class="title hidden" value="" maxlength="255" aria-hidden="true"/> ' + r((a = t.symbol || e && e.symbol || s, 
a.call(e, "folders", {
name: "symbol",
hash: {},
data: n
}))) + ' <span class="title" aria-hidden="true">' + r((a = t.title || e && e.title, 
typeof a === o ? a.call(e, {
name: "title",
hash: {},
data: n
}) : a)) + '</span> <a class="folder-option-button" data-key-aria-label="voiceover_folder_options_button" aria-role="button" tabindex="0"> ' + r((a = t.symbol || e && e.symbol || s, 
a.call(e, "folder-option", {
name: "symbol",
hash: {},
data: n
}))) + " </a> " + r((a = t.symbol || e && e.symbol || s, a.call(e, "folder-arrow", {
name: "symbol",
hash: {},
data: n
}))) + " </div> </div> ";
},
useData: !0
}
}), define("/templates/symbols/folders.js", {
name: "symbols/folders",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<svg class="folders" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" > <g id="Web-svgs" stroke="none" stroke-width="1" fill-rule="evenodd"> <g id="folders" > <g id="Path-2-+-c-2" transform="translate(2.000000, 2.000000)"> <path d="M0.5,16 C0.22,16 -1.34760666e-14,15.82 -1.34760666e-14,15.5909091 L-1.42108547e-14,8.22727273 C-1.42108547e-14,7.55636364 0.68,7 1.5,7 L14.5,7 C15.32,7 16,7.55636364 16,8.22727273 L16,15.5909091 C16,15.82 15.78,16 15.5,16 L0.5,16 Z" id="Path-2" fill-opacity="0.06" transform="translate(8.000000, 11.500000) rotate(-180.000000) translate(-8.000000, -11.500000) "></path> <path d="M0.5,12 C0.22,12 -1.34760666e-14,11.78 -1.34760666e-14,11.5 L-1.42108547e-14,2.5 C-1.42108547e-14,1.68 0.68,1 1.5,1 L14.5,1 C15.32,1 16,1.68 16,2.5 L16,11.5 C16,11.78 15.78,12 15.5,12 L0.5,12 Z M1,11 L15,11 L15,2.5 C15,2.22 14.78,2 14.5,2 L1.5,2 C1.22,2 1,2.22 1,2.5 L1,11 Z M9.5,16 C8.68,16 8,15.32 8,14.5 L8,13.5 C8,13.22 8.22,13 8.5,13 C8.78,13 9,13.22 9,13.5 L9,14.5 C9,14.78 9.22,15 9.5,15 L14.5,15 C14.78,15 15,14.78 15,14.5 L15,13.5 C15,13.22 15.22,13 15.5,13 C15.78,13 16,13.22 16,13.5 L16,14.5 C16,15.32 15.32,16 14.5,16 L9.5,16 Z" id="c-2" transform="translate(8.000000, 8.500000) rotate(-180.000000) translate(-8.000000, -8.500000) "></path> </g> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/symbols/folder-option.js", {
name: "symbols/folder-option",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<svg class="folder-option" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>folder-option</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="folder-option" sketch:type="MSArtboardGroup" > <path d="M3,13 C1.34,13 0,11.66 0,10 C0,8.34 1.34,7 3,7 C4.66,7 6,8.34 6,10 C6,11.66 4.66,13 3,13 L3,13 Z M10,13 C8.34,13 7,11.66 7,10 C7,8.34 8.34,7 10,7 C11.66,7 13,8.34 13,10 C13,11.66 11.66,13 10,13 L10,13 Z M17,13 C15.34,13 14,11.66 14,10 C14,8.34 15.34,7 17,7 C18.66,7 20,8.34 20,10 C20,11.66 18.66,13 17,13 L17,13 Z M3,8 C1.9,8 1,8.9 1,10 C1,11.1 1.9,12 3,12 C4.1,12 5,11.1 5,10 C5,8.9 4.1,8 3,8 L3,8 Z M10,8 C8.9,8 8,8.9 8,10 C8,11.1 8.9,12 10,12 C11.1,12 12,11.1 12,10 C12,8.9 11.1,8 10,8 L10,8 Z M17,8 C15.9,8 15,8.9 15,10 C15,11.1 15.9,12 17,12 C18.1,12 19,11.1 19,10 C19,8.9 18.1,8 17,8 L17,8 Z" id="∫" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/symbols/folder-arrow.js", {
name: "symbols/folder-arrow",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<svg class="folder-arrow" width="15px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>folder-arrow</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="folder-arrow" sketch:type="MSArtboardGroup" > <path d="M13.61,16.8575 C13.79,16.6575 13.79,16.3375 13.61,16.1375 L7.45,9.9975 L13.61,3.8575 C13.79,3.6575 13.79,3.3375 13.61,3.1375 C13.41,2.9575 13.09,2.9575 12.89,3.1375 L6.39,9.6375 C6.21,9.8375 6.21,10.1575 6.39,10.3575 L12.89,16.8575 C12.99,16.9575 13.13,16.9975 13.25,16.9975 C13.37,16.9975 13.51,16.9575 13.61,16.8575 Z" id="w" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/styles/sidebarFolder.js", {
name: "sidebarFolder",
data: ".sidebarItem + .sidebarFolder{border-top:1px solid #eaeaea}.sidebarFolder{position:relative;overflow:hidden;border-bottom:1px solid #eaeaea;-webkit-transition:background 150ms ease-in-out;-moz-transition:background 150ms ease-in-out;-o-transition:background 150ms ease-in-out;-ms-transition:background 150ms ease-in-out;transition:background 150ms ease-in-out;}.sidebarFolder .sidebarItem{padding-left:16px}.sidebarFolder:hover{cursor:pointer}.sidebarFolder:first-child{border-top:1px solid #eaeaea}.sidebarFolder ul{padding:0;-webkit-transition:height 150ms ease-in-out;-moz-transition:height 150ms ease-in-out;-o-transition:height 150ms ease-in-out;-ms-transition:height 150ms ease-in-out;transition:height 150ms ease-in-out}.sidebarFolder .folder-header{display:block;padding:8px;position:relative;height:17px;}.sidebarFolder .folder-header .title{position:absolute;font-size:13px !important}.sidebarFolder .folder-header input.title{top:6px;left:36px;width:172px !important;height:20px;padding:0 6px !important}.sidebarFolder .folder-header span.title{left:0;top:0;padding:8px 8px 8px 36px;right:28px;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.sidebarFolder .folder-header svg{fill:#737272;position:absolute;top:6px;}.sidebarFolder .folder-header svg.folders{fill:#2b8dec}.sidebarFolder .folder-header .folder-arrow,.sidebarFolder .folder-header .folder-option{position:absolute}.sidebarFolder .folder-header .folder-arrow{right:5px;-webkit-transition:-webkit-transform 150ms ease-in-out;-moz-transition:-moz-transform 150ms ease-in-out;-o-transition:-o-transform 150ms ease-in-out;-ms-transition:-ms-transform 150ms ease-in-out;transition:transform 150ms ease-in-out}.sidebarFolder .folder-header .folder-option{display:none;right:30px}.sidebarFolder .folder-header .folder-option-button{display:block;height:20px;width:20px;margin:0 22px 0 auto;}.sidebarFolder .folder-header .folder-option-button:focus svg{fill:#186ab2}.sidebarFolder.collapsed ul{height:0 !important;}.sidebarFolder.collapsed ul li{display:none}.sidebarFolder.expanded{padding-bottom:7px;background:#f5f5f5;}.sidebarFolder.expanded .folder-header span.title{right:50px}.sidebarFolder.expanded .folder-header .folder-arrow{-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-o-transform:rotate(-90deg);-ms-transform:rotate(-90deg);transform:rotate(-90deg)}.sidebarFolder.expanded .folder-header .folder-option{display:block}.sidebarFolder.active{border-top:1px solid #186ab2;border-bottom:1px solid #186ab2;background:rgba(24,106,178,0.1);}.sidebarFolder.active .folder-option{display:block}.sidebarFolder .sidebarItem.active:before{content:'';position:absolute;left:0;height:inherit;width:16px;background:#186ab2}#wunderlist-base.nodewebkit .sidebarFolder .folder-option{display:none}"
}), define("views/Sidebar/FolderItemView", [ "application/runtime", "wunderbits/WBViewPresenter", "views/Sidebar/Controllers/FolderItemController", "views/Sidebar/FolderCollectionView", "views/Popovers/FolderMenu", "wunderbits/mixins/UnicodeEmojiViewMixin", "helpers/domtools", "template!sidebarFolder", "partial!symbols/folders", "partial!symbols/folder-option", "partial!symbols/folder-arrow", "style!sidebarFolder" ], function(e, t, i, n, a, o, r, s, l, d, c, u) {
var p = t.prototype, m = t.extend({
"implements": [ i ],
observes: {
model: {
"change:title": "_renderTitle",
"change:expanded": "_renderExpanded"
}
},
emits: {
"click .folder-header .folder-arrow": "click:expand",
"click .folder-header span.title": "click:expand",
"keydown .folder-header": "keydown:folder",
"keydown .folder-header .folder-option-button": "keydown:folderOptions",
"keydown .folder-header input.title": "keydown:titleInput",
"blur .folder-header input.title": "blur:titleInput",
focus: "focus"
},
events: {
"click .folder-option": "_toggleMenu"
},
styles: [ u ],
template: s,
tagName: "li",
className: "sidebarFolder collapsed",
attributes: {
tabindex: 0
},
initialize: function(e) {
var t = this;
t.folderActions = e.folderActions, t._hasRendered = !1, p.initialize.apply(t, arguments);
},
formatData: function() {
var e = this, t = e.model.attributes;
return {
isEditingTitle: e._isEditingTitle,
titleText: t.title,
title: t.title,
id: t.id
};
},
render: function() {
var e = this;
return e._hasRendered ? e : (e._hasRendered = !0, p.render.call(e), e.listsView = new n({
folderActions: e.folderActions,
model: e.model
}), e.addSubview(e.listsView), e.listsView.render(), e.el.querySelector(".folder-container").appendChild(e.listsView.el), 
e.el.setAttribute("rel", e.model.id), e._renderTitle(), e._renderExpanded(), e);
},
_renderExpanded: function() {
var e = this, t = e.model.isExpanded();
e.$el.toggleClass("expanded", t), e.$el.toggleClass("collapsed", !t), e.$(".folder-header").attr("aria-expanded", t);
},
expand: function() {
var e = this;
e.model.save("expanded", !0);
},
collapse: function() {
var e = this;
e.model.save("expanded", !1);
},
_updateTitleIfDone: function() {
var e = this, t = e.$(".folder-header");
t.find("input.title").addClass("hidden"), t.find("span.title").removeClass("hidden"), 
t.find(".folder-option").removeClass("hidden"), e._renderTitle();
},
enterEditMode: function(e) {
var t = this;
t.editReturnRoute = e && e.returnRoute;
var i = t.$(".folder-header"), n = i.find("input.title");
n.removeClass("hidden"), n.select(), i.find("span.title").addClass("hidden"), i.find(".folder-option").addClass("hidden");
},
exitEditMode: function() {
var t = this, i = t.$(".folder-header");
i.find("input.title").addClass("hidden"), i.find("span.title").removeClass("hidden"), 
i.find(".folder-option").removeClass("hidden"), t._renderTitle(), t.editReturnRoute && e.trigger("route:" + t.editReturnRoute);
},
getTitleInputValue: function() {
return this.el.querySelector("input.title").value;
},
_dissolveFolder: function() {
this.folderActions.dissolve();
},
_renderTitle: function() {
var e = this, t = e.model.attributes.title;
r.setText(e.el.querySelector("span.title"), t), e.el.querySelector(".folder-header").setAttribute("aria-label", t), 
e.el.querySelector("input.title").value = t, e.renderEmoji(e.$el), e.$(".folder-header").attr("aria-label", t);
},
_toggleMenu: function(e) {
var t = this;
t.menu ? (t.menu.close(), t.menu = void 0) : t._showMenu(), e.stopPropagation();
},
_showMenu: function() {
var e = this;
e.menu = new a({
target: e.$(".folder-option"),
name: "menu",
onClose: function() {
e.menu = void 0, e.$el.focus();
}
}), e.bindTo(e.menu, "click", "_onMenuClick"), e.addSubview(e.menu, "menu"), e.menu.open({});
},
_onMenuClick: function(t) {
var i = this, n = t.currentTarget.getAttribute("rel");
i.destroySubview("menu"), "rename" === n ? e.trigger("route:folders/" + i.model.id + "/edit") : "remove" === n && i._dissolveFolder();
}
});
return o.applyToClass(m), m;
}), define("helpers/dnd/SidebarDropList", [ "./ItemDropZoneList", "./ItemDropZone", "../domtools" ], function(e, t, i) {
var n = t.extend({
isDropAllowed: function() {
return !1;
}
}), a = "application/x-wunderlist-task", o = "application/x-wunderlist-list", r = "application/x-wunderlist-folder", s = 34, l = e.prototype, d = e.extend({
initialize: function(e) {
var i = this, d = e.itemDragger;
i.getMimetypeForItem = e.getMimetypeForItem;
var c = [ Math.ceil(.3 * s), Math.ceil(.4 * s) ], u = [ 0, Math.floor(.3 * s) ];
i.topDropZone = new t({
className: "dragAreaTop",
top: 2,
topArea: u,
acceptedMimetypes: [ o, r ]
}), i.listHeaderDropZone = new t({
className: "dragAreaFolder",
topArea: c,
acceptedMimetypes: [ o ],
appliesToItem: function(e) {
return i.getMimetypeForItem(e) === o;
}
}), i.folderHeaderDropZone = new n({
topArea: c,
acceptedMimetypes: [ o, a ],
appliesToItem: function(e) {
return i.getMimetypeForItem(e) === r;
}
}), i.bottomDropZone = new t({
className: "dragAreaBottom",
bottomArea: u,
acceptedMimetypes: [ o, r ]
}), l.initialize.call(i, d, [ i.topDropZone, i.bottomDropZone, i.listHeaderDropZone, i.folderHeaderDropZone ]), 
i.bindTo(i.topDropZone, "drop", "_onTopZoneDropped"), i.bindTo(i.bottomDropZone, "drop", "_onBottomZoneDropped"), 
i.bindTo(i.listHeaderDropZone, "drop", "_onCreateFolder"), i.bindTo(i.folderHeaderDropZone, "itementer", "_onEnterFolderHeader"), 
i.bindTo(i.folderHeaderDropZone, "itemleave", "_onLeaveFolderHeader");
},
_onTopZoneDropped: function(e, t) {
var n = this, a = e.item, o = i.previousElement(a);
n.trigger("droppedBetween", e.getDragData(t), o, a, t);
},
_onBottomZoneDropped: function(e, t) {
var n = this, a = e.item, o = i.nextElement(a);
n.trigger("droppedBetween", e.getDragData(t), a, o, t);
},
_onCreateFolder: function(e, t) {
var i = this;
i.trigger("createFolder", e.getDragData(t), t, e.item);
},
_onEnterFolderHeader: function(e) {
var t = this;
t.trigger("enterFolderHeader", e.item);
},
_onLeaveFolderHeader: function(e) {
var t = this;
t.trigger("leaveFolderItem", e.item);
}
});
return d;
}), define("/styles/_sort.js", {
name: "_sort",
data: '.tasks .dragAreaTop{border-top:2px solid #3c77d4;margin-top:-2px;margin-left:-10px;padding-left:10px;margin-right:-15px;padding-right:15px}.tasks .dragAreaBottom{border-bottom:2px solid #3c77d4;height:36px;margin-left:-10px;padding-left:10px;margin-right:-15px;padding-right:15px}.task-list.week .tasks.lists-in-filter-hover{opacity:.6;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";filter:alpha(opacity=60)}.subtasks .dragAreaTop{border-top:2px solid #3c77d4;margin-top:-2px;margin-left:0;padding-left:0;margin-right:0;}.subtasks .dragAreaTop .checkBox{top:12px !important}.subtasks .dragAreaBottom:not(.addtask){margin-left:0;padding-left:0;margin-right:0;position:relative;}.subtasks .dragAreaBottom:not(.addtask) .line-wrap::before{position:absolute;bottom:0;left:0;border-bottom:2px solid #3c77d4;content:\'\';width:100%}.subtasks .dragAreaBottom:not(.addtask) .checkBox{bottom:11px !important}.lists-collection .dragAreaFolder{background-color:#d8ecff;}.lists-collection .dragAreaFolder:before{content:\'\';-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;border:2px solid #186ab2;width:100%;height:inherit}.lists-collection .dragAreaTop,.lists-collection .dragAreaBottom{overflow:visible !important;position:relative}.lists-collection .dragAreaTop > a:after,.lists-collection .dragAreaBottom > a:after{content:"";position:absolute;left:30px;right:10px;height:0;border-bottom:2px solid #2e5fc9}.lists-collection .dragAreaTop > a:after{top:-1px}.lists-collection .dragAreaBottom > a:after{bottom:-1px}.lists-collection .dragAreaTop .folder-container:after,.lists-collection .dragAreaBottom .folder-container:after{content:"";position:absolute;left:30px;right:10px;height:0;border-bottom:2px solid #2e5fc9}.lists-collection .dragAreaTop .folder-container:after{top:-2px}.lists-collection .dragAreaBottom .folder-container:after{bottom:-2px}.lists-collection .dragAreaBottom:after,.lists-collection .dragAreaTop:after{content:"";position:absolute;left:30px;-webkit-border-radius:4px;border-radius:4px;width:4px;height:4px;border:2px solid #2e5fc9;background-color:#fff}.lists-collection .sidebarFolder .dragAreaBottom:after,.lists-collection .sidebarFolder .dragAreaTop:after{left:46px}.lists-collection .dragAreaBottom:after{bottom:-4px}.lists-collection .dragAreaBottom.sidebarFolder:after{bottom:-5px}.lists-collection .dragAreaTop:after{top:-4px}.lists-collection .dragAreaTop.sidebarFolder:after{top:-5px}.lists-collection.lists-in-filter-hover{opacity:.6;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";filter:alpha(opacity=60)}.list-drag-clone,.subtask-drag-clone{background-color:#fafafa;list-style:none;-webkit-user-select:none;width:270px;padding:0;z-index:-1 !important;}.list-drag-clone a,.subtask-drag-clone a{-webkit-border-radius:3px;border-radius:3px}.task-drag-clone{list-style:none;-webkit-user-select:none;position:absolute;z-index:-200;top:0;left:0;width:300px;padding:10px 10px 0 0;}.task-drag-clone .badge{position:absolute;z-index:9999;right:0;top:0;padding:10px 7px;text-align:center;font-weight:bold;color:#fff;-webkit-border-radius:15px;border-radius:15px;background-image:-webkit-linear-gradient(top, #e74545, #c12020);background-image:-moz-linear-gradient(top, #e74545, #c12020);background-image:-o-linear-gradient(top, #e74545, #c12020);background-image:-ms-linear-gradient(top, #e74545, #c12020);background-image:linear-gradient(to bottom, #e74545, #c12020);-webkit-box-shadow:inset 1px 0 3px rgba(255,255,255,0.2);box-shadow:inset 1px 0 3px rgba(255,255,255,0.2);text-shadow:0 -1px 0 rgba(0,0,0,0.7);border:1px solid #8c0404;line-height:0}.no-animate{-webkit-transition:none !important;-moz-transition:none !important;-o-transition:none !important;-ms-transition:none !important;transition:none !important}.new-list-dropzone{position:absolute;height:auto;bottom:0;top:0;left:0;right:0;list-style:none;padding:0}.list-hover{-webkit-box-shadow:inset 0 0 0 2px #2b88d9;box-shadow:inset 0 0 0 2px #2b88d9}'
}), define("views/Sidebar/ListsCollectionView", [ "application/runtime", "collections/ListCollection", "collections/TaskCollection", "views/Sidebar/DraggableListView", "views/Sidebar/ListItemView", "views/Sidebar/FolderItemView", "views/Sidebar/Controllers/ListCollectionDragController", "views/Sidebar/DropOnListMixin", "helpers/dnd/index", "helpers/dnd/SidebarDropList", "helpers/dnd/ItemDragger", "project!core/WBDeferred", "style!_sort" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p) {
var m = e._, g = "application/x-wunderlist-list", f = "application/x-wunderlist-folder", b = n.prototype, h = n.extend({
className: "lists-collection",
styles: [ p ],
"implements": [ r ],
initialize: function(t) {
var i = this;
i.sidebarActions = t.sidebarActions, i.ready = new u(), i.hasRendered = new u(), 
i._debouncedDelegateEvents = i.debounce(i.delegateEvents, 100), i._expandOnDragEnterTimer = null, 
i.triggerUserListRendered = m.once(function() {
e.trigger("timeline:start", "user_lists_rendered");
}), b.initialize.call(i, {
collection: i.sidebarActions.getRootCollection()
}), i.setupBinds(), i.enableDropOnList(function(e) {
return i._getMimetypeForListItem(e) === g;
}), i._enableDragToReorderList();
},
_getMimetypeForListItem: function(e) {
return e.classList.contains("sidebarFolder") ? f : e.classList.contains("list") ? g : "";
},
_getItemHandle: function(e) {
if (e) {
var t = this._getMimetypeForListItem(e), i = e.getAttribute("rel");
return this.sidebarActions.createIdHandle(i, t);
}
},
_enableDragToReorderList: function() {
var e = this;
e._setupDragHelper(e._getMimetypeForListItem.bind(e)), e.dropHelper = new d({
itemDragger: new c(e.el),
getMimetypeForItem: e._getMimetypeForListItem.bind(e)
}), e.bindTo(e.dropHelper, "createFolder", e._onCreateFolder), e.bindTo(e.dropHelper, "enterFolderHeader", e._startExpandFolderWhenDragging), 
e.bindTo(e.dropHelper, "leaveFolderItem", e._cancelExpandFolderWhenDragging), e.bindTo(e.dropHelper, "droppedBetween", e._onDropInbetween), 
e.dropHelper.enable();
},
setupBinds: function() {
var t = this;
t.tasks = new i("/tasks/all"), t.bindTo(t.tasks, "add remove reset", function() {
e.trigger("savedSeach:updateCount");
});
var n = new u();
t.bindTo(e, "lists:ready", function() {
n.resolve();
}), t.when(n).done(function() {
t.lists = t.collection, t.bindTo(e, "window:resize", t._debouncedDelegateEvents), 
t.ready.resolve();
}, t), t.bindTo(e, "query:apply", t.applyQuery);
},
render: function() {
var t = this;
return t.ready.done(function() {
b.render.apply(t, arguments), e.trigger("lists:rendered"), t.hasRendered.resolve();
}), t;
},
applyQuery: function(t, i) {
var n = this, a = n.lists.get(t), o = n.tasks.get(i), r = a.getCleanTitle(), s = r.split(" "), l = o.attributes.title;
m.each(s, function(e) {
var t = 0 === e.indexOf("#"), i = l.indexOf(e) >= 0;
t && !i && (l += " " + e);
}), o.save({
title: l
}, {
success: function() {
e.trigger("savedSeach:updateCount");
}
});
},
getViewInstanceForModel: function(e) {
var t, i = this, n = e.attributes.type;
return i.triggerUserListRendered(), t = "list" === n ? new a({
model: e
}) : new o({
model: e,
folderActions: i.sidebarActions.getFolderActions(e.id)
}), i.addSubview(t, n + e.id), i.dragHelper.prepareItem(t.el), t;
},
_onDropInbetween: function(e, t, i, n) {
var a = this, o = a._getItemHandle(t), r = a._getItemHandle(i);
n === g ? a.sidebarActions.moveListInRoot(e, o, r) : n === f && a.sidebarActions.repositionFolder(e, o, r);
},
onDestroy: function() {
var e = this;
e.dragHelper.destroy(), e.dropHelper.destroy(), e.dropOnListHelper.destroy(), b.onDestroy.call(e);
},
editFolder: function(e, t) {
var i = this, n = i.getSubview("folder" + e);
n && n.enterEditMode(t);
},
_onCreateFolder: function(t, i, n) {
var a = this;
if (i === g) {
var o = n.getAttribute("rel"), r = e.language.getText("folder_title_placeholder"), s = a.sidebarActions.createFolder(r, t, o);
e.trigger("route:folders/" + s + "/edit");
}
},
_startExpandFolderWhenDragging: function(e) {
var t = this;
t._expandOnDragEnterTimer || (t._expandOnDragEnterTimer = setTimeout(function() {
var i = e.getAttribute("rel"), n = t.getSubview("folder" + i);
n && n.expand(), t._expandOnDragEnterTimer = null;
}, 500));
},
_cancelExpandFolderWhenDragging: function() {
var e = this;
e._expandOnDragEnterTimer && (clearTimeout(e._expandOnDragEnterTimer), e._expandOnDragEnterTimer = null);
}
});
return s.applyToClass(h), h;
}), define("models/FilterModel", [ "wunderbits/WBModel" ], function(e) {
return e.extend({
defaults: {
type: "Filter",
isFilter: !0
}
});
}), define("views/Sidebar/SmartListItemView", [ "application/runtime", "collections/TaskCollection", "views/Sidebar/ItemView" ], function(e, t, i, n) {
var a = i.prototype;
return i.extend({
renderData: {
iconLabel: n,
titleText: n,
completedSmartList: n,
todaySmartList: n
},
initialize: function() {
var e = this;
e.checkVisibility = e.debounce(e.checkVisibility, 250, {
leading: !0,
trailing: !0
}), a.initialize.apply(e, arguments), e.bindVisibilityEvents(), e.bindScopedCollectionEvents();
},
bindVisibilityEvents: function() {
var t = this, i = t.model.attributes.name;
i = "completed" === i ? "done" : i, i = "assigned" === i ? "assigned_to_me" : i, 
t.visibilitySettingKey = "smartlist_visibility_" + i;
var n = "change:" + t.visibilitySettingKey;
t.bindTo(t.collection, "add remove", "checkVisibility"), t.bindTo(e.settings, n, "checkVisibility"), 
t.bindTo(e, "routed", "checkVisibility");
},
isTodayOrWeek: function() {
var e = this, t = e.model.attributes.name;
return "today" === t || "week" === t;
},
bindScopedCollectionEvents: function() {
var t = this;
t.isTodayOrWeek() && t.bindTo(e.settings, "change:today_smart_list_visible_tasks", function() {
t.collection = t.getCollection(), t.overdueCollection = t.getOverdueCollection(), 
t.bindCountCollections(), t.updateCount(), t.updateOverdueCount(), t.render();
});
},
getCollection: function() {
var i = this, n = "/tasks/filter/" + i.model.attributes.name;
return i.isTodayOrWeek() && e.settings.isScopedFiltersEnabled() && (n += "/user"), 
new t(n);
},
getOverdueCollection: function() {
return this.getCollection().overdueTasks;
},
getPublicUrl: function() {
return "#/lists/" + this.model.attributes.name;
},
getIconClass: function() {
return this.model.attributes.name;
},
formatData: function(e) {
var t = this;
if (e = a.formatData.call(t, e), e.id = t.model.attributes.name, e.title = t.model.attributes.title, 
e.titleText = t.model.attributes.titleText, e.completedSmartList = e.id && "completed" === e.id, 
e.todaySmartList = e.id && "today" === e.id, e.todaySmartList) {
var i = new Date();
e.iconLabel = i.getDate();
}
return e;
},
render: function() {
var e = this, t = e.formatData(e.renderData);
return a.render.call(e, t), e.$el.attr("rel", t.name).attr("data-type", "filter"), 
e.checkVisibility(), e;
},
renderAriaLabel: function() {
var t = this, i = t.model.attributes.titleText, n = e.language.getText("aria_list_$_with_$_items", i, t.collection.length), a = t.stateModel.attributes.overdueCount;
t.isOverdueCountFeatureEnabled() && a && (n += ", " + e.language.getText("voiceover_sidebar_list_$_items_overdue", a)), 
t.$el.attr("aria-label", n);
},
hide: function() {
var t = this, i = e.currentRoute(), n = -1 !== i.indexOf("lists/"), a = -1 !== i.indexOf("lists/" + t.model.attributes.name), o = -1 !== i.indexOf("preferences");
n && a ? (t.$el.addClass("forced-visible animate-down visible").removeClass("animate-up"), 
t.makeAriaVisible()) : (!a || o) && (t.$el.removeClass("forced-visible animate-down visible").addClass("animate-up"), 
t.hideFromAria(), e.trigger("smartlist:hidden", t.model.attributes.name));
},
show: function() {
var t = this;
t.$el.removeClass("animate-up").addClass("animate-down visible").attr("aria-hidden", !1), 
t.makeAriaVisible(), e.trigger("smartlist:visible", t.model.attributes.name);
},
hideFromAria: function() {
this.$el.attr("aria-hidden", "true").attr("tabindex", "-1");
},
makeAriaVisible: function() {
this.$el.attr("aria-hidden", "false").attr("tabindex", "0");
},
checkVisibility: function() {
var t = this, i = t.collection.count || t.collection.models.length, n = e.settings.get(t.visibilitySettingKey);
"completed" === t.model.attributes.name && (i = t.collection.length);
var a = "hidden" === n, o = "visible" === n;
t.$el.toggleClass("user-disabled", a), t.$el.toggleClass("user-enabled", o), a || 0 === i && "auto" === n ? t.hide() : ("visible" === n || i > 0 && "auto" === n) && t.show();
}
});
}), define("helpers/PromiseTree", [ "vendor/when", "project!core/WBClass" ], function(e, t) {
var i = t.extend({
initialize: function() {
var t = this;
t.isDone = !1, t.doneDeferred = e.defer(), t.rootDeferred = e.defer(), t.branches = {
main: t.rootDeferred.promise
};
},
append: function(e, t) {
var i, n = this;
t = n._getBranchName(t), i = n._getBranch(t), n.branches[t] = i.then(e);
},
branch: function(e, t) {
var i, n = this;
e = n._getBranchName(e), t = n._getBranchName(t), i = n._getBranch(t), n.branches[e] || (n.branches[e] = i);
},
run: function() {
var t = this, i = Object.keys(t.branches).map(function(e) {
return t.branches[e];
});
e.all(i).done(function() {
t.doneDeferred.resolve();
}, function(e) {
t.doneDeferred.reject(e);
}), t.rootDeferred.resolve();
},
done: function() {
var e = this;
return e.doneDeferred.promise;
},
_getBranch: function(e) {
var t = this, i = t.branches[e];
if (!i) throw new Error("invalid branch name: " + e);
return i;
},
_getBranchName: function(e) {
return e || "main";
}
});
return i;
}), define("helpers/animation", [ "./PromiseTree" ], function(e) {
function t() {
return document.body.classList.contains("animate");
}
function i(i) {
return i || (i = !0), t() ? {
animate: i,
animations: new e()
} : void 0;
}
return {
animationEnabled: t,
animateOptions: i
};
}), define("views/Sidebar/Controllers/SmartListsCollectionDragController", [ "application/runtime", "wunderbits/WBViewController", "actions/Factory", "helpers/animation", "project!core/lib/extend" ], function(e, t, i, n, a) {
var o = t.prototype, r = t.extend({
"implements": {
tasksDropped: "_handleTasksDroppedOnSmartList"
},
initialize: function() {
var e = this;
e.taskDue = i.taskDue(), e.completeTask = i.completeTask(), e.starTask = i.starTask(), 
e.assignTask = i.assignTask(), e.reparentTask = i.reparentTask(), o.initialize.apply(e, arguments);
},
_handleTasksDroppedOnSmartList: function(t, i) {
var o = this, r = "completed" === t ? "completion" : void 0, s = n.animateOptions(r);
switch (t) {
case "inbox":
o._handleMoveTasksToList(t, i);
break;

case "starred":
var l = "true" === e.settings.attributes.behavior_star_tasks_to_top, d = {
moveToTop: l
};
s = l && s, s && (d = a(d, s)), o.starTask.starTasks(i, d);
break;

case "completed":
o.completeTask.completeTasks(i, s);
break;

case "assigned":
o.assignTask.assignTasksToMe(i, s);
break;

case "today":
o.taskDue.setTasksDueToday(i, s);
}
s && s.animations.run();
},
_handleMoveTasksToList: function(e, t) {
var i = this;
i.reparentTask.moveTasksToList(e, t);
}
});
return r;
}), define("views/Sidebar/SmartListsCollectionView", [ "application/runtime", "models/FilterModel", "collections/TaskCollection", "views/Sidebar/SmartListItemView", "views/Sidebar/Controllers/SmartListsCollectionDragController", "views/Sidebar/DropOnListMixin", "wunderbits/WBViewPresenter", "project!core/WBDeferred" ], function(e, t, i, n, a, o, r, s) {
var l = e._, d = r.prototype, c = e.smartLists, u = r.extend({
tagName: "ul",
className: "filters-collection",
"implements": [ a ],
initialize: function() {
var t = this;
d.initialize.apply(t, arguments), t.ready = new s(), t.hasRendered = new s(), t.bindTo(e, "lists:ready", t.ready.resolve, t.ready), 
t.bindTo(e, "sidebar:forcedVisibleList", t.setForcedVisible), t.enableDropOnList(function(e) {
var t = e.getAttribute("rel"), i = [ "inbox", "starred", "completed", "assigned", "today" ].indexOf(t);
return -1 !== i;
});
},
render: function() {
var e = this;
return e.ready.done(function() {
d.render.apply(e, arguments), e.hasCalledRenderOnce = !0, e.destroySubviews();
var t = e.renderFiltersToFragment();
e.$el.empty().append(t), e.hasRendered.resolve();
}), e;
},
_renderFilter: function(i) {
var a = this, o = "assigned" === i ? "assigned_to_me" : i, r = new t({
title: e.language.getLabel("smart_list_" + o),
titleText: e.language.getText("smart_list_" + o),
name: i
}), s = a.addSubview(new n({
model: r
}), i);
return s.render().el;
},
renderFiltersToFragment: function() {
var e = this, t = document.createDocumentFragment();
return e._filterBindings && l.each(e._filterBindings, e.unbind), e._filterBindings = [], 
l.each(c, function(i) {
t.appendChild(e._renderFilter(i));
}), t;
},
setForcedVisible: function(e) {
var t = this, i = t.$('[rel="' + e + '"]');
t.$revertItem = i;
},
ensureVisibility: function(e) {
var t = this;
if (t.$revertItem && (t.$revertItem.addClass("animate-up").removeClass("forced-visible").removeClass("visible").removeClass("animate-down"), 
delete t.$revertItem), c.indexOf(e) >= 0) {
var i = t.$('[rel="' + e + '"]'), n = i.hasClass("user-disabled");
n && (i.addClass("forced-visible").addClass("animate-down").removeClass("animate-up").css("opacity", 0).animate({
opacity: 1
}), t.$revertItem = i);
}
},
onDestroy: function() {
var e = this;
e.dropOnListHelper.destroy(), d.onDestroy.call(e);
}
});
return o.applyToClass(u), u;
}), define("views/Sidebar/Controllers/SidebarController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/helpers/strings", "wunderbits/WBViewController" ], function(e, t, i, n) {
var a = e.$;
return n.extend({
"implements": {
"delete:selected": "deleteSelected",
"click:list": "openList",
"doubleClick:list": "editList",
"click:edit": "editList",
"route:list": "routeToList"
},
openList: function(t) {
var i = this, n = i.view, o = a(t.target);
if (i.view.listsView.blockListChangeFromDragEnd && e.env.isTouchDevice() && "MSPointerDown" !== t.type || o.closest("li").hasClass("dropped-list") && e.env.isFirefox()) return o.closest("li").removeClass("dropped-list"), 
void t.preventDefault();
t && "MSPointerDown" !== t.type && t && t.preventDefault();
var r = a(t.target).closest("li").attr("rel"), s = n.lists.get(r);
r = s ? s.id : r;
var l = function() {
i.view.setSelectionByID(r), e.trigger("focus:set", "sidebar").trigger("browser:unselect"), 
e.trigger("search:cancel"), i.defer(function() {
i.routeToList(r);
}), i.isOpeningList = !0, window.setTimeout(function() {
i.isOpeningList = !1;
}, 1);
};
i.view.setSelectionByID(r), i.defer(l);
},
editList: function(t) {
var i = this;
if (t) {
var n = a(t.target).closest(".list").attr("rel");
if (t && t.editTarget && t.editTarget.id && (n = t.editTarget.id), n) {
var o = i.view.lists.get(n);
o && "inbox" !== n && i.defer(function() {
e.trigger("route:" + o.route("/edit"));
});
}
}
},
deleteSelected: function() {
var e = this, t = e.view, i = t.$(".active").attr("rel"), n = t.lists.get(i);
n && !n.isInbox() && t.deleteAndSelectNext(n);
},
routeToList: function(t) {
var i = this, n = i.view.lists.get(t);
if (n && n.isSavedSearch()) i.defer(function() {
e.trigger("route:search/" + encodeURIComponent(n.getCleanTitle()));
}); else if (n) {
var a = n.route(), o = n.route("/edit");
e.currentRoute() !== o && e.trigger("route:" + a);
} else e.smartLists.indexOf(t) >= 0 && e.trigger("route:lists/" + t);
}
});
}), define("views/Sidebar/Controllers/SidebarKeysController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/WBViewController" ], function(e, t, i) {
var n = e.$;
return i.extend({
"implements": {
keydown: "handleKeys"
},
handleKeys: function(e) {
var i = this;
e.which === t.tab ? i.handleTab(e) : e.which === t.enter && i.handleEnter(e);
},
handleTab: function(t) {
var i, a = this;
n(t.target).parents(".lists-scroll").length && (t.shiftKey ? (i = !0, e.trigger("tab:to:searchButton")) : (a.view.navigateLists("right"), 
i = !0)), i && a.stopItCold(t);
},
handleEnter: function(e) {
var t, i = this, a = n(e.target);
if (a.hasClass("addlist") && (a.click(), t = !0), !t) {
var o = a.find(".list-options");
o.length && (o.click(), t = !0);
}
t && i.stopItCold(e);
}
});
}), define("wunderbits/ContextMenuController", [ "application/runtime", "wunderbits/WBViewController", "actions/Factory" ], function(e, t, i, n) {
function a() {
return new r({
type: "separator"
});
}
var o, r, s, l;
if ("undefined" != typeof process) {
var d = e.global.nwDispatcher.requireNwGui();
s = d.Clipboard.get(), o = d.Menu, r = d.MenuItem, l = d.Tray;
}
var c = t.prototype;
return t.extend({
clipboard: s,
NativeTray: l,
"implements": {},
initializeActions: function() {
this.actions = {
complete: i.completeTask(),
star: i.starTask(),
createList: i.createList(),
listLookup: i.listLookup(),
folderLookup: i.folderLookup(),
deleteList: i.deleteList(),
deleteTask: i.deleteTask(),
moveTask: i.moveTask(),
assignTask: i.assignTask(),
membershipLookup: i.membershipLookup(),
print: i.print(),
due: i.taskDue(),
sidebar: i.sidebar()
};
},
initialize: function() {
var t = this;
return o && r ? (e.ready.done(function() {
t.initializeActions();
}), t["implements"]["contextmenu:" + t.type] = "onContextMenu", c.initialize.apply(t, arguments), 
t.createContextMenu(), t.updateLabels(), void t.bindTo(e, "language:change", "updateLabels")) : !1;
},
createContextMenu: function() {
var e = this, t = e.items;
e.menu = e.createMenu(e.uid), Object.keys(t).forEach(function(i) {
var a = e.createMenuItem(i);
t[i] !== n ? a.submenu = e.createMenu() : a.click = function() {
e.view.trigger("contextmenu:" + i);
}, t[i] = a;
});
},
updateLabels: function() {
var t = this, i = e.language, n = t.items;
Object.keys(n).forEach(function(e) {
var t = e.split("/"), a = i.getText.apply(i, t);
n[e].label = a.replace(/&quot;/g, '"');
});
},
createMenu: function(e, t) {
var i = {
type: t || "contextmenu"
};
return e && (i.id = e), new o(i);
},
createMenuItem: function(e, t) {
var i = new r({
label: t
});
return i.key = e, i;
},
updateContextMenu: function() {
var e = this, t = e.menu, i = e.items;
e.clearContextMenu(), e.getContextMenuKeys().forEach(function(e) {
"---" === e ? t.append(a()) : i[e] ? t.append(i[e]) : console.warn("invalid menuitem", e);
});
},
clearContextMenu: function(e) {
var t = this;
for (e = e || t.menu; e.items.length; ) e.remove(e.items[0]);
},
onContextMenu: function(e) {
var t = this;
t.target = e.currentTarget, t.updateContextMenu();
var i = e.originalEvent;
t.menu.popup(i.x, i.y), e.stopPropagation(), e.preventDefault();
},
getContextMenuKeys: function() {
return [ "not_implemented" ];
}
});
}), define("views/Sidebar/Controllers/ListContextMenuController", [ "application/runtime", "collections/FolderCollection", "wunderbits/ContextMenuController" ], function(e, t, i, n) {
var a = i.prototype;
return i.extend({
type: "lists",
"implements": {
"contextmenu:button_email_list": "emailList",
"contextmenu:button_invite_people": "editListMembers",
"contextmenu:button_print_list": "printList",
"contextmenu:button_remove_from_folder_singular": "removeListFromFolder",
"contextmenu:button_rename_list": "renameList",
"contextmenu:label_delete_list": "leaveOrDeleteList",
"contextmenu:label_leave_list": "leaveOrDeleteList",
"contextmenu:folder_menu_create": "createFolder",
"contextmenu:move_list_to_folder": "moveToFolder"
},
items: {
button_email_list: n,
button_invite_people: n,
button_print_list: n,
button_remove_from_folder_singular: n,
button_rename_list: n,
folder_menu_create: n,
label_delete_list: n,
label_leave_list: n,
options_do_not_disturb: n,
label_move_to: {}
},
initialize: function() {
var t = this;
if (a.initialize.apply(this, arguments) !== !1) {
var i = 1e3;
t.buildFolderMenuItems = t.debounce(t.buildFolderMenuItems, i), t.bindOnceTo(e, "folders:ready", "setupFolderBindings");
}
},
setupFolderBindings: function() {
var e = this;
e.folders = new t("/folders/all"), e.folderItems = {}, e.foldersSubmenu = e.createMenu(), 
e.items.label_move_to.submenu = e.foldersSubmenu, e.buildFolderMenuItems(), e.bindTo(e.folders, "add change", "buildFolderMenuItems"), 
e.bindTo(e.folders, "remove", "removeFolderMenuItem");
},
buildFolderMenuItems: function() {
var e = this, t = e.folders, i = e.folderItems;
t.each(function(t) {
var n = t.id, a = t.attributes.title;
if (!i[n]) {
var o = e.createMenuItem(n, a);
o.click = function() {
e.view.trigger("contextmenu:move_list_to_folder", n);
}, e.foldersSubmenu.append(o), i[n] = o;
}
i[n].label = a;
});
},
removeFolderMenuItem: function(e) {
var t = this, i = t.folderItems, n = i && i[e.id], a = n && t.foldersSubmenu.items.indexOf(n) > -1;
n && (a && t.foldersSubmenu.remove(n), delete i[e.id]);
},
getContextMenuKeys: function() {
var e = this, t = e.target, i = t.getAttribute("rel"), n = e.folders;
if ("filter" === t.dataset.type || "inbox" === i) return [ "button_email_list", "button_print_list" ];
var a = e.actions.listLookup.getListModel(i), o = a && a.isShared(), r = a && a.isOwner(), s = !(!a || !e.actions.listLookup.getFolderModel(a.id)), l = [];
return a && (l.push("folder_menu_create"), s && l.push("button_remove_from_folder_singular"), 
n && n.length && l.push("label_move_to"), l.push("---"), l.push("button_rename_list"), 
l.push("button_invite_people"), l.push("---"), l.push("button_email_list"), l.push("button_print_list"), 
l.push("---"), l.push(!o || r ? "label_delete_list" : "label_leave_list")), l;
},
renameList: function() {
var t = this, i = t.target.getAttribute("rel");
e.trigger("route:lists/" + i + "/edit");
},
editListMembers: function() {
var t = this, i = t.target.getAttribute("rel");
e.trigger("route:lists/" + i + "/edit/members");
},
emailList: function() {
var t = this, i = t.target.getAttribute("rel");
e.trigger("email:list", i);
},
printList: function() {
var t = this, i = e.listId;
e.listId = t.target.getAttribute("rel"), t.actions.print.printList(), setTimeout(function() {
e.listId = i;
}, 400);
},
leaveOrDeleteList: function() {
var t = this, i = t.target.getAttribute("rel"), n = t.actions.listLookup.getListModel(i);
n && e.trigger("sidebar:deleteAndSelectNext", n);
},
createFolder: function() {
var t = this, i = t.target.getAttribute("rel"), n = e.language.getText("folder_title_placeholder"), a = t.actions.sidebar.createFolder(n, i);
e.trigger("route:folders/" + a + "/edit");
},
removeListFromFolder: function() {
var e = this, t = e.target.getAttribute("rel");
e.actions.sidebar.removeListFromFolder(t);
},
moveToFolder: function(e) {
var t = this, i = t.target.getAttribute("rel"), n = t.actions.sidebar.getFolderActions(e);
n.appendList(i);
}
});
}), define("views/Sidebar/Controllers/FolderContextMenuController", [ "application/runtime", "wunderbits/ContextMenuController" ], function(e, t, i) {
return t.extend({
type: "folders",
"implements": {
"contextmenu:button_ungroup": "ungroup",
"contextmenu:button_rename_folder": "edit"
},
items: {
button_ungroup: i,
button_rename_folder: i
},
getContextMenuKeys: function() {
return [ "button_rename_folder", "button_ungroup" ];
},
ungroup: function() {
var e = this, t = e.target.parentNode.getAttribute("rel"), i = e.actions.folderLookup.getFolderModel(t);
i && i.destroy();
},
edit: function() {
var t = this, i = t.target.parentNode.getAttribute("rel");
i && e.trigger("route:folders/" + i + "/edit");
}
});
}), define("views/Toolbar/Controllers/SearchFieldViewController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/WBViewController" ], function(e, t, i) {
var n = i.prototype;
return i.extend({
"implements": {
"keyup:search": "debouncedOnChangeSearchTerm",
"keydown:search": "debouncedOnChangeSearchTermDown",
"focus:input": "inputFocus"
},
initialize: function() {
var e = this;
e.debouncedOnChangeSearchTerm = e.debounce(e.searchKeyUp, 250), e.debouncedOnChangeSearchTermDown = e.debounce(e.searchKeyDown, 250, !0), 
n.initialize.apply(e, arguments);
},
searchClicked: function(t) {
t.preventDefault(), t.stopPropagation(), e.trigger("route:search"), e.trigger("analytics:Search:clickStart");
},
searchKeyUp: function(i) {
var n = this, a = n.view, o = a.$("input"), r = o.val();
return i.which === t.esc && "browser" === e.focus ? (e.trigger("search:return"), 
void i.stopPropagation()) : void (r !== a.lastSearchTerm && (r ? (e.trigger("route:search/" + encodeURIComponent(r)), 
e.trigger("searchterm:" + r), e.trigger("analytics:Search:queryLength", r.length)) : e.trigger("browser:show404", "search"), 
"" === r && (a.currentSuggestion = null)));
},
inputFocus: function() {
"browser" === e.focus && e.trigger("focus:set", "sidebar");
},
searchKeyDown: function(i) {
i.which === t.esc && (e.trigger("search:return"), i.stopPropagation()), i.which === t.tab && (e.state.attributes.inSearchState ? (e.trigger("tasks:selectFirst"), 
e.trigger("focus:set", "browser")) : e.trigger("search:return"), i.stopPropagation()), 
i.which === t.backspace;
}
});
}), define("/templates/searchField.js", {
name: "searchField",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return r((a = t.symbol || e && e.symbol || o, a.call(e, "search", {
name: "symbol",
hash: {},
data: n
}))) + ' <input type="text" data-key-placeholder="placeholder_search" data-key-aria-label="placeholder_search"/> ';
},
useData: !0
}
}), define("views/Toolbar/SearchFieldView", [ "application/runtime", "wunderbits/WBViewPresenter", "views/Toolbar/Controllers/SearchFieldViewController", "template!searchField" ], function(e, t, i, n) {
return t.extend({
id: "search-toolbar",
template: n,
"implements": [ i ],
observes: {
runtime: {
"search:start": "onSearchStart",
"search:end": "onSearchCancel",
"search:return": "goToReturnURL",
"search:focus": "focusSearchField"
}
},
emits: {
"keydown input": "keydown:search",
"keyup input": "keyup:search",
"focus input": "focus:input"
},
showSearch: function() {
var e = this;
e.el.classList.add("active"), e.trigger("search:show");
},
hideSearch: function() {
var e = this;
e.el.classList.remove("active"), e.$("input").val(""), e.trigger("search:hide");
},
focusSearchField: function() {
this.$("input").focus();
},
goToReturnURL: function() {
var t = this;
t.searchStarted && (t.onSearchCancel(), e.trigger("route:" + (t.returnURL || "lists/inbox")), 
e.trigger("browser:hide404")), t.hideSearch(), t.searchStarted = !1;
},
onSearchStart: function(t, i) {
var n = this, a = n.$("input"), o = a.val();
n.showSearch(), n.returnURL = i, n.searchStarted = !0, t && o !== t ? (a.val(t), 
n.$("input").focus()) : t || n.$("input").focus(), n.showSearch(), t && (e.trigger("sidebar:deselect"), 
e.trigger("search:keywords", t));
},
onSearchCancel: function(t) {
this.hideSearch(), !t && e.trigger("sidebar:reselect");
}
});
}), define("views/Popovers/Controllers/UserPopoverViewController", [ "application/runtime", "wunderbits/data/keycodes", "controllers/Tracking/TrackableEventsController" ], function(e, t, i) {
var n = e.$;
return i.extend({
"implements": {
"click:checkForUpdates": "checkForUpdates",
"click:link": "clickLink",
logout: "clickLogout",
sync: "syncNow",
keydown: "handleKeys"
},
handleKeys: function(e) {
var i = this.view, a = e.target === i.el;
a || e.which !== t.enter ? e.which === t.tab && (i.navigate(e.shiftKey ? "up" : "down"), 
e.preventDefault(), e.stopPropagation()) : (n(e.target).find("a").click(), e.stopPropagation());
},
clickLink: function(t) {
var i = this, a = i.view, o = n(t.target);
if ("A" !== t.target.tagName && (o = o.closest("a")), !o.hasClass("update-status")) {
i.defer(a.close, a);
var r = o.attr("data-analytics-action");
r && (e.trigger("analytics:UserMenu:" + r), "clickBecomePro" === r && e.trigger("analytics:ProAccounts:startProFunnel", "userMenu"));
var s = o.attr("data-track-path");
s && i.trackTap(s);
}
},
clickLogout: function() {
this.view.renderLoggingOut(), e.trigger("popover:close"), e.trigger("user:logout"), 
e.trigger("analytics:UserMenu:clickLogout");
},
checkForUpdates: function(t) {
t.stopPropagation(), t.preventDefault(), e.state.set("updateState", "updating"), 
e.trigger("app:checkPackageForUpdate"), this.view.$(".check-for-updates").addClass("checking");
},
syncNow: function() {
e.trigger("popover:close"), e.trigger("sync:start"), e.trigger("analytics:UserMenu:clickSync");
}
});
}), define("/templates/userPopover.js", {
name: "userPopover",
data: {
"1": function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression;
return ' <li class="check-for-updates" role="menuitem" tabindex="0"> <a data-analytics-action="checkForUpdate" class="update-status"> ' + r((a = t.updateText || e && e.updateText, 
typeof a === o ? a.call(e, {
name: "updateText",
hash: {},
data: n
}) : a)) + ' </a> <div class="state loading spinner"><span class="dark"></span></div> </li> ';
},
"3": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return ' <li role="menuitem" tabindex="0"> <a data-path="preferences/account/pro" data-analytics-action="clickBecomePro"> ' + r((a = t.localized || e && e.localized || o, 
a.call(e, "settings_label_become_a_pro", {
name: "localized",
hash: {},
data: n
}))) + " </a> </li> ";
},
"5": function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression, s = t.helperMissing;
return ' <li class="manage-team" role="menuitem" tabindex="0"> <a href="' + r((a = t.domain || e && e.domain, 
typeof a === o ? a.call(e, {
name: "domain",
hash: {},
data: n
}) : a)) + '/business/admin" target="_blank" data-analytics-action="clickManageTeam"> ' + r((a = t.localized || e && e.localized || s, 
a.call(e, "group_billing_manage_team_header", {
name: "localized",
hash: {},
data: n
}))) + " </a> </li> ";
},
"7": function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression, s = t.helperMissing;
return ' <li role="menuitem" tabindex="0"> <a href="' + r((a = t.extensionLink || e && e.extensionLink, 
typeof a === o ? a.call(e, {
name: "extensionLink",
hash: {},
data: n
}) : a)) + '" data-analytics-action="clickExtensionInstall" target="_blank"> ' + r((a = t.localized || e && e.localized || s, 
a.call(e, "label_install_browser_extension", {
name: "localized",
hash: {},
data: n
}))) + " </a> </li> ";
},
"9": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return ' <li role="menuitem" tabindex="0"> <a data-path="rate" data-analytics-action="clickRateApp"> ' + r((a = t.localized || e && e.localized || o, 
a.call(e, "rate_label", {
name: "localized",
hash: {},
data: n
}))) + " </a> </li> ";
},
"11": function() {
return ' <li class="separator" role="menuitem" tabindex="0"> <a data-path="labs" data-analytics-action="clickLabs">Labs</a> </li> ';
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = "function", d = '<div class="content"> <ul class="list-menu"> <li class="last-sync disabled" aria-visible="false"> <span class="icon offline"></span> <span class="label">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "userbar_last_synced_$", {
name: "localized",
hash: {},
data: n
}))) + '</span> </li> <li class="separator" role="menuitem" tabindex="0"> <a class="sync-now"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_sync_full", {
name: "localized",
hash: {},
data: n
}))) + " </a> </li> ";
return a = t["if"].call(e, e && e.isNodeWebkit, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d += " ", a = t.unless.call(e, e && e.isPro, {
name: "unless",
hash: {},
fn: this.program(3, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d += ' <li role="menuitem" tabindex="0"> <a data-path="preferences/account" data-analytics-action="clickAccountSettings"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "userbar_account_settings", {
name: "localized",
hash: {},
data: n
}))) + " </a> </li> ", a = t["if"].call(e, e && e.isTeamAdmin, {
name: "if",
hash: {},
fn: this.program(5, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d += ' <li role="menuitem" tabindex="0"> <a data-path="backgrounds" data-analytics-action="clickChangeBackground"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "userbar_change_background", {
name: "localized",
hash: {},
data: n
}))) + ' </a> </li> <li class="separator" role="menuitem" tabindex="0"> <a href="' + s((o = t.domain || e && e.domain, 
typeof o === l ? o.call(e, {
name: "domain",
hash: {},
data: n
}) : o)) + '/restore" data-analytics-action="clickGotoRestore" target="_blank"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "label_trash_link", {
name: "localized",
hash: {},
data: n
}))) + " </a> </li> ", a = t["if"].call(e, e && e.extensionLink, {
name: "if",
hash: {},
fn: this.program(7, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d += " ", a = t["if"].call(e, e && e.showRateItem, {
name: "if",
hash: {},
fn: this.program(9, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d += ' <li role="menuitem" tabindex="0"> <a data-path="tell-your-friends" data-analytics-action="clickTellFriends"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "label_tell_friends", {
name: "localized",
hash: {},
data: n
}))) + ' </a> </li> <li class="separator" role="menuitem" tabindex="0"> <a data-path="invite-your-friends"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "iyf4_usermenu_label", {
name: "localized",
hash: {},
data: n
}))) + ' </a> </li>  <li class="separator" role="menuitem" tabindex="0"> <a href="/home" data-analytics-action="clickWebsite" target="_blank"> ' + s((o = t.localized || e && e.localized || r, 
o.call(e, "settings_website_wunderlist", {
name: "localized",
hash: {},
data: n
}))) + " </a> </li> ", a = t["if"].call(e, e && e.isLabsEnabled, {
name: "if",
hash: {},
fn: this.program(11, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d + ' <li class="email disabled" aria-visible="false">' + s((o = t.email || e && e.email, 
typeof o === l ? o.call(e, {
name: "email",
hash: {},
data: n
}) : o)) + '</li> <li role="menuitem" tabindex="0"><a class="logout">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_log_out", {
name: "localized",
hash: {},
data: n
}))) + "</a></li> </ul> </div> ";
},
useData: !0
}
}), define("/styles/popover/userPopover.js", {
name: "popover/userPopover",
data: "#user-popover .arrow{display:none}#user-popover > .inner{width:200px;border:1px solid #f9f9f9;-webkit-border-radius:4px;border-radius:4px;}#user-popover > .inner p{text-align:center;margin:9px 0 2px 0;font-size:13px}#user-popover > .inner .backgrounds{width:228px;right:-227px;top:24px;}#user-popover > .inner .backgrounds token{color:#7aae45;font-weight:bold}#user-popover .check-for-updates{position:relative;}#user-popover .check-for-updates.checking .spinner{display:block;right:21px;position:absolute;top:13px}#user-popover .check-for-updates .spinner{display:none}html[dir=rtl] #user-popover{right:5px !important}"
}), define("views/Popovers/UserPopoverView", [ "application/runtime", "vendor/moment", "wunderbits/data/keycodes", "views/Popovers/Controllers/UserPopoverViewController", "views/Popovers/PopoverView", "project!core/WBStateModel", "template!userPopover", "style!popover/userPopover" ], function(e, t, i, n, a, o, r, s, l) {
function d() {
return c = c || e.language, c.getLabel.apply(c, arguments).toString();
}
var c, u = e.$, p = e.config, m = a.prototype;
return a.extend({
template: r,
styles: [ s ],
className: "inner",
attributes: {
role: "menu",
tabindex: "0"
},
config: {
bindToTarget: !1,
margin: 4,
offset: 100,
id: "user-popover"
},
"implements": [ n ],
emits: {
"click a": "click:link",
"click .logout": "logout",
"click .sync-now": "sync",
keydown: "keydown",
"keydown li": "keydown",
"click .check-for-updates": "click:checkForUpdates"
},
updateStrings: {
"default": l,
updating: l,
updated: l
},
setUpdateStrings: function() {
return {
"default": e.language.getText("check_for_updates"),
updating: e.language.getText("checking_for_updates"),
updated: e.language.getText("app_up_to_date")
};
},
renderData: {
email: l,
isPro: l,
isChrome: l,
isIE: l,
extensionLink: l,
isPackagedApp: l,
isNodeWebkit: l,
isLabsEnabled: l,
syncStatus: l,
pendingCount: l,
isTeamAdmin: l,
domain: l,
updateText: l
},
formatData: function() {
var t = this, i = "";
return e.env.isChromeApp() && (i = "https://" + (p.domain_name || "www.wunderlist.com")), 
t.state.set({
email: e.user.attributes.email,
isPro: e.user.isPro(),
isChrome: e.env.isChrome(),
isIE: e.env.isIE(),
extensionLink: e.env.relevantExtensionLink(),
isPackagedApp: e.env.isPackagedApp(),
isNodeWebkit: e.env.isNodeWebkit(),
isLabsEnabled: e.isLabsEnabled(),
isTeamAdmin: e.user.isProTeamAdmin(),
domain: i,
showRateItem: e.env.isChrome() && e.user.showSocialButtons(),
updateText: t.updateStrings[e.state.attributes.updateState || "default"]
}), t.state.attributes;
},
initialize: function() {
var t = this;
m.initialize.apply(t, arguments), t.state = new o(t.renderData);
var i = t.ready = t.deferred();
t.bindTo(e.user, "change:email", "_onChangeUserEmail"), t.bindTo(e, "user:ready", i.resolve, i), 
t.bindTo(e, "userMenu:navigate", "navigate"), t.bindTo(e, "userMenu:select", "select"), 
t.bindTo(t.state, "change:syncStatus", "renderSyncStatus"), t.bindTo(t.state, "change:pendingCount", "renderSyncStatus"), 
t.bindTo(e, "sync", "updateSyncStatus"), t.bindTo(e.state, "change:online", "renderSyncStatus"), 
t.bindTo(e.state, "change:updateState", "setUpdateText"), "updated" === e.state.attributes.updateState && e.state.set("updateState", "default"), 
e.user.id && i.resolve();
},
render: function() {
var t = this;
return t.ready.done(function() {
t.updateStrings = t.setUpdateStrings(), t.formatData(), m.render.call(t, t.state.attributes);
}), t.bindTo(e, "user:loggingOut", function() {
if (t.$el) {
var e = d("label_logging_out");
t.$(".logout").html(e), t.renderLocalized();
}
}), t.updateSyncStatus(), t.$el.attr("aria-label", e.language.getText("aria_user_menu_hint")), 
t.renderLocalized(), t.setUpdateText(), t;
},
navigate: function(e) {
var t, i = this, n = i.$(".list-menu li").not(".disabled"), a = n.filter(".active"), o = n.size(), r = n.index(a);
if (a.size()) {
if (("up" === e || "down" === e) && n.removeClass("active"), "up" === e ? t = r > 0 ? r - 1 : o - 1 : "down" === e && (t = o - 1 > r ? r + 1 : 0), 
t !== l) {
var s = u(n.get(t));
s.addClass("active").focus();
}
} else u(n.get(0)).addClass("active").focus();
},
select: function() {
var t = this, i = t.$(".active a"), n = i.attr("href"), a = n && n.replace("#/", "");
a ? e.trigger("route:" + a) : i.hasClass("logout") && i.click();
},
_onChangeUserEmail: function() {
var t = this, i = e.user.attributes.email;
t.$("a.email").text(i);
},
renderLoggingOut: function() {
this.$(".logout").html(d("label_logging_out"));
},
setUpdateText: function() {
var t = this, i = e.state.attributes.updateState || "default", n = t.updateStrings[i];
t.$(".update-status").html(n), t.$(".check-for-updates").toggleClass("checking", "updating" === i);
},
updateSyncStatus: function(t) {
var i = this;
i.state.set({
syncStatus: t,
pendingCount: e.pendingChanges()
});
},
renderSyncStatus: function() {
var i, n = this, a = n.state.attributes, o = a.syncStatus, r = a.pendingCount, s = e.isOnline();
i = "logout" === o ? d("label_logging_out") : s ? e.isSyncing ? d("stillFetching" === o ? "label_still_fetching_tasks" : "userbar_sync_in_progress") : r ? 1 === r ? d("userbar_$_unsynced_item", r) : d("userbar_$_unsynced_item_plural", r) : d("userbar_last_synced_$", t(e.state.attributes.lastSync).fromNow()) : r ? 1 === r ? d("userbar_$_unsynced_item", r) : d("userbar_$_unsynced_item_plural", r) : d("userbar_no_internet_connection"), 
n.$(".last-sync").toggleClass("offline", !s).find(".label").html(i), n.renderLabels();
},
open: function() {
var t = this;
m.open.apply(t, arguments), t.returnFocus = e.focus, t.defer(function() {
e.trigger("focus:set", "userMenu");
}), t.$el.focus();
},
close: function() {
var t = this;
m.close.apply(t, arguments), t.defer(function() {
"userMenu" === e.focus && e.trigger("focus:set", t.returnFocus);
});
}
});
}), define("views/Toolbar/Controllers/ToolbarController", [ "application/runtime", "wunderbits/WBViewController" ], function(e, t) {
return t.extend({
"implements": {
"click:search": "clickSearch",
"click:resetSearch": "clickSearchReset",
"set:focus": "setFocus",
"click:user": "clickUserAvatar",
"click:name": "openUserMenu"
},
openUserMenu: function() {
"me" !== e.currentRoute() && e.trigger("route:me");
},
clickSearch: function() {
var t = this;
e.trigger("route:search"), t.defer(function() {
e.trigger("search:focus");
});
},
clickSearchReset: function(t) {
var i = this, n = i.view;
if (n.toggleSearchUI(!1), n.searchView.$("input").val(""), t) {
e.trigger("search:return");
var a = t.which ? "espaceCancel" : "clickCancel";
e.trigger("analytics:Search:" + a);
}
},
setFocus: function() {
e.trigger("focus:sidebar");
},
clickUserAvatar: function() {
var t = "me" === e.currentRoute() ? "close" : "open";
e.trigger("analytics:Toolbar:clickUserAvatar", t);
}
});
}), define("views/Toolbar/Controllers/ToolbarKeysController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/WBViewController" ], function(e, t, i) {
var n = e.$;
return i.extend({
"implements": {
"keydown:button": "handleKeys"
},
handleKeys: function(e) {
var i, a = this;
e.which === t.enter || e.which === t.spacebar ? (n(e.target).click(), i = !0) : e.which === t.tab && (a.handleTab(e), 
i = !0), i && (e.stopPropagation(), e.preventDefault());
},
getCachedElement: function(e) {
var t = this;
t.cache || (t.cache = {});
var i = t.cache;
return i[e] || (i[e] = t.view.$(e)), i[e];
},
handleTab: function(e) {
var t = this;
e.shiftKey ? t.handShiftTab(e) : t.handlePlainTab(e);
},
handShiftTab: function(e) {
var t = this, i = t.getCachedElement("#search"), n = t.getCachedElement("a.activities-count"), a = t.getCachedElement("a.conversations-count"), o = t.getCachedElement("#user"), r = e.target === i[0], s = e.target === n[0], l = e.target === a[0];
r ? a.focus() : l ? n.focus() : s && o.focus();
},
handlePlainTab: function(t) {
var i = this, n = i.getCachedElement("#search"), a = i.getCachedElement("a.activities-count"), o = i.getCachedElement("a.conversations-count"), r = i.getCachedElement("#user"), s = i.getCachedElement("#reset-search"), l = t.target === n[0], d = t.target === a[0], c = t.target === o[0], u = t.target === r[0], p = t.target === s[0];
l ? e.trigger("sidebar:focus:active") : c ? n.focus() : d ? o.focus() : u ? a.focus() : p && (e.trigger("tasks:selectFirst"), 
e.trigger("focus:set", "browser"));
}
});
}), define("views/Streams/Controllers/StreamPopoverController", [ "application/runtime", "wunderbits/WBViewController" ], function(e, t) {
return t.extend({
"implements": {
"fetch:data": "fetchData",
"check:click": "preventMouseWheelClick"
},
fetchData: function(t) {
var i = this;
i.renderOldData(t), e.sdk.initialized.done(function() {
e.sdk.getOutlet()[t].all(i.getParams()).done(function(e) {
!i.destroyed && e && i.updateOrAddStreamData(t, e);
}).fail(function() {
!i.destroyed && i.view.trigger("show:error");
});
});
},
preventMouseWheelClick: function(e) {
2 === e.which && e.preventDefault();
},
getParams: function() {
var e = new Date(), t = e.getTimezoneOffset() / 60;
return {
style: "desktop",
tz_offset: -t
};
},
renderOldData: function(e) {
var t = this, i = t.view[e], n = i.at(0);
n && n.attributes.html && t.view.trigger("set:html", n.attributes.html);
},
updateOrAddStreamData: function(e, t) {
var i = this, n = {
fromSync: !0
}, a = i.view[e], o = a.at(0), r = !1;
o ? (t.html !== o.attributes.html && (r = !0), o.save(t, n)) : (a.add(t, n), r = !0), 
r && i.view.trigger("set:html", t.html);
}
});
}), define("/templates/symbols/bell.js", {
name: "symbols/bell",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<svg class="bell" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>bell</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="bell" sketch:type="MSArtboardGroup" > <path d="M15.2,10.14 C14.74,9.6 14.46,8.92 14.4,8.2 L14.28,6.94 C14.14,5.08 12.76,3.54 11,3.12 L11,3 C11,2.44 10.56,2 10,2 C9.44,2 9,2.44 9,3 L9,3.12 C7.24,3.54 5.86,5.08 5.72,6.94 L5.6,8.2 C5.54,8.92 5.28,9.6 4.8,10.16 L4.04,11.06 C3.38,11.88 3,12.9 3,13.94 L3,14.5 C3,14.78 3.22,15 3.5,15 L16.5,15 C16.78,15 17,14.78 17,14.5 L17,13.94 C17,12.9 16.62,11.88 15.96,11.06 L15.2,10.14 Z M16,14 L4,14 L4,13.94 C4,13.14 4.28,12.34 4.82,11.7 L5.58,10.8 C6.18,10.08 6.52,9.2 6.6,8.28 L6.7,7.02 C6.84,5.34 8.3,4 10,4 C11.7,4 13.16,5.34 13.3,7.02 L13.4,8.28 C13.48,9.2 13.84,10.08 14.42,10.8 L15.18,11.7 C15.72,12.34 16,13.14 16,13.94 L16,14 Z M12.3,16.1 C12.08,15.94 11.76,15.98 11.58,16.2 C10.82,17.22 9.18,17.22 8.4,16.2 C8.24,15.98 7.92,15.94 7.7,16.1 C7.48,16.26 7.44,16.58 7.62,16.8 C8.18,17.56 9.06,18 10,18 C10.94,18 11.82,17.56 12.38,16.8 C12.56,16.58 12.52,16.26 12.3,16.1 L12.3,16.1 Z" id="m" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/streams/emptyStream.js", {
name: "streams/emptyStream",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = "function", s = '<div class="stream-header"> <h3>';
return o = t.header || e && e.header, a = typeof o === r ? o.call(e, {
name: "header",
hash: {},
data: n
}) : o, (a || 0 === a) && (s += a), s + '</h1> </div> <div class="stream-body"> <div class="state loading"> <span class="dark"></span> </div> </div>';
},
useData: !0
}
}), define("/templates/streams/errorTemplate.js", {
name: "streams/errorTemplate",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression, s = "function";
return '<div class="coachmark center"> ' + r((a = t.symbol || e && e.symbol || o, 
a.call(e, "bell", {
name: "symbol",
hash: {},
data: n
}))) + " <h2>Currently Offline</h2> <p>We weren't able to show your " + r((a = t.name || e && e.name, 
typeof a === s ? a.call(e, {
name: "name",
hash: {},
data: n
}) : a)) + " at this time. Please try again later.</p> </div> ";
},
useData: !0
}
}), define("/styles/streams/popover.js", {
name: "streams/popover",
data: "#wunderlist-base .stream-popover{min-height:100px;overflow:hidden;width:300px;position:relative;}#wunderlist-base .stream-popover .message:focus{outline:1px solid #186ab2}#wunderlist-base .stream-popover .stream-header{text-align:center;border-bottom:1px solid rgba(0,0,0,0.06);}#wunderlist-base .stream-popover .stream-header h3{margin:10px 0 9px 0}#wunderlist-base .stream-popover .stream-body{max-height:370px;overflow-y:auto;position:relative;}#wunderlist-base .stream-popover .stream-body .loading{min-height:200px}#wunderlist-base .stream-popover .stream-body .activity-center.empty{padding:15px 0;position:relative}"
}), define("views/Streams/StreamPopoverView", [ "application/runtime", "views/Popovers/PopoverView", "./Controllers/StreamPopoverController", "project!core/lib/assert", "project!core/WBDeferred", "wunderbits/helpers/strings", "wunderbits/helpers/SafeParse", "wunderbits/mixins/UnicodeEmojiViewMixin", "collections/ActivitiesCollection", "collections/ConversationsCollection", "collections/UnreadActivitiesCountCollection", "helpers/BlobHelper", "partial!symbols/bell", "template!streams/emptyStream", "template!streams/errorTemplate", "style!streams/popover" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m, g, f) {
var b = t.prototype, h = t.extend({
styles: [ f ],
template: m,
errorTemplate: g,
className: "stream-popover",
"implements": [ i ],
emits: {
"click a": "check:click"
},
observes: {
events: {
"set:html": "setHTML",
"show:error": "showError"
}
},
attributes: {
tabindex: 0,
role: "document"
},
renderData: {
header: ""
},
formatData: function(t) {
var i = this, n = t || {}, a = {
conversations: "smart_list_conversations",
activities: "label_activity_center"
};
return b.formatData(n), n.header = e.language.getLabel(a[i.name]).toString(), n;
},
conversations: new d("/conversations/all"),
activities: new l("/activities/all"),
unreadActivitiesCounts: new c("/unreadActivitiesCounts/all"),
initialize: function() {
var t = this;
b.initialize.apply(t, arguments);
var i = new a();
t.hasRendered = i.promise(), t.bindOnceTo(t, "rendered", i.resolve, i), [ "conversations", "activities", "unreadActivitiesCounts" ].forEach(function(i) {
var n = t.deferred();
t[i + "Ready"] = n.promise(), t.bindOnceTo(e, i + ":ready", n.resolve.bind(n));
});
},
setHTML: function(e) {
var t = this, i = r.html(e);
t.convertLinks(i);
var n = i.querySelectorAll("style"), a = i.querySelector("ul"), o = i.querySelector("div.empty"), s = i.querySelectorAll("img"), l = [], d = [];
l.forEach.call(n, function(e) {
var i = e.sheet && e.sheet.cssRules;
i && l.forEach.call(i, function(e) {
d.push("." + t.el.className + " " + e.cssText);
});
}), l.forEach.call(s, t.setImage), t.styles = [ f, {
name: "stream",
data: d.join("\n")
} ], t.hasRendered.done(function() {
t.requestAnimationFrame(function() {
t.applyStyles(), t.$(".stream-body").empty().append(a || o), t.updatePosition(), 
t.renderEmoji(), t.$el.find("li .message").first().attr("tabindex", "-1").focus();
});
});
},
setImage: function(e) {
var t = e.src;
t && (e.removeAttribute("src"), u.loadImage(t, e));
},
convertLinks: function(e) {
var t = e.querySelectorAll("a"), i = location.protocol + "//" + location.host + location.pathname + "#/";
[].forEach.call(t, function(e) {
0 === e.href.indexOf("wunderlist://") ? e.href = e.href.replace("wunderlist://", i) : e.target = "_blank";
});
},
showError: function() {
var e = this;
e.$(".stream-body").html(e.errorTemplate({
name: e.name
})), e.updatePosition();
},
open: function(t) {
var i = this;
i.returnFocus = e.focus, i.name = t.name, n.string(i.name, "Invalid stream popover namespace"), 
e.trigger("focus:set", i.name), i.trackEvent("Show"), i[i.name + "Ready"].done(i.whenStreamReady, i), 
b.open.call(i, t);
},
whenStreamReady: function() {
var e = this;
e.trigger("fetch:data", e.name), e.unreadActivitiesCountsReady.done(function() {
var t = e.unreadActivitiesCounts.at(0);
if (t) {
var i = {};
i[e.name] = 0, t && t.save(i, {
fromSync: !0
});
}
e.bindTo(e.unreadActivitiesCounts, "change:" + e.name, function(t) {
t.attributes[e.name] > 0 && e.trigger("fetch:data", e.name);
});
});
},
onClose: function() {
var t = this;
e.focus === t.name && e.trigger("focus:set", t.returnFocus), t.trackEvent("Dismiss"), 
t.defer("destroy");
},
trackEvent: function(t) {
var i = this, n = o.capitalizeFirstLetter(i.name);
e.trigger("trackingService", "UI." + t, "ActivityCenter/" + n + "/Dialog");
}
});
return s.applyToClass(h), h;
}), define("/templates/streams/count.js", {
name: "streams/count",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression, s = "function";
return r((a = t.symbol || e && e.symbol || o, a.call(e, e && e.icon, {
name: "symbol",
hash: {},
data: n
}))) + ' <span class="count hidden">' + r((a = t.count || e && e.count, typeof a === s ? a.call(e, {
name: "count",
hash: {},
data: n
}) : a)) + "</span> ";
},
useData: !0
}
}), define("views/Streams/StreamCountView", [ "application/runtime", "wunderbits/WBViewPresenter", "collections/UnreadActivitiesCountCollection", "project!core/lib/assert", "./StreamPopoverView", "template!streams/count" ], function(e, t, i, n, a, o) {
var r = e.$, s = t.prototype, l = {
activities: "label_activity_center",
conversations: "smart_list_conversations"
};
return t.extend({
tagName: "a",
template: o,
attributes: {
role: "button",
tabindex: 0,
"aria-haspopup": !0
},
renderData: {
icon: null,
count: 0
},
popover: a,
name: null,
initialize: function() {
var t = this;
s.initialize.apply(t, arguments), n.string(t.name, "Invalid stream name"), t.collection = new i("/unreadActivitiesCounts/all"), 
t.bindTo(t.collection, "add remove change", "update"), t.bindTo(e, t.name + ":open", "openStream"), 
t.bindTo(e, "window:resize", "closeStream");
},
postRender: function() {
var t = this, i = t.collection.models[0], n = i ? i.attributes[t.name] : 0, a = e.language.getText(l[t.name]);
t.$el.attr("aria-label", a + " " + n), t.$el.attr("data-path", t.name), i && t.update(i);
},
update: function(t) {
var i = this, n = t.attributes[i.name], a = i.$(".count");
a.text(n), a.toggleClass("hidden", 1 > n);
var o = e.language.getText(l[i.name]);
i.$el.attr("aria-label", o + " " + n);
},
closeStream: function() {
var e = this, t = e.getSubview("popover");
t && !t.destroyed && t.close();
},
openStream: function(t) {
var i = this, n = e.env.isPackagedApp() && e.env.isMac();
if (t = t || {}, t.offset = 0, t.arrowOffset = 0, n) t.offset = "left", t.arrowOffset = -5; else {
var o = 200, s = r("#lists").width(), l = o >= s;
t.offset = l ? "right" : 0, t.arrowOffset = l ? 5 : 0;
}
var d = i.addSubview(new a({
target: i.$el,
offset: t.offset,
arrowOffset: t.arrowOffset,
onClose: i.onPopoverClose.bind(i)
}), "popover");
t.name = i.name, d.open(t), i.$el.attr("aria-expanded", !0);
},
onPopoverClose: function() {
this.$el.attr("aria-expanded", !1);
}
});
}), define("views/Streams/ActivitiesCountView", [ "application/runtime", "./StreamCountView" ], function(e, t) {
return t.extend({
name: "activities",
renderData: {
icon: "bell"
},
className: "activities-count"
});
}), define("views/Streams/ConversationsCountView", [ "application/runtime", "./StreamCountView" ], function(e, t) {
return t.extend({
name: "conversations",
renderData: {
icon: "conversations"
},
className: "conversations-count"
});
}), define("/templates/symbols/offline.js", {
name: "symbols/offline",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return ' <svg class="offline" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>offline</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="offline" sketch:type="MSArtboardGroup" > <path d="M10.5,9 L11.5,5 L7.5,11 L9.5,11 L8.5,15 L12.5,9 L10.5,9 Z" id="." sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/symbols/search.js", {
name: "symbols/search",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return ' <svg class="search" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>search</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="search" sketch:type="MSArtboardGroup" > <path d="M8.5025,15 C4.9225,15 2.0025,12.08 2.0025,8.5 C2.0025,4.92 4.9225,2 8.5025,2 C12.0825,2 15.0025,4.92 15.0025,8.5 C15.0025,12.08 12.0825,15 8.5025,15 L8.5025,15 Z M8.5025,3 C5.4625,3 3.0025,5.46 3.0025,8.5 C3.0025,11.54 5.4625,14 8.5025,14 C11.5425,14 14.0025,11.54 14.0025,8.5 C14.0025,5.46 11.5425,3 8.5025,3 L8.5025,3 Z M17.5025,18 C17.3825,18 17.2425,17.96 17.1425,17.86 L13.6425,14.36 C13.4625,14.16 13.4625,13.84 13.6425,13.64 C13.8425,13.46 14.1625,13.46 14.3625,13.64 L17.8625,17.14 C18.0425,17.34 18.0425,17.66 17.8625,17.86 C17.7625,17.96 17.6225,18 17.5025,18 L17.5025,18 Z" id="z" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/symbols/conversations.js", {
name: "symbols/conversations",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<svg class="conversations" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>conversations</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="conversations" sketch:type="MSArtboardGroup" > <path d="M3.46,18 C3.28,17.98 3.1,17.86 3.04,17.68 C2.96,17.5 3,17.3 3.12,17.16 C4.1,16.08 4.3,14.12 3.54,13.12 C3.18,12.64 2.72,12 2.42,11.26 C2.14,10.52 2,9.76 2,9 C2,5.14 5.58,2 10,2 C14.42,2 18,5.14 18,9 C18,12.82 14.46,15.96 10.08,16 L10,16 C8.7,16 7.42,15.72 6.28,15.2 C6.02,15.08 5.92,14.78 6.04,14.54 C6.14,14.28 6.44,14.18 6.7,14.28 C7.68,14.74 8.8,14.98 9.92,15 L10,15 C13.86,15 17,12.3 17,9 C17,5.68 13.86,3 10,3 C6.14,3 3,5.68 3,9 C3,9.64 3.12,10.28 3.36,10.88 C3.6,11.52 4,12.08 4.34,12.52 C5.2,13.64 5.22,15.52 4.48,16.96 C5.2,16.84 5.92,16.56 6.52,16.1 C6.74,15.94 7.06,15.98 7.22,16.2 C7.38,16.42 7.34,16.74 7.12,16.9 C6.16,17.62 5,18 3.82,18 L3.46,18 Z" id="I" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/toolbars.js", {
name: "toolbars",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression, s = t.helperMissing;
return '<a id="user" data-path="me" role="button" tabindex="0" aria-label="' + r((a = t.userAriaLabel || e && e.userAriaLabel, 
typeof a === o ? a.call(e, {
name: "userAriaLabel",
hash: {},
data: n
}) : a)) + '" class="left" aria-expanded="false" aria-haspopup="true"></a> <div class="name search-hidden"> <span class="name-label"></span> <span class="chevron">▼</span> <div id="sync"> <a data-path="me"> <span class="offline-wrapper hidden">' + r((a = t.symbol || e && e.symbol || s, 
a.call(e, "offline", {
name: "symbol",
hash: {},
data: n
}))) + '</span> <span class="syncing hidden"></span> </a> </div> </div> <div id="main-toolbar"> <div class="stream-counts"> </div> <a id="search" role="button" class="search-hidden" tabindex="0" data-key-aria-label="aria_search"> ' + r((a = t.symbol || e && e.symbol || s, 
a.call(e, "search", {
name: "symbol",
hash: {},
data: n
}))) + ' </a> <a id="reset-search" role="button" class="hidden" data-key-aria-label="aria_exit_search" tabindex="0"> ' + r((a = t.symbol || e && e.symbol || s, 
a.call(e, "delete", {
name: "symbol",
hash: {},
data: n
}))) + " </a> </div> ";
},
useData: !0
}
}), define("views/Toolbar/ToolbarView", [ "application/runtime", "vendor/moment", "collections/NotificationCollection", "views/Toolbar/SearchFieldView", "views/AvatarView", "views/Popovers/UserPopoverView", "views/Toolbar/Controllers/ToolbarController", "views/Toolbar/Controllers/ToolbarKeysController", "views/Streams/ActivitiesCountView", "views/Streams/ConversationsCountView", "project!core/WBDeferred", "wunderbits/WBViewPresenter", "wunderbits/WBPopoverView", "partial!symbols/offline", "partial!symbols/bell", "partial!symbols/search", "partial!symbols/conversations", "partial!symbols/delete", "template!toolbars", "style!_bars" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m, g, f, b, h, v, _) {
var w = u.prototype;
return u.extend({
template: v,
id: "toolbar",
styles: [ _ ],
"implements": [ r, s ],
observes: {
runtime: {
"search:cancel": "emitReset",
"tab:to:searchButton": "focusSearchButton"
}
},
emits: {
click: "set:focus",
"click #search": "click:search",
"click #reset-search": "click:resetSearch",
"click #user": "click:user",
"click .name": "click:name",
"keydown a": "keydown:button"
},
initialize: function() {
var t = this;
w.initialize.apply(t, arguments), t.initialRender = new c(), t.bindTo(e, "toolbar:userMenu", t.toggleUserPopover), 
t.bindTo(e.state, "change:online", t.updateSyncStatus), t.bindTo(e, "sync", t.updateSyncStatus), 
t.bindTo(e.user, "change:name", t.updateName), t.searchView = t.addSubview(new n()), 
t.bindTo(t.searchView, "search:show", function() {
t.toggleSearchUI(!0);
}), t.bindTo(t.searchView, "search:hide", function() {
t.toggleSearchUI(!1);
});
},
emitReset: function() {
this.trigger("click:resetSearch");
},
render: function() {
var t = this, i = e.user.toJSON();
i.userAriaLabel = i.name + " " + e.language.getText("aria_user_menu_button"), w.render.call(t, i), 
t.$offline = t.$("#sync .offline-wrapper"), t.$syncing = t.$("#sync .syncing"), 
t.initialRender.resolve(), t.userPopover = null, t.avatarView = t.avatarView || t.addSubview(new a({
showPro: !0
}), "avatarView"), t.$("#user").html(t.avatarView.render({
id: e.user.id,
isOwnAvatar: !0,
size: 25
}).$el);
var n = t.addSubview(new l(), "activitiesCount");
t.$(".stream-counts").append(n.render().el);
var o = t.addSubview(new d(), "conversationsCount");
return t.$(".stream-counts").append(o.render().el), t.updateName(), t.updateSyncStatus(), 
t.el.appendChild(t.searchView.render().el), e.env.isPackagedApp() && e.env.isMac() && t.$(".name").removeClass("search-hidden"), 
t;
},
updateName: function() {
this.$(".name-label").text(e.user.attributes.name);
},
updateSyncStatus: function() {
var t = this, i = e.state.attributes;
t.defer(function() {
i.online ? e.isSyncing ? t.renderSyncing() : i.syncSuccessful ? t.renderOnlineNotSycing() : t.renderSyncOffline(!0) : t.renderSyncOffline();
});
},
renderSyncOffline: function(e) {
var t = this;
t.$syncing.addClass("hidden"), t.$offline.removeClass("hidden").toggleClass("api-error", !!e);
},
renderSyncing: function() {
var e = this;
e.$syncing.removeClass("hidden"), e.$offline.addClass("hidden").removeClass("api-error");
},
renderOnlineNotSycing: function() {
var e = this;
e.$syncing.addClass("hidden"), e.$offline.addClass("hidden").removeClass("api-error");
},
toggleReturnButton: function(e) {
var t = this;
if (!t.isSearchActive) {
var i = t.$("#return");
e ? i.show() : i.hide();
}
},
toggleSearchUI: function(e) {
var t = this;
t.searchView.$el.toggleClass("active", e), t.$(".search-hidden").toggleClass("hidden", e), 
t.$("#reset-search").toggleClass("hidden", !e), t.$(".stream-counts").toggleClass("hidden", e);
},
toggleUserPopover: function(e, t) {
var i = this;
i.prepareUserPopover(), i.userPopover.toggle(e, t);
var n = e && "open" === e[0];
i.renderUserMenuButtonARIAState(n);
},
prepareUserPopover: function() {
var e = this;
if (!e.userPopover) {
var t = e.$("#user");
e.userPopover = e.addSubview(new o({
target: t
})), e.userPopover.onClose = e.onUserPopoverClose.bind(e);
}
},
onUserPopoverClose: function() {
var e = this;
e.defer(function() {
e.destroyed || e.userPopover && e.userPopover.destroyed || !e.userPopover || (e.userPopover.destroy(), 
e.userPopover = null, e.renderUserMenuButtonARIAState(!1));
});
},
renderUserMenuButtonARIAState: function(e) {
this.$("#user").attr("aria-expanded", !!e);
},
focusSearchButton: function() {
var e = this;
e.$("#search").focus();
}
});
}), define("views/Sidebar/controllers/SidebarActionsController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/WBViewController" ], function(e, t, i) {
return i.extend({
"implements": {
"click:addList": "_addList",
"drop:tasks": "_addListWithTasks"
},
_addList: function() {
e.trigger("onboarding:addListClicked"), e.trigger("route:lists/new"), e.trigger("analytics:Sidebar:clickAddList");
},
_addListWithTasks: function(t) {
e.trigger("route:lists/new/" + t.join(","));
}
});
}), define("/templates/symbols/plus.js", {
name: "symbols/plus",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return ' <svg class="plus" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>plus</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="plus" sketch:type="MSArtboardGroup" > <path d="M10.5,9.5 L10.5,1 C10.5,0.72 10.28,0.5 10,0.5 C9.72,0.5 9.5,0.72 9.5,1 L9.5,9.5 L1,9.5 C0.72,9.5 0.5,9.72 0.5,10 C0.5,10.28 0.72,10.5 1,10.5 L9.5,10.5 L9.5,19 C9.5,19.28 9.72,19.5 10,19.5 C10.28,19.5 10.5,19.28 10.5,19 L10.5,10.5 L19,10.5 C19.28,10.5 19.5,10.28 19.5,10 C19.5,9.72 19.28,9.5 19,9.5 L10.5,9.5 Z" id="¢" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/sidebarActions.js", {
name: "sidebarActions",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return '<a class="sidebarActions-addList"> ' + r((a = t.symbol || e && e.symbol || o, 
a.call(e, "plus", {
name: "symbol",
hash: {},
data: n
}))) + " </a> ";
},
useData: !0
}
}), define("/styles/sidebarActions.js", {
name: "sidebarActions",
data: ".sidebarActions{bottom:0;left:0;right:0;height:38px;position:absolute;z-index:1000;-webkit-box-shadow:0 -1px 2px rgba(0,0,0,0.15),inset 0 1px 0 rgba(255,255,255,0.5);box-shadow:0 -1px 2px rgba(0,0,0,0.15),inset 0 1px 0 rgba(255,255,255,0.5)}.sidebarActions-addList{text-align:center;display:block;padding:10px 0;color:#737272;}.sidebarActions-addList:hover{color:#737272}.sidebarActions-addList:active{color:#262626}.sidebarActions-addList.dragOver{-webkit-border-radius:2px;border-radius:2px;padding:8px 0;border:2px dashed #3c74a3}"
}), define("views/Sidebar/SidebarActionsView", [ "wunderbits/WBViewPresenter", "./controllers/SidebarActionsController", "helpers/dnd/index", "partial!symbols/plus", "template!sidebarActions", "style!sidebarActions" ], function(e, t, i, n, a, o) {
var r = e.prototype, s = "application/x-wunderlist-task";
return e.extend({
className: "sidebarActions",
styles: [ o ],
template: a,
"implements": [ t ],
observes: {
runtime: {
"lists:new": ">click:addList"
}
},
emits: {
"click .sidebarActions-addList": "click:addList"
},
_setupDropZone: function() {
var e = this;
if (!e.addButtonDropZone) {
var t = e.el.querySelector(".sidebarActions-addList");
e.addButtonDropZone = i.createDropZone(t, {
dropEffect: "move",
mimeTypes: [ s ],
hoverClass: "dragOver"
}), e.bindTo(e.addButtonDropZone, "drop", e._onTasksDropped), e.addButtonDropZone.enable();
}
},
render: function() {
var e = this, t = r.render.apply(e, arguments);
return e._setupDropZone(), t;
},
_onTasksDropped: function(e) {
var t = this, i = JSON.parse(e);
t.trigger("drop:tasks", i);
},
onDestroy: function() {
var e = this;
r.onDestroy.call(e), e.addButtonDropZone.destroy();
}
});
}), define("/templates/tagCloudItem.js", {
name: "tagCloudItem",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression;
return '<a class="percent-' + r((a = t.percent || e && e.percent, typeof a === o ? a.call(e, {
name: "percent",
hash: {},
data: n
}) : a)) + '" data-path="search/' + r((a = t.tagUri || e && e.tagUri, typeof a === o ? a.call(e, {
name: "tagUri",
hash: {},
data: n
}) : a)) + '">' + r((a = t.tag || e && e.tag, typeof a === o ? a.call(e, {
name: "tag",
hash: {},
data: n
}) : a)) + "</a>";
},
useData: !0
}
}), define("/styles/tagCloud.js", {
name: "tagCloud",
data: ".tagCloud{position:relative;z-index:600;display:block;margin:10px 20px 0 20px;text-align:center;break-word:break-word;word-wrap:break-word;}.tagCloud a{font-weight:normal;font-size:12px;margin-right:6px;display:inline-block;color:#aaa;}.tagCloud a.percent-10{color:#aaa;font-weight:100}.tagCloud a.percent-20{color:#909090;font-weight:200}.tagCloud a.percent-30{color:#777;font-weight:300}.tagCloud a.percent-40{color:#6a6a6a;font-weight:400}.tagCloud a.percent-50{color:#5d5d5d;font-weight:500}.tagCloud a.percent-60{color:#515151;font-weight:600}.tagCloud a.percent-70{color:#5d5d5d;font-weight:700}.tagCloud a.percent-80{color:#444;font-weight:800}.tagCloud a.percent-90{color:#111;font-weight:900}.tagCloud a.percent-100{color:#000;font-weight:900}.tagCloud a:hover{color:#000}"
}), define("views/Sidebar/TagCloud", [ "application/runtime", "collections/TaskCollection", "wunderbits/WBView", "template!tagCloudItem", "style!tagCloud" ], function(e, t, i, n, a) {
var o = e._, r = e.$, s = i.prototype;
return i.extend({
className: "tagCloud",
styles: [ a ],
initialize: function() {
var i = this;
s.initialize.apply(i, arguments), i.tasks = new t("/tasks/all"), i.debouncedRender = i.debounce(i.render, 2e3), 
i.bindTo(i.tasks, "change:title add remove", i.debouncedRender), i.bindTo(e, "tags:tagCloud", i.renderTags);
},
render: function() {
var e = this;
return s.render.apply(e, arguments), e.getTagCloud(), e;
},
getTagCloud: function() {
e.on("db:allTasksLoaded", function() {
e.trigger("tags:getTagCloud");
});
},
renderTags: function(t) {
var i, a, s, l = this;
t = t && o.sortBy(t, "tag");
var d = o.max(o.map(t, function(e) {
return e.ids.length;
}));
e.on("tasks:ready", function() {
l.$el.empty();
var e = document.createDocumentFragment();
for (var c in t) if (s = t[c].ids.length) {
var u = 10 * Math.round(s / d * 10);
i = {
tag: o.escape(t[c].tag.replace(/^#/, "")),
tagUri: encodeURIComponent(t[c].tag),
percent: u
}, a = r(n(i))[0], e.appendChild(a);
}
l.el.appendChild(e);
}), l.delegateEvents();
}
});
}), define("/templates/foldersGuide.js", {
name: "foldersGuide",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return '<div class="guide"> <div class="instructions"> <div> <p class="colorTag blue">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "folder_whatsnew_button_new", {
name: "localized",
hash: {},
data: n
}))) + "</p> <h3>" + r((a = t.localized || e && e.localized || o, a.call(e, "folder_whatsnew_title", {
name: "localized",
hash: {},
data: n
}))) + '</h3> <div class="animation"></div> <p class="description">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "folder_whatsnew_popup_description", {
name: "localized",
hash: {},
data: n
}))) + '</p> </div> </div> <div class="closeButton">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "button_close", {
name: "localized",
hash: {},
data: n
}))) + '</div> </div> </div> <div class="openButton"> <p><span class="tag">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "folder_whatsnew_button_new", {
name: "localized",
hash: {},
data: n
}))) + '</span><span class="label">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "folder_whatsnew_title", {
name: "localized",
hash: {},
data: n
}))) + "</span></p> </div> ";
},
useData: !0
}
}), define("/styles/foldersGuide.js", {
name: "foldersGuide",
data: '.foldersGuide .openButton{cursor:pointer;display:none;background:#186ab2;color:#fff;padding:4px;font-size:14px;font-weight:bold;position:absolute;bottom:38px;height:26px;left:0;right:0;z-index:500;}.foldersGuide .openButton .tag{display:inline-block;border:1px solid #fff;-webkit-border-radius:4px;border-radius:4px;margin:3px 6px 3px 3px;padding:3px 6px;text-transform:uppercase;font-size:10px}.foldersGuide .openButton .label{vertical-align:middle}.foldersGuide .guide{background-color:#fcfcfc;display:-webkit-box;display:-moz-box;display:-webkit-flex;display:-ms-flexbox;display:box;display:flex;visibility:hidden;-webkit-transition:opacity 0.2s;-moz-transition:opacity 0.2s;-o-transition:opacity 0.2s;-ms-transition:opacity 0.2s;transition:opacity 0.2s;opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0);background:#fff;color:#000;font-weight:bold;position:absolute;bottom:0;top:0;left:0;right:0;z-index:10000;-webkit-box-orient:vertical;-moz-box-orient:vertical;-o-box-orient:vertical;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.foldersGuide .guide > .instructions{-webkit-box-flex:1;-moz-box-flex:1;-o-box-flex:1;-ms-box-flex:1;box-flex:1;-webkit-flex-grow:1;flex-grow:1;display:-webkit-box;display:-moz-box;display:-webkit-flex;display:-ms-flexbox;display:box;display:flex;-webkit-box-orient:vertical;-moz-box-orient:vertical;-o-box-orient:vertical;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-moz-box-pack:center;-o-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;text-align:center;padding:0 10px;}.foldersGuide .guide > .instructions h3{margin:10px 0 10px 0;font-size:20px}.foldersGuide .guide > .instructions div.animation{margin:20px 0;background-image:url("images/folders-guide.gif");background-repeat:no-repeat;-webkit-background-size:contain;-moz-background-size:contain;background-size:contain;background-position:center;height:130.909090909091px}.foldersGuide .guide > .instructions p.description{margin:0 20px;font-size:13px;font-weight:normal;line-height:150%}.foldersGuide .guide > .closeButton{background-color:#fcfcfc;cursor:pointer;display:block;text-align:center;color:#2b88d9;border-top:1px solid #d6d6d6;padding:10px}.foldersGuide .guide p.colorTag{display:inline-block;margin:10 auto;font-size:11px;padding:4px 6px;-webkit-border-radius:3px;border-radius:3px;text-transform:uppercase}.foldersGuide .guide .blue{color:#fff;background-color:#186ab2}.foldersGuide.showGuide .guide{visibility:visible;opacity:1;-ms-filter:none;filter:none}.foldersGuide.showButton .openButton{display:block}'
}), define("views/Sidebar/FoldersGuide", [ "application/runtime", "wunderbits/WBViewPresenter", "template!foldersGuide", "style!foldersGuide" ], function(e, t, i, n) {
var a = t.extend({
className: "foldersGuide showButton",
template: i,
styles: [ n ],
events: {
"click .openButton": "_openGuide",
"click .closeButton": "_closeGuide"
},
_openGuide: function() {
var e = this;
e.el.classList.remove("showButton"), e.el.classList.add("showGuide");
},
_closeGuide: function() {
var t = this;
e.settings.save({
webapp_sidebar_folder_guide_did_show: !0
}), t.el.classList.remove("showGuide"), t.el.classList.remove("showButton"), t.destroy();
}
});
return a.needsToShow = function() {
return !e.settings.attributes.webapp_sidebar_folder_guide_did_show;
}, a;
}), define("helpers/SidebarItemVisibilityHelper", [ "application/runtime", "project!core/WBSingleton" ], function(e, t) {
function i(e, t) {
var i = e.offset().top, n = e.height(), a = t.height(), o = t.scrollTop(), r = t.offset().top, s = i, l = i + n, d = r, c = r + a;
return d > s ? o + (s - d) - n / 2 : l > c ? o + (l - c) + n / 2 : void 0;
}
return t.extend({
scrollToItem: function(e, t, n) {
if (void 0 !== e.offset()) {
var a = n && n.animate, o = i(e, t);
void 0 !== o && (a ? t.stop().animate({
scrollTop: o
}, 100) : t.scrollTop(o));
}
}
});
}), define("/templates/sidebar.js", {
name: "sidebar",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<div class="lists-scroll"> </div>';
},
useData: !0
}
}), define("views/Sidebar/SidebarView", [ "application/runtime", "collections/ListCollection", "collections/TaskCollection", "collections/MembershipCollection", "views/Sidebar/PendingInvitesCollectionView", "views/Sidebar/InboxItemView", "views/Sidebar/SidebarDropZoneView", "views/Sidebar/ListsCollectionView", "views/Sidebar/SmartListsCollectionView", "./Controllers/SidebarController", "./Controllers/SidebarKeysController", "./Controllers/ListContextMenuController", "./Controllers/FolderContextMenuController", "views/Toolbar/ToolbarView", "views/Sidebar/SidebarActionsView", "views/Sidebar/TagCloud", "views/Sidebar/FoldersGuide", "actions/Factory", "wunderbits/data/keycodes", "helpers/SidebarItemVisibilityHelper", "wunderbits/helpers/strings", "wunderbits/WBViewPresenter", "wunderbits/WBPopoverView", "wunderbits/WBBlurHelper", "template!sidebar", "style!_lists" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m, g, f, b, h, v, _, w, k, x, y, C, T, S) {
var L = e.$, D = e.global, M = k.prototype, z = y, j = _;
return k.extend({
template: C,
styles: [ T ],
className: "lists-inner",
attributes: {
tabindex: 0
},
"implements": [ d, c, u, p ],
emits: {
"contextmenu li.sidebarItem": "contextmenu:lists",
"contextmenu li.sidebarFolder .folder-container": "contextmenu:folders",
"click li a": "click:list",
"MSPointerDown li a": "click:list",
"click li.active .list-options": "click:edit",
"dblclick li": "doubleClick:list",
keydown: "keydown"
},
observes: {
runtime: {
"lists:delete": ">delete:selected"
}
},
initialize: function(i) {
var o = this;
M.initialize.apply(this, arguments), o.sidebarActions = h.sidebar(), o.debouncedCalculateDropZone = o.debounce(function() {
o.calculateDropZone();
}, 250), o.bindTo(o, "select", o.onSelectList), o.bindTo(o, "deselect", o.onUnselectAll), 
o.bindTo(e, "sidebar:focus:active", o.focusActive), o.bindTo(e, "sidebar:select", o.onSelectList), 
o.bindTo(e, "sidebar:reselect", o.onReselectList), o.bindTo(e, "sidebar:deselect", o.onUnselectAll), 
o.bindTo(e, "sidebar:deleteAndSelectNext", o.deleteAndSelectNext), o.bindTo(e, "sidebar:selected:add:task", o.routeToAddTask), 
o.bindTo(e, "sidebar:navigate", o.navigateLists), o.bindTo(e, "focus:changed", o.saveGlobalFocus), 
o.bindTo(e, "smartlist", o.debouncedCalculateDropZone), o.bindTo(e, "list:sorting:start", o.filtersVisuallyDisabled), 
o.bindTo(e, "list:sorting:end", o.filtersVisuallyRestored), o.lists = new t("/lists/all"), 
o.memberships = new n("/memberships/all"), o.pendingInvitesView = o.addSubview(new a()), 
o.listsView = o.addSubview(new s({
sidebarActions: o.sidebarActions
})), o.filterView = o.addSubview(new l(i)), o.toolbarView = o.addSubview(new m({
user: i && i.user
})), e.isLabsEnabled("tag_cloud") && (o.tagCloudView = o.addSubview(new f())), o.sidebarActionsView = o.addSubview(new g()), 
o.debouncedRouteToList = o.debounce(o.routeToList, 250), o.dropZoneView = o.addSubview(new r()), 
o.inboxReady = o.deferred(), o.settingsReady = o.deferred(), o.bindOnceTo(e, "hasSyncedOnce", o.settingsReady.resolve, o.settingsReady);
},
routeToList: function(t) {
var i = this;
"sidebar" === e.focus && (e.supressSidebarClose(!0), i.trigger("route:list", t), 
i.routed = !0);
},
render: function() {
var e = this, t = document.createDocumentFragment();
t.appendChild(e.toolbarView.render().el), t.appendChild(e.sidebarActionsView.render().el), 
e.$el.empty().append(t), e.$el.append(e.template());
var i = document.createDocumentFragment();
i.appendChild(e.pendingInvitesView.render().el), i.appendChild(e.filterView.render().el), 
i.appendChild(e.listsView.render().el);
var n = e.$(".lists-scroll");
return n.prepend(i), e.tagCloudView && n.append(e.tagCloudView.render().el), e.renderInbox(), 
e.delegateEvents(), e.when(e.listsView.hasRendered, e.filterView.hasRendered).done(e.debouncedCalculateDropZone), 
e.renderLocalized(), e.el.appendChild(e.dropZoneView.render().el), e.renderFoldersGuide(), 
e;
},
renderFoldersGuide: function() {
var e = this;
e.settingsReady.done(function() {
if (b.needsToShow()) {
var t = e.$(".lists-scroll");
e.foldersGuide = e.addSubview(new b()), t.before(e.foldersGuide.render().el);
}
});
},
renderInbox: function() {
var t = this;
t.bindOnceTo(e, "lists:ready", function(e) {
var i = e.get("inbox"), n = new o({
model: i
});
t.addSubview(n, "inbox"), t.filterView.$el.prepend(n.render().el), n.ready.done(t.inboxReady.resolve, t.inboxReady);
});
},
routeToAddTask: function() {
var t = this, i = t.getSelectedID();
i && "completed" !== i && "week" !== i && e.trigger("route:lists/" + i + "/tasks/new");
},
getSelectedID: function() {
var e = this;
return e.$("li.active").attr("rel");
},
onReselectList: function(e) {
var t = this, i = t.getSelectedID() || t.$("li").first().attr("rel");
i && t.onSelectList(i, {
trigger: e !== S ? e : !0
});
},
filtersVisuallyDisabled: function() {
var e = this, t = e.$(".filters-collection");
z.run(), t.find("li").addClass("touch-edit-disabled");
},
filtersVisuallyRestored: function() {
var e = this, t = e.$(".filters-collection");
t.find("li").removeClass("touch-edit-disabled");
},
getDeleteAndSelectNextAction: function(t, i, n) {
var a = this, o = ".user-disabled, .animate-up, .destroyed, .hidden, .sidebarFolder, .sidebarFolder.collapsed li, [data-type=filter]";
return function() {
a.deleteTimeout && D.clearTimeout(a.deleteTimeout);
var r = a.$("li.sidebarItem").not(o), s = a.$('[rel="' + t.id + '"]').addClass("destroyed"), l = r.index(s), d = r.get(l - 1);
a.$("li").removeClass("active selected");
var c = L(d).addClass("active selected").focus().attr("rel"), u = i.animate === !1 ? 1 : 500;
if (a.deleteTimeout = D.setTimeout(function() {
a.onSelectList(c, {
trigger: !0
}), a.debouncedCalculateDropZone();
}, u), t.isShared() && t.isMember()) {
var p = a.memberships.get(t.attributes.membershipID);
p && p.destroy();
} else t.destroy(i);
if (n && i.confirm !== !1) {
var m = t.isShared() && !t.isOwner() ? "confirmLeaveList" : "confirmDeleteList";
e.trigger("analytics:Sidebar:" + m);
} else e.trigger("analytics:Sidebar:deleteListWithoutConfirmation");
};
},
deleteAndSelectNext: function(t, i) {
var n = this, a = "true" === e.settings.attributes.confirm_delete_entity;
i || (i = {});
var o = n.getDeleteAndSelectNextAction(t, i, a), r = t.isShared() && !t.isOwner(), s = r ? "sharing_leave_action" : "label_are_you_sure_permanently_delete_$_list", l = r ? "sharing_leave_button" : "label_delete_list", d = {
confirm: o,
cancel: function() {
e.trigger("actions:set", t), e.trigger("analytics:Sidebar:cancelDeleteList");
},
customTitle: e.language.getLabel(s, t.escape("title")).toString(),
customText: e.language.getLabel("label_cant_undo").toString(),
confirmText: e.language.getLabel(l).toString()
};
a && i.confirm !== !1 ? e.trigger("modal:confirm", d) : o();
},
onUnselectAll: function() {
var t = this;
t.$("li.active").removeClass("active"), e.trigger("sidebar:selected", null);
},
setSelectionByID: function(t) {
var i = this;
i.when(i.listsView.ready, i.inboxReady).done(function() {
i.$("li.active").removeClass("active selected");
var n = i.$('li[rel="' + t + '"]');
n.addClass("active").focus(), e.trigger("actions:set", i.lists.get(t)), e.trigger("sidebar:selected", t), 
i.debouncedCalculateDropZone(), i.scrollToItemWithID(t), i.filterView.ensureVisibility(t);
});
},
scrollToItemWithID: function(e) {
var t = this, i = t.$('[rel="' + e + '"]');
j.scrollToItem(i, t.$(".lists-scroll"), {
animate: t.hasExecutedScrollCheck
}), t.hasExecutedScrollCheck = !0;
},
navigateLists: function(t) {
var i = this, n = ".user-disabled, .animate-up, .destroyed, .hidden, .sidebarFolder.collapsed li", a = i.$(".filters-collection").find("li").not(n), o = i.$(".lists-collection").find("li").not(n);
o = a.add(o);
var r, s = 0, l = 0;
if (e.trigger("actions:set", null), o.each(function(e, t) {
return t === o.filter(".active")[0] ? void (s = l) : void (l += 1);
}), "up" === t ? (r = L(s > 0 ? o.get(s - 1) : o.get(o.size() - 1)), i.routed && (i.routed = !1)) : "down" === t ? (r = L(s < o.length - 1 ? o.get(s + 1) : o.get(0)), 
i.routed && (i.routed = !1)) : "right" === t && i.routed && e.trigger("tasks:selectFirst"), 
r && ("up" === t || "down" === t)) {
var d = r.attr("rel");
o.removeClass("active selected"), r.addClass("active selected").focus(), i.debouncedRouteToList(d), 
i.scrollToItemWithID(d);
}
},
saveGlobalFocus: function(e) {
var t = this;
"sidebar" === e && t.$(".active").focus();
},
onSelectList: function(t, i) {
var n = this;
n.listsView.blockListChangeFromDragEnd && e.env.isTouchDevice() || (n.setSelectionByID(t), 
n.routed = !0, i && i.trigger && e.trigger("route:lists/" + t));
},
calculateDropZone: function() {
var e = this, t = e.el.querySelector(".filters-collection").getBoundingClientRect().height, i = e.el.querySelector(".lists-collection").getBoundingClientRect().height, n = e.el.querySelector("#toolbar").getBoundingClientRect().height, a = t + i + n, o = e.el.querySelector(".sidebarActions-addList").getBoundingClientRect().height, r = e.dropZoneView.el;
r.style.top = a + "px", r.style.bottom = o + "px";
},
focusActive: function() {
var e = this;
e.$(".active").focus();
}
});
}), define("views/Tasks/Controllers/TaskHeaderViewController", [ "application/runtime", "wunderbits/WBViewController" ], function(e, t) {
var i = e._;
return t.extend({
"implements": {
"toggle:completedTasks": "_toggleCompletedTasks",
clickedTitle: "onClickedTitle"
},
onClickedTitle: function() {},
_toggleCompletedTasks: function(t) {
var n = this;
t && t.preventDefault();
var a = n.view.model.attributes.isCollapsed;
n.view.model.set("isCollapsed", !a), a && n.view.model.loadCompletedTasksIfNeeded(), 
i.delay(i.bind(e.trigger, e, "focus:set", "browser"), 100);
}
});
}), define("controllers/Tasks/DeleteCompletedTasksController", [ "application/runtime", "wunderbits/WBViewController", "collections/TaskCollection", "project!core/lib/clone" ], function(e, t, i, n) {
var a = e._;
return t.extend({
"implements": {
"delete:completed": "deleteCompleted"
},
getConfirmationLabels: function(t) {
var i = e.language.getLabel, n = {
text: i("label_cant_undo").toString()
};
return 1 === t.length ? (n.title = i("label_are_you_sure_permanently_delete_$_task", a.escape(t[0].attributes.title)).toString(), 
n.confirm = i("label_delete_task").toString()) : (n.title = i("label_are_you_sure_permanently_delete_task_plural").toString(), 
n.confirm = i("label_delete_task_plural").toString()), n;
},
deleteCompleted: function() {
var t = this, a = t.deferred(), o = t.view.model.attributes.listID, r = new i("/lists/" + o + "/tasks"), s = n(r.doneTasks.models);
if (s.length) {
var l = function() {
s.forEach(function(e) {
e.destroy();
}), a.resolve();
}, d = "true" === e.settings.get("confirm_delete_entity");
if (d) {
var c = t.getConfirmationLabels(s);
e.trigger("modal:confirm", {
customTitle: c.title,
customText: c.text,
confirmText: c.confirm,
confirm: l,
cancel: a.reject.bind(a)
});
} else l();
} else a.reject();
return a.promise();
}
});
}), define("/templates/tasksHeader.js", {
name: "tasksHeader",
data: {
"1": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return ' <a class="delete-completed"> ' + r((a = t.symbol || e && e.symbol || o, 
a.call(e, "delete", {
name: "symbol",
hash: {},
data: n
}))) + " </a> ";
},
"3": function() {
return " no-hover";
},
"5": function(e, t, i, n) {
var a, o, r = "function", s = 'data-path="';
return o = t.listHref || e && e.listHref, a = typeof o === r ? o.call(e, {
name: "listHref",
hash: {},
data: n
}) : o, (a || 0 === a) && (s += a), s += '" href="/#/', o = t.listHref || e && e.listHref, 
a = typeof o === r ? o.call(e, {
name: "listHref",
hash: {},
data: n
}) : o, (a || 0 === a) && (s += a), s + '" ';
},
"7": function() {
return '<span class="spinner"></span>';
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = "function", s = this.escapeExpression, l = "";
return a = t["if"].call(e, e && e.canDeleteCompleted, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '  <a class="groupHeader ' + s((o = t.listClassName || e && e.listClassName, 
typeof o === r ? o.call(e, {
name: "listClassName",
hash: {},
data: n
}) : o)), a = t.unless.call(e, e && e.listHref, {
name: "unless",
hash: {},
fn: this.program(3, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '" ', a = t["if"].call(e, e && e.listHref, {
name: "if",
hash: {},
fn: this.program(5, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += ' aria-label="' + s((o = t.listLabel || e && e.listLabel, 
typeof o === r ? o.call(e, {
name: "listLabel",
hash: {},
data: n
}) : o)) + '">', o = t.listTitle || e && e.listTitle, a = typeof o === r ? o.call(e, {
name: "listTitle",
hash: {},
data: n
}) : o, (a || 0 === a) && (l += a), l += "&#x200b;</a> ", a = t["if"].call(e, e && e.loadingCompleted, {
name: "if",
hash: {},
fn: this.program(7, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l;
},
useData: !0
}
}), define("views/Tasks/TaskListHeaderView", [ "wunderbits/WBViewPresenter", "project!core/lib/extend", "wunderbits/mixins/UnicodeEmojiViewMixin", "./Controllers/TaskHeaderViewController", "controllers/Tasks/DeleteCompletedTasksController", "template!tasksHeader" ], function(e, t, i, n, a, o) {
var r = e.prototype, s = e.extend({
template: o,
observes: {
model: {
"change:title": "render",
"change:isCollapsed": "render",
"change:showHeader": "render",
"change:loadingCompleted": "render"
},
chunking: {
destroy: "destroy"
}
},
emits: {
"click .delete-completed": "delete:completed",
"click .completed-items-heading": "toggle:completedTasks",
"click a": "clickedTitle"
},
tagName: "h2",
className: "heading normal",
"implements": [ n, a ],
initialize: function(e) {
var t = this;
t.chunking = e.chunking, r.initialize.apply(t, arguments);
},
formatData: function(e) {
var i = this, n = i.model.attributes;
return t({}, e, {
canCollapse: n.canCollapse,
loadingCompleted: n.loadingCompleted,
isCollapsed: n.isCollapsed,
canDeleteCompleted: n.canDeleteCompleted,
listClassName: n.canCollapse ? "completed-items-heading" : null,
listLabel: n.label,
listTitle: n.title,
listHref: i.model.attributes.groupID.indexOf("todayPlus") >= 0 ? null : "lists/" + i.model.attributes.listID
});
},
render: function() {
var e = this, t = e.model.get("showHeader");
if (t) {
e.el.classList.remove("hidden"), r.render.apply(e, arguments);
var i = e.$("a.groupHeader");
e.renderEmoji(i);
} else e.el.classList.add("hidden");
e.$el.attr({
tabindex: 0,
"aria-role": "list",
"aria-label": e.model.attributes.label
});
},
setActive: function(e) {
var t = this;
e ? (t.el.classList.add("active"), t.el.focus()) : t.el.classList.remove("active");
},
handleNavigation: function() {
var e = this.el.querySelector("a");
e && e.click();
}
});
return i.applyToClass(s), s;
}), define("views/Tasks/Controllers/TaskListViewClickController", [ "application/runtime", "collections/TaskCollection", "wunderbits/helpers/date", "wunderbits/WBViewController", "helpers/animation", "actions/Factory", "project!core/lib/extend" ], function(e, t, i, n, a, o, r) {
var s = e.$, l = n.prototype;
return n.extend({
"implements": {
"click:checkbox": "_toggleDone",
"click:star": "_toggleStarred",
"click:hash": "_handleHashLink",
"dblclick:title": "_editTitle",
"dblclick:duedate": "_editDueDate",
"dblclick:assign": "_editAssignee",
"dblclick:recurring": "_editRepeat",
"dblclick:comments": "openComments",
"click:task": "onClickItem",
"dblclick:task": "onClickItem"
},
ignoreTargets: [ ".taskItem-titleWrapper-title", ".taskItem-duedate", ".task-recurrence", ".taskItem-assign" ],
initialize: function() {
var e = this;
e.starTask = o.starTask(), e.completeTask = o.completeTask(), l.initialize.apply(e, arguments);
},
_getModelForID: function(e) {
return this.view.collection.get(e);
},
_toggleDone: function(t, i) {
t && t.stopPropagation(), t && t.preventDefault();
var n = this;
if (!n.view.isAnimating()) {
var o = t ? s(t.target).closest(".taskItem") : i ? s(i) : null, r = o.attr("rel"), l = a.animateOptions("completion"), d = n.completeTask.toggleCompleted([ r ], l)[0], c = !!t;
if (c) {
var u = "analytics:Tasks:" + (d ? "markDone" : "unmarkDone");
e.trigger(u, "taskItem");
}
l && l.animations.run();
}
},
_toggleStarred: function(t) {
var i = this;
if (t && t.stopPropagation(), t && t.preventDefault(), !i.view.isAnimating()) {
var n = s(t.target).closest(".taskItem"), o = n.attr("rel"), l = "true" === e.settings.attributes.behavior_star_tasks_to_top, d = {
moveToTop: l
}, c = l && a.animateOptions("starred");
c && (d = r(d, c)), i.starTask.toggleStarred([ o ], d), c && c.animations.run();
}
},
_handleHashLink: function(t) {
var i, n = this;
if (t.shiftKey) {
var a = n.view.$(t.target).text(), o = e.currentSearchTerm || "", r = o.indexOf(a) >= 0;
r || "search" !== n.currentFilter ? e.listId && (i = a + " list=" + e.listId) : i = o + " " + a, 
i && (e.trigger("route:search/" + encodeURIComponent(i)), t.stopPropagation(), t.preventDefault());
}
},
_editTitle: function(t) {
var i = this;
if (t.stopPropagation(), s(t.target).hasClass("taskItem-duedate")) return void i._editDueDate(t);
if (s(t.target).hasClass("task-recurring")) return void i._editRepeat(t);
var n = s(t.target).closest(".taskItem"), a = n.attr("rel"), o = i._getModelForID(a);
o && e.trigger("route:" + o.route("/title/edit"));
},
_editDueDate: function(t) {
var i = this;
t.stopPropagation();
var n = s(t.target).closest(".taskItem"), a = n.attr("rel"), o = i._getModelForID(a);
i.when(i.view.detailPromise).then(function() {
e.trigger("route:" + o.route("/duedate/edit"));
});
},
_editAssignee: function(t) {
var i = this;
t.stopPropagation();
var n = s(t.target).closest(".taskItem"), a = n.attr("rel"), o = i._getModelForID(a);
i.when(i.view.detailPromise).then(function() {
e.trigger("route:" + o.route("/assignee/edit"));
});
},
_editRepeat: function(t) {
var i = this;
t.stopPropagation();
var n = s(t.target).closest(".taskItem"), a = n.attr("rel"), o = i._getModelForID(a);
i.when(i.view.detailPromise).then(function() {
e.trigger("route:" + o.route("/duedate/edit")), setTimeout(function() {
s("#edit-repeat-frequency").focus();
}, 500);
});
},
openComments: function(t) {
var i = this;
t.stopPropagation();
var n = s(t.target).closest(".taskItem"), a = n.attr("rel"), o = i._getModelForID(a);
i.when(i.view.detailPromise).then(function() {
e.trigger("route:" + o.route("/comments/edit"));
});
},
onClickItem: function(t) {
var i = this, n = s(t.target);
if (n.hasClass("linkout")) return void (e.clickedLinkOut = !0);
if (e.clickedLinkOut = !1, t.preventDefault(), !i.view.isAnimating()) {
var a = n.closest(".taskItem"), o = a.attr("rel"), r = i._getModelForID(o);
if (r) {
var l = i.view.collection, d = t.altKey || t.metaKey;
d ? l && i.view.taskSelection.toggleSelection(r, l) : t.shiftKey ? l && i.view.taskSelection.updateRange(r, l) : "dblclick" === t.type ? (r.isSelected() && e.trigger("route:" + r.route()), 
i.view.taskSelection.deselectAllAndSelectActive()) : (i.view.taskSelection.clearSelection(), 
l && i.view.taskSelection.addToSelection(r, l)), e.trigger("focus:set", "browser");
}
}
}
});
}), define("views/Tasks/Controllers/TaskListViewDragController", [ "wunderbits/WBViewController", "actions/Factory", "vendor/moment" ], function(e, t, i) {
var n = e.prototype;
return e.extend({
"implements": {
tasksDropped: "_handleTaskDrop",
drag: "_handleAdjustSelectionOnDrag",
tasksDroppedToComplete: "_completeTasks",
tasksDroppedToMoveToList: "_moveTasksToList"
},
initialize: function() {
var e = this;
e.reparentTask = t.reparentTask(), e.repositionTask = t.repositionTask(), e.completeTask = t.completeTask(), 
e.taskLookup = t.taskLookup(), e.taskDue = t.taskDue(), n.initialize.apply(e, arguments);
},
_getListId: function() {
var e = this, t = e.view.collection.at(0), i = t.attributes.list_id;
return i;
},
_handleTaskDrop: function(e, t, i) {
var n = this;
n.repositionTask.moveTasksBetweenIds(n._getListId(), e, t, i, {
fromDND: !0
});
},
_handleAdjustSelectionOnDrag: function(e) {
var t = this, i = t.taskLookup.getTaskModel(e), n = t.view.taskSelection;
i && !i.isSelected() && (n.clearSelection(), n.addToSelection(i, t.view.collection));
},
_moveTasksToList: function(e) {
var t = this, n = /todayPlus/, a = t.model.attributes.groupID;
if (n.test(a)) {
var o = parseInt(a.replace(n, ""), 10), r = i().sod().add("days", o), s = !0;
t.taskDue.setTasksDueAt(e, r, null, null, s);
} else t.reparentTask.moveTasksToList(t._getListId(), e);
},
_completeTasks: function(e) {
var t = this;
t.completeTask.completeTasks(e);
}
});
}), define("views/Tasks/Controllers/TaskListViewItemController", [ "application/runtime", "wunderbits/WBViewController" ], function(e, t) {
return t.extend({
"implements": {
"change:taskAttributes": "updateARIA",
"change:title": "updateTitle",
"change:starred": "updateStarred",
"change:completed": "updateCompleted",
"change:subtaskCompletion": "updateSubtaskProgress",
"change:attachmentIcon": "updateAttachmentIcon",
"change:hasUnreadComments": "updateUnreadCommentsBubble",
"change:hasComments": "updateCommentsBubble",
"change:assignee_id": "updateAssigned",
"change:dateData": "updateDate",
"change:list_id": "updateDateLabel"
},
getSubview: function(e) {
return this.view.getSubview(e);
},
callOnTaskView: function(e, t, i) {
var n = this, a = n.getSubview(e.id);
a && a[t].apply(a, i || []);
},
updateARIA: function(e) {
this.callOnTaskView(e, "renderAriaLabel");
},
updateTitle: function(e) {
this.callOnTaskView(e, "renderTitle");
},
updateStarred: function(e, t) {
this.callOnTaskView(e, "renderStarredIcon", [ t ]);
},
updateCompleted: function(t, i) {
var n = this;
e.state.attributes.inSearchState && n.callOnTaskView(t, "renderCompleted", [ i ]);
},
updateSubtaskProgress: function(e) {
this.callOnTaskView(e, "renderSubtaskProgress");
},
updateAttachmentIcon: function(e) {
this.callOnTaskView(e, "renderAttachmentIcon");
},
updateUnreadCommentsBubble: function(e) {
this.callOnTaskView(e, "renderUnreadCommentsBubble");
},
updateCommentsBubble: function(e) {
this.callOnTaskView(e, "renderCommentsBubble");
},
updateAssigned: function(e) {
this.callOnTaskView(e, "renderAssignee");
},
updateDate: function(e) {
this.callOnTaskView(e, "updateDueDateAndRepeat");
},
updateDateLabel: function(t) {
"week" === e.listId && this.callOnTaskView(t, "renderDateLabel");
}
});
}), define("views/Tasks/Controllers/TaskItemViewModelController", [ "wunderbits/WBViewController" ], function(e) {
return e.extend({
"implements": {
"change:selected": "updateSelected"
},
updateSelected: function() {
var e = this;
e.view.renderSelected(e.model.isSelected());
}
});
}), define("wunderbits/helpers/links", [ "./tokenizer" ], function(e) {
var t = /^((ht|f)tps?)?:\/\//;
return e.extend({
validateTLD: !0,
invalidLeadingChars: /[#@\.\/\\]/,
validationRegExp: /^((ht|f)tps?:\/\/)?([\w\-\.]+\.(\w{2,6}))(:\d+)?/,
extractionRegExp: /(?:(?:ht|f)tps?:\/\/)?(?:[\w\-\.]+\.(?:[a-z]{2,6}))(?::\d+|\S+)?(?:\/[\S]*|\b)/g,
createNode: function(e) {
var i = document.createElement("a");
i.className = "linkout", i.target = "_blank";
var n = e;
return t.test(n) || (n = "http://" + n), i.href = n, i.textContent = e, i;
},
extractLinks: function(e) {
return this.extractTokens(e);
}
});
}), define("wunderbits/mixins/LinkingViewMixin", [ "../helpers/links", "./DomTreeMixin" ], function(e, t) {
return t.extend({
renderLinks: function(t) {
return this.renderTokens(t, e);
}
});
}), define("wunderbits/mixins/EmailLinkingViewMixin", [ "../helpers/email", "./DomTreeMixin" ], function(e, t) {
return t.extend({
renderEmails: function(t) {
return this.renderTokens(t, e);
}
});
}), define("wunderbits/helpers/tag", [ "./tokenizer" ], function(e) {
return e.extend({
invalidLeadingChars: /[\w\/\?=&]/,
validationRegExp: /^#[^\s$]+/,
extractionRegExp: /#[^\s$]+/g,
validateTLD: !1,
createNode: function(e) {
var t = this, i = document.createElement("a");
return i.className = "hash linkout", i.className += " " + t.getHashClass(e), i.href = "#/search/" + encodeURIComponent(e), 
i.textContent = e, i;
},
getHashClass: function(e) {
var t = e.replace(/^#/, "hash-");
return t;
}
});
}), define("wunderbits/mixins/TaggingViewMixin", [ "../helpers/tag", "./DomTreeMixin" ], function(e, t) {
return t.extend({
renderTags: function(t) {
return this.renderTokens(t, e);
}
});
}), define("/templates/taskItem.js", {
name: "taskItem",
data: {
"1": function() {
return "checked";
},
"3": function() {
return "hidden";
},
"5": function() {
return ' <div class="avatar no-avatar small"/> ';
},
"7": function() {
return "task-recurring";
},
"9": function() {
return "overdue";
},
"11": function(e, t, i, n) {
var a, o, r = "function";
return o = t.due_date || e && e.due_date, a = typeof o === r ? o.call(e, {
name: "due_date",
hash: {},
data: n
}) : o, a || 0 === a ? a : "";
},
"13": function() {
return "has-unread-comments";
},
"15": function(e, t, i, n) {
var a, o = ' <div class="taskItem-titleMeta-info">';
return a = t["if"].call(e, e && e.completedDate, {
name: "if",
hash: {},
fn: this.program(16, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), a = t["if"].call(e, e && e.completedBy, {
name: "if",
hash: {},
fn: this.program(18, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), o + "</div>";
},
"16": function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression;
return r((a = t.completedDate || e && e.completedDate, typeof a === o ? a.call(e, {
name: "completedDate",
hash: {},
data: n
}) : a)) + " ";
},
"18": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return r((a = t.localized || e && e.localized || o, a.call(e, "label_by_$", e && e.completedBy, {
name: "localized",
hash: {},
data: n
})));
},
"20": function() {
return "transparent";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = "function", d = '<div class="taskItem-body"> <a class="taskItem-checkboxWrapper" tabindex="-1" aria-hidden="true"> <span class="checkBox ';
return a = t["if"].call(e, e && e.done, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d += '"/> </a> <a class="taskItem-star" tabindex="-1" aria-hidden="true"> <span class="wundercon starred right ', 
a = t["if"].call(e, e && e.starred, {
name: "if",
hash: {},
fn: this.program(3, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d += '"/> <span class="icon task-starred right ', 
a = t.unless.call(e, e && e.starred, {
name: "unless",
hash: {},
fn: this.program(3, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d += '"/> </a> <a class="taskItem-assign ', a = t.unless.call(e, e && e.isAssigned, {
name: "unless",
hash: {},
fn: this.program(3, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d += ' right" tabindex="-1" aria-hidden="true"> ', 
a = t["if"].call(e, e && e.isAssigned, {
name: "if",
hash: {},
fn: this.program(5, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d += ' </a> <a class="wundercon recurrence ', a = t["if"].call(e, e && e.recurrence_type, {
name: "if",
hash: {},
fn: this.program(7, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d += ' right" tabindex="-1" aria-hidden="true"></a> <a class="taskItem-duedate ', 
a = t["if"].call(e, e && e.overdue, {
name: "if",
hash: {},
fn: this.program(9, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d += " right ", a = t.unless.call(e, e && e.hasDueDate, {
name: "unless",
hash: {},
fn: this.program(3, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d += '" tabindex="-1" aria-hidden="true"> ', a = t["if"].call(e, e && e.due_date, {
name: "if",
hash: {},
fn: this.program(11, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d += ' </a> <span class="attachment-wrapper right ', 
a = t.unless.call(e, e && e.hasAttachment, {
name: "unless",
hash: {},
fn: this.program(3, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d += '"> ' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "attachment", {
name: "symbol",
hash: {},
data: n
}))) + ' </span> <span class="conversations-wrapper right ', a = t.unless.call(e, e && e.hasComments, {
name: "unless",
hash: {},
fn: this.program(3, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d += " right ", a = t["if"].call(e, e && e.hasUnreadComments, {
name: "if",
hash: {},
fn: this.program(13, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d += '"> ' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "conversations-small", {
name: "symbol",
hash: {},
data: n
}))) + ' </span> <div class="taskItem-titleWrapper" tabindex="-1" aria-hidden="true"> <span class="taskItem-titleWrapper-title">' + s((o = t.title || e && e.title, 
typeof o === l ? o.call(e, {
name: "title",
hash: {},
data: n
}) : o)) + "</span> ", a = t["if"].call(e, e && e.done, {
name: "if",
hash: {},
fn: this.program(15, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d += ' </div> <div class="taskItem-progress ', a = t.unless.call(e, e && e.hasSubtasks, {
name: "unless",
hash: {},
fn: this.program(20, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d + '"> <span class="taskItem-progress-bar"></span> </div> </div> ';
},
useData: !0
}
}), define("/templates/symbols/attachment.js", {
name: "symbols/attachment",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<svg class="attachment" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>attachment</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="attachment" sketch:type="MSArtboardGroup" > <path d="M13.4075,5.2925 C13.0275,4.9125 12.3675,4.9125 11.9875,5.2925 L10.3075,6.9925 L8.7475,6.9925 C7.8075,6.9925 6.9475,7.3525 6.2675,8.0125 L5.1475,9.1325 C5.0675,9.2325 5.0075,9.3525 5.0075,9.4925 C5.0075,9.6125 5.0675,9.7525 5.1475,9.8325 L7.3075,11.9925 L5.1475,14.1325 C4.9675,14.3325 4.9675,14.6525 5.1475,14.8525 C5.2475,14.9525 5.3875,14.9925 5.5075,14.9925 C5.6475,14.9925 5.7675,14.9525 5.8675,14.8525 L8.0075,12.6925 L10.1675,14.8525 C10.2475,14.9525 10.3875,14.9925 10.5075,14.9925 C10.6475,14.9925 10.7675,14.9525 10.8675,14.8525 L11.9875,13.7325 C12.6475,13.0725 13.0075,12.1925 13.0075,11.2525 L13.0075,9.6925 L14.7075,8.0125 C15.0875,7.6125 15.0875,6.9725 14.7075,6.5925 L13.4075,5.2925 Z M13.9875,7.2925 L12.1675,9.1325 C12.0675,9.2325 12.0075,9.3525 12.0075,9.4925 L12.0075,11.2525 C12.0075,11.9125 11.7475,12.5525 11.2875,13.0125 L10.5075,13.7925 L6.2075,9.4925 L6.9875,8.7125 C7.4475,8.2525 8.0875,7.9925 8.7475,7.9925 L10.5075,7.9925 C10.6475,7.9925 10.7675,7.9325 10.8675,7.8325 L12.7075,6.0125 L13.9875,7.2925 Z" id="Q" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/symbols/conversations-small.js", {
name: "symbols/conversations-small",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<svg class="conversations-small" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>small-comment</title> <desc>Created with Sketch.</desc> <defs></defs> <g class="outlined" sketch:type="MSArtboardGroup"> <path d="M6.26,15 C5.98,15 5.68,14.96 5.38,14.9 C5.18,14.84 5.04,14.68 5,14.48 C4.98,14.26 5.08,14.06 5.26,13.96 C5.78,13.68 6.02,13.3 6,12.8 C6,12.48 5.84,12.16 5.64,11.76 C5.36,11.18 5,10.48 5,9.5 C5,7.02 7.24,5 10,5 C12.76,5 15,7.02 15,9.5 C15,11.98 12.76,14 10,14 C9.58,14 9.16,13.96 8.76,13.86 C8.38,14.28 7.56,15 6.26,15 L6.26,15 Z M10,6 C7.8,6 6,7.56 6,9.5 C6,10.24 6.28,10.78 6.54,11.32 C6.78,11.8 7,12.26 7,12.78 C7,13.22 6.9,13.62 6.7,13.96 C7.64,13.78 8.12,13.06 8.14,13.02 C8.26,12.84 8.5,12.76 8.7,12.82 C9.14,12.94 9.56,13 10,13 C12.2,13 14,11.42 14,9.5 C14,7.56 12.2,6 10,6 L10,6 Z" sketch:type="MSShapeGroup"></path> </g> <g class="filled" sketch:type="MSArtboardGroup"> <path d="M6.26,15 C5.98,15 5.68,14.96 5.38,14.9 C5.18,14.84 5.04,14.68 5,14.48 C4.98,14.28 5.08,14.08 5.26,13.98 C5.78,13.68 6.02,13.32 6,12.8 C6,12.5 5.84,12.16 5.64,11.78 C5.36,11.2 5,10.48 5,9.5 C5,7.02 7.24,5 10,5 C12.76,5 15,7.02 15,9.5 C15,11.98 12.76,14 10,14 C9.58,14 9.16,13.96 8.76,13.88 C8.38,14.28 7.56,15 6.26,15 L6.26,15 Z" opacity="0" sketch:type="MSShapeGroup"></path> </g> </svg>';
},
useData: !0
}
}), define("/styles/taskItem.js", {
name: "taskItem",
data: '.taskItem{height:38px;list-style:none;}.taskItem.active .taskItem-body,.taskItem.selected .taskItem-body{background:#e1f2fe}.taskItem.blur{filter:blur(50px);opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}.taskItem.collapsed{height:0;opacity:.6;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";filter:alpha(opacity=60);overflow:hidden}.taskItem.first-task-position{padding-top:36px !important}.taskItem.first-task-position-next{padding-bottom:36px !important}.taskItem.animate-up{height:0;opacity:.6;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";filter:alpha(opacity=60);overflow:hidden !important}.taskItem.animate-down{height:38px !important;opacity:1;-ms-filter:none;filter:none}.taskItem.animate-empty-task{margin-top:40px}.taskItem.animate-empty-task-close{margin-top:0}.taskItem.fall-out{z-index:5 !important;margin-top:55px;opacity:0 !important;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)" !important;filter:alpha(opacity=0) !important}.taskItem.return-up{margin-top:-55px;opacity:0 !important;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)" !important;filter:alpha(opacity=0) !important}.taskItem.fall-in{opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}.taskItem.scale-up{-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-o-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1)}.taskItem.dragging{z-index:9999 !important;width:300px;overflow:visible;}.taskItem.dragging .duedate{display:none}.taskItem.dragging.is-over-sidebar .taskItem-body{left:150px}.taskItem.dragging.is-over-sidebar .badge{right:-155px}.taskItem.done{opacity:.6;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";filter:alpha(opacity=60);list-style:none;}.taskItem.done .taskItem-titleWrapper{padding:5px 0 11px 0}.taskItem.done .taskItem-titleMeta-info{font-size:10px;line-height:11px;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.taskItem.done .taskItem-titleWrapper-title{text-decoration:line-through;text-shadow:none}.taskItem.done .taskItem-duedate,.taskItem.done .wundercon.star,.taskItem.done .wundercon.recurring{cursor:default}.taskItem-body{background:#fff;-webkit-box-shadow:0 1px 2px rgba(0,0,0,0.3);box-shadow:0 1px 2px rgba(0,0,0,0.3);-webkit-border-radius:3px;border-radius:3px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;list-style:none;position:relative;height:36px;overflow:hidden;}.taskItem-body .taskItem-checkboxWrapper{position:absolute;z-index:1;left:10px;top:10px}.taskItem-body .icon.task-starred,.taskItem-body .wundercon.starred{position:relative;z-index:1;margin-right:8px;margin-left:6px}.taskItem-body .wundercon.starred{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-size:16px;color:rgba(0,0,0,0.2);width:21px;height:36px;padding-top:9px;}.taskItem-body .wundercon.starred:hover{color:rgba(0,0,0,0.2)}.taskItem-body .wundercon.recurrence{color:#186ab2;font-size:16px;display:none;position:relative;z-index:1;}.taskItem-body .wundercon.recurrence.task-recurring{display:block;margin-top:9px;}.taskItem-body .wundercon.recurrence.task-recurring:hover{cursor:default}.taskItem-body .wundercon.recurrence.overdue{color:#b3312d}.taskItem-body .conversations-wrapper{fill:rgba(0,0,0,0.3);margin-top:8px;position:relative;z-index:1;}.taskItem-body .conversations-wrapper.has-unread-comments svg g:first-child{display:none}.taskItem-body .conversations-wrapper.has-unread-comments svg g:last-child path{opacity:1;-ms-filter:none;filter:none;fill:#186ab2}.taskItem-body .attachment-wrapper{display:inline-block;fill:rgba(0,0,0,0.3);width:18px;position:relative;z-index:1;margin-top:8px;width:18px}.taskItem-assign{position:relative;z-index:1;float:right;margin:7px 3px 0 7px}.taskItem-titleWrapper{white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;z-index:1;display:block;margin:0 0 0 36px;padding:11px 0;line-height:14px;color:#262626;position:relative;cursor:default;}.taskItem-titleWrapper a{color:#186ab2;}.taskItem-titleWrapper a.hash-blocked,.taskItem-titleWrapper a.hash-bug,.taskItem-titleWrapper a.hash-critical,.taskItem-titleWrapper a.hash-more-information,.taskItem-titleWrapper a.hash-regression{color:#d62822}.taskItem-titleWrapper a.hash-merged{color:#f88017}.taskItem-titleWrapper a.hash-in-qa{color:#3a7402}.taskItem-titleWrapper a.hash-in-progress,.taskItem-titleWrapper a.hash-in-review{color:#d9a121}.taskItem-titleWrapper a.hash-blocked,.taskItem-titleWrapper a.hash-critical,.taskItem-titleWrapper a.hash-more-information{font-weight:bold}.taskItem-progress{position:absolute;top:0;left:0;right:0;height:100%;opacity:1;-ms-filter:none;filter:none;-webkit-transition:opacity 225ms ease;-moz-transition:opacity 225ms ease;-o-transition:opacity 225ms ease;-ms-transition:opacity 225ms ease;transition:opacity 225ms ease}.taskItem-progress-bar{z-index:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;top:0;height:100%;width:0%;-webkit-transition:width 225ms ease;-moz-transition:width 225ms ease;-o-transition:width 225ms ease;-ms-transition:width 225ms ease;transition:width 225ms ease;border-right:1px solid #abd2ff;background-image:-webkit-linear-gradient(right, rgba(171,210,255,0.5), rgba(171,210,255,0));background-image:-moz-linear-gradient(right, rgba(171,210,255,0.5), rgba(171,210,255,0));background-image:-o-linear-gradient(right, rgba(171,210,255,0.5), rgba(171,210,255,0));background-image:-ms-linear-gradient(right, rgba(171,210,255,0.5), rgba(171,210,255,0));background-image:linear-gradient(to left, rgba(171,210,255,0.5), rgba(171,210,255,0));}.taskItem-progress-bar.completed{-webkit-border-radius:3px;border-radius:3px;border-color:transparent;border-right:0}.taskItem-duedate{position:relative;z-index:1;font-size:11px;font-weight:bold;color:#186ab2;line-height:14px;margin:11px 3px 0 7px;text-shadow:0 1px 0 rgba(255,255,255,0.8);max-width:200px;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;}.taskItem-duedate.overdue{color:#b3312d}.taskItem-duedate:hover{cursor:default}.taskItem-duedate:hover{cursor:default}.clone-title{color:#262626;}.clone-title a{color:#186ab2}html[dir=rtl] li.taskItem .taskItem-body .icon.task-starred,html[dir=rtl] li.taskItem .taskItem-body .wundercon.starred{margin-right:6px;margin-left:8px}html[dir=rtl] li.taskItem .taskItem-body .taskItem-checkboxWrapper{left:initial;right:10px}html[dir=rtl] li.taskItem .taskItem-star .icon{margin-right:4px;margin-left:8px;}html[dir=rtl] li.taskItem .taskItem-star .icon.starred{margin-left:6px}html[dir=rtl] li.taskItem .taskItem-titleWrapper{margin-left:0;margin-right:36px}html[dir=rtl] li.taskItem .taskItem-duedate{margin-left:3px;margin-right:7px}'
}), define("/styles/checkBox.js", {
name: "checkBox",
data: ".checkBox{width:14px;height:14px;-webkit-border-radius:3px;border-radius:3px;border:1px solid rgba(0,0,0,0.26);display:inline-block;background:-webkit-linear-gradient(top, rgba(217,217,215,0), rgba(217,217,215,0.26));background:-moz-linear-gradient(top, rgba(217,217,215,0), rgba(217,217,215,0.26));background:-o-linear-gradient(top, rgba(217,217,215,0), rgba(217,217,215,0.26));background:-ms-linear-gradient(top, rgba(217,217,215,0), rgba(217,217,215,0.26));background:linear-gradient(to bottom, rgba(217,217,215,0), rgba(217,217,215,0.26));position:relative;}.checkBox:active{background:-webkit-linear-gradient(top, rgba(189,189,189,0.26), rgba(217,217,215,0.26));background:-moz-linear-gradient(top, rgba(189,189,189,0.26), rgba(217,217,215,0.26));background:-o-linear-gradient(top, rgba(189,189,189,0.26), rgba(217,217,215,0.26));background:-ms-linear-gradient(top, rgba(189,189,189,0.26), rgba(217,217,215,0.26));background:linear-gradient(to bottom, rgba(189,189,189,0.26), rgba(217,217,215,0.26))}.checkBox.checked:before{font-family:'Wundercon-Pictograms';content:'H';position:absolute;font-size:17px;line-height:17px;bottom:0;left:1px}.checkBox.small{width:12px;height:12px;}.checkBox.small.checked:before{font-size:15px;line-height:15px}.checkBox.big{width:16px;height:16px;}.checkBox.big.checked:before{font-size:19px;line-height:19px}"
}), define("/styles/_animation.js", {
name: "_animation",
data: 'body.animate #stacks.sytem-alert-active{-webkit-transition:200ms top linear !important;-moz-transition:200ms top linear !important;-o-transition:200ms top linear !important;-ms-transition:200ms top linear !important;transition:200ms top linear !important}body.animate #lists li.animate{-webkit-transition:none !important;-moz-transition:none !important;-o-transition:none !important;-ms-transition:none !important;transition:none !important}body.animate #lists li.animate-up,body.animate #lists li.animate-down{-webkit-transition:300ms height !important;-moz-transition:300ms height !important;-o-transition:300ms height !important;-ms-transition:300ms height !important;transition:300ms height !important}body.animate #lists .filters-collection li.touch-edit-disabled{-webkit-transition:200ms opacity linear !important;-moz-transition:200ms opacity linear !important;-o-transition:200ms opacity linear !important;-ms-transition:200ms opacity linear !important;transition:200ms opacity linear !important}body.animate #tasks .addTask .addTask-meta{-webkit-transition:opacity 200ms linear;-moz-transition:opacity 200ms linear;-o-transition:opacity 200ms linear;-ms-transition:opacity 200ms linear;transition:opacity 200ms linear}body.animate #tasks .taskItem.blur{-webkit-transition:295ms all linear;-moz-transition:295ms all linear;-o-transition:295ms all linear;-ms-transition:295ms all linear;transition:295ms all linear}body.animate #tasks .taskItem.animate-down,body.animate #tasks .taskItem.animate-up{-webkit-transition:400ms all !important;-moz-transition:400ms all !important;-o-transition:400ms all !important;-ms-transition:400ms all !important;transition:400ms all !important}body.animate #tasks .taskItem.animate-empty-task{-webkit-transition:all 300ms;-moz-transition:all 300ms;-o-transition:all 300ms;-ms-transition:all 300ms;transition:all 300ms}body.animate #tasks .taskItem.animate-empty-task-close{-webkit-transition:all 300ms;-moz-transition:all 300ms;-o-transition:all 300ms;-ms-transition:all 300ms;transition:all 300ms}body.animate #tasks .taskItem.fall-out{-webkit-transition:all 400ms cubic-bezier(0.57, -0.22, 0.375, 1.055);-moz-transition:all 400ms cubic-bezier(0.57, -0.22, 0.375, 1.055);-o-transition:all 400ms cubic-bezier(0.57, -0.22, 0.375, 1.055);-ms-transition:all 400ms cubic-bezier(0.57, -0.22, 0.375, 1.055);transition:all 400ms cubic-bezier(0.57, -0.22, 0.375, 1.055)}body.animate #tasks .taskItem.return-up{-webkit-transition:all 300ms cubic-bezier(0.35, -0.6, 0.535, 1.045);-moz-transition:all 300ms cubic-bezier(0.35, -0.6, 0.535, 1.045);-o-transition:all 300ms cubic-bezier(0.35, -0.6, 0.535, 1.045);-ms-transition:all 300ms cubic-bezier(0.35, -0.6, 0.535, 1.045);transition:all 300ms cubic-bezier(0.35, -0.6, 0.535, 1.045)}body.animate #tasks .taskItem.fall-in{-webkit-transition:opacity 200ms ease-out;-moz-transition:opacity 200ms ease-out;-o-transition:opacity 200ms ease-out;-ms-transition:opacity 200ms ease-out;transition:opacity 200ms ease-out}body.animate #tasks .taskItem.pop-in-start{opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}body.animate #tasks .taskItem.pop-in{opacity:1;-ms-filter:none;filter:none;-webkit-transition:opacity 100ms ease-in-out;-moz-transition:opacity 100ms ease-in-out;-o-transition:opacity 100ms ease-in-out;-ms-transition:opacity 100ms ease-in-out;transition:opacity 100ms ease-in-out}body.animate.explorer #tasks .taskItem.pop-in{opacity:1 !important;-ms-filter:none;filter:none}body.animate .taskItem.dragging .badge{-webkit-transition:right 200ms ease-out;-moz-transition:right 200ms ease-out;-o-transition:right 200ms ease-out;-ms-transition:right 200ms ease-out;transition:right 200ms ease-out}body.animate .taskItem.dragging .taskItem-body{-webkit-transition:left 200ms ease-out;-moz-transition:left 200ms ease-out;-o-transition:left 200ms ease-out;-ms-transition:left 200ms ease-out;transition:left 200ms ease-out}body.animate #detail .body{-webkit-transition:margin 150ms !important;-moz-transition:margin 150ms !important;-o-transition:margin 150ms !important;-ms-transition:margin 150ms !important;transition:margin 150ms !important}body.animate #detail .files li.uploading{-webkit-animation:fileBounceIn 400ms ease;-moz-animation:fileBounceIn 400ms ease;-o-animation:fileBounceIn 400ms ease;-ms-animation:fileBounceIn 400ms ease;animation:fileBounceIn 400ms ease}body.animate #detail .files li.deleting,body.animate #detail .files li.image.deleting{-webkit-transition:none !important;-moz-transition:none !important;-o-transition:none !important;-ms-transition:none !important;transition:none !important;-webkit-animation:fileBounceOut 400ms ease;-moz-animation:fileBounceOut 400ms ease;-o-animation:fileBounceOut 400ms ease;-ms-animation:fileBounceOut 400ms ease;animation:fileBounceOut 400ms ease;height:0;-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}body.animate #detail .files li.normal-preview.deleting{-webkit-animation:fileImageBounceOut 400ms ease;-moz-animation:fileImageBounceOut 400ms ease;-o-animation:fileImageBounceOut 400ms ease;-ms-animation:fileImageBounceOut 400ms ease;animation:fileImageBounceOut 400ms ease}body.animate #detail .file li .bar{-webkit-transition:width 200ms ease;-moz-transition:width 200ms ease;-o-transition:width 200ms ease;-ms-transition:width 200ms ease;transition:width 200ms ease}body.animate .dialog-wrapper .dialog{will-change:transform;-webkit-animation:dialogSlideIn 250ms cubic-bezier(.175,.885,.32,1.275);-moz-animation:dialogSlideIn 250ms cubic-bezier(.175,.885,.32,1.275);-o-animation:dialogSlideIn 250ms cubic-bezier(.175,.885,.32,1.275);-ms-animation:dialogSlideIn 250ms cubic-bezier(.175,.885,.32,1.275);animation:dialogSlideIn 250ms cubic-bezier(.175,.885,.32,1.275);}body.animate .dialog-wrapper .dialog .show-delete-wrapper{-webkit-transition:all 200ms ease !important;-moz-transition:all 200ms ease !important;-o-transition:all 200ms ease !important;-ms-transition:all 200ms ease !important;transition:all 200ms ease !important;}body.animate .dialog-wrapper .dialog .show-delete-wrapper.invisible{-webkit-transition:all 400ms ease !important;-moz-transition:all 400ms ease !important;-o-transition:all 400ms ease !important;-ms-transition:all 400ms ease !important;transition:all 400ms ease !important}body.animate .dialog-wrapper .dialog.addList{-webkit-animation:dialogSlideIn 250ms ease;-moz-animation:dialogSlideIn 250ms ease;-o-animation:dialogSlideIn 250ms ease;-ms-animation:dialogSlideIn 250ms ease;animation:dialogSlideIn 250ms ease}body.animate .dialog-wrapper .dialog .slide{-webkit-transition:all 200ms linear;-moz-transition:all 200ms linear;-o-transition:all 200ms linear;-ms-transition:all 200ms linear;transition:all 200ms linear}body.animate .dialog-wrapper .dialog .add-pro-teammate{-webkit-transition:opacity 200ms linear;-moz-transition:opacity 200ms linear;-o-transition:opacity 200ms linear;-ms-transition:opacity 200ms linear;transition:opacity 200ms linear}body.animate .dialog-wrapper .dialog .height-adjust{-webkit-transition:height 350ms cubic-bezier(0.175, 0.885, 0.32, 1.275);-moz-transition:height 350ms cubic-bezier(0.175, 0.885, 0.32, 1.275);-o-transition:height 350ms cubic-bezier(0.175, 0.885, 0.32, 1.275);-ms-transition:height 350ms cubic-bezier(0.175, 0.885, 0.32, 1.275);transition:height 350ms cubic-bezier(0.175, 0.885, 0.32, 1.275)}body.animate .dialog-wrapper .dialog .amount{-webkit-transition:margin 100ms linear;-moz-transition:margin 100ms linear;-o-transition:margin 100ms linear;-ms-transition:margin 100ms linear;transition:margin 100ms linear}body.animate .dialog-wrapper .dialog .remove-member{-webkit-animation:fileBounceOut 400ms ease;-moz-animation:fileBounceOut 400ms ease;-o-animation:fileBounceOut 400ms ease;-ms-animation:fileBounceOut 400ms ease;animation:fileBounceOut 400ms ease}body.animate .datepicker ol.months{-webkit-transition:all 150ms linear;-moz-transition:all 150ms linear;-o-transition:all 150ms linear;-ms-transition:all 150ms linear;transition:all 150ms linear}body.animate .popover{will-change:transform;-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);-ms-transform:scale(1);transform:scale(1);-webkit-animation:popoverBounceIn 300ms cubic-bezier(.175,.885,.32,1.275);-moz-animation:popoverBounceIn 300ms cubic-bezier(.175,.885,.32,1.275);-o-animation:popoverBounceIn 300ms cubic-bezier(.175,.885,.32,1.275);-ms-animation:popoverBounceIn 300ms cubic-bezier(.175,.885,.32,1.275);animation:popoverBounceIn 300ms cubic-bezier(.175,.885,.32,1.275);-webkit-transform-origin:center top;-moz-transform-origin:center top;-o-transform-origin:center top;-ms-transform-origin:center top;transform-origin:center top;}body.animate .popover#user-popover{-webkit-transform-origin:left top;-moz-transform-origin:left top;-o-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top}body.animate .popover#notifications-popover{-webkit-transform-origin:105px top;-moz-transform-origin:105px top;-o-transform-origin:105px top;-ms-transform-origin:105px top;transform-origin:105px top}body.animate .popover.backgrounds{-webkit-transform-origin:left center;-moz-transform-origin:left center;-o-transform-origin:left center;-ms-transform-origin:left center;transform-origin:left center}body.animate .popover.error{-webkit-transform-origin:left bottom;-moz-transform-origin:left bottom;-o-transform-origin:left bottom;-ms-transform-origin:left bottom;transform-origin:left bottom}body.animate .popover .reminder-date-picker,body.animate .popover .due-date-picker{-webkit-transition:200ms -webkit-transform;-moz-transition:200ms -moz-transform;-ms-transition:200ms -ms-transform}body.animate .popover .popover-sharing .page{-webkit-transition:all 250ms ease-in-out;-moz-transition:all 250ms ease-in-out;-o-transition:all 250ms ease-in-out;-ms-transition:all 250ms ease-in-out;transition:all 250ms ease-in-out}body.animate .drag-clone.drag-clone-reset{-webkit-transition:height 200ms, width 200ms, color 200ms, background 200ms, padding 200ms, box-shadow 200ms, text-shadow 200ms, border-top 200ms;-moz-transition:height 200ms, width 200ms, color 200ms, background 200ms, padding 200ms, box-shadow 200ms, text-shadow 200ms, border-top 200ms;-o-transition:height 200ms, width 200ms, color 200ms, background 200ms, padding 200ms, box-shadow 200ms, text-shadow 200ms, border-top 200ms;-ms-transition:height 200ms, width 200ms, color 200ms, background 200ms, padding 200ms, box-shadow 200ms, text-shadow 200ms, border-top 200ms;transition:height 200ms, width 200ms, color 200ms, background 200ms, padding 200ms, box-shadow 200ms, text-shadow 200ms, border-top 200ms}body.animate.nodewebkit.platform-windows .dialog-wrapper,body.animate.nodewebkit.platform-windows .dialog,body.animate.nodewebkit.platform-windows .popover{-webkit-animation:none !important;-moz-animation:none !important;-o-animation:none !important;-ms-animation:none !important;animation:none !important;-webkit-transition:none !important;-moz-transition:none !important;-o-transition:none !important;-ms-transition:none !important;transition:none !important}html #wunderlist-base .main-interface.detail-visible #detail.animated{-webkit-transition:none 150ms ease-in-out;-moz-transition:none 150ms ease-in-out;-o-transition:none 150ms ease-in-out;-ms-transition:none 150ms ease-in-out;transition:none 150ms ease-in-out}html[dir=ltr] #wunderlist-base .main-interface.detail-visible #detail.animated{-webkit-transition-property:right;-moz-transition-property:right;-o-transition-property:right;-ms-transition-property:right;transition-property:right}html[dir=rtl] #wunderlist-base .main-interface.detail-visible #detail.animated{-webkit-transition-property:left;-moz-transition-property:left;-o-transition-property:left;-ms-transition-property:left;transition-property:left}@-moz-keyframes popoverBounceIn{0%{-webkit-transform:scale(.6);-moz-transform:scale(.6);-o-transform:scale(.6);-ms-transform:scale(.6);transform:scale(.6)}100%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}}@-webkit-keyframes popoverBounceIn{0%{-webkit-transform:scale(.6);-moz-transform:scale(.6);-o-transform:scale(.6);-ms-transform:scale(.6);transform:scale(.6)}100%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}}@-o-keyframes popoverBounceIn{0%{-webkit-transform:scale(.6);-moz-transform:scale(.6);-o-transform:scale(.6);-ms-transform:scale(.6);transform:scale(.6)}100%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}}@-ms-keyframes popoverBounceIn{0%{-webkit-transform:scale(.6);-moz-transform:scale(.6);-o-transform:scale(.6);-ms-transform:scale(.6);transform:scale(.6)}100%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}}@keyframes popoverBounceIn{0%{-webkit-transform:scale(.6);-moz-transform:scale(.6);-o-transform:scale(.6);-ms-transform:scale(.6);transform:scale(.6)}100%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}}@-moz-keyframes fileBounceIn{0%{-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}60%{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-o-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05)}80%{-webkit-transform:scale(.95);-moz-transform:scale(.95);-o-transform:scale(.95);-ms-transform:scale(.95);transform:scale(.95)}100%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}}@-webkit-keyframes fileBounceIn{0%{-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}60%{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-o-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05)}80%{-webkit-transform:scale(.95);-moz-transform:scale(.95);-o-transform:scale(.95);-ms-transform:scale(.95);transform:scale(.95)}100%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}}@-o-keyframes fileBounceIn{0%{-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}60%{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-o-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05)}80%{-webkit-transform:scale(.95);-moz-transform:scale(.95);-o-transform:scale(.95);-ms-transform:scale(.95);transform:scale(.95)}100%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}}@-ms-keyframes fileBounceIn{0%{-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}60%{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-o-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05)}80%{-webkit-transform:scale(.95);-moz-transform:scale(.95);-o-transform:scale(.95);-ms-transform:scale(.95);transform:scale(.95)}100%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}}@keyframes fileBounceIn{0%{-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}60%{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-o-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05)}80%{-webkit-transform:scale(.95);-moz-transform:scale(.95);-o-transform:scale(.95);-ms-transform:scale(.95);transform:scale(.95)}100%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}}@-moz-keyframes fileBounceOut{0%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);-ms-transform:scale(1);transform:scale(1);height:60px}20%{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-o-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05)}70%{-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0);height:60px}100%{height:0;-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}}@-webkit-keyframes fileBounceOut{0%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);-ms-transform:scale(1);transform:scale(1);height:60px}20%{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-o-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05)}70%{-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0);height:60px}100%{height:0;-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}}@-o-keyframes fileBounceOut{0%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);-ms-transform:scale(1);transform:scale(1);height:60px}20%{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-o-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05)}70%{-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0);height:60px}100%{height:0;-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}}@-ms-keyframes fileBounceOut{0%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);-ms-transform:scale(1);transform:scale(1);height:60px}20%{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-o-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05)}70%{-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0);height:60px}100%{height:0;-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}}@keyframes fileBounceOut{0%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);-ms-transform:scale(1);transform:scale(1);height:60px}20%{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-o-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05)}70%{-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0);height:60px}100%{height:0;-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}}@-moz-keyframes fileImageBounceOut{0%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);-ms-transform:scale(1);transform:scale(1);height:152px}20%{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-o-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05)}70%{-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0);height:152px}100%{height:0;-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}}@-webkit-keyframes fileImageBounceOut{0%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);-ms-transform:scale(1);transform:scale(1);height:152px}20%{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-o-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05)}70%{-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0);height:152px}100%{height:0;-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}}@-o-keyframes fileImageBounceOut{0%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);-ms-transform:scale(1);transform:scale(1);height:152px}20%{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-o-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05)}70%{-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0);height:152px}100%{height:0;-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}}@-ms-keyframes fileImageBounceOut{0%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);-ms-transform:scale(1);transform:scale(1);height:152px}20%{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-o-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05)}70%{-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0);height:152px}100%{height:0;-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}}@keyframes fileImageBounceOut{0%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);-ms-transform:scale(1);transform:scale(1);height:152px}20%{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-o-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05)}70%{-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0);height:152px}100%{height:0;-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}}@-moz-keyframes dialogSlideIn{0%{-webkit-transform:translateY(-100%);-moz-transform:translateY(-100%);-o-transform:translateY(-100%);-ms-transform:translateY(-100%);transform:translateY(-100%)}100%{-webkit-transform:translateY(0);-moz-transform:translateY(0);-o-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes dialogSlideIn{0%{-webkit-transform:translateY(-100%);-moz-transform:translateY(-100%);-o-transform:translateY(-100%);-ms-transform:translateY(-100%);transform:translateY(-100%)}100%{-webkit-transform:translateY(0);-moz-transform:translateY(0);-o-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0)}}@-o-keyframes dialogSlideIn{0%{-webkit-transform:translateY(-100%);-moz-transform:translateY(-100%);-o-transform:translateY(-100%);-ms-transform:translateY(-100%);transform:translateY(-100%)}100%{-webkit-transform:translateY(0);-moz-transform:translateY(0);-o-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0)}}@-ms-keyframes dialogSlideIn{0%{-webkit-transform:translateY(-100%);-moz-transform:translateY(-100%);-o-transform:translateY(-100%);-ms-transform:translateY(-100%);transform:translateY(-100%)}100%{-webkit-transform:translateY(0);-moz-transform:translateY(0);-o-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0)}}@keyframes dialogSlideIn{0%{-webkit-transform:translateY(-100%);-moz-transform:translateY(-100%);-o-transform:translateY(-100%);-ms-transform:translateY(-100%);transform:translateY(-100%)}100%{-webkit-transform:translateY(0);-moz-transform:translateY(0);-o-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0)}}'
}), define("views/Tasks/TaskItemView", [ "application/runtime", "vendor/moment", "wunderbits/helpers/date", "collections/UserCollection", "collections/ListCollection", "wunderbits/BaseView", "wunderbits/WBViewPresenter", "views/AvatarView", "views/Tasks/Controllers/TaskItemViewModelController", "wunderbits/mixins/LinkingViewMixin", "wunderbits/mixins/EmailLinkingViewMixin", "wunderbits/mixins/TaggingViewMixin", "wunderbits/mixins/UnicodeEmojiViewMixin", "helpers/domtools", "template!taskItem", "partial!symbols/attachment", "partial!symbols/conversations-small", "style!taskItem", "style!checkBox", "style!_animation" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m, g, f, b, h, v, _, w) {
var k = o.prototype, x = r.prototype, y = r.extend({
template: g,
"implements": [ l ],
renderData: {
completedBy: w,
completedDate: w,
done: w,
hasAttachment: w,
hasComments: w,
hasDueDate: w,
hasSubtasks: w,
hasUnreadComments: w,
isAssigned: w,
recurrence_type: w,
starred: w,
subtaskProgressEnabled: w,
title: w
},
formatData: function(e) {
var t = this, i = t.model, n = i.attributes;
if (e.title = n.title, e.recurrence_type = "none" === n.recurrence_type ? !1 : n.recurrence_type, 
e.hasAttachment = i.hasAttachment(), e.hasComments = i.hasComments(), e.hasUnreadComments = i.hasUnreadComments(), 
e.done = n.completed, e.starred = n.starred, e.hasSubtasks = i.hasSubtasks(), e.hasDueDate = i.hasDueDate(), 
e.isAssigned = i.isAssigned(), n.completed_at) {
e.completedDate = t.model.getHumanFormattedDates().completed_on;
var a = n.completed_by_id, o = t.users.get(a);
e.completedBy = o && o.attributes.name;
}
return e;
},
tagName: "li",
attributes: {
tabindex: 0
},
className: "taskItem",
styles: [ h, v, _ ],
events: {
"click .taskItem-duedate, .icon.task-recurring": "_ignoreDetailCall"
},
lists: new a("/lists/all"),
users: new n("/users/all"),
initialize: function() {
var t = this;
k.initialize.apply(t, arguments), t.createObserveBindings(), t.bindTo(e.settings, "change:date_format", function() {
t.updateDueDateAndRepeat();
}), [ "selected" ].forEach(function(e) {
e = "change:" + e, t.bindTo(t.model["transient"], e, function() {
t.trigger(e);
});
});
},
render: function() {
var e, t = this;
return t.model && !t.destroyed ? (x.render.call(t, t.formatData(t.renderData)), 
e = t.el, t.$title = t.$(".taskItem-titleWrapper-title"), m.setAttribute(e, "rel", t.model.id), 
m.setAttribute(e, "aria-label", t.model.getARIAString()), t.renderTitle(), t.model.attributes.completed && e.classList.add("done"), 
t.renderAssignee(), t.renderSubtaskProgress(), t.renderSelected(), t.updateDueDateAndRepeat(), 
t) : void 0;
},
renderAriaLabel: function() {
var e = this;
e.requestAnimationFrame(function() {
m.setAttribute(e.el, "aria-label", e.model.getARIAString());
});
},
renderDateLabel: function() {
var n = this;
n.requestAnimationFrame(function() {
var a = n.model.attributes.due_date;
if (a) {
var o, r = t(i.convertServerDateToLocalDate(a)).sod(), s = n.$(".taskItem-duedate"), l = t().sod(), d = "week" === e.listId;
r.diff(l, "days") < 0 ? (s.addClass("overdue"), n.model.attributes.recurrence_type && n.$(".wundercon.recurrence").addClass("overdue")) : (s.removeClass("overdue"), 
n.model.attributes.recurrence_type && n.$(".wundercon.recurrence").removeClass("overdue")), 
o = d ? n.getWeekViewLabel() : i.humanizeDueDate(r, e.settings.attributes.date_format), 
s.html(o), d && n.renderEmoji(s), n.renderLabels(s[0]);
}
});
},
getWeekViewLabel: function() {
var t, i = this, n = i.lists, a = n.get(i.model.attributes.list_id), o = a && "inbox" === a.attributes.type, r = a && "inbox" === a.attributes.id, s = o || r;
return t = s ? e.language.getLabel("smart_list_inbox").toString() : a && a.escape("title");
},
animateUp: function() {
var e = this;
return m.transition(e.el, "animate-up", !0);
},
animatePop: function() {
var e = this;
return e.el.classList.add("pop-in-start"), m.transition(e.el, "pop-in", !0).then(function() {
e.el.classList.remove("pop-in-start"), e.el.classList.remove("pop-in");
});
},
animateDown: function() {
var e = this;
return e.el.style.height = "0px", m.transition(e.el, "animate-down", !0).then(function() {
e.el.style.height = null, e.el.classList.remove("animate-down");
});
},
animateAppearCompletion: function() {
var e = this;
return e.el.style.opacity = "0", e.animateDown().then(function() {
return e.el.style.opacity = "", e.animatePop();
});
},
animateDisappearCompletion: function() {
return this.animateUp();
},
updateDueDateAndRepeat: function() {
var e = this;
e.renderReccurrence(), e.renderDueDateVisibility();
},
renderStarredIcon: function(e) {
var t = this;
t.requestAnimationFrame(function() {
var i = t.$el;
i.find(".wundercon.starred").toggleClass("hidden", e), i.find(".icon.task-starred").toggleClass("hidden", !e);
});
},
renderCompleted: function(e) {
var t = this;
t.requestAnimationFrame(function() {
var i = t.$el;
i.toggleClass("done", e), i.find(".checkBox").toggleClass("checked", e);
});
},
renderAttachmentIcon: function() {
var e = this;
e.requestAnimationFrame(function() {
var t = e.model.hasAttachment();
e.$(".attachment-wrapper").toggleClass("hidden", !t);
});
},
renderCommentsBubble: function() {
var e = this;
e.requestAnimationFrame(function() {
var t = e.model.hasComments();
e.$(".conversations-wrapper").toggleClass("hidden", !t);
});
},
renderUnreadCommentsBubble: function() {
var e = this;
e.requestAnimationFrame(function() {
var t = e.model.hasUnreadComments();
e.$(".conversations-wrapper").toggleClass("has-unread-comments", t);
});
},
renderAssignee: function() {
var e = this;
e.requestAnimationFrame(function() {
var t = e.$(".taskItem-assign"), i = e.model.attributes.assignee_id;
t.toggleClass("hidden", !i), i && (e.avatarView = e.avatarView || e.addSubview(new s({
listId: e.model.attributes.list_id,
size: "small"
}), "avatarView"), t.html(e.avatarView.render({
id: i
}).$el));
});
},
renderReccurrence: function() {
var e = this;
e.requestAnimationFrame(function() {
var t = e.model.attributes, i = t.recurrence_type, n = t.recurrenceCount, a = !(!i || "none" === i || 0 === n);
e.$(".wundercon.recurrence").toggleClass("task-recurring", a);
});
},
renderDueDateVisibility: function() {
var e = this;
e.requestAnimationFrame(function() {
var t = e.model.attributes.due_date, i = e.$(".taskItem-duedate");
t ? (i.removeClass("hidden"), e.renderDateLabel()) : i.empty().addClass("hidden");
});
},
renderTitle: function() {
var e = this;
e.requestAnimationFrame(function() {
var t = e.model.attributes.title;
e.$title.text(t), e.renderEmoji(e.$title), e.renderLinks(e.$title), e.renderEmails(e.$title), 
e.renderTags(e.$title);
});
},
renderSelected: function() {
var t = this;
t.requestAnimationFrame(function() {
t.model.isSelected() ? (t.el.classList.add("selected"), "browser" === e.focus && t.el.focus()) : t.el.classList.remove("selected");
});
},
renderSubtaskProgress: function() {
var t = this;
e.isNightly() && t.requestAnimationFrame(function() {
var e = t.model.hasSubtasks(), i = t.$(".taskItem-progress"), n = i.find(".taskItem-progress-bar");
if (e) {
var a = t.model.attributes.subtaskCompletion || 0;
n.css({
width: a + "%"
}), 0 === a && (e = !1), n.toggleClass("completed", 100 === a);
}
i.toggleClass("transparent", !e);
});
}
});
return [ d, c, u, p ].forEach(function(e) {
e.applyToClass(y);
}), y;
}), define("models/ListChunkingFilter", [ "project!core/WBEventEmitter" ], function(e) {
var t = e.prototype, i = e.extend({
initialize: function(e, i) {
var n = this;
n.chunkingGroup = e, n.collection = i, n.lastIndex = -1, t.initialize.apply(n, arguments), 
n.bindTo(n.collection, "add", n._onCollectionAdd, n), n.bindTo(n.collection, "remove", n._onCollectionRemove, n), 
n.bindTo(n.collection, "move", n._onCollectionMove, n), n.bindTo(n.chunkingGroup, "shrink", n._updateTail.bind(n, {}), n), 
n.bindTo(n.chunkingGroup, "grow", n._updateTail.bind(n, {}), n);
},
loadInitialItems: function() {
var e = this;
e._updateTail();
},
_updateTail: function(e) {
var t = this;
t._tryToGrowTail(e), t._tryToShrinkTail(e);
},
_tryToGrowTail: function(e) {
var t = this, i = t.chunkingGroup, n = t.collection.models;
for (e = e || {}; i.shouldRenderItem(t.lastIndex + 1); ) ++t.lastIndex, t.triggerEvent("add", [ n[t.lastIndex], t.lastIndex, e ]);
},
_tryToShrinkTail: function(e) {
var t, i = this, n = i.chunkingGroup, a = i.collection.models;
for (e = e || {}; !n.shouldRenderItem(i.lastIndex) && i.lastIndex > 0; ) t = a[i.lastIndex], 
t && i.triggerEvent("remove", [ t, i.lastIndex, e ]), --i.lastIndex;
},
_onCollectionAdd: function(e, t, i) {
var n = this, a = i.index;
n.collectionOptions = i, n.chunkingGroup.setCollectionLength(t.length, !0), n.chunkingGroup.shouldRenderItem(a) && (n.triggerEvent("add", [ e, a, i ]), 
++n.lastIndex, n._updateTail(i));
},
_onCollectionRemove: function(e, t, i) {
var n = this, a = i.index, o = n.chunkingGroup.shouldRenderItem(a);
n.chunkingGroup.setCollectionLength(t.length, !0), o && (n.triggerEvent("remove", [ e, a, i ]), 
--n.lastIndex, n._updateTail(i));
},
_onCollectionMove: function(e, t, i) {
var n = this, a = i.index, o = i.fromIndex, r = n.chunkingGroup.shouldRenderItem(o), s = n.chunkingGroup.shouldRenderItem(a), l = n.collection.models;
r && (n.triggerEvent("remove", [ l[a], o, i ]), --n.lastIndex), s && (n.triggerEvent("add", [ l[a], a, i ]), 
++n.lastIndex), n._updateTail();
}
});
return i;
}), define("views/Tasks/TaskListView", [ "application/runtime", "helpers/domtools", "./Controllers/TaskListViewClickController", "./Controllers/TaskListViewDragController", "./Controllers/TaskListViewItemController", "wunderbits/WBViewPresenter", "project!core/WBDeferred", "helpers/dnd/index", "views/Tasks/TaskItemView", "models/ListChunkingFilter", "wunderbits/global" ], function(e, t, i, n, a, o, r, s, l, d, c) {
var u = "application/x-wunderlist-task", p = o.prototype, m = o.extend({
observes: {
collection: {
change: ">change:taskAttributes",
"change:title": ">change:title",
"change:starred": ">change:starred",
"change:completed": ">change:completed",
"change:subtaskCompletion": ">change:subtaskCompletion",
"change:hasSubtasks change:hasNote change:hasFiles": ">change:attachmentIcon",
"change:hasUnreadComments": ">change:hasUnreadComments",
"change:hasComments": ">change:hasComments",
"change:assignee_id": ">change:assignee_id",
"change:due_date change:recurrence_type change:recurrence_count": ">change:dateData",
"change:list_id": ">change:list_id"
},
chunkingFilter: {
add: "addTaskFromEvent",
remove: "removeTaskFromEvent"
},
chunking: {
destroy: "destroy"
},
model: {
"change:isCollapsed": "_updateIsCollapsed"
}
},
"implements": [ i, n, a ],
emits: {
"click .checkBox": "click:checkbox",
"click .taskItem-star": "click:star",
"click a.hash": "click:hash",
"dblclick .taskItem-titleWrapper-title": "dblclick:title",
"dblclick .taskItem-duedate": "dblclick:duedate",
"dblclick .taskItem-assign": "dblclick:assign",
"dblclick .task-recurring": "dblclick:recurring",
"dblclick .conversations-wrapper": "dblclick:comments",
"click .taskItem": "click:task",
"dblclick .taskItem": "click:task"
},
tagName: "ol",
className: "tasks",
initialize: function(t) {
var i = this;
i._isAnimating = !1, i.chunking = t.chunkingGroup, i.chunkingFilter = new d(t.chunkingGroup, t.collection), 
i._debouncedFlushRenderQueue = i.debounce(i._flushRenderQueue.bind(i), 50), p.initialize.apply(i, arguments), 
i._renderQueue = [], i.detailPromise = i.deferred(), i.bindTo(e, "detail:rendered", function() {
i.detailPromise.resolve();
}), i.taskSelection = t.taskSelection, i._getSelectedNodes = t.getSelectedNodes;
var n = i.model.attributes;
n.allowDrag && i.enableDrag(), n.allowDropInto && i.enableDropInto(), (n.allowDropToComplete || n.allowDropToMoveToList) && i.enableDropZone();
},
render: function() {
var e = this;
e._updateIsCollapsed(!0), e.chunkingFilter.loadInitialItems(), e._flushRenderQueue();
},
createTaskView: function(e) {
var t = this, i = new l({
model: e
});
return t.addSubview(i, e.id), i.render(), t.dragHelper && t.dragHelper.prepareItem(i.el), 
i;
},
show: function(e) {
var t = this;
e !== t.shown && (e ? t.el.classList.remove("hidden") : t.el.classList.add("hidden"), 
t.shown = e);
},
_updateIsCollapsed: function(e) {
var t, i = this;
t = i.model.attributes.canCollapse && e === !0 ? e : i.model.attributes.isCollapsed, 
i.show(!t);
},
addTaskFromEvent: function() {
var e = this;
e._renderQueue.push({
isAddEvent: !0,
args: arguments
}), e._flushRenderQueue();
},
removeTaskFromEvent: function() {
var e = this;
e._renderQueue.push({
isAddEvent: !1,
args: arguments
}), e._flushRenderQueue();
},
_flushRenderQueue: function() {
for (var e, t, i, n, a = this, o = document.createDocumentFragment(); a._renderQueue.length; ) e = a._renderQueue.shift(), 
t = e.args[0], i = e.args[1], n = e.args[2], e.isAddEvent ? a._addTaskFromEvent(t, i, n, o) : a._removeTaskFromEvent(t, i, n);
a.el.appendChild(o);
},
_addTaskFromEvent: function(e, t, i, n) {
var a, o = this;
i.animate && o.shown ? (a = o._animatedInsertFactory(e, t, i), o._setupInsertAnimation(e, a, i)) : (a = o._insertFactory(e, t, n))();
},
_animatedInsertFactory: function(e, t) {
function i() {
var i = n.createTaskView(e), a = n.$("li").not(".animate-up, .animate-down")[t];
return a ? n.el.insertBefore(i.el, a) : n.el.appendChild(i.el), i;
}
var n = this;
return i;
},
_insertFactory: function(e, t, i) {
function n() {
var n = a.createTaskView(e), o = a.$("li").not(".animate-up, .animate-down")[t];
return o ? a.el.insertBefore(n.el, o) : i.appendChild(n.el), n;
}
var a = this;
return n;
},
_setupInsertAnimation: function(e, t, i) {
var n, a = this;
n = "completion" === i.animate ? e.id + "insert" : e.id, i.animations.branch(n), 
i.animations.append(t, n), i.animations.append(function(e) {
return "completion" === i.animate ? e.animateAppearCompletion() : "added" === i.animate ? e.animatePop() : e.animateDown();
}, n), a._adjustAnimatingFlag(i.animations);
},
_adjustAnimatingFlag: function(e) {
function i() {
t.setImmediate(function() {
n._isAnimating = !1, n.trigger("animationsState:changed", n._isAnimating);
});
}
var n = this;
n._isAnimating = !0, n.trigger("animationsState:changed", n._isAnimating), e.done().then(i, i);
},
isAnimating: function() {
var e = this;
return e._isAnimating;
},
_destroyTaskView: function(e) {
var t = this;
e.destroyed || t.destroySubview(e);
},
_removeTaskFromEvent: function(e, t, i) {
if (e) {
var n = this, a = n.getSubview(e.id);
a && (i.animate && n.shown ? n._setupRemoveAnimation(e, a, i) : n._destroyTaskView(a));
}
},
_setupRemoveAnimation: function(e, t, i) {
var n, a = this;
n = "completion" === i.animate ? e.id + "remove" : e.id, i.animations.branch(n), 
i.animations.append(function() {
return t.animateUp();
}, n), i.animations.append(a._destroyTaskView.bind(a), n), i.animations.append(a._destroyTaskView.bind(a, t), n), 
a._adjustAnimatingFlag(i.animations);
},
enableDrag: function() {
var e = this;
e.dragHelper = s.createDragList(e.el, {
mimeType: u,
itemToData: e._itemToData.bind(e),
getDragImage: e._createDragImageElement.bind(e),
disposeDragImage: e._disposeDragImage.bind(e),
effectAllowed: [ "move" ]
}), e.bindTo(e.dragHelper, "drag", e._onDragAdjustSelection), e.dragHelper.enable();
},
enableDropInto: function() {
var e = this;
e.dropHelper = s.createDropBetweenList(e.el, {
dropTargetTopClass: "dragAreaTop",
dropTargetTopHeight: 2,
dropTargetBottomClass: "dragAreaBottom",
dropTargetBottomHeight: 0,
mimeTypes: [ u ]
}), e.bindTo(e.dropHelper, "droppedBetween", e._onDroppedBetween), e.dropHelper.enable();
},
enableDropZone: function() {
var e = this;
e.dropHelper = s.createDropZone(e.el, {
dropEffect: "move",
hoverClass: "lists-in-filter-hover",
mimeTypes: [ u ]
}), e.bindTo(e.dropHelper, "drop", e._onDropZoneDropped.bind(e)), e.dropHelper.enable();
},
_onDroppedBetween: function(e, t, i) {
var n = this, a = JSON.parse(e), o = t && t.getAttribute("rel"), r = i && i.getAttribute("rel");
n.triggerEvent("tasksDropped", [ a, o, r ]);
},
_onDropZoneDropped: function(e, t) {
var i = this;
if (t === u) {
var n = JSON.parse(e);
i.model.attributes.allowDropToComplete ? i.trigger("tasksDroppedToComplete", n) : i.model.attributes.allowDropToMoveToList && i.trigger("tasksDroppedToMoveToList", n);
}
},
onDestroy: function() {
var e = this;
e.dragHelper && (e.dragHelper.destroy(), e.dragHelper = null), e.dropHelper && (e.dropHelper.destroy(), 
e.dropHelper = null);
},
_onDragAdjustSelection: function(e) {
var t = this, i = e && e.getAttribute("rel");
i && t.trigger("drag", i);
},
_itemToData: function(e) {
var t = this, i = e.getAttribute("rel"), n = t.taskSelection.getSelectedIDs().filter(function(e) {
return e !== i;
}).concat(i);
return JSON.stringify(n);
},
_disposeDragImage: function(e) {
try {
c.document.body.removeChild(e);
} catch (t) {}
},
_createDragImageElement: function(e, t) {
var i = JSON.parse(t), n = c.getComputedStyle(e), a = e.cloneNode(!0);
if (a.classList.add("task-drag-clone"), a.style.height = n.height, i.length > 1) {
var o = document.createElement("span");
o.className = "badge", o.appendChild(document.createTextNode("" + i.length)), a.insertBefore(o, a.children[0]);
}
var r = c.document.body;
return r.insertBefore(a, r.firstChild), a;
},
hasSelectableItems: function() {
return !this.model.attributes.isCollapsed && 0 !== this.collection.length;
}
});
return m;
}), define("helpers/Animator", [ "vendor/jquery", "vendor/lodash", "project!core/WBSingleton" ], function(e, t, i) {
return i.extend({
isAnimatingOrClone: function(t) {
var i = e(t), n = ".animate-up, .animate-down, .pop-in, .pop-in-start, .clone, .clone-title, .animated";
return i.is(n);
}
});
}), define("views/Tasks/Controllers/TaskBrowserViewKeyboardController", [ "application/runtime", "collections/TaskCollection", "helpers/Animator", "wunderbits/helpers/date", "wunderbits/WBViewController", "helpers/animation", "actions/Factory", "project!core/lib/extend" ], function(e, t, i, n, a, o, r, s) {
var l = e._, d = a.prototype;
return a.extend({
"implements": {
"toggle:done": "toggleDoneFromShortcut",
"toggle:starred": "toggleStarredFromShortcut",
"edit:title": "openEditTitleFromShortcut",
"delete:task": "deleteTaskFromShortcut",
"select:all": "selectAllTasks",
"select:first": "selectFirst",
"tasks:copy": "copyTasks",
"tasks:paste": "pasteTasks"
},
initialize: function() {
var e = this;
e.starTask = r.starTask(), e.completeTask = r.completeTask(), e.duplication = r.duplication(), 
d.initialize.apply(e, arguments);
},
_getSelectedItems: function() {
return this.view.taskSelection.getSelectedItems();
},
_getSelectedItemIds: function() {
return this._getSelectedItems().map(function(e) {
return e.id;
});
},
openEditTitleFromShortcut: function() {
var t = this, i = t.view.taskSelection, n = i.activeModel;
if (n && e.trigger("route:" + n.route("/title/edit")), !n && i.activeHeaderCollection) {
var a = i.activeHeaderCollection.groupId, o = t.view.getHeaderView(a);
o && o.handleNavigation();
}
},
toggleDoneFromShortcut: function() {
var t = this;
if (!("addTask" === e.focus || "addTaskDatePicker" === e.focus || e.currentRoute().indexOf("Subtasks/") >= 0 || t.view.isAnimating())) {
var i = o.animateOptions("completion"), n = t._getSelectedItems();
n.forEach(function(e) {
t.completeTask.toggleCompleted([ e.id ], i);
}), i && i.animations.run();
}
},
_toggleStarredOnTasks: function(e, t) {
var i = this, n = i._groupItemsByListID(e);
n.forEach(function(e) {
var n = e.selectedItems, a = n.map(function(e) {
return e.getId();
});
i.starTask.toggleStarred(a, t);
});
},
_groupItemsByListID: function(e) {
var i = l.groupBy(e, function(e) {
return e.attributes.list_id;
});
return Object.keys(i).map(function(e) {
return {
taskCollection: new t("/lists/" + e + "/tasks"),
selectedItems: i[e]
};
});
},
toggleStarredFromShortcut: function() {
var t = this;
if ("addTask" !== e.focus && "addTaskDatePicker" !== e.focus && !t.view.isAnimating()) {
var i = "true" === e.settings.attributes.behavior_star_tasks_to_top, n = {
moveToTop: i
}, a = i && o.animateOptions("starred");
a && (n = s(n, a));
var r = t._getSelectedItems();
t._toggleStarredOnTasks(r, n), a && a.animations.run();
}
},
selectFirst: function() {
for (var t, i = this, n = i.view.taskSelection, a = n.collections, o = a.length, r = 0; o > r; r++) if (a[r].length) {
t = a[r];
break;
}
var s = t && t.models[0];
s ? (n.addToSelection(s, t), n.deselectAllAndSelectActive(), i.view.forceFocus(e.focus)) : e.lastListID && e.trigger("route:lists/" + e.lastListID + "/tasks/new");
},
deleteTaskFromShortcut: function(t) {
var i = this;
if (!i.view.isAnimating()) {
var n = i._getSelectedItems();
if (0 !== n.length) {
var a = "true" === e.settings.attributes.confirm_delete_entity;
a = t && t.ignorePrompt ? !1 : a, a ? e.trigger("modal:confirm", i.setupConfirmationOptions(n)) : i.deleteSelectedTasks(n);
}
}
},
setupConfirmationOptions: function(t) {
var i = this, n = {
confirm: i.deleteSelectedTasks.bind(i, t),
cancel: function() {}
};
return t.length > 1 ? (n.customTitle = e.language.getLabel("label_are_you_sure_permanently_delete_task_plural").toString(), 
n.confirmText = e.language.getLabel("label_delete_task_plural").toString()) : (n.customTitle = e.language.getLabel("label_are_you_sure_permanently_delete_$_task", t[0].escape("title")).toString(), 
n.confirmText = e.language.getLabel("label_delete_task").toString()), n.customText = e.language.getLabel("label_cant_undo").toString(), 
n;
},
deleteSelectedTasks: function(t) {
var i = this;
if (!i.view.isAnimating()) {
for (var n = o.animateOptions("completion"), a = 0, r = t.length; r > a; a++) t[a].destroy(n);
e.trigger("focus:set", "browser"), i.view.emitSelectFirst(), n && n.animations.run();
}
},
selectAllTasks: function() {
var e = this.view;
e.isAnimating() || e.taskSelection.selectAll();
},
copyTasks: function() {
var e = this;
if (e.isCopyAndPasteEnabled()) {
var t = e._getSelectedItemIds();
t.length && e.duplication.copyTasks(t);
}
},
pasteTasks: function() {
var e = this;
if (e.isCopyAndPasteEnabled()) {
var t = e._getSelectedItemIds();
t.length && e.duplication.pasteTasks(t[t.length - 1]);
}
},
isCopyAndPasteEnabled: l.memoize(function() {
return e.isNightly() || e.isDev();
})
});
}), define("views/Tasks/Controllers/TaskBrowserSelectionController", [ "application/runtime", "wunderbits/WBViewController" ], function(e, t) {
var i = t.prototype;
return t.extend({
"implements": {
"change:active": "debouncedRoute",
"change:activeHeader": "activeHeaderChanged",
"change:inactiveHeader": "inactiveHeaderChanged",
"select:task": "selectTask"
},
initialize: function() {
var e = this;
e.debouncedRoute = e.debounce(e._routeToContext, 150), i.initialize.apply(e, arguments);
},
selectTask: function(e) {
var t = this, i = t.view;
i.ready.done(function() {
var t = i.allTasks.get(e);
t && !t.isSelected() && i.taskSelection.toggleSelection(t), i.taskSelection.deselectAllAndSelectActive();
});
},
_routeToContext: function(t) {
var i = this, n = e.isOnTaskRoute();
if (n && i.view.currentContext && i.view.taskSelection.selectedCount > 1) e.trigger("route:lists/" + i.view.currentContext), 
e.trigger("focus:set", "browser"); else if (n) {
var a = e.currentRoute(), o = i.view.allTasks.get(t);
if (o) {
var r = o.route(), s = a.indexOf(r) >= 0;
!s && e.trigger("route:" + r);
}
}
},
activeHeaderChanged: function(e) {
var t = this, i = t.view.getHeaderView(e);
i && i.setActive(!0);
},
inactiveHeaderChanged: function(e) {
var t = this, i = t.view.getHeaderView(e);
i && i.setActive(!1);
}
});
}), define("views/Tasks/Controllers/TaskContextMenuController", [ "application/runtime", "collections/ListCollection", "wunderbits/ContextMenuController" ], function(e, t, i, n) {
var a = [ "button_copy_task_uri_plural_$", "contextual_new_list_from_$_plural", "actionbar_email_$_selected_items_plural", "actionbar_print_$_selected_items_plural" ], o = e._, r = i.prototype;
return i.extend({
type: "tasks",
"implements": {
"contextmenu:contextual_mark_as_notcompleted": "markAsNotCompleted",
"contextmenu:contextual_mark_as_completed": "markAsCompleted",
"contextmenu:contextual_mark_as_starred": "markAsStarred",
"contextmenu:contextual_mark_as_unstarred": "markAsUnstarred",
"contextmenu:label_due_$/$label_relative_date_today": "setDueToday",
"contextmenu:label_due_$/$label_relative_date_tomorrow": "setDueTomorrow",
"contextmenu:button_remove_due_date": "removeDueDate",
"contextmenu:button_copy_task_uri": "copyUri",
"contextmenu:button_copy_task_uri_plural_$": "copyUri",
"contextmenu:contextual_new_list_from": "createNewList",
"contextmenu:contextual_new_list_from_$_plural": "createNewList",
"contextmenu:actionbar_email_selected_item": "emailTasks",
"contextmenu:actionbar_email_$_selected_items_plural": "emailTasks",
"contextmenu:actionbar_print_selected_item": "printTasks",
"contextmenu:actionbar_print_$_selected_items_plural": "printTasks",
"contextmenu:label_delete_task": "deleteTasks",
"contextmenu:menubar_delete_task_plural": "deleteTasks",
"contextmenu:move_tasks_to": "moveToList",
"contextmenu:assign_tasks_to": "assignTaskTo",
"contextmenu:label_unassigned": "assignTaskTo"
},
items: {
label_unassigned: n,
contextual_mark_as_multiple: {},
contextual_mark_as_notcompleted: n,
contextual_mark_as_completed: n,
contextual_mark_as_starred: n,
contextual_mark_as_unstarred: n,
"label_due_$/$label_relative_date_today": n,
"label_due_$/$label_relative_date_tomorrow": n,
button_remove_due_date: n,
contextual_assign_item_to_list: {},
contextual_assign_item_to_list_plural: {},
button_copy_task_uri: n,
button_copy_task_uri_plural_$: n,
contextual_new_list_from: n,
contextual_new_list_from_$_plural: n,
contextual_move_item_to_list: {},
contextual_move_item_to_list_plural: {},
actionbar_email_selected_item: n,
actionbar_email_$_selected_items_plural: n,
actionbar_print_selected_item: n,
actionbar_print_$_selected_items_plural: n,
label_delete_task: n,
menubar_delete_task_plural: n
},
initialize: function() {
var t = this;
if (r.initialize.apply(this, arguments) !== !1) {
var i = 1e3;
t.buildListMenuItems = t.debounce(t.buildListMenuItems, i), t.buildUserMenuItems = t.debounce(t.buildUserMenuItems, i), 
t.bindTo(e, "browser:selectionChanged", "onSelectionChange"), t.bindOnceTo(e, "lists:ready", "setupListsBindings"), 
t.bindOnceTo(e, "users:ready", "setupUsersBindings");
}
},
onSelectionChange: function(t) {
if (0 !== t) {
var i = this, n = e.language, o = i.items;
a.forEach(function(e) {
var i = o[e];
i && (i.label = n.getText(e, t).replace(/&quot;/g, '"'));
});
}
},
setupListsBindings: function() {
var e = this;
e.lists = new t("/lists/accepted"), e.listItems = {}, e.listsSubmenu = e.createMenu(), 
e.items.contextual_move_item_to_list.submenu = e.listsSubmenu, e.items.contextual_move_item_to_list_plural.submenu = e.listsSubmenu, 
e.buildListMenuItems(), e.bindTo(e.lists, "add change", "buildListMenuItems"), e.bindTo(e.lists, "remove", "removeListMenuItem");
},
buildListMenuItems: function() {
var t = this, i = t.lists, n = t.listItems;
i.each(function(i) {
var a = i.id, o = i.attributes.title;
if ("inbox" === a && (o = e.language.getText("smart_list_inbox")), !n[a]) {
var r = t.createMenuItem(a, o);
r.click = function() {
t.view.trigger("contextmenu:move_tasks_to", a);
}, t.listsSubmenu.append(r), n[a] = r;
}
n[a].label = o;
});
},
removeListMenuItem: function(e) {
var t = this, i = t.listItems, n = i && i[e.id], a = n && t.listsSubmenu.items.indexOf(n) > -1;
n && (a && t.listsSubmenu.remove(n), delete i[e.id]);
},
setupUsersBindings: function(e) {
var t = this;
t.users = e, t.userItems = {}, t.assignSubmenu = t.createMenu(), t.items.contextual_assign_item_to_list.submenu = t.assignSubmenu, 
t.items.contextual_assign_item_to_list_plural.submenu = t.assignSubmenu, t.buildUserMenuItems(), 
t.bindTo(e, "add change", "buildUserMenuItems"), t.bindTo(e, "remove", "removeUserMenuItem");
},
buildUserMenuItems: function() {
var e = this, t = e.users, i = e.userItems;
t.each(function(t) {
var n = t.id, a = t.attributes.name;
if (!i[n]) {
var o = e.createMenuItem(n, a);
o.click = function() {
e.view.trigger("contextmenu:assign_tasks_to", n);
}, i[n] = o, e.assignSubmenu.append(o);
}
i[n].label = a;
});
},
removeUserMenuItem: function(e) {
var t = this, i = t.userItems, n = i && i[e.id], a = n && t.assignSubmenu.items.indexOf(n) > -1;
n && (a && t.assignSubmenu.remove(n), delete i[e.id]);
},
getContextMenuKeys: function() {
var e, t, i = this, n = i.view.taskSelection, a = n.getSelectedIDs(), o = i.target.getAttribute("rel");
if (1 == a.length && a[0] === o || -1 === a.indexOf(o)) {
var r = n.allTasks.get(o), s = r && r.attributes.list_id;
e = s && i.view.lists.get(s), i.selectedIDs = [ o ], t = i.getSingleTaskMenuKeys(r, e);
} else {
var l = n.getSelectionState(), d = l.listIds;
e = 1 === d.length && i.view.lists.get(d[0]), i.selectedIDs = a, t = i.getMultipleTaskMenuKeys(a, l, e);
}
if (e && e.isShared()) {
i.clearContextMenu(i.assignSubmenu), i.assignSubmenu.append(i.items.label_unassigned);
var c = i.actions.membershipLookup.getMembershipCollection(e.id);
c && c.each(function(e) {
if (e.isAccepted()) {
var t = e.attributes.user_id, n = i.userItems[t];
n && i.assignSubmenu.append(n);
}
});
}
return t;
},
getSingleTaskMenuKeys: function(e, t) {
var i = [];
if (e) {
var n = e && e.isStarred(), a = e && e.isCompleted(), o = t && t.isShared(), r = "contextual_mark_as_";
i.push(r + (a ? "notcompleted" : "completed")), a || i.push(r + (n ? "unstarred" : "starred")), 
i.push("---"), a || (o && (i.push("contextual_assign_item_to_list"), i.push("---")), 
i.push("label_due_$/$label_relative_date_today"), i.push("label_due_$/$label_relative_date_tomorrow"), 
i.push("button_remove_due_date"), i.push("---"), i.push("button_copy_task_uri"), 
i.push("---"), i.push("contextual_new_list_from"), i.push("contextual_move_item_to_list")), 
i.push("actionbar_email_selected_item"), i.push("actionbar_print_selected_item"), 
i.push("---"), i.push("label_delete_task");
}
return i;
},
getMultipleTaskMenuKeys: function(e, t, i) {
var n = t.all, a = t.completed, o = t.starred, r = a.length === n.length, s = [];
return r || s.push("contextual_mark_as_completed"), a.length > 0 && s.push("contextual_mark_as_notcompleted"), 
r || (o.length < n.length && s.push("contextual_mark_as_starred"), o.length > 0 && s.push("contextual_mark_as_unstarred")), 
s.push("---"), r || (i && i.isShared() && (s.push("contextual_assign_item_to_list_plural"), 
s.push("---")), s.push("label_due_$/$label_relative_date_today"), s.push("label_due_$/$label_relative_date_tomorrow"), 
s.push("button_remove_due_date"), s.push("---"), s.push("button_copy_task_uri_plural_$"), 
s.push("---"), s.push("contextual_new_list_from_$_plural"), s.push("contextual_move_item_to_list_plural")), 
s.push("actionbar_email_$_selected_items_plural"), s.push("actionbar_print_$_selected_items_plural"), 
s.push("---"), s.push("menubar_delete_task_plural"), s;
},
markAsNotCompleted: function() {
var e = this;
e.actions.complete.uncompleteTasks(e.selectedIDs);
},
markAsCompleted: function() {
var e = this;
e.actions.complete.completeTasks(e.selectedIDs);
},
markAsStarred: function() {
var e = this;
e.actions.star.starTasks(e.selectedIDs, {});
},
markAsUnstarred: function() {
var e = this;
e.actions.star.unstarTasks(e.selectedIDs);
},
setDueToday: function() {
var e = this;
e.actions.due.setTasksDueToday(e.selectedIDs);
},
setDueTomorrow: function() {
var e = this;
e.actions.due.setTasksDueTomorrow(e.selectedIDs);
},
removeDueDate: function() {
var e = this;
e.actions.due.removeDueDate(e.selectedIDs);
},
copyUri: function() {
var e = this;
e.clipboard.set(e.selectedIDs.map(function(e) {
return "https://www.wunderlist.com/#/tasks/" + e;
}).join("\n"));
},
createNewList: function() {
var t = this, i = t.selectedIDs, a = t.actions.createList, o = e.language.getText("placeholder_new_list");
a.createListWith(o, !1, n, i).then(function(t) {
e.trigger("route:" + t.route());
});
},
emailTasks: function() {
var t = this, i = t.selectedIDs;
e.trigger("email:list", e.listId, i);
},
printTasks: function() {
var e = this;
e.actions.print.printSelected();
},
deleteTasks: function() {
var t = this, i = "true" === e.settings.attributes.confirm_delete_entity, n = function() {
t.actions.deleteTask.deleteTasks(t.selectedIDs);
};
if (i) {
var a = e.language.getLabel, r = {
text: a("label_cant_undo").toString()
}, s = !0;
if (1 === t.selectedIDs.length) {
var l = t.view.taskSelection, d = l.allTasks.get(t.selectedIDs[0]);
if (d) {
var c = o.escape(d.attributes.title);
r.title = a("label_are_you_sure_permanently_delete_$_task", c).toString(), r.confirm = a("label_delete_task").toString();
} else s = !1;
} else r.title = a("label_are_you_sure_permanently_delete_task_plural").toString(), 
r.confirm = a("label_delete_task_plural").toString();
s && e.trigger("modal:confirm", {
customTitle: r.title,
customText: r.text,
confirmText: r.confirm,
confirm: n
});
} else n();
},
moveToList: function(e) {
var t = this, i = t.selectedIDs;
t.actions.moveTask.moveTasks(i, e);
},
assignTaskTo: function(e) {
var t = this, i = t.selectedIDs;
t.actions.assignTask.assignTasksToUserId(i, e);
}
});
}), define("models/grouping/BaseGrouping", [ "project!core/BaseEventEmitter" ], function(e) {
var t = e.extend({
disallowSelectionToOtherGroup: function() {
return !1;
},
getItemCount: function() {
var e = this;
return e.getGroupCollection().length;
}
});
return t;
}), define("models/grouping/MultiListGrouping", [ "./BaseGrouping" ], function(e) {
var t = e.extend({
initialize: function() {
var e = this;
e.boundObjects = [], e.highestBoundIndex = -1;
},
destroyFromIndex: function(e) {
var t, i, n, a = this;
for (t = a.highestBoundIndex; t >= e; --t) if (n = a.boundObjects[t]) for (i = 0; i < n.length; ++i) a._destroyObject(n[i]);
a.boundObjects = a.boundObjects.slice(0, e);
},
_destroyObject: function(e) {
e.unbindAll();
},
addBoundObjectAtIndex: function(e, t) {
var i = this, n = i.boundObjects[t];
Array.isArray(n) || (i.boundObjects[t] = n = []), n.push(e), i.highestBoundIndex = Math.max(i.highestBoundIndex, t);
},
onDestroy: function() {
var e = this;
e.destroyFromIndex(0);
}
});
return t;
}), define("models/TasksGroupModel", [ "application/runtime", "wunderbits/WBModel" ], function(e, t, i) {
var n = t.prototype;
return t.extend({
defaults: {
canCollapse: !1,
isCollapsed: !1,
hasHeader: !0,
showHeader: !0,
canDeleteCompleted: !1,
canEditPosition: !1,
selectable: !0,
chunking: !0,
filter: i,
itemsPerRender: 10,
groupID: i,
listID: i,
title: i,
scrollThreshold: i,
hasItems: !1,
allowDrag: !1,
allowDropInto: !1,
allowDropToComplete: !1,
allowDropToMoveToList: !1
},
initialize: function(e, t) {
var i = this, a = t.collection;
n.initialize.apply(i, arguments), a && i.bindTo(a, "add remove", "_updateHasItems"), 
i.bindTo(i, "change:hasHeader change:hasItems", "_updateShowHeader"), i.attributes.canCollapse && i._updateIsCollapsed(null, "false"), 
i.onlineID = t.onlineID, i._updateHasItems(null, a || [], {}), i._updateShowHeader(null, null, {});
},
_updateIsCollapsed: function(e, t, i) {
var n = this, a = "true" !== t;
n.set("isCollapsed", a, i);
},
_updateHasItems: function(e, t, i) {
var n = this, a = 0 !== t.length;
n.set({
hasItems: a
}, i);
},
_updateShowHeader: function(e, t, i) {
var n = this;
n.set({
showHeader: n.get("hasHeader") && n.get("hasItems")
}, i);
},
forceItemCount: function(e) {
var t = this;
t._updateHasItems(null, {
length: e
}, {});
},
loadCompletedTasksIfNeeded: function() {
var e = this;
e.attributes.collectionCanIncludeCompletedItems && e.onlineID && e._triggerLoadCompletedTasks();
},
_triggerLoadCompletedTasks: function() {
var t = this;
t.set("loadingCompleted", !0), e.trigger("sync:start", !1, "completed", "tasks", parseInt(t.onlineID, 10)), 
t.bindOnceTo(e, "sync:ended", function() {
t.set("loadingCompleted", !1);
});
}
});
}), define("models/grouping/WeekDayGrouping", [ "application/runtime", "./MultiListGrouping", "collections/comparators", "collections/FilteredTaskCollection", "collections/TaskCollection", "models/TasksGroupModel", "vendor/moment" ], function(e, t, i, n, a, o, r, s) {
var l = [ {
id: "Today",
collection: "todayPlus0"
}, {
id: "Tomorrow",
collection: "todayPlus1"
}, {
id: 2,
collection: "todayPlus2"
}, {
id: 3,
collection: "todayPlus3"
}, {
id: 4,
collection: "todayPlus4"
}, {
id: 5,
collection: "todayPlus5"
}, {
id: 6,
collection: "todayPlus6"
} ], d = t.prototype, c = t.extend({
filter: "week",
initialize: function() {
var e = this;
d.initialize.apply(e, arguments), e.rewind(0);
},
rewind: function(e) {
var t = this;
t.destroyFromIndex(e), t.dayIndex = e - 1;
},
hasNext: function() {
var e = this;
return e.dayIndex < l.length - 1;
},
moveNext: function() {
var e = this;
++e.dayIndex;
},
getGroupCollection: function() {
var t = this, o = l[t.dayIndex].collection, d = parseInt(o.replace("todayPlus", ""), 10), c = "/tasks/filter/" + o;
e.settings.isScopedFiltersEnabled() && (c += "/user");
var u = new a(c), p = new n(u.models, {
sourceCollection: u,
sorter: "todayPlus0" === o ? i.dueDateTodayGroup : i.taskListPosition,
sortProperties: [ "due_date", "list_id" ],
filterProperties: [ "due_date", "list_id" ],
filter: function(t) {
if (e.settings.isScopedFiltersEnabled() && !t.belongsToMe()) return !1;
var i = t.attributes.due_date;
if (i === s || null === i) return !1;
var n = r(i).diff(r().sod(), "days");
return 0 === d ? 0 >= n : n === d;
}
});
return p.bindAddingEvents(), p.bindRemovingEvents(), t.addBoundObjectAtIndex(p, t.dayIndex), 
p;
},
getGroupModel: function() {
var e = this, t = new o({
title: e._getTitle(),
groupID: e._getGroupId(),
allowDropToMoveToList: !0,
allowDrag: !0
}, {
collection: e.getGroupCollection()
});
return e.addBoundObjectAtIndex(t, e.dayIndex), t;
},
_getTitle: function() {
var t, i = this, n = e.language, a = l[i.dayIndex], o = isNaN(parseInt(a.id, 10)), s = o && r().add("days", i.dayIndex).format("MMM. DD");
return t = o ? n.getLabel("label_relative_date_" + a.id.toLowerCase() + "_with_date", s).toString() : r().add("days", i.dayIndex).format("dddd, MMM. DD");
},
_getGroupId: function() {
var e = this, t = l[e.dayIndex].collection;
return t;
}
});
return c;
}), define("models/grouping/FilterListGrouping", [ "application/runtime", "./MultiListGrouping", "collections/TaskCollection", "collections/FilteredTaskCollection", "collections/comparators", "models/TasksGroupModel", "vendor/moment" ], function(e, t, i, n, a, o, r, s) {
var l = {
starred: a.starred,
today: a.dueDate,
completed: a.completed,
assigned: a.assignee_id,
conversations: a.position,
all: a.completed
}, d = {
starred: [ "position" ],
today: [ "due_date" ],
completed: [ "position" ],
assigned: [ "position" ],
conversations: [ "position" ],
all: [ "position" ]
}, c = {
starred: [ "starred", "completed" ],
today: [ "due_date", "completed" ],
completed: [ "completed" ],
assigned: [ "assignee_id", "completed" ],
conversations: [ "completed" ],
all: [ "completed" ]
}, u = {
starred: !0,
assigned: !0,
conversations: !0,
all: !0
}, p = t.prototype, m = t.extend({
initialize: function(e, t) {
var n = this;
p.initialize.apply(n, arguments), n.filter = t, n.allLists = e, n.smartListMainCollection = new i("/tasks/filter/" + t), 
n.sorter = l[n.filter], n.sorter || (n.sorter = a.completed), n.rewind(0);
},
rewind: function(e) {
e === s && (e = 0);
var t = this;
t.destroyFromIndex(0), t.listIndex = e - 1, t.currentCollection = null;
},
hasNext: function() {
var e = this;
return e.listIndex + 1 < e.allLists.length;
},
moveNext: function() {
var e = this;
e.listIndex = e.listIndex + 1, e.currentCollection = e._createGroupCollection();
},
_createGroupCollection: function() {
var e = this, t = e.allLists.models[e.listIndex], a = new i("/lists/" + t.id + "/tasks"), o = new n(a.models, {
sourceCollection: a,
filter: e._filterTask.bind(e),
filterProperties: c[e.filter],
sorter: e.sorter,
sortProperties: d[e.filter]
});
return o.bindAddingEvents(), o.bindRemovingEvents(), e.addBoundObjectAtIndex(o, e.listIndex), 
o;
},
getGroupCollection: function() {
return this.currentCollection;
},
getGroupModel: function() {
var e = this, t = e.allLists.models[e.listIndex], i = !!u[e.filter], n = new o({
title: t.escape("title"),
groupID: t.id,
listID: t.id,
canDeleteCompleted: "completed" === e.filter,
allowDropToMoveToList: !0,
allowDrag: !0,
allowDropInto: i,
canEditPosition: i
}, {
collection: e.currentCollection
});
return e.addBoundObjectAtIndex(n, e.listIndex), n;
},
_filterTask: function(t) {
var i = this, n = i.filter, a = r().sod(), o = e.user;
if (("week" === n || "today" === n) && e.settings.isScopedFiltersEnabled() && !t.belongsToMe()) return !1;
if ("completed" !== n && t.attributes.completed) return !1;
if ("starred" === n && !t.attributes.starred) return !1;
if ("assigned" === n) {
if (!t.attributes.assignee_id || !o.isIDEqual(t.attributes.assignee_id)) return !1;
} else if ("today" === n) {
if (!t.attributes.due_date) return !1;
var s = r(t.attributes.due_date, "YYYY-MM-DD").sod();
if (s && s.diff(a, "days") > 0) return !1;
} else if ("completed" === n && !t.attributes.completed) return !1;
return !0;
}
});
return m;
}), define("models/grouping/SearchListGrouping", [ "application/runtime", "./MultiListGrouping", "collections/TaskCollection", "collections/FilteredTaskCollection", "models/TasksGroupModel", "vendor/moment", "collections/comparators" ], function(e, t, i, n, a, o, r, s) {
var l = t.prototype, d = t.extend({
initialize: function(e, t) {
var n = this;
l.initialize.apply(n, arguments), n.searchCollection = new i(e), n.allLists = t, 
n.rewind(0);
},
rewind: function(e) {
e === s && (e = 0);
var t = this;
t.onDestroy(), t.listIndex = e - 1, t.currentList = null, t.currentCollection = null, 
t.destroyFromIndex(e);
},
hasNext: function() {
var e = this;
return e.listIndex < e.allLists.length - 1;
},
moveNext: function() {
var e = this;
++e.listIndex, e.currentList = e.allLists.at(e.listIndex), e.currentCollection = null;
},
getGroupCollection: function() {
var e = this;
return e.currentCollection || (e.currentCollection = e._createSearchCollectionForListId(e.currentList.id), 
e.addBoundObjectAtIndex(e.currentCollection, e.listIndex)), e.currentCollection;
},
_createSearchCollectionForListId: function(e) {
var t = this, i = new n(t.searchCollection.models, {
sorter: r.position,
sortProperties: [ "position" ],
filter: function(t) {
return t.attributes.list_id === e;
},
filterProperties: [ "list_id" ],
sourceCollection: t.searchCollection
});
return i.bindRemovingEvents(), i.bindAddingEvents(), i;
},
getGroupModel: function() {
var e = this, t = new a({
title: e.currentList.escape("title"),
groupID: e.currentList.id,
listID: e.currentList.id,
allowDrag: !0
}, {
collection: e.getGroupCollection()
});
return e.addBoundObjectAtIndex(t, e.listIndex), t;
}
});
return d;
}), define("models/grouping/SpecificListGrouping", [ "application/runtime", "./BaseGrouping", "models/TasksGroupModel", "collections/TasksCountCollection" ], function(e, t, i, n) {
var a = t.extend({
initialize: function(e, t) {
var i = this;
i.listModel = e, i.taskCollection = t, i.rewind(0);
},
rewind: function(e) {
var t = this;
1 >= e && (t.atOpenGroup = !0, t.atCompletedGroup = !1, t._destroyClosedGroup()), 
0 === e && (t.atOpenGroup = !1, t.atCompletedGroup = !1, t._destroyOpenGroup());
},
hasNext: function() {
var e = this;
return !e.atOpenGroup || !e.atCompletedGroup;
},
moveNext: function() {
var e = this;
e.atOpenGroup ? e.atCompletedGroup || (e.atCompletedGroup = !0) : e.atOpenGroup = !0;
},
getGroupCollection: function() {
var e = this;
return e.atCompletedGroup ? e.taskCollection.getDoneTasks() : e.atOpenGroup ? e.taskCollection.getOpenTasks() : void 0;
},
getGroupModel: function() {
var e = this, t = e._createGroupModel();
if (e._isCompleted()) {
var i = new n("/tasksCounts/all");
e.completedGroup = t, t.forceItemCount(e._getCompletedTaskCount()), t.bindTo(i, "add remove change", "_updateCompletedTitle", e), 
t.bindTo(e.getGroupCollection(), "add remove", "_updateCompletedTitle", e);
} else e._isOpen() && (e.openGroup = t);
return t;
},
_updateCompletedTitle: function() {
var e = this;
e.completedGroup.set({
title: e._doneCountLabel()
});
},
_createGroupModel: function() {
var e = this, t = e.listModel.attributes.online_id;
return new i({
title: e._getTitle(),
label: e._getLabel(),
groupID: e._getGroupId(),
canCollapse: e._isCompleted(),
hasHeader: e._isCompleted(),
listID: e.listModel.id,
canEditPosition: e._isOpen(),
collectionCanIncludeCompletedItems: e._isCompleted(),
allowDrag: !0,
allowDropInto: e._isOpen(),
allowDropToComplete: e._isCompleted()
}, {
collection: e.getGroupCollection(),
onlineID: t
});
},
_getLabel: function() {
var t = this;
return t.atCompletedGroup ? e.language.getText("settings_show_completed_tasks_mobile") : t.atOpenGroup ? t.listModel.escape("title") : void 0;
},
_getTitle: function() {
var e = this;
return e.atCompletedGroup ? e._doneCountLabel() : e.atOpenGroup ? e.listModel.escape("title") : void 0;
},
_doneCountLabel: function() {
var t = e.language;
return t.getLabel("settings_show_completed_tasks_mobile").toString();
},
_getCompletedTaskCount: function() {
var e = this, t = e.taskCollection.getDoneTasks().length, i = e.listModel.attributes.completedTasksCount;
i || (i = 0);
var n = t > i ? t : i;
return e.defer(function() {
e.completedGroup && e.completedGroup.set({
showHeader: !0
});
}), n;
},
disallowSelectionToOtherGroup: function() {
return !0;
},
onDestroy: function() {
var e = this;
e._destroyOpenGroup(), e._destroyClosedGroup();
},
_destroyOpenGroup: function() {
var e = this;
e.openGroup && (e.openGroup.unbindAll(), e.openGroup = null);
},
_destroyClosedGroup: function() {
var e = this;
e.completedGroup && (e.completedGroup.unbindAll(), e.completedGroup = null);
},
_getGroupId: function() {
var e = this;
return e.listModel.id + (e.atCompletedGroup ? "-completed" : "");
},
_isOpen: function() {
var e = this;
return !e.atCompletedGroup && e.atOpenGroup;
},
_isCompleted: function() {
var e = this;
return e.atCompletedGroup;
}
});
return a;
}), define("models/TaskSelectionGroupingMixin", [ "project!core/WBMixin" ], function(e) {
return e.extend({
_selectRange: function(e, t, i, n) {
var a, o = this;
return a = t === n ? o._selectRangeWithinSameCollection(e, i, t) : o._selectRangeAcrossCollections(e, t, i, n), 
o._setActiveModel(i, n), a;
},
_selectRangeWithinSameCollection: function(e, t, i) {
for (var n, a = this, o = i.indexOf(e), r = i.indexOf(t), s = Math.max(o, r), l = Math.min(o, r), d = l; s >= d; d++) n = i.at(d), 
n && a._setAsSelected(n);
return r - o;
},
_selectRangeAcrossCollections: function(e, t, i, n) {
for (var a, o, r = this, s = r.collections, l = t.indexOf(e), d = n.indexOf(i), c = s.indexOf(t), u = s.indexOf(n), p = u > c, m = p ? c : u, g = p ? u : c, f = p ? l : d, b = p ? d : l, h = f, v = m; g >= v; v++) {
if (a = s[v]) {
o = v === g ? b : a.length - 1;
for (var _, w = h; o >= w; w++) _ = a.at(w), _ && r._setAsSelected(_);
}
h = 0;
}
return u - c;
},
_isCollectionEmpty: function(e) {
if (!e.length) return !0;
var t = e.groupModel.attributes.isCollapsed;
return t ? !0 : !1;
},
_findNextOrPrevCollection: function(e, t, i) {
var n, a, o = !1;
return e.forEach(function() {
t = "up" === i ? t - 1 : t + 1, a = e[t], a && !o && (this._isCollectionEmpty(a) ? t = "up" === i ? t-- : t++ : (n = a, 
o = !0));
}, this), n;
}
});
}), define("models/TaskSelectionItemStateMixin", [ "application/runtime", "project!core/WBMixin" ], function(e, t) {
var i = e._;
return t.extend({
getSelectionState: function() {
var e = this, t = e.getSelectedIDs(), i = e.getSelectedItems();
return {
all: t,
starred: e.getSelectedStarred(i),
completed: e.getSelectedCompleted(i),
dueDates: e.getSelectedDueDates(i),
listIds: e.getSelectedTaskLists(i)
};
},
getSelectedStarred: function(e) {
return i.chain(e).filter(function(e) {
return e.attributes.starred === !0;
}).pluck("id").value();
},
getSelectedCompleted: function(e) {
return i.chain(e).filter(function(e) {
return e.attributes.completed === !0;
}).pluck("id").value();
},
getSelectedDueDates: function(e) {
return i.chain(e).filter(function(e) {
return e.attributes.due_date;
}).pluck("id").value();
},
getSelectedTaskLists: function(e) {
return i.chain(e).pluck("attributes").pluck("list_id").uniq().value();
}
});
}), define("models/TaskSelection", [ "application/runtime", "./TaskSelectionGroupingMixin", "./TaskSelectionItemStateMixin", "project!core/WBEventEmitter", "project!core/WBStateModel" ], function(e, t, i, n, a, o) {
var r = {
fromSync: !0
}, s = n.prototype, l = e._;
return n.extend({
mixins: [ t, i ],
initialize: function(e) {
var t = this;
t.rangeStart = null, t.rangeEnd = null, t.activeModel = null, t.activeCollection = null, 
t.currentDir = null, t.selectedCount = 0, t.collections = [], t.allTasks = e && e.allTasks || [], 
t.disallowSelectionToOtherGroup = e && !!e.disallowSelectionToOtherGroup, t.state = new a({
selectedIDs: []
}), s.initialize.apply(t, arguments);
},
addCollectionAndClearSelection: function(e, t) {
var i = this;
e.models.forEach(function(e) {
e["transient"].set({
selected: !1,
active: !1
}, r);
}), e.groupId = t.attributes.groupID, e.groupModel = t;
var n = i.collections;
n.push(e);
},
updateRange: function(e, t) {
var i, n = this;
if (!n._isSelectionBleedingDisallowed(t)) {
var a = {
model: e,
collection: t
};
n.rangeStart ? (n.rangeEnd = a, n._deselectAll(), i = n._selectRange(n.rangeStart.model, n.rangeStart.collection, n.rangeEnd.model, n.rangeEnd.collection), 
n.currentDir = i > 0 ? "down" : "up") : n.rangeStart = a;
}
},
_isSelectionBleedingDisallowed: function(e) {
var t = this;
return t.disallowSelectionToOtherGroup && !!t.activeCollection && e !== t.activeCollection;
},
toggleSelection: function(e, t) {
var i, n = this, a = !e.isSelected();
t && n._isSelectionBleedingDisallowed(t) || (n._setAsSelected(e, a), a ? (n._setActiveModel(e, t), 
n._startRange(e, t)) : (i = n._findFirstSelectedModel(), i && n._setActiveModel(i.model, i.collection)));
},
addToSelection: function(e, t) {
var i = this;
i._setAsSelected(e), i._setActiveModel(e, t), i._startRange(e, t);
},
scaleSelection: function(e) {
var t, i = this, n = 1 === i.selectedCount, a = n || i.currentDir === e;
n && (i.currentDir = e), t = i["up" === e ? "_getPreviousModel" : "_getNextModel"](i.activeModel, i.activeCollection), 
t && !i._isSelectionBleedingDisallowed(t.collection) && (a ? i._setAsSelected(t.model, !0) : i._setAsSelected(i.activeModel, !1), 
i._setActiveModel(t.model, t.collection), n && (i.rangeStart = {
model: i.activeModel,
collection: i.activeCollection
}));
},
_moveToNextModelAfterHeader: function(e) {
var t = this;
if (t.clearSelection(), "down" !== e || t.activeHeaderCollection.groupModel.attributes.isCollapsed) {
var i = t.collections.indexOf(t.activeHeaderCollection), n = t._findNextOrPrevCollection(t.collections, i, "up");
if (n) {
var a = n.models[n.length - 1];
t.addToSelection(a, n);
}
} else {
var o = t.activeHeaderCollection.at(0);
o && t.addToSelection(o, t.activeHeaderCollection);
}
},
_setHeaderActive: function(e) {
var t, i = this;
if ("up" === e) t = i.activeCollection; else {
var n = i.collections.indexOf(i.activeCollection);
t = i._findNextOrPrevCollection(i.collections, n, "down"), t || (t = i.collections[n + 1]);
}
var a = t && t.groupModel, o = a && a.attributes.showHeader;
o && (i.clearSelection(), i.activeHeaderCollection = t, i.trigger("activeHeader:set", t.groupId));
},
clearAndMoveSelection: function(e) {
var t, i = this;
if (i.activeHeaderCollection) return void i._moveToNextModelAfterHeader(e);
if (i.activeCollection) if (t = "up" === e ? i._getPreviousModel(i.activeModel, i.activeCollection) : i._getNextModel(i.activeModel, i.activeCollection), 
t && t.model) i.activeCollection && t.collection !== i.activeCollection ? i._setHeaderActive(e) : (i.clearSelection(), 
i.addToSelection(t.model, t.collection)); else if ("up" !== e || i.activeHeaderCollection || i._setHeaderActive(e), 
"down" === e && !i.activeHeaderCollection) {
var n = i.collections.indexOf(i.activeCollection), a = i.collections[n + 1];
a && i._setHeaderActive(e);
}
},
clearSelection: function() {
var e = this;
e.rangeStart = null, e.rangeEnd = null, e.activeModel = null, e.activeCollection = null, 
e.currentDir = null, e._deselectAll();
},
selectAll: function() {
var e = this;
e.activeCollection && e.activeCollection.each(function(t) {
e.addToSelection(t, e.activeCollection);
});
},
deselectAllAndSelectActive: function() {
var e = this;
if (e.activeModel) {
var t = e.activeModel, i = e.activeCollection;
e._deselectAll(), e._setActiveModel(t, i), e._setAsSelected(t, !0);
}
},
getSelectedItems: function() {
var e = this, t = e.state.attributes.selectedIDs.map(function(t) {
return e.allTasks.get(t);
});
return t = t.filter(function(e) {
return !!e;
});
},
_setActiveModel: function(e, t) {
var i = this, n = i.activeModel;
n && n["transient"].set("active", !1, r), i.activeHeaderCollection && (i.trigger("activeHeader:unset", i.activeHeaderCollection.groupId), 
i.activeHeaderCollection = null), i.activeModel = e, i.activeCollection = t, e && (e["transient"].set("active", !0, r), 
i.activeModel = e, i.activeCollection = t, i.trigger("active:set", e.getId()));
},
_startRange: function(e, t) {
var i = this;
i.rangeStart || i.updateRange(e, t);
},
_findFirstSelectedModel: function() {
var e = this, t = e.state.attributes.selectedIDs, i = t.length && e.allTasks.get(t[0]), n = i && i.collections;
return {
model: i,
collection: n
};
},
_setAsSelected: function(e, t) {
var i = this, n = e && e.isSelected();
t === o && (t = !0);
var a = i.getSelectedIDs();
t ? a.push(e.id) : a = l.without(a, e.id), i.state.set("selectedIDs", a), t !== n && e && (e["transient"].set("selected", t, r), 
i._setSelectedCount(i.selectedCount + (t ? 1 : -1)));
},
_getNextModel: function(e, t) {
var i, n = this;
if (!t) return null;
if (i = e ? t.indexOf(e) : -1, i === t.length - 1) {
var a = n.collections, o = a.indexOf(t);
if (t = n._findNextOrPrevCollection(a, o, "down"), !t) return null;
i = 0;
} else i++;
return {
model: t.at(i),
collection: t
};
},
_getPreviousModel: function(e, t) {
var i, n = this;
if (i = e ? t.indexOf(e) : t.length, 0 === i) {
var a = n.collections, o = a.indexOf(t);
if (t = n._findNextOrPrevCollection(a, o, "up"), !t) return null;
i = t.length - 1;
} else i--;
return {
model: t.at(i),
collection: t
};
},
_deselectAll: function() {
var e, t = this, i = t.collections;
t.state.set("selectedIDs", []);
for (var n = 0, a = i.length; a > n; n++) {
e = i[n];
for (var o = 0, s = e.models.length; s > o; o++) e.models[o]["transient"].set({
selected: !1,
active: !1
}, r);
}
t._setSelectedCount(0);
},
_setSelectedCount: function(t) {
var i, n = this;
n.selectedCount = t, 0 === n.selectedCount ? (n.activeModel = null, n.activeCollection = null) : i = n.getSelectedItems(), 
e.trigger("browser:selectionChanged", t || 0, i);
},
getSelectedIDs: function() {
var e = this;
return e.state.attributes.selectedIDs;
}
});
}), define("models/grouping/GroupChunker", [ "project!core/WBEventEmitter" ], function(e) {
var t = e.prototype, i = e.extend({
initialize: function(e, i, n, a) {
var o = this;
o.groupIndex = n, o.chunking = e, o.length = i, o.hasHeader = !!a, o.renderedAmount = 0, 
t.initialize.apply(o, arguments);
},
shouldRenderItem: function(e) {
var t = this;
return e >= 0 && e < t.renderedAmount;
},
setCollectionLength: function(e, t) {
var i = this;
i.length = e, i.chunking._lengthChangedFrom(i.groupIndex, t);
},
_renderedHeight: function() {
var e = this;
return e._calculateHeightForAmount(e.renderedAmount);
},
_calculateHeightForAmount: function(e) {
var t = this, i = t.chunking, n = e * i.itemSize;
return t.hasHeader && t.length > 0 && (n += i.groupHeaderSize), n;
},
_getAmountForHeight: function(e) {
var t = this, i = t.chunking;
t.hasHeader && t.length > 0 && (e -= i.groupHeaderSize);
var n = Math.ceil(e / i.itemSize);
return n = Math.max(n, 0), Math.min(n, t.length);
},
_setRenderedAmount: function(e, t) {
var i, n = this, a = e - n.renderedAmount;
if (e > n.renderedAmount) i = "grow"; else {
if (!(e < n.renderedAmount)) return;
i = "shrink";
}
n.renderedAmount = e, t || (n.chunking._startChunking(a), n.triggerEvent(i, [ n.renderedAmount ]));
},
_remove: function() {
var e = this;
e.triggerEvent("destroy");
}
});
return i;
}), define("models/GroupedListChunking", [ "./grouping/GroupChunker", "project!core/WBEventEmitter" ], function(e, t, i) {
var n = t.prototype, a = t.extend({
initialize: function(e) {
var t = this;
t.groups = [], t.itemSize = e.itemSize, t.viewportHeight = e.viewportHeight, t.groupHeaderSize = e.groupHeaderSize || 0, 
t.viewportOffset = e.viewportOffset || 0, t.excessHeight = e.excessHeight || 0, 
t.excessThreshold = e.excessThreshold || 0, t.fixedContentSize = e.fixedContentSize || 0, 
t.isChunking = !1, t._chunkStart = e.chunkStart, t._chunkEnd = e.chunkEnd, n.initialize.apply(t, arguments);
},
addGroup: function(t, i, n, a) {
var o = this, r = new e(o, i, t, n);
return o.groups[t] = r, o._lengthChangedFrom(t, !1, a), r;
},
appendGroup: function(e, t, i) {
var n = this, a = n.groups.length;
return n.addGroup(a, e, t, i);
},
updateViewport: function(e, t) {
var i = this, n = Math.abs(e - i.viewportOffset);
if (t === i.viewportHeight && n > 0) {
var a = i._getTotalViewportHeight(e, t, 0), o = i._getGroupsHeight();
if (n <= i.excessThreshold && o > a) return;
}
i.viewportOffset = e, i.viewportHeight = t, i._lengthChangedFrom(0);
},
updateViewportHeight: function(e) {
var t = this;
t.viewportHeight = e, t._lengthChangedFrom(0);
},
getTotalHeight: function() {
var e = this;
return e.groups.reduce(function(e, t) {
return e + t._renderedHeight();
}, 0);
},
isViewportFull: function() {
var e = this, t = e._getTotalViewportHeight(), i = e._getGroupsHeight();
return i >= t;
},
_lengthChangedFrom: function(e, t, i) {
for (var n, a = this, o = a.groups.slice(0, e), r = a._getGroupsHeight(o), s = a._getTotalViewportHeight() - r, l = e; s > 0 && l < a.groups.length; ) {
n = a.groups[l];
var d = n._getAmountForHeight(s);
n._setRenderedAmount(d, t), s -= n._renderedHeight(), ++l;
}
0 >= s && l < a.groups.length && a._removeGroupsAtTheBack(a.groups.length - l), 
!i && s > 0 && a.triggerEvent("endReached", [ s ]), a._endChunking();
},
_removeGroupsAtTheBack: function(e) {
var t = this, i = t.groups.length - e, n = t.groups.slice(i);
n.forEach(function(e) {
e._remove();
}), this.groups = this.groups.slice(0, i), this.triggerEvent("shrink", [ i ]);
},
_getGroupsHeight: function(e) {
var t = this;
return e === i && (e = t.groups), e.reduce(function(e, t) {
return t._renderedHeight() + e;
}, 0);
},
_getTotalViewportHeight: function(e, t, n) {
var a = this;
return t === i && (t = a.viewportHeight), e === i && (e = a.viewportOffset), n === i && (n = a.excessHeight), 
e + t + n - a.fixedContentSize;
},
_startChunking: function() {
var e = this;
!e.isChunking && e._chunkStart && (e.isChunking = !0, e._chunkStart());
},
_endChunking: function() {
var e = this;
e.isChunking && e._chunkEnd && (e.isChunking = !1, e._chunkEnd());
}
});
return a;
}), define("mixins/TaskBrowserView/SubviewMixin", [ "application/runtime", "wunderbits/mixins/WBSubviewsMixin" ], function(e, t) {
var i = e._;
return t.extend({
subviewDestroyQueue: [],
destroySubviews: function() {
var e, t = this, n = i.clone(t._subviews) || [];
for (t.subviewDestroyQueue = t.subviewDestroyQueue.concat(n), t._subviews = [], 
t._namedSubviews = []; n.length; ) e = n.shift(), e.$el.detach();
t.debouncedEmptyDestroyQueue || (t.debouncedEmptyDestroyQueue = i.debounce(t.emptyDestroyQueue, 1e3)), 
i.delay(function() {
t.debouncedEmptyDestroyQueue();
}, 1e3);
},
emptyDestroyQueue: function() {
for (var e, t = this, i = t.subviewDestroyQueue; i.length; ) e = i.shift(), e && !e.destroyed && e.destroy();
}
});
}), define("/styles/_tasks.js", {
name: "_tasks",
data: '#wunderlist-base #tasks{top:0;bottom:0;}#wunderlist-base #tasks .tasks-scroll{overflow-y:auto;overflow-x:hidden;position:absolute;bottom:0;top:0;left:0;right:0;padding:0 7px 0 14px;-webkit-overflow-scrolling:touch;}#wunderlist-base #tasks .tasks-scroll .task-list{padding-bottom:72px;}#wunderlist-base #tasks .tasks-scroll .task-list.scrolling ol.tasks{overflow:hidden}#wunderlist-base #tasks .grouped-tasks{position:relative;}#wunderlist-base #tasks .grouped-tasks.positionForDrop{padding-top:60px;margin-top:-60px;padding-bottom:60px}#wunderlist-base #tasks h2.heading{margin-top:20px !important;margin-bottom:10px;word-wrap:break-word;word-break:break-word;font-size:11px;color:#fff;position:relative;}#wunderlist-base #tasks h2.heading.active a{background:#186ab2 !important}#wunderlist-base #tasks h2.heading a{color:#fff;background:rgba(0,0,0,0.3);padding:3px 10px;-webkit-border-radius:3px;border-radius:3px;text-transform:uppercase;letter-spacing:1px;font-weight:400;display:inline-block;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;line-height:16px;}#wunderlist-base #tasks h2.heading a.no-hover:hover{cursor:default !important}#wunderlist-base #tasks h2.heading.no-results{font-size:22px;font-weight:bold;text-transform:none}#wunderlist-base #tasks h2.heading .delete-completed{cursor:pointer;opacity:.4;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=40)";filter:alpha(opacity=40);}#wunderlist-base #tasks h2.heading .delete-completed:hover{opacity:.8;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";filter:alpha(opacity=80)}#wunderlist-base #tasks h2.heading .spinner{-webkit-animation:rotate .8s linear infinite;-moz-animation:rotate .8s linear infinite;-o-animation:rotate .8s linear infinite;-ms-animation:rotate .8s linear infinite;animation:rotate .8s linear infinite;display:block;position:absolute;left:50%;top:10px;margin-left:-10px;margin-top:-10px;width:19px;height:19px;opacity:.6;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";filter:alpha(opacity=60);background:url("images/loading_black@2x.png");-webkit-background-size:19px;-moz-background-size:19px;background-size:19px}#wunderlist-base #tasks .delete-completed{position:absolute;right:0;top:-3px;color:#fff;text-shadow:0 1px 0 rgba(0,0,0,0.45);opacity:.4;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=40)";filter:alpha(opacity=40);}#wunderlist-base #tasks .delete-completed:hover{opacity:.8;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";filter:alpha(opacity=80)}#wunderlist-base #tasks .completed-items-heading,#wunderlist-base #tasks .delete-completed + h2 a{margin-right:40px}html[dir=rtl] #wunderlist-base #tasks h2.heading a{margin-right:0;margin-left:40px}'
}), define("views/Tasks/TasksBrowserView", [ "application/runtime", "project!core/WBStateModel", "vendor/moment", "wunderbits/WBViewPresenter", "views/Tasks/TaskListHeaderView", "views/Tasks/TaskListView", "./Controllers/TaskBrowserViewKeyboardController", "./Controllers/TaskBrowserSelectionController", "./Controllers/TaskContextMenuController", "models/grouping/WeekDayGrouping", "models/grouping/FilterListGrouping", "models/grouping/SearchListGrouping", "models/grouping/SpecificListGrouping", "models/TaskSelection", "models/GroupedListChunking", "collections/TaskCollection", "collections/ListCollection", "helpers/Animator", "wunderbits/helpers/date", "mixins/TaskBrowserView/SubviewMixin", "style!_tasks", "style!taskItem" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m, g, f, b, h, v, _, w, k) {
var x = e.global, y = n.prototype, C = e._, T = n.extend({
className: "task-list",
styles: [ w, k ],
taskSelection: null,
"implements": [ r, s, l ],
emits: {
"contextmenu li.taskItem": "contextmenu:tasks"
},
observes: {
runtime: {
"task:deleted": "selectNextTask",
"browser:navigate": "handleKeyboardSelection",
"browser:unselect": "emitResetSelectedTasks",
"browser:select": "emitSelectTaskById",
"browser:selectFirst": "browserSelectFirst",
"tasks:markDone": "emitToggleDoneFromShortcut",
"tasks:markStarred": "emitToggleStarredFromShortcut",
"tasks:editTitle": "emitOpenEditTitleFromShortcut",
"tasks:delete": "emitDeleteTaskFromShortcut",
"tasks:toggleSelected": "toggleTDV",
"tasks:selectFirst": "emitSelectFirst",
"tasks:selectAll": "emitSelectAllTasks",
"tasks:copy": ">tasks:copy",
"tasks:cut": ">tasks:cut",
"tasks:paste": ">tasks:paste"
},
"*children": {
"animationsState:changed": "_setAnimationStateChanged"
}
},
initialize: function(i) {
var n = this;
i = i || {}, n._debouncedUpdateChunkingViewport = n.debounce(function(e, t) {
n.chunking.updateViewport(e, t);
}, 20), y.initialize.apply(n, arguments), n.state = new t({
scrolling: !1
}), n.getSubview = function(e) {
var t = n._subviews.filter(function(t) {
return t._name === e;
});
return t.length ? t[0] : void 0;
};
var a = n.deferred(), o = n.deferred();
n.allTasksAreInList = n.deferred(), n.ready = n.deferred(), n.currentList = null, 
n.currentLists = {}, n.currentFilter = null, n.currentListId = null, n._isAnimating = !1, 
n._focus = null, n.selectType = null, n.chunking = null, n.bindTo(e, "lists:ready", function() {
n.lists = new b("/lists/accepted"), a.resolve();
}), n.bindTo(e, "tasks:ready", function(e) {
n.allTasks = e, o.resolve();
}), n.bindTo(e, "subtasks:ready", function(e) {
n.allSubTasks = e;
}), n.when(a, o).done(function() {
n.ready.resolve(), n.bindTo(e, "focus:changed", "_onFocusChange"), n.bindTo(e, "browser:taskId", "_getCurrentId"), 
n.bindTo(n.state, "change:scrolling", "_renderScrollState"), n.delegateEvents(), 
n._getCurrentId();
}, n), n.bindTo(e, "focus:changed", n.forceFocus), n.bindTo(n, "viewport:update", C.throttle(n._onScroll, 50)), 
n.bindTo(n, "viewport:update", C.throttle(n._updateChunkingToViewport.bind(n), 50)), 
n.bindOnceTo(e, "sync:ended", function() {
"week" === n.currentFilter ? n.renderFilterOfType(n.currentFilter) : n._adjustChunkingAfterHeightChange();
}), n.bindTo(e, "browser:render", "updateCurrentViewClass"), n.bindTo(e.settings, "change:today_smart_list_visible_tasks", function() {
("week" === n.currentFilter || "today" === n.currentFilter) && n.renderFilterOfType(n.currentFilter);
});
},
updateCurrentViewClass: function(e) {
var t = this;
t.el && (t.$el.attr("class", t.className), t.$el.addClass(e));
},
getCollection: function(t) {
var i = this, n = "/lists/" + t + "/tasks";
return "week" === i.currentFilter || e.smartLists.indexOf(t) >= 0 ? n = "/tasks/filter/" + t : e.state.attributes.inSearchState && (n = "/search/" + encodeURIComponent(e.currentSearchTerm)), 
!e.settings.isScopedFiltersEnabled() || "week" !== t && "today" !== t || (n += "/user"), 
new f(n);
},
browserSelectFirst: function(e) {
var t = this;
t.emitSelectFirst(e), t.forceFocus("browser");
},
_updateChunkingToViewport: function(e, t) {
var i = this;
i.chunking && i._debouncedUpdateChunkingViewport(t, e);
},
_adjustChunkingAfterHeightChange: function() {
var e = this;
e.chunking && e.chunking.updateViewportHeight(x.innerHeight);
},
_createHeaderViewFromGroupModel: function(e, t) {
var i, n = this, o = e.attributes.groupID;
return e.attributes.hasHeader ? (i = new a({
model: e,
chunking: t
}), i.render(), n.addSubview(i, o + "header"), i) : void 0;
},
getHeaderView: function(e) {
return this.getSubview(e + "header");
},
_createListViewFromGroupModel: function(e, t, i) {
var n = this, a = e.attributes.groupID, r = new o({
collection: t,
model: e,
taskSelection: n.taskSelection,
getSelectedNodes: n.getSelectedNodes.bind(n),
chunkingGroup: i
});
return r.render(), n.addSubview(r, a), r;
},
_renderGroupsToFrag: function() {
for (var e, t, i, n, a, o = this, r = document.createDocumentFragment(), s = o.chunking, l = o.taskSelection, d = o.currentGrouping; !s.isViewportFull() && d.hasNext(); ) d.moveNext(), 
t = d.getGroupCollection(), i = d.getGroupModel(), l.addCollectionAndClearSelection(t, i), 
e = s.appendGroup(t.length, i.get("hasHeader"), !0), a = o._createHeaderViewFromGroupModel(i, e), 
a && r.appendChild(a.el), n = o._createListViewFromGroupModel(i, t, e), r.appendChild(n.el);
return r;
},
_renderMoreGroups: function() {
var e = this, t = e._renderGroupsToFrag();
e.el.appendChild(t);
},
_rewindGrouping: function(e) {
var t = this;
t.currentGrouping && t.currentGrouping.rewind(e);
},
_getTotalHeight: function(e) {
for (var t, i = 0; e.hasNext(); ) e.moveNext(), t = e.getItemCount(), i += 39 * t + 52;
return i;
},
_renderGrouping: function(e) {
var t = this;
t.currentGrouping && t.currentGrouping.destroy(), t.currentChunkedView = null, t._isAnimating = !1, 
t.destroySubviews(), t.currentGrouping = e, t.taskSelection = new m({
disallowSelectionToOtherGroup: e.disallowSelectionToOtherGroup(),
allTasks: t.allTasks
}), t.taskSelection.clearSelection(), t.bindTo(t.taskSelection, "active:set", t.emitActiveSet), 
t.bindTo(t.taskSelection, "activeHeader:set", t.emitActiveHeaderSet), t.bindTo(t.taskSelection, "activeHeader:unset", t.emitActiveHeaderUnset), 
t.chunking && (t.chunking.unbindAll(), t.unbindFromTarget(t.chunking)), t.chunking = new g({
viewportHeight: x.innerHeight,
viewportOffset: 0,
excessHeight: 800,
excessThreshold: 400,
itemSize: 38,
groupHeaderSize: 52,
fixedContentSize: t.el.getBoundingClientRect().top
}), t.bindTo(t.chunking, "endReached", t._renderMoreGroups), t.bindTo(t.chunking, "shrink", t._rewindGrouping), 
t.currentContext = e.filter ? e.filter : e.listModel && e.listModel.id;
var i = t._renderGroupsToFrag();
t.el.innerHTML = "", t.el.appendChild(i);
},
renderFilterOfType: function(t) {
var i, n = this;
n.currentFilter = t, n.ready.done(function() {
i = "week" === t ? new d() : new c(n.lists, t), e.trigger("browser:render", t);
var a = n.getCollection(t);
n.check404State(a, t), n.filter404Bind && n.unbindFrom(n.filter404Bind), n.filter404Bind = n.bindTo(a, "add remove", function(e, i) {
n.check404State(i, t);
}), n._renderGrouping(i);
});
},
check404State: function(t, i) {
e.trigger("browser:" + (t.length ? "hide404" : "show404"), i);
},
renderSearch: function(t) {
var i = this;
if (t) {
var n = new u(t, i.lists);
return e.trigger("browser:render", "search"), i._renderGrouping(n);
}
},
renderSingleListToFilter: function(e) {
var t = this, i = new f("/lists/" + e.id + "/tasks"), n = new p(e, i);
return t._renderGrouping(n);
},
renderListWithID: function(t, i) {
var n = this, a = n.deferred();
return n.currentFilter = null, n.filter404Bind && n.unbindFrom(n.filter404Bind), 
"search" === t && (t = e.lastListID), n.ready.done(function() {
var o = n.lists.get(t);
if (o && (e.trigger("browser:render", t), n.renderSingleListToFilter(o), i)) {
var r = n.getCollection(t);
n.taskSelection.toggleSelection(i, r);
}
a.resolve();
}), a.promise();
},
_onFocusChange: function(e) {
var t = this;
t.destroyed || (t._focus = e, "addTask" === e && (t._currentTaskId = null));
},
_getCurrentId: function(e) {
var t = this;
e ? t._currentTaskId = e : e = t._currentTaskId;
},
forceFocus: function(e) {
var t = this;
"browser" === e && t.$(".selected").focus();
},
getSelectedNodes: function() {
var e = this;
if (!e.taskSelection) return [];
var t = e.taskSelection.getSelectedIDs();
return t.map(function(t) {
return e._mapIDtoNode(t);
});
},
_mapIDtoNode: function(e) {
var t = this;
return t.el.querySelector("[rel='" + e + "']");
},
isItemInViewport: function(e) {
var t = e.getBoundingClientRect();
return t.top >= 0 && t.bottom <= x.innerHeight;
},
scrollToElementInViewport: function(t) {
var i = this, n = i.taskSelection.activeModel;
if (t = t || "down", n) {
var a = n.attributes.list_id, o = i.getSubview(a), r = o && o.getSubview(n.id);
if (r) i.isItemInViewport(r.el) || e.trigger("scrollTo:element", r, t); else if (o) {
var s = o.collection.models[o.currentOffset - 10];
s && e.trigger("scrollTo:element", o.getSubview(s.id), t);
}
}
},
changeIdentfier: function() {
this.trigger("changed:identifier");
},
handleKeyboardSelection: function(t, i) {
var n = this, a = e.isOnTaskRoute();
if (!n.taskSelection || "up" !== t && "down" !== t || (i ? n.taskSelection.scaleSelection(t) : n.taskSelection.clearAndMoveSelection(t), 
n.scrollToElementInViewport(t)), "left" === t && (a ? n.toggleTDV() : (e.trigger("focus:set", "sidebar"), 
n.taskSelection.clearSelection())), "right" === t) if (n.taskSelection.activeModel) e.trigger("route:" + n.taskSelection.activeModel.route("/title/focus")), 
n.taskSelection.deselectAllAndSelectActive(); else if (n.taskSelection.activeHeaderCollection) {
var o = n.taskSelection.activeHeaderCollection.groupId, r = n.getHeaderView(o);
r && r.handleNavigation();
}
},
emitResetSelectedTasks: function() {
var e = this;
e.taskSelection && e.taskSelection.clearSelection();
},
emitSelectTaskById: function(e) {
this.trigger("select:task", e);
},
emitToggleDoneFromShortcut: function() {
this.trigger("toggle:done");
},
emitToggleStarredFromShortcut: function() {
this.trigger("toggle:starred");
},
emitOpenEditTitleFromShortcut: function() {
this.trigger("edit:title");
},
emitDeleteTaskFromShortcut: function() {
this.trigger("delete:task");
},
toggleTDV: function() {
var t = this;
e.isOnTaskRoute() ? e.state.attributes.inSearchState ? e.trigger("detail:close", function() {
e.trigger("route:search/" + encodeURIComponent(e.currentSearchTerm)), e.trigger("focus:set", "browser"), 
t.taskSelection.deselectAllAndSelectActive();
}) : (e.trigger("route:lists/" + t.currentContext), e.trigger("focus:set", "browser")) : t.taskSelection.activeModel && e.trigger("route:" + t.taskSelection.activeModel.route());
},
emitActiveSet: function(e) {
var t = this;
t.trigger("change:active", e);
},
emitActiveHeaderSet: function(e) {
var t = this;
t.trigger("change:activeHeader", e);
},
emitActiveHeaderUnset: function(e) {
var t = this;
t.trigger("change:inactiveHeader", e);
},
emitSelectAllTasks: function() {
this.trigger("select:all");
},
_hasSelectableItems: function() {
return this._subviews.some(function(e) {
return "function" == typeof e.hasSelectableItems && e.hasSelectableItems();
});
},
emitSelectFirst: function() {
var t = this;
t._hasSelectableItems() ? (t.trigger("select:first"), e.trigger("focus:set", "browser")) : e.trigger("focus:addTaskInput");
},
_setAnimationStateChanged: function(e) {
var t = this;
t._isAnimating = !!e;
},
isAnimating: function() {
var e = this;
return e._isAnimating;
},
_onScroll: function() {
var e = this;
e.state.set({
scrolling: !0
}), e._setScrollTimeout();
},
_setScrollTimeout: function() {
var e = this;
e._clearScrollTimeout(), e._scrollTimeout = setTimeout(function() {
e.destroyed || e.state.set({
scrolling: !1
});
}, 250);
},
_clearScrollTimeout: function() {
var e = this;
e._scrollTimeout && clearTimeout(e._scrollTimeout);
},
_renderScrollState: function() {
var e = this;
e.requestAnimationFrame(function() {
var t = e.state.attributes.scrolling;
e.$el && e.$el.toggleClass("scrolling", t);
});
}
});
return [ _ ].forEach(function(e) {
e.applyToClass(T);
}), T;
}), define("views/Toolbar/Controllers/ActionBarViewController", [ "application/runtime", "wunderbits/WBViewController", "actions/Factory" ], function(e, t, i) {
var n = e.$, a = t.prototype;
return t.extend({
"implements": {
"toggle:menu": "toggleMenu",
"delete:task": "onDelete",
"share:list": "onShareList",
"duplicate:list": "onDuplicateList",
"flashcards:run": "runFlashCards"
},
initialize: function() {
var e = this;
a.initialize.apply(e, arguments), e.listLookup = i.listLookup(), e.duplication = i.duplication();
},
toggleMenu: function(e) {
this.view.toggleMenu(e);
},
onDelete: function(t) {
n(t.target).hasClass("disabled") || (e.trigger("tasks:delete"), e.trigger("analytics:TaskActionBar:DeleteSelectedTasks"));
},
onShareList: function() {
var t = this, i = t.listLookup.getListModel(e.listId);
if (i) {
var n = i.route("/edit/members"), a = e.currentRoute() === n;
if (!this.view.isSharingEnabled() || a) return;
e.trigger("onboarding:shareListClicked"), e.trigger("route:" + n), e.trigger("analytics:TaskActionBar:clickShareList");
}
},
onDuplicateList: function() {
var t = this, i = t.listLookup.getListModel(e.listId);
i && t.duplication.duplicateList(i.id).done(function(t) {
t && e.trigger("route:" + t.route());
}), t.view.collapseMenu();
},
runFlashCards: function() {
e.isLabsEnabled("flash_cards") && e.trigger("route:labs/flash-cards/" + e.listId);
}
});
}), define("views/Toolbar/Controllers/ActionBarEmailController", [ "application/runtime", "wunderbits/WBViewController" ], function(e, t) {
return t.extend({
"implements": {
"email:list": "emailList",
"email:tasks": "emailSelectedTasks"
},
emailList: function() {
var t = this, i = t.view;
e.trigger("email:list", e.listId), i.collapseMenu(), e.trigger("analytics:TaskActionBar:EmailList");
},
emailSelectedTasks: function() {
var t = this, i = t.view, n = i.getSelectedTasks();
n.length && (e.trigger("email:list", e.listId, n), e.trigger("analytics:TaskActionBar:EmailSelectedTasks")), 
i.collapseMenu();
}
});
}), define("views/Toolbar/Controllers/ActionBarPrintController", [ "application/runtime", "actions/Factory", "wunderbits/WBViewController" ], function(e, t, i) {
return i.extend({
"implements": {
"print:list": "printList",
"print:tasks": "printSelected"
},
printList: function() {
this.view.collapseMenu(), t.print().printList();
},
printSelected: function(e) {
var i = this;
i.view.isParentLIDisabled(e) || t.print().printSelected();
}
});
}), define("views/Toolbar/Controllers/ActionBarKeysController", [ "application/runtime", "collections/TaskCollection", "wunderbits/data/keycodes", "wunderbits/WBViewController" ], function(e, t, i, n) {
var a = e.$;
return n.extend({
"implements": {
keydown: "handleKeys"
},
tasks: new t("/tasks/all"),
handleKeys: function(e) {
var t = this, n = t.view, o = e.which, r = a(e.target);
o === i.tab ? t.handleTab(e, r) : o === i.enter ? t.handleEnter(e, r) : o === i.esc && (n.focusMenuItemToggle(r), 
t.stopItCold(e));
},
handleEnter: function(e, t) {
var i = this, n = t.closest("div");
n.hasClass("actionBar-top") ? i.handleMenuItemEnter(e, t) : n.hasClass("actionBar-bottom") && i.handleMenuBarEnter(e, t);
},
handleMenuItemEnter: function(e, t) {
var i = this, n = i.view, a = t.hasClass("disabled");
!a && t.find("a").click(), n.focusMenuItemToggle(t), i.stopItCold(e);
},
handleMenuBarEnter: function(e, t) {
var i = this;
t.click(), i.stopItCold(e);
},
handleTab: function(t, i) {
var n = this;
if (i.hasClass("first-menu-item") || i.hasClass("last-menu-item")) n.handleMenuItemTab(t, i); else if (t.shiftKey && i.hasClass("first-tab")) e.trigger("focus:set", "browser"), 
a(a(".task-list").find("li.selected").get(0)).focus(), n.stopItCold(t); else if (!t.shiftKey && i.hasClass("last-tab")) {
var o = a(".task-list").find("li.selected").attr("rel");
if (o) {
var r = n.tasks.get(o);
e.trigger("route:" + r.route("/title/focus"));
} else e.trigger("route:" + e.currentRoute());
n.stopItCold(t);
}
},
handleMenuItemTab: function(e, t) {
var i = this, n = i.view;
e.shiftKey && t.hasClass("first-menu-item") ? (n.focusLastMenuItem(t), i.stopItCold(e)) : !e.shiftKey && t.hasClass("last-menu-item") && (n.focusFirstMenuItem(t), 
i.stopItCold(e));
},
stopItCold: function(e) {
e.preventDefault(), e.stopPropagation();
}
});
}), define("views/Toolbar/Controllers/ActionBarMuteController", [ "application/runtime", "wunderbits/WBViewController", "actions/Factory" ], function(e, t, i, n) {
var a = t.prototype;
return t.extend({
"implements": {
"toggle:muted": "toggleMuted"
},
initialize: function() {
var e = this;
a.initialize.apply(e, arguments), e.muteList = i.muteList();
},
toggleMuted: function() {
var e = this, t = e.view.ownMembership, i = t && !t.attributes.muted;
t && i !== n && e.muteList.setListMuted(t.attributes.list_id, i);
}
});
}), define("views/Toolbar/Controllers/ActionBarPublishController", [ "application/runtime", "wunderbits/WBViewController", "actions/Factory" ], function(e, t) {
var i = e._, n = t.prototype;
return t.extend({
"implements": {
"open:publicList": "openPublicList",
"unpublish:list": "unpublishList",
"publish:confirm": "firePublishConfirmDialog"
},
initialize: function() {
var e = this;
n.initialize.apply(e, arguments);
},
openPublicList: function() {
var t = this, i = t.view.model, n = i.getFullPublicURL();
e.openUrl(n, !0);
},
unpublishList: function() {
var e = this, t = e.view.model;
t && t.save({
"public": !1
}), e.view.collapseMenu();
},
publishList: function() {
var e = this, t = e.view.model;
t && t.save({
"public": !0
});
},
firePublishConfirmDialog: function() {
var t = this, n = e.language.getLabel, a = t.view.model;
if (a) {
var o = a.attributes.title, r = n("publish_list_confirmation_$", i.escape(o)).toString(), s = n("button_publish").toString();
e.trigger("modal:confirm", {
customTitle: r,
customText: e.language.getText("publish_list_confirmation_copy"),
confirmText: s,
confirm: t.publishList.bind(t),
customIconClass: "wundercon publish-success",
cancel: function() {}
});
}
}
});
}), define("helpers/destructiveSorting", [ "application/runtime", "collections/UserCollection", "collections/ListCollection", "collections/TaskCollection", "helpers/collectionSorting", "helpers/Positions", "vendor/moment", "project!core/WBSingleton" ], function(e, t, i, n, a, o, r, s, l) {
var d = e._, c = [ "alpha", "dueDate", "assignee", "position", "creation", "priority" ];
return s.extend({
init: function() {
e.on("destructive:sort", this.resortCollection);
},
resortCollection: function(e, t, i) {
var n = this;
if (e) {
var a;
a = e.models[0] && /task/i.test(e.models[0].attributes.type) ? e.where({
completed: !1
}) : d.clone(e.models), e.remove(a, {
fromDestructiveSort: !0
});
var o = "sortBy" + t.charAt(0).toUpperCase() + t.substring(1, t.length);
a = n[o](a, i);
var r = 0;
return d.each(a, function(e) {
e.save({
position: r
}), r += 10;
}), e.add(a, {
bypassSort: !0,
fromDestructiveSort: !0
}), a;
}
},
resortList: function(e, t) {
var i = this, a = new n("/lists/" + e + "/tasks");
if (a.models.length && !(d.indexOf(c, t) < 0)) {
var o = i.resortCollection(a, t, e);
return o;
}
},
resortSortableLists: function(e) {
var t = this, n = new i("/lists/sortable");
if (n.models.length && !(d.indexOf(c, e) < 0)) {
var a = t.resortCollection(n, e);
return a;
}
},
sortByPosition: function(e) {
return e.sort(function(e, t) {
var i = e.attributes.position, n = t.attributes.position;
return o.isValidPosition(i) && o.isValidPosition(n) && i !== n ? n > i ? -1 : i > n ? 1 : 0 : e.id < t.id ? -1 : e.id > t.id ? 1 : 0;
}), e;
},
sortByAlpha: function(e) {
function t(e) {
var t = i[e.id];
return t !== l ? t : (i[e.id] = (e.attributes.title || "").toLowerCase(), i[e.id]);
}
var i = {};
return e.sort(function(e, i) {
var n = t(e), a = t(i);
return n === a && (n = e.attributes.position, a = i.attributes.position), n > a ? 1 : a > n ? -1 : 0;
}), e;
},
sortByDueDate: function(e) {
function t(e, t) {
var n = i[t][e.id];
return n !== l ? n : (i[t][e.id] = e.attributes[t] ? r(e.attributes[t]).valueOf() : l, 
i[t][e.id]);
}
var i = {
created_at: {},
due_date: {}
}, n = d.filter(e, function(e) {
return !!e.attributes.due_date;
}), a = d.filter(e, function(e) {
return !e.attributes.due_date;
});
return n.sort(function(e, i) {
var n = t(e, "due_date"), a = t(i, "due_date");
return n === a && (n = e.attributes.position, a = i.attributes.position), n > a ? 1 : a > n ? -1 : 0;
}), a.sort(function(e, i) {
var n, a;
return e.attributes.created_at && i.attributes.created_at ? (n = t(e, "created_at"), 
a = t(i, "created_at"), n === a && (n = e.attributes.position, a = i.attributes.position), 
n > a ? 1 : a > n ? -1 : 0) : (n = e.attributes.created_at, a = i.attributes.created_at, 
!n && a ? 1 : n && !a ? -1 : 0);
}), e = n.concat(a);
},
sortByAssignee: function(e, t) {
function i(e) {
var i = a[e.id];
return i !== l ? i : (a[e.id] = n.getAssigneeNameFromId(e.attributes.assignee_id, t).toLowerCase(), 
a[e.id]);
}
var n = this, a = {}, o = d.filter(e, function(e) {
return !!e.attributes.assignee_id;
}), r = d.filter(e, function(e) {
return !e.attributes.assignee_id;
});
return o.sort(function(e, t) {
var n = i(e), a = i(t);
return n === a && (n = e.attributes.position, a = t.attributes.position), n > a ? 1 : a > n ? -1 : 0;
}), r = n.sortByDueDate(r), e = o.concat(r);
},
sortByCreation: function(e) {
return e.sort(function(e, t) {
var i, n;
return i = e.attributes.created_at, n = t.attributes.created_at, i === n && (i = e.attributes.position, 
n = t.attributes.position), i > n ? 1 : n > i ? -1 : 0;
}), e;
},
sortByPriority: function(e) {
var t = this, i = d.filter(e, function(e) {
return !!e.attributes.starred;
}), n = d.filter(e, function(e) {
return !e.attributes.starred;
});
return i = t.sortByDueDate(i), n = t.sortByDueDate(n), e = i.concat(n);
},
getAssigneeNameFromId: function(e, i) {
var n = new t("/lists/" + i + "/assignables");
return n.get(e).attributes.name;
}
});
}), define("views/Toolbar/Controllers/ActionBarSortController", [ "application/runtime", "helpers/destructiveSorting", "wunderbits/WBViewController" ], function(e, t, i) {
var n = i.prototype;
return i.extend({
"implements": {
"sort:alpha": "debouncedSortAlpha",
"sort:date": "debouncedSortDate",
"sort:assignee": "debouncedSortAssignee",
"sort:creation": "debouncedSortCreation",
"sort:priority": "debouncedSortPriority"
},
initialize: function() {
var e = this;
e.debouncedSortAlpha = e.debounce(e.sortAlpha, 250), e.debouncedSortDate = e.debounce(e.sortDate, 250), 
e.debouncedSortAssignee = e.debounce(e.sortAssignee, 250), e.debouncedSortCreation = e.debounce(e.sortCreation, 250), 
e.debouncedSortPriority = e.debounce(e.sortPriority, 250), n.initialize.apply(e, arguments);
},
sortAlpha: function() {
this._sortByType("alpha");
},
sortDate: function() {
var e = this, t = e.view, i = t.isDateSortingEnabled();
i && e._sortByType("dueDate");
},
sortAssignee: function() {
var e = this, t = e.view, i = t.isAssigneeSortingEnabled();
i && e._sortByType("assignee");
},
sortCreation: function() {
this._sortByType("creation");
},
sortPriority: function() {
this._sortByType("priority");
},
_sortByType: function(i) {
var n = this, a = n.view;
t.resortList(a.listID, i), e.trigger("analytics:TaskActionBar:Sort", i), a.collapseMenu();
}
});
}), define("/templates/symbols/share.js", {
name: "symbols/share",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return ' <svg class="share" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>share</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="share" sketch:type="MSArtboardGroup" > <path d="M11.5025,12 C13.7825,12 15.5025,8.84 15.5025,6 C15.5025,3.8 13.7025,2 11.5025,2 C9.3025,2 7.5025,3.8 7.5025,6 C7.5025,8.5 9.0225,12 11.5025,12 L11.5025,12 Z M11.5025,3 C13.1625,3 14.5025,4.34 14.5025,6 C14.5025,8.26 13.1225,11 11.5025,11 C9.8425,11 8.5025,8.26 8.5025,6 C8.5025,4.34 9.8425,3 11.5025,3 L11.5025,3 Z M4.5025,10 L6.0025,10 C6.2825,10 6.5025,9.78 6.5025,9.5 C6.5025,9.22 6.2825,9 6.0025,9 L4.5025,9 L4.5025,7.5 C4.5025,7.22 4.2825,7 4.0025,7 C3.7225,7 3.5025,7.22 3.5025,7.5 L3.5025,9 L2.0025,9 C1.7225,9 1.5025,9.22 1.5025,9.5 C1.5025,9.78 1.7225,10 2.0025,10 L3.5025,10 L3.5025,11.5 C3.5025,11.78 3.7225,12 4.0025,12 C4.2825,12 4.5025,11.78 4.5025,11.5 L4.5025,10 Z M18.2625,14.88 C18.0625,14 17.4025,13.28 16.5225,13.04 L14.2225,12.36 C14.0825,12.32 13.9625,12.26 13.8625,12.14 C13.6625,11.96 13.3425,11.96 13.1625,12.16 C12.9625,12.34 12.9625,12.66 13.1625,12.86 C13.3825,13.08 13.6425,13.24 13.9425,13.32 L16.2425,14 C16.7625,14.14 17.1625,14.58 17.2825,15.1 L17.4425,15.8 C16.9025,16.16 15.2025,17 11.5025,17 C7.7825,17 6.1025,16.14 5.5625,15.8 L5.7225,15.04 C5.8425,14.5 6.2625,14.06 6.8025,13.92 L9.0425,13.32 C9.3425,13.24 9.6225,13.08 9.8625,12.86 C10.0425,12.66 10.0425,12.34 9.8625,12.14 C9.6625,11.96 9.3425,11.96 9.1425,12.14 C9.0425,12.24 8.9225,12.32 8.7825,12.36 L6.5425,12.96 C5.6425,13.2 4.9625,13.92 4.7425,14.82 L4.5225,15.9 C4.4825,16.06 4.5225,16.24 4.6425,16.36 C4.7225,16.42 6.3625,18 11.5025,18 C16.6425,18 18.2825,16.42 18.3625,16.36 C18.4825,16.24 18.5225,16.06 18.4825,15.9 L18.2625,14.88 Z" id="W" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/symbols/publish.js", {
name: "symbols/publish",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return ' <svg class="publish" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>publish</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="publish" sketch:type="MSArtboardGroup" > <path d="M10,2 C5.58,2 2,5.58 2,10 C2,14.42 5.58,18 10,18 C14.42,18 18,14.42 18,10 C18,5.58 14.42,2 10,2 L10,2 Z M10,17 C9.26,17 8.54,16.88 7.88,16.66 C8.12,15.28 7.6,13.82 6.48,12.94 L6.18,12.68 L6.16,12.68 L5.52,12.16 C5.2,11.9 5.02,11.54 5,11.14 C4.98,10.74 5.12,10.36 5.42,10.1 L5.66,9.86 L6.06,9.46 C6.9,8.66 7.12,7.4 6.58,6.34 L5.68,4.5 C6.86,3.56 8.36,3 10,3 C11.12,3 12.18,3.26 13.12,3.74 C12.7,4.3 12.06,4.7 11.36,4.82 L10.36,4.96 C9.6,5.1 9.02,5.76 9.02,6.54 C9,7.04 9.26,7.5 9.68,7.76 C10.1,8.02 10.64,8.04 11.08,7.82 L12.54,7.08 C12.7,7 12.9,7.02 13.04,7.14 L13.48,7.5 C13.88,7.84 14.38,8 14.88,8 C15.18,8 15.48,7.94 15.78,7.82 L16.54,7.48 C16.84,8.26 17,9.12 17,10 C17,13.86 13.86,17 10,17 L10,17 Z M15.38,6.9 C14.96,7.08 14.48,7.02 14.12,6.72 L13.66,6.36 C13.22,6 12.6,5.94 12.08,6.2 L10.62,6.94 C10.5,7 10.34,7 10.22,6.92 C10.08,6.84 10.02,6.7 10.02,6.56 C10.02,6.26 10.24,6 10.52,5.96 L11.52,5.8 C12.52,5.64 13.4,5.06 13.98,4.24 C14.86,4.86 15.58,5.64 16.1,6.58 L15.38,6.9 Z M3,10 C3,8.14 3.72,6.46 4.9,5.2 L5.7,6.8 C6.02,7.46 5.9,8.24 5.36,8.74 L4.96,9.14 L4.72,9.38 C4.22,9.84 3.96,10.52 4,11.2 C4.04,11.88 4.36,12.5 4.88,12.94 L5.54,13.46 L5.56,13.46 L5.86,13.72 C6.64,14.34 7.02,15.32 6.92,16.28 C4.6,15.14 3,12.76 3,10 L3,10 Z M11.48,9 C11.1,9 10.38,9.08 9.78,9.68 C9.26,10.2 9,10.98 9,12 C9.02,14.44 11.14,15.86 11.22,15.92 C11.3,15.98 11.4,16 11.5,16 C11.8,16 12.02,15.78 12.02,15.5 C12.02,15.44 12,15.38 11.98,15.32 C11.96,14.96 11.96,13.92 12.44,13.24 C12.56,13.08 12.74,12.92 12.94,12.76 C13.4,12.38 13.96,11.92 13.96,10.98 C13.96,10.3 13.44,9 11.48,9 L11.48,9 Z M12.3,12 C12.06,12.2 11.82,12.4 11.62,12.66 C11.24,13.2 11.08,13.84 11.02,14.4 C10.54,13.86 10,13.04 10,12 C10,11.26 10.16,10.72 10.5,10.38 C10.82,10.04 11.26,10 11.48,10 C12.92,10 12.96,10.88 12.96,10.98 C12.96,11.42 12.72,11.64 12.3,12 L12.3,12 Z" id="√" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/symbols/published.js", {
name: "symbols/published",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<svg class="publish-active" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>publish-active</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="publish-active" sketch:type="MSArtboardGroup" > <path d="M14.46,14 C14.2,13.98 13.98,13.74 14,13.46 L14,13.18 L14,13 C14,9.14 10.86,6 7,6 L6.5,6 C6.22,6 6,5.78 6,5.5 C6,5.22 6.22,5 6.5,5 L7,5 C11.4,5 15,8.58 15,13 L15,13.16 L15,13.54 C14.98,13.8 14.76,14 14.5,14 L14.46,14 Z M11.5,14 C11.22,14 11,13.78 11,13.5 L11,13 C11,10.8 9.2,9 7,9 L6.5,9 C6.22,9 6,8.78 6,8.5 C6,8.22 6.22,8 6.5,8 L7,8 C9.76,8 12,10.24 12,13 L12,13.5 C12,13.78 11.78,14 11.5,14 L11.5,14 Z M7,15 C5.9,15 5,14.1 5,13 C5,11.9 5.9,11 7,11 C8.1,11 9,11.9 9,13 C9,14.1 8.1,15 7,15 L7,15 Z M7,12 C6.44,12 6,12.44 6,13 C6,13.56 6.44,14 7,14 C7.54,14 8,13.56 8,13 C8,12.44 7.54,12 7,12 L7,12 Z" id="†" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/symbols/sort-az.js", {
name: "symbols/sort-az",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return ' <svg class="sort-az"width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>sort-az</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="sort-az" sketch:type="MSArtboardGroup" > <path d="M14.2,2.3 C14.12,2.12 13.94,2 13.76,2 L13.26,2 C13.06,2 12.88,2.12 12.8,2.3 L10.04,8.3 C9.94,8.54 10.04,8.84 10.3,8.96 C10.54,9.08 10.84,8.96 10.96,8.7 L11.74,7 L15.26,7 L16.04,8.7 C16.14,8.9 16.32,9 16.5,9 C16.58,9 16.64,8.98 16.7,8.96 C16.96,8.84 17.06,8.54 16.96,8.3 L14.2,2.3 Z M5.64,3.02 C5.56,3 5.48,3 5.4,3 C5.3,3.02 5.22,3.08 5.14,3.16 L3.14,5.14 C2.96,5.34 2.96,5.66 3.14,5.86 C3.34,6.04 3.66,6.04 3.86,5.86 L5,4.7 L5,8.5 C5,8.78 5.22,9 5.5,9 C5.78,9 6,8.78 6,8.5 L6,4.7 L7.14,5.86 C7.24,5.96 7.38,6 7.5,6 C7.62,6 7.76,5.96 7.86,5.86 C8.04,5.66 8.04,5.34 7.86,5.14 C5.68,2.98 5.8,3.08 5.64,3.02 L5.64,3.02 Z M14.8,6 L12.2,6 L13.5,3.16 L14.8,6 Z M6,15.3 L6,11.5 C6,11.22 5.78,11 5.5,11 C5.22,11 5,11.22 5,11.5 L5,15.3 L3.86,14.14 C3.66,13.96 3.34,13.96 3.14,14.14 C2.96,14.34 2.96,14.66 3.14,14.86 C5.28,17 5.2,16.96 5.4,17 C5.56,17.02 5.74,16.98 5.86,16.84 L7.86,14.86 C8.04,14.66 8.04,14.34 7.86,14.14 C7.66,13.96 7.34,13.96 7.14,14.14 L6,15.3 Z M15.94,11.26 C15.86,11.1 15.68,11 15.5,11 L11.5,11 C11.22,11 11,11.22 11,11.5 C11,11.78 11.22,12 11.5,12 L14.56,12 L11.08,17.22 C10.98,17.38 10.98,17.58 11.06,17.74 C11.14,17.9 11.32,18 11.5,18 L15.5,18 C15.78,18 16,17.78 16,17.5 C16,17.22 15.78,17 15.5,17 L12.44,17 L15.92,11.78 C16.02,11.62 16.02,11.42 15.94,11.26 L15.94,11.26 Z" id="sort" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/symbols/open-public-list.js", {
name: "symbols/open-public-list",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return ' <svg class="open-public-list" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>open-public-list</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="open-public-list" sketch:type="MSArtboardGroup" > <path d="M10.8575,2.1375 C10.6575,1.9575 10.3375,1.9575 10.1375,2.1375 C9.9575,2.3375 9.9575,2.6575 10.1375,2.8575 L15.2975,7.9975 L11.4975,7.9975 C6.8175,7.9975 2.9975,11.8175 2.9975,16.4975 L2.9975,17.4975 C2.9975,17.7775 3.2175,17.9975 3.4975,17.9975 C3.7775,17.9975 3.9975,17.7775 3.9975,17.4975 L3.9975,16.4975 C3.9975,12.3575 7.3575,8.9975 11.4975,8.9975 L15.2975,8.9975 L10.1375,14.1375 C9.9575,14.3375 9.9575,14.6575 10.1375,14.8575 C10.2375,14.9575 10.3775,14.9975 10.4975,14.9975 C10.6175,14.9975 10.7575,14.9575 10.8575,14.8575 L16.8375,8.8575 C17.0575,8.6575 17.0575,8.3375 16.8375,8.1375 L10.8575,2.1375 Z" id="∆" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/symbols/unpublish-list.js", {
name: "symbols/unpublish-list",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return ' <svg class="unpublish" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>unpublish-list</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="unpublish-list" sketch:type="MSArtboardGroup" > <path d="M6.14,4.16 C7.3,3.4 8.62,3 10,3 C11.12,3 12.18,3.26 13.12,3.74 C12.7,4.3 12.06,4.7 11.36,4.82 L10.36,4.96 C9.6,5.1 9.02,5.76 9.02,6.54 C9,7.04 9.26,7.5 9.68,7.76 C10.12,8.02 10.64,8.04 11.08,7.82 L12.54,7.08 C12.7,7 12.9,7.02 13.04,7.14 L13.48,7.5 C13.88,7.84 14.38,8 14.88,8 C15.18,8 15.48,7.94 15.78,7.82 L16.54,7.48 C16.84,8.26 17,9.12 17,10 C17,11.38 16.6,12.7 15.84,13.86 C15.68,14.08 15.74,14.4 15.98,14.56 C16.06,14.6 16.16,14.64 16.26,14.64 C16.42,14.64 16.58,14.56 16.68,14.42 C17.54,13.1 18,11.58 18,10 C18,5.58 14.42,2 10,2 C8.42,2 6.9,2.46 5.58,3.32 C5.36,3.48 5.3,3.8 5.44,4.02 C5.6,4.26 5.92,4.32 6.14,4.16 L6.14,4.16 Z M3.86,3.14 C3.66,2.96 3.34,2.96 3.14,3.14 C2.96,3.34 2.96,3.66 3.14,3.86 L16.14,16.86 C16.24,16.96 16.38,17 16.5,17 C16.62,17 16.76,16.96 16.86,16.86 C17.04,16.66 17.04,16.34 16.86,16.14 L3.86,3.14 Z M15.38,6.9 C14.96,7.08 14.48,7.02 14.12,6.72 L13.66,6.36 C13.22,6 12.6,5.94 12.08,6.2 L10.62,6.94 C10.5,7 10.34,7 10.22,6.92 C10.08,6.84 10.02,6.7 10.02,6.56 C10.02,6.26 10.24,6 10.52,5.96 L11.52,5.8 C12.52,5.64 13.4,5.06 13.98,4.24 C14.86,4.86 15.58,5.64 16.1,6.58 L15.38,6.9 Z M13.86,15.84 C12.7,16.6 11.38,17 10,17 C9.26,17 8.54,16.88 7.88,16.66 C8.12,15.28 7.6,13.82 6.48,12.94 L6.18,12.68 L6.16,12.68 L5.52,12.16 C5.2,11.9 5.02,11.54 5,11.14 C4.98,10.74 5.12,10.36 5.42,10.1 L5.66,9.86 L6.06,9.46 C6.32,9.22 6.52,8.9 6.66,8.5 C6.76,8.24 6.64,7.96 6.38,7.86 C6.12,7.76 5.84,7.88 5.74,8.14 C5.64,8.4 5.52,8.6 5.36,8.74 L4.96,9.14 L4.72,9.38 C4.22,9.84 3.96,10.52 4,11.2 C4.04,11.88 4.36,12.5 4.88,12.94 L5.54,13.46 L5.56,13.46 L5.86,13.72 C6.64,14.34 7.02,15.32 6.92,16.28 C4.6,15.14 3,12.76 3,10 C3,8.62 3.4,7.28 4.16,6.14 C4.32,5.92 4.26,5.6 4.02,5.44 C3.78,5.3 3.48,5.36 3.32,5.6 C2.46,6.9 2,8.42 2,10 C2,14.42 5.58,18 10,18 C11.58,18 13.1,17.54 14.42,16.68 C14.64,16.52 14.7,16.2 14.56,15.98 C14.4,15.74 14.08,15.68 13.86,15.84 L13.86,15.84 Z M13.42,11.8 C13.66,11.8 13.86,11.66 13.92,11.42 C13.96,11.26 13.96,11.12 13.96,10.98 C13.96,10.34 13.48,9.08 11.66,9.02 C11.38,8.98 11.14,9.22 11.14,9.5 C11.12,9.76 11.34,10 11.62,10.02 C12.92,10.06 12.96,10.9 12.96,10.98 C12.96,11.04 12.96,11.12 12.94,11.2 C12.88,11.46 13.04,11.74 13.32,11.8 L13.42,11.8 Z M10.02,11.68 C10.04,11.4 9.84,11.22 9.56,11.2 C9.3,11.18 9.04,11.44 9.02,11.7 C9,11.8 9,11.9 9,12 C9.02,14.44 11.14,15.86 11.22,15.92 C11.3,15.98 11.4,16 11.5,16 C11.58,16 11.68,15.98 11.76,15.92 C11.92,15.82 12.02,15.64 12,15.44 C12,15.44 11.92,14.66 12.14,13.92 C12.2,13.64 12.06,13.36 11.78,13.3 C11.52,13.22 11.24,13.36 11.16,13.64 C11.1,13.9 11.04,14.16 11.02,14.4 C10.54,13.86 10,13.04 10,12 C10,11.92 10,11.88 10.02,11.82 L10.02,11.68 Z" id="ƒ" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/symbols/sort-date.js", {
name: "symbols/sort-date",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return ' <svg class="sort-date" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>sort-date</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="sort-date" sketch:type="MSArtboardGroup" > <path d="M2.5,7 C2.22,7 2,6.78 2,6.5 L2,3.5 C2,2.68 2.68,2 3.5,2 L16.5,2 C17.32,2 18,2.68 18,3.5 L18,6.5 C18,6.78 17.78,7 17.5,7 L2.5,7 Z M3,6 L17,6 L17,3.5 C17,3.22 16.78,3 16.5,3 L3.5,3 C3.22,3 3,3.22 3,3.5 L3,6 Z M3.5,18 C2.68,18 2,17.32 2,16.5 L2,8.5 C2,8.22 2.22,8 2.5,8 C2.78,8 3,8.22 3,8.5 L3,16.5 C3,16.78 3.22,17 3.5,17 L16.5,17 C16.78,17 17,16.78 17,16.5 L17,8.5 C17,8.22 17.22,8 17.5,8 C17.78,8 18,8.22 18,8.5 L18,16.5 C18,17.32 17.32,18 16.5,18 L3.5,18 Z M9,13.12 C9.12,13.12 9.2,13.16 9.26,13.22 C9.3,13.28 9.34,13.34 9.34,13.44 L9.34,14 L5.86,14 L5.86,13.68 C5.86,13.62 5.88,13.56 5.9,13.5 C5.94,13.42 5.98,13.36 6.04,13.3 L7.52,11.82 C7.64,11.68 7.76,11.56 7.86,11.46 C7.94,11.34 8.02,11.22 8.1,11.12 C8.16,11 8.2,10.88 8.24,10.78 C8.28,10.66 8.28,10.54 8.28,10.4 C8.28,10.18 8.22,10.02 8.12,9.9 C8,9.78 7.84,9.72 7.62,9.72 C7.54,9.72 7.46,9.74 7.38,9.76 C7.3,9.8 7.22,9.82 7.16,9.88 C7.1,9.92 7.06,9.98 7,10.04 C6.96,10.1 6.94,10.16 6.92,10.24 C6.88,10.36 6.82,10.44 6.74,10.46 C6.68,10.5 6.58,10.52 6.44,10.5 L5.94,10.4 C5.98,10.16 6.04,9.94 6.16,9.76 C6.26,9.58 6.38,9.42 6.54,9.3 C6.68,9.18 6.86,9.1 7.06,9.04 C7.24,8.96 7.46,8.94 7.68,8.94 C7.92,8.94 8.14,8.98 8.32,9.04 C8.52,9.12 8.68,9.22 8.82,9.34 C8.96,9.46 9.08,9.62 9.14,9.8 C9.22,9.96 9.26,10.16 9.26,10.38 C9.26,10.56 9.24,10.74 9.18,10.88 C9.14,11.04 9.06,11.2 8.96,11.34 C8.88,11.48 8.78,11.62 8.66,11.74 L8.28,12.16 L7.2,13.24 C7.32,13.2 7.44,13.18 7.56,13.16 C7.68,13.14 7.78,13.12 7.88,13.12 L9,13.12 Z M10.48,9 L13.96,9 L13.96,9.4 C13.96,9.52 13.96,9.62 13.92,9.7 L13.86,9.88 L12.02,13.68 C11.98,13.78 11.92,13.84 11.84,13.9 C11.76,13.96 11.66,14 11.52,14 L10.84,14 L12.7,10.28 L12.84,10.04 C12.9,9.98 12.94,9.9 13,9.84 L10.7,9.84 C10.64,9.84 10.6,9.82 10.54,9.78 C10.5,9.74 10.48,9.68 10.48,9.62 L10.48,9 Z" id="c" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/symbols/sort-creation.js", {
name: "symbols/sort-creation",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return ' <svg class="sort-creation" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>sort-creation</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="sort-creation" sketch:type="MSArtboardGroup" > <path d="M9.5,17 C5.36,17 2,13.64 2,9.5 C2,5.36 5.36,2 9.5,2 C13.64,2 17,5.36 17,9.5 C17,9.78 16.78,10 16.5,10 C16.22,10 16,9.78 16,9.5 C16,5.92 13.08,3 9.5,3 C5.92,3 3,5.92 3,9.5 C3,13.08 5.92,16 9.5,16 C9.78,16 10,16.22 10,16.5 C10,16.78 9.78,17 9.5,17 L9.5,17 Z M6.5,11 C6.22,11 6,10.78 6,10.5 C6,10.22 6.22,10 6.5,10 L10,10 L10,5.5 C10,5.22 10.22,5 10.5,5 C10.78,5 11,5.22 11,5.5 L11,10.5 C11,10.78 10.78,11 10.5,11 L6.5,11 Z M12.5,18 C11.68,18 11,17.32 11,16.5 L11,12.5 C11,11.68 11.68,11 12.5,11 L16.5,11 C17.32,11 18,11.68 18,12.5 L18,16.5 C18,17.32 17.32,18 16.5,18 L12.5,18 Z M12.5,12 C12.22,12 12,12.22 12,12.5 L12,16.5 C12,16.78 12.22,17 12.5,17 L16.5,17 C16.78,17 17,16.78 17,16.5 L17,12.5 C17,12.22 16.78,12 16.5,12 L12.5,12 Z M14.5,16 C14.22,16 14,15.78 14,15.5 L14,14.3 L13.72,14.44 C13.48,14.58 13.18,14.48 13.06,14.22 C12.92,13.98 13.02,13.68 13.28,13.56 L14.28,13.06 C14.44,12.98 14.62,12.98 14.76,13.08 C14.92,13.16 15,13.32 15,13.5 L15,15.5 C15,15.78 14.78,16 14.5,16 L14.5,16 Z" id="≠" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/symbols/email.js", {
name: "symbols/email",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<svg class="email" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>email</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="email" sketch:type="MSArtboardGroup" > <path d="M4.5,17 C3.12,17 2,15.88 2,14.5 L2,5.5 C2,4.12 3.12,3 4.5,3 L15.5,3 C16.88,3 18,4.12 18,5.5 L18,14.5 C18,15.88 16.88,17 15.5,17 L4.5,17 Z M4.5,4 C3.68,4 3,4.68 3,5.5 L3,14.5 C3,15.32 3.68,16 4.5,16 L15.5,16 C16.32,16 17,15.32 17,14.5 L17,5.5 C17,4.68 16.32,4 15.5,4 L4.5,4 Z M10,11.5 C9.88,11.5 9.74,11.46 9.64,11.36 L4.14,5.86 C3.96,5.66 3.96,5.34 4.14,5.14 C4.34,4.96 4.66,4.96 4.86,5.14 L10,10.3 L15.14,5.14 C15.34,4.96 15.66,4.96 15.86,5.14 C16.04,5.34 16.04,5.66 15.86,5.86 L10.36,11.36 C10.26,11.46 10.12,11.5 10,11.5 L10,11.5 Z" id="X" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/symbols/print.js", {
name: "symbols/print",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<svg class="print" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g sketch:type="MSArtboardGroup"> <path d="M4.5,6 C3.12,6 2,7.12 2,8.5 L2,14.5 C2,14.78 2.22,15 2.5,15 L5,15 L5,17.5 C5,17.78 5.22,18 5.5,18 L14.5,18 C14.78,18 15,17.78 15,17.5 L15,15 L17.5,15 C17.78,15 18,14.78 18,14.5 L18,8.5 C18,7.12 16.88,6 15.5,6 L4.5,6 Z M17,14 L15,14 L15,12 L15.5,12 C15.78,12 16,11.78 16,11.5 C16,11.22 15.78,11 15.5,11 L4.5,11 C4.22,11 4,11.22 4,11.5 C4,11.78 4.22,12 4.5,12 L5,12 L5,14 L3,14 L3,8.5 C3,7.68 3.68,7 4.5,7 L15.5,7 C16.32,7 17,7.68 17,8.5 L17,14 Z M14,12 L14,17 L6,17 L6,12 L14,12 Z" id="Z" sketch:type="MSShapeGroup"></path> <path d="M5.5,5 C5.78,5 6,4.78 6,4.5 L6,3 L14,3 L14,4.5 C14,4.78 14.22,5 14.5,5 C14.78,5 15,4.78 15,4.5 L15,2.5 C15,2.22 14.78,2 14.5,2 L5.5,2 C5.22,2 5,2.22 5,2.5 L5,4.5 C5,4.78 5.22,5 5.5,5 L5.5,5 Z" id="Path" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/symbols/do-not-disturb.js", {
name: "symbols/do-not-disturb",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<svg class="do-no-disturb" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>do-no-disturb</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="do-no-disturb" sketch:type="MSArtboardGroup" > <path d="M15.474,10.7635 C16.694,9.9435 17.494,8.5635 17.494,7.0035 C17.494,4.5235 15.474,2.5035 12.994,2.5035 C11.434,2.5035 10.054,3.3035 9.234,4.5235 L7.354,2.6435 C7.234,2.5035 7.034,2.4635 6.854,2.5235 C6.674,2.5835 6.534,2.7235 6.514,2.9235 L5.514,9.4235 C5.494,9.5835 5.534,9.7435 5.654,9.8435 L10.154,14.3435 C10.254,14.4435 10.374,14.4835 10.494,14.4835 L10.574,14.4835 L17.074,13.4835 C17.274,13.4635 17.414,13.3235 17.474,13.1435 C17.534,12.9635 17.494,12.7635 17.354,12.6435 L15.474,10.7635 Z M12.994,3.5035 C14.914,3.5035 16.494,5.0835 16.494,7.0035 C16.494,8.3835 15.694,9.5835 14.514,10.1635 C14.474,10.1635 14.414,10.1835 14.374,10.2235 C13.954,10.4035 13.474,10.5035 12.994,10.5035 C11.054,10.5035 9.494,8.9435 9.494,7.0035 C9.494,6.5235 9.594,6.0435 9.774,5.6235 C9.814,5.5835 9.834,5.5235 9.834,5.4835 C10.414,4.3035 11.614,3.5035 12.994,3.5035 L12.994,3.5035 Z M15.954,12.6435 L10.674,13.4635 L6.534,9.3235 L7.354,4.0435 L8.774,5.4635 C8.594,5.9435 8.494,6.4635 8.494,7.0035 C8.494,9.4835 10.514,11.5035 12.994,11.5035 C13.534,11.5035 14.054,11.4035 14.534,11.2235 L15.954,12.6435 Z M11.134,8.8635 C11.234,8.9635 11.374,9.0035 11.494,9.0035 C11.614,9.0035 11.754,8.9635 11.854,8.8635 L12.994,7.7035 L14.134,8.8635 C14.234,8.9635 14.374,9.0035 14.494,9.0035 C14.614,9.0035 14.754,8.9635 14.854,8.8635 C15.034,8.6635 15.034,8.3435 14.854,8.1435 L13.694,7.0035 L14.854,5.8635 C15.034,5.6635 15.034,5.3435 14.854,5.1435 C14.654,4.9635 14.334,4.9635 14.134,5.1435 L12.994,6.3035 L11.854,5.1435 C11.654,4.9635 11.334,4.9635 11.134,5.1435 C10.954,5.3435 10.954,5.6635 11.134,5.8635 L12.294,7.0035 L11.134,8.1435 C10.954,8.3435 10.954,8.6635 11.134,8.8635 L11.134,8.8635 Z M6.994,16.3035 C6.714,16.5635 6.294,16.5635 6.014,16.3035 L3.694,13.9835 C3.434,13.7035 3.434,13.2835 3.694,13.0035 L5.354,11.3435 C5.554,11.1435 5.554,10.8435 5.354,10.6435 C5.154,10.4435 4.854,10.4435 4.654,10.6435 L2.994,12.3035 C2.334,12.9635 2.334,14.0235 2.994,14.6835 L5.314,17.0035 C5.654,17.3435 6.074,17.5035 6.514,17.5035 C6.934,17.5035 7.374,17.3435 7.694,17.0035 L9.354,15.3435 C9.554,15.1435 9.554,14.8435 9.354,14.6435 C9.154,14.4435 8.854,14.4435 8.654,14.6435 L6.994,16.3035 Z" id="®" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/actionBar.js", {
name: "actionBar",
data: {
"1": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return ' <!-- duplication --> <li tabindex="0" class="first-menu-item" data-key-aria-label="actionbar_duplicate_list"> <a class="actionBar-top-duplicate-list"> ' + r((a = t.symbol || e && e.symbol || o, 
a.call(e, "duplicate-lists", {
name: "symbol",
hash: {},
data: n
}))) + " " + r((a = t.localized || e && e.localized || o, a.call(e, "actionbar_duplicate_list", {
name: "localized",
hash: {},
data: n
}))) + ' </a> </li> <!-- <li tabindex="0" class="" data-key-aria-label="actionbar_print_selected_item"> <a class="actionBar-top-duplicate-selected"> ' + r((a = t.symbol || e && e.symbol || o, 
a.call(e, "print", {
name: "symbol",
hash: {},
data: n
}))) + ' <span class="print-items-label">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "actionbar_print_selected_item", {
name: "localized",
hash: {},
data: n
}))) + "</span> </a> </li> --> ";
},
"3": function() {
return "first-menu-item";
},
"5": function() {
return " disabled ";
},
"7": function() {
return "do-not-disturb-label";
},
"9": function() {
return "un-mute";
},
"11": function() {
return "active";
},
"13": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return ' <a class="publish" role="button" tabindex="0" data-key-aria-label="button_publish"> ' + r((a = t.symbol || e && e.symbol || o, 
a.call(e, "publish", {
name: "symbol",
hash: {},
data: n
}))) + ' <span class="tab-text">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "button_publish", {
name: "localized",
hash: {},
data: n
}))) + "</span> </a> ";
},
"15": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return ' <a class="tab published" data-menu="publish" role="button" tabindex="0" data-key-aria-label="button_published"> ' + r((a = t.symbol || e && e.symbol || o, 
a.call(e, "published", {
name: "symbol",
hash: {},
data: n
}))) + ' <span class="tab-text">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "button_published", {
name: "localized",
hash: {},
data: n
}))) + "</span> </a> ";
},
"17": function() {
return "last-tab";
},
"19": function() {
return ' <a class="icon action-flash-cards last-tab" role="button" tabindex="0" aria-label="flash cards"></a> ';
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = '<div class="actionBar-top"> <!-- Publishing --> <ul class="actionBar-top-publish"> <li tabindex="0" class="first-menu-item" data-key-aria-label="button_open_public_list"> <a class="actionBar-top-open-public-list"> ' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "open-public-list", {
name: "symbol",
hash: {},
data: n
}))) + " " + s((o = t.localized || e && e.localized || r, o.call(e, "button_open_public_list", {
name: "localized",
hash: {},
data: n
}))) + ' </a> </li> <li tabindex="0" class="last-menu-item" data-key-aria-label="button_unpublish_list"> <a class="actionBar-top-unpublish-list"> ' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "unpublish-list", {
name: "symbol",
hash: {},
data: n
}))) + " " + s((o = t.localized || e && e.localized || r, o.call(e, "button_unpublish_list", {
name: "localized",
hash: {},
data: n
}))) + ' </a> </li> </ul> <!-- Sorting --> <ul class="actionBar-top-sort"> <li tabindex="0" class="first-menu-item" data-key-aria-label="actionbar_sort_alphabetically"> <a class="actionBar-top-sort-az"> ' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "sort-az", {
name: "symbol",
hash: {},
data: n
}))) + " " + s((o = t.localized || e && e.localized || r, o.call(e, "actionbar_sort_alphabetically", {
name: "localized",
hash: {},
data: n
}))) + ' </a> </li> <li tabindex="0" data-key-aria-label="actionbar_sort_due_date"> <a class="actionBar-top-sort-date"> ' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "sort-date", {
name: "symbol",
hash: {},
data: n
}))) + " " + s((o = t.localized || e && e.localized || r, o.call(e, "actionbar_sort_due_date", {
name: "localized",
hash: {},
data: n
}))) + ' </a> </li> <li tabindex="0" data-key-aria-label="actionbar_sort_creation_date"> <a class="actionBar-top-sort-creation"> ' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "sort-creation", {
name: "symbol",
hash: {},
data: n
}))) + " " + s((o = t.localized || e && e.localized || r, o.call(e, "actionbar_sort_created_at", {
name: "localized",
hash: {},
data: n
}))) + ' </a> </li> <li tabindex="0" data-key-aria-label="actionbar_sort_assignee"> <a class="actionBar-top-sort-assign"> ' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "assigned", {
name: "symbol",
hash: {},
data: n
}))) + " " + s((o = t.localized || e && e.localized || r, o.call(e, "actionbar_sort_assignee", {
name: "localized",
hash: {},
data: n
}))) + ' </a> </li> <li tabindex="0" class="last-menu-item" data-key-aria-label="actionbar_sort_priority"> <a class="actionBar-top-sort-priority"> ' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "starred", {
name: "symbol",
hash: {},
data: n
}))) + " " + s((o = t.localized || e && e.localized || r, o.call(e, "actionbar_sort_priority", {
name: "localized",
hash: {},
data: n
}))) + ' </a> </li> </ul> <!-- More --> <ul class="actionBar-top-more"> ';
return a = t["if"].call(e, e && e.listDuplicationEnabled, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += ' <li tabindex="0" class="', a = t.unless.call(e, e && e.listDuplicationEnabled, {
name: "unless",
hash: {},
fn: this.program(3, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '" data-key-aria-label="button_email_list"> <a class="actionBar-top-email-all"> ' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "email", {
name: "symbol",
hash: {},
data: n
}))) + " " + s((o = t.localized || e && e.localized || r, o.call(e, "button_email_list", {
name: "localized",
hash: {},
data: n
}))) + ' </a> </li> <li tabindex="0" data-key-aria-label="actionbar_email_selected_item"> <a class="actionBar-top-email-selected"> ' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "email", {
name: "symbol",
hash: {},
data: n
}))) + ' <span class="email-items-label">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "actionbar_email_selected_item", {
name: "localized",
hash: {},
data: n
}))) + '</span> </a> </li> <!-- print --> <li tabindex="0" class="" data-key-aria-label="button_print_list"> <a class="actionBar-top-print-all"> ' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "print", {
name: "symbol",
hash: {},
data: n
}))) + " " + s((o = t.localized || e && e.localized || r, o.call(e, "button_print_list", {
name: "localized",
hash: {},
data: n
}))) + ' </a> </li> <li tabindex="0" class="" data-key-aria-label="actionbar_print_selected_item"> <a class="actionBar-top-print-selected"> ' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "print", {
name: "symbol",
hash: {},
data: n
}))) + ' <span class="print-items-label">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "actionbar_print_selected_item", {
name: "localized",
hash: {},
data: n
}))) + '</span> </a> </li> <!-- do not disturb --> <li tabindex="0" class="', a = t.unless.call(e, e && e.isShared, {
name: "unless",
hash: {},
fn: this.program(5, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '" data-key-aria-label="options_do_not_disturb"> <a class="actionBar-top-do-not-disturb"> ' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "do-not-disturb", {
name: "symbol",
hash: {},
data: n
}))) + ' <span class="', a = t["if"].call(e, e && e.isMuted, {
name: "if",
hash: {},
fn: this.program(7, n),
inverse: this.program(9, n),
data: n
}), (a || 0 === a) && (l += a), l += '">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "options_do_not_disturb", {
name: "localized",
hash: {},
data: n
}))) + '</span> <span class="status-label on ', a = t["if"].call(e, e && e.isMuted, {
name: "if",
hash: {},
fn: this.program(11, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "label_on", {
name: "localized",
hash: {},
data: n
}))) + '</span> <span class="status-label off ', a = t["if"].call(e, e && e.isNotMuted, {
name: "if",
hash: {},
fn: this.program(11, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "label_off", {
name: "localized",
hash: {},
data: n
}))) + '</span> </a> </li> <!-- delete selected item --> <li tabindex="0" class="last-menu-item" data-key-aria-label="button_delete"> <a class="actionBar-top-trash"> ' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "trash", {
name: "symbol",
hash: {},
data: n
}))) + ' <span class="delete-items-label">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "menubar_delete_task", {
name: "localized",
hash: {},
data: n
}))) + '</span> </a> </li> </ul> </div> <div class="actionBar-bottom"> <a class="tab share first-tab" data-menu="share" role="button" tabindex="0" data-key-aria-label="button_invite_people"> ' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "share", {
name: "symbol",
hash: {},
data: n
}))) + ' <span class="tab-text">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_label_publiclist_share", {
name: "localized",
hash: {},
data: n
}))) + "</span> </a> ", a = t.unless.call(e, e && e.isPublic, {
name: "unless",
hash: {},
fn: this.program(13, n),
inverse: this.program(15, n),
data: n
}), (a || 0 === a) && (l += a), l += ' <a class="tab" data-menu="sort" role="button" tabindex="0" data-key-aria-label="aria_sort_list"> ' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "sort-az", {
name: "symbol",
hash: {},
data: n
}))) + ' <span class="tab-text">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_sort", {
name: "localized",
hash: {},
data: n
}))) + '</span> </a> <a class="tab ', a = t.unless.call(e, e && e.labsFlashCardsEnabled, {
name: "unless",
hash: {},
fn: this.program(17, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '" data-menu="more" role="button" tabindex="0" data-key-aria-label="button_more"> ' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "folder-option", {
name: "symbol",
hash: {},
data: n
}))) + ' <span class="tab-text">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_more", {
name: "localized",
hash: {},
data: n
}))) + "</span> </a> ", a = t["if"].call(e, e && e.labsFlashCardsEnabled, {
name: "if",
hash: {},
fn: this.program(19, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l + " </div> ";
},
useData: !0
}
}), define("/styles/actionBar.js", {
name: "actionBar",
data: '.actionBar{opacity:1;-ms-filter:none;filter:none;position:absolute;left:50%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:0 !important;z-index:999;bottom:18px;-webkit-transition:opacity 200ms ease-in;-moz-transition:opacity 200ms ease-in;-o-transition:opacity 200ms ease-in;-ms-transition:opacity 200ms ease-in;transition:opacity 200ms ease-in;}.actionBar.expanded .actionBar-bottom{-webkit-border-radius:0 0 3px 3px;border-radius:0 0 3px 3px;border-top:1px solid rgba(0,0,0,0.12)}.actionBar.expanded .actionBar-top ul.active{z-index:1;}.actionBar.expanded .actionBar-top ul.active li{opacity:1;-ms-filter:none;filter:none}.actionBar.expanded .actionBar-bottom a{opacity:.6;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";filter:alpha(opacity=60);}.actionBar.expanded .actionBar-bottom a.active{opacity:1;-ms-filter:none;filter:none}.actionBar-top{position:absolute;bottom:0;height:42px;width:100%;-webkit-border-radius:4px;border-radius:4px;-webkit-box-shadow:0 2px 7px rgba(0,0,0,0.5);box-shadow:0 2px 7px rgba(0,0,0,0.5);background:#fafafa;-webkit-transition:height 120ms linear;-moz-transition:height 120ms linear;-o-transition:height 120ms linear;-ms-transition:height 120ms linear;transition:height 120ms linear;z-index:-1;overflow:hidden;}.actionBar-top ul{position:absolute;z-index:0;top:0;left:0;right:0;overflow:hidden;-webkit-border-radius:4px 4px 0 0;border-radius:4px 4px 0 0;}.actionBar-top ul.active li.disabled{opacity:.4 !important;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=40)" !important;filter:alpha(opacity=40) !important;}.actionBar-top ul.active li.disabled a{cursor:default}.actionBar-top li{position:relative;padding:1px 2px 2px 2px;opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0);-webkit-transition:opacity 200ms linear;-moz-transition:opacity 200ms linear;-o-transition:opacity 200ms linear;-ms-transition:opacity 200ms linear;transition:opacity 200ms linear;}.actionBar-top li:focus a{background:#2d9ef8;color:#fff;}.actionBar-top li:focus a svg{fill:#fff}.actionBar-top li a{display:block;padding:7px;padding-left:34px;color:$darkgrey;-webkit-border-radius:3px;border-radius:3px;}.actionBar-top li a.disabled{cursor:default;opacity:.4 !important;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=40)" !important;filter:alpha(opacity=40) !important}.actionBar-top li a svg{fill:#737272;position:absolute;left:8px;top:7px}.actionBar-top li a .status-label{float:right;font-size:85%;text-transform:uppercase;padding:1px;display:none;color:#b2b2b2;}.actionBar-top li a .status-label.active{display:block}.actionBar-top li:focus .status-label{color:#fff !important}.actionBar-bottom{background:rgba(250,250,250,0.9);-webkit-border-radius:3px;border-radius:3px;text-align:center;font-size:0;padding-top:0;height:42px;}.actionBar-bottom a{display:inline-block;min-width:50px;padding:5px;}.actionBar-bottom a:focus .tab-text{color:#186ab2;fill:#186ab2}.actionBar-bottom a:focus svg{fill:#186ab2}.actionBar-bottom a.disabled{opacity:.5;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";filter:alpha(opacity=50);cursor:default}.actionBar-bottom a svg{fill:#737272;}.actionBar-bottom a svg.disabled span{color:#b2b2b2 !important}.actionBar-bottom a .tab-text{font-size:10px;color:#737272;display:block;text-align:center}html[dir=rtl] .actionBar-top li a{padding-right:34px;padding-left:7px;}html[dir=rtl] .actionBar-top li a span.wundercon{left:initial;right:8px}'
}), define("views/Toolbar/ActionBarView", [ "application/runtime", "collections/ListCollection", "collections/TaskCollection", "collections/MembershipCollection", "wunderbits/WBViewPresenter", "./Controllers/ActionBarViewController", "./Controllers/ActionBarEmailController", "./Controllers/ActionBarPrintController", "./Controllers/ActionBarKeysController", "./Controllers/ActionBarMuteController", "./Controllers/ActionBarPublishController", "./Controllers/ActionBarSortController", "partial!symbols/duplicate-lists", "partial!symbols/share", "partial!symbols/publish", "partial!symbols/published", "partial!symbols/sort-az", "partial!symbols/folder-option", "partial!symbols/open-public-list", "partial!symbols/unpublish-list", "partial!symbols/sort-az", "partial!symbols/sort-date", "partial!symbols/sort-creation", "partial!symbols/assigned", "partial!symbols/starred", "partial!symbols/email", "partial!symbols/print", "partial!symbols/do-not-disturb", "partial!symbols/trash", "template!actionBar", "style!actionBar" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m, g, f, b, h, v, _, w, k, x, y, C, T, S, L, D, M, z, j) {
var I = e.$, A = e._, P = a.prototype, F = "aria-disabled", B = 42;
return a.extend({
template: M,
className: "actionBar",
styles: [ z ],
"implements": [ o, r, s, l, d, c, u ],
emits: {
"click .actionBar-bottom .tab": "toggle:menu",
"click .actionBar-top-email-all": "email:list",
"click .actionBar-top-email-selected": "email:tasks",
"click .actionBar-top-print-all": "print:list",
"click .actionBar-top-print-selected": "print:tasks",
"click .actionBar-top-duplicate-list": "duplicate:list",
"click .actionBar-top-sort-az": "sort:alpha",
"click .actionBar-top-sort-date": "sort:date",
"click .actionBar-top-sort-assign": "sort:assignee",
"click .actionBar-top-sort-creation": "sort:creation",
"click .actionBar-top-sort-priority": "sort:priority",
"click .actionBar-top-open-public-list": "open:publicList",
"click .actionBar-top-unpublish-list": "unpublish:list",
"click .actionBar-top-do-not-disturb": "toggle:muted",
"click .actionBar-bottom a.share": "share:list",
"click .actionBar-top-trash": "delete:task",
"click .actionBar-bottom a.cards": "flashcards:run",
"click .publish": "publish:confirm",
keydown: "keydown"
},
observes: {
runtime: {
"taskActions:collapse": "collapseMenu",
"taskActions:focus": "focusStart",
"browser:render": "onRenderTaskBrowser",
"tasks:delete": "updateLabelsThatDependOnTaskSelectionCounts",
"browser:selectionChanged": [ "updateLabelsThatDependOnTaskSelectionCounts", "updateTrashDisabled" ]
},
model: {
"change:public": "updatePublicToggle"
}
},
renderData: {
isMuted: j,
isNotMuted: j,
isChromeApp: j,
labsFlashCardsEnabled: j,
isPublic: j,
isOwnList: j,
isShared: j,
listDuplicationEnabled: !1
},
formatData: function() {
var t = this, i = P.formatData.apply(t, arguments), n = t.memberships && t.memberships.findWhere({
user_id: "" + e.user.id
}), a = n && n.attributes || {};
return i.isMuted = !!a.muted, i.isNotMuted = !a.muted, i.isChromeApp = e.env.isChromeApp(), 
i.labsFlashCardsEnabled = e.isLabsEnabled("flash_cards"), i.isPublic = t.model && t.model.attributes["public"], 
t.isOwnList = a.owner_id === e.user.id, i.isShared = t.model && t.model.isShared(), 
i.listDuplicationEnabled = e.isNightly() || e.isDev(), i;
},
initialize: function() {
var e = this;
e.debouncedUpdateDisabled = e.debounce(e.updateDisabled, 250), e.updateLabelsThatDependOnTaskSelectionCounts = e.debounce(e.updateLabelsThatDependOnTaskSelectionCounts, 250), 
e.updateTrashDisabled = e.debounce(e.updateTrashDisabled, 250), P.initialize.apply(e, arguments);
},
render: function() {
var t = this;
return P.render.apply(t, arguments), t.defer(function() {
e.trigger("tasks:updateSelectionCount"), t.updateLabelsThatDependOnTaskSelectionCounts(), 
t.setMargin(), t.on("localized", t.setMargin);
}), t.delegateEvents(), t;
},
setCurrentListID: function(t) {
var i = this;
i.model = t, i.listID = t.id, i.memberships = new n("/lists/" + i.listID + "/memberships"), 
i.ownMembership = i.memberships.findWhere({
user_id: "" + e.user.id
}), i.setupModelBinds(), i.updateMuteToggle(), i.updatePublicToggle(), i.updateDisabled(t.id), 
i.updateSortDisabled();
},
setMargin: function() {
var e = this;
if (!e.destroyed) {
var t = e.$el.width();
e.$el.css({
"margin-left": -Math.floor(t / 2)
});
}
},
setupModelBinds: function() {
var e = this;
e.bindTo(e.model, "change:public", function(t) {
e.updatePublicToggle(), e.updateDisabled(t.id);
}), e.bindTo(e.model, "change:isShared", e.updateMuteToggle), e.ownMembership && e.bindTo(e.ownMembership, "change:muted", "updateMuteToggle");
},
updateMuteToggle: function() {
var e = this, t = e.ownMembership, i = t && t.attributes || {}, n = e.$(".actionBar-top-do-not-disturb");
n.find(".wundercon").toggleClass("un-mute do-not-disturb-label", !i.muted), n.find(".status-label.on").toggleClass("active", i.muted), 
n.find(".status-label.off").toggleClass("active", !i.muted);
var a = e.model && e.model.isShared();
n.closest("li").toggleClass("disabled", !a);
},
updatePublicToggle: function() {
var e = this;
e.render();
},
onRenderTaskBrowser: function(e) {
var t = this;
if (t.listID = e, e !== t.lastListId) {
t.updateDisabled(e), t.updateSortDisabled(), t.lastListId = e, t.tasksCollectionBind && t.unbindFrom(t.tasksCollectionBind), 
t.tasksCollectionSortBind && t.unbindFrom(t.tasksCollectionSortBind);
var n = new i("/lists/" + e + "/tasks");
t.tasksCollectionBind = t.bindTo(n, "add remove change", "debouncedUpdateDisabled"), 
t.tasksCollectionSortBind = t.bindTo(n, "add remove change:assignee_id change:due_date", "updateSortDisabled");
}
},
updateLabelsThatDependOnTaskSelectionCounts: function(t) {
var i = this, n = i.$(".print-items-label"), a = i.$(".email-items-label"), o = i.$(".delete-items-label");
t > 1 ? (n.html(e.language.getLabel("actionbar_print_$_selected_items_plural", t).toString()), 
a.html(e.language.getLabel("actionbar_email_$_selected_items_plural", t).toString()), 
o.html(e.language.getLabel("menubar_delete_task_plural").toString())) : (n.html(e.language.getLabel("actionbar_print_selected_item").toString()), 
a.html(e.language.getLabel("actionbar_email_selected_item").toString()), o.html(e.language.getLabel("menubar_delete_task").toString())), 
n.parents("li").toggleClass("disabled", !t).attr(F, !t), a.parents("li").toggleClass("disabled", !t).attr(F, !t), 
o.parents("li").toggleClass("disabled", !t).attr(F, !t), e.isLabsEnabled("flash_cards") && i.$(".flash-cards-selected").parents("li").toggleClass("disabled", !0).attr(F, !0), 
i.renderLabels();
},
updateDisabled: function(t) {
var n = arguments[2] || {};
if (!n.fromDestructiveSort) {
var a = this;
t = A.isString(t) ? t : a.lastListId;
var o = A.clone(e.smartLists);
o.push("inbox", "search");
var r, s = a.$(".share"), l = a.$(".sort-az");
if (t) {
r = A.indexOf(o, t) >= 0, s.toggleClass("disabled", r).attr(F, r), a.updateDuplicateList(t);
var d = a.$(".publish"), c = a.model && a.model.isOwner();
d.toggleClass("disabled", !c || r).attr(F, !c || r), a.model && a.model.isPublic() && !c && (d.removeClass("disabled"), 
a.$(".actionBar-top-unpublish-list").addClass("disabled")), "inbox" === t && (r = !1);
var u = new i("/lists/" + t + "/tasks");
u = u.where({
completed: !1
}), u.length < 2 && (r = !0), l.toggleClass("disabled", r).attr(F, r);
}
}
},
updateDuplicateList: function(t) {
var i = this, n = i.$(".actionBar-top-duplicate-list"), a = e.smartLists.indexOf(t) > -1;
n.toggleClass("disabled", a).attr(F, a);
},
updateSortDisabled: function() {
var e = this, t = e.listID && new i("/lists/" + e.listID + "/tasks").models, n = [], a = [];
t && t.forEach(function(e) {
var t = e.attributes;
t.due_date && n.push(e), t.assignee_id && a.push(e);
});
var o = n.length, r = a.length, s = e.$(".actionBar-top-sort-date").closest("li"), l = e.$(".actionBar-top-sort-assign").closest("li");
s.toggleClass("disabled", !o).attr(F, !o), l.toggleClass("disabled", !r).attr(F, !r);
},
updateTrashDisabled: function(e) {
var t = this;
t.$(".actionBar-top-trash").toggleClass("disabled", !e).attr(F, !e);
},
getSelectedTasks: function() {
var e = this, t = [], i = e.$el.closest("#tasks").find(".taskItem.active, .taskItem.selected");
return A.each(i, function(e) {
t.push(I(e).attr("rel"));
}), t;
},
expandMenu: function(e) {
var t = this, i = t.$("ul." + e), n = t.$(".actionBar-top"), a = i.height();
t.$el.addClass("expanded"), n.css({
height: a + B
});
},
collapseMenu: function() {
var e = this;
e.$el.removeClass("expanded"), e.$(".actionBar-bottom .active").removeClass("active"), 
e.$(".actionBar-top").css({
height: B
});
},
toggleMenu: function(t) {
var i = this, n = i.$(".actionBar-top ul"), a = i.$(".actionBar-bottom a"), o = I(t.target).closest(".tab");
if (!o.hasClass("disabled")) {
var r = o.hasClass("active"), s = "actionBar-top-" + o.attr("data-menu"), l = i.$("." + s);
a.removeClass("active"), n.removeClass("active"), o.addClass("active"), l.addClass("active");
var d;
r || !l.length ? (d = !0, i.defer(i.collapseMenu)) : i.defer(function() {
i.expandMenu(s), l.find("li").first().focus();
}), e.trigger("analytics:TaskActionBar:" + (d ? "Close" : "Open") + "Menu", s);
}
},
isSharingEnabled: function() {
return !this.$("a.share").hasClass("disabled");
},
isDateSortingEnabled: function() {
return !this.$(".actionBar-top-sort-date").closest("li").hasClass("disabled");
},
isAssigneeSortingEnabled: function() {
return !this.$(".actionBar-top-sort-assign").closest("li").hasClass("disabled");
},
isParentLIDisabled: function(e) {
return I(e.target).parents("li").hasClass("disabled");
},
focusStart: function() {
this.$(".actionBar-bottom a").first().focus(), e.trigger("focus:set", "taskActions");
},
focusFirstMenuItem: function(e) {
e.closest("ul").find(".first-menu-item").focus();
},
focusLastMenuItem: function(e) {
e.closest("ul").find(".last-menu-item").focus();
},
focusMenuItemToggle: function(e) {
var t = this, i = e.closest("ul");
if (i.length) {
var n = /actionBar-top-([^\s]+)/.exec(i[0].className)[1];
t.collapseMenu(), t.$(".actionBar-bottom .wundercon." + n).focus();
}
}
});
}), define("views/Tasks/Controllers/Mixins/AddTaskNLPDates", [ "application/runtime", "vendor/moment", "project!nlp", "project!core/WBMixin" ], function(e, t, i, n) {
var a = i.dates;
return n.extend({
datePickerModel: function() {
return this.view.datePickers.datePicker.model;
},
extractDateData: function(i) {
var n = !1;
if (e.isNightly() || e.isDev()) {
var o = this, r = o.datePickerModel(), s = a.parse(i, {
futureOnly: !0,
format: e.settings.attributes.date_format,
langCode: e.language.attributes.code
});
if (s.date && !r.attributes.date && (r.set({
date: s.date
}), n = !0), s.interval && s.frequency && (s.date || (s.date = t().sod().valueOf(), 
r.set({
date: s.date
})), r.set({
interval: s.interval,
frequency: s.frequency
})), n) return s;
}
}
});
}), define("views/Tasks/Controllers/AddTaskViewController", [ "application/runtime", "actions/Factory", "wunderbits/data/keycodes", "wunderbits/helpers/strings", "collections/TaskCollection", "collections/ReminderCollection", "models/TaskModel", "vendor/moment", "helpers/animation", "wunderbits/helpers/date", "./Mixins/AddTaskNLPDates", "wunderbits/WBViewController" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p) {
var m = e.$, g = e._, f = u.prototype;
return u.extend({
"implements": {
"keydown:input": "onKeydown",
"keyup:input": "onKeyup",
"blur:input": "onBlur",
"focus:input": "onFocus"
},
mixins: [ c ],
initialize: function() {
var e = this;
f.initialize.apply(e, arguments), e.textParser = e.view.textParser, e.taskLookup = t.taskLookup(), 
e.allTasks = e.taskLookup.allTasks;
},
onKeydown: function(e) {
var t = this, n = t.view.$(".addTask-input"), a = e.which;
t.isKeyNotAllowedAllowed(a, e) || (a === i.enter ? t.onEnterKey(e, n) : a === i.esc ? t.onEscKey(e, n) : a === i.tab && t.onTabKey(e));
},
onEnterKey: function(e, t) {
var i = this, o = i.view.attributeState.attributes, s = e.originalEvent && e.originalEvent.altKey, d = n.emojiTokensToUnicode(m.trim(t.val()));
if ("" === d) return !1;
i.extractDateData(d);
var c = o.interval ? o.interval.replace("s", "") : p, u = {
title: d,
list_id: i.view.listID,
starred: o.starred,
due_date: o.due_date,
assignee_id: o.assignee,
recurrence_count: o.frequency,
recurrence_type: c
}, g = new r(u), f = new a("/lists/" + i.view.listID + "/tasks"), b = l.animateOptions("added");
f.addTaskToList(g, null, s, b);
var h = i.allTasks.add(g, b);
b && b.animations.run(), o.reminderDate && o.reminderTime && i.createReminder(h, o.reminderDate, o.reminderTime), 
i.view.resetInput(), i.view.resetView();
},
onTabKey: function(e) {
var t = this;
t._goToFirstTask(), t.stopEventFully(e);
},
onEscKey: function(t, i) {
var n = this;
i.val() ? (i.val(""), e.trigger("analytics:AddTask:clearWithEscape")) : e.trigger("analytics:AddTask:blurWithEscape"), 
n._goToFirstTask(), n.stopEventFully(t);
},
isKeyNotAllowedAllowed: function(t, n) {
return 17 === t ? !0 : e.env.isChromeApp() && n.ctrlKey && 78 === n.which ? (n.preventDefault(), 
!0) : t === i.dash ? (n.stopPropagation(), !0) : "assignPopover" === e.focus || "tagPopover" === e.focus ? !0 : void 0;
},
onKeyup: function(e) {
var t = this, n = [ i.shift, i.left, i.right, i.up, i.down, i.esc, i.enter ];
if (-1 === g.indexOf(n, e.which)) {
var a = m(e.target).val(), o = t.view.listModel && t.view.listModel.isShared();
t.textParser.checkInputForKeyCharacters(a, t.view.assignPopover, o);
}
},
onBlur: function() {
var e = this;
if (e.searchingTags = !1, e.autoCompleteBind && e.unbindFrom(e.autoCompleteBind), 
e.view.blurState.attributes.shouldBlur) {
e.view.$el.removeClass("focus");
var t = e.view.$(".addTask-meta");
t.addClass("invisible transparent"), e._redirectIfStillActive();
}
},
onFocus: function() {
var t = this, i = t._returnRoute("/tasks/new");
e.currentRoute() !== i && e.trigger("route:" + i), e.trigger("focus:set", "addTask"), 
t.view.$el.addClass("focus");
var n = t.view.$(".addTask-meta");
n.removeClass("invisible transparent"), e.trigger("onboarding:addItemFocus");
},
createReminder: function(e, t, i) {
var n, a, r = new o("/reminders/all"), l = i.split(":"), c = Number(l[0]), u = Number(l[1]);
null !== t && null !== c && null !== u && (n = s(t).sod().add({
h: c,
m: u
}).format("YYYY-MM-DDTHH:mm:ss"), n = d.convertLocalTimeToServerTime(n), a = {
task_id: e.attributes.id,
date: n
}, r.add(a));
},
_returnRoute: function(e) {
var t, i = this;
if (e = e || "", i.view.filter) t = "lists/" + i.view.filter + e; else {
var n = i.view.lists.get(i.view.listID);
t = n && n.route(e);
}
return t;
},
_redirectIfStillActive: function() {
var t = this;
t.defer(function() {
var i = e.currentRoute(), n = i.indexOf("/tasks/new") >= 0;
if (n) {
var a = t._returnRoute();
e.trigger("route:" + a);
}
});
},
_goToFirstTask: function() {
var t = this, i = t._returnRoute();
t.view.blurState.set("shouldBlur", !1), e.trigger("browser:selectFirst"), i && e.trigger("route:" + i, {
trigger: !1
});
}
});
}), define("views/Tasks/Controllers/AddTaskViewNLPController", [ "application/runtime", "wunderbits/data/keycodes", "./Mixins/AddTaskNLPDates", "wunderbits/WBViewController" ], function(e, t, i, n) {
var a = e.$, o = e._, r = n.prototype;
return n.extend({
"implements": {
"keyup:input": "onKeyUp"
},
mixins: [ i ],
initialize: function() {
var e = this;
e.onKeyUp = e.debounce(e.onKeyUp, 500), r.initialize.apply(e, arguments);
},
onKeyUp: function(e) {
var i = this, n = [ t.shift, t.left, t.right, t.up, t.down, t.esc, t.enter ];
if (-1 === o.indexOf(n, e.which)) {
var r = a(e.target).val();
if (r) {
var s = i.extractDateData(r);
s && s.date && i.view.renderNLPFeedback(s);
}
}
}
});
}), define("views/Tasks/Controllers/AddTaskAttributesViewController", [ "application/runtime", "wunderbits/WBViewController" ], function(e, t) {
return t.extend({
"implements": {
"click:starIcon": "toggleStar",
"click:dateIcon": "openDatePicker",
"click:assignIcon": "openAssigneePicker",
"click:deleteAssignee": "removeAssignee",
"mousedown:starIcon": "onInteractionStart",
"mousedown:dateIcon": "onInteractionStart",
"mousedown:assignIcon": "onInteractionStart"
},
isRTL: function() {
return "rtl" === e.$("html").attr("dir");
},
openDatePicker: function(t) {
var i = this;
i.closePopovers(), t && t.stopPropagation(), t && t.preventDefault();
var n = i.view.datePicker;
if ("today" === i.view.filter) return void i.view.addTaskEl.find("input").focus();
if (n.popoverOpened) return void e.trigger("analytics:AddTask:toggleDatepicker", "close");
t.preventDefault(), t.stopPropagation(), e.trigger("analytics:AddTask:toggleDatepicker", "open"), 
e.trigger("focus:set", "addTaskDatePicker");
var a = i.isRTL() ? 80 : -80;
n.options.offset = a, n.options.margin = 18, n.trigger("popover:open");
},
openAssigneePicker: function(t) {
var i = this;
i.closePopovers(), t.preventDefault(), t.stopPropagation(), e.trigger("focus:set", "assignPopover");
var n = {
listId: i.listID,
assignedTo: i.view.attributeState.attributes.assignee,
offset: i.isRTL() ? 60 : -60,
margin: 15,
hideNoAssign: !1,
arrowOffset: 3,
startedFromKeys: !1,
reconfig: !0,
target: i.view.$(".addTask-meta-assign")
};
i.view.assignPopover && i.view.assignPopover.toggle("open", n), i.view.blurState.set("shouldBlur", !1);
},
toggleStar: function(t) {
var i = this, n = i.view.$(".addTask-meta-star"), a = n.hasClass("starred");
t && t.stopPropagation(), t && t.preventDefault(), e.trigger("addTaskDatePicker:close"), 
e.trigger("analytics:AddTask:toggleFavorite", !a), n.toggleClass("starred", !a), 
i.view.attributeState.set("starred", !a), i.view.addTaskEl.find("input").focus();
},
closePopovers: function() {
var e = this;
if (!e.destroyed && !e.view.destroyed) {
e.view.datePicker.trigger("popover:close");
var t = e.view.assignPopover;
t && t.toggle("close", {});
}
},
removeAssignee: function(e) {
var t = this;
e && e.preventDefault(), e && e.stopPropagation(), t.view.$(".addTask-meta-assign").removeClass("assigned"), 
t.view.attributeState.set("assignee", null), t.closePopovers();
},
onInteractionStart: function() {
var e = this;
e.view.blurState.set("shouldBlur", !1), clearTimeout(e._blurTimer), e._blurTimer = e.delay(function() {
e.view.blurState.set("shouldBlur", !0);
}, e.view.blurState.attributes.overrideBlurDelay);
}
});
}), define("/templates/addTaskAttributes.js", {
name: "addTaskAttributes",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return '<a class="addTask-meta-star right"> ' + r((a = t.symbol || e && e.symbol || o, 
a.call(e, "starred", {
name: "symbol",
hash: {},
data: n
}))) + ' </a> <a class="addTask-meta-assign right"> ' + r((a = t.symbol || e && e.symbol || o, 
a.call(e, "assigned", {
name: "symbol",
hash: {},
data: n
}))) + ' <span class="icon input-assign-frame"></span> <span class="icon input-assign-delete"></span> </a> <a class="addTask-meta-date right"> <span class="addTask-meta-date-label"></span> ' + r((a = t.symbol || e && e.symbol || o, 
a.call(e, "today", {
name: "symbol",
hash: {},
data: n
}))) + ' </a> <div class="addTask-meta-nlp right"> </div> ';
},
useData: !0
}
}), define("views/Tasks/AddTaskAttributesView", [ "application/runtime", "./Controllers/AddTaskAttributesViewController", "views/AvatarView", "vendor/moment", "wunderbits/WBViewPresenter", "template!addTaskAttributes" ], function(e, t, i, n, a, o) {
var r = a.prototype, s = Function.prototype;
return a.extend({
template: o,
className: "addTask-meta",
"implements": [ t ],
emits: {
"mousedown .addTask-meta-star": "mousedown:starIcon",
"mousedown .addTask-meta-date": "mousedown:dateIcon",
"mousedown .addTask-meta-assign": "mousedown:assignIcon",
"click .input-assign-delete": "click:deleteAssignee",
"click .addTask-meta-star": "click:starIcon",
"click .addTask-meta-date": "click:dateIcon",
"click .addTask-meta-assign": "click:assignIcon"
},
observes: {
runtime: {
"autoComplete:assign": "setAssignee",
"addTaskDatePicker:cancel": "cancelDates",
"addTaskDatePicker:close": "closeDatePicker"
}
},
initialize: function(e) {
var t = this;
r.initialize.apply(t, arguments), t.blurState = e.blurState, t.attributeState = e.attributeState, 
t.popovers = e.popovers, t.datePickers = e.datePickers;
},
render: function(e) {
var t = this;
return r.render.call(t), t.addTaskEl = e.addTaskEl, t.listID = e.listID, t.renderDatePicker(), 
t.renderAssignPicker(), t.filter = e.filter, t;
},
renderDatePicker: function() {
var e = this;
e.datePicker = e.addSubview(e.popovers.setupPopover("WBPopoverView", e.$(".addTask-meta-date"), s, s, {
content: e.datePickers,
className: "popover datePicker"
}), "datePickersPopover");
},
renderAssignPicker: function() {
var e = this;
e.assignPopover = e.addSubview(e.popovers.setupPopover("AssignToUserPopoverView", e.$(".addTask-meta-assign"), s, s, {
listId: e.listID,
assignedTo: e.attributeState.attributes.assignee,
offset: -60,
margin: 15,
hideNoAssign: !1,
arrowOffset: 3
}), "assignPopover"), e.bindTo(e.assignPopover, "clear:assigned", function() {
e.trigger("click:deleteAssignee");
});
},
cancelDates: function() {
var e = this;
e.datePickers.clearDates(), e.closeDatePicker();
},
closeDatePicker: function() {
var e = this;
e.datePicker.trigger("popover:close");
},
setAssignee: function(t) {
var n = this, a = e.currentRoute(), o = a.indexOf("/tasks/new") >= 0;
if (o) {
var r = n.$(".addTask-meta-assign");
r.addClass("assigned"), n.avatarView = n.avatarView || n.addSubview(new i({
size: "small"
}), "avatarView"), r.append(n.avatarView.render({
id: t
}).$el), n.attributeState.set("assignee", t), n.assignPopover && n.assignPopover.toggle("close", {}), 
e.trigger("focus:set", "addTask");
}
}
});
}), define("wunderbits/WBDatePickerModel", [ "./lib/dependencies", "vendor/moment", "./WBModel" ], function(e, t, i) {
var n = e.$, a = e._, o = [], r = {
d: "Day",
w: "Week",
m: "Month",
y: "Year"
};
return i.extend({
defaults: {
date: null,
interval: null,
frequency: null
},
initialize: function(e) {
var t = this;
t._options = e || {}, t._settingsModel = t._options.settingsModel, t._createSmartPatterns(), 
t.on("error", t._onError);
},
validate: function(e) {
var t = this, i = [ "days", "weeks", "months", "years" ];
return e.date || t.attributes.date || !e.interval && !e.frequency ? (e.date || t.attributes.date) && (!t.attributes.interval || !t.attributes.frequency) && e.interval && !e.frequency || !e.interval && e.frequency ? "not possible to set repeat data without both attribute pairs present on the model or in the save attrs " + t._attrsToString(e) : e.interval && !a.include(i, e.interval) ? e.interval + " is not a valid value for interval " + t._attrsToString(e) : !e.frequency || a.isNumber(e.frequency) && !a.isNaN(e.frequency) ? a.isNaN(e.date) ? e.date + " is not a valid value for date " + t._attrsToString(e) : void 0 : e.frequency + " is not a valid value for frequency " + t._attrsToString(e) : "not possible to set repeat data without a date";
},
_attrsToString: function(e) {
return "{date: " + e.date + ", interval: " + e.interval + ", frequency: " + e.frequency + "}";
},
_onError: function(e, t) {
throw new Error(t);
},
parse: function(e, i) {
var n = this, a = t(e, i).toDate().getTime();
return a = Math.floor(a), 0 === e.length ? n.set({
date: null
}) : void (a && n.set({
date: a
}));
},
parseSmartDate: function(e, i, o, r) {
var s, l = this;
if (e = n.trim(e), 0 === e.length) return l.set({
date: null
});
if ((o || (e = l.processRepeatPatterns(e), "" !== e)) && (s = l.processDateKeywords(e), 
(!a.isNumber(s) || a.isNaN(s)) && (s = l.processUserFormattedDate(e)), s && s > t().startOf("year").valueOf() && !a.isNaN(s))) {
if (i && t(s) < t().sod()) return;
l.set({
date: s
}, {
fromInput: r
});
}
},
processUserFormattedDate: function(e) {
var i = this, o = i._settingsModel.attributes.date_format, r = o.match(/\W/), s = e.split(r);
return e = n.trim(e), 3 === s.length && e.length >= 8 && (a.each(s, function(e, t) {
s[t] = i._pad(e, 2);
}), e = s.join(r), e.length === o.length) ? t(e, o).valueOf() : void 0;
},
getRepetitions: function(e) {
var t = this, i = [], n = t.attributes.frequency, a = t.attributes.interval, o = t.attributes.date;
if (!o || !t.repeats()) return i;
for (;e-- >= 0; ) o = o.clone(), o["add" + n + "s"].apply(o, [ a ]), i.push(o);
return i;
},
processDateKeywords: function(e) {
var i, n, o, r, s = t().sod(), l = [ "sunday", "monday", "tuesday", "wednesday", "thursday", "friday", "saturday" ], d = !1;
if (e = e.toLowerCase(), r = e.split(" "), "next" === r[0] && a.include(l, r[1]) && (e = r[1], 
d = !0), a.include(l, e)) i = a.indexOf(l, e) + 1, n = a.indexOf(l, t().sod().format("dddd").toLowerCase()) + 1, 
o = i - n, 0 >= o && (o += 7), d && 7 - n >= o && (o += 7), s = t().sod().add("days", o); else switch (e) {
case "today":
break;

case "tomorrow":
s = s.add("days", 1);
break;

case "yesterday":
s = s.subtract("days", 1);
break;

case "next week":
s = s.add("weeks", 1);
break;

case "next month":
s = s.add("months", 1);
break;

case "next year":
s = s.add("years", 1);
break;

default:
return void 0;
}
return s.valueOf();
},
processRepeatPatterns: function(e) {
for (var i, n, s = this, l = 0; l < o.length; l++) e = e.replace(o[l][0], o[l][1]);
return e = e.replace(/\/(\d*)(d|w|m|y)\w*/, function(e, o, l) {
return i = s.attributes.date || t().sod().valueOf(), 0 !== parseInt(o, 10) && "" !== o && !a.isNaN(o) && r[l] ? (n = r[l].toLowerCase() + "s", 
s.set({
date: i,
interval: n,
frequency: parseInt(o, 10)
}), "") : void 0;
});
},
repeats: function() {
var e = this, t = e.attributes.interval;
return t && "None" != t;
},
_createSmartPatterns: function() {
var e, t, i, n, a = {
"every (\\d+) $": "$1",
"every $": 1,
$ly: 1,
bi$ly: 2,
"every other $": 2
}, s = {
daily: "/d",
annually: "/y",
biweekly: "/2w",
"every (\\w+)day": "/w $1day",
"every other (\\w+)day": "/2w $1day"
};
for (e in r) for (t in a) i = t.replace("$", r[e]).toLowerCase(), s[i] = "/" + a[t] + e;
for (i in s) n = s[i], i = new RegExp(i, "i"), o.push([ i, n ]);
},
_pad: function(e, t) {
for (e = String(e); e.length < t; ) e = "0" + e;
return e;
}
});
}), define("/templates/WBDatePicker.js", {
name: "WBDatePicker",
data: {
"1": function() {
return ' <div id="edit-repeat-wrapper" class="hidden"> <label for="edit-repeat" value="Repeat"/> <span class="select"> <select id="edit-repeat"> <option value="never" data-key-text="label_repeat_never"selected></option> <option value="daily" data-key-text="label_repeat_every_day"></option> <option value="weekly" data-key-text="label_repeat_every_week"></option> <option value="monthly" data-key-text="label_repeat_every_month"></option> <option value="yearly" data-key-text="label_repeat_every_year"></option> </select> </span> </div> ';
},
"3": function(e, t, i, n) {
var a, o = ' <div class="input-fake" id="edit-reminder-time-container"> <label for="edit-reminder-time" value="Time"/> ';
return a = t["if"].call(e, e && e.rtl, {
name: "if",
hash: {},
fn: this.program(4, n),
inverse: this.program(6, n),
data: n
}), (a || 0 === a) && (o += a), o + ' <select id="edit-reminder-time-ampm" class="chromeless tiny" data-key-aria-label="aria_period_label"> <option value="am" data-key-text="label_time_am" selected></option> <option value="pm" data-key-text="label_time_pm"></option> </select> </div> ';
},
"4": function() {
return ' <input id="edit-reminder-time-minute" class="chromeless smaller" type="text" value="00" data-key-aria-label="label_time_minute"/>: <input id="edit-reminder-time-hour" class="chromeless smaller" type="text" value="12" data-key-aria-label="label_time_hour"/> ';
},
"6": function() {
return ' <input id="edit-reminder-time-hour" class="chromeless smaller" type="text" value="12" data-key-aria-label="label_time_hour"/>: <input id="edit-reminder-time-minute" class="chromeless smaller" type="text" value="00" data-key-aria-label="label_time_minute"/> ';
},
"8": function(e, t, i, n) {
var a, o, r = "function", s = ' <a class="no-date button full"> ';
return o = t.noDateButtonString || e && e.noDateButtonString, a = typeof o === r ? o.call(e, {
name: "noDateButtonString",
hash: {},
data: n
}) : o, (a || 0 === a) && (s += a), s + " </a> ";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = '<form> <ol class="months"></ol> <div class="datepicker-actions"> ';
return a = t["if"].call(e, e && e.showRepeats, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += " ", a = t["if"].call(e, e && e.showTime, {
name: "if",
hash: {},
fn: this.program(3, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += ' <a class="cancel button">' + s((o = t.localized || e && e.localized || r, 
o.call(e, "button_cancel", {
name: "localized",
hash: {},
data: n
}))) + "</a> ", a = t["if"].call(e, e && e.showNoDateButton, {
name: "if",
hash: {},
fn: this.program(8, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l + " </div> </form>";
},
useData: !0
}
}), define("/templates/WBDatePickerMonth.js", {
name: "WBDatePickerMonth",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression, s = t.helperMissing;
return '<li data-month="' + r((a = t.liRel || e && e.liRel, typeof a === o ? a.call(e, {
name: "liRel",
hash: {},
data: n
}) : a)) + '"> <h3> <span class="icon menu-down showNextMonth"></span> <span class="icon menu-up showPrevMonth"></span> ' + r((a = t.date || e && e.date, 
typeof a === o ? a.call(e, {
name: "date",
hash: {},
data: n
}) : a)) + ' </h3> <table> <thead class="head"> <tr> <th>' + r((a = t.localized || e && e.localized || s, 
a.call(e, "label_day_0", {
name: "localized",
hash: {},
data: n
}))) + "</th> <th>" + r((a = t.localized || e && e.localized || s, a.call(e, "label_day_1", {
name: "localized",
hash: {},
data: n
}))) + "</th> <th>" + r((a = t.localized || e && e.localized || s, a.call(e, "label_day_2", {
name: "localized",
hash: {},
data: n
}))) + "</th> <th>" + r((a = t.localized || e && e.localized || s, a.call(e, "label_day_3", {
name: "localized",
hash: {},
data: n
}))) + "</th> <th>" + r((a = t.localized || e && e.localized || s, a.call(e, "label_day_4", {
name: "localized",
hash: {},
data: n
}))) + "</th> <th>" + r((a = t.localized || e && e.localized || s, a.call(e, "label_day_5", {
name: "localized",
hash: {},
data: n
}))) + "</th> <th>" + r((a = t.localized || e && e.localized || s, a.call(e, "label_day_6", {
name: "localized",
hash: {},
data: n
}))) + "</th> </tr> </thead> <tbody> </tbody> </table> </li>";
},
useData: !0
}
}), define("/styles/_datepicker.js", {
name: "_datepicker",
data: ".date-pickers{width:211px}.datepicker{width:187px;padding:12px;}.datepicker form{width:100%}.datepicker h3{text-shadow:0 1px 0 #fff;font-size:12px;height:22px;text-align:center;color:#262626;}.datepicker h3.current{bottom:0;top:500px}.datepicker h3 span{position:absolute;left:5px;top:3px;cursor:pointer;}.datepicker h3 span.showNextMonth{left:auto;right:11px}.datepicker table{width:100%;}.datepicker table th,.datepicker table td{width:14%}.datepicker ol.months{position:relative;height:153px;width:189px;overflow-y:scroll;overflow-x:hidden;}.datepicker ol.months.big{height:172px}.datepicker ol.months li{position:relative}.datepicker ol.months span.day,.datepicker ol.months a.day{text-align:center;font-size:12px;display:block;padding:2px 0;cursor:pointer;font-weight:500;-webkit-border-radius:3px;border-radius:3px}.datepicker ol.months a{color:#737272;}.datepicker ol.months a:hover{background:#eaeaea}.datepicker ol.months a.today{color:#186ab2}.datepicker ol.months .head{margin-bottom:0;}.datepicker ol.months .head th{text-align:center;color:#a3a3a3;text-transform:uppercase;font-size:9px;height:auto;padding:4px 0}.datepicker ol.months a.highlighted{background-image:-webkit-linear-gradient(top, #dff1ff, #cde5fa);background-image:-moz-linear-gradient(top, #dff1ff, #cde5fa);background-image:-o-linear-gradient(top, #dff1ff, #cde5fa);background-image:-ms-linear-gradient(top, #dff1ff, #cde5fa);background-image:linear-gradient(to bottom, #dff1ff, #cde5fa)}.datepicker ol.months a.selected{opacity:1;-ms-filter:none;filter:none;position:relative;background-image:-webkit-linear-gradient(top, #38a9fb, #2c91f9);background-image:-moz-linear-gradient(top, #38a9fb, #2c91f9);background-image:-o-linear-gradient(top, #38a9fb, #2c91f9);background-image:-ms-linear-gradient(top, #38a9fb, #2c91f9);background-image:linear-gradient(to bottom, #38a9fb, #2c91f9);color:#fff;-webkit-border-radius:3px;border-radius:3px;font-weight:bold}.datepicker .datepicker-actions{padding-top:12px;height:66px;}.datepicker .datepicker-actions .select{margin-bottom:8px;}.datepicker .datepicker-actions .select select{padding:5px 26px 5px 8px}.datepicker .datepicker-actions #edit-repeat{width:187px;}.datepicker .datepicker-actions #edit-repeat#edit-reminder-time-ampm{width:60px;float:right;margin-top:-1px}.datepicker .datepicker-actions a{color:#737272;cursor:pointer;padding:4px 10px}.datepicker .datepicker-actions.no-actions{border-top:none;padding:0;height:auto}"
}), define("wunderbits/WBDatePickerView", [ "application/runtime", "vendor/moment", "./WBDatePickerModel", "./WBView", "./WBBlurHelper", "project!core/WBDeferred", "template!WBDatePicker", "template!WBDatePickerMonth", "style!_datepicker" ], function(e, t, i, n, a, o, r, s, l, d) {
var c = e.$, u = e._, p = e.global, m = n.prototype, g = 3, f = a;
return c.fn.selectOptions = function(e) {
return this.each(function() {
if ("select" === this.nodeName.toLowerCase()) for (var t = this.options.length, i = 0; t > i; i++) this.options[i].selected = this.options[i].value == e;
}), this.change(), this;
}, t.fn.moveToFirstDayOfMonth = function() {
return t([ this.year(), this.month(), 1 ]);
}, t.fn.moveToLastDayOfMonth = function() {
return t([ this.year(), this.month(), this.daysInMonth() ]);
}, n.extend({
className: "datepicker",
styles: [ l ],
events: {
"mousedown .showNextMonth": "_cancel",
"mousedown .showPrevMonth": "_cancel",
"click .no-date": "noDate",
"click .cancel": "_cancelDate",
"click .showNextMonth": "showNextMonth",
"click .showPrevMonth": "showPrevMonth",
"click a.day": "selectDay"
},
initialize: function(t) {
var n = this;
m.initialize.apply(n, arguments), n.options = t || {}, n.model || (n.model = new i(t)), 
n.setStartDay(t.startDay), n.monthsRenderedDeferred = new o(), n.debouncedRenderPrev = u.debounce(n.renderPrev, 250), 
n.debouncedRenderNext = u.debounce(n.renderNext, 250), n.bindTo(e.language, "change:dir", function() {
n.model.set("rtl", "rtl" === e.language.attributes.dir);
});
},
setStartDay: function(e) {
var t = this;
if (u.isNumber(e)) t.startDay = e; else {
var i = t.convertStartDayStringToNumber(e);
t.startDay = u.isNumber(i) ? i : 1;
}
},
convertStartDayStringToNumber: function(e) {
var t = [ "sun", "mon", "tue", "wed", "thu", "fri", "sat" ], i = u.indexOf(t, e);
return i = i >= 0 ? i : d;
},
renderMonth: function(e, t) {
var i, n, a = this, o = {
date: e.format("MMMM YYYY"),
liRel: e.format("YYYY-MM")
}, r = s(o), l = t && t.prepend ? "prepend" : "append", d = e.format("YYYY-MM-");
if (r = c(r.replace(/\{\{([a-z]+)\}\}/gi, function(e, t) {
return o[t] || "";
})), 0 !== a.startDay) {
var u = r.find("thead"), p = u.find("tr th");
6 === a.startDay ? u.find("tr").prepend(p.last()) : 1 === a.startDay && u.find("tr").append(p.first());
}
var m, g = 0, f = function() {
g = 6 === g ? 0 : g + 1;
}, b = e.moveToFirstDayOfMonth().day(), h = a.startDay, v = r.find("tbody");
if (b !== h) {
var _;
for (0 === h ? _ = b + 0 : 1 === h ? _ = 0 === b ? 6 : b - 1 : 6 === h && (_ = b + 1), 
i = 1, n = _; n >= i; i++) 0 === g && v.append("<tr/>"), m = v.find("tr").last(), 
m.append('<td><span class="day">&nbsp;</span></td>'), f();
}
for (i = 1, n = e.moveToLastDayOfMonth().date(); n >= i; i++) 0 === g && v.append("<tr/>"), 
m = v.find("tr").last(), m.append('<td><a data-date="' + d + i + '" class="day">' + i + "</a></td>"), 
f();
a.$(".months")[l](r);
},
render: function() {
var e, i = this;
if (!i.isRendered) for (m.render.apply(i, arguments), i.$el.html(r(i.model.toJSON())), 
e = t().subtract("months", 3); e < t().add("months", 3); e.add("months", 1)) i.renderMonth(e);
return i.options.hideNoDate && i.$el.find(".no-date").addClass("hidden"), i.options.hideCancel && i.$el.find(".cancel").addClass("hidden"), 
i.options.hideCancel && i.options.hideNoDate && i.$el.find(".datepicker-actions").addClass("no-actions"), 
i.getDayEl(t().toDate()).addClass("today"), i.onChangeDate(), i.bindTo(i.model, "change:date", i.onChangeDate), 
i.bindTo(i.model, "change:interval", i._onChangeRepeats), i.bindTo(i.model, "change:frequency", i._onChangeRepeats), 
i.scrollBind && i.unbindFrom(i.scrollBind), i.scrollBind = i.bindTo(i.$("ol.months"), "scroll", function(e) {
i.onScrolled(e);
}), i.renderLocalized(), i.delegateEvents(), i;
},
setDate: function(e) {
var t = this;
return 0 === e && (e = null), t.model.set({
date: e
}, {
silent: !0
}), t;
},
onChangeDate: function() {
var e = this, i = e.model.attributes.date, n = e.getDayEl(t(i));
e.$(".selected").removeClass("selected"), i && 0 !== n.length ? (i = t(i).toDate(), 
e.getDayEl(i).addClass("selected"), e._onChangeRepeats(), e.monthsRenderedDeferred.done(function() {
e.scrollToMonth(i);
})) : i ? e.renderDate(t(i)) : i || (e._onChangeRepeats(), e.monthsRenderedDeferred.done(function() {
e.scrollToMonth(t().sod().toDate());
}));
},
selectDay: function(e) {
var i = this, n = c(e.target).data("date");
i.options.futureOnly && t(n, "YYYY-MM-D") < t().sod() || i.model.parse(n, "YYYY-MM-D");
},
_onChangeRepeats: function() {
var e, i = this, n = "YYYY-MM-D", a = i.model.attributes.date, o = i.model.attributes.interval, r = i.model.attributes.frequency, s = i.$el.find("ol.months li:last a:last").data("date");
if (i.$("a.highlighted").removeClass("highlighted"), o && u.isNumber(r) && a) for (e = t(a); e < t(s, n); e.add(o, r)) i.$('a[data-date="' + e.format(n) + '"]').addClass("highlighted"); else o || u.isNumber(r) || (i.$("#edit-repeat option").attr("selected", !1), 
i.$("#edit-repeat option").first().attr("selected", !0));
},
noDate: function() {
var e = this;
e.model.set({
date: null,
interval: null,
frequency: null
}), f.run();
},
showNextMonth: function(e) {
var i = this, n = c(e.target).closest("li"), a = t(n.data("month") + "-01"), o = t(a.add("months", 1));
if (0 === i.getMonthEl(o).length) {
i.renderMonth(o);
for (var r = 1; g >= r; r++) i.renderMonth(a.add("months", 1));
}
i._cleanupNodes(o, "before"), i._onChangeRepeats(), i.scrollToMonth(o.valueOf(), 150);
},
showPrevMonth: function(e) {
var i = this, n = c(e.target).closest("li"), a = t(n.data("month") + "-01"), o = t(a.subtract("months", 1));
if (0 === i.getMonthEl(o).length) {
i.renderMonth(o, {
prepend: !0
});
for (var r = 1; g >= r; r++) i.renderMonth(a.subtract("months", 1), {
prepend: !0
});
}
i._cleanupNodes(o, "after"), i._onChangeRepeats(), i.scrollToMonth(o.toDate(), 150);
},
getDayEl: function(e) {
var i = this;
return e ? i.$('a[data-date="' + t(e).format("YYYY-MM-D") + '"]') : c();
},
getMonthEl: function(e) {
var i = this;
return e ? i.$('li[data-month="' + t(e).format("YYYY-MM") + '"]') : c();
},
renderDate: function(e) {
if (e) {
var i = this, n = t(i.$el.find("ol.months").find("li:last").data("month")).sod(), a = t(i.$el.find("ol.months").find("li:first").data("month")).sod(), o = t(e.valueOf());
a > e ? i.renderPastDate(e, a, n) : e > n && i.renderFutureDate(e, n), i._onChangeRepeats(), 
i.getDayEl(o.toDate()).addClass("selected"), i.monthsRenderedDeferred.done(function() {
i.scrollToMonth(o.sod().toDate());
});
}
},
renderFutureDate: function(e, i) {
var n, a, o, r = this, s = t(e.valueOf());
e = e.add("months", g), a = e.diff(i, "months"), o = a >= 12, o ? (r._purgeMonths(), 
n = t(e.valueOf()), n.subtract("months", 2 * g)) : n = i.add("months", 1);
for (var l = n; e >= l; l.add("months", 1)) r.renderMonth(l);
!o && r._cleanupNodes(s, "before");
},
renderPastDate: function(e, i, n) {
var a, o, r, s = this, l = t(e.valueOf());
e = e.subtract("months", g), o = i.diff(e, "months"), r = o >= 12, r ? (s._purgeMonths(), 
a = t(e.valueOf()), a.add("months", 2 * g)) : a = n.subtract("months", 1);
for (var d = a; d >= e; d.subtract("months", 1)) s.renderMonth(d, {
prepend: !0
});
s._cleanupNodes(l, "after");
},
renderPrev: function() {
var e = this, i = e.$("ol.months"), n = i.scrollTop(), a = i.find("li:first"), o = t(a.data("month")), r = t(o), s = 0;
if (!e._rendering) {
e._rendering = !0;
for (var l = 1; g >= l; l++) e.renderMonth(o.subtract("months", 1), {
prepend: !0
});
e._cleanupNodes(r, "after"), e._onChangeRepeats(), e.lastScrollToMonth = r.toDate(), 
e.renderLabels(), a.prevAll().each(function() {
s += c(this).outerHeight();
}), i.scrollTop(n + s), e._rendering = !1;
}
},
renderNext: function() {
var e = this, i = t(e.$("ol.months").find("li:last").data("month")), n = t(i);
if (!e._rendering) {
e._rendering = !0;
for (var a = 1; g >= a; a++) e.renderMonth(i.add("months", 1));
e._cleanupNodes(n, "before"), e._onChangeRepeats(), e.renderLabels(), e._rendering = !1;
}
},
scrollToMonth: function(e, i) {
var n, a, o = this, r = o.$("ol.months");
return o.internalScrollTimer && p.clearTimeout(o.internalScrollTimer), o.internalScroll = !0, 
e = "number" == typeof e && e > 0 ? t(e).toDate() : e instanceof Date ? e : t().toDate(), 
n = o.getMonthEl(e), n && 0 !== n.length ? (a = n[0].offsetTop, o.lastScrollToMonth = e, 
void (i ? r.stop().animate({
scrollTop: a
}, i, function() {
o._updateHeights(n), o.internalScrollTimer = p.setTimeout(function() {
o.internalScroll = !1;
}, 1e3);
}) : (r.scrollTop(a), o._updateHeights(n), o.internalScrollTimer = p.setTimeout(function() {
o.internalScroll = !1;
}, 1e3)))) : void (o.internalScroll = !1);
},
_updateHeights: function(t) {
var i = this, n = i.$("ol.months"), a = c(t).height();
n.css("height", a), e.env.isIE() && n.css({
height: a - 5 + "px"
});
},
onScrolled: function() {
var e = this, t = e.$el.find("ol.months"), i = t.scrollTop(), n = t[0].scrollHeight, a = t.find("li:first").height();
i < e._lastScrollTop && a >= i ? e.debouncedRenderPrev() : i > e._lastScrollTop && i >= n - g * a && e.debouncedRenderNext(), 
e._lastScrollTop = t.scrollTop();
},
_cancel: function(e) {
e.preventDefault();
},
_cancelDate: function() {},
onDestroy: function() {
var e = this;
c(document).off("." + e.cid);
},
_purgeMonths: function() {
for (var e = this, t = e.$("ol.months li"), i = 0, n = t.size(); n > i; i++) c(t[i]).remove();
},
_cleanupNodes: function(e, i) {
var n, a = this, o = a.$("ol.months"), r = o.scrollTop(), s = 24, l = a.$("ol.months li"), d = l.size(), p = a.$('ol.months li[data-month="' + t(e).format("YYYY-MM") + '"]'), m = u.indexOf(l, p[0]);
if (i = "before" === i ? i : "after", "after" === i && d > s) for (n = d; n > m + s; ) c(l[n]).remove(), 
l[n] = null, n--; else if (d > s) {
n = 0;
for (var g = 0; m - s > n; ) g += c(l[n]).outerHeight(), c(l[n]).remove(), l[n] = null, 
n++;
o.scrollTop(r - g);
}
}
});
}), define("/templates/addTaskDatePickers.js", {
name: "addTaskDatePickers",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return '<div class="buttonbar full toggle-date-type"> <a class="button selected due-date-tab">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "label_due_date", {
name: "localized",
hash: {},
data: n
}))) + '</a> <a class="button reminder-tab">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "label_reminder", {
name: "localized",
hash: {},
data: n
}))) + '</a> </div> <div class="scroll-wrapper"> <div class="due-date-picker"></div> <div class="reminder-date-picker"></div> </div> ';
},
useData: !0
}
}), define("/styles/popover/addTaskDatePopover.js", {
name: "popover/addTaskDatePopover",
data: "#wunderlist-base .reminder-date-picker{-webkit-transform:translateX(100%);-moz-transform:translateX(100%);-o-transform:translateX(100%);-ms-transform:translateX(100%);transform:translateX(100%);margin-left:-100%;float:left;}#wunderlist-base .reminder-date-picker .input-fake{margin-bottom:8px}#wunderlist-base .reminder-date-picker.selected{-webkit-transform:translateX(0);-moz-transform:translateX(0);-o-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0)}#wunderlist-base .due-date-picker{-webkit-transform:translateX(-100%);-moz-transform:translateX(-100%);-o-transform:translateX(-100%);-ms-transform:translateX(-100%);transform:translateX(-100%);float:left;}#wunderlist-base .due-date-picker.selected{-webkit-transform:translateX(0);-moz-transform:translateX(0);-o-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0)}"
}), define("views/Tasks/AddTaskDatePickersView", [ "application/runtime", "vendor/moment", "wunderbits/helpers/date", "wunderbits/data/keycodes", "wunderbits/helpers/strings", "actions/Factory", "wunderbits/WBView", "wunderbits/WBDatePickerView", "wunderbits/data/keycodes", "template!addTaskDatePickers", "style!_popover", "style!popover/addTaskDatePopover" ], function(e, t, i, n, a, o, r, s, l, d, c, u) {
var p = r.prototype;
return r.extend({
template: d,
styles: [ c, u ],
className: "date-pickers",
events: {
"click .due-date-tab": "_setDueDatePicker",
"click .reminder-tab": "_setReminderPicker",
"change #edit-repeat": "_handleRepeat",
"change #edit-repeat-interval": "_handleRepeat",
"keyup #edit-repeat-frequency": "_handleRepeat",
"change #edit-reminder-time-ampm": "_updateReminder",
"focus #edit-reminder-time-container input": "_updateReminder",
"blur #edit-reminder-time-container input": "_updateReminder",
"keydown #edit-reminder-time-hour": "_onEditHourKeyDown",
"keydown #edit-reminder-time-minute": "_onEditMinuteKeyDown"
},
initialize: function() {
var t = this;
p.initialize.apply(t, arguments), t.automaticReminder = o.automaticReminder(), t.datePicker = t.addSubview(new s({
futureOnly: !1,
hideCancel: !0,
showRepeats: !0,
showTime: !1,
startDay: e.settings.attributes.start_of_week,
showNoDateButton: !0,
noDateButtonString: e.language.getLabel("button_remove_due_date").toString()
})), t.reminderDatePicker = t.addSubview(new s({
futureOnly: !1,
showRepeats: !1,
hideCancel: !0,
showTime: !0,
startDay: e.settings.attributes.start_of_week,
showNoDateButton: !0,
noDateButtonString: e.language.getLabel("button_remove_reminder").toString()
})), t.bindTo(t.datePicker.model, "change:date", t._handleRepeat), t.bindTo(t.datePicker.model, "change:date", t._autoReminder), 
t.bindTo(t.reminderDatePicker.model, "change:date", t._updateReminder), t.bindTo(e.settings, "change:start_of_week", function() {
t.datePicker.setStartDay(e.settings.attributes.start_of_week), t.datePicker.render(), 
t.reminderDatePicker.setStartDay(e.settings.attributes.start_of_week), t.reminderDatePicker.render();
});
},
render: function() {
var t = this, i = "12 hour" === e.settings.attributes.time_format;
p.render.apply(t, arguments);
var n = t.datePicker.render().$el;
t.$(".due-date-picker").prepend(n);
var a = t.reminderDatePicker.render().$el;
t.$(".reminder-date-picker").prepend(a), t.$("#edit-repeat-wrapper").removeClass("hidden");
var o = t.$("#edit-reminder-time-ampm");
return i ? o.removeClass("hidden") : o.addClass("hidden"), t.delegateEvents(), t.delay(function() {
t.datePicker.scrollToMonth(), t.reminderDatePicker.scrollToMonth();
}, 100), t._setDueDatePicker(), t;
},
clearDates: function() {
var e = {
date: null,
interval: null,
frequency: null
};
this.datePicker.model.set(e), this.reminderDatePicker.model.set(e);
},
_setDueDatePicker: function() {
var e = this;
e.$el.find(".reminder-tab, .reminder-date-picker").removeClass("selected"), e.$el.find(".due-date-tab, .due-date-picker").addClass("selected");
},
_setReminderPicker: function() {
var e = this;
e.$el.find(".reminder-tab, .reminder-date-picker").addClass("selected"), e.$el.find(".due-date-tab, .due-date-picker").removeClass("selected");
},
_handleRepeat: function() {
var e = this, i = null, n = null, a = e.datePicker.model.attributes.date, o = e.datePicker.model.changedAttributes() || {}, r = null === o.date && null === o.interval && null === o.frequency;
if (i = e.$el.find("#edit-repeat").val(), n = 1, r || a || "never" === i || (a = t().sod().valueOf(), 
e.datePicker.model.set({
date: a
})), null !== n && (n = Number(n)), null !== a && null !== i && null !== n && 0 !== n && "never" !== i) {
var s = {
daily: "days",
weekly: "weeks",
monthly: "months",
yearly: "years"
};
e.datePicker.model.set({
date: t(a).format("YYYY-MM-DD"),
interval: s[i],
frequency: n
});
}
"never" === i && (i = null, n = null, a && t(a).format("YYYY-MM-DD"), e.datePicker.model.set({
interval: i,
frequency: n
}));
},
_updateReminder: function() {
var n = this, o = n.reminderDatePicker.model.attributes.date, r = Number(n.$el.find("#edit-reminder-time-hour").val()), s = Number(n.$el.find("#edit-reminder-time-minute").val()), l = n.$el.find("#edit-reminder-time-ampm").val(), d = "12 hour" === e.settings.attributes.time_format, c = null;
o && (null !== r && null !== s && (r = d ? i.convertHourTo24HourTime(r, l) : r, 
c = a.pad(r, 2) + ":" + a.pad(s, 2)), n.reminderDatePicker.model.set({
reminder_date: t(o).format("YYYY-MM-DD"),
reminder_time: c
}));
},
_autoReminder: function() {
var n = this, a = n.datePicker.model.attributes.date, o = a && t(a).valueOf(), r = o && n.automaticReminder.getForTimestamp(o);
if (r) {
e.trigger("trackingService", "client.reminder.autocreate");
var s = i.convertServerTimeToLocalTime(r), l = t(s).format("YYYY-MM-DD"), d = t(s).format("HH:mm");
n.reminderDatePicker.model.set({
date: t(r).sod().valueOf()
}), n.reminderDatePicker.model.set({
reminder_date: l,
reminder_time: d
});
}
},
_onEditHourKeyDown: function(t) {
var i = this, n = i.$el.find("#edit-reminder-time-hour"), o = Number(n.val()), r = "12 hour" === e.settings.attributes.time_format;
if (t.which === l.up) o = (r ? 12 : 23) > o ? o + 1 : r ? 1 : 0, n.val(a.pad(o, 2)); else if (t.which === l.down) o = o > (r ? 1 : 0) ? o - 1 : r ? 12 : 23, 
n.val(a.pad(o, 2)); else {
if (t.which === l.enter || t.which === l.esc || t.which === l.left || t.which === l.right || t.which === l.backspace || t.which === l.del || t.which === l.tab) return;
if (!(48 <= t.which && t.which <= 57 || 96 <= t.which && t.which <= 105)) return !1;
}
},
_onEditMinuteKeyDown: function(e) {
var t = this, i = t.$el.find("#edit-reminder-time-minute"), n = Number(i.val());
if (e.which === l.up) n = 59 > n ? n + 1 : 0, i.val(a.pad(n, 2)); else if (e.which === l.down) n = n > 0 ? n - 1 : 59, 
i.val(a.pad(n, 2)); else {
if (e.which === l.enter || e.which === l.esc || e.which === l.left || e.which === l.right || e.which === l.backspace || e.which === l.del) return;
if (!(48 <= e.which && e.which <= 57 || 96 <= e.which && e.which <= 105)) return !1;
}
}
});
}), define("/templates/assignableUser.js", {
name: "assignableUser",
data: {
"1": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return " (" + r((a = t.localized || e && e.localized || o, a.call(e, "label_assign_me", {
name: "localized",
hash: {},
data: n
}))) + ")";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = "function", s = this.escapeExpression, l = '<span class="icon assigned right"></span> <div class="picture left"></div> <div class="name" >' + s((o = t.name || e && e.name, 
typeof o === r ? o.call(e, {
name: "name",
hash: {},
data: n
}) : o));
return a = t["if"].call(e, e && e.isMe, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l + "</div> ";
},
useData: !0
}
}), define("views/Assigning/AssignToUserView", [ "application/runtime", "wunderbits/WBViewPresenter", "views/AvatarView", "template!assignableUser" ], function(e, t, i, n, a) {
var o = t.prototype;
return t.extend({
template: n,
tagName: "li",
renderData: {
name: a,
isMe: !1
},
formatData: function(t) {
var i = this;
t = o.formatData.call(i, t);
var n = i.assignable.attributes;
return t.name = n.name ? n.name : n.email ? n.email : a, e.user.isIDEqual(n.id) && (t.isMe = !0, 
t.name = e.user.attributes.name), t;
},
initialize: function(e) {
var t = this;
e && (t.assignable = e.assignable), o.initialize.apply(t, arguments), t.bindTo(t.assignable, "change", t.render);
},
render: function(e) {
var t = this, i = t.assignable.attributes;
return t.$el.attr("rel", i.id), t.$el[e && e.assignedTo === i.id ? "addClass" : "removeClass"]("assigned"), 
o.render.call(t, t.formatData(t.renderData)), t.renderAvatar(i.id), t;
},
renderAvatar: function(e) {
var t = this;
t.avatarView = t.avatarView || t.addSubview(new i(), "avatarView"), t.$(".picture").html(t.avatarView.render({
id: e
}).$el);
}
});
}), define("views/Assigning/Controllers/AssignToUserPopoverViewController", [ "application/runtime", "wunderbits/WBViewController" ], function(e, t) {
var i = e.$;
return t.extend({
"implements": {
assign: "assignToUser",
"click:none": "clearAssign",
navigate: "onNavigate"
},
onNavigate: function(e) {
this.view.navigate(e);
},
assignToUser: function(t) {
var n = this, a = n.view;
t.stopPropagation(), i(t.target).closest("li").addClass("selected");
var o, r = a.$(".selected"), s = r.attr("rel");
"keydown" !== t.type && (s = i(t.target).closest("li").attr("rel"), o = !0), !s && r.hasClass("no-assign") ? n.clearAssign() : s && (e.trigger("autoComplete:assign", s, o, a.config.startedFromKeys, a.taskId), 
e.trigger("assigneeAdded"));
},
clearAssign: function() {
this.view.trigger("clear:assigned");
}
});
}), define("mixins/TaskBrowserView/ViewportMixin", [ "application/runtime", "project!core/WBMixin" ], function(e, t) {
var i = e.$, n = e.global;
return t.extend({
checkViewport: function() {
var e = this, t = e.$(".taskItem").first().height() || 37, i = 5;
e.currentTaskCount = e.$(".taskItem").length, e.tasksToFitViewport = Math.floor(n.innerHeight / t + i);
var a = e.currentTaskCount > e.tasksToFitViewport ? !1 : !0;
return a;
},
_scrollTop: function() {
var e = this;
e.$el.closest(".tasks-scroll").scrollTop(0);
},
_scrollTaskCheck: function(e, t, a) {
var o = 150, r = i(e), s = t;
a = a || i(n);
var l, d, c, u = a.height(), p = s.scrollTop();
0 !== r.size() && (l = r.offset().top, d = r.height(), c = l + d, c > u ? s.stop(!0, !0).animate({
scrollTop: p + l - d / 2
}, o) : 0 >= l && (p - u + l > 0 ? s.stop(!0, !0).animate({
scrollTop: p - u - l + d / 2
}, o) : s.stop(!0, !0).animate({
scrollTop: 0
}, o)));
}
});
}), define("/templates/assignToUserPopover.js", {
name: "assignToUserPopover",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return '<div class="assign-to-user"> <div class="header">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "label_assign_to", {
name: "localized",
hash: {},
data: n
}))) + '</div> <ul class="shared-users"> <li class="no-assign"> <div class="avatar unassigned left"></div> <div class="name no-assign" >' + r((a = t.localized || e && e.localized || o, 
a.call(e, "label_none", {
name: "localized",
hash: {},
data: n
}))) + "</div> </li> </ul> </div>";
},
useData: !0
}
}), define("/styles/popover/assigningPopover.js", {
name: "popover/assigningPopover",
data: '#wunderlist-base .assign-to-user{width:212px}#wunderlist-base .get-pro,#wunderlist-base .assign-to-user,#wunderlist-base .tags{padding:4px;}#wunderlist-base .get-pro .header,#wunderlist-base .assign-to-user .header,#wunderlist-base .tags .header{padding:5px 0 16px 0 !important;height:14px !important;}#wunderlist-base .get-pro .header:after,#wunderlist-base .assign-to-user .header:after,#wunderlist-base .tags .header:after{content:\'\';height:1px;width:100%;background-color:#dedede;position:absolute;left:0;top:35px}#wunderlist-base .get-pro p,#wunderlist-base .assign-to-user p,#wunderlist-base .tags p{font-size:13px;padding:12px;font-size:13px}#wunderlist-base .get-pro .all-tags li.name,#wunderlist-base .assign-to-user .all-tags li.name,#wunderlist-base .tags .all-tags li.name{padding-top:8px;padding-left:10px;height:27px;}#wunderlist-base .get-pro .all-tags li.name.selected,#wunderlist-base .assign-to-user .all-tags li.name.selected,#wunderlist-base .tags .all-tags li.name.selected{color:#fff}#wunderlist-base .get-pro .shared-users,#wunderlist-base .assign-to-user .shared-users,#wunderlist-base .tags .shared-users,#wunderlist-base .get-pro .all-tags,#wunderlist-base .assign-to-user .all-tags,#wunderlist-base .tags .all-tags{max-height:293px;overflow:auto;-webkit-overflow-scrolling:touch;}#wunderlist-base .get-pro .shared-users li,#wunderlist-base .assign-to-user .shared-users li,#wunderlist-base .tags .shared-users li,#wunderlist-base .get-pro .all-tags li,#wunderlist-base .assign-to-user .all-tags li,#wunderlist-base .tags .all-tags li{-webkit-border-radius:3px;border-radius:3px;height:33px;position:relative;}#wunderlist-base .get-pro .shared-users li:hover,#wunderlist-base .assign-to-user .shared-users li:hover,#wunderlist-base .tags .shared-users li:hover,#wunderlist-base .get-pro .all-tags li:hover,#wunderlist-base .assign-to-user .all-tags li:hover,#wunderlist-base .tags .all-tags li:hover{cursor:pointer}#wunderlist-base .get-pro .shared-users li .name,#wunderlist-base .assign-to-user .shared-users li .name,#wunderlist-base .tags .shared-users li .name,#wunderlist-base .get-pro .all-tags li .name,#wunderlist-base .assign-to-user .all-tags li .name,#wunderlist-base .tags .all-tags li .name{position:absolute;left:38px;top:8px;right:18px;font-size:13px;font-weight:bold;color:#262626;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}#wunderlist-base .get-pro .shared-users li .avatar,#wunderlist-base .assign-to-user .shared-users li .avatar,#wunderlist-base .tags .shared-users li .avatar,#wunderlist-base .get-pro .all-tags li .avatar,#wunderlist-base .assign-to-user .all-tags li .avatar,#wunderlist-base .tags .all-tags li .avatar,#wunderlist-base .get-pro .shared-users li .unassigned,#wunderlist-base .assign-to-user .shared-users li .unassigned,#wunderlist-base .tags .shared-users li .unassigned,#wunderlist-base .get-pro .all-tags li .unassigned,#wunderlist-base .assign-to-user .all-tags li .unassigned,#wunderlist-base .tags .all-tags li .unassigned{margin-top:4px;margin-left:4px}#wunderlist-base .get-pro .shared-users li span,#wunderlist-base .assign-to-user .shared-users li span,#wunderlist-base .tags .shared-users li span,#wunderlist-base .get-pro .all-tags li span,#wunderlist-base .assign-to-user .all-tags li span,#wunderlist-base .tags .all-tags li span{display:none}#wunderlist-base .get-pro .shared-users li.assigned span.assigned,#wunderlist-base .assign-to-user .shared-users li.assigned span.assigned,#wunderlist-base .tags .shared-users li.assigned span.assigned,#wunderlist-base .get-pro .all-tags li.assigned span.assigned,#wunderlist-base .assign-to-user .all-tags li.assigned span.assigned,#wunderlist-base .tags .all-tags li.assigned span.assigned{display:block;margin-top:7px;margin-right:3px}#wunderlist-base .get-pro .shared-users li.selected,#wunderlist-base .assign-to-user .shared-users li.selected,#wunderlist-base .tags .shared-users li.selected,#wunderlist-base .get-pro .all-tags li.selected,#wunderlist-base .assign-to-user .all-tags li.selected,#wunderlist-base .tags .all-tags li.selected{font-weight:bold;background-image:-webkit-linear-gradient(top, #38a9fb, #2c91f9);background-image:-moz-linear-gradient(top, #38a9fb, #2c91f9);background-image:-o-linear-gradient(top, #38a9fb, #2c91f9);background-image:-ms-linear-gradient(top, #38a9fb, #2c91f9);background-image:linear-gradient(to bottom, #38a9fb, #2c91f9);-webkit-box-shadow:0 1px 1px rgba(0,0,0,0.06),inset 0 0 0 1px rgba(0,0,0,0.15);box-shadow:0 1px 1px rgba(0,0,0,0.06),inset 0 0 0 1px rgba(0,0,0,0.15);}#wunderlist-base .get-pro .shared-users li.selected .unassigned:before,#wunderlist-base .assign-to-user .shared-users li.selected .unassigned:before,#wunderlist-base .tags .shared-users li.selected .unassigned:before,#wunderlist-base .get-pro .all-tags li.selected .unassigned:before,#wunderlist-base .assign-to-user .all-tags li.selected .unassigned:before,#wunderlist-base .tags .all-tags li.selected .unassigned:before,#wunderlist-base .get-pro .shared-users li.selected .unassigned:after,#wunderlist-base .assign-to-user .shared-users li.selected .unassigned:after,#wunderlist-base .tags .shared-users li.selected .unassigned:after,#wunderlist-base .get-pro .all-tags li.selected .unassigned:after,#wunderlist-base .assign-to-user .all-tags li.selected .unassigned:after,#wunderlist-base .tags .all-tags li.selected .unassigned:after{border:none}#wunderlist-base .get-pro .shared-users li.selected .name,#wunderlist-base .assign-to-user .shared-users li.selected .name,#wunderlist-base .tags .shared-users li.selected .name,#wunderlist-base .get-pro .all-tags li.selected .name,#wunderlist-base .assign-to-user .all-tags li.selected .name,#wunderlist-base .tags .all-tags li.selected .name{color:#fff}html[dir="rtl"] #wunderlist-base .assign-to-user li .avatar,html[dir="rtl"] #wunderlist-base .assign-to-user li .unassigned{margin-right:4px;margin-left:initial}html[dir="rtl"] #wunderlist-base .assign-to-user li .name{position:absolute;right:38px;left:18px}'
}), define("views/Assigning/AssignToUserPopoverView", [ "application/runtime", "collections/UserCollection", "views/Popovers/PopoverView", "views/Assigning/AssignToUserView", "views/Assigning/Controllers/AssignToUserPopoverViewController", "mixins/TaskBrowserView/ViewportMixin", "template!assignToUserPopover", "style!popover/assigningPopover" ], function(e, t, i, n, a, o, r, s) {
var l = e.$, d = e._, c = i.prototype;
return i.extend({
template: r,
styles: [ s ],
config: {
bindToTarget: !1,
margin: -4,
className: "popover assignPicker"
},
"implements": [ a ],
observes: {
runtime: {
"assignPopover:navigate": ">navigate",
"assign:select": ">assign"
}
},
emits: {
"mousedown li, img, div": "assign",
"click .no-assign": "click:none"
},
initialize: function(e) {
var t = this;
o.applyTo(t), e && (t.listId = e.listId, t.taskId = e.taskId, t.assignedTo = e.assignedTo, 
d.extend(t.config, e)), c.initialize.apply(t, arguments), t.setupCollection();
},
renderListMembers: function() {
for (var e, t, i = this, a = i.$(".shared-users")[0], o = [], r = document.createDocumentFragment(), s = i.assignables.models, l = 0, d = s.length; d > l; l++) if (e = s[l], 
t = e.attributes, o.indexOf(t.id) < 0) {
var c = i.addSubview(new n({
listId: i.listId,
assignable: e
}));
r.appendChild(c.render({
assignedTo: i.assignedTo
}).el), o.push(e.attributes.id);
}
a.appendChild(r);
},
setupCollection: function() {
var e = this;
e.assignables = new t("/lists/" + e.listId + "/assignables");
},
render: function() {
var e = this;
return c.render.apply(e, arguments), e.$(".no-assign")[e.config.hideNoAssign === !0 ? "addClass" : "removeClass"]("hidden"), 
e.renderListMembers(), e.delegateEvents(), e;
},
searchRecipients: function(t) {
var i, n, a = this, o = [];
a.assignables || a.setupCollection(), a.assignableIndex = a.assignables.createSearchIndex();
for (var r in a.assignableIndex) {
"*" === t && o.push(r), n = e.user.isIDEqual(r) ? e.language.getText("label_assign_me") : "", 
-1 !== n.toLowerCase().indexOf(t.toLowerCase()) && (t = e.user.attributes.name);
var s = a.assignableIndex[r];
i = s && s.substring(0, t.length), i && -1 !== i.toLowerCase().indexOf(d.escape(t.toLowerCase())) && o.push(r);
}
return o;
},
renderSearchResults: function(e) {
var t = this;
if (!t.destroyed) {
var i, n = t.$("li").not(".no-assign");
n.removeClass("selected"), t.$(".no-assign").removeClass("selected"), d.each(n, function(t) {
i = !d.include(e, l(t).attr("rel")), l(t).toggleClass("hidden", i);
});
var a = t.$(".shared-users li").not(".hidden, .no-assign");
a.length > 0 && a.first().addClass("selected");
}
},
getSelected: function() {
return this.$(".selected").attr("rel");
},
selectNone: function() {
var e = this;
e.$("li").not(".no-assign").removeClass("selected").removeClass("hidden"), e.$(".no-assign").addClass("selected");
},
navigate: function(t) {
var i, n, a, o = this, r = o.$(".shared-users>li").not(".hidden"), s = r.filter(".selected"), d = r.size(), c = r.index(s);
s.size() ? (("up" === t || "down" === t) && (o._scrollTaskCheck(o.$("li.selected")[0], o.$(".shared-users"), l(".assign-to-user")), 
r.removeClass("selected")), "up" === t ? i = c > 0 ? c - 1 : d - 1 : "down" === t && (i = d - 1 > c ? c + 1 : 0), 
void 0 !== i && (n = l(r.get(i)))) : n = l(r.get(0)), n && (n.addClass("selected"), 
a = n.find(".name").text(), a && e.trigger("assigneeSelected", a, o.taskId));
}
});
}), define("views/Tags/Controllers/TagPopoverViewController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/WBViewController" ], function(e, t, i) {
var n = e.$;
return i.extend({
"implements": {
"create:tag": "createTag",
navigate: "onNavigate",
close: "onClose"
},
createTag: function(t) {
var i = this;
i.stopEventFully(t);
var a = i.view.$(".selected"), o = a.text() || n(t.target).closest("li").text();
o && e.trigger("tagAutoComplete:create", o);
},
onClose: function() {
this.view.close();
},
onNavigate: function(e) {
this.view.navigate(e);
}
});
}), define("/templates/tags/tagPopover.js", {
name: "tags/tagPopover",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<div class="tags"> <div class="header">Tags</div> <ul class="all-tags"> </ul> </div>';
},
useData: !0
}
}), define("/styles/_autoComplete.js", {
name: "_autoComplete",
data: ".positionHelper{position:absolute;visibility:hidden;width:auto;white-space:nowrap;font-size:14px;font-weight:bold;text-shadow:0 1px 2px rgba(0,0,0,0.8);}.positionHelper.speech-enabled{margin-left:23px}.positionHelper .positionHelper-target{position:absolute;right:0}"
}), define("views/Tags/TagPopoverView", [ "application/runtime", "views/Popovers/PopoverView", "mixins/TaskBrowserView/ViewportMixin", "views/Tags/Controllers/TagPopoverViewController", "template!tags/tagPopover", "style!popover/assigningPopover", "style!_autoComplete" ], function(e, t, i, n, a, o, r) {
var s = e._, l = e.$, d = t.prototype;
return t.extend({
template: a,
styles: [ o, r ],
config: {
bindToTarget: !1,
margin: -4
},
"implements": [ n ],
observes: {
runtime: {
"tag:select": ">create:tag",
"tagPopover:navigate": ">navigate",
"tagPopover:cancel": ">close"
}
},
emits: {
"mousedown li": "create:tag"
},
initialize: function(e) {
var t = this;
e && s.extend(t.config, e), i.applyTo(t), d.initialize.apply(t, arguments);
},
render: function() {
var e = this;
return d.render.apply(e, arguments), e;
},
renderTagSearchResults: function(e) {
var t = this, i = t.$(".all-tags");
i.empty();
var n = !1;
1 === e.length && (n = !0), s.each(e, function(e) {
i.append('<li class="name">' + e + "</li>"), n && t.$(".name").addClass("selected");
});
},
navigate: function(e) {
var t, i = this, n = i.$(".all-tags>li").not(".hidden"), a = n.filter(".selected"), o = n.size(), r = n.index(a);
if (a.size()) {
if (("up" === e || "down" === e) && (i._scrollTaskCheck(i.$("li.selected")[0], i.$(".all-tags"), l(".tags")), 
n.removeClass("selected")), "up" === e ? t = r > 0 ? r - 1 : o - 1 : "down" === e && (t = o - 1 > r ? r + 1 : 0), 
void 0 !== t) {
var s = l(n.get(t));
s.addClass("selected");
}
} else l(n.get(0)).addClass("selected");
}
});
}), define("views/Tasks/AddTaskPopovers", [ "application/runtime", "wunderbits/WBPopoverView", "views/Assigning/AssignToUserPopoverView", "views/Tags/TagPopoverView", "vendor/moment", "project!core/WBEventEmitter" ], function(e, t, i, n, a, o) {
var r = e._, s = o.prototype, l = {
interval: null,
date: null,
frequency: null
};
return o.extend({
popovers: {
WBPopoverView: t,
AssignToUserPopoverView: i,
TagPopoverView: n
},
initialize: function(e) {
var t = this;
t.datePickers = e.datePickers, s.initialize.apply(t, arguments);
},
resetDatePickerModels: function() {
var e = this;
e.datePickers.datePicker.model.set(l), e.datePickers.reminderDatePicker.model.set(l);
},
setupPopover: function(e, t, i, n, a) {
var o = this, s = o.popovers[e], l = {
context: o,
target: t,
ignoredElements: [],
bindToTarget: !1,
animation: !0,
position: "bottom",
onInputBlur: i,
onClose: n
};
return l = r.extend(l, a), new s(l);
}
});
}), define("views/Tasks/AddTaskViewTextParser", [ "application/runtime", "project!core/WBEventEmitter" ], function(e, t) {
var i = e._;
return t.extend({
checkInputForKeyCharacters: function(e, t, n) {
var a = this;
(!a.assignPopover || a.assignPopover && a.assignPopover.destroyed) && (a.assignPopover = t), 
a.lastCharacter = e.charAt(e.length - 1), a.words = e.split(" "), a.firstWords = i.initial(a.words), 
a.lastWord = a.words[a.words.length - 1], a.firstLetterOfLastWord = a.lastWord[0];
var o, r = a.parseTextForHash(e);
n && !r && (o = a.parseTextForAtSign(e)), !r && !o && a.trigger("close:tagPopover");
},
parseTextForHash: function(e) {
var t = this;
return "#" === t.lastWord ? (t.findTags(e), t.trigger("open:tagPopover"), !0) : "#" === t.firstLetterOfLastWord ? (t.findTags(e), 
!0) : !1;
},
parseTextForAtSign: function(e) {
var t = this, i = e.lastIndexOf("@");
return t.characterBeforeAt = -1 !== i ? e.slice(i - 1, i) : "", t.possibleName = -1 !== i ? e.slice(i + 1, e.length) : t.lastWord, 
"@" === t.lastWord ? (t.possibleName = "*", t.findAssignable(), t.trigger("open:assignPopover"), 
!0) : t.findAssignable() || "@" === t.firstLetterOfLastWord ? (t.trigger("open:assignPopover"), 
!0) : (t.trigger("close:assignPopover"), !1);
},
findTags: function() {
for (var t = this, i = [], n = 0, a = t.firstWords.length; a > n; n++) "#" === t.firstWords[n][0] && i.push(t.firstWords[n]);
e.trigger("tags:getSuggestions", t.lastWord, i);
},
findAssignable: function() {
var e = this, t = e.assignPopover && e.assignPopover.searchRecipients(e.possibleName);
return e.assignPopover && e.assignPopover.renderSearchResults(t), t.length > 0 && "" !== e.possibleName && e.possibleName.length >= 3;
}
});
}), define("wunderbits/views/SpeechRecognitionController", [ "../global", "../WBViewController", "../WBEnvironmentModel" ], function(e, t, i) {
var n, a = t.prototype;
return t.extend({
"implements": {
"toggle:speech": "toggleRecognition"
},
initialize: function() {
var e = this;
a.initialize.apply(e, arguments), n = i.speechRecognition;
},
toggleRecognition: function() {
var e = this, t = e.view;
if (t.started) return e.stopSpeechRecognition(), !1;
if (i.isChromeApp()) {
var n = window.chrome;
n.permissions.request({
permissions: [ "audioCapture" ]
}, function(t) {
t ? e.requestAudioPermission() : e.onFail(arguments);
});
} else e.requestAudioPermission();
},
requestAudioPermission: function() {
var e = this;
i.getUserMedia({
audio: !0,
video: !1
}, e.onSuccess.bind(e), e.onFail.bind(e));
},
onSuccess: function(e) {
var t, i = this, a = i.view;
i.stream = e, i.speechRecognizer = t = new n(), t.continuous = !0, t.onresult = i.onSpeechResult.bind(i), 
t.lang = a.lang, t.start(), a.toggleUI(!0), a.started = !0;
},
onFail: function() {
var e = this, t = e.view;
t.toggleUI(!1), t.started = !1;
},
onSpeechResult: function(e) {
for (var t = this, i = t.view, n = i.target, a = e.resultIndex; a < e.results.length; a++) e.results[a].isFinal ? (n.value += e.results[a][0].transcript, 
t.stopSpeechRecognition()) : n.value += e.results[a][0].transcript;
},
stopSpeechRecognition: function() {
var e = this, t = e.view;
t.started = !1, e.speechRecognizer.stop(), e.stream.stop(), t.toggleUI(!1);
}
});
}), define("/templates/speech.js", {
name: "speech",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return r((a = t.symbol || e && e.symbol || o, a.call(e, "speech", {
name: "symbol",
hash: {},
data: n
})));
},
useData: !0
}
}), define("/templates/symbols/speech.js", {
name: "symbols/speech",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return ' <svg class="speech" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>speech</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="speech" sketch:type="MSArtboardGroup" > <path d="M10,13 C11.92,13 13.5,11.42 13.5,9.5 L13.5,5.5 C13.5,3.58 11.92,2 10,2 C8.08,2 6.5,3.58 6.5,5.5 L6.5,9.5 C6.5,11.42 8.08,13 10,13 L10,13 Z M7.5,5.5 C7.5,4.12 8.62,3 10,3 C11.38,3 12.5,4.12 12.5,5.5 L12.5,9.5 C12.5,10.88 11.38,12 10,12 C8.62,12 7.5,10.88 7.5,9.5 L7.5,5.5 Z M15.5,8.5 C15.5,8.22 15.28,8 15,8 C14.72,8 14.5,8.22 14.5,8.5 L14.5,9.5 C14.5,11.98 12.48,14 10,14 C7.52,14 5.5,11.98 5.5,9.5 L5.5,8.5 C5.5,8.22 5.28,8 5,8 C4.72,8 4.5,8.22 4.5,8.5 L4.5,9.5 C4.5,12.36 6.7,14.72 9.5,14.98 L9.5,17 L6,17 C5.72,17 5.5,17.22 5.5,17.5 C5.5,17.78 5.72,18 6,18 L14,18 C14.28,18 14.5,17.78 14.5,17.5 C14.5,17.22 14.28,17 14,17 L10.5,17 L10.5,14.98 C13.3,14.72 15.5,12.36 15.5,9.5 L15.5,8.5 Z" id="O" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("wunderbits/views/WBSpeechRecognitionView", [ "../WBViewPresenter", "./SpeechRecognitionController", "template!speech", "partial!symbols/speech" ], function(e, t, i) {
var n = e.prototype;
return e.extend({
tagName: "a",
template: i,
"implements": [ t ],
className: "speech-wrapper",
emits: {
click: "toggle:speech"
},
initialize: function(e) {
var t = this;
n.initialize.apply(t, arguments), t.target = e && e.target || t.el, t.lang = e && e.lang || "en_US";
},
toggleUI: function(e) {
var t = this;
t.el.classList[e ? "add" : "remove"]("stop"), t.el.classList[e ? "remove" : "add"]("start");
}
});
}), define("/templates/addTask.js", {
name: "addTask",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<input type="text" class="addTask-input chromeless" maxlength="255"/> <div class="positionHelper"> <div class="positionHelper-text"></div> <div class="positionHelper-target"></div> </div>';
},
useData: !0
}
}), define("/styles/addTask.js", {
name: "addTask",
data: '#wunderlist-base .addTask{overflow:hidden;position:relative;margin:14px 0;padding:0 12px;-webkit-border-radius:3px;border-radius:3px;background:rgba(0,0,0,0.32);-webkit-box-shadow:inset 0 0 3px 0 rgba(0,0,0,0.25);box-shadow:inset 0 0 3px 0 rgba(0,0,0,0.25);}#wunderlist-base .addTask.focus{-webkit-box-shadow:inset 0 0 4px rgba(0,0,0,0.4),0 1px 0 rgba(255,255,255,0.1),0 0 5px rgba(255,255,255,0.7);box-shadow:inset 0 0 4px rgba(0,0,0,0.4),0 1px 0 rgba(255,255,255,0.1),0 0 5px rgba(255,255,255,0.7)}#wunderlist-base .addTask .wundercon{color:rgba(255,255,255,0.8)}#wunderlist-base .addTask .addTask-input{color:#fff;font-weight:bold;text-shadow:0 1px 2px rgba(0,0,0,0.8);padding:10px 60px 10px 0;}#wunderlist-base .addTask .addTask-input.is-assignable{padding-right:80px}#wunderlist-base .addTask .addTask-input::-webkit-input-placeholder{color:#dbdbdb;text-shadow:0 1px 2px rgba(0,0,0,0.45)}#wunderlist-base .addTask .addTask-input:-moz-placeholder{color:#dbdbdb;text-shadow:0 1px 2px rgba(0,0,0,0.45)}#wunderlist-base .addTask .addTask-input:-ms-input-placeholder{color:#dbdbdb;text-shadow:0 1px 0 rgba(0,0,0,0.45)}#wunderlist-base .addTask .addTask-meta{position:absolute;top:9px;right:0;opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0);}#wunderlist-base .addTask .addTask-meta .addTask-meta-nlp{overflow:hidden;white-space:nowrap;color:#fff;font-weight:bold;text-shadow:0 1px 2px rgba(0,0,0,0.8);padding-top:1px}#wunderlist-base .addTask .addTask-meta .addTask-meta-star,#wunderlist-base .addTask .addTask-meta .addTask-meta-assign,#wunderlist-base .addTask .addTask-meta .addTask-meta-date{opacity:.7;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=70)";filter:alpha(opacity=70);color:#fff;}#wunderlist-base .addTask .addTask-meta .addTask-meta-star svg,#wunderlist-base .addTask .addTask-meta .addTask-meta-assign svg,#wunderlist-base .addTask .addTask-meta .addTask-meta-date svg{fill:#fff}#wunderlist-base .addTask .addTask-meta .addTask-meta-star.starred,#wunderlist-base .addTask .addTask-meta .addTask-meta-assign.assigned,#wunderlist-base .addTask .addTask-meta .addTask-meta-date.dated{opacity:1;-ms-filter:none;filter:none}#wunderlist-base .addTask .addTask-meta a{cursor:default}#wunderlist-base .addTask .addTask-meta-star{margin-right:10px;}#wunderlist-base .addTask .addTask-meta-star.starred svg path:last-child{opacity:1;-ms-filter:none;filter:none}#wunderlist-base .addTask .addTask-meta-date{margin-right:9px;position:relative;}#wunderlist-base .addTask .addTask-meta-date .addTask-meta-date-label{position:absolute;top:7px;left:0;height:10px;width:20px;color:#fff;font-size:8px;font-weight:bold;text-align:center}#wunderlist-base .addTask .addTask-meta-assign{position:relative;margin-right:8px;}#wunderlist-base .addTask .addTask-meta-assign .avatar,#wunderlist-base .addTask .addTask-meta-assign .input-assign-frame,#wunderlist-base .addTask .addTask-meta-assign .input-assign-delete{position:absolute;display:none}#wunderlist-base .addTask .addTask-meta-assign .input-assign-frame{position:absolute;top:-3px;left:-2px;z-index:101}#wunderlist-base .addTask .addTask-meta-assign .input-assign-delete{position:absolute;top:-8px;right:-8px;z-index:102}#wunderlist-base .addTask .addTask-meta-assign .avatar{top:0;left:0}#wunderlist-base .addTask .addTask-meta-assign.assigned .wundercon.assigned{opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}#wunderlist-base .addTask .addTask-meta-assign.assigned .avatar,#wunderlist-base .addTask .addTask-meta-assign.assigned svg{display:block}#wunderlist-base .addTask .addTask-meta-assign.assigned .input-assign-delete{display:none}#wunderlist-base .addTask .addTask-meta-assign.assigned:hover .input-assign-delete{display:block}#wunderlist-base .addTask.speech-enabled .speech-wrapper{display:block;width:20px;height:20px;position:absolute;top:9px;left:9px;opacity:.7;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=70)";filter:alpha(opacity=70);}#wunderlist-base .addTask.speech-enabled .speech-wrapper svg{fill:#fff}#wunderlist-base .addTask.speech-enabled .speech-wrapper:hover{opacity:.8;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";filter:alpha(opacity=80)}#wunderlist-base .addTask.speech-enabled .speech-wrapper.stop{opacity:1;-ms-filter:none;filter:none}#wunderlist-base .addTask.speech-enabled .addTask-input{padding-left:23px;-webkit-transition:none;-moz-transition:none;-o-transition:none;-ms-transition:none;transition:none}#wunderlist-base .focus .addTask-meta{opacity:1;-ms-filter:none;filter:none;}#wunderlist-base .focus .addTask-meta a{cursor:pointer}#wunderlist-base .speech-wrapper{display:none;}#wunderlist-base .speech-wrapper.stop{opacity:1;-ms-filter:none;filter:none}html[dir=rtl] #wunderlist-base #tasks .addTask.speech-enabled .speech{left:auto;right:8px}html[dir=rtl] #wunderlist-base #tasks .addTask.speech-enabled .addTask-input{padding-right:23px}html[dir=rtl] #wunderlist-base #tasks .addTask .addTask-input{padding-right:0;padding-left:60px}html[dir=rtl] #wunderlist-base #tasks .addTask .addTask-meta{left:0;right:initial}html[dir=rtl] #wunderlist-base #tasks .addTask .addTask-meta-star,html[dir=rtl] #wunderlist-base #tasks .addTask .addTask-meta-date,html[dir=rtl] #wunderlist-base #tasks .addTask .addTask-meta-assign{margin-right:initial}html[dir=rtl] #wunderlist-base #tasks .addTask .addTask-meta-star{margin-left:10px}html[dir=rtl] #wunderlist-base #tasks .addTask .addTask-meta-date{margin-left:9px}html[dir=rtl] #wunderlist-base #tasks .addTask .addTask-meta-assign{margin-left:8px}'
}), define("views/Tasks/AddTaskView", [ "application/runtime", "helpers/domtools", "./Controllers/AddTaskViewController", "./Controllers/AddTaskViewNLPController", "./AddTaskAttributesView", "./AddTaskDatePickersView", "./AddTaskPopovers", "./AddTaskViewTextParser", "vendor/moment", "wunderbits/WBViewPresenter", "wunderbits/views/WBSpeechRecognitionView", "wunderbits/helpers/date", "project!core/WBStateModel", "project!core/WBDeferred", "template!addTask", "style!addTask", "style!_autoComplete" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m, g, f, b) {
var h = e._, v = e.$, _ = d.prototype, w = Function.prototype, k = {
starred: "add_starred_to_inbox",
today: "add_due_today_to_inbox",
all: "add_to_inbox"
};
return d.extend({
template: g,
className: "addTask hidden",
"implements": [ i, n ],
styles: [ f, b ],
emits: {
"keydown input": "keydown:input",
"keyup input": "keyup:input",
"blur input": "blur:input",
"focus input": "focus:input"
},
observes: {
"runtime.languages": {
"change:data": "setPlaceholder"
},
runtime: {
"lists:ready": "onListsReady",
"tags:suggestions": "tagSuggestions",
"tagAutoComplete:create": "selectTag",
"autoComplete:assign": "cleanupAutoComplete",
"focus:addTaskInput": "setFocus"
},
textParser: {
"open:assignPopover": "openAssignPopover",
"open:tagPopover": "openTagPopover",
"close:assignPopover": "closePopovers",
"close:tagPopover": "closePopovers"
}
},
initialize: function() {
var e = this;
e.listsReady = e.deferred(), e.blurState = new p({
shouldBlur: !0,
overrideBlurDelay: 200
}), e.textParser = new s(), e.attributeState = new p({
starred: !1,
due_date: null,
assignee: null
}), e.datePickers = e.addSubview(new o(), "datePickers"), e.popovers = new r({
datePickers: e.datePickers
}), e.attributesView = new a({
blurState: e.blurState,
attributeState: e.attributeState,
popovers: e.popovers,
datePickers: e.datePickers
}), _.initialize.apply(e, arguments), e.bindTo(e.datePickers.datePicker.model, "change", e.onSetChanges), 
e.bindTo(e.datePickers.reminderDatePicker.model, "change", e.onSetChanges);
},
render: function(t) {
var i = this, n = !1;
return (i.listID === t.listID && !t.filter && !i.filter || i.listID === t.listID && t.filter && t.filter === i.filter) && (n = !0), 
i.listID = t.listID, i.listModel = t.listModel, _.render.call(i), i.filter = t.filter || (t.listModel ? null : i.filter), 
n ? i : (i.$el.prepend(i.attributesView.render({
addTaskEl: i.$el,
listID: i.listID,
filter: i.filter
}).el), e.env.isSpeechEnabled() && !e.env.isNodeWebkit() && i.setupSpeechInput(), 
i.resetView(), i.setPlaceholder(), i.renderTagPopover(), i.renderAssignPopover(), 
i.updateIsAssignable(), i.setupFilters(), i);
},
resetInput: function() {
var e = this;
e.$(".addTask-input").val("");
},
setupSpeechInput: function() {
var t = this, i = t.speechRecognition = new c({
target: t.$("input")[0],
lang: e.settings.attributes.language
});
t.el.appendChild(i.render().el), t.$el.addClass("speech-enabled"), t.$(".positionHelper").addClass("speech-enabled");
},
onListsReady: function(e) {
var t = this;
t.lists = e, t.listsReady.resolve();
},
setPlaceholder: function() {
var t, i = this, n = i.$(".addTask-input"), a = k[i.filter];
a ? (a = "placeholder_" + a, n.attr("data-key-placeholder", a), n.attr("data-key-aria-label", a), 
n.attr("data-placeholder", ""), n.attr("data-aria-label", ""), i.renderPlaceHolders(), 
i.renderAriaAttributes()) : i.listsReady.done(function() {
var a = i.lists.get(i.listID);
i.placeholderBind && i.unbindFrom(i.placeholderBind), i.placeholderBind = a && i.bindTo(a, "change:title", i.setPlaceholder), 
t = a && "inbox" === a.id ? e.language.getText("smart_list_inbox") : a && a.attributes.title, 
n.attr("data-key-placeholder", "placeholder_add_task_to_$"), n.attr("data-key-aria-label", "placeholder_add_task_to_$"), 
n.attr("data-placeholder", t), n.attr("data-aria-label", t), i.renderPlaceHolders(), 
i.renderAriaAttributes();
});
},
setFocus: function() {
var e = this, t = e.$(".addTask-input");
t.is(":focus") || t.focus();
},
resetView: function() {
var e = this;
e.$(".addTask-meta-assign").removeClass("assigned"), e.$(".addTask-meta-date").removeClass("dated"), 
e.$(".addTask-meta-date-label").empty(), e.$(".addTask-meta-star").removeClass("starred"), 
e.attributeState.set({
frequency: null,
interval: null,
due_date: "today" === e.filter ? e.attributeState.attributes.due_date : null,
reminderDate: null,
reminderTime: null,
starred: "starred" === e.filter ? !0 : !1,
assignee: null
}), e.popovers.resetDatePickerModels();
},
renderNLPFeedback: function(e) {
var i = this;
i.requestAnimationFrame(function() {
function n() {
i.requestAnimationFrame(function() {
a.addClass("hidden").text("").removeAttr("style");
});
}
i.setPositionHelper();
var a = i.$(".addTask-meta-nlp"), o = i.$(".addTask-input"), r = i.$(".positionHelper-text"), s = o.width(), l = r.width();
a.text(e.text).removeClass("hidden").css({
width: s - l,
transition: "width 250ms ease-in-out"
}), t.once(a[0], "transitionend", n), i.defer(function() {
a.css({
width: 0
});
});
});
},
renderTagPopover: function() {
var e = this;
e.tagPopover = e.addSubview(e.popovers.setupPopover("TagPopoverView", e.$(".positionHelper-target"), w, w, {
context: e,
position: "bottom",
offset: 70,
margin: -4
}), "tagPopover");
},
renderAssignPopover: function() {
var e = this;
e.assignPopover = e.addSubview(e.popovers.setupPopover("AssignToUserPopoverView", e.$(".positionHelper-target"), w, w, {
listId: e.listID,
assignedTo: e.attributeState.attributes.assignee,
offset: 70,
margin: -4,
hideNoAssign: !0,
reconfig: !0
}), "assignPopover"), e.bindTo(e.assignPopover, "clear:assigned", function() {
e.trigger("click:deleteAssignee");
});
},
openTagPopover: function() {
var t = this;
e.trigger("focus:set", "tagPopover"), t.setPositionHelper(), t.tagPopover && t.tagPopover.toggle("open", {});
},
openAssignPopover: function() {
var t = this;
if (e.trigger("focus:set", "assignPopover"), !t.assignPopover.popover || t.assignPopover.popover.popoverOpened !== !0) {
var i = {
assignedTo: t.attributeState.attributes.assignee,
offset: 70,
margin: -4,
listId: t.listID,
hideNoAssign: !0,
reconfig: !0,
startedFromKeys: !0,
target: t.$(".positionHelper-target")
};
t.setPositionHelper(), t.assignPopover && t.assignPopover.toggle("open", i);
}
},
closePopovers: function() {
var e = this;
e.assignPopover && e.assignPopover.toggle("close", {}), e.tagPopover && e.tagPopover.toggle("close", {}), 
e.$("input").focus();
},
cleanupAutoComplete: function(t, i) {
var n = this;
if (!i && -1 !== e.currentRoute().indexOf("/new")) {
var a = n.$(".addTask-input").val().split(" "), o = h.last(a).toLowerCase(), r = h.initial(a);
0 === o.indexOf("@") && (o = o.substr(1));
var s = n.assignPopover.assignables.get(t), l = s.attributes.name.toLowerCase(), d = e.language.getText("label_assign_me").toLowerCase();
o === d && e.user.isIDEqual(s.id) && (l = e.language.getText("label_assign_me").toLowerCase()), 
l.indexOf(o) < 0 && (r = a);
var c = v.map(r, function(e) {
return e.replace(/\s/g, "-");
}).join(" ");
n.$(".addTask-input").val(c + (c.length ? " " : "")), n.closePopovers();
}
},
onSetChanges: function() {
var e = this;
e.attributeState.set({
frequency: null,
interval: null,
due_date: null,
reminderDate: null,
reminderTime: null
});
var t = e.datePickers.datePicker.model.attributes.date, i = e.datePickers.datePicker.model.attributes.frequency, n = e.datePickers.datePicker.model.attributes.interval, a = t ? !0 : !1, o = e.datePickers.reminderDatePicker.model.attributes.date, r = e.datePickers.reminderDatePicker.model.attributes.reminder_time;
e.attributeState.set({
frequency: i ? i : null,
interval: n ? n : null,
due_date: t ? l(t).format("YYYY-MM-DD") : null,
reminderDate: o ? u.convertLocalDateToServerDate(l(o).format("YYYY-MM-DD")) : null,
reminderTime: r ? r : null
});
var s = e.$(".addTask-meta-date"), d = s.find(".addTask-meta-date-label");
s.toggleClass("dated", a), t ? d.text(l(t).format("D")) : d.empty(), t || o || e.$(".dated").removeClass("dated");
},
setPositionHelper: function() {
var e = this, t = e.$(".addTask-input").val(), i = e.$(".positionHelper-text");
i.html("");
var n = t.split(" "), a = n.slice(0, n.length - 1);
i.html(a + "+");
},
selectTag: function(e) {
var t = this, i = t.$(".addTask-input"), n = i.val(), a = n.split(" "), o = h.initial(a).join(" "), r = "";
r = o ? o + " " + e + " " : e + " ", i.val(r), t.closePopovers();
},
tagSuggestions: function(e) {
var t = this;
e.length && t.tagPopover.renderTagSearchResults(e);
},
updateIsAssignable: function() {
var t = this, i = t.listModel, n = i && i.toJSON(), a = h.has(n, "membershipID") && i.isShared();
t.$(".addTask-input").toggleClass("is-assignable", a), t.$(".addTask-meta-assign").toggleClass("hidden", !a), 
i && !a ? (t.assignableBind && t.unbindFrom(t.assignableBind), t.assignableBind = t.bindTo(i, "change:isShared", "updateIsAssignable")) : (t.bindTo(e, "assignPopover:cancel", t.debounce(t.closePopovers), 250, !0), 
t.assignableBind && t.unbindFrom(t.assignableBind));
},
setupFilters: function() {
var t = this;
t.filter && (t.dueDate = null), "starred" === t.filter && (t.$(".wundercon.star").addClass("starred").addClass("hidden"), 
t.$el.undelegate(".addTask-meta-star", "click"), t.attributeState.set("starred", !0)), 
"today" === t.filter ? (t.$(".addTask-meta-date").addClass("today hidden").html(l().format("D")), 
t.attributeState.set("due_date", l().format("YYYY-MM-DD")), t.dateBind = t.bindTo(e, "day:ended", function() {
t.attributeState.set("due_date", l().format("YYYY-MM-DD"));
})) : t.dateBind && t.unbindFrom(t.dateBind);
}
});
}), define("/templates/symbols/info.js", {
name: "symbols/info",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return ' <svg class="info" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>info</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="info" sketch:type="MSArtboardGroup" > <path d="M10,17.5 C5.86,17.5 2.5,14.14 2.5,10 C2.5,5.86 5.86,2.5 10,2.5 C14.14,2.5 17.5,5.86 17.5,10 C17.5,14.14 14.14,17.5 10,17.5 L10,17.5 Z M10,3.5 C6.42,3.5 3.5,6.42 3.5,10 C3.5,13.58 6.42,16.5 10,16.5 C13.58,16.5 16.5,13.58 16.5,10 C16.5,6.42 13.58,3.5 10,3.5 L10,3.5 Z M10,7.58 C9.84,7.58 9.7,7.52 9.6,7.42 C9.48,7.3 9.42,7.14 9.42,7 C9.42,6.84 9.48,6.7 9.6,6.58 C9.8,6.36 10.2,6.36 10.4,6.58 C10.52,6.7 10.58,6.84 10.58,7 C10.58,7.14 10.52,7.3 10.4,7.4 C10.3,7.52 10.16,7.58 10,7.58 L10,7.58 Z M10,13.5 C9.72,13.5 9.5,13.28 9.5,13 L9.5,9 C9.5,8.72 9.72,8.5 10,8.5 C10.28,8.5 10.5,8.72 10.5,9 L10.5,13 C10.5,13.28 10.28,13.5 10,13.5 L10,13.5 Z" id="u" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/TBV404.js", {
name: "TBV404",
data: {
"1": function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression;
return ' <span class="tasks-404-label">' + r((a = t.label || e && e.label, typeof a === o ? a.call(e, {
name: "label",
hash: {},
data: n
}) : a)) + "</span> ";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = "function", d = "";
return a = t["if"].call(e, e && e.label, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d += " " + s((o = t.symbol || e && e.symbol || r, 
o.call(e, e && e.icon, {
name: "symbol",
hash: {},
data: n
}))) + " <h2>", o = t.message || e && e.message, a = typeof o === l ? o.call(e, {
name: "message",
hash: {},
data: n
}) : o, (a || 0 === a) && (d += a), d + "</h2>";
},
useData: !0
}
}), define("/styles/fourohfour.js", {
name: "fourohfour",
data: ".tasks-404{padding:25px;position:absolute;left:0;right:0;text-align:center;top:50%;margin-top:-110px !important;}.tasks-404 .tasks-404-label{position:absolute;color:#fff;font-size:34px;text-align:center;width:100px;height:100px;top:64px;text-shadow:0 1px 0 rgba(0,0,0,0.2)}.tasks-404 svg{height:100px;width:100px;fill:#fff;-webkit-filter:drop-shadow(0 1px 0 rgba(0,0,0,0.2))}.tasks-404 h2{font-size:18px;color:rgba(255,255,255,0.85);text-shadow:0 1px 0 rgba(0,0,0,0.2)}.background-05 #tasks .tasks-404,.background-06 #tasks .tasks-404{-webkit-border-radius:10px;border-radius:10px;margin:0 25%;background:rgba(0,0,0,0.25)}"
}), define("views/Tasks/404", [ "application/runtime", "wunderbits/WBView", "partial!symbols/info", "template!TBV404", "style!fourohfour" ], function(e, t, i, n, a) {
var o = e._, r = t.prototype;
return t.extend({
template: n,
className: "tasks-404",
styles: [ a ],
render: function(t) {
var i = this, n = o.clone(e.smartLists);
n.push("search");
var a = {
search: "coachmark_no_search_results",
week: "coachmark_week_list_empty",
today: "coachmark_today_list_empty",
all: "coachmark_all_list_empty",
starred: "coachmark_starred_list_empty",
completed: "coachmark_completed_list_empty",
assigned: "coachmark_assigned_to_me_list_empty"
}, s = {};
if (t = "done" === t ? "completed" : t, o.indexOf(n, t) >= 0) s.message = e.language.getLabel(a[t]).toString(); else if ("list" === t || "task" === t) {
var l = "error_" + t + "_not_found";
s.message = e.language.getLabel(l).toString();
} else s.message = e.language.getLabel("error_page_not_found").toString();
if (-1 !== o.indexOf(n, t)) {
if (s.icon = t, "today" === t) {
var d = new Date();
s.label = d.getDate();
}
} else s.icon = "info";
return r.render.call(i, s), i;
}
});
}), define("views/TaskDetail/Controllers/SectionViewController", [ "application/runtime", "wunderbits/WBViewController" ], function(e, t) {
return t.extend({
"implements": {
focused: "handleFocus",
mousedown: "handleMouseDown"
},
handleFocus: function() {
var t = this, i = t.view;
if (this.lastMouseDown) {
var n = new Date().valueOf(), a = n - this.lastMouseDown;
2 > a && t.defer(function() {
var t = i.editRoute();
e.trigger("route:" + t);
});
}
},
handleMouseDown: function() {
this.lastMouseDown = new Date().valueOf();
}
});
}), define("views/TaskDetail/SectionView", [ "application/runtime", "wunderbits/WBViewPresenter", "./Controllers/SectionViewController" ], function(e, t, i) {
var n = e._;
return t.extend({
sectionName: null,
attributes: {
tabindex: 0
},
"implements": [ i ],
emits: {
focus: "focused",
mousedown: "mousedown"
},
sectionRoute: function() {
return this.model.route("/" + this.sectionName);
},
editRoute: function() {
return this.sectionRoute() + "/edit";
},
focusRoute: function() {
return this.sectionRoute() + "/focus";
},
trySetFocusRoute: function() {
var t = this;
n.delay(function() {
e.currentRoute() === t.editRoute() && e.trigger("route:" + t.focusRoute());
}, 250);
}
});
}), define("views/TaskDetail/Controllers/TaskDetailAssigningController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/helpers/date", "helpers/Animator", "wunderbits/WBViewController" ], function(e, t, i, n, a) {
var o = e.$, r = e._, s = a.prototype;
return a.extend({
"implements": {
"toggle:edit": "toggleEditMode",
"delete:assignee": "deleteAssignee",
"save:assignee": "saveAssignee",
"input:autocomplete": "debouncedHandleAutocomplete",
keydown: "handleKeys",
focus: "focusSelf",
"assignee:selected": "onAssigneeSelected"
},
initialize: function() {
var e = this;
e.debouncedHandleAutocomplete = e.debounce(e.handleAutocomplete, 100), s.initialize.apply(e, arguments);
},
handleKeys: function(i) {
var n = this, a = n.view, o = i.target === a.el;
i.which === t.enter && o ? (n.toggleEditMode(), n.stopEventFully(i)) : i.which !== t.esc || o ? i.which !== t.tab || o || (n.handleTab(i), 
n.stopEventFully(i)) : (n.onHideEditMode(), e.trigger("route:" + a.model.route("/assignee/focus")), 
n.stopEventFully(i));
},
handleTab: function(e) {
this.stopEventFully(e);
},
focusSelf: function() {
this.view.focusSelf();
},
toggleEditMode: function(t) {
var i = this;
i.view.preventInputBlur || i.view.isEditing || i.view.ready.done(function() {
var n = i.view.$el.hasClass("editing");
n || (i.view.showEditMode(), i.view.triggerFocusChange()), t && (t.stopPropagation(), 
e.trigger("analytics:Detail:clickAssign"), i.view.preventInputBlur = !0);
});
},
deleteAssignee: function(e) {
var t = this, i = t.view;
i.model.save({
assignee_id: null
}), i.cancelChanges(), i.resetInput(), e && t.stopEventFully(e);
},
saveAssignee: function() {
var e = this, t = e.view.assignPopover.getSelected();
t ? e.view.assignToUser(t) : e.view.hideEditMode();
},
onHideEditMode: function() {
this.view.hideEditMode();
},
handleAutocomplete: function(e) {
var i, n, a = this, s = a.view, l = [ t.shift, t.left, t.right, t.up, t.down, t.esc, t.enter ];
s.assignPopover && -1 === r.indexOf(l, e.which) && (n = o(e.target).val(), n = n.replace(/^\@/, ""), 
n ? (i = s.assignPopover.searchRecipients(n), s.assignPopover.renderSearchResults(i)) : a.selectNone());
},
onAssigneeSelected: function(e, t) {
var i = this, n = i.view, a = n.model;
a && a.id === t && n.updateInput(e);
},
selectNone: function() {
var e = this.view;
e.resetInput(), e.assignPopover.selectNone();
}
});
}), define("/templates/detailview/detailAssign.js", {
name: "detailview/detailAssign",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return r((a = t.symbol || e && e.symbol || o, a.call(e, "assigned", {
name: "symbol",
hash: {},
data: n
}))) + ' <span class="detail-assigned hidden"></span> <div class="section-title"> ' + r((a = t.localized || e && e.localized || o, 
a.call(e, "label_assign_to", {
name: "localized",
hash: {},
data: n
}))) + ' </div> <div class="section-description"></div> <a class="detail-delete" data-key-aria-label="button_delete" tabindex="0"> ' + r((a = t.symbol || e && e.symbol || o, 
a.call(e, "delete", {
name: "symbol",
hash: {},
data: n
}))) + ' </a> <div class="section-edit hidden"> <span class="target"></span> <input type="text" class="assign chromeless" data-key-placeholder="label_assign_to"/> </div> ';
},
useData: !0
}
}), define("views/TaskDetail/TaskDetailAssignView", [ "application/runtime", "vendor/moment", "actions/Factory", "./SectionView", "views/AvatarView", "views/Assigning/AssignToUserPopoverView", "views/TaskDetail/Controllers/TaskDetailAssigningController", "template!detailview/detailAssign", "partial!symbols/assigned", "partial!symbols/delete" ], function(e, t, i, n, a, o, r, s, l, d, c) {
var u = e._, p = n.prototype;
return n.extend({
sectionName: "assignee",
template: s,
className: "section detail-assign",
"implements": [ r ],
emits: {
click: "toggle:edit",
"click .delete": "delete:assignee",
"click .save": "save:assignee",
"keyup .section-edit input": "input:autocomplete",
keydown: "keydown"
},
observes: {
runtime: {
assigneeSelected: ">assignee:selected"
}
},
initialize: function() {
var t = this;
p.initialize.apply(t, arguments), t.listLookup = i.listLookup(), t.userLookup = i.userLookup(), 
t.ready = t.deferred(), t.assignablesReady = t.deferred(), t.bindTo(e, "users:ready", t.resolveAssignables);
},
renderData: {
assignee_id: c,
name: c
},
formatData: function(e) {
var t = this, i = t.model.attributes;
return e.assignee_id = i.assignee_id, e.name = i.name, e;
},
render: function(e) {
var t = this;
t.unbindFromModel(), t.unbindFromList(), t.unbindFromAssignables(), t.options = e, 
t.model = e.model;
var i = [ t.assignablesReady, e.animationDeferred ];
return t.when(i).done(function() {
t.requestAnimationFrame(function() {
t.bindToModel(), t.bindToList(), t.bindToAssignables();
var e = t.model.attributes;
p.render.call(t, t.formatData(t.renderData)), t.$el.addClass("hidden"), t.$el[e.assignee_id ? "addClass" : "removeClass"]("assigned"), 
e.assignee_id && t.renderAssignee(e.assignee_id), t.toggleAssigningVisibility(), 
t.ready.resolve();
});
}, t), t;
},
resolveAssignables: function() {
var e = this;
e.assignablesReady.resolve();
},
hideEditMode: function() {
var e = this, t = e.$(".section-edit");
e.$el.hasClass("editing") && (t.siblings().not(".detail-assigned").removeClass("hidden"), 
t.addClass("hidden"), e.$el.removeClass("editing"), e.closePopovers(), e.autoCompleteBind && e.unbindFrom(e.autoCompleteBind), 
e.trySetFocusRoute());
},
unbindFromModel: function() {
var e = this;
e.model && e.unbindFromTarget(e.model);
},
unbindFromList: function() {
var e = this;
e.shareBind && e.unbindFrom(e.shareBind);
},
unbindFromAssignables: function() {
var e = this;
e.assignables && e.unbindFromTarget(e.assignables);
},
bindToModel: function() {
var e = this;
e.unbindFromModel(), e.bindTo(e.model, "change:assignee_id", e.updateAssignee);
},
bindToList: function() {
var e = this, t = e.listLookup.getListModel(e.model.attributes.list_id);
e.unbindFromList(), t && (e.shareBind = e.bindTo(t, "change:isShared", function() {
e.render(e.options);
})), e.isShared = t ? t.isShared() : e.options.isShared;
},
bindToAssignables: function() {
var e = this;
e.unbindFromAssignables();
var t = e.model.attributes.list_id;
e.assignables = e.userLookup.getAssignableCollectionForList(t), e.bindTo(e.assignables, "add remove", e.toggleAssigningVisibility), 
e.bindTo(e.assignables, "add", e.checkNewAssignable);
},
toggleAssigningVisibility: function() {
var e = this;
e.$el.toggleClass("hidden", !e.assignables.models.length || !e.isShared);
},
showEditMode: function() {
var t = this, i = t.$(".section-edit");
t.isEditing = !0, e.trigger("route:" + t.model.route("/assignee/edit"), {
trigger: !1
}), e.trigger("popover:close"), i.siblings().not(".wundercon, a, .detail-assigned").addClass("hidden"), 
i.removeClass("hidden"), t.$el.addClass("editing");
var n, a, o = t.model.attributes;
o.assignee_id && (a = t.assignables.get(o.assignee_id), n = a && a.attributes.name), 
t.updateInput(n || ""), i.find("input").select(), t.openAssignPopover(), t.autoCompleteBind && t.autoCompleteBind.target || (t.autoCompleteBind = t.bindTo(e, "autoComplete:assign", t.assignToUser));
},
triggerFocusChange: function() {
e.trigger("focus:set", "detail");
},
openAssignPopover: function(t) {
var i = this;
if (!i.assignPopover) {
i.defer(function() {
e.trigger("focus:set", "assignPopover");
});
var n = i.model.attributes, a = {
name: "detail-assign",
target: i.$(".target"),
position: "bottom",
listId: n.list_id,
taskId: n.id,
assignedTo: n.assignee_id,
offset: 70,
margin: 0,
hideNoAssign: !1,
onClose: function() {
i.destroySubview(i.assignPopover), i.assignPopover = null, i.hideEditMode();
}
};
t && u.extend(a, t), i.assignPopover = i.addSubview(new o(a)), i.bindTo(i.assignPopover, "clear:assigned", function() {
i.trigger("delete:assignee");
}), i.assignPopover.toggle("open", a), i.preventInputBlur = !0;
}
},
closePopovers: function() {
var e = this;
e.destroyed || (e.assignPopover && e.assignPopover.toggle("close", {}), e.isEditing = !1, 
e.preventInputBlur = !1);
},
assignToUser: function(e, t, i, n) {
var a = this;
n === a.model.id && (a.model.save({
assignee_id: e
}), a.$el.addClass("assigned"), a.closePopovers(), a.trigger("hide:edit"), a.isEditing = !1);
},
updateAssignee: function(e) {
var t = this;
return e.attributes.assignee_id ? void t.renderAssignee(e.attributes.assignee_id) : (t.cancelChanges(), 
void t.resetView());
},
checkNewAssignable: function(e) {
var t = this, i = t.model && t.model.attributes.assignee_id;
i && e.id === i && t.renderAssignee(i);
},
renderAssignee: function(e) {
var t = this, i = t.$(".detail-assigned"), n = e, o = t.assignables.get(n);
return n && o ? (t.avatarView = t.avatarView || t.addSubview(new a({
size: "small"
}), "avatarView"), t.$el.addClass("assigned"), i.removeClass("hidden").html(t.avatarView.render({
id: n
}).$el), void t.$(".section-title").text(o.attributes.name)) : void i.addClass("hidden");
},
resetView: function() {
var t = this;
t.$(".detail-assigned").addClass("hidden"), t.$el.removeClass("assigned"), t.$(".section-title").html(e.language.getText("label_assign_to"));
},
cancelChanges: function(e) {
var t = this;
t.isEditing = !1, t.closePopovers(), t.trigger("hide:edit"), e && e.stopPropagation();
},
focusSelf: function() {
this.$el.focus();
},
updateInput: function(t) {
this.$("input").val(t).attr("aria-label", e.language.getText("aria_assign_to_$", t));
},
resetInput: function() {
this.$("input").val("").attr("aria-label", "");
}
});
}), define("views/TaskDetail/Controllers/TaskDetailDateKeyController", [ "wunderbits/data/keycodes", "wunderbits/WBViewController" ], function(e, t) {
return t.extend({
"implements": {
keydown: "onKeydown",
focus: "focusSelf"
},
onKeydown: function(t) {
var i = this.view;
t.which !== e.enter || i.isEditVisible() || i.trigger("toggle:edit");
},
focusSelf: function() {
this.view.focusSelf();
}
});
}), define("views/TaskDetail/Controllers/TaskDetailDateClickController", [ "application/runtime", "wunderbits/WBViewController" ], function(e, t) {
return t.extend({
"implements": {
"toggle:edit": "toggleEditMode",
"delete:dueDate": "deleteDueDate",
"save:dueDate": "saveDueDate",
"datePicker:input": "datePickerInputMousedown"
},
toggleEditMode: function(t) {
var i, n = this, a = n.view;
n.view.preventInputBlur || a.ready.done(function() {
i = a.isEditVisible(), a.popover.isEventOnIgnoredElement(t) || (i || (n.offset = n.view.getDetailOffset(), 
a.showEditMode(), "0px" !== n.offset ? n.delay(function() {
a.popover.trigger("popover:open");
}, 250) : a.popover.trigger("popover:open"), e.trigger("route:" + a.model.route("/duedate/edit"), {
trigger: !1
}), a.triggerFocusChange()), t && t.stopPropagation());
});
},
deleteDueDate: function(e) {
var t = this, i = t.view;
i.saveDefaults(), i.cancelChanges(e), e && t.stopEventFully(e);
},
saveDueDate: function(e) {
var t = this, i = t.view;
i.saveChanges(), i.cancelChanges(e), e && t.stopEventFully(e);
},
datePickerInputMousedown: function() {
var e = this, t = e.view;
t.preventInputBlur = !0, e.delay(function() {
t.preventInputBlur = !1;
}, 250);
}
});
}), define("views/TaskDetail/Controllers/TaskDetailDatePickerController", [ "application/runtime", "vendor/moment", "wunderbits/data/keycodes", "wunderbits/helpers/date", "wunderbits/WBViewController" ], function(e, t, i, n, a) {
var o = e.$;
return a.extend({
"implements": {
"datePicker:blur": "datePickerInputBlur",
"forceFF:event": "forceFFChangeEvent",
"save:click": "saveChanges",
"cancel:click": "cancelChanges",
"datepicker:keydown": "editDateKeyDown",
"keydown:saveButton": "onSaveButtonKeydown",
"keydown:deleteButton": "onDeleteOrSaveKeydown"
},
editDateKeyDown: function(e) {
var t = this, n = t.view;
t.shiftKeyDown = !1, e.shiftKey && e.which == i.tab && (t.shiftKeyDown = !0), e.which === i.enter ? (n.saveChanges(), 
n.cancelChanges(e)) : e.which === i.esc ? n.cancelChanges(e) : e.which === i.tab && n.trigger("datePicker:input");
},
saveChanges: function() {
this.view.saveChanges();
},
cancelChanges: function() {
this.view.cancelChanges();
},
onSaveButtonKeydown: function(e) {
var t = this, n = this.view;
e.shiftKey || e.which !== i.tab || (n.focusDateInput(), t.stopEventFully(e)), t.onDeleteOrSaveKeydown(e);
},
onDeleteOrSaveKeydown: function(e) {
var t = this;
e.which === i.esc && (t.view.cancelChanges(e), t.stopEventFully(e));
},
forceFFChangeEvent: function(e) {
var t = this, i = t.view;
i.preventInputBlur = !0, o(e.currentTarget).blur().focus();
}
});
}), define("wunderbits/WBDatePickerInputView", [ "./lib/dependencies", "vendor/moment", "./data/keycodes", "./helpers/date", "./helpers/selection", "./WBView" ], function(e, t, i, n, a, o) {
var r = e.$, s = e._, l = o.prototype;
return o.extend({
tagName: "input",
attributes: {
type: "text"
},
className: "datepicker-input medium",
events: {
input: "_debouncedUpdateInput",
keydown: "_handleKeydown"
},
initialize: function(e) {
var t = this;
l.initialize.apply(t, arguments), t._options = e || {}, t.settingsModel = t._options.settingsModel, 
t.datePickerModel = t._options.datePickerModel, t.bindTo(t.datePickerModel, "change:date", t.updateOnChangeModel), 
t._debouncedUpdateInput = s.debounce(t._updateInput, 50);
},
render: function() {
var e, t = this, i = t.datePickerModel.attributes.date;
if (l.render.call(t, {}), !i || s.isNaN(i)) t.$el.val(null).attr("data-key-value", null); else if (e = n.humanizeDueDate(new Date(i), t.settingsModel.attributes.date_format, !0), 
e !== t.$el.val()) {
var a = t._options && t._options.onModelChange(e);
t.$el.val(a).attr("data-key-value", e), t.renderPlaceHolders();
}
return t;
},
updateOnChangeModel: function(e, t, i) {
var n = this;
i = i || {}, i.fromInput || n.render();
},
_updateInput: function() {
var e = this, t = r.trim(e.$el.val()), i = r.trim(n.humanizeDueDate(new Date(e.datePickerModel.attributes.date), e.settingsModel.attributes.date_format)).toLowerCase();
t !== i && e.datePickerModel.parseSmartDate(t, e.options.futureOnly, e.options.noRepeats, !0);
},
_handleKeydown: function(e) {
var t = this;
(37 === e.which || 38 === e.which || 39 === e.which || 40 === e.which) && t._handleDateInputArrows(e);
},
_handleDateInputArrows: function(e) {
var o, r = this, s = r.datePickerModel.attributes.date, l = r.settingsModel.attributes.date_format, d = r.$el, c = l.indexOf("YYYY"), u = l.indexOf("MM"), p = l.indexOf("DD"), m = a.getCaretPos(d[0]);
if ((e.which === i.up || e.which === i.down) && e.preventDefault(), s) {
var g = e.shiftKey ? 5 : 1, f = n.isHumanizeable(new Date(s));
if (f || m >= p && p + 2 >= m ? (!f || e.which !== i.up && e.which !== i.down || (m = 0), 
e.which === i.up ? o = t(s).add("days", g) : e.which === i.down && (o = t(s).subtract("days", g))) : m >= c && c + 4 >= m ? e.which === i.up ? o = t(s).add("years", g) : e.which === i.down && (o = t(s).subtract("years", g)) : m >= u && u + 2 >= m && (e.which === i.up ? o = t(s).add("months", g) : e.which === i.down && (o = t(s).subtract("months", g))), 
m === d.val().length && e.which === i.right ? o = t(s).add("days", g) : 0 === m && e.which === i.left && (o = t(s).subtract("days", g)), 
o) {
if (r.options.futureOnly && o < t().sod()) return;
r.datePickerModel.set("date", o.valueOf()), a.setCaretToPos(d[0], m);
}
}
}
});
}), define("/styles/detailview/popover.js", {
name: "detailview/popover",
data: "#wunderlist-base .numeric-date{width:80%;margin:10px 25px 0 25px;}#wunderlist-base .numeric-date input{min-width:100%;-webkit-border-radius:2px;border-radius:2px}#wunderlist-base .behavior-section{width:100%;}#wunderlist-base .behavior-section .date,#wunderlist-base .behavior-section .time{text-align:center;}#wunderlist-base .behavior-section .date .select.arrow-hidden::before,#wunderlist-base .behavior-section .time .select.arrow-hidden::before{display:none}#wunderlist-base .behavior-section .time .input-fake{padding:4px 25px 6px 25px}#wunderlist-base .option-controls{border-top:1px solid #e0e0e0;margin:10px 0;padding:10px 8px 0 8px;text-align:center;}#wunderlist-base .option-controls button{width:100%}"
}), define("/templates/detailview/datePicker.js", {
name: "detailview/datePicker",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return '<div class="numeric-date"></div> <div class="calendar-date"></div> <div class="behavior-section"></div> <div class="option-controls cols"> <div class="col-50"> <button class="gray cancel">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "button_cancel", {
name: "localized",
hash: {},
data: n
}))) + '</button> </div> <div class="col-50"> <button class="blue save">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "button_save", {
name: "localized",
hash: {},
data: n
}))) + "</button> </div> </div>";
},
useData: !0
}
}), define("views/TaskDetail/TaskDetailDatePickerView", [ "application/runtime", "vendor/moment", "wunderbits/helpers/date", "wunderbits/WBBlurHelper", "views/TaskDetail/Controllers/TaskDetailDatePickerController", "wunderbits/WBDatePickerView", "wunderbits/WBDatePickerInputView", "wunderbits/WBPopoverView", "wunderbits/WBViewPresenter", "style!detailview/popover", "template!detailview/datePicker" ], function(e, t, i, n, a, o, r, s, l, d, c) {
var u = l.prototype;
return l.extend({
"implements": [ a ],
styles: [ d ],
template: c,
observes: {
behaviorView: {
"cancel:changes": "cancelChanges",
"save:changes": "saveChanges"
}
},
emits: {
"click .save": "save:click",
"click .cancel": "cancel:click",
"mousedown #edit-repeat-frequency, #edit-repeat-interval, #edit-repeat, #edit-repeat option, a.detail-delete, a.detail-save": "datePicker:input",
"blur #edit-repeat-frequency, #edit-repeat": "datePicker:blur",
"keyup #edit-repeat, #edit-repeat-interval": "forceFF:event",
"keydown input": "datepicker:keydown",
"keydown .save": "keydown:saveButton",
"keydown a.detail-delete": "keydown:deleteButton"
},
initialize: function(t) {
var i = this;
i.options = t || {};
var n = i.options.behaviorView;
i.datePicker = i.addSubview(new o({
futureOnly: !1,
hideNoDate: !0,
hideCancel: !0,
startDay: e.settings.attributes.start_of_week,
settingsModel: e.settings
})), i.datePickerInput = i.addSubview(new r({
futureOnly: !1,
settingsModel: e.settings,
noRepeats: t.repeat || null,
datePickerModel: i.datePicker.model,
onModelChange: i.updateDate.bind(i)
})), i.behaviorView = new n({
model: i.datePicker.model
}), u.initialize.apply(i, arguments), i.bindTo(e.settings, "change:start_of_week", "updateStartDay");
},
updateDate: function(t) {
var i = e.language.getText(t), n = i ? i : t;
return n;
},
updateStartDay: function() {
var t = this;
t.datePicker.isRendered = !1, t.datePicker.setStartDay(e.settings.attributes.start_of_week), 
t.datePicker.render();
},
render: function() {
var e = this;
return u.render.call(e), e.$(".numeric-date").html(e.datePickerInput.render().$el), 
e.$(".calendar-date").html(e.datePicker.render().$el), e.$(".behavior-section").html(e.behaviorView.render().$el), 
e;
},
getFrequency: function() {
var e = this.$("#edit-repeat-frequency"), t = parseInt(e.val(), 10);
return t;
},
focusDateInput: function() {
this.datePickerInput.$el.focus();
},
renderFrequency: function(e) {
var t = this.$("#edit-repeat-frequency");
t.val(e);
},
saveChanges: function() {
this.trigger("save:changes");
},
cancelChanges: function() {
this.trigger("cancel:changes");
}
});
}), define("views/TaskDetail/Controllers/TaskDetailRepeatController", [ "application/runtime", "vendor/moment", "wunderbits/helpers/date", "wunderbits/data/keycodes", "wunderbits/WBViewController" ], function(e, t, i, n, a) {
var o = e.$, r = e._;
return a.extend({
"implements": {
"change:repeat": "changeEditRepeat",
"change:interval": "changeEditRepeat",
"change:frequency": "changeCustomFrequency",
"frequency:keydown": "editRepeatFrequencyKeyDown",
"repeat:keydown": "editRepeatKeyDown"
},
changeEditRepeat: function(e) {
var t, i = this, n = i.view, a = o(e.currentTarget), s = a.val();
"custom" === s || "never repeats" === s ? (n.toggleEditCustomRepeat(), i.defer(function() {
t = "never repeats" === s ? {
interval: null,
frequency: null
} : {
interval: "days",
frequency: 1
}, n.model.set(t);
})) : i.editRepeatPresets(s), n.preventInputBlur = !0, r.delay(function() {
n.preventInputBlur = !1;
}, 100);
},
changeCustomFrequency: function() {
var e = this, t = e.view, i = t.getFrequency();
i = i > 0 ? i : 1, t.renderFrequency(i), t.focusFrequency(), e.defer(function() {
e.view.model.set("frequency", i);
});
},
editRepeatPresets: function(e) {
var i = this, n = i.view;
"undefined" != typeof n.inputPresets[e] ? i.defer(function() {
n.model.attributes.date || n.model.set("date", t().sod().valueOf()), n.model.set({
interval: n.inputPresets[e].interval,
frequency: n.inputPresets[e].frequency
});
}) : n.changeCustomInterval();
var a = n.inputPresets[e] && n.inputPresets[e].interval;
n.toggleTitleRepeat(a), n.toggleDescriptionRepeat(a);
},
editRepeatKeyDown: function(e) {
var t = this;
e.which === n.enter ? t.stopEventFully(e) : e.which === n.esc && t.view.cancelChanges(e);
},
editRepeatFrequencyKeyDown: function(e) {
var t = this, i = t.view, a = i.getFrequency();
e.which === n.up ? a += 1 : e.which === n.down ? a = a > 1 ? a - 1 : 1 : e.which === n.enter ? (i.saveChanges(), 
i.cancelChanges(e)) : e.which === n.esc && i.cancelChanges(e), e.which === n.up || e.which === n.down ? (i.renderFrequency(a), 
i.model.set("frequency", a), i.focusFrequency()) : e.which === n.backspace && (i.renderFrequency(""), 
i.model.set("frequency", 1));
}
});
}), define("/templates/detailView/repeatPicker.js", {
name: "detailview/repeatPicker",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression, s = t.helperMissing;
return '<label for="edit-repeat" value="' + r((a = t.label_repeat || e && e.label_repeat, 
typeof a === o ? a.call(e, {
name: "label_repeat",
hash: {},
data: n
}) : a)) + '"/> <span class="select"> <select id="edit-repeat"> <option value="never" data-key-text="label_repeat_never"selected></option> <option value="daily" data-key-text="label_repeat_every_day"></option> <option value="weekly" data-key-text="label_repeat_every_week"></option> <option value="monthly" data-key-text="label_repeat_every_month"></option> <option value="yearly" data-key-text="label_repeat_every_year"></option> <option value="custom" data-key-text="label_repeat_custom"></option> </select> </span> <span id="edit-custom-repeat" class="hidden"> ' + r((a = t.localized || e && e.localized || s, 
a.call(e, "label_every", {
name: "localized",
hash: {},
data: n
}))) + ' <input id="edit-repeat-frequency" type="text" class="small" value="0" size="2"/> <span class="select"> <select id="edit-repeat-interval"> <option value="never repeats" data-key-text="label_repeat_never"></option> <option value="days" data-key-text="label_time_day_plural" selected></option> <option value="weeks" data-key-text="label_time_week_plural"></option> <option value="months" data-key-text="label_time_month_plural"></option> <option value="years" data-key-text="label_time_year_plural"></option> </select> </span> </span>';
},
useData: !0
}
}), define("views/TaskDetail/TaskDetailRepeatPickerView", [ "application/runtime", "wunderbits/WBViewPresenter", "vendor/moment", "./Controllers/TaskDetailRepeatController", "template!detailView/repeatPicker" ], function(e, t, i, n, a) {
var o = t.prototype;
return t.extend({
template: a,
"implements": [ n ],
emits: {
"change #edit-repeat": "change:repeat",
"change #edit-repeat-interval": "change:interval",
"input #edit-repeat-frequency": "change:frequency",
"keydown #edit-repeat, #edit-repeat-interval": "repeat:keydown",
"keydown #edit-repeat-frequency": "frequency:keydown"
},
inputPresets: {
never: {
interval: null,
frequency: null
},
daily: {
interval: "days",
frequency: 1
},
weekly: {
interval: "weeks",
frequency: 1
},
monthly: {
interval: "months",
frequency: 1
},
yearly: {
interval: "years",
frequency: 1
}
},
intialize: function(e) {
var t = this;
t.options = e || {}, t.model = t.options.model, o.intialize.apply(t, arguments);
},
renderEditorDate: function(e, t, i) {
var n = this;
i = i || {};
var a = n.model.attributes.date, o = n.$("#edit-repeat"), r = n.$("#edit-custom-repeat");
a ? n.$el.addClass("date") : (n.$el.removeClass("date"), o.find("option:eq(0)").prop("selected", !0), 
r.addClass("hidden"), r.find("option:eq(1)").prop("selected", !0)), n.renderEditorRepeat();
},
toggleTitleRepeat: function(e) {
this.$(".section-title").toggleClass("repeat", e);
},
toggleDescriptionRepeat: function(e) {
this.$(".section-description").toggleClass("repeat", e);
},
renderEditorRepeat: function() {
var e = this;
if (!e.repeatEditorOpen) {
var t = e.model.attributes.date, i = e.model.attributes.interval, n = e.model.attributes.frequency, a = e.$("#edit-repeat"), o = e.$("#edit-custom-repeat");
if (t && i && n) if (a.find("option:eq(5)").prop("selected", !0), o.find('option[value="' + String(i).toLowerCase().substr(0, String(i).length) + '"]').prop("selected", !0), 
o.find("#edit-repeat-frequency").val(Number(n)), 1 !== parseInt(n, 10)) a.addClass("hdden"), 
e.$(".select:first").addClass("arrow-hidden"), o.removeClass("hidden"); else {
var r = {
days: "daily",
weeks: "weekly",
months: "monthly",
years: "yearly"
};
a.find("option").not('option[value="' + r[i] + '"]').removeAttr("selected"), a.find('option[value="' + r[i] + '"]').attr("selected", "selected");
} else a.find("option:eq(0)").prop("selected", !0), o.find("option:eq(1)").prop("selected", !0);
var s = o.is(":visible");
a[s ? "addClass" : "removeClass"]("hidden"), e.$(".select:first")[s ? "addClass" : "removeClass"]("arrow-hidden");
}
},
getFrequency: function() {
var e = this.$("#edit-repeat-frequency"), t = parseInt(e.val(), 10);
return t;
},
renderFrequency: function(e) {
var t = this.$("#edit-repeat-frequency");
t.val(e);
},
focusFrequency: function() {
this.$("#edit-repeat-frequency").focus();
},
toggleEditCustomRepeat: function() {
var e = this, t = e.$("#edit-repeat"), n = e.$("#edit-custom-repeat"), a = e.$(".section-title"), o = e.$(".section-description"), r = !n.is(":visible");
t.toggleClass("hidden"), e.$(".select:first").toggleClass("arrow-hidden"), n.toggleClass("hidden"), 
r ? (n.find("#edit-repeat-interval option:eq(1)").prop("selected", !0), e.defer(function() {
e.preventInputBlur = !0, n.find("#edit-repeat-frequency").val(1).focus(), e.model.set();
}), a.addClass("repeat"), o.addClass("repeat"), e.defer(function() {
e.model.attributes.date || e.model.set("date", i().sod().valueOf()), e.model.set({
interval: "days",
frequency: 1
});
})) : (t.find("option:eq(0)").prop("selected", !0), a.removeClass("repeat"), o.removeClass("repeat"));
},
changeCustomInterval: function() {
var e = this, t = e.$("#edit-repeat-interval").val();
e.defer(function() {
e.model.attributes.date || e.model.set("date", i().sod().valueOf()), e.model.set("interval", t);
});
},
saveChanges: function() {
this.trigger("save:changes");
},
cancelChanges: function() {
this.trigger("cancel:changes");
}
});
}), define("/templates/detailview/detailDate.js", {
name: "detailview/detailDate",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return r((a = t.symbol || e && e.symbol || o, a.call(e, "date", {
name: "symbol",
hash: {},
data: n
}))) + ' <div class="section-title">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "label_due_date", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="section-description"></div> <div class="section-edit hidden"> </div> <a class="detail-delete" data-key-aria-label="button_delete" tabindex="0"> ' + r((a = t.symbol || e && e.symbol || o, 
a.call(e, "delete", {
name: "symbol",
hash: {},
data: n
}))) + " </a> ";
},
useData: !0
}
}), define("/templates/symbols/date.js", {
name: "symbols/date",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<svg class="date" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>date</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="date" sketch:type="MSArtboardGroup" > <path d="M2.5,7 C2.22,7 2,6.78 2,6.5 L2,3.5 C2,2.68 2.68,2 3.5,2 L16.5,2 C17.32,2 18,2.68 18,3.5 L18,6.5 C18,6.78 17.78,7 17.5,7 L2.5,7 Z M3,6 L17,6 L17,3.5 C17,3.22 16.78,3 16.5,3 L3.5,3 C3.22,3 3,3.22 3,3.5 L3,6 Z M3.5,18 C2.68,18 2,17.32 2,16.5 L2,8.5 C2,8.22 2.22,8 2.5,8 C2.78,8 3,8.22 3,8.5 L3,16.5 C3,16.78 3.22,17 3.5,17 L16.5,17 C16.78,17 17,16.78 17,16.5 L17,8.5 C17,8.22 17.22,8 17.5,8 C17.78,8 18,8.22 18,8.5 L18,16.5 C18,17.32 17.32,18 16.5,18 L3.5,18 Z M8.5,12 C7.68,12 7,11.32 7,10.5 L7,9.5 C7,8.68 7.68,8 8.5,8 C9.32,8 10,8.68 10,9.5 L10,10.5 C10,11.32 9.32,12 8.5,12 L8.5,12 Z M5.5,11 C5.22,11 5,10.78 5,10.5 L5,9.5 C5,9.22 5.22,9 5.5,9 C5.78,9 6,9.22 6,9.5 L6,10.5 C6,10.78 5.78,11 5.5,11 L5.5,11 Z M8.5,9 C8.22,9 8,9.22 8,9.5 L8,10.5 C8,10.78 8.22,11 8.5,11 C8.78,11 9,10.78 9,10.5 L9,9.5 C9,9.22 8.78,9 8.5,9 L8.5,9 Z M11.5,11 C11.22,11 11,10.78 11,10.5 L11,9.5 C11,9.22 11.22,9 11.5,9 C11.78,9 12,9.22 12,9.5 L12,10.5 C12,10.78 11.78,11 11.5,11 L11.5,11 Z M14.5,11 C14.22,11 14,10.78 14,10.5 L14,9.5 C14,9.22 14.22,9 14.5,9 C14.78,9 15,9.22 15,9.5 L15,10.5 C15,10.78 14.78,11 14.5,11 L14.5,11 Z M5.5,15 C5.22,15 5,14.78 5,14.5 L5,13.5 C5,13.22 5.22,13 5.5,13 C5.78,13 6,13.22 6,13.5 L6,14.5 C6,14.78 5.78,15 5.5,15 L5.5,15 Z M8.5,15 C8.22,15 8,14.78 8,14.5 L8,13.5 C8,13.22 8.22,13 8.5,13 C8.78,13 9,13.22 9,13.5 L9,14.5 C9,14.78 8.78,15 8.5,15 L8.5,15 Z M11.5,15 C11.22,15 11,14.78 11,14.5 L11,13.5 C11,13.22 11.22,13 11.5,13 C11.78,13 12,13.22 12,13.5 L12,14.5 C12,14.78 11.78,15 11.5,15 L11.5,15 Z M14.5,15 C14.22,15 14,14.78 14,14.5 L14,13.5 C14,13.22 14.22,13 14.5,13 C14.78,13 15,13.22 15,13.5 L15,14.5 C15,14.78 14.78,15 14.5,15 L14.5,15 Z" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("views/TaskDetail/TaskDetailDateView", [ "application/runtime", "vendor/moment", "wunderbits/helpers/date", "wunderbits/WBBlurHelper", "actions/Factory", "models/TaskModel", "views/TaskDetail/Controllers/TaskDetailDateKeyController", "views/TaskDetail/Controllers/TaskDetailDateClickController", "./TaskDetailDatePickerView", "./TaskDetailRepeatPickerView", "./SectionView", "wunderbits/WBPopoverView", "project!core/WBDeferred", "template!detailview/detailDate", "partial!symbols/date", "partial!symbols/delete" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m) {
var g = e._, f = e.$, b = e.env.isIE(), h = "change:due_date change:recurrence_type change:recurrence_count", v = c.prototype;
return c.extend({
sectionName: "duedate",
template: m,
"implements": [ r, s ],
className: "section detail-date",
attributes: {
tabindex: 0,
role: "button",
"aria-haspopup": !0
},
emits: {
click: "toggle:edit",
"click a.detail-delete": "delete:dueDate",
keydown: "keydown"
},
observes: {
"*children": {
"cancel:changes": "cancelChanges",
"save:changes": "saveChanges"
}
},
initialize: function() {
var e = this;
v.initialize.apply(e, arguments), e.ready = new p(), e.picker = e.addSubview(new l({
behaviorView: d
})), e.taskDueService = a.taskDue();
},
render: function(e) {
var i = this;
return i.model && i.unbindFromTarget(i.model), i.model = e.model, i.datePickerModel = i.picker.datePicker.model, 
e.animationDeferred.done(function() {
i.requestAnimationFrame(function() {
i.model.attributes.due_date ? i.datePickerModel.set("date", i.model.attributes.due_date) : i.datePickerModel.set("date", t().sod().valueOf()), 
v.render.call(i), i.$(".section-edit").prepend(i.picker.render().$el), i.renderDisplayDate(), 
i.renderPopover(), i.bindTo(i.model, h, i.renderDisplayDate), i.ready.resolve();
});
}), i;
},
renderPopover: function() {
var e = this;
e.popover && (e.popover.destroy(), e.resetDatePickerModel()), e.popover = e.addSubview(new u({
context: e,
name: "detail-date",
content: e.picker,
target: e.$el,
ignoredElements: [ e.picker.datePickerInput.$el, e.$("#edit-repeat"), e.$("#edit-repeat option"), e.$("#edit-repeat-frequency"), e.$("#edit-repeat-interval") ],
position: "bottom",
closeOthers: !0,
bindToTarget: !1,
animation: !0,
offset: 0,
margin: -1,
onShow: e.onPopoverShow,
onClose: function() {
e.defer(function() {
e.popoverOpen = !1;
});
},
onBlur: function() {
e.preventInputBlur || (e.saveChanges(), e.hideEditMode());
}
}));
},
renderDisplayDate: function() {
var n, a, o, r, s = this, l = i.convertServerDateToLocalDate(s.model.attributes.due_date), d = s.model.attributes.recurrence_type, c = s.model.attributes.recurrence_count, u = s.$(".section-title"), p = s.$(".section-description"), m = l && i.humanizeDueDate(l, null, !0);
if (l) {
var f = t(l), b = t().sod();
if (s.$el.addClass("date"), i.isHumanizeable(l) && -1 !== m.indexOf("label_relative_date_")) n = e.language.getLabel("label_due_$", "$" + m), 
a = e.language.getText("label_due_$", "$" + m); else {
var h = "ddd, MMM D";
b.year() !== f.year() && (h += ", YYYY");
var v = f.format(h);
n = e.language.getLabel("label_due_on", v), a = e.language.getText("label_due_on", v);
}
u.html(n.toString());
var _ = f.diff(b, "days") < 0;
s.$el.toggleClass("overdue", _), d && c && "none" !== d.toLowerCase() && "s" !== g.last(d) ? (1 === c ? (r = e.language.getLabel("label_repeat_" + d).toString(), 
o = e.language.getText("label_repeat_" + d)) : c > 1 && (r = e.language.getLabel("label_repeat_" + d + "_$_plural", c).toString(), 
o = e.language.getText("label_repeat_" + d + "_$_plural", c)), r && (p.html(r), 
u.addClass("repeat"), p.addClass("repeat"))) : (u.removeClass("repeat"), p.empty().removeClass("repeat"));
} else s.$el.removeClass("date"), r = e.language.getLabel("placeholder_set_due_date").toString(), 
u.html(r).removeClass("repeat"), p.empty().removeClass("repeat");
s.$el.attr("aria-label", a ? a + o : e.language.getText("placeholder_set_due_date")), 
s.renderLocalized(), s.repeatEditorOpen = !1;
},
onPopoverShow: function() {
var i = this;
i.popoverOpen = !0, i.isEditing || (i.resetDatePickerModel(), !i.model.attributes.due_date && i.datePickerModel.set("date", t().sod()), 
i.picker.behaviorView.renderEditorDate(), i.isEditing = !0, i.bindTo(e, "popover:close", i.closeAndHideEditMode)), 
i.picker.datePicker.onChangeDate(), i.repeatEditorOpen = !0, i.picker && i.picker.datePicker.monthsRenderedDeferred.resolve();
},
resetDatePickerModel: function() {
var e = this, n = i.convertServerDateToLocalDate(e.model.attributes.due_date), a = e.model.attributes.recurrence_type, o = e.model.attributes.recurrence_count;
n && (n = t(n).valueOf(), "none" === a && (a = null), a && "s" !== g.last(a) && (a = String(a).toLowerCase() + "s"), 
o && (o = Number(o))), e.picker.datePicker.setDate(n), n && a && o ? e.datePickerModel.set({
interval: a,
frequency: o
}, {
silent: !0
}) : e.datePickerModel.set({
interval: null,
frequency: null
});
},
closePopover: function() {
var e = this;
e.popover.trigger("popover:close", {
fadeOut: !0
});
},
closeAndHideEditMode: function() {
var e = this;
e.closePopover(), e.hideEditMode(), e.isEditing = !1, e.resetDatePickerModel(), 
b && n.run();
},
showEditMode: function() {
var e = this, t = e.$(".section-edit");
t.removeClass("hidden"), e.$el.addClass("editing"), g.defer(function() {
e.picker.datePickerInput.$el.focus();
});
},
hideEditMode: function() {
var e = this, t = e.$(".section-edit");
e.isEditVisible() && (t.siblings().removeClass("hidden"), t.addClass("hidden"), 
e.model.attributes.due_date || e.$el.removeClass("date"), e.$el.removeClass("editing"), 
e.trySetFocusRoute());
},
isEditVisible: function() {
var e = this;
return !(!e.popover || !e.popover.popoverOpened);
},
getDetailOffset: function() {
return f("#detail").css("right");
},
cancelChanges: function(e) {
var t = this;
t.datePickerModel.set({
date: i.convertServerDateToLocalDate(t.model.attributes.due_date)
}), t.defer(function() {
t.trigger("datePicker:input"), t.closeAndHideEditMode();
}), e && e.stopPropagation();
},
saveChanges: function() {
var e = this, t = e.model.id, i = e.datePickerModel.attributes.date, n = e.datePickerModel.attributes.interval, a = e.datePickerModel.attributes.frequency;
e.isEditing = !1, i ? e.taskDueService.setTasksDueAt([ t ], i, a, n) : e.saveDefaults(), 
e.resetDatePickerModel(), e.closePopover(), e.hideEditMode();
},
saveDefaults: function() {
var e = this;
e.taskDueService.removeDueDate([ e.model.id ]);
},
silentRouteToTask: function() {
var t = this, i = e.currentRoute().indexOf("tasks/" + t.model.id + "/duedate/edit") >= 0;
i && e.trigger("route:" + t.model.route(), {
trigger: !1
});
},
triggerFocusChange: function() {
e.trigger("focus:set", "detail");
},
focusSelf: function() {
this.$el.focus();
}
});
}), define("views/TaskDetail/Controllers/TaskDetailReminderViewController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/WBViewController" ], function(e, t, i) {
return i.extend({
"implements": {
"toggle:edit": "onToggleEditMode",
"click:delete": "onDeleteReminder",
focus: "onFocus",
keydown: "keydown"
},
keydown: function(e) {
var i = this, n = i.view;
e.which !== t.enter || n.isEditVisible() || (i.onToggleEditMode(), i.stopEventFully(e));
},
onFocus: function(e) {
"self" === e && this.view.focusSelf();
},
onDeleteReminder: function(t) {
var i = this, n = i.view;
t && t.stopPropagation(), n.reminderModel && (n.reminderModel.set("date", null), 
n.reminderModel.destroy()), n.resetDatePicker(), n.renderDisplayDate(), n.closePopover(), 
n.hideEditMode(), n.toggleDateClass(!1), e.trigger("route:" + n.model.route("/reminder/focus"));
},
onToggleEditMode: function(t) {
var i, n = this, a = n.view;
a.ready.done(function() {
t && t.stopPropagation(), a.popover.isEventOnIgnoredElement(t) || (i = a.isEditVisible(), 
i || (a.showEditMode(), a.popover.trigger("popover:open"), e.trigger("route:" + a.model.route("/reminder/edit"), {
trigger: !1
}), a.triggerFocusChange()));
});
}
});
}), define("views/TaskDetail/Controllers/TaskDetailTimePickerController", [ "application/runtime", "vendor/moment", "wunderbits/helpers/date", "wunderbits/data/keycodes", "wunderbits/helpers/strings", "wunderbits/WBViewController" ], function(e, t, i, n, a, o) {
var r = e._;
return o.extend({
"implements": {
"click:save": "onSaveReminder",
"keydown:datepickerInput": "onEditDateKeyDown",
"keydown:hours": "onEditHourKeyDown",
"keydown:minutes": "onEditMinuteKeyDown",
"mousedown:datepicker": "onDatePickerInputMousedown",
"focus:time": "onTimeFocus",
"blur:time": "onTimeBlur",
"keydown:saveButton": "onSaveButtonKeydown",
"keydown:deleteButton": "onDeleteOrSaveKeydown"
},
onSaveButtonKeydown: function(e) {
var t = this, i = this.view;
e.shiftKey || e.which !== n.tab || (i.focusDateInput(), t.stopEventFully(e)), t.onDeleteOrSaveKeydown(e);
},
onDeleteOrSaveKeydown: function(e) {
var t = this;
e.which === n.esc && (t.view.onCancelChanges(e), t.stopEventFully(e));
},
onSaveReminder: function(e) {
var t = this, i = t.view;
i.saveChanges(), i.cancelChanges(), e && e.stopPropagation();
},
onEditDateKeyDown: function(e) {
var t = this, i = t.view;
e.shiftKey && e.keyCode == n.tab && (i.shiftKeyDown = !0), e.which === n.enter ? t.onSaveReminder(e) : e.which === n.esc ? i.cancelChanges() : e.which === n.tab && t.onDatePickerInputMousedown();
},
onEditHourKeyDown: function(t) {
var i = this, o = i.view, r = o.getHour(), s = t.which, l = "12 hour" === e.settings.attributes.time_format;
if (s === n.up) r = (l ? 12 : 23) > r ? r + 1 : l ? 1 : 0, o.renderHour(a.pad(r, 2)); else if (s === n.down) r = r > (l ? 1 : 0) ? r - 1 : l ? 12 : 23, 
o.renderHour(a.pad(r, 2)); else if (s === n.enter || s === n.esc) i.onEditDateKeyDown(t); else if (s === n.tab) i.onDatePickerInputMousedown(); else if (!(n.zero <= s && s <= n.nine || n.padZero <= s && s <= n.padNine)) return !1;
},
onEditMinuteKeyDown: function(e) {
var t = this, i = t.view, o = i.getMinute(), r = e.which;
if (r === n.up) o = 59 > o ? o + 1 : 0, i.renderMinute(a.pad(o, 2)); else if (r === n.down) o = o > 0 ? o - 1 : 59, 
i.renderMinute(a.pad(o, 2)); else if (r === n.enter || r === n.esc) t.onEditDateKeyDown(e); else if (r === n.left || e.which === n.right || r === n.backspace || r === n.del) ; else if (r === n.tab) t.onDatePickerInputMousedown(); else if (!(n.zero <= r && r <= n.nine || n.padZero <= r && r <= n.padNine)) return !1;
},
onDatePickerInputMousedown: function() {
var e = this.view;
e.preventInputBlur = !0, r.delay(function() {
e.preventInputBlur = !1;
}, 250);
},
onDatePickerInputBlur: function() {
var e = this, t = e.view;
return t.shiftKeyDown ? (t.saveChanges(), t.hideEditMode(), void (t.shiftKeyDown = !1)) : (t.popoverOpen || t.preventInputBlur || (t.saveChanges(), 
t.hideEditMode()), void (t.preventInputBlur = !1));
},
onTimeFocus: function() {
this.view.toggleTimeFocusClass(!0);
},
onTimeBlur: function() {
this.view.toggleTimeFocusClass(!1);
}
});
}), define("/templates/detailview/timePicker.js", {
name: "detailview/timePicker",
data: {
"1": function() {
return ' <input id="edit-reminder-time-minute" class="chromeless smaller" type="text" value="00" data-key-aria-label="label_time_minute"/>: <input id="edit-reminder-time-hour" class="chromeless smaller" type="text" value="12" data-key-aria-label="label_time_hour"/> ';
},
"3": function() {
return ' <input id="edit-reminder-time-hour" class="chromeless smaller" type="text" value="12" data-key-aria-label="label_time_hour"/>: <input id="edit-reminder-time-minute" class="chromeless smaller" type="text" value="00" data-key-aria-label="label_time_minute"/> ';
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = '<span class="input-fake" id="edit-reminder-time-container"> <label for="edit-reminder-time" value="Time"/> ';
return a = t["if"].call(e, e && e.rtl, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.program(3, n),
data: n
}), (a || 0 === a) && (o += a), o + ' <select id="edit-reminder-time-ampm" class="chromeless tiny" data-key-aria-label="aria_period_label"> <option value="am" data-key-text="label_time_am" selected></option> <option value="pm" data-key-text="label_time_pm"></option> </select> </span>';
},
useData: !0
}
}), define("views/TaskDetail/TaskDetailTimePickerView", [ "application/runtime", "wunderbits/WBViewPresenter", "vendor/moment", "wunderbits/helpers/date", "wunderbits/helpers/strings", "./Controllers/TaskDetailTimePickerController", "template!detailview/timePicker" ], function(e, t, i, n, a, o, r) {
var s = t.prototype, l = e.$;
return t.extend({
template: r,
"implements": [ o ],
className: "time",
emits: {
"keydown .datepicker-input": "keydown:datepickerInput",
"keydown #edit-reminder-time-hour": "keydown:hours",
"keydown #edit-reminder-time-minute": "keydown:minutes",
"mousedown #edit-reminder-time-container, #edit-reminder-time-ampm, #edit-reminder-time-ampm options": "mousedown:datepicker",
"blur #edit-reminder-time-hour, #edit-reminder-time-minute, #edit-reminder-time-ampm": "blur:datepicker",
"focus #edit-reminder-time-hour, #edit-reminder-time-minute": "focus:time",
"blur #edit-reminder-time-hour, #edit-reminder-time-minute": "blur:time",
"keydown a.detail-save": "keydown:saveButton",
"keydown a.detail-delete": "keydown:deleteButton"
},
initialize: function(t) {
var i = this;
i.options = t || {}, i.model = i.options.model, s.initialize.apply(i, arguments), 
i.bindTo(e.language, "change:dir", function() {
i.model.set("rtl", "rtl" === e.language.attributes.dir);
});
},
render: function() {
var e = this;
return s.render.call(e, e.model.attributes), e.renderEditorDate(), e;
},
toggleTimeFocusClass: function(e) {
var t = this;
t.$("#edit-reminder-time-container").toggleClass("focus", e);
},
getHour: function() {
return parseInt(this.$("#edit-reminder-time-hour").val(), 10);
},
renderHour: function(e) {
this.$("#edit-reminder-time-hour").val(e);
},
getMinute: function() {
return parseInt(this.$("#edit-reminder-time-minute").val(), 10);
},
renderMinute: function(e) {
this.$("#edit-reminder-time-minute").val(e);
},
getAMPM: function() {
return this.$("#edit-reminder-time-ampm").val();
},
renderEditorDate: function() {
var t, a = this, o = a.model.attributes.date, r = a.taskModel.attributes.due_date, s = a.reminderModel && a.reminderModel.attributes.date, l = a.reminderModel ? i(n.convertServerTimeToLocalTime(s)).format("HH:mm") : null, d = i().sod(), c = r && i(r).diff(d, "days") > 0;
a.$el.toggleClass("date", !o), !a.reminderModel && r && c ? (t = i(r).subtract("d", e.settings.attributes.auto_reminder_noticeperiod).valueOf(), 
a.model.attributes.date || a.model.set("date", t), l || (l = i().sod().add("m", e.settings.attributes.auto_reminder_timeinterval).format("HH:mm"))) : a.reminderModel || (t = i().sod().valueOf(), 
a.model.attributes.date || a.model.set("date", t), l || (l = i().add("h", 1).subtract("minutes", i().format("mm")).format("HH:mm"))), 
l && a.renderTime(l);
},
renderTime: function(t) {
var i, n, o, r = this, s = "12 hour" === e.settings.attributes.time_format, d = r.$("#edit-reminder-time-ampm"), c = t.split(":"), u = Number(c[0]);
s ? (i = u > 12 ? u - 12 : c[0], i = 0 === u ? 12 : i, o = u >= 12 ? "pm" : "am", 
d.removeClass("hidden"), d.find("option").each(function(e, t) {
t = l(t), t.prop("selected", t.val() === o);
})) : (d.addClass("hidden"), i = u), n = c[1], r.$("#edit-reminder-time-hour").val(a.pad(i, 2)), 
r.$("#edit-reminder-time-minute").val(a.pad(n, 2));
},
saveChanges: function() {
this.trigger("save:changes");
},
cancelChanges: function() {
this.trigger("cancel:changes");
}
});
}), define("/templates/detailview/detailReminder.js", {
name: "detailview/detailReminder",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return r((a = t.symbol || e && e.symbol || o, a.call(e, "reminder", {
name: "symbol",
hash: {},
data: n
}))) + ' <div class="section-title">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "placeholder_remind_me", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="section-description"></div> <div class="section-edit hidden"> </div> <a class="detail-delete" data-key-aria-label="button_delete" tabindex="0"> ' + r((a = t.symbol || e && e.symbol || o, 
a.call(e, "delete", {
name: "symbol",
hash: {},
data: n
}))) + " </a> ";
},
useData: !0
}
}), define("/templates/symbols/reminder.js", {
name: "symbols/reminder",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return ' <svg class="reminder" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>reminder</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="reminder" sketch:type="MSArtboardGroup" > <path d="M3.26,6.6 C3.1,6.24 3,5.88 3,5.5 C3,4.12 4.12,3 5.5,3 C6.04,3 6.54,3.18 6.98,3.5 C7.2,3.66 7.52,3.62 7.68,3.4 C7.86,3.18 7.8,2.86 7.58,2.7 C6.98,2.24 6.24,2 5.5,2 C3.58,2 2,3.58 2,5.5 C2,6.02 2.12,6.54 2.38,7.04 C2.46,7.22 2.64,7.32 2.82,7.32 C2.9,7.32 2.98,7.3 3.04,7.28 C3.3,7.14 3.4,6.84 3.26,6.6 L3.26,6.6 Z M14.5,2 C13.76,2 13.04,2.24 12.42,2.7 C12.2,2.86 12.16,3.18 12.32,3.4 C12.48,3.62 12.8,3.66 13.02,3.5 C13.46,3.18 13.98,3 14.5,3 C15.88,3 17,4.12 17,5.5 C17,5.88 16.92,6.24 16.74,6.6 C16.62,6.84 16.72,7.14 16.96,7.28 C17.04,7.3 17.1,7.32 17.18,7.32 C17.36,7.32 17.54,7.22 17.64,7.04 C17.88,6.54 18,6.02 18,5.5 C18,3.58 16.44,2 14.5,2 L14.5,2 Z M17,11 C17,7.14 13.86,4 10,4 C6.14,4 3,7.14 3,11 C3,13 3.84,14.82 5.2,16.1 L4.14,17.14 C3.96,17.34 3.96,17.66 4.14,17.86 C4.24,17.96 4.38,18 4.5,18 C4.62,18 4.76,17.96 4.86,17.86 L5.98,16.72 C7.12,17.52 8.5,18 10,18 C11.5,18 12.88,17.52 14.02,16.72 L15.14,17.86 C15.24,17.96 15.38,18 15.5,18 C15.62,18 15.76,17.96 15.86,17.86 C16.04,17.66 16.04,17.34 15.86,17.14 L14.8,16.1 C16.16,14.82 17,13 17,11 L17,11 Z M4,11 C4,7.7 6.7,5 10,5 C13.3,5 16,7.7 16,11 C16,14.3 13.3,17 10,17 C6.7,17 4,14.3 4,11 L4,11 Z M10.5,7 C10.22,7 10,7.22 10,7.5 L10,11 L7.46,11 C7.2,11 6.96,11.22 6.96,11.5 C6.96,11.78 7.2,12 7.46,12 L10.5,12 C10.78,12 11,11.78 11,11.5 L11,7.5 C11,7.22 10.78,7 10.5,7 L10.5,7 Z" id="…" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("views/TaskDetail/TaskDetailReminderView", [ "application/runtime", "vendor/moment", "wunderbits/helpers/date", "wunderbits/helpers/strings", "wunderbits/WBBlurHelper", "actions/Factory", "views/TaskDetail/Controllers/TaskDetailReminderViewController", "./SectionView", "./TaskDetailDatePickerView", "./TaskDetailTimePickerView", "wunderbits/WBPopoverView", "project!core/WBDeferred", "template!detailview/detailReminder", "partial!symbols/reminder", "partial!symbols/delete" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p) {
var m = e.$, g = e.env.isIE(), f = s.prototype;
return s.extend({
sectionName: "reminder",
template: p,
className: "section detail-reminder",
attributes: {
tabindex: 0,
role: "button",
"aria-haspopup": !0
},
"implements": [ r ],
emits: {
click: "toggle:edit",
"click a.detail-delete": "click:delete",
keydown: "keydown"
},
observes: {
"*children": {
"cancel:changes": "onCancelChanges",
"save:changes": "saveChanges"
},
settings: {
"change:time_format": "renderDisplayDate"
},
language: {
change: "renderDisplayDate"
},
datePickerModel: {
"change:date": "onDatePickerChangeDate"
}
},
initialize: function() {
var t = this;
t.ready = new u(), t.taskReminder = o.taskReminder(), t.reminderLookup = o.reminderLookup(), 
t.picker = t.addSubview(new l({
behaviorView: d,
repeat: !0
})), t.datePickerModel = t.picker.datePicker.model, t.settings = e.settings, t.language = e.language, 
f.initialize.apply(t, arguments);
},
render: function(e) {
var t = this;
return t.model = e.model, t.picker.behaviorView.taskModel = t.model, t.reminderModel && t.unbindFromTarget(t.reminderModel), 
t.reminders = t.reminderLookup.getReminderCollectionForTask(t.model.id), t.reminderModel = t.reminders.models.length ? t.reminders.models[0] : null, 
t.picker.behaviorView.reminderModel = t.reminderModel, t.bindToReminders(), t.reminderModel && t.bindTo(t.reminderModel, "change:date", t.renderDisplayDate), 
e.animationDeferred.done(function() {
t.requestAnimationFrame(function() {
f.render.call(t, t.model.toJSON()), t.$(".section-edit").prepend(t.picker.render().$el), 
t.renderPopover(), t.renderDisplayDate(), t.ready.resolve();
});
}), t;
},
renderPopover: function() {
var e = this;
e.popover && !e.popover.destroyed && (e.popover.destroy(), e.resetDatePicker()), 
e.popover = e.addSubview(new c({
context: e,
content: e.picker,
target: e.$el,
ignoredElements: [ e.$(".datepicker-input"), e.$("#edit-reminder-time"), e.$("#edit-reminder-method"), e.$("#edit-reminder-time-hour"), e.$("#edit-reminder-time-minute"), e.$("#edit-reminder-time-ampm") ],
position: "bottom",
closeOthers: !0,
bindToTarget: !1,
offset: 0,
margin: -1,
onShow: e.onPopoverShow,
onClose: function() {
e.defer(function() {
e.popoverOpen = !1;
});
},
onBlur: function() {
e.isEditVisible() && (e.trigger("save"), e.hideEditMode());
}
}));
},
renderDisplayDate: function() {
var n, a, o, r, s, l, d, c, u = this, p = u.reminderModel ? u.reminderModel.attributes.date : null, g = p ? t(i.convertServerTimeToLocalTime(p)).valueOf() : null, f = p ? t(g).format("HH:mm") : null, b = u.$(".section-description"), h = u.$(".section-title"), v = g && i.humanizeDueDate(g), _ = "12 hour" === e.settings.attributes.time_format;
if (p) {
var w = t();
if (u.$el.addClass("date"), i.isHumanizeable(new Date(g))) n = v; else {
var k = t(g), x = "ddd, MMM D";
w.year() !== k.year() && (x += ", YYYY"), n = k.format(x);
}
b.html(n.toString()).addClass("repeat");
var y = t(i.convertServerTimeToLocalTime(u.reminderModel.attributes.date)), C = y.diff(w), T = 0 > C;
u.$el.toggleClass("overdue", T), l = f.split(":"), _ ? (o = Number(l[0]) > 12 ? l[0] - 12 : l[0], 
o = 0 === Number(l[0]) ? 12 : o, s = Number(l[0]) >= 12 ? "PM" : "AM") : o = l[0], 
r = l[1], a = o + ":" + r, a = _ ? a + " " + s : a, d = e.language.getLabel("label_remind_me_at_$", a).toString(), 
c = e.language.getText("label_remind_me_at_$", a), h.html(d).addClass("repeat");
} else u.$el.removeClass("date"), d = e.language.getLabel("placeholder_remind_me").toString(), 
h.html(d).removeClass("repeat"), b.html("").removeClass("repeat");
n = n ? n.toString() : "", /<text/.test(n) && (n = e.language.getText(m(n).attr("rel")));
var S = p ? c + ", " + n : e.language.getText("placeholder_remind_me");
u.$el.attr("aria-label", S), u.renderLocalized();
},
bindToReminders: function() {
var e = this;
e.bindTo(e.reminders, "add remove", function() {
e.reminderModel && e.unbindFromTarget(e.reminderModel), e.reminderModel = e.reminders && e.reminders.models.length ? e.reminders.models[0] : null, 
e.reminderModel && e.bindTo(e.reminderModel, "change:date", e.renderDisplayDate), 
e.picker.behaviorView.reminderModel = e.reminderModel, e.renderDisplayDate();
});
},
onDatePickerChangeDate: function() {
var e = this;
e.$el.toggleClass("date", !!e.datePickerModel.attributes.date);
},
resetDatePicker: function() {
var a = this, o = "12 hour" === e.settings.attributes.time_format, r = a.reminderModel ? a.reminderModel.attributes.date : null;
r = r ? t(i.convertServerTimeToLocalTime(r)).valueOf() : null;
var s, l, d, c, u = a.$("#edit-reminder-time-hour"), p = a.$("#edit-reminder-time-minute"), g = a.reminderModel ? t(i.convertServerTimeToLocalTime(a.reminderModel.attributes.date)).format("HH:mm") : null;
r ? (a.datePickerModel.set({
date: r,
interval: null,
frequency: null
}), s = g.split(":"), o ? (l = Number(s[0]) > 12 ? s[0] - 12 : s[0], 0 === Number(s[0]) && (l = 12)) : l = s[0], 
d = s[1], c = Number(s[0]) >= 12 ? "pm" : "am", u.val(n.pad(l, 2)), p.val(n.pad(d, 2)), 
a.$("#edit-reminder-time-ampm option").each(function(e, t) {
t = m(t), t.prop("selected", t.val() === c);
})) : (a.datePickerModel.set({
date: null,
interval: null,
frequency: null
}), a.$el.removeClass("date"), u.val(""), p.val(""));
},
onPopoverShow: function() {
var n = this, a = n.reminderModel ? n.reminderModel.attributes.date : null, o = n.model.attributes.due_date;
n.popoverOpen = !0, n.isEditVisible() || (a = a ? t(i.convertServerTimeToLocalTime(a)).valueOf() : o ? o : Date.now(), 
n.datePickerModel.parse(a), n.isEditing = !0, n.bindTo(e, "popover:close", n.closeAndHideEditMode)), 
n.picker.datePicker.onChangeDate(), n.picker && n.picker.datePicker.monthsRenderedDeferred.resolve();
},
closeAndHideEditMode: function() {
var e = this;
e.closePopover(), e.hideEditMode(), e.isEditing = !1, e.resetDatePicker(), g && a.run();
},
closePopover: function() {
var e = this;
e.popover.trigger("popover:close", {
fadeOut: !0
}), e.isEditVisible() && e.$(".section-edit .datepicker-input").focus();
},
showEditMode: function() {
var e = this, t = e.$el.find(".section-edit");
t.removeClass("hidden"), e.$el.addClass("editing"), e.defer(function() {
e.picker.datePickerInput.$el.focus();
});
},
hideEditMode: function() {
var e = this, t = e.$el.find(".section-edit");
e.isEditVisible() && (t.siblings().removeClass("hidden"), t.addClass("hidden"), 
e.$el.removeClass("editing"), e.reminderModel || e.$el.removeClass("date"), e.trySetFocusRoute());
},
saveChanges: function() {
var t = this, i = t.datePickerModel.attributes.date, n = t.picker.behaviorView.getHour(), a = t.picker.behaviorView.getMinute(), o = t.picker.behaviorView.getAMPM(), r = "12 hour" === e.settings.attributes.time_format;
t.isEditing = !1, t.taskReminder.upsertTaskReminder(t.model.id, i, n, a, o, r), 
t.hideEditMode(), t.resetDatePicker(), t.closePopover();
},
onCancelChanges: function(t) {
var i = this, n = i.reminderModel && i.reminderModel.attributes.date;
i.datePickerModel.set({
date: n || null
}), i.defer(function() {
i.trigger("mousedown:datepicker"), i.hideEditMode(), i.closePopover(), i.isEditing = !1, 
(!i.reminderModel || i.reminderModel && !i.reminderModel.attributes.date) && i.$el.removeClass("date repeat"), 
i.resetDatePicker(), g && a.run(), e.trigger("route:" + i.model.route("/reminder/focus"));
}), t && t.stopPropagation();
},
toggleDateClass: function(e) {
this.$el.toggleClass("date", e);
},
isEditVisible: function() {
return this.$el.hasClass("editing");
},
silentRouteToTask: function() {
var t = this, i = e.currentRoute().indexOf(t.model.route("/reminder/edit")) >= 0;
i && e.trigger("route:" + t.model.route(), {
trigger: !1
});
},
triggerFocusChange: function() {
e.trigger("focus:set", "detail");
},
focusSelf: function() {
this.$el.focus();
},
focusDateInput: function() {
this.$("input.datepicker-input").focus();
}
});
}), define("/templates/WBExpandableTextarea.js", {
name: "WBExpandableTextarea",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression;
return '<pre><span></span><br/></pre> <textarea tabindex="0" class="' + r((a = t.className || e && e.className, 
typeof a === o ? a.call(e, {
name: "className",
hash: {},
data: n
}) : a)) + '">' + r((a = t.content || e && e.content, typeof a === o ? a.call(e, {
name: "content",
hash: {},
data: n
}) : a)) + "</textarea>  ";
},
useData: !0
}
}), define("/styles/WBExpandableTextarea.js", {
name: "WBExpandableTextarea",
data: '.expandingArea{position:relative;}.expandingArea pre{margin:0;padding:0 !important;border:0 !important;display:block;visibility:hidden}.expandingArea textarea{overflow:hidden;position:absolute;top:0;left:0;width:100%;height:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;resize:none;margin:0;border:0;padding:0}.firefox .expandingArea textarea{left:-1px;font-weight:normal}.explorer .body .expandingArea textarea{top:-1px}.expandingArea textarea,.expandingArea pre{font-family:"Lato","Geneva CY","Lucida Grande","Arial Unicode MS","Helvetica Neue","Helvetica","Arial",sans-serif;padding:0;background:transparent;border:none;white-space:pre-wrap;word-wrap:break-word;text-shadow:none !important}html:lang(ja_JP) .expandingArea textarea,html:lang(ja_JP) .expandingArea pre{font-family:"Lato","Meiryo UI","Meiryo","メイリオ","ＭＳ Ｐゴシック","MS PGothic","Hiragino Kaku Gothic Pro","Microsoft Yahei","微软雅黑","STXihei","Arial Unicode MS","Helvetica Neue","Helvetica","Arial",sans-serif}html:lang(zh_CN) .expandingArea textarea,html:lang(zh_CN) .expandingArea pre{font-family:"Lato","Microsoft Yahei","微软雅黑","STXihei","Meiryo UI","Meiryo","メイリオ","ＭＳ Ｐゴシック","MS PGothic","Hiragino Kaku Gothic Pro","Arial Unicode MS","Helvetica Neue","Helvetica","Arial",sans-serif}html:lang(zh_TW) .expandingArea textarea,html:lang(zh_TW) .expandingArea pre{font-family:"Lato","Microsoft Yahei","微软雅黑","STXihei","Meiryo UI","Meiryo","メイリオ","ＭＳ Ｐゴシック","MS PGothic","Hiragino Kaku Gothic Pro","Arial Unicode MS","Helvetica Neue","Helvetica","Arial",sans-serif}'
}), define("wunderbits/WBExpandableTextareaView", [ "./lib/dependencies", "./WBView", "./WBModel", "./helpers/selection", "template!WBExpandableTextarea", "style!WBExpandableTextarea" ], function(e, t, i, n, a, o) {
var r = e._, s = e.w_, l = t.prototype;
return t.extend({
template: a,
styles: [ o ],
className: "expandingArea active",
events: {
click: "_onClick",
"input textarea": "_onInput",
"keydown textarea": "_onKeyDown"
},
initialize: function(e) {
var t = this;
l.initialize.apply(t, arguments), t.model = new i(), t._options = e || {};
},
render: function(e) {
var t = this, i = t.model.toJSON();
t._options = s.merge(t._options, e || {}), t._options.lineHeight = parseInt(t._options.lineHeight, 10) || 26, 
t._options.fontSize = parseInt(t._options.fontSize, 10) || 13, r.each(e, function(e, t) {
i[t] = e;
}), l.render.call(t, i), t.$("textarea, pre").css({
"line-height": t._options.lineHeight + "px",
"font-size": t._options.fontSize + "px"
});
var n = t.$("textarea");
return t._options.placeholderKey && (n.attr("data-key-placeholder", t._options.placeholderKey), 
n.attr("data-key-aria-label", t._options.placeholderKey)), t.$("span").text(t.$("textarea").val()), 
t.renderLocalized(), t;
},
setEnabled: function(e) {
var t = this;
t.setContent(""), t.$el.attr("disabled", !e).toggleClass("disabled", !e);
},
setContent: function(e) {
var t = this;
t.$("span").text(e), t.$("textarea").val(e), t._onInput();
},
onDestroy: function() {},
_onClick: function(e) {
e.stopPropagation();
},
_onKeyDown: function(e) {
var t = this, i = t._options || {}, n = t.$("textarea"), a = n.val(), o = [ 13, 27, 8, 38, 40, 37, 39 ], s = [ 46 ];
i.maxLength && (r.include(s, e.which) || !e.metaKey && !r.include(o, e.which) && a.length >= i.maxLength && e.preventDefault());
},
_onInput: function() {
var e, t = this, i = t.$("pre"), a = t.$("textarea"), o = a.val();
if (t._options && t._options.maxLength && o.length >= t._options.maxLength && (o = o.substr(0, t._options.maxLength)), 
a.val() !== o) {
var s = a[0].selectionStart;
a.val(o), n.setCaretToPos(a[0], s);
}
e = t._options && "function" == typeof t._options.spanProcessor ? t._options.spanProcessor(r.escape(o)) : r.escape(o), 
i.html(e + "\n");
}
});
}), define("/styles/WBContentFakable.js", {
name: "WBContentFakable",
data: ".content-fakable .display-view{overflow:hidden;white-space:pre-wrap;}.content-fakable .display-view span{white-space:pre-wrap}.content-fakable textarea,.content-fakable pre{-moz-tab-size:1;-o-tab-size:1;-webkit-tab-size:1;-moz-tab-size:1;-o-tab-size:1;tab-size:1}.firefox .content-fakable .display-view{margin-left:-1px}"
}), define("wunderbits/WBContentFakable", [ "./WBRuntime", "./helpers/selection", "./WBView", "./WBModel", "./WBExpandableTextareaView", "./mixins/LinkingViewMixin", "./mixins/EmailLinkingViewMixin", "./mixins/UnicodeEmojiViewMixin", "./helpers/strings", "project!core/WBDeferred", "style!WBContentFakable" ], function(e, t, i, n, a, o, r, s, l, d, c) {
var u = e.$, p = e._, m = i.prototype, g = i.extend({
className: "content-fakable",
styles: [ c ],
events: function() {
var t = {
"mouseup .display-view span": "_onClickWord",
"mousedown .display-view span": "setNewFocus",
"keydown .edit-view textarea": "_onEditKeydown",
"keyup .edit-view textarea": "_debouncedOnEditKeyup",
"blur .edit-view textarea": "_onEditBlur"
};
if (e.env.isTouchDevice()) {
var i = {
"ontouchstart .display-view span": "_onClickWord",
"mousedown .display-view span": "_override",
"mouseup .display-view span": "_override"
};
p.extend({}, t, i);
}
return t;
},
_override: function() {},
initialize: function() {
var e = this;
e.rendered = new d(), m.initialize.apply(e, arguments), e.model = new n(), e.bindTo(e.model, "change:content", e._onUpdateContent), 
e.textareaView = e.addSubview(new a(e.options)), e._debouncedOnEditKeyup = p.debounce(e._editKeyUpHandler, 1e3), 
e._debouncedRenderDisplay = p.debounce(e.renderDisplayView, 1e4);
},
render: function(e) {
var t, i, n = this;
return n.$el && n.$el.children().remove(), m.render.apply(n, arguments), n._options = e || {}, 
n._options.context = e.context || n, n._options.markupDelay = n._options.markupDelay || 0, 
n._isVisible = n._options.scrollContainer ? !1 : !0, n.model.set({
content: n._options.content,
maxLength: n._options.maxLength
}, {
silent: !0
}), t = n.model.attributes.content, i = t && e.showLoading ? "Loading ..." : p.escape(n.model.attributes.content), 
n.$el.empty().append('<div class="display-view"/><div class="edit-view hidden"/>'), 
n.$(".display-view").empty().append(i), n.$(".edit-view").empty()[0].appendChild(n.textareaView.render({
content: t,
maxLength: n.model.attributes.maxLength,
spanProccessor: n._markupForDisplay
}).el), p.defer(function() {
n.destroyed || (n._options.scrollContainer ? n.scrollCheck() : n.renderDisplayView());
}), n._isEditing = !1, n.rendered.resolve(), n;
},
renderDisplayView: function() {
var e = this;
if (!e.destroyed) {
var t = e.$(".display-view"), i = u("<span/>"), n = e.model.attributes.content || "";
i.text(n), e.wrapTextNodesInSpan(i), t.html(i.html()), e._isVisible = !0, i.remove(), 
i = null;
var a = e.$(".display-view span");
e._options.convertLinks && (e.renderEmails(a), e.renderLinks(a)), e.renderEmoji(a);
}
},
onDestroy: function() {
var e = this;
e.destroySubviews();
},
wrapTextNodesInSpan: function(e) {
var t = e.contents().filter(function() {
return 3 === this.nodeType;
}), i = u.each(t, function() {
u(this).wrap("<span>");
});
return i;
},
onRemove: function() {
var e = this;
e.model.off("change:content", e._onUpdateContent), e._options.scrollContainer && u(e._options.scrollContainer).off("scroll");
},
onShowEditMode: function() {
var e = this, t = e._options || {};
if (!t.disableEdit) {
var i = e.$(".edit-view"), n = e.$(".display-view");
"function" == typeof t.breaker && t.breaker.call(t.context) || (e._isEditing = !0, 
n.addClass("hidden"), i.removeClass("hidden").find("textarea").focus(), "function" == typeof t.onShowEdit && t.onShowEdit.call(t.context));
}
},
_onHideEditMode: function() {
var e = this, t = e._options || {}, i = e.$(".edit-view"), n = e.$(".display-view");
e._isEditing = !1, n.removeClass("hidden"), i.addClass("hidden"), "function" == typeof t.onShowDisplay && t.onShowDisplay.call(t.context);
},
_onEditKeydown: function(e) {
var t = this, i = t._options;
if (i.saveOnEnter && 13 === e.which) {
if (i.multiLine && e.shiftKey) return;
e.preventDefault(), t._onHideEditMode(), t._onSaveChanges();
} else 27 === e.which && t._onCancelChanges();
},
setNewFocus: function(e) {
var t = this;
t.trigger("focusElement"), t.selectionCollapsed || e.stopPropagation();
},
_onClickWord: function(e) {
var t = this, i = t._options, n = u(e.target).closest("span");
if (!("function" == typeof i.breaker && i.breaker.call(i.context) || i.disableEdit)) {
var a = n.prevAll().text().length;
t.editCursorPosition = (t._getSelectionOffset(n[0]) || 0) + a, t.delay(t._moveCursorToNewPosition, 50);
}
},
_getSelectionOffset: function(e) {
var t, i = this, n = 0;
if (i.selectionCollapsed = !1, window.getSelection) {
var a = window.getSelection();
if (0 === a.rangeCount) return;
t = a.getRangeAt(0);
var o = t.cloneRange();
o.selectNodeContents(e), a.isCollapsed || "Range" !== a.type || i._isEditing ? "Caret" === a.type && (i.rangeStart = null) : (i.selectionCollapsed = !0, 
i.rangeStart = t.startOffset, i.rangeEnd = t.endOffset, o.setStart(t.startContainer, t.startOffset)), 
o.setEnd(t.endContainer, t.endOffset), n = o.toString().length;
} else if (document.selection && document.selection.type) {
var r = document.selection.createRange(), s = document.body.createTextRange();
s.moveToElementText(e), s.setEndPoint("EndToEnd", r), n = s.text.length;
}
return n;
},
_moveCursorToNewPosition: function() {
var e, i = this, n = i._options || {};
i.selectionCollapse = !1;
var a = i.$(".display-view"), o = i.$(".edit-view");
if (!("function" == typeof n.breaker && n.breaker.call(n.context) || n.disableEdit)) {
i._isEditing = !0, n.scrollContainer && (e = n.scrollContainer.scrollTop()), a.addClass("hidden"), 
o.removeClass("hidden");
var r = o.find("textarea").focus();
i.rangeStart ? t.setSelectionRange(r[0], i.rangeStart, i.rangeEnd) : t.setCaretToPos(r[0], i.editCursorPosition), 
e && n.scrollContainer.scrollTop(e), "function" == typeof n.onShowEdit && n.onShowEdit.call(n.context);
}
},
_onEditBlur: function() {
var e = this;
e._onHideEditMode(), e._onSaveChanges(), e.defer(e.renderDisplayView);
},
scrollCheck: function() {
var e, t, i, n, a, o, r, s, l, d, c = this, p = 100;
c._isVisible || (e = u(c._options.scrollContainer), e.length && (t = c.$el, i = e.position(), 
n = e.height(), a = t.offset(), o = 0, r = a.top, s = !1, l = i.top + n, d = i.top, 
l >= r - p && (s = !0, s !== c._isVisible && s === !0 && c.renderDisplayView())));
},
_onUpdateContent: function() {
var e = this;
e._isEditing || e.updateTextArea(), e.renderDisplayView();
},
isEditing: function() {
return !!this._isEditing;
},
updateTextArea: function() {
var e = this, t = e.$("textarea"), i = e.model.attributes.content;
u.trim(t.val()) !== i && (t.val(i), t.text(i), e.$("pre").text(i + "\n"));
},
_onEditKeyup: function() {},
_editKeyUpHandler: function() {
var e = this;
!e.destroyed && e._options && e._options.autoSave && (e._onSaveChanges(), e._debouncedRenderDisplay());
},
_onCancelChanges: function() {
var e = this;
e.$("textarea").val(e.model.attributes.content), e._onHideEditMode();
},
_onSaveChanges: function() {
var e = this, t = u.trim(e.$("textarea").val());
t = l.emojiTokensToUnicode(t), t !== e.model.attributes.content && e.model.set("content", t);
}
});
return [ o, r, s ].forEach(function(e) {
e.applyToClass(g);
}), g;
}), define("views/TaskDetail/Controllers/TaskDetailNoteFullscreenViewController", [ "application/runtime", "wunderbits/helpers/selection", "wunderbits/data/keycodes", "wunderbits/WBModalViewController" ], function(e, t, i, n, a) {
var o = e.$;
return n.extend({
onDebouncedKeydown: a,
"implements": {
"close:self": "closeSelf",
"focus:changed": "onChangeFocus",
"click:close": "onClose",
"click:content": "onToggleEditMode",
"click:body": "onToggleEditMode",
"keydown:textarea": "onTextareaKeydown",
mousedown: "onMouseDown",
mouseup: "fixScroll"
},
onChangeFocus: function(e) {
var t = this;
t.view.currentFocus = e;
},
closeSelf: function() {
var t = this, i = t.view;
i.isEditing || e.trigger("route:" + i.taskModel.route());
},
onClose: function() {
var t = this, i = t.view, n = i.isEditing ? "/note/edit" : "/note/focus";
i.destroyed || e.trigger("route:" + t.view.taskModel.route(n));
},
onToggleEditMode: function(e) {
var i = this, n = i.view, r = !1;
e && (r = o(e.target).is("span")), r || (n.contentFakable.onShowEditMode(), i.cursor !== a && t.setCaretToPos(n.$el.find("textarea")[0], i.cursor), 
n.changeUrl(!0));
},
onTextareaKeydown: function(e) {
var t = this, n = t.view;
n.checkScrolling();
var a = n.$el.parent().find(".close"), o = a.is(":focus");
e.which !== i.tab || o ? e.which === i.tab && o && (t.stopEventFully(e), n.$(".note-body").click()) : (t.stopEventFully(e), 
a.focus());
},
onMouseDown: function(e) {
var t = this;
t.cursor = t.getCaretFromMouse(e);
},
getCaretFromMouse: function(e) {
var i, n = this, a = n.view, r = o(e.target).is("span"), s = a.$el.find("textarea")[0], l = a.$el.find(".note")[0];
return !r && s && l && (i = t.getCaretFromMousePos(s, l, e)), i;
},
fixScroll: function(e) {
var t = this, i = t.view, n = i.$el.find(".note"), o = n.position().top, r = i.$el.find(".content-inner");
t.cursor === a && ("mousedown" === e.type ? t.scrollTop = o : t.scrollTop && 0 !== t.scrollTop && r.scrollTop(-t.scrollTop));
}
});
}), define("/templates/modals/noteModal.js", {
name: "modals/noteModal",
data: {
"1": function(e, t, i, n) {
var a, o, r = "function", s = ' <div class="head"> <h2 class="title">';
return o = t.title || e && e.title, a = typeof o === r ? o.call(e, {
name: "title",
hash: {},
data: n
}) : o, (a || 0 === a) && (s += a), s += "</h2> ", a = t["if"].call(e, e && e.close, {
name: "if",
hash: {},
fn: this.program(2, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (s += a), s + " </div> ";
},
"2": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return ' <a class="close" tabindex="0" data-key-aria-label="button_done"> ' + r((a = t.symbol || e && e.symbol || o, 
a.call(e, "delete", {
name: "symbol",
hash: {},
data: n
}))) + " </a> ";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = "function", s = this.escapeExpression, l = '<div id="' + s((o = t.id || e && e.id, 
typeof o === r ? o.call(e, {
name: "id",
hash: {},
data: n
}) : o)) + '" class="dialog ' + s((o = t.name || e && e.name, typeof o === r ? o.call(e, {
name: "name",
hash: {},
data: n
}) : o)) + ' shown"> ';
return a = t["if"].call(e, e && e.title, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l + ' <div class="content"> <div class="content-inner"> <div class="note selectable"> <div class="note-body"> </div> </div> </div> </div> </div>';
},
useData: !0
}
}), define("/styles/modals/noteModal.js", {
name: "modals/noteModal",
data: '#fullscreen-note{background:#fbf9e3;width:480px;left:50%;margin-left:-240px;top:30px;bottom:30px;}#fullscreen-note .head h2{text-shadow:0 1px 0 #fff;text-align:center;font-weight:bold;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;color:#b29559;margin:12px 40px;padding:0;font-size:14px;text-shadow:0 1px 0 rgba(255,255,255,0.65)}#fullscreen-note .head .close{position:absolute;right:0;top:0;padding:10px;}#fullscreen-note .head .close:focus{-webkit-box-shadow:0 0 5px rgba(24,106,178,0.3),inset 0 0 0 1px rgba(24,106,178,0.6);box-shadow:0 0 5px rgba(24,106,178,0.3),inset 0 0 0 1px rgba(24,106,178,0.6);z-index:500}#fullscreen-note .head .close svg{fill:#737272}#fullscreen-note .content-inner{position:relative;background:#fbf9e3;padding:0;position:absolute;overflow-x:hidden;overflow-y:auto;top:40px;bottom:10px;left:0;right:0;}#fullscreen-note .content-inner a{color:#186ab2}#fullscreen-note .note{background:#fbf9e3;background-image:-webkit-linear-gradient(top, rgba(0,0,0,0.08) 1px, transparent 1px);background-image:-moz-linear-gradient(top, rgba(0,0,0,0.08) 1px, transparent 1px);background-image:-o-linear-gradient(top, rgba(0,0,0,0.08) 1px, transparent 1px);background-image:-ms-linear-gradient(top, rgba(0,0,0,0.08) 1px, transparent 1px);background-image:linear-gradient(to bottom, rgba(0,0,0,0.08) 1px, transparent 1px);-webkit-background-size:100% 26px;-moz-background-size:100% 26px;background-size:100% 26px;border:none;font-size:13px;line-height:26px;padding:8px 15px;min-height:94%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;}#fullscreen-note .note.selectable div,#fullscreen-note .note.selectable span{-webkit-user-select:text !important;-moz-user-select:text !important;-ms-user-select:text !important;user-select:text !important}#fullscreen-note .note .note-body,#fullscreen-note .note .note-edit{min-height:218px;word-wrap:break-word}#fullscreen-note .note textarea{-webkit-box-shadow:none;box-shadow:none}html[dir="rtl"] #fullscreen-note a.close{left:0;right:initial}body.msie #fullscreen-note .note{background-image:-webkit-linear-gradient(top, rgba(0,0,0,0.08) 2px, transparent 1px);background-image:-moz-linear-gradient(top, rgba(0,0,0,0.08) 2px, transparent 1px);background-image:-o-linear-gradient(top, rgba(0,0,0,0.08) 2px, transparent 1px);background-image:-ms-linear-gradient(top, rgba(0,0,0,0.08) 2px, transparent 1px);background-image:linear-gradient(to bottom, rgba(0,0,0,0.08) 2px, transparent 1px)}'
}), define("views/TaskDetail/TaskDetailNoteFullscreenView", [ "application/runtime", "actions/Factory", "wunderbits/WBContentFakable", "wunderbits/WBModalView", "views/TaskDetail/Controllers/TaskDetailNoteFullscreenViewController", "wunderbits/WBBlurHelper", "project!core/WBDeferred", "template!modals/noteModal", "style!modals/noteModal" ], function(e, t, i, n, a, o, r, s, l, d) {
var c = e._, u = e.$, p = n.prototype, m = o;
return n.extend({
template: s,
styles: [ l ],
"implements": [ a ],
observes: {
runtime: {
"fullscreenNote:close": ">close:self",
"focus:changed": ">focus:changed"
}
},
emits: {
"click .close": "click:close",
"click .content": "click:content",
"click .note-body": "click:body",
blur: "click:close",
keydown: "keydown:textarea",
mousedown: "mousedown",
mouseup: "mouseup"
},
initialize: function(n) {
var a = this;
n || (n = {}), p.initialize.apply(a, arguments), a.ready = new r(), a.contentFakable = a.addSubview(new i()), 
a.noteLookup = t.noteLookup(), a.createNote = t.createNote(), a.bindTo(e, "lists:ready", function(e) {
a.lists = e, a.ready.resolve();
});
},
renderData: {
id: "fullscreen-note",
title: d,
close: "Close"
},
formatData: function(e) {
var t = this, i = t.taskModel && t.taskModel.attributes;
return i && (e.title = c.escape(t.getListTitleFromID(i.list_id) + " - " + i.title)), 
e;
},
render: function(e) {
var t = this;
return t.unbindAll(), t.$el && t.$el.children().remove(), t.taskModel = e.taskModel || {}, 
t.notes = t.noteLookup.getNoteCollectionForTask(t.taskModel.id), t.bindTo(t.notes, "add remove", "onNoteAddRemove"), 
t.noteModel = t.notes.models.length ? t.notes.models[0] : null, t.ready.done(function() {
var e = s(t.formatData(t.renderData));
t.$el.html(e), t.$(".note-body").append(t.contentFakable.render({
context: t,
content: t.noteModel ? t.noteModel.attributes.content : "",
maxLength: 1e9,
autoSave: !0,
convertLinks: !0,
saveOnEnter: !1,
onShowDisplay: t.onDisplay,
onShowEdit: t.onEdit,
scrollContainer: t.$(".content-inner")
}).$el), t.$(".close").removeClass("blue");
}), t.$el.addClass("hidden"), t.bindTo(t.contentFakable.model, "change:content", t.onSaveChanges), 
t.bindTo(t.taskModel, "change:title", t.onChangeTitle), t.delay(function() {
t.checkScrolling(), t.trigger("click:content");
}, 500), t;
},
onNoteAddRemove: function() {
var e = this;
e.noteModel && e.unbindFromTarget(e.noteModel), e.noteModel = e.notes && e.notes.models.length ? e.notes.models[0] : null, 
e.noteModel && e.bindTo(e.noteModel, "change:content", e.onChangeContent), e.onChangeContent();
},
onDestroy: function() {
var e = this, t = e.contentFakable;
!t.destroyed && t.destroy();
},
getDisplayUrl: function() {
return this.taskModel.route("/note/fullscreen");
},
getEditUrl: function() {
return this.taskModel.route("/note/edit/fullscreen");
},
onDisplay: function() {
var e = this;
e.isEditing = !1, e.changeUrl(!1), m.run();
},
changeUrl: function(t) {
var i = this, n = {
trigger: !1
};
(e.currentRoute() === i.getEditUrl() || e.currentRoute() === i.getDisplayUrl()) && (n.replace = !0);
var a = t ? i.getEditUrl() : i.getDisplayUrl();
e.trigger("route:" + a, n);
},
onEdit: function() {
var e = this;
e.isEditing = !0, e.changeUrl(!0);
},
onSaveChanges: function() {
var t = this;
if (-1 !== e.currentRoute().indexOf("/fullscreen")) {
var i = t.noteModel, n = t.contentFakable.model.attributes.content;
i ? i.save("content", n) : t.createNote.createNote(n, t.taskModel.id);
}
},
onChangeContent: function() {
var e = this;
u.trim(e.contentFakable.model.attributes.content) !== u.trim(e.noteModel.attributes.content) && (e.contentFakable.model.set("content", e.noteModel.attributes.content), 
e.checkScrolling());
},
onChangeTitle: function() {
var e = this, t = e.$el.find(".head .title");
t.text(e.getListTitleFromID(e.taskModel.attributes.list_id) + " : " + e.taskModel.attributes.title);
},
getListTitleFromID: function(t) {
var i = this;
return "inbox" === t ? e.language.getText("smart_list_inbox") : i.lists.get(t).attributes.title;
}
});
}), define("views/TaskDetail/Controllers/TaskDetailNoteViewController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/WBViewController" ], function(e, t, i) {
var n = i.prototype;
return i.extend({
"implements": {
mousedown: "onMouseDown",
"toggle:edit": "debouncedOnToggleEditMode",
"show:fullscreen": "debouncedOnShowFullscreen",
"force:fullscreen": "onShowFullscreen",
focus: "onFocusSelf",
"blur:note": "onBlurNote",
keydown: "handleKeys"
},
handleKeys: function(i) {
var n = this, a = n.view, o = i.target === a.el;
if (a.isEditing || i.which !== t.enter) i.which !== t.esc || o || (e.trigger("route:" + a.model.route("/note/focus")), 
n.stopEventFully(i)); else {
var r = e.currentRoute().indexOf("/openFullscreenNote/") >= 0;
r ? n.onShowFullscreen() : n.debouncedOnToggleEditMode(), n.stopEventFully(i);
}
},
onFocusSelf: function() {
this.view.focusSelf();
},
initialize: function() {
var e = this;
e.debouncedOnShowFullscreen = e.debounce(e.onShowFullscreen, 250, !0), n.initialize.apply(e, arguments);
},
onMouseDown: function(e) {
var t = this, i = t.view;
i.cursor = i.getCaretFromMouse(e), i.fixScroll(), i.triggerFocusChange();
},
fixScroll: function() {
this.view.fixScroll.apply(this.view, arguments);
},
debouncedOnToggleEditMode: function() {
var e = this;
e.view.toggleFullscreenButton(!0), e.view.debouncedOnToggleEditMode.apply(this.view, arguments);
},
onBlurNote: function() {
var t = this;
t.view.toggleFullscreenButton(!1), t.defer(function() {
e.trigger("route:" + t.view.model.route("/note/focus"));
});
},
onShowFullscreen: function() {
var t = this.view;
e.trigger("route:" + t.model.route("/note/edit/fullscreen"));
}
});
}), define("/templates/detailview/detailNote.js", {
name: "detailview/detailNote",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<div class="note-body selectable"> <a class="open-fullscreen-note" data-key-aria-label="aria_note_fullscreen" role="button" aria-haspopup="true" tabindex="0"> <span class="wundercon fullscreen"></span> </a> </div> ';
},
useData: !0
}
}), define("/styles/detailview/_note.js", {
name: "detailview/_note",
data: ".note{background:#fbf9e3;background-image:-webkit-linear-gradient(top, rgba(0,0,0,0.08) 1px, transparent 1px);background-image:-moz-linear-gradient(top, rgba(0,0,0,0.08) 1px, transparent 1px);background-image:-o-linear-gradient(top, rgba(0,0,0,0.08) 1px, transparent 1px);background-image:-ms-linear-gradient(top, rgba(0,0,0,0.08) 1px, transparent 1px);background-image:linear-gradient(to bottom, rgba(0,0,0,0.08) 1px, transparent 1px);-webkit-background-size:100% 26px;-moz-background-size:100% 26px;background-size:100% 26px;border:1px solid #dbd9cc;font-size:13px;line-height:26px;padding:8px 15px;-webkit-box-shadow:0 1px 2px rgba(0,0,0,0.06),inset 0 1px 0 #fbf9e3;box-shadow:0 1px 2px rgba(0,0,0,0.06),inset 0 1px 0 #fbf9e3;margin-bottom:10px;-webkit-border-radius:3px;border-radius:3px;}.note .note-body,.note .note-edit{min-height:88px;word-wrap:break-word;}.note .note-body.selectable div,.note .note-edit.selectable div,.note .note-body.selectable span,.note .note-edit.selectable span{-webkit-user-select:text !important;-moz-user-select:text !important;-ms-user-select:text !important;user-select:text !important}.note .open-fullscreen-note{position:absolute;right:14px;margin-top:-5px;padding-left:10px;padding-bottom:10px;z-index:1;color:#b1ac90;}.note .open-fullscreen-note:hover{color:#9c9672}.note textarea{-webkit-box-shadow:none;box-shadow:none}.note a{color:#186ab2}body.msie .note{background-image:-webkit-linear-gradient(top, rgba(0,0,0,0.08) 2px, transparent 1px);background-image:-moz-linear-gradient(top, rgba(0,0,0,0.08) 2px, transparent 1px);background-image:-o-linear-gradient(top, rgba(0,0,0,0.08) 2px, transparent 1px);background-image:-ms-linear-gradient(top, rgba(0,0,0,0.08) 2px, transparent 1px);background-image:linear-gradient(to bottom, rgba(0,0,0,0.08) 2px, transparent 1px)}"
}), define("views/TaskDetail/TaskDetailNoteView", [ "application/runtime", "actions/Factory", "wunderbits/helpers/selection", "views/TaskDetail/TaskDetailNoteFullscreenView", "wunderbits/WBContentFakable", "wunderbits/WBViewPresenter", "views/TaskDetail/Controllers/TaskDetailNoteViewController", "template!detailview/detailNote", "style!detailview/_note" ], function(e, t, i, n, a, o, r, s, l, d) {
var c = e.$, u = o.prototype;
return o.extend({
template: s,
styles: [ l ],
className: "note",
attributes: {
"data-key-aria-label": "placeholder_add_note",
role: "textbox",
"aria-multiline": !0,
tabindex: 0
},
"implements": [ r ],
emits: {
mousedown: "mousedown",
click: "toggle:edit",
"click .note-body": "toggle:edit",
"click .open-fullscreen-note": "show:fullscreen",
"blur textarea": "blur:note",
keydown: "keydown"
},
_override: function() {},
initialize: function() {
var e = this;
u.initialize.apply(e, arguments), e.createNote = t.createNote(), e.noteLookup = t.noteLookup(), 
e.contentFakable = e.addSubview(new a()), e.debouncedScrollCheck = e.debounce(e.scrollCheck, 250), 
e.debouncedOnToggleEditMode = e.debounce(e.onToggleEditMode, 250, !0);
},
render: function(t) {
var i = this;
return i.unbindAll(), i.rendered = i.deferred(), i.options = t || {}, i.model = i.options.model || i.model, 
i.notes = i.noteLookup.getNoteCollectionForTask(i.model.id), i.bindTo(i.notes, "add remove", "onNoteAddRemove"), 
i.noteModel = i.notes.models.length ? i.notes.models[0] : null, t.animationDeferred.done(function() {
u.render.call(i, {});
var t = i.noteModel ? i.noteModel.attributes.content : "";
i.$(".note-body")[0].appendChild(i.contentFakable.render({
context: i,
disableEdit: i.isNoteDisabled,
content: t,
maxLength: 1e9,
autoSave: !0,
convertLinks: !0,
saveOnEnter: !1,
onShowDisplay: i.onDisplay,
onShowEdit: i.onEdit,
scrollContainer: c("#detail .body")
}).el), i.noteModel && i.bindTo(i.noteModel, "change:content", i.onChangeTitle), 
i.bindTo(i.contentFakable.model, "change:content", i.onSaveChanges), i.bindTo(c("#detail .body"), "scroll", i.debouncedScrollCheck), 
i.bindTo(e, "focus:changed", i.onChangeFocus), i.renderAriaLabel(), i.rendered.resolve();
}), i;
},
renderAriaLabel: function() {
var t = this, i = t.noteModel ? t.noteModel.attributes.content : "";
i = i && i.length ? i : e.language.getText("placeholder_add_note");
var n = e.language.getText("aria_press_enter_to_edit");
t.$el.attr("aria-label", i + n);
},
onNoteAddRemove: function() {
var e = this;
e.noteModel && e.unbindFromTarget(e.noteModel), e.noteModel = e.notes && e.notes.models.length ? e.notes.models[0] : null, 
e.noteModel && e.bindTo(e.noteModel, "change:content", e.onChangeTitle), e.onChangeTitle();
},
onDestroy: function() {
var e = this, t = e.contentFakable;
!t.destroyed && t.destroy();
},
scrollCheck: function() {
var e = this;
e.contentFakable.scrollCheck();
},
onDisplay: function() {
var t = this;
t.isEditing = !1, e.trigger("route:" + t.model.route(), {
trigger: !1
}), e.trigger("focus:set", "browser");
},
onEdit: function() {
var t = this;
t.isEditing = !0, e.trigger("route:" + t.model.route("/note/edit"), {
trigger: !1
}), t.triggerFocusChange();
},
onToggleEditMode: function(t) {
var n = this, a = !1;
return t && (a = c(t.target).is("span"), n.isNoteDisabled) ? (t.stopPropagation(), 
t.preventDefault(), n.isEditing = !0, void n.trigger("force:fullscreen")) : void (a || n.rendered.done(function() {
n.contentFakable.onShowEditMode(), n.cursor !== d && i.setCaretToPos(n.$el.find("textarea")[0], n.cursor), 
e.trigger("route:" + n.model.route("/note/edit"), {
trigger: !1
}), n.triggerFocusChange();
}, n));
},
toggleFullscreenButton: function(e) {
var t = this;
t.$(".open-fullscreen-note").toggleClass("hidden", !!e);
},
onOpenFullscreen: function(e) {
var t = this;
e = e || t.isEditing;
var i = t.addSubview(new n(), "fullscreen");
c("#modals").append(i.render({
taskModel: t.model
}).el), i && t.defer(function() {
i.$el.removeClass("hidden"), e && (i.contentFakable.onShowEditMode(), t.delay(function() {
i.$el.find("textarea").focus();
}, 100)), i.checkScrolling(), t.toggleFullscreenButton(!1);
});
},
fixScroll: function() {
var e = this, t = "div.detail-date", i = e.$el.parent().find(t).position();
i && (e.scrollTop = i.top);
},
getCaretFromMouse: function(e) {
var t, n = this, a = c(e.target).is("span"), o = n.$el.find("textarea")[0], r = n.$el[0];
return !a && o && r && (t = i.getCaretFromMousePos(o, r, e)), t;
},
onChangeTitle: function() {
var e = this, t = e.noteModel, i = {
content: t ? t.attributes.content : ""
};
e.rendered.done(function() {
e.contentFakable.model.set(i);
}), e.renderAriaLabel();
},
onSaveChanges: function() {
var t = this, i = t.model && !t.model.destroying;
if (i = i && "fullscreenNote" !== t._currentFocus) {
var n = t.noteModel, a = t.contentFakable.model.attributes.content;
n ? n.save("content", a) : t.createNote.createNote(a, t.model.id), e.trigger("detail:checkBounds");
}
},
focusFullscreenButton: function() {
this.$(".open-fullscreen-note").focus();
},
onChangeFocus: function(e) {
this._currentFocus = e;
},
triggerFocusChange: function() {
e.trigger("focus:set", "detail");
},
focusSelf: function() {
this.$el.focus();
}
});
}), define("views/TaskDetail/Controllers/TaskDetailTitleController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/helpers/strings", "wunderbits/WBViewController" ], function(e, t, i, n) {
var a = e.$, o = n.prototype, r = e.global;
return n.extend({
"implements": {
"click:title": "titleClicked",
"keydown:title": "titleKeyDown",
"keydown:textarea": "editTitleKeyDown",
"keyup:textarea": "editTitleTextChange",
"blur:textarea": "debounceEditBlur",
"focus:detail": "focusDetail",
"silentRoute:edit": "silentRouteToTitleEdit",
focus: "focusTitle"
},
initialize: function() {
var e = this;
e.debounceEditBlur = e.debounce(e.editTitleBlur, 100, {
leading: !0
}), o.initialize.apply(e, arguments);
},
focusTitle: function() {
this.view.trigger("title:focus");
},
titleKeyDown: function(e) {
var i = this;
e.which === t.enter && (i.view.trigger("title:toggle:edit"), i.stopEventFully(e));
},
titleClicked: function(t) {
var i = this;
return t ? void (a(t.target)[0] === i.view.$el[0] ? i.editWasBlurred && (i.editWasBlurred = !1) : (i.silentRouteToTitleEdit(), 
e.trigger("analytics:detailView:click:title"))) : (i.view.trigger("title:toggle:edit"), 
void i.view.selectTitle());
},
editTitleKeyDown: function(e) {
var i = this;
e.which === t.enter ? (i.debounceEditBlur(), i.stopEventFully(e)) : e.which === t.esc ? (i.view.trigger("title:toggle:edit", !1), 
i.view.trySetFocusRoute(), i.stopEventFully(e)) : e.which === t.backspace || e.which === t.del ? i.editTitleTextChange() : e.metaKey && 86 === e.which ? (i.view.trigger("title:render", !0), 
i.defer(i.editTitleTextChange)) : e.which === t.tab && (i.focusTitle(), i.stopEventFully(e));
},
editTitleTextChange: function() {
var e = this;
e.view.trigger("update:size");
},
editTitleBlur: function() {
var e, t = this;
t.editWasBlurred = !0, e = r.setTimeout(function() {
t.editWasBlurred = !1;
}, 100), t.saveTitleChanges(), t.editTitleTextChange(), t.view.trySetFocusRoute();
},
saveTitleChanges: function() {
var e = this, t = e.view, n = i.trim(e.view.$("textarea").val()), a = t.model;
n && n !== a.attributes.title ? a.save("title", n) : 0 === n.length && t.trigger("title:contentFakable:revert");
},
silentRouteToTitleEdit: function() {
var t = this;
t.focusDetail(), e.trigger("route:" + t.view.model.route("/title/edit"), {
trigger: !1
});
},
focusDetail: function() {
e.trigger("focus:set", "detail");
}
});
}), define("/templates/detailview/detailTitle.js", {
name: "detailview/detailTitle",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression;
return '<span class="title-text">' + r((a = t.title || e && e.title, typeof a === o ? a.call(e, {
name: "title",
hash: {},
data: n
}) : a)) + "</span>";
},
useData: !0
}
}), define("views/TaskDetail/TaskDetailTitleView", [ "application/runtime", "helpers/Animator", "wunderbits/helpers/selection", "views/TaskDetail/Controllers/TaskDetailTitleController", "wunderbits/WBContentFakable", "./SectionView", "template!detailview/detailTitle" ], function(e, t, i, n, a, o, r) {
var s = e.$, l = o.prototype;
return o.extend({
sectionName: "title",
className: "title",
attributes: {
tabindex: 0
},
template: r,
"implements": [ n ],
observes: {
events: {
"update:size": "checkSize",
"title:contentFakable:revert": "revertContentFakable",
"title:toggle:edit": "toggleEditTitle",
"title:render": "renderTitle",
"title:show:edit": "forceEditMode",
"title:focus": "focusTitle"
},
contentFakable: {
focusElement: "triggerFocus"
}
},
emits: {
click: "click:title",
keydown: "keydown:title",
"keydown textarea": "keydown:textarea",
"keyup textarea": "keyup:textarea",
"blur textarea": "blur:textarea"
},
initialize: function() {
var e = this;
e.contentFakable = e.addSubview(new a({
lineHeight: 24,
fontSize: 16
})), l.initialize.apply(e, arguments);
},
setAnimationDefaults: function() {
var e = this, t = s("#detail"), i = e.$el, n = i.clone(!1).addClass("clone"), a = t.find(".body"), o = a.clone(!1).addClass("clone");
n.css("visibility", "hidden"), n.find(".title-text").removeClass("hidden").text(""), 
t.find(".inner").append(n, o), o = t.find(".body.clone"), n = t.find(".title.clone"), 
e.defaultTitleContainerHeight = n.height(), e.defaultBodyContainerTop = Number(o.css("top").replace("px", "")), 
n.remove(), o.remove();
},
render: function(e) {
var t = this;
return e = e || {}, e.model && (t.model = e.model), l.render.call(t), t.setAnimationDefaults(), 
t.renderContentFakable(), t.hasRendered = !0, t;
},
renderWithModel: function(e) {
var t = this;
e !== t.model && (t.setupModel(e), t.hasRendered ? (t.renderTitle(), t.renderContentFakableWithModel()) : (t.render(), 
t.renderContentFakableWithModel()), t.checkSize());
},
setupModel: function(e) {
var t = this;
t.model && t.unbindFromTarget(t.model), t.model = e || t.model, t.bindTo(t.model, "change:title", t.changeTitle);
},
renderTitle: function() {
var e = this;
e.$el.attr("aria-label", "Title: " + e.model.attributes.title);
},
renderContentFakable: function() {
var e = this, t = e.$(".title-text");
t.html(e.contentFakable.render({
context: e,
content: e.model.attributes.title,
maxLength: 255,
autoSave: !1,
convertLinks: !1,
saveOnEnter: !0
}).el), e.checkSize();
},
renderContentFakableWithModel: function() {
var e = this, t = e.contentFakable;
t.model.set({
content: e.model.attributes.title
}), t.isEditing() && t.updateTextArea();
},
revertContentFakable: function() {
var e = this;
e.contentFakable.render({
context: e,
content: e.model.attributes.title,
maxLength: 255
});
},
checkSize: function() {
var e = this, t = e.$el.height();
t !== e.currentTitleEditHeight && (e.trigger("title:resized", t), e.currentTitleEditHeight = t);
},
toggleEditTitle: function(e) {
var t = this, i = t.$el, n = i.find(".expandingArea"), a = i.find(".title-text"), o = t.isEditingTitle();
o && e !== !0 || e === !1 ? (n.find("textarea").val(""), a.removeClass("hidden")) : (t.contentFakable.onShowEditMode(), 
n.removeClass("hidden").find("textarea"), t.trigger("silentRoute:edit")), t.checkSize();
},
forceEditMode: function() {
var e = this;
e.contentFakable.onShowEditMode(), e.$(".expandingArea").removeClass("hidden");
},
selectTitle: function() {
this.$el.find(".expandingArea textarea").select();
},
changeTitle: function() {
var e = this, t = e.model.attributes, i = e.contentFakable.model.attributes.content !== t.title;
e.isEditingTitle() || i || (e.contentFakable.model.set({
content: t.title
}), e.checkSize());
},
focusTitle: function() {
this.$el.focus();
},
triggerFocus: function() {
this.trigger("focus");
},
isEditingTitle: function() {
return !this.$(".edit-view").hasClass("hidden");
}
});
}), define("/templates/detailview/file.js", {
name: "detailview/file",
data: {
"1": function() {
return ' <span class="icon-file files-dropbox-small"/> ';
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = "function", s = this.escapeExpression, l = t.helperMissing, d = '<div tabindex="0" class="file" aria-label="' + s((o = t.fileName || e && e.fileName, 
typeof o === r ? o.call(e, {
name: "fileName",
hash: {},
data: n
}) : o)) + '" role="button"> <div class="icon-file left"> <img class="preview" /> <span class="extension-name">' + s((o = t.extension || e && e.extension, 
typeof o === r ? o.call(e, {
name: "extension",
hash: {},
data: n
}) : o)) + '</span> </div> <div class="info"> ';
return a = t["if"].call(e, e && e.isDropbox, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d + ' <a class="filename" title="' + s((o = t.fileName || e && e.fileName, 
typeof o === r ? o.call(e, {
name: "fileName",
hash: {},
data: n
}) : o)) + '">' + s((o = t.fileName || e && e.fileName, typeof o === r ? o.call(e, {
name: "fileName",
hash: {},
data: n
}) : o)) + '</a> <div class="icon-file alert"/> <div class="progress"> <div class="bar"/> </div> <div class="icon-file cancel-action"></div> <div class="meta" title="' + s((o = t.title || e && e.title, 
typeof o === r ? o.call(e, {
name: "title",
hash: {},
data: n
}) : o)) + '"> <span class="creator left"></span> <span class="ago">' + s((o = t.ago || e && e.ago, 
typeof o === r ? o.call(e, {
name: "ago",
hash: {},
data: n
}) : o)) + '</span> <span class="waiting"> &middot; ' + s((o = t.localized || e && e.localized || l, 
o.call(e, "upload_file_not_synced_yet", {
name: "localized",
hash: {},
data: n
}))) + '</span> </div> </div> <div class="delete"> <div class="icon-file delete-action"></div> </div> </div> ';
},
useData: !0
}
}), define("/styles/detailview/_file.js", {
name: "detailview/_file",
data: ".failed .file .info .progress{width:184px;margin-left:22px}.failed .file .info .icon-file.alert{display:block}.hasPreview .file .preview{display:block}.file .preview{display:none}.files-list li{height:60px;overflow:hidden}.files-list li.image.hasPreview{height:152px;overflow:hidden}.file{position:relative;z-index:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;border:1px solid #dfdedd;background:#fff;-webkit-box-shadow:0 1px 3px rgba(0,0,0,0.1);box-shadow:0 1px 3px rgba(0,0,0,0.1);-webkit-transition:all 300ms ease;-moz-transition:all 300ms ease;-o-transition:all 300ms ease;-ms-transition:all 300ms ease;transition:all 300ms ease;height:56px;-webkit-border-radius:3px;border-radius:3px;}.file.dropbox{height:64px}.file:hover .delete{visibility:visible}.file .icon-file{float:left;cursor:pointer;}.file .icon-file.alert{display:none}.file .icon-file.document-thumb .extension-name{display:block}.file .icon-file.files-dropbox-small{margin-top:1px;margin-right:4px}.file .icon-file .extension-name{display:block;text-align:center;display:none;text-transform:uppercase;font-size:11px;font-weight:bold;margin:32px 7px 0 7px;color:#bdbcbb;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.file .delete{visibility:hidden;-webkit-box-shadow:inset -70px 0 30px -20px #fff;box-shadow:inset -70px 0 30px -20px #fff;position:absolute;top:0;bottom:0;right:0;width:64px}.file .delete-action{position:absolute;right:9px;top:20px;z-index:4}.file .info{padding:7px 10px 0 60px;}.file .info .progress{display:none;height:6px;width:206px;-webkit-border-radius:8px;border-radius:8px;border:1px solid #9bb8d1;margin-top:9px;}.file .info .progress .bar{-webkit-transition:1ms width ease-in;-moz-transition:1ms width ease-in;-o-transition:1ms width ease-in;-ms-transition:1ms width ease-in;transition:1ms width ease-in;background:#ccdae6;height:100%;width:0%;-webkit-border-radius:1px;border-radius:1px}.file .info .cancel-action{display:none;position:absolute;top:28px;right:12px}.file .info .filename{font-size:13px;font-weight:bold;display:block;color:#262626;margin-bottom:5px;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.file .info .meta{color:#737272;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;}.file .info .meta .avatar{margin-right:8px}.file .info .meta .ago,.file .info .meta .waiting{display:inline;font-size:11px;max-width:255px}.file .info .meta .waiting{font-weight:bold;display:none}.file .info .meta .file-size{font-size:10px}li.image .file{height:56px;}li.image .file img{height:0}li.image.hasPreview.small-preview:not(.uploading){height:60px;}li.image.hasPreview.small-preview:not(.uploading) .preview{position:absolute;left:9px;top:9px;width:36px !important;height:36px !important}li.image.hasPreview.normal-preview:not(.uploading) .file{overflow:hidden;height:148px;padding:0;}li.image.hasPreview.normal-preview:not(.uploading) .file:hover:after{background-image:-webkit-linear-gradient(top, rgba(0,0,0,0), rgba(0,0,0,0.5));background-image:-moz-linear-gradient(top, rgba(0,0,0,0), rgba(0,0,0,0.5));background-image:-o-linear-gradient(top, rgba(0,0,0,0), rgba(0,0,0,0.5));background-image:-ms-linear-gradient(top, rgba(0,0,0,0), rgba(0,0,0,0.5));background-image:linear-gradient(to bottom, rgba(0,0,0,0), rgba(0,0,0,0.5))}li.image.hasPreview.normal-preview:not(.uploading) .file:hover .meta,li.image.hasPreview.normal-preview:not(.uploading) .file:hover .filename{opacity:1;-ms-filter:none;filter:none}li.image.hasPreview.normal-preview:not(.uploading) .file:after{content:'';position:absolute;background-image:-webkit-linear-gradient(top, rgba(0,0,0,0), rgba(0,0,0,0));background-image:-moz-linear-gradient(top, rgba(0,0,0,0), rgba(0,0,0,0));background-image:-o-linear-gradient(top, rgba(0,0,0,0), rgba(0,0,0,0));background-image:-ms-linear-gradient(top, rgba(0,0,0,0), rgba(0,0,0,0));background-image:linear-gradient(to bottom, rgba(0,0,0,0), rgba(0,0,0,0));-webkit-box-shadow:inset 0 0 0 4px #fff;box-shadow:inset 0 0 0 4px #fff;bottom:0;left:0;right:0;height:100%;z-index:0}li.image.hasPreview.normal-preview:not(.uploading) .file .delete{-webkit-box-shadow:none;box-shadow:none}li.image.hasPreview.normal-preview:not(.uploading) .file .delete-action{top:11px;right:11px}li.image.hasPreview.normal-preview:not(.uploading) .file .meta{margin:0;}li.image.hasPreview.normal-preview:not(.uploading) .file .meta .avatar:before{border-color:rgba(255,255,255,0.4);-webkit-box-shadow:none;box-shadow:none}li.image.hasPreview.normal-preview:not(.uploading) .file .filename,li.image.hasPreview.normal-preview:not(.uploading) .file .meta{visibility:visible;opacity:0;-ms-filter:\"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)\";filter:alpha(opacity=0);position:absolute;color:#fff;z-index:1;-webkit-transition:opacity 150ms ease;-moz-transition:opacity 150ms ease;-o-transition:opacity 150ms ease;-ms-transition:opacity 150ms ease;transition:opacity 150ms ease;}li.image.hasPreview.normal-preview:not(.uploading) .file .filename .ago,li.image.hasPreview.normal-preview:not(.uploading) .file .meta .ago{color:rgba(255,255,255,0.7)}li.image.hasPreview.normal-preview:not(.uploading) .file .filename{bottom:30px;left:13px;right:12px}li.image.hasPreview.normal-preview:not(.uploading) .file .meta{bottom:12px;left:12px}li.image.hasPreview.normal-preview:not(.uploading) .file .icon-file.image-thumb{background-image:none !important}li.image.hasPreview.normal-preview:not(.uploading) .file .icon-file img{position:absolute;bottom:0;-webkit-transition:all 300ms ease;-moz-transition:all 300ms ease;-o-transition:all 300ms ease;-ms-transition:all 300ms ease;transition:all 300ms ease;top:0;height:auto;width:100%;min-height:140px}li.waiting .info .meta .waiting{display:inline}li.enqueued{display:none}.files-list li.uploading{height:60px;}.files-list li.uploading .file{height:56px;}.files-list li.uploading .file .icon-file img{height:0;min-height:auto}.files-list li.uploading .file .info .progress,.files-list li.uploading .file .info .cancel-action{display:block}.files-list li.uploading .file .meta,.files-list li.uploading .file .delete{display:none}.files-list li.dropbox-preview .file > .icon-file{margin-top:2px;width:50px;height:50px;-webkit-background-size:50px;-moz-background-size:50px;background-size:50px;background-image:none;}.files-list li.dropbox-preview .file > .icon-file .extension-name{display:none}@media only screen and (-webkit-min-device-pixel-ratio: 1.5), only screen and (min--moz-device-pixel-ratio: 1.5){.files-list li.dropbox-preview .file > .icon-file{background-image:initial}}html[dir=rtl] .file .info{padding-left:10px;padding-right:60px;}html[dir=rtl] .file .info .meta .avatar{margin-left:8px}html[dir=rtl] .file .delete{left:0;right:initial;-webkit-box-shadow:inset 70px 0 30px -20px #fff;box-shadow:inset 70px 0 30px -20px #fff}html[dir=rtl] .file .delete-action{left:9px;right:initial}"
}), define("views/TaskDetail/TaskDetailFileView", [ "application/runtime", "vendor/moment", "helpers/BlobHelper", "wunderbits/helpers/date", "wunderbits/WBView", "views/AvatarView", "template!detailview/file", "style!detailview/_file" ], function(e, t, i, n, a, o, r, s, l) {
var d = e._, c = a.prototype, u = {
text: {
checks: [ /^text/, /ms-word|iwork-pages|opendocument.text/ ],
className: "text"
},
packages: {
checks: [ /^application\/(zip|rar|gzip|x-tar|x-apple-diskimage)/ ],
className: "package"
},
pdf: {
checks: [ /^application\/pdf/ ],
className: "pdf"
},
audio: {
checks: [ /^audio/ ],
className: "audio"
},
movies: {
checks: [ /^video/ ],
className: "movie"
},
images: {
checks: [ /^image/ ],
className: "image"
},
presentation: {
checks: [ /presentation|powerpoint|iwork-keynote/ ],
className: "presentation"
},
table: {
checks: [ /spreadsheet|ms-excel|iwork-numbers/ ],
className: "table"
}
};
return a.extend({
styles: [ s ],
template: r,
tagName: "li",
events: {
click: "onClick",
"click .delete": "onClickDeleteContainer",
"click .delete-action": "onDelete",
"click .cancel-action": "onCancelUpload"
},
renderData: {
ago: l,
user_id: l,
extension: l,
isEnqueued: l,
isPro: l,
isUploading: l,
isUploadingDone: l,
isWaiting: l,
fileName: l,
previewUrl: l,
isDropbox: l
},
getAvailablePreviewSizes: function() {
var e = this, t = e.model.attributes, i = !1, n = t.preview;
if (n) {
var a = n.size && parseInt(n.size.split("x")[0], 10);
a >= 300 && (i = !0);
}
return i ? "normal" : "small";
},
formatData: function(i) {
var a = this;
i = c.formatData.call(a, i);
var o = a.model.attributes;
return i.ago = t(n.convertServerTimeToLocalTime(o.created_at)).fromNow(), i.user_id = a.model.attributes.user_id, 
i.extension = a.getExtensionFromName(o.file_name), i.isWaiting = o.state === l && !o.online_id, 
i.isEnqueued = 0 === o.state, i.isUploading = 1 === o.state, i.isUploadingDone = !(2 !== o.state || !o.online_id), 
i.isPro = e.user.isPro(), i.fileName = o.file_name, i.previewUrl = o.previewUrl, 
i.isDropbox = "dropbox" === o.file_provider, i.title = i.ago, i.isWaiting && (i.title += " &middot; " + e.language.getText("upload_file_not_synced_yet")), 
i;
},
initialize: function(t) {
var i = this;
if (c.initialize.apply(i, arguments), i.tryDelete = i.debounce(i.tryDelete, 1e3, !0), 
t.model) {
var n = i.model = t.model;
i.bindTo(n, "change:preview", i.renderPreview), i.bindTo(n, "change:state", i.onModelStateChange), 
i.bindTo(n, "change:url", function() {
i.onModelStateChange(), i.updatePreviewIcon(), i.renderPreview();
}), i.bindTo(n, "destroy", i.onDestroySelf), i.bindTo(n, "upload:retrying", i.onRetryUpload), 
i.bindTo(e, "time:nextMinute", i.updateCreatedAt), n.uploader ? i.setUploader(n.uploader) : i.bindTo(n, "hasUploader", i.setUploader);
}
i.bindTo(i, "delete:file", "onDelete");
},
render: function() {
var t = this;
if (!t.model || t.destroyed) return t;
var i = t.$el, n = t.formatData(t.renderData);
return c.render.call(t, n), n.previewUrl && i.addClass("hasPreview"), n.isUploading ? e.user.isIDEqual(n.user_id) ? (i.addClass("uploading"), 
i.toggleClass("failed", !t.uploader)) : i.addClass("enqueued") : n.isUploadingDone ? i.removeClass("uploading") : n.isEnqueued ? i.addClass("enqueued").removeClass("uploading") : n.isWaiting && i.addClass("waiting").removeClass("uploading"), 
t.updatePreviewIcon(), t.renderPreview(), t.renderAvatar(n.user_id), t.uploader && t.onUploadProgress(t.uploader.progress), 
i.attr("rel", t.model.id), t.renderAriaLabel(), t;
},
renderAriaLabel: function() {
var t = this;
if (t.collection && t.model && 0 === t.collection.models.indexOf(t.model)) {
var i = t.model.attributes.file_name, n = e.language.getText("aria_file_navigation_info");
t.$(".file").attr("aria-label", i + " - " + n);
}
},
setUploader: function(e) {
var t = this;
if (!t.uploader) {
var i = t.bindTo(e, "change:progress", t.onUploadProgress), n = t.bindTo(e, "change:state", t.onUploadStateChange), a = t.bindTo(e, "upload:error", t.onUploadError), o = t.on("cancel:upload", function() {
e.trigger("upload:abort"), t.deleteSelf();
});
t.bindTo(e, "upload:complete", function() {
t.unbindFrom(i), t.unbindFrom(n), t.unbindFrom(a), t.unbindFrom(o), e.destroy(), 
t.uploader = t.model.uploader = null;
}), t.uploader = t.model.uploader = e;
}
},
renderPreview: function() {
var e = this;
e.model.getPreviewUrl().done(function(t) {
t && !e.destroyed && e.loadPreview(t);
});
},
previewLoadSuccess: function() {
var e = this;
if (!e.destroyed) {
var t = "small" === e.getAvailablePreviewSizes();
e.$el.addClass("hasPreview"), e.$el.toggleClass("small-preview", t), e.$el.toggleClass("normal-preview", !t);
}
},
previewLoadFailure: function(e) {
var t = this;
!t.destroyed && t.delay(function() {
t.loadPreview(e);
}, 3e3);
},
loadPreview: function(e) {
var t = this, n = t.$("img.preview");
i.loadImage(e, n, t.previewLoadSuccess.bind(t), function() {
t.previewLoadFailure(e);
});
},
renderAvatar: function(e) {
var t = this, i = t.$(".creator");
t.avatarView = t.avatarView || t.addSubview(new o({
size: "tiny"
}), "avatarView"), i.html(t.avatarView.render({
id: e
}).$el);
},
updatePreviewIcon: function() {
var e = this;
"dropbox" === e.model.attributes.file_provider ? e.renderDropboxPreviewIcon() : e.renderNormalPreviewIcon();
},
renderNormalPreviewIcon: function() {
var e, t = this, i = !1, n = t.model.attributes.content_type;
d.each(u, function(t) {
i || d.each(t.checks, function(a) {
!i && a.test(n) && (e = t.className, i = !0);
});
});
var a = t.$(".file > .icon-file");
i && e ? (a.addClass(e + "-thumb"), t.$el.addClass(e)) : a.addClass("document-thumb");
},
renderDropboxPreviewIcon: function() {
var e = this, t = e.model.attributes.file_icon, i = e.$(".file > .icon-file");
t ? (e.$el.addClass("dropbox-preview"), i.css("background-image", "url(" + t + ")")) : i.addClass("document-thumb");
},
onClick: function() {
var t = this, i = t.model.attributes.url, n = !0;
i && e.openUrl(i, n);
},
onCancelUpload: function(e) {
var t = this;
t.trigger("cancel:upload"), t.$el.addClass("uploading"), t.onDelete(e);
},
onDelete: function(t, i) {
var n = this;
if (t && t.preventDefault(), t && t.stopPropagation(), !n.isDeleting) {
var a = "true" === e.settings.get("confirm_delete_entity"), o = function() {
n.deleteSelf(), i && i.confirm && i.confirm();
};
a ? e.trigger("modal:confirm", {
customTitle: e.language.getLabel("label_are_you_sure_permanently_delete_$_file", d.escape(n.model.attributes.file_name)).toString(),
customText: e.language.getLabel("label_cant_undo").toString(),
confirmText: e.language.getLabel("label_delete_file").toString(),
confirm: o,
cancel: i && i.cancel
}) : o();
}
},
tryDelete: function() {
var e = this;
e.model && e.model.destroy({
forRemote: !0
});
},
deleteSelf: function() {
var e = this;
e.destroyed || (e.isDeleting = !0, e.$el.addClass("deleting"), e.tryDelete());
},
onDestroySelf: function() {
var e = this;
e.$el.addClass("deleting"), e.delay(function() {
e.destroy();
}, 400);
},
onClickDeleteContainer: function(e) {
e.preventDefault(), e.stopPropagation();
},
onUploadStateChange: function(e) {
var t = this, i = t.$el;
i.removeClass("waiting"), t.$(".meta").attr("title", t.formatData().title), 0 === e ? i.addClass("enqueued") : 1 === e ? i.removeClass("enqueued").addClass("uploading") : 2 === e && t.model.attributes.url && i.removeClass("enqueued uploading");
},
onModelStateChange: function() {
var e = this, t = e.model.attributes;
2 === t.state && t.url && e.$el.removeClass("enqueued uploading failed");
},
onUploadProgress: function(e) {
var t = this;
(e > t.progress || !t.progress) && (t.progress = e, t.$(".progress .bar").css({
width: e + "%"
}));
},
onUploadError: function() {
var e = this;
e.$el.addClass("uploading failed");
},
onRetryUpload: function() {
var e = this;
e.$el.addClass("uploading"), e.$el.removeClass("failed");
},
updateCreatedAt: function() {
var e = this, i = t(n.convertServerTimeToLocalTime(e.model.get("created_at"))).fromNow();
e.$(".meta .ago").text(i);
},
getExtensionFromName: function(e) {
var t = e.split(".");
return t.length > 1 ? t[t.length - 1] : "";
}
});
}), define("vendor/recorderWorker", [], function() {
return function() {
function e(e) {
c = e.sampleRate;
}
function t(e) {
p.push(e[0]), m.push(e[1]), u += e[0].length;
}
function i(e, t) {
var i = o(p, u), n = o(m, u), a = r(i, n), s = d(a), l = new Blob([ s ], {
type: e
});
this.postMessage({
id: t,
data: l
});
}
function n(e) {
var t = [];
t.push(o(p, u)), t.push(o(m, u)), this.postMessage({
id: e,
data: t
});
}
function a() {
u = 0, p = [], m = [];
}
function o(e, t) {
for (var i = new Float32Array(t), n = 0, a = 0; a < e.length; a++) i.set(e[a], n), 
n += e[a].length;
return i;
}
function r(e, t) {
for (var i = e.length + t.length, n = new Float32Array(i), a = 0, o = 0; i > a; ) n[a++] = e[o], 
n[a++] = t[o], o++;
return n;
}
function s(e, t, i) {
for (var n = 0; n < i.length; n++, t += 2) {
var a = Math.max(-1, Math.min(1, i[n]));
e.setInt16(t, 0 > a ? 32768 * a : 32767 * a, !0);
}
}
function l(e, t, i) {
for (var n = 0; n < i.length; n++) e.setUint8(t + n, i.charCodeAt(n));
}
function d(e) {
var t = new ArrayBuffer(44 + 2 * e.length), i = new DataView(t);
return l(i, 0, "RIFF"), i.setUint32(4, 32 + 2 * e.length, !0), l(i, 8, "WAVE"), 
l(i, 12, "fmt "), i.setUint32(16, 16, !0), i.setUint16(20, 1, !0), i.setUint16(22, 2, !0), 
i.setUint32(24, c, !0), i.setUint32(28, 4 * c, !0), i.setUint16(32, 4, !0), i.setUint16(34, 16, !0), 
l(i, 36, "data"), i.setUint32(40, 2 * e.length, !0), s(i, 44, e), i;
}
var c, u = 0, p = [], m = [];
this.onmessage = function(o) {
switch (o.data.command) {
case "init":
e(o.data.config);
break;

case "record":
t(o.data.buffer);
break;

case "exportWAV":
i(o.data.type, o.data.id);
break;

case "getBuffer":
n(o.data.id);
break;

case "clear":
a();
}
};
};
}), function(e) {
"function" == typeof define && define.amd ? define("vendor/recorder", [ "wunderbits/global", "vendor/recorderWorker" ], function(t, i) {
return e(t, i);
}) : e(window);
}.call(this, function(e, t) {
if (e.URL && e.Blob) {
var i = "(" + t.toString() + ")()", n = new Blob([ i ], {
type: "application/javascript"
}), a = e.URL.createObjectURL(n), o = a, r = function(e, t) {
var i = t || {}, n = i.bufferLen || 4096, a = this.context = e.context, r = a.createJavaScriptNode || a.createScriptProcessor;
this.node = r.call(a, n, 2, 2);
var s = new Worker(i.workerPath || o);
s.postMessage({
command: "init",
config: {
sampleRate: a.sampleRate
}
});
var l = !1, d = 0, c = {};
this.sendMessage = function(e, t) {
++d, e.id = d, c[d] = t, s.postMessage(e);
}, s.onmessage = function(e) {
"function" == typeof c[e.data.id] && c[e.data.id](e.data.data), c[e.data.id] = null;
}, this.node.onaudioprocess = function(e) {
l && s.postMessage({
command: "record",
buffer: [ e.inputBuffer.getChannelData(0), e.inputBuffer.getChannelData(1) ]
});
}, this.configure = function(e) {
for (var t in e) e.hasOwnProperty(t) && (i[t] = e[t]);
}, this.record = function(e) {
var t = e || i.callback;
l = !0, "function" == typeof t && c();
}, this.stop = function(e) {
var t = e || i.callback;
l = !1, "function" == typeof t && c();
}, this.clear = function(e) {
var t = e || i.callback;
this.sendMessage({
command: "clear"
}, t);
}, this.getBuffer = function(e) {
var t = e || i.callback;
this.sendMessage({
command: "getBuffer"
}, t);
}, this.exportWAV = function(e, t) {
var n = e || i.callback;
t = t || i.type || "audio/wav", this.sendMessage({
command: "exportWAV",
type: t
}, n);
}, e.connect(this.node), this.node.connect(this.context.destination);
};
return r.forceDownload = function(t, i) {
var n = (e.URL || e.webkitURL).createObjectURL(t), a = e.document.createElement("a");
a.href = n, a.download = i || "output.wav";
var o = document.createEvent("Event");
o.initEvent("click", !0, !0), a.dispatchEvent(o);
}, e.Recorder = r, r;
}
}), define("/templates/detailview/audioRecorder.js", {
name: "detailview/audioRecorder",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<audio></audio> <a class="start-recording-audio" tabindex="0" data-key-title="title_start_pause_recording_audio" role="button"> <span class="icon-file record-audio"/> </a> <a class="play-recorded-audio disabled" tabindex="0" data-key-title="title_play_recorded_audio" role="button"> <span class="icon-file play-audio"/> </a> <span class="duration">00:00</span> <a class="clear-recorded-audio" tabindex="0" data-key-title="title_clear_recorded_audio" role="button"> <span class="icon-file clear-audio"/> </a> <a class="upload-recorded-audio disabled" tabindex="0" data-key-title="title_upload_recorded_audio" role="button"> <span class="icon-file upload-audio"/> </a>';
},
useData: !0
}
}), define("/styles/_recorder.js", {
name: "_recorder",
data: ".audio-recorder-container{-webkit-border-radius:5px;border-radius:5px;border:1px solid #c9c9c9;background-image:-webkit-linear-gradient(top, #fff, #f7f7f7);background-image:-moz-linear-gradient(top, #fff, #f7f7f7);background-image:-o-linear-gradient(top, #fff, #f7f7f7);background-image:-ms-linear-gradient(top, #fff, #f7f7f7);background-image:linear-gradient(to bottom, #fff, #f7f7f7);-webkit-box-shadow:0 1px 2px rgba(0,0,0,0.1);box-shadow:0 1px 2px rgba(0,0,0,0.1);margin:11px 0 10px 0;text-align:center;font-size:0;}.audio-recorder-container a{display:inline-block;width:48px;float:none;padding:10px 0 7px 0;margin:0 2px;font-weight:bold;text-align:center;}.audio-recorder-container a span{display:inline-block}.audio-recorder-container .duration{display:inline-block;width:84px;font-size:16px;font-weight:bold;color:#737272;}.audio-recorder-container .duration.recording,.audio-recorder-container .duration.playing{color:#262626}.audio-recorder-container a,.audio-recorder-container .duration{vertical-align:middle}.audio-recorder-container .start-recording-audio{color:#f00}.audio-recorder-container .play-recorded-audio{color:#008000}"
}), define("views/TaskDetail/TaskDetailRecordAudioFileView", [ "application/runtime", "wunderbits/helpers/strings", "wunderbits/WBView", "vendor/recorder", "project!core/WBDeferred", "wunderbits/data/keycodes", "template!detailview/audioRecorder", "style!_recorder" ], function(e, t, i, n, a, o, r, s) {
var l = e._, d = e.global, c = i.prototype, u = e.env.isUserMediaSupported();
return i.extend({
className: "audio-recorder-container",
template: r,
tagName: "div",
events: {
keydown: "handleKeys",
"click .start-recording-audio": "oncClickRecord",
"click .stop-recording-audio": "stopRecording",
"click .clear-recorded-audio": "clearRecording",
"click .upload-recorded-audio:not(.disabled)": "uploadRecording",
"click .play-recorded-audio": "playRecordedAudio"
},
styles: [ s ],
initialize: function(e) {
var t = this;
c.initialize.apply(t, arguments), t.model = e && e.taskModel, t.AudioContext = d.AudioContext || d.webkitAudioContext, 
t.updateDuration = t.updateDuration.bind(t);
},
render: function() {
var e = this;
return u && e.AudioContext && (c.render.call(e, {}), e.model.get("online_id") ? e.setup() : e.bindOnceTo(e.model, "change:online_id", e.setup), 
e.delegateEvents()), e;
},
handleKeys: function(t) {
var i = this, n = i.$("a"), a = n.first(), r = n.last();
t.which !== o.tab || t.shiftKey ? t.which === o.tab && t.shiftKey ? a.is(":focus") && (r.focus(), 
i.stopEventFully(t)) : t.which === o.esc && (i.clearRecording(), e.trigger("route:" + i.model.route("addFile/focus"))) : r.is(":focus") && (a.focus(), 
i.stopEventFully(t));
},
stopEventFully: function(e) {
e.preventDefault(), e.stopPropagation();
},
setModel: function(e) {
var t = this;
t.model = e, t.duration = 0, t.render();
},
setup: function() {
var e = this;
e.url = d.URL || d.webkitURL, e.audio = e.$("audio")[0];
var t = e.$("audio"), i = e.$(".play-recorded-audio");
e.audioEndBind && e.unbindFrom(e.audioEndBind), e.audioEndBind = e.bindTo(t, "ended", function() {
i.removeClass("playing"), e.$(".duration").removeClass("playing recording"), e.displayDuration();
}), e.timeupdateBind && e.unbindFrom(e.timeupdateBind), e.timeupdateBind = e.bindTo(t, "timeupdate", function() {
i.hasClass("playing") && e.displayDuration(Math.floor(e.audio.currentTime));
});
},
onFail: function(e) {
console.log("Rejected!", e);
},
onSuccess: function(e) {
var t = this;
t.streamResource = t.streamResource || e;
var i = t.$(".start-recording-audio");
if (!t.context) {
var a = d.AudioContext || d.webkitAudioContext;
t.context = new a(), t.context.createGain();
}
!t.mediaStreamSource && (t.mediaStreamSource = t.context.createMediaStreamSource(t.streamResource)), 
!t.recorder && (t.recorder = new n(t.mediaStreamSource)), t.recorder.record(), i.hasClass("paused") ? t.continueUpdatingDuration() : t.startUpdatingDuration(), 
i.addClass("recording").removeClass("paused"), t.$(".duration").addClass("recording"), 
t.$(".stop-recording-audio").removeClass("disabled"), t.$(".play-recorded-audio").removeClass("disabled"), 
t.$(".upload-recorded-audio").removeClass("disabled"), t.recording = !0;
},
oncClickRecord: function() {
var t = this;
if (u && !t.streamResource) if (t.recorder && t.recorder.stop(), e.env.isChromeApp() && e.env.isChrome()) {
var i = d.chrome;
i.permissions.request({
permissions: [ "audioCapture" ]
}, function(e) {
e ? t.requestAudioPermission() : t.onFail(arguments);
});
} else t.requestAudioPermission(); else t.streamResource && t.recording ? (t.recorder.stop(), 
t.recording = !1, t.$(".start-recording-audio").addClass("paused").removeClass("recording"), 
t.$(".duration").removeClass("recording"), t.putAnAudioOnTheAudio(), t.stopUpdatingDuration()) : t.streamResource ? t.onSuccess() : console.log("navigator.getUserMedia not present");
},
requestAudioPermission: function() {
var t = this;
e.env.getUserMedia({
audio: !0,
video: !1
}, t.onSuccess.bind(t), t.onFail.bind(t));
},
stopRecording: function() {
var e = this;
e.recorder && !e.$(".stop-recording-audio").hasClass("disabled") && (e.$(".start-recording-audio, .duration").removeClass("recording"), 
e.$(".play-recorded-audio").removeClass("disabled"), e.recorder.stop(), e.stopUpdatingDuration(), 
e.putAnAudioOnTheAudio());
},
clearRecording: function() {
var e = this;
e.recorder && e.recorder.clear(), e.recording = !1, e.duration = 0, e.blob = null, 
e.audio && (e.audio.setAttribute("src", ""), e.audio.load()), e.$(".start-recording-audio").removeClass("recording paused"), 
e.$(".duration").removeClass("recording playing"), e.$(".play-recorded-audio").addClass("disabled"), 
e.$(".upload-recorded-audio").addClass("disabled"), e.displayDuration(), e.trigger("recording:clear");
},
putAnAudioOnTheAudio: function() {
var e = this, i = new a();
return e.recorder && e.recorder.exportWAV(function(n) {
if (!e.destroyed) {
var a = t.dateString();
e.audio.src = e.url.createObjectURL(n), n.name = "recording-" + a + ".wav", e.blob = n, 
e.$(".upload-recorded-audio").removeClass("disabled");
var o = function() {
i.resolve(), e.audio.removeEventListener("canplaythrough", o, !1);
};
e.audio.addEventListener("canplaythrough", o, !1);
}
}), i.promise();
},
playRecordedAudio: function() {
var e = this, t = e.$(".play-recorded-audio"), i = e.$(".duration"), n = t.hasClass("playing"), o = new a();
e.streamResource && e.recording ? (e.recorder.stop(), e.recording = !1, e.$(".start-recording-audio").addClass("paused").removeClass("recording"), 
e.$(".duration").removeClass("recording"), e.putAnAudioOnTheAudio().done(o.resolve, o), 
e.stopUpdatingDuration()) : o.resolve(), o.done(function() {
!e.audio || t.hasClass("disabled") || n ? n && (e.audio.pause(), e.audio.currentTime = 0, 
t.removeClass("playing"), i.removeClass("playing"), e.displayDuration()) : (t.addClass("playing"), 
i.addClass("playing"), e.audio.pause(), e.audio.currentTime = 0, e.audio.play());
});
},
uploadRecording: function() {
var e = this, t = new a();
e.$(".start-recording-audio").removeClass("recording"), e.$(".play-recorded-audio").removeClass("playing").addClass("disabled"), 
e.$(".upload-recorded-audio").addClass("disabled"), e.$(".stop-recording-audio").addClass("disabled"), 
e.$(".duration").removeClass("playing, recording"), e.streamResource && e.recording ? (e.recorder.stop(), 
e.recording = !1, e.$(".start-recording-audio").addClass("paused").removeClass("recording"), 
e.$(".duration").removeClass("recording"), e.putAnAudioOnTheAudio().done(t.resolve, t), 
e.stopUpdatingDuration()) : t.resolve(), t.done(function() {
e.blob && e.trigger("upload:audioFile", e.blob), e.duration = 0, e.blob = null, 
e.audio.setAttribute("src", ""), e.audio.load(), e.displayDuration(), e.clearRecording();
});
},
getDurationString: function(e) {
var i = this;
return e = l.isNumber(e) ? e : i.duration, t.pad(Math.floor(e / 60), 2) + ":" + t.pad(e % 60, 2);
},
displayDuration: function(e) {
var t = this, i = t.$(".duration");
e = l.isNumber(e) ? e : t.duration, i.text(t.getDurationString(e)), i.hasClass("hidden") && i.removeClass("hidden");
},
updateDuration: function() {
var e = this;
e.duration += 1, e.displayDuration();
},
startUpdatingDuration: function() {
var e = this;
e.duration = 0, e.displayDuration(), e.updateDurationInterval = d.setInterval(e.updateDuration, 1e3);
},
continueUpdatingDuration: function() {
var e = this;
e.displayDuration(), e.updateDurationInterval = d.setInterval(e.updateDuration, 1e3);
},
stopUpdatingDuration: function() {
var e = this;
d.clearTimeout(e.updateDurationInterval);
}
});
}), define("vendor/dropboxDropIns", [ "wunderbits/global" ], function(e) {
return function() {
var t, i, n, a, o, r, s, l, d, c, u, p, m, g, f, b, h, v, _, w, k, x, y, C, T, S, L, D, M, z, j, I = e, A = [].slice, P = [].indexOf || function(e) {
for (var t = 0, i = this.length; i > t; t++) if (t in this && this[t] === e) return t;
return -1;
};
return null == (L = I.Dropbox) && (I.Dropbox = {}), null == (D = Dropbox.baseUrl) && (Dropbox.baseUrl = "https://www.dropbox.com"), 
null == (M = Dropbox.blockBaseUrl) && (Dropbox.blockBaseUrl = "https://dl.dropbox.com"), 
Dropbox.addListener = function(e, t, i) {
e.addEventListener ? e.addEventListener(t, i, !1) : e.attachEvent("on" + t, function(e) {
return e.preventDefault = function() {
return this.returnValue = !1;
}, i(e);
});
}, Dropbox.removeListener = function(e, t, i) {
e.removeEventListener ? e.removeEventListener(t, i, !1) : e.detachEvent("on" + t, i);
}, a = function(e) {
var t, i;
return i = encodeURIComponent(Dropbox.VERSION), t = -1 === e.indexOf("?") ? "?" : "&", 
"" + e + t + "version=" + i;
}, r = function(e, t) {
var i, n, o, r, s, l, d, c, u;
return l = encodeURIComponent(I.location.protocol + "//" + I.location.host), i = encodeURIComponent(Dropbox.appKey), 
r = encodeURIComponent(e.linkType || ""), d = encodeURIComponent(e._trigger || "js"), 
s = Boolean(e.multiselect), n = encodeURIComponent((null != (u = e.extensions) && "function" == typeof u.join ? u.join(" ") : void 0) || ""), 
o = Boolean(e.folderselect), t = Boolean(t), c = "" + Dropbox.baseUrl + "/chooser?origin=" + l + "&app_key=" + i + "&link_type=" + r, 
c += "&trigger=" + d + "&multiselect=" + s + "&extensions=" + n + "&folderselect=" + o + "&iframe=" + t, 
a(c);
}, C = function() {
var e, t, i;
return t = encodeURIComponent(I.location.protocol + "//" + I.location.host), e = encodeURIComponent(Dropbox.appKey), 
i = "" + Dropbox.baseUrl + "/saver?origin=" + t + "&app_key=" + e, a(i);
}, _ = 1, g = function(e, t) {
var i, n, o, r;
if (i = encodeURIComponent(Dropbox.appKey), r = "" + Dropbox.baseUrl + "/dropins/job_status?job=" + t + "&app_key=" + i, 
r = a(r), o = function(t) {
var i;
"COMPLETE" === t.status ? ("function" == typeof e.progress && e.progress(1), "function" == typeof e.success && e.success()) : "PENDING" === (i = t.status) || "DOWNLOADING" === i ? (null != t.progress && "function" == typeof e.progress && e.progress(t.progress / 100), 
setTimeout(n, 1500)) : "FAILED" === t.status && "function" == typeof e.error && e.error(t.error);
}, "withCredentials" in new XMLHttpRequest()) n = function() {
var t;
return t = new XMLHttpRequest(), t.onload = function() {
return o(JSON.parse(t.responseText));
}, t.onerror = function() {
return "function" == typeof e.error ? e.error() : void 0;
}, t.open("GET", r, !0), t.send();
}; else if (Dropbox.disableJSONP) {
if ("undefined" == typeof XDomainRequest || null === XDomainRequest || "https:" !== document.location.protocol) throw new Error("Unable to find suitable means of cross domain communication");
n = function() {
var t;
return t = new XDomainRequest(), t.onload = function() {
return o(JSON.parse(t.responseText));
}, t.onerror = function() {
return "function" == typeof e.error ? e.error() : void 0;
}, t.open("get", r), t.send();
};
} else n = function() {
var t, i, n;
return t = "DropboxJsonpCallback" + _++, i = !1, I[t] = function(e) {
return i = !0, o(e);
}, n = document.createElement("script"), n.src = "" + r + "&callback=" + t, n.onreadystatechange = function() {
var t;
return "loaded" === n.readyState ? (i || "function" == typeof e.error && e.error(), 
null != (t = n.parentNode) ? t.removeChild(n) : void 0) : void 0;
}, document.getElementsByTagName("head")[0].appendChild(n);
};
return "function" == typeof e.progress && e.progress(0), n();
}, f = function(e, t, i) {
var n, a, o;
switch (n = JSON.parse(e.data), n.method) {
case "ready":
null != i.files && (o = JSON.stringify({
method: "files",
params: i.files
}), a = "undefined" != typeof b && null !== b && i._popup ? b.contentWindow : e.source, 
a.postMessage(o, Dropbox.baseUrl)), "function" == typeof i.ready && i.ready();
break;

case "files_selected":
case "files_saved":
"function" == typeof t && t(), "function" == typeof i.success && i.success(n.params);
break;

case "progress":
"function" == typeof i.progress && i.progress(n.params);
break;

case "close_dialog":
"function" == typeof t && t(), "function" == typeof i.cancel && i.cancel();
break;

case "web_session_error":
"function" == typeof t && t(), "function" == typeof i.webSessionFailure && i.webSessionFailure();
break;

case "web_session_unlinked":
"function" == typeof t && t(), "function" == typeof i.webSessionUnlinked && i.webSessionUnlinked();
break;

case "resize":
"function" == typeof i.resize && i.resize(n.params);
break;

case "error":
"function" == typeof t && t(), "function" == typeof i.error && i.error(n.params);
break;

case "job_id":
"function" == typeof t && t(), g(i, n.params);
break;

case "_debug_log":
"undefined" != typeof console && null !== console && console.log(n.params.msg);
}
}, b = null, l = function() {
/\bTrident\b/.test(navigator.userAgent) && (b = document.createElement("iframe"), 
b.setAttribute("id", "dropbox_xcomm"), b.setAttribute("src", Dropbox.baseUrl + "/static/api/1/xcomm.html"), 
b.style.display = "none", document.getElementsByTagName("body")[0].appendChild(b));
}, Dropbox.createChooserWidget = function(e) {
var t;
return t = d(r(e, !0)), t._handler = function(i) {
i.source === t.contentWindow && i.origin === Dropbox.baseUrl && f(i, null, e);
}, Dropbox.addListener(I, "message", t._handler), t;
}, Dropbox.cleanupWidget = function(e) {
if (!e._handler) throw new Error("Invalid widget!");
Dropbox.removeListener(I, "message", e._handler), delete e._handler;
}, y = function(e, t) {
var i, n;
return i = (I.screenX || I.screenLeft) + ((I.outerWidth || document.documentElement.offsetWidth) - e) / 2, 
n = (I.screenY || I.screenTop) + ((I.outerHeight || document.documentElement.offsetHeight) - t) / 2, 
"width=" + e + ",height=" + t + ",left=" + i + ",top=" + n;
}, Dropbox._dropinsjs_loaded ? void ("undefined" != typeof console && null !== console && "function" == typeof console.warn && console.warn("dropins.js included more than once")) : (Dropbox._dropinsjs_loaded = !0, 
null == (z = Dropbox.appKey) && (Dropbox.appKey = null != (j = document.getElementById("dropboxjs")) ? j.getAttribute("data-app-key") : void 0), 
S = function(e) {
return e;
}, t = "https://www.dropbox.com/developers/dropins/chooser/js", n = [ "text", "documents", "images", "video", "audio" ], 
Dropbox.init = function(e) {
null != e.translation_function && (S = e.translation_function), Dropbox.appKey = e.appKey;
}, d = function(e) {
var t;
return t = document.createElement("iframe"), t.src = e, t.style.display = "block", 
t.style.backgroundColor = "white", t.style.border = "none", t;
}, x = function(e) {
var t, i, n, a, o, r, s, l;
if ("string" == typeof e[0]) a = e.shift(), i = "string" == typeof e[0] ? e.shift() : m(a), 
n = {
files: [ {
url: a,
filename: i
} ]
}; else {
if (n = e.shift(), null == n) throw new Error("Missing arguments. See documentation.");
if ((null != (s = n.files) ? !s.length : !0) && "function" != typeof n.files) throw new Error("Missing files. See documentation.");
for (l = n.files, o = 0, r = l.length; r > o; o++) t = l[o], t.filename || (t.filename = m(t.url));
}
return n;
}, Dropbox.save = function() {
var e, t, i, n, a, o, r;
if (e = 1 <= arguments.length ? A.call(arguments, 0) : [], n = x(e), !Dropbox.isBrowserSupported()) return void alert(S("Your browser does not support the Dropbox Saver"));
if (n._popup = !0, "object" != typeof n.files || !n.files.length) throw new Error("Opening the saver failed. The object passed in must have a 'files' property that contains a list of objects.  See documentation.");
for (r = n.files, a = 0, o = r.length; o > a; a++) if (i = r[a], "string" != typeof i.url) throw new Error("File urls to download incorrectly configured.  Each file must have a url. See documentation.");
return t = y(352, 237), k(C(n), t, n);
}, k = function(e, t, i) {
var n, a, o, r, s;
if (n = function() {
r.closed || r.close(), Dropbox.removeListener(I, "message", a), clearInterval(s);
}, a = function(e) {
(e.source === r || e.source === (null != b ? b.contentWindow : void 0)) && f(e, n, i);
}, o = function() {
r.closed && (n(), "function" == typeof i.cancel && i.cancel());
}, r = I.open(e, "dropbox", "" + t + ",resizable=yes,location=yes"), !r) throw new Error("Failed to open a popup window. Dropbox.choose and Dropbox.save should only be called from within a user-triggered event handler such as a tap or click event.");
return r.focus(), s = setInterval(o, 100), Dropbox.addListener(I, "message", a), 
r;
}, T = function(e) {
var i, a, o, r, s;
if (null == e.success && "undefined" != typeof console && null !== console && "function" == typeof console.warn && console.warn("You must provide a success callback to the Chooser to see the files that the user selects"), 
a = function() {
return "undefined" != typeof console && null !== console && "function" == typeof console.warn && console.warn("The provided list of extensions or file types is not valid. See Chooser documentation: " + t), 
"undefined" != typeof console && null !== console && "function" == typeof console.warn && console.warn("Available file types are: " + n.join(", ")), 
delete e.extensions;
}, null != e.extensions) if ("[object Array]" === Object.prototype.toString.call(e.extensions)) for (s = e.extensions, 
o = 0, r = s.length; r > o; o++) i = s[o], !i.match(/^\.[\.\w$#&+@!()\-'`_~]+$/) && P.call(n, i) < 0 && a(); else a();
return e;
}, o = function(e) {
var t, i, n, a, o, s, l, c;
return Dropbox.isBrowserSupported() ? (c = 660, a = 440, void (e.iframe ? (l = d(r(e, !0)), 
l.style.width = c + "px", l.style.height = a + "px", s = document.createElement("div"), 
s.style.position = "fixed", s.style.left = s.style.right = s.style.top = s.style.bottom = "0px", 
s.style.zIndex = "1000", t = document.createElement("div"), t.style.position = "absolute", 
t.style.left = t.style.right = t.style.top = t.style.bottom = "0px", t.style.backgroundColor = "rgb(160, 160, 160)", 
t.style.opacity = "0.2", t.style.filter = "progid:DXImageTransform.Microsoft.Alpha(Opacity=20)", 
o = document.createElement("div"), o.style.position = "relative", o.style.width = c + "px", 
o.style.margin = "125px auto 0px auto", o.style.border = "1px solid #ACACAC", o.style.boxShadow = "rgba(0, 0, 0, .2) 0px 4px 16px", 
o.appendChild(l), s.appendChild(t), s.appendChild(o), document.body.appendChild(s), 
n = function(t) {
t.source === l.contentWindow && f(t, function() {
document.body.removeChild(s), Dropbox.removeListener(I, "message", n);
}, e);
}, Dropbox.addListener(I, "message", n)) : (i = y(c, a), k(r(e), i, e)))) : void alert(S("Your browser does not support the Dropbox Chooser"));
}, Dropbox.choose = function(e) {
null == e && (e = {}), e = T(e), o(e);
}, Dropbox.isBrowserSupported = function() {
var e;
return e = v(), Dropbox.isBrowserSupported = function() {
return e;
}, e;
}, v = function() {
var e, t, i, n;
for (n = [ /Windows Phone/, /BB10;/, /CriOS/ ], t = 0, i = n.length; i > t; t++) if (e = n[t], 
e.test(navigator.userAgent)) return !1;
return "undefined" == typeof JSON || null === JSON || null == I.postMessage ? !1 : !0;
}, p = function(e) {
return e.replace(/\/+$/g, "").split("/").pop();
}, m = function(e) {
var t;
return t = document.createElement("a"), t.href = e, p(t.pathname);
}, s = function(e, t) {
var i;
return null != t ? t.innerHTML = "" : (t = document.createElement("a"), t.href = "#"), 
t.className += " dropbox-dropin-btn", t.className += Dropbox.isBrowserSupported() ? " dropbox-dropin-default" : " dropbox-dropin-disabled", 
i = document.createElement("span"), i.className = "dropin-btn-status", t.appendChild(i), 
e = document.createTextNode(e), t.appendChild(e), t;
}, Dropbox.createChooseButton = function(e) {
var t;
return null == e && (e = {}), e = T(e), t = s(S("Choose from Dropbox")), Dropbox.addListener(t, "click", function(i) {
i.preventDefault(), o({
success: function(i) {
t.className = "dropbox-dropin-btn dropbox-dropin-success", "function" == typeof e.success && e.success(i);
},
cancel: e.cancel,
linkType: e.linkType,
multiselect: e.multiselect,
extensions: e.extensions,
iframe: e.iframe,
_trigger: "button"
});
}), t;
}, Dropbox.createSaveButton = function() {
var e, t, i;
return e = 1 <= arguments.length ? A.call(arguments, 0) : [], i = x(e), t = e.shift(), 
t = s(S("Save to Dropbox"), t), Dropbox.addListener(t, "click", function(e) {
var n;
return e.preventDefault(), t.className.indexOf("dropbox-dropin-error") >= 0 || t.className.indexOf("dropbox-dropin-default") >= 0 || t.className.indexOf("dropbox-dropin-disabled") >= 0 ? (n = ("function" == typeof i.files ? i.files() : void 0) || i.files, 
(null != n ? n.length : void 0) ? void Dropbox.save({
files: n,
success: function() {
t.className = "dropbox-dropin-btn dropbox-dropin-success", "function" == typeof i.success && i.success();
},
progress: function(e) {
t.className = "dropbox-dropin-btn dropbox-dropin-progress", "function" == typeof i.progress && i.progress(e);
},
cancel: function() {
"function" == typeof i.cancel && i.cancel();
},
error: function(e) {
t.className = "dropbox-dropin-btn dropbox-dropin-error", "function" == typeof i.error && i.error(e);
}
}) : (t.className = "dropbox-dropin-btn dropbox-dropin-error", void ("function" == typeof i.error && i.error("Missing files")))) : void 0;
}), t;
}, w = function(e, t) {
return "background: " + e + ";\nbackground: -moz-linear-gradient(top, " + e + " 0%, " + t + " 100%);\nbackground: -webkit-linear-gradient(top, " + e + " 0%, " + t + " 100%);\nbackground: linear-gradient(to bottom, " + e + " 0%, " + t + " 100%);\nfilter: progid:DXImageTransform.Microsoft.gradient(startColorstr='" + e + "', endColorstr='" + t + "',GradientType=0);";
}, c = document.createElement("style"), c.type = "text/css", u = '@-webkit-keyframes rotate {\n  from  { -webkit-transform: rotate(0deg); }\n  to   { -webkit-transform: rotate(360deg); }\n}\n\n@keyframes rotate {\n  from  { transform: rotate(0deg); }\n  to   { transform: rotate(360deg); }\n}\n\n.dropbox-dropin-btn, .dropbox-dropin-btn:link, .dropbox-dropin-btn:hover {\n  display: inline-block;\n  height: 14px;\n  font-family: "Lucida Grande", "Segoe UI", "Tahoma", "Helvetica Neue", "Helvetica", sans-serif;\n  font-size: 11px;\n  font-weight: 600;\n  color: #636363;\n  text-decoration: none;\n  padding: 1px 7px 5px 3px;\n  border: 1px solid #ebebeb;\n  border-radius: 2px;\n  border-bottom-color: #d4d4d4;\n  ' + w("#fcfcfc", "#f5f5f5") + "\n}\n\n.dropbox-dropin-default:hover, .dropbox-dropin-error:hover {\n  border-color: #dedede;\n  border-bottom-color: #cacaca;\n  " + w("#fdfdfd", "#f5f5f5") + "\n}\n\n.dropbox-dropin-default:active, .dropbox-dropin-error:active {\n  border-color: #d1d1d1;\n  box-shadow: inset 0 1px 1px rgba(0,0,0,0.1);\n}\n\n.dropbox-dropin-btn .dropin-btn-status {\n  display: inline-block;\n  width: 15px;\n  height: 14px;\n  vertical-align: bottom;\n  margin: 0 5px 0 2px;\n  background: transparent url('" + Dropbox.baseUrl + "/static/images/widgets/dbx-saver-status.png') no-repeat;\n  position: relative;\n  top: 2px;\n}\n\n.dropbox-dropin-default .dropin-btn-status {\n  background-position: 0px 0px;\n}\n\n.dropbox-dropin-progress .dropin-btn-status {\n  width: 18px;\n  margin: 0 4px 0 0;\n  background: url('" + Dropbox.baseUrl + "/static/images/widgets/dbx-progress.png') no-repeat center center;\n  -webkit-animation-name: rotate;\n  -webkit-animation-duration: 1.7s;\n  -webkit-animation-iteration-count: infinite;\n  -webkit-animation-timing-function: linear;\n  animation-name: rotate;\n  animation-duration: 1.7s;\n  animation-iteration-count: infinite;\n  animation-timing-function: linear;\n}\n\n.dropbox-dropin-success .dropin-btn-status {\n  background-position: -15px 0px;\n}\n\n.dropbox-dropin-disabled {\n  background: #e0e0e0;\n  border: 1px #dadada solid;\n  border-bottom: 1px solid #ccc;\n  box-shadow: none;\n}\n\n.dropbox-dropin-disabled .dropin-btn-status {\n  background-position: -30px 0px;\n}\n\n.dropbox-dropin-error .dropin-btn-status {\n  background-position: -45px 0px;\n}\n\n@media only screen and (-webkit-min-device-pixel-ratio: 1.4) {\n  .dropbox-dropin-btn .dropin-btn-status {\n    background-image: url('" + Dropbox.baseUrl + "/static/images/widgets/dbx-saver-status-2x.png');\n    background-size: 60px 14px;\n    -webkit-background-size: 60px 14px;\n  }\n\n  .dropbox-dropin-progress .dropin-btn-status {\n    background: url('" + Dropbox.baseUrl + "/static/images/widgets/dbx-progress-2x.png') no-repeat center center;\n    background-size: 20px 20px;\n    -webkit-background-size: 20px 20px;\n  }\n}\n\n.dropbox-saver:hover, .dropbox-chooser:hover {\n  text-decoration: none;\n  cursor: pointer;\n}\n\n.dropbox-chooser, .dropbox-dropin-btn {\n  line-height: 11px !important;\n  text-decoration: none !important;\n  box-sizing: content-box !important;\n  -webkit-box-sizing: content-box !important;\n  -moz-box-sizing: content-box !important;\n}\n", 
c.styleSheet ? c.styleSheet.cssText = u : c.textContent = u, document.getElementsByTagName("head")[0].appendChild(c), 
setTimeout(l, 0), i = function() {
return document.removeEventListener ? document.removeEventListener("DOMContentLoaded", i, !1) : document.detachEvent && document.detachEvent("onreadystatechange", i), 
h();
}, "complete" === document.readyState ? setTimeout(i, 0) : document.addEventListener ? document.addEventListener("DOMContentLoaded", i, !1) : document.attachEvent("onreadystatechange", i), 
Dropbox.VERSION = "2", void (h = function() {
var e, t, i, n;
for (n = document.getElementsByTagName("a"), t = 0, i = n.length; i > t; t++) e = n[t], 
P.call((e.getAttribute("class") || "").split(" "), "dropbox-saver") >= 0 && !function(e) {
Dropbox.createSaveButton({
files: function() {
return [ {
url: e.getAttribute("data-url") || e.href,
filename: e.getAttribute("data-filename") || p(e.pathname)
} ];
}
}, e);
}(e);
}));
}.call(e), e.Dropbox;
}), define("views/TaskDetail/Files/Controllers/DropboxDropInsController", [ "application/runtime", "actions/Factory", "wunderbits/helpers/date", "vendor/dropboxDropIns", "wunderbits/WBViewController" ], function(e, t, i, n, a) {
n.init({
appKey: "l42m5s3zw1vruc3"
});
var o = a.prototype;
return a.extend({
"implements": {
"click:dropbox": "onClickDropBox"
},
initialize: function() {
var e = this;
e.allFiles = t.fileLookup().allFiles, e.setupDropInsOptions(), o.initialize.apply(e, arguments);
},
setupDropInsOptions: function() {
var e = this;
e.dropInsOptions = {
success: e.onDropboxAttached.bind(e),
cancel: e.onDropboxCancelled.bind(e),
linkType: "preview",
multiselect: !0
};
},
onDropboxAttached: function(e) {
var t = this;
e.forEach(t.saveFile.bind(t));
},
onDropboxCancelled: function() {
console.debug("dropbox canceled");
},
onClickDropBox: function() {
n.choose(this.dropInsOptions);
},
saveFile: function(t) {
var n = this, a = n.view.taskModel, o = i.getServerNow();
n.allFiles.add({
file_provider: "dropbox",
content_type: "application/octet-stream",
file_name: t.name,
file_size: t.bytes,
file_icon: t.icon,
url: t.link,
task_id: a.id,
user_id: e.user.id,
created_at: o,
local_created_at: o,
state: 2
});
}
});
}), define("views/TaskDetail/Files/DropboxDropInsView", [ "application/runtime", "wunderbits/WBViewPresenter", "./Controllers/DropboxDropInsController" ], function(e, t, i) {
var n = t.prototype;
return t.extend({
tagName: "span",
className: "icon-file files-add-dropbox right",
"implements": [ i ],
attributes: {
tabindex: 0,
role: "button",
"data-key-aria-label": "voiceover_add_file_dropbox_button"
},
emits: {
click: "click:dropbox"
},
initialize: function(e) {
var t = this;
t.setTaskModel(e.taskModel), n.initialize.apply(t, arguments);
},
render: function() {
var e = this;
return n.render.apply(e, arguments), e.renderAriaAttributes(), e;
},
setTaskModel: function(e) {
this.taskModel = e;
}
});
}), define("views/TaskDetail/Controllers/TaskDetailFilesController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/helpers/date", "helpers/Animator", "wunderbits/WBViewController" ], function(e, t, i, n, a) {
var o = e.$;
return a.extend({
"implements": {
"click:clippy": "onClickClippy",
"click:filesToggle": "onStackfiles",
"click:recordFile": "onClickShowAudioRecorder",
"keydown:addFiles": "onAddFilesKeydown",
"keydown:listFiles": "onListFilesKeydown",
"route:listComments": "onRouteListComments"
},
onRouteListComments: function() {
e.trigger("route:" + this.view.model.route("/listComments/focus"));
},
onClickClippy: function() {
this.view.fileSelectorView.$el.click();
},
onAddFilesKeydown: function(i) {
var n = this, a = n.view, r = a.$(".attachment-icons span").not(".hidden");
i.which === t.enter ? (o(i.target).click(), n.stopEventFully(i)) : i.which !== t.tab || i.shiftKey ? i.which === t.tab && i.shiftKey && (e.trigger("update:direction", "prev"), 
0 === a.currentUploaderNum ? e.trigger("route:" + a.model.route("/openFullscreenNote/focus")) : a.focusPrevUploader(), 
n.stopEventFully(i)) : (e.trigger("update:direction", "next"), r.length - 1 === a.currentUploaderNum ? e.trigger("route:" + a.model.route("/listFiles/focus")) : a.focusNextUploader(), 
n.stopEventFully(i));
},
onListFilesKeydown: function(i) {
var n = this, a = n.view;
i.which === t.enter ? (o(i.target).click(), n.stopEventFully(i)) : i.which !== t.tab || i.shiftKey ? i.which === t.tab && i.shiftKey ? (e.trigger("update:direction", "prev"), 
e.trigger("route:" + a.model.route("/addFile/focus")), n.stopEventFully(i)) : i.which === t.up ? a.focusPrevItem() : i.which === t.down && a.focusNextItem() : (e.trigger("update:direction", "next"), 
e.trigger("route:" + a.model.route("/listComments/focus")), n.stopEventFully(i));
},
onFocusSelf: function() {
this.view.focusSelf();
},
onStackfiles: function() {
this.view.stackFiles();
},
onClickShowAudioRecorder: function() {
this.view.showAudioRecorder();
}
});
}), define("views/TaskDetail/Controllers/FilesContextMenuController", [ "wunderbits/ContextMenuController" ], function(e, t) {
return e.extend({
type: "files",
"implements": {},
items: {
label_open_file: t,
label_delete_file: t
},
getContextMenuKeys: function() {
return [ "label_open_file", "label_delete_file" ];
}
});
}), define("/templates/detailview/files.js", {
name: "detailview/files",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return '<a class="files-add">  <div class="files-add-label"> ' + r((a = t.localized || e && e.localized || o, 
a.call(e, "label_add_new_file", {
name: "localized",
hash: {},
data: n
}))) + ' </div> <div class="attachment-icons"> <span tabindex="0" aria-label="Add voice record" role="button" class="icon-file files-add-record hidden right"/> <span tabindex="0" aria-label="Add local file" role="button" class="wundercon clippy files-add-clippy right"/> </div> </a> <div class="files-addFocus"></div>  <div class="audio-recorder hidden"/>  <ul class="files-list"></ul> ';
},
useData: !0
}
}), define("/styles/detailview/_files.js", {
name: "detailview/_files",
data: ".dropTarget{display:none}.drop .dropTarget{display:block}#detail .inner.drop > .dropTarget{position:absolute;top:0;left:0;right:0;bottom:0;z-index:9999}#detail .inner.drop .files .files-add{color:#186ab2}.files{position:relative;width:100%;margin-bottom:10px;}.files .files-add{display:inline-block;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-size:13px;color:#737272;text-shadow:0 1px 0 rgba(255,255,255,0.64);padding-left:18px;margin-bottom:9px;}.files .files-add:hover{color:#737272}.files .files-add:focus,.files .files-add:active{color:#73b0e5}.files .files-add.offline .files-add-record,.files .files-add.notSynced .files-add-record{display:none}.files .files-add .attachment-icons{position:absolute;top:8px;right:0;}.files .files-add .attachment-icons span{margin:0 4px}.files .files-add .attachment-icons .files-add-record{display:block}.files .files-add .attachment-icons .files-add-clippy{color:#bbb;font-size:24px;display:block;margin-top:2px;width:25px;}.files .files-add .attachment-icons .files-add-clippy:hover{color:#666}.files .files-add .attachment-icons .files-add-dropbox{margin-top:1px}.files .files-add .files-add-label{cursor:pointer;padding:12px 0;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.files .files-addFocus{-webkit-box-shadow:0 0 5px rgba(24,106,178,0.3),inset 0 0 0 1px rgba(24,106,178,0.6);box-shadow:0 0 5px rgba(24,106,178,0.3),inset 0 0 0 1px rgba(24,106,178,0.6);position:absolute;top:-2px;left:-1px;right:-1px;height:44px;-webkit-border-radius:8px;border-radius:8px;display:none}html[dir=rtl] .files .files-add{padding-left:0;padding-right:18px;}html[dir=rtl] .files .files-add .attachment-icons{right:initial;left:0}"
}), define("views/TaskDetail/TaskDetailFilesView", [ "application/runtime", "actions/Factory", "vendor/moment", "wunderbits/helpers/date", "wunderbits/helpers/strings", "wunderbits/WBViewPresenter", "views/TaskDetail/TaskDetailFileView", "views/TaskDetail/TaskDetailRecordAudioFileView", "views/TaskDetail/Files/DropboxDropInsView", "wunderbits/views/WBFileSelectorView", "./Controllers/TaskDetailFilesController", "./Controllers/FilesContextMenuController", "template!detailview/files", "style!detailview/_files", "style!_fileupload" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m, g) {
var f = e.$, b = e._, h = e.global, v = h.Blob, _ = o.prototype, w = !!e.global.Blob;
return o.extend({
className: "files",
styles: [ m, g ],
template: p,
attributes: {
tabindex: 0
},
"implements": [ c, u ],
observes: {
runtime: {
"focus:listFiles": "focusFirstFile",
"file:delete": "deleteFile"
}
},
emits: {
"contextmenu li .file": "contextmenu:files",
"click .files-add-clippy": "click:clippy",
"click .files-toggle": "click:filesToggle",
"click .files-add-record": "click:recordFile",
"keydown .files-add": "keydown:addFiles",
"keydown .files-list .file": "keydown:listFiles"
},
initialize: function() {
var e = this;
_.initialize.apply(e, arguments), e.fileLookup = t.fileLookup(), e.allFiles = e.fileLookup.allFiles, 
e.currentItemNum = 0, e.currentUploaderNum = 0, e.uploaders = [ ".files-add-clippy", ".files-add-dropbox:not(.hidden)", ".files-add-record:not(.hidden)" ];
},
render: function(e) {
var t = this;
return t.currentItemNum = 0, t.currentUploaderNum = 0, t.model && t.unbindFromTarget(t.model), 
t.collectionBind && t.unbindFrom(t.collectionBind), t.productBind && t.unbindFrom(t.productBind), 
t.audioBind && t.unbindFrom(t.audioBind), t.model = e.model || t.model, t.model ? (e.animationDeferred.done(function() {
t.requestAnimationFrame(function() {
t.setupCollectionbinds(), _.render.apply(t, arguments), t.renderFileSelector(), 
t.renderFilesCollectionViews(), t.renderAudioRecorder(), t.renderFileSelectorPlaceholder(), 
t.renderDropboxDropInsView();
});
}), t) : t;
},
setupCollectionbinds: function() {
var t = this;
t.collection = t.fileLookup.getFileCollection(t.model.id), t.collectionBind = t.bindTo(t.collection, "add", t.onAddFile), 
t.productBind = t.bindTo(e.user, "change:pro", function() {
t.proPopoverBind && t.unbindFrom(t.proPopoverBind), !t.fileSelectorView && t.renderFileSelector(), 
!t.audioRecorderView && t.renderAudioRecorder(), t.audioRecorderView && t.audioRecorderView.$el.removeClass("hidden"), 
t.$(".files-add-record").removeClass("hidden");
});
},
renderFilesCollectionViews: function() {
var e = this;
b.each(e._namedSubviews, function(t, i) {
"audioRecorderView" !== i && "selectorView" !== i && "dropboxView" !== i && e.destroySubview(t);
});
var t = document.createDocumentFragment();
e.collection.models.length && b.each(e.collection.models, function(i) {
var n = e.getRenderedFileView(i).el;
t.appendChild(n);
}), e.$(".files-list").append(t);
},
renderAudioRecorder: function() {
var t = this;
e.env.isUserMediaSupported() && (t.$(".files-add-record").removeClass("hidden"), 
t.audioRecorderView ? t.audioRecorderView.setModel(t.model) : (t.audioRecorderView = t.addSubview(new s({
taskModel: t.model
}), "audioRecorderView"), t.audioRecorderView.render()), t.audioBind && t.unbindFrom(t.audioBind), 
t.audioBind = t.bindTo(t.audioRecorderView, "upload:audioFile", function(i) {
t._upload(i), t.$(".files-add").removeClass("hidden"), t.$(".audio-recorder").addClass("hidden"), 
e.trigger("analytics:Files:UploadType", "browserRecordedAudio");
}), t.audioClearBind && t.unbindFrom(t.audioClearBind), t.audioClearBind = t.bindTo(t.audioRecorderView, "recording:clear", function() {
t.$(".files-add").removeClass("hidden"), t.$(".audio-recorder").addClass("hidden"), 
t.resetAudioRecorder();
}), t.$(".audio-recorder").append(t.audioRecorderView.el));
},
focusNextItem: function() {
var e = this, t = e.$(".file");
e.currentItemNum < t.length - 1 && (e.currentItemNum += 1, f(t.get(e.currentItemNum)).focus());
},
focusPrevItem: function() {
var t = this, i = t.$(".file");
t.currentItemNum > 0 ? (t.currentItemNum -= 1, f(i.get(t.currentItemNum)).focus()) : 0 === t.currentItemNum && 1 === i.length && e.trigger("route:" + t.model.route("addFile/focus"));
},
focusFirstUploader: function() {
var e = this;
e.currentUploaderNum = 0, e.$(e.uploaders[e.currentUploaderNum]).focus();
},
focusNextUploader: function() {
var e = this;
e.currentUploaderNum < e.uploaders.length - 1 && (e.currentUploaderNum += 1, e.$(e.uploaders[e.currentUploaderNum]).focus());
},
focusPrevUploader: function() {
var e = this;
e.currentUploaderNum > 0 && (e.currentUploaderNum -= 1, e.$(e.uploaders[e.currentUploaderNum]).focus());
},
getRenderedFileView: function(e) {
var t = this, i = t.getSubview(e.id);
return i || (i = new r({
model: e,
collection: t.collection
}), i = t.addSubview(i, e.id).render()), i;
},
renderFileSelector: function() {
var t = this, i = t.$(".files-add-label");
if (!t.fileSelectorView) {
var n = f("#detail > .inner"), a = new d({
dropTarget: n,
urlBlocker: "preferences/account"
});
t.fileSelectorView = t.addSubview(a, "selectorView"), t.bindTo(t.fileSelectorView, "selected:files", t._uploadMultiple.bind(t)), 
t.bindTo(t.fileSelectorView, "dropped:text", t._uploadText.bind(t));
}
t.fileSelectorView.setElement(i);
var o = e.language.getLabel("label_add_new_file").toString();
t.$(".files-add-label").html(o), t.renderLabels();
},
renderFileSelectorPlaceholder: function() {
var t, i = this, n = e.language.getLabel("label_add_new_file").toString(), a = i.$(".files-add-label"), o = a.find("text");
o ? o.replaceWith(n) : a.append(n), i.renderLabels(), i.$(".files-add").removeClass("offline notSynced").addClass(t);
},
renderDropboxDropInsView: function() {
var t = this;
!e.env.isChromeApp() && e.user.showSocialButtons() && (t.dropboxView ? t.dropboxView.setTaskModel(t.model) : t.dropboxView = t.addSubview(new l({
taskModel: t.model
}), "dropboxView"), t.dropboxView.render(), t.$(".files-add-clippy").before(t.dropboxView.el));
},
_uploadMultiple: function(e) {
var t = this;
b.each(e, t._upload.bind(t)), t.renderFileSelector();
},
_upload: function(t) {
var i = this;
if (t && i.isDetailViewOpen()) {
var a = t.name, o = n.getServerNow();
i.allFiles.add({
created_at: o,
local_created_at: o,
file_name: a,
content_type: i.getFixedFileType(t.type),
task_id: i.model.id,
user_id: e.user.id
}, {
task: i.model,
file: t
});
}
},
getFixedFileType: function(e) {
var t = /^text\//, i = e || "application/octet-stream";
return t.test(i) && (i += "; charset=utf-8"), i;
},
_uploadText: function(e) {
var t = this;
if (e.length && w) {
var i = new v([ e ], {
type: "text/plain"
});
i.name = a.dateString() + ".txt", t._upload(i);
}
},
focusFirstFile: function(t) {
var i = this;
t = t || "next";
var n = i.$(".file");
0 === n.length ? "next" === t ? i.trigger("route:listComments", t) : e.trigger("route:" + i.model.route("addFile/focus")) : i.$(".file:first").focus();
},
focusCurrentItem: function() {
var t = this, i = t.$(".file"), n = i.get(t.currentItemNum);
n ? n.focus() : e.trigger("route:" + t.model.route("addFile/focus"));
},
onAddFile: function(t, n, a) {
var o = this, r = o.getRenderedFileView(t);
a.uploader && r.setUploader(a.uploader);
var s = o.$(".files-list");
o.collection.sort();
var l = o.collection.models, d = i(t.attributes.created_at).valueOf(), c = t.attributes.file_name.toLowerCase(), u = b.find(l.reverse(), function(e) {
return d < i(e.attributes.created_at).valueOf();
}), p = b.find(l.reverse(), function(e) {
return d > i(e.attributes.created_at).valueOf();
}), m = b.find(l.reverse(), function(e) {
var t = d === i(e.attributes.created_at).valueOf();
return t && c > e.attributes.file_name.toLowerCase();
}), g = b.find(l.reverse(), function(e) {
var t = d === i(e.attributes.created_at).valueOf();
return t && c < e.attributes.file_name.toLowerCase();
});
u = m ? m : u, p = g ? g : p;
var f = p && s.find("li[rel=" + p.id + "]"), h = u && s.find("li[rel=" + u.id + "]");
h && h.length ? h.after(r.el) : f && f.length && (!h || h && !h.length) ? f.before(r.el) : s.append(r.el), 
e.trigger("detail:checkBounds");
},
deleteFile: function() {
var e = this, t = e.$(".file").get(e.currentItemNum), i = f(t).parent("li").attr("rel"), n = e.getSubview(i);
n.trigger("delete:file", !1, {
confirm: function() {
e.focusPrevItem();
},
cancel: function() {
e.focusCurrentItem();
}
});
},
stackFiles: function() {
var e = this;
e.$(".file").removeClass("selected"), e.$el.toggleClass("collapsed");
},
showAudioRecorder: function() {
var e = this;
e.$(".audio-recorder").removeClass("hidden"), e.$(".files-add").addClass("hidden"), 
e.$(".start-recording-audio").focus();
},
resetAudioRecorder: function() {
var e = this;
e.$(".files-add-record").focus();
},
isDetailViewOpen: function() {
return h.location.href.indexOf("/tasks/") >= 0;
}
});
}), define("views/TaskDetail/Controllers/TaskDetailSubTaskItemViewController", [ "application/runtime", "wunderbits/WBViewController" ], function(e, t) {
return t.extend({
"implements": {
"click:done": "onToggleDone",
"click:title": "onClickToEdit",
"click:delete": "onDelete"
},
onToggleDone: function() {
var e = this.view;
e.model.save("completed", !e.model.isCompleted());
},
onClickToEdit: function() {
this.view.showEditMode();
},
onDelete: function(t) {
var i = this.view, n = "true" === e.settings.attributes.confirm_delete_entity, a = function() {
i.destroyed || (i.model.destroy(), i.destroy(), t && t.confirm && t.confirm());
};
n ? e.trigger("modal:confirm", {
customTitle: e.language.getLabel("label_are_you_sure_permanently_delete_$_subtask", i.model.escape("title")).toString(),
customText: e.language.getLabel("label_cant_undo").toString(),
confirmText: e.language.getLabel("label_delete_subtask").toString(),
confirm: a,
cancel: t && t.cancel
}) : a();
}
});
}), define("/templates/detailview/detailSubTask.js", {
name: "detailview/detailSubTask",
data: {
"1": function() {
return "checked";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = '<div class="line-wrap"> <span class="checkBox small ';
return a = t["if"].call(e, e && e.completed, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l + '"/> <a class="detail-delete"> ' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "delete", {
name: "symbol",
hash: {},
data: n
}))) + ' </a> <div class="subtask-title selectable"></div> </div> ';
},
useData: !0
}
}), define("views/TaskDetail/TaskDetailSubTaskItemView", [ "application/runtime", "wunderbits/helpers/selection", "wunderbits/WBValidationHelper", "views/TaskDetail/Controllers/TaskDetailSubTaskItemViewController", "wunderbits/WBContentFakable", "wunderbits/WBViewPresenter", "template!detailview/detailSubTask" ], function(e, t, i, n, a, o, r, s) {
var l = e.$, d = o.prototype;
return o.extend({
template: r,
tagName: "li",
className: "subtask",
"implements": [ n ],
attributes: {
tabindex: 0
},
emits: {
"click .checkBox": "click:done",
"click .subtask-title": "click:title",
"click a.detail-delete": "click:delete"
},
initialize: function(e) {
var t = this;
d.initialize.apply(t, arguments), e = e || {}, t.parent = e.parent || t.parent, 
t.model = e.model || t.model, t.parentCollection = e.collection || t.collection, 
t.contentFakable = t.addSubview(new a({
lineHeight: 20,
fontSize: 13
}));
},
renderData: {
completed: s
},
formatdata: function(e) {
return e.completed = this.model.isCompleted(), e;
},
render: function(e) {
return this.setModelAndRender(e);
},
setModelAndRender: function(e) {
var t = this;
return e = e || {}, t.options = e, t.parent = e.parent || t.parent, t.model = t.options.model || t.model, 
d.render.call(t, t.formatdata(t.renderData)), t.renderAriaLabel(), t.model.isCompleted() && t.$el.addClass("done"), 
t.$el.attr("rel", t.model.id), t.$(".subtask-title")[0].appendChild(t.contentFakable.render({
context: t,
content: t.model.attributes.title,
maxLength: 255,
autoSave: !1,
convertLinks: !0,
saveOnEnter: !0,
multiLine: !0,
showLoading: !1,
scrollContainer: l("#detail .body"),
markupDelay: t.options.delay || 0
}).el), t.bindTo(t.contentFakable.model, "change:content", t.onSaveChanges), t.bindTo(t.model, "change:completed", t.onUpdateDone), 
t.bindTo(t.model, "change:title", t.updateTitleFromSync), t;
},
scrollCheck: function() {
var e = this;
e.contentFakable.scrollCheck();
},
updateTitleFromSync: function() {
var e = this;
e.$(".edit-view").hasClass("hidden") && e.contentFakable.model.attributes.content !== e.model.attributes.title && e.contentFakable.model.set({
content: e.model.attributes.title
}), e.renderAriaLabel();
},
renderAriaLabel: function() {
var t = this, i = t.model.attributes.title, n = e.language.getText("aria_subtask"), a = "", o = t.parentCollection.models.indexOf(t.model);
if (0 === o) {
var r = e.language.getText("aria_press_enter_to_edit"), s = e.language.getText("aria_press_$_to_complete", e.settings.attributes.shortcut_mark_task_done), l = e.language.getText("aria_press_$_to_complete", e.settings.attributes.shortcut_delete), d = e.language.getText("aria_subtask_navigation_info");
a += r + s + l + d;
}
t.$el.attr("aria-label", i + " - " + n + a);
},
showEditMode: function(e) {
var i = this, n = !1;
if (e && (n = l(e.target).is("span")), !n && (i.contentFakable.onShowEditMode(), 
e)) {
var a = i.$("textarea");
t.setCaretToPos(a[0], a.val().length);
}
i.triggerFocusChange();
},
onUpdateDone: function() {
var e = this, t = e.$(".checkBox"), i = e.model.isCompleted();
i ? (t.addClass("checked"), e.$el.addClass("done")) : (t.removeClass("checked"), 
e.$el.removeClass("done"));
},
onSaveChanges: function() {
var e = this, t = e.contentFakable.model.attributes.content;
t ? e.model.save("title", t) : e.contentFakable.model.set("content", e.model.attributes.title);
},
triggerFocusChange: function() {
e.trigger("focus:set", "detail");
}
});
}), define("views/TaskDetail/Controllers/TaskDetailSubTaskAddViewController", [ "application/runtime", "actions/Factory", "wunderbits/data/keycodes", "wunderbits/helpers/strings", "wunderbits/WBViewController" ], function(e, t, i, n, a) {
var o = a.prototype;
return a.extend({
"implements": {
"click:title": "onShowEditMode",
"keydown:textedit": "onTaskEditKeydown",
"blur:textedit": "onTaskEditBlur",
"focus:textedit": "onTaskEditFocus"
},
initialize: function() {
var e = this;
o.initialize.apply(e, arguments), e.subTaskLookup = t.subTaskLookup(), e.createSubtask = t.createSubtask();
},
onShowEditMode: function() {
var e = this.view;
e.model && e.showEditMode();
},
onSaveChanges: function() {
var t = this, i = t.view, a = i.model.id, o = i.getTextInput(), r = i.getRenderedSubtasksCount();
if (o.length > 0 && (25 > r || e.user.isPro)) {
o = n.emojiTokensToUnicode(o);
var s = t.subTaskLookup.getSubTaskCollection(a), l = s.getNewBottomPosition();
t.createSubtask.createSubtask(o, l, a), i.resetTextInputs();
}
},
onTaskEditKeydown: function(e) {
var t = this, n = t.view;
if (e.which === i.esc) n.cancelChanges(); else if (e.which === i.enter) {
if (e.shiftKey) return;
e.preventDefault(), t.onSaveChanges(), n.showEditMode();
} else e.which === i.tab && (n.fromTab = !0, t.stopEventFully(e));
},
onTaskEditBlur: function() {
var t = this;
t.onSaveChanges(), t.view.onHideEditMode(), t.defer(function() {
e.trigger("route:" + t.view.model.route("/addSubtasks/focus"));
});
},
onTaskEditFocus: function() {
var t = this;
t.defer(function() {
e.trigger("route:" + t.view.model.route("/listSubtasks/edit"), {
trigger: !1
});
});
}
});
}), define("/templates/symbols/plus-small.js", {
name: "symbols/plus-small",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<svg class="plus-small" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>plus-small</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="plus-small" sketch:type="MSArtboardGroup" > <path d="M10.5,9.5 L10.5,3 C10.5,2.72 10.28,2.5 10,2.5 C9.72,2.5 9.5,2.72 9.5,3 L9.5,9.5 L3,9.5 C2.72,9.5 2.5,9.72 2.5,10 C2.5,10.28 2.72,10.5 3,10.5 L9.5,10.5 L9.5,17 C9.5,17.28 9.72,17.5 10,17.5 C10.28,17.5 10.5,17.28 10.5,17 L10.5,10.5 L17,10.5 C17.28,10.5 17.5,10.28 17.5,10 C17.5,9.72 17.28,9.5 17,9.5 L10.5,9.5 Z" id="," sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/detailview/detailSubTaskAdd.js", {
name: "detailview/detailSubTaskAdd",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return '<div class="line-wrap"> ' + r((a = t.symbol || e && e.symbol || o, a.call(e, "plus-small", {
name: "symbol",
hash: {},
data: n
}))) + ' <div class="subtask-title">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "placeholder_add_subtask", {
name: "localized",
hash: {},
data: n
}))) + '</div> <div class="subtask-edit hidden"> </div> ';
},
useData: !0
}
}), define("views/TaskDetail/TaskDetailSubTaskAddView", [ "application/runtime", "views/TaskDetail/Controllers/TaskDetailSubTaskAddViewController", "wunderbits/WBExpandableTextareaView", "wunderbits/WBViewPresenter", "partial!symbols/plus-small", "template!detailview/detailSubTaskAdd" ], function(e, t, i, n, a, o) {
var r = e.$, s = n.prototype;
return n.extend({
template: o,
className: "addtask",
"implements": [ t ],
attributes: {
tabindex: 0,
role: "input",
"data-key-aria-label": "placeholder_add_subtask"
},
emits: {
"click .subtask-title": "click:title",
"keydown .subtask-edit textarea": "keydown:textedit",
"blur .subtask-edit textarea": "blur:textedit",
"focus .subtask-edit textarea": "focus:textedit"
},
initialize: function(e) {
var t = this;
s.initialize.apply(t, arguments), t.options = e || {}, t.options.lineHeight = 21, 
t.textareaView = t.addSubview(new i(t.options));
},
setModelAndRender: function(e) {
var t, i = this;
return i.model = e || i.model, t = i.model.toJSON(), s.render.call(i, t), i.$(".subtask-edit")[0].appendChild(i.textareaView.render({
content: "",
maxLength: 255,
placeholderKey: "placeholder_add_subtask"
}).el), i;
},
setModel: function(e) {
var t = this;
t.model = e;
},
showEditMode: function() {
var t = this, i = t.$(".subtask-edit"), n = t.$(".subtask-title");
t.$el.css({
position: "relative",
width: ""
}), t.$el.parent().css("padding-bottom", "0"), n.addClass("hidden"), e.trigger("route:" + t.model.route("/subtasks/edit"), {
trigger: !1
}), i.removeClass("hidden").find("textarea").val("").focus(), t.triggerFocusChange();
},
onHideEditMode: function(t) {
var i, n = this, a = n.$(".subtask-edit"), o = n.$(".subtask-title");
o.removeClass("hidden"), a.addClass("hidden"), n.fromTab || t || (i = !0), t ? e.trigger("route:" + n.model.route("/subtasks/focus")) : n.silentRouteToTask(t, i);
},
cancelChanges: function() {
var e = this;
e.$("textarea").val(""), e.onHideEditMode(!0);
},
getTextInput: function() {
var e = this;
return r.trim(e.$("textarea").val());
},
resetTextInputs: function() {
var e = this;
e.$("textarea").val(""), e.$("pre").text('""');
},
getRenderedSubtasksCount: function() {
var e = this;
return e.$el.parent("ul").find("li").not(".addtask").size();
},
silentRouteToTask: function(t, i) {
var n = this, a = "tasks/" + n.model.id, o = e.currentRoute().indexOf(a) >= 0;
o ? e.trigger("route:" + a, {
trigger: !1
}) : (t || i) && e.trigger("route:" + a), n.fromTab = !1;
},
triggerFocusChange: function() {
e.trigger("focus:set", "detail");
}
});
}), define("/styles/detailview/_subtasks.js", {
name: "detailview/_subtasks",
data: '.subtasks{background:#fff;border:1px solid rgba(0,0,0,0.16);-webkit-box-shadow:0 1px 2px rgba(0,0,0,0.06);box-shadow:0 1px 2px rgba(0,0,0,0.06);position:relative;margin-bottom:10px;-webkit-border-radius:3px;border-radius:3px;}.subtasks.buffer{padding-bottom:38px}.subtasks:focus li{z-index:500;}.subtasks:focus li:before,.subtasks:focus li:after{top:1px;bottom:1px}.subtasks li,.subtasks .addtask{position:relative;background-color:#fff;-webkit-border-radius:3px;border-radius:3px;}.subtasks li .line-wrap,.subtasks .addtask .line-wrap{border-bottom:1px solid rgba(0,0,0,0.12);}.subtasks li .line-wrap a,.subtasks .addtask .line-wrap a{color:#186ab2}.subtasks li textarea,.subtasks .addtask textarea{-webkit-box-shadow:none;box-shadow:none}.subtasks li:before,.subtasks .addtask:before,.subtasks li:after,.subtasks .addtask:after{position:absolute;left:38px;top:0;bottom:0;content:"";border-left:1px solid #eddddd}.subtasks li:after,.subtasks .addtask:after{left:40px}.subtasks li:last-child,.subtasks .addtask:last-child{border:none}.subtasks li .subtask-title,.subtasks .addtask .subtask-title,.subtasks li .subtask-edit,.subtasks .addtask .subtask-edit{min-height:20px;font-size:13px;line-height:20px;word-wrap:break-word;padding:9px 25px 9px 52px;}.subtasks li .subtask-title.selectable .content-fakable div,.subtasks .addtask .subtask-title.selectable .content-fakable div,.subtasks li .subtask-edit.selectable .content-fakable div,.subtasks .addtask .subtask-edit.selectable .content-fakable div,.subtasks li .subtask-title.selectable .content-fakable span,.subtasks .addtask .subtask-title.selectable .content-fakable span,.subtasks li .subtask-edit.selectable .content-fakable span,.subtasks .addtask .subtask-edit.selectable .content-fakable span{-webkit-user-select:text !important;-moz-user-select:text !important;-ms-user-select:text !important;user-select:text !important}.subtasks li .checkBox,.subtasks .addtask .checkBox{position:absolute;left:12px;top:12px}.subtasks li .expandingArea textarea,.subtasks .addtask .expandingArea textarea,.subtasks li .expandingArea pre,.subtasks .addtask .expandingArea pre{line-height:20px}.subtasks li.done,.subtasks .addtask.done{color:#aaa;}.subtasks li.done a,.subtasks .addtask.done a{color:#499de7;}.subtasks li.done a .display-view > div,.subtasks .addtask.done a .display-view > div{text-decoration:line-through}.subtasks li.done.done .display-view > div,.subtasks .addtask.done.done .display-view > div{text-decoration:line-through}.subtasks li.done .checkBox,.subtasks .addtask.done .checkBox{opacity:.5;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";filter:alpha(opacity=50)}.subtasks li.upgrade-hint,.subtasks .addtask.upgrade-hint{color:#aaa;}.subtasks li.upgrade-hint a,.subtasks .addtask.upgrade-hint a{color:#619a38}.subtasks li .plus-small,.subtasks .addtask .plus-small{position:absolute;left:9px;top:9px}.subtasks li .detail-delete,.subtasks .addtask .detail-delete{fill:#737272;display:none;position:absolute;top:10px;right:5px;left:initial}.subtasks li:hover .detail-delete,.subtasks .addtask:hover .detail-delete{display:block}.subtasks .addtask{border-top:none;-webkit-transition:none !important;-moz-transition:none !important;-o-transition:none !important;-ms-transition:none !important;transition:none !important;color:#aaa;bottom:0 !important;left:0;right:0;}.subtasks .addtask:hover{color:#737272;}.subtasks .addtask:hover .icon{opacity:.8;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";filter:alpha(opacity=80)}.subtasks .addtask .line-wrap{border-bottom:none;}.subtasks .addtask .line-wrap .wundercon{color:#737272}html[dir=rtl] #detail .body .subtasks li:before,html[dir=rtl] #detail .body .subtasks li:after{left:initial}html[dir=rtl] #detail .body .subtasks li:before{right:38px}html[dir=rtl] #detail .body .subtasks li:after{right:40px}html[dir=rtl] #detail .body .subtasks li .checkBox{left:initial;right:12px}html[dir=rtl] #detail .body .subtasks li .plus-small{left:initial;right:9px}html[dir=rtl] #detail .body .subtasks li .detail-delete{left:5px;right:initial}html[dir=rtl] #detail .body .subtasks li .subtask-title,html[dir=rtl] #detail .body .subtasks li .subtask-edit{padding-left:25px;padding-right:52px}'
}), define("views/TaskDetail/TaskDetailSubTaskCollectionView", [ "application/runtime", "views/TaskDetail/TaskDetailSubTaskItemView", "views/TaskDetail/TaskDetailSubTaskAddView", "views/OrderedListView", "helpers/dnd/index", "helpers/domtools", "actions/Factory", "project!core/WBDeferred", "wunderbits/WBViewPresenter", "style!detailview/_subtasks" ], function(e, t, i, n, a, o, r, s, l, d) {
var c = e._, u = "application/x-wunderlist-subtask", p = n.prototype;
return n.extend({
tagName: "ul",
styles: [ d ],
initialize: function(e) {
var t = this;
t.repositionSubTask = r.repositionSubTask(), t.subTaskLookup = r.subTaskLookup(), 
p.initialize.apply(t, arguments), t.options = e || {}, t.options.lineHeight = 20, 
t._enableDragToReorderList();
},
getViewInstanceForModel: function(e) {
var i = this, n = c.merge({}, i.options, {
model: e,
parent: i.model
}), a = i.addSubview(new t(n), e.id);
return i.dragHelper.prepareItem(a.el), a;
},
_enableDragToReorderList: function() {
var e = this;
e.dragHelper = a.createDragList(e.el, {
mimeType: u,
itemToData: e._itemToData.bind(e),
effectAllowed: [ "move" ]
}), e.dropHelper = a.createDropBetweenList(e.el, {
dropTargetTopClass: "dragAreaTop",
dropTargetTopHeight: 2,
dropTargetBottomClass: "dragAreaBottom",
dropTargetBottomHeight: 0,
mimeTypes: [ u ]
}), e.bindTo(e.dropHelper, "droppedBetween", e._onDropSubtask), e.dragHelper.enable(), 
e.dropHelper.enable();
},
render: function(e) {
var t = this;
return t.$el.empty(), t.options = e || {}, t.model = t.options.model, t.options.reRender = !0, 
t.collection = t.subTaskLookup.getSubTaskCollection(t.model.id), t.options.collection = t.collection, 
p.render.apply(t, arguments), t;
},
_itemToData: function(e) {
var t = e.getAttribute("rel");
return t;
},
_disposeDragImage: function(e) {
try {
window.document.body.removeChild(e);
} catch (t) {}
},
_createDragImageElement: function(e) {
var t = window.getComputedStyle(e), i = e.cloneNode(!0);
i.classList.add("subtask-drag-clone"), i.style.height = t.height;
var n = window.document.body;
return n.insertBefore(i, n.firstChild), i;
},
_onDropSubtask: function(e, t, i) {
var n = this, a = t && t.getAttribute("rel"), o = i && i.getAttribute("rel");
n.repositionSubTask.moveSubTaskTo(e, a, o, n.model.id);
},
scrollCheck: function() {
var e = this;
c.each(e.subviews, function(e) {
"function" == typeof e.scrollCheck && e.scrollCheck();
});
},
focusSelf: function() {
this.$el.focus();
}
});
}), define("views/TaskDetail/Controllers/TaskDetailSubTasksViewController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/WBViewController" ], function(e, t, i) {
var n = e.$;
return i.extend({
"implements": {
"keydown:addSubtasks": "onAddSubtasksKeydown",
"keydown:listSubtasks": "onListSubtasksKeydown",
"route:addSubtasks": "onRouteAddSubtasks",
"click:subtask": "updateCurrentFocusIndex"
},
onRouteAddSubtasks: function() {
var t = this, i = t.view;
e.trigger("route:" + i.model.route("/addSubtasks/focus"));
},
onAddSubtasksKeydown: function(e) {
var i = this;
e.which === t.enter && (i.view.addSubTaskView.showEditMode(), i.stopEventFully(e));
},
onListSubtasksKeydown: function(i) {
var a = this, o = a.view;
i.which === t.enter ? (o.focusCurrentItem(), n(i.target).find(".subtask-title").click(), 
a.stopEventFully(i)) : i.which === t.esc ? (o.focusCurrentItem(), e.trigger("route:" + o.model.route("/listSubtasks/focus"), {
trigger: !1
}), a.stopEventFully(i)) : i.which !== t.tab || i.shiftKey ? i.which === t.tab && i.shiftKey ? (e.trigger("route:" + o.model.route("/reminder/focus")), 
a.stopEventFully(i)) : i.which === t.up ? o.focusPrevItem() : i.which === t.down && o.focusNextItem() : (e.trigger("route:" + o.model.route("/addSubtasks/focus")), 
a.stopEventFully(i));
},
updateCurrentFocusIndex: function(e) {
var t = this, i = t.view, a = n(e.target).closest("li")[0];
if (a) {
var o = i.$(".subtask").index(a);
i.currentItemNum = o;
}
},
focusSelf: function() {
this.view.focusSelf();
}
});
}), define("views/TaskDetail/TaskDetailSubtasksView", [ "application/runtime", "views/TaskDetail/TaskDetailSubTaskCollectionView", "views/TaskDetail/TaskDetailSubTaskAddView", "views/TaskDetail/Controllers/TaskDetailSubTasksViewController", "actions/Factory", "wunderbits/WBViewPresenter" ], function(e, t, i, n, a, o) {
var r = e.$, s = o.prototype;
return o.extend({
className: "subtasks",
attributes: {
tabindex: 0
},
observes: {
runtime: {
"tasks:markDone": "toggleCompleteSubtaskFromShortcut",
"subtask:delete": "deleteSubtaskFromShortcut"
}
},
emits: {
"keydown .addtask": "keydown:addSubtasks",
"keydown .subtask": "keydown:listSubtasks",
"click .subtask": "click:subtask"
},
"implements": [ n ],
initialize: function(e) {
var n = this;
s.initialize.apply(n, arguments), n.subTasksLookup = a.subTaskLookup(), n.completeSubtask = a.completeSubTask(), 
n.deleteSubtask = a.deleteSubTask(), n.model = e.model, n.subtasksSubView = n.addSubview(new t({
collection: n.subTasksLookup.getSubTaskCollection(n.model.id)
})), n.addSubTaskView = n.addSubview(new i()), n.currentItemNum = 0;
},
render: function(e) {
var t = this, i = arguments;
t.currentItemNum = 0, t.model = e.model, t.hasRenderredOnce || s.render.apply(t, arguments);
var n = function() {
t.renderDeferred.apply(t, i);
};
return e.animationDeferred ? e.animationDeferred.done(n) : n(), t.hasRenderredOnce = !0, 
t;
},
renderDeferred: function(e) {
var t = this;
s.render.apply(t, arguments), t.inputEl = t.addSubTaskView.setModelAndRender(e.model).el, 
t.subtasksSubView.render({
model: t.model
}).el;
var i = document.createDocumentFragment();
i.appendChild(t.subtasksSubView.el), i.appendChild(t.inputEl), t.$el.append(i);
},
focusCurrentItem: function() {
var e = this, t = e.$(".subtask"), i = t.get(e.currentItemNum);
i ? i.focus() : e.trigger("route:addSubtasks");
},
focusNextItem: function() {
var e = this, t = e.$(".subtask");
e.currentItemNum < t.length - 1 && (e.currentItemNum += 1, t.get(e.currentItemNum).focus());
},
focusPrevItem: function() {
var e = this, t = e.$(".subtask");
e.currentItemNum > 0 && (e.currentItemNum -= 1);
var i = t.get(e.currentItemNum);
i && i.focus();
},
getActiveSubtaskModel: function() {
var e = this, t = e.$(".subtask"), i = t.get(e.currentItemNum);
i = i ? i : t.is(":focus");
var n = r(i).attr("rel"), a = e.subTasksLookup.getSubTaskModel(n);
return a;
},
toggleCompleteSubtaskFromShortcut: function() {
var e = this, t = e.getActiveSubtaskModel();
t && t.isCompleted() ? e.completeSubtask.unCompleteSubTask(t) : t && e.completeSubtask.completeSubTask(t);
},
deleteSubtaskFromShortcut: function() {
var e = this, t = e.getActiveSubtaskModel(), i = e.subtasksSubView.getSubview(t.id);
i.trigger("click:delete", {
confirm: function() {
e.focusPrevItem();
},
cancel: function() {
e.focusCurrentItem();
}
});
},
markAllSubTasksAsDone: function() {
var e = this, t = e.subTasksLookup.getSubTaskModels([ e.model.id ]);
e.completeSubtask.completeSubTasks(t);
},
focusFirstSubtask: function(e) {
var t = this;
t.currentItemNum = 0;
var i = t.$(".subtask");
0 === i.length ? "next" === e ? t.defer(function() {
t.trigger("route:addSubtasks");
}) : t.trigger("route:addSubtasks") : t.$(".subtask:first").focus();
},
focusSelf: function() {
this.$el.focus();
}
});
}), define("/templates/detailview/detailInfo.js", {
name: "detailview/detailInfo",
data: {
"1": function(e, t, i, n) {
var a, o = " ";
return a = t["if"].call(e, e && e.isShared, {
name: "if",
hash: {},
fn: this.program(2, n),
inverse: this.program(7, n),
data: n
}), (a || 0 === a) && (o += a), o + " ";
},
"2": function(e, t, i, n) {
var a, o = " ";
return a = t["if"].call(e, e && e.completedRelative, {
name: "if",
hash: {},
fn: this.program(3, n),
inverse: this.program(5, n),
data: n
}), (a || 0 === a) && (o += a), o + " ";
},
"3": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return " " + r((a = t.localized || e && e.localized || o, a.call(e, "label_completed_$_by_$", e && e.completed_on, e && e.completed_by, {
name: "localized",
hash: {},
data: n
}))) + " ";
},
"5": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return " " + r((a = t.localized || e && e.localized || o, a.call(e, "label_completed_by_$_on_$", e && e.completed_by, e && e.completed_on, {
name: "localized",
hash: {},
data: n
}))) + " ";
},
"7": function(e, t, i, n) {
var a, o = " ";
return a = t["if"].call(e, e && e.completedRelative, {
name: "if",
hash: {},
fn: this.program(8, n),
inverse: this.program(10, n),
data: n
}), (a || 0 === a) && (o += a), o + " ";
},
"8": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return " " + r((a = t.localized || e && e.localized || o, a.call(e, "label_completed_$", e && e.completed_on, {
name: "localized",
hash: {},
data: n
}))) + " ";
},
"10": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return " " + r((a = t.localized || e && e.localized || o, a.call(e, "label_completed_on_$", e && e.completed_on, {
name: "localized",
hash: {},
data: n
}))) + " ";
},
"12": function(e, t, i, n) {
var a, o = " ";
return a = t["if"].call(e, e && e.isShared, {
name: "if",
hash: {},
fn: this.program(13, n),
inverse: this.program(18, n),
data: n
}), (a || 0 === a) && (o += a), o + " ";
},
"13": function(e, t, i, n) {
var a, o = " ";
return a = t["if"].call(e, e && e.createdRelative, {
name: "if",
hash: {},
fn: this.program(14, n),
inverse: this.program(16, n),
data: n
}), (a || 0 === a) && (o += a), o + " ";
},
"14": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return " " + r((a = t.localized || e && e.localized || o, a.call(e, "label_created_$_by_$", e && e.created_on, e && e.created_by, {
name: "localized",
hash: {},
data: n
}))) + " ";
},
"16": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return " " + r((a = t.localized || e && e.localized || o, a.call(e, "label_created_by_$_on_$", e && e.created_by, e && e.created_on, {
name: "localized",
hash: {},
data: n
}))) + " ";
},
"18": function(e, t, i, n) {
var a, o = " ";
return a = t["if"].call(e, e && e.createdRelative, {
name: "if",
hash: {},
fn: this.program(19, n),
inverse: this.program(21, n),
data: n
}), (a || 0 === a) && (o += a), o + " ";
},
"19": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return " " + r((a = t.localized || e && e.localized || o, a.call(e, "label_created_$", e && e.created_on, {
name: "localized",
hash: {},
data: n
}))) + " ";
},
"21": function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return " " + r((a = t.localized || e && e.localized || o, a.call(e, "label_created_on_$", e && e.created_on, {
name: "localized",
hash: {},
data: n
}))) + " ";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = '<div class="comment-text"> <span> ';
return a = t["if"].call(e, e && e.isCompleted, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.program(12, n),
data: n
}), (a || 0 === a) && (o += a), o + " </span> </div>";
},
useData: !0
}
}), define("views/TaskDetail/Comments/TaskDetailInfoView", [ "application/runtime", "vendor/moment", "wunderbits/helpers/date", "actions/Factory", "wunderbits/WBView", "project!core/WBDeferred", "template!detailview/detailInfo" ], function(e, t, i, n, a, o, r, s) {
var l = e._, d = a.prototype;
return a.extend({
template: r,
className: "detail-info",
initialize: function() {
var e = this;
e.listLookup = n.listLookup(), e.userLookup = n.userLookup(), d.initialize.apply(e, arguments);
},
renderData: {
isShared: s,
isCompleted: s,
createdRelative: s,
created_by: s,
created_on: s,
completedRelative: s,
completed_by: s,
completed_on: s
},
formatData: function(t) {
var i = this;
t = d.formatData.call(i, t);
var n = i.listLookup.getListModel(i.model.attributes.list_id);
t.isShared = n && n.isShared(), t.isCompleted = i.model.isCompleted();
var a = t.isCompleted ? "completed" : "created", o = a + "Relative", r = a + "_by_id", s = a + "_by", l = a + "_on", c = i.model.attributes[r] || e.user.id, u = c === e.user.id ? e.user : i.userLookup.getUserModel(c);
u ? t[s] = u.escape("name") : t.isShared = !1;
var p = i.model.getHumanFormattedDates();
return t[l] = p[l], t[o] = p[o], t;
},
render: function(t) {
var i = this;
return i.nameWidthIsSet = new o(), t && l.extend(i.options, t), i.model = t && t.model || i.model, 
i.onNextMinuteBind || (i.onNextMinuteBind = i.bindTo(e, "time:nextMinute", i.renderDeferred, i)), 
i.initModelBindings(), i.options.animationDeferred.done(i.renderDeferred, i), i;
},
renderDeferred: function() {
var e = this;
d.render.call(e, e.formatData(e.renderData)), e.$el.css("visibility", "hidden"), 
e.nameWidthIsSet.done(function() {
e.$el.removeAttr("style");
}), e.defer(e.setNameMaxWidth, e);
},
initModelBindings: function() {
var e = this;
if (!e.model) throw new Error("Cannot init model bindings without model");
e.modelChangeCompletedBind && e.unbindFrom(e.modelChangeCompletedBind), e.listShareBind && e.unbindFrom(e.listShareBind), 
e.modelChangeCompletedBind = e.bindTo(e.model, "change:completed", function() {
e.render();
});
var t = e.listLookup.getListModel(e.model.attributes.list_id);
t && (e.listShareBind = e.bindTo(t, "change:isShared", e.render));
},
setNameMaxWidth: function() {
var e = this, t = e.$("text").attr("rel"), i = t.indexOf("by_$_on_$") > 0, n = e.$(i ? ".token_0" : ".token_1");
n.addClass("hidden");
var a = e.$("text").children(0), o = a.width(), r = e.$el.width(), s = i ? 165 : 65;
n.css("max-width", r - o - s - 25 + "px").removeClass("hidden"), e.nameWidthIsSet.resolve();
}
});
}), define("views/TaskDetail/Comments/Controllers/CommentViewController", [ "application/runtime", "wunderbits/WBViewController", "actions/Factory" ], function(e, t, i) {
var n = t.prototype;
return t.extend({
"implements": {
"delete:comment": "deleteComment"
},
initialize: function() {
var e = this;
n.initialize.apply(e, arguments), e.deleteCommentInteractor = i.deleteComment();
},
deleteComment: function(e) {
var t = this;
t.deleteCommentInteractor.deleteComment(t.view.model.id, e);
}
});
}), define("/templates/detailview/commentItem.js", {
name: "detailview/commentItem",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression, s = t.helperMissing;
return '<div class="picture"></div> <div class="comment-wrapper"> <span class="comment-author"> ' + r((a = t.author || e && e.author, 
typeof a === o ? a.call(e, {
name: "author",
hash: {},
data: n
}) : a)) + ' </span> <span class="comment-time"> ' + r((a = t.time_stamp || e && e.time_stamp, 
typeof a === o ? a.call(e, {
name: "time_stamp",
hash: {},
data: n
}) : a)) + ' </span> <a class="comment-delete" data-key-aria-label="button_delete" tabindex="0" aria-label="Delete"> ' + r((a = t.symbol || e && e.symbol || s, 
a.call(e, "delete", {
name: "symbol",
hash: {},
data: n
}))) + ' </a> <div class="comment-text">' + r((a = t.text || e && e.text, typeof a === o ? a.call(e, {
name: "text",
hash: {},
data: n
}) : a)) + "</div> </div>";
},
useData: !0
}
}), define("views/TaskDetail/Comments/TaskDetailCommentView", [ "application/runtime", "views/AvatarView", "./Controllers/CommentViewController", "wunderbits/WBViewPresenter", "wunderbits/helpers/date", "vendor/moment", "wunderbits/mixins/LinkingViewMixin", "wunderbits/mixins/EmailLinkingViewMixin", "wunderbits/mixins/TaggingViewMixin", "wunderbits/mixins/UnicodeEmojiViewMixin", "template!detailview/commentItem" ], function(e, t, i, n, a, o, r, s, l, d, c, u) {
var p = n.prototype, m = n.extend({
className: "comment",
tagName: "li",
template: c,
"implements": [ i ],
attributes: {
tabindex: 0
},
emits: {
"click .comment-delete": "delete:comment"
},
observes: {
model: {
change: "renderTimestamp",
destroy: "destroy",
"change:canDelete": "render"
}
},
renderData: {
author: u,
time_stamp: u,
comment: u
},
formatData: function(e) {
var t = this, i = t.model && t.model.attributes;
return i && (e.author = i.author ? i.author.name : "author unknown", e.time_stamp = t.getTimestamp(), 
e.text = i.text || ""), e;
},
initialize: function() {
var e = this;
p.initialize.apply(e, arguments);
},
render: function() {
var t = this;
if (!t.model) return t;
p.render.call(t, t.renderData);
var i;
if (t.model) {
var n = t.model.attributes.author;
i = n && "" + n.id;
var a = n && n.avatar;
i && t.renderAvatar(i, a);
}
i && e.user.isIDEqual(i) && t.$el.addClass("active-user"), t.model.canDelete() || t.$(".comment-delete").remove();
var o = t.$(".comment-text");
return t.renderEmoji(o), t.renderLinks(o), t.renderEmails(o), t.renderTags(o), t.$el.attr("rel", t.model.id), 
t.$el.attr("data-server-data", t.model.attributes.created_at), t.$el.attr("data-local-date", t.model.attributes.local_created_at), 
t;
},
getTimestamp: function() {
var t, i = this, n = i.model.attributes, r = n.created_at ? a.convertServerTimeToLocalTime(n.created_at) : n.local_created_at;
return t = n.online_id ? o(r).from(o().utc()) : e.language.getText("upload_file_not_synced_yet");
},
renderTimestamp: function() {
var e = this;
e.$(".comment-time").html(e.getTimestamp());
},
renderAvatar: function(i, n) {
var a = this;
a.avatarView = a.avatarView || a.addSubview(new t({
listId: e.listId,
url: n,
id: i
}), "avatarView"), a.$(".picture").html(a.avatarView.render({
id: i,
size: "medium"
}).$el);
}
});
return [ r, s, l, d ].forEach(function(e) {
e.applyToClass(m);
}), m;
}), define("views/TaskDetail/Comments/Controllers/InputController", [ "application/runtime", "actions/Factory", "wunderbits/WBViewController", "wunderbits/helpers/date", "wunderbits/helpers/selection", "wunderbits/data/keycodes", "wunderbits/helpers/strings" ], function(e, t, i, n, a, o, r, s) {
var l = e.$, d = i.prototype;
return i.extend({
state: s,
"implements": {
"focus:textarea": "setFocus",
"blur:textarea": "removeFocus",
"keyup:textarea": "checkTextareaHeight",
"keydown:textarea": "handleKeys",
"click:comment-last": "setInputFocus"
},
initialize: function() {
var e = this;
d.initialize.apply(e, arguments), e.allComments = t.commentLookup().allComments;
},
handleKeys: function(t) {
var i = this, a = i.view.$("textarea"), s = l.trim(a.val());
if ("goProPopover" === e.focus) return t.preventDefault();
if (t.which === o.enter && !t.shiftKey && (t.preventDefault(), s.length > 0)) {
var d = n.getServerNowWithMilliseconds(), c = r.emojiTokensToUnicode(s);
i.allComments.add({
text: c,
task_id: i.view.model.id,
local_created_at: d,
read: !0,
author: {
id: e.user.id,
name: e.user.attributes.name
}
}, {
task: i.view.model,
comment: a.val(),
userAdded: !0
}), i.delay(i.resetInput, 1), e.trigger("commentAdded"), e.trigger("detail:scrollToEnd", null, !0), 
i.defer(i.checkTextareaHeight);
}
},
checkTextareaHeight: function() {
var e = this, t = e.view.$(".input-fake").height();
t !== e.lastReportedHeight && (e.view.trigger("change:height", t), e.lastReportedHeight = t);
},
resetInput: function() {
var e = this;
e.view.$(".comments-body").css("margin-bottom", 0), e.view.getSubview("textarea").setContent("");
},
adjustBottom: function(e) {
var t = this;
t.view.$(".comments-body").css({
"margin-bottom": e - 30 + "px"
});
},
setInputFocus: function() {
e.trigger("detail:scrollToEnd", !0);
},
setFocus: function() {
var t = this, i = t.view, n = e.currentRoute();
e.trigger("popover:close"), t.defer(function() {
i.$(".input-fake").addClass("focus"), e.trigger("focus:set", "comments");
}), -1 === n.indexOf("comments/edit") && e.trigger("route:" + i.model.route("/comments/edit"), {
trigger: !1
});
},
removeFocus: function() {
var t = this;
t.defer(function() {
t.view.$(".input-fake").removeClass("focus"), e.currentRoute() === t.view.model.route("/comments/edit") && e.trigger("route:" + t.view.model.route(), {
trigger: !1
});
});
}
});
}), define("/templates/detailview/comments.js", {
name: "detailview/comments",
data: {
"1": function() {
return " has-comments ";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = "function", s = this.escapeExpression, l = t.helperMissing, d = '<div class="comments-bottom ';
return a = t["if"].call(e, e && e.hasComments, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (d += a), d + '"> <div class="last-comment hidden"> <span class="unread-count hidden">' + s((o = t.unreadCount || e && e.unreadCount, 
typeof o === r ? o.call(e, {
name: "unreadCount",
hash: {},
data: n
}) : o)) + '</span> </div> <div class="comments-add"> <div class="input-fake" /> <a data-path="preferences/account/pro" class="button big green buy hidden"> <strong>' + s((o = t.localized || e && e.localized || l, 
o.call(e, "button_label_go_pro_to_comment", {
name: "localized",
hash: {},
data: n
}))) + "</strong> </a> </div> </div>";
},
useData: !0
}
}), define("/styles/detailview/_comments.js", {
name: "detailview/_comments",
data: '#wunderlist-base .comments-bottom{position:absolute;z-index:9003;bottom:35px;right:0;left:0;border-top:1px solid rgba(0,0,0,0.12);-webkit-box-shadow:0 -1px 2px rgba(0,0,0,0.06);box-shadow:0 -1px 2px rgba(0,0,0,0.06);background:#fff;}#wunderlist-base .comments-bottom .unread-count{position:absolute;right:10px;top:10px;font-weight:bold;color:#fff;display:none;-webkit-border-radius:5px;border-radius:5px;background-image:-webkit-linear-gradient(top, #ca1c18, #e83a31);background-image:-moz-linear-gradient(top, #ca1c18, #e83a31);background-image:-o-linear-gradient(top, #ca1c18, #e83a31);background-image:-ms-linear-gradient(top, #ca1c18, #e83a31);background-image:linear-gradient(to bottom, #ca1c18, #e83a31);padding:0 4px;-webkit-box-shadow:inset 0 1px 1px rgba(115,4,0,0.45);box-shadow:inset 0 1px 1px rgba(115,4,0,0.45);font-size:12px}#wunderlist-base .comments-bottom .button{padding:9px 20px !important}#wunderlist-base .comments-add{padding:10px 10px 0 10px;}#wunderlist-base .comments-add .input-fake{min-height:32px;padding:7px}#wunderlist-base .comments-main li .comment-wrapper{-webkit-border-radius:3px;border-radius:3px;padding:4px 8px;background:#fff;-webkit-box-shadow:0 1px 1px rgba(0,0,0,0.2);box-shadow:0 1px 1px rgba(0,0,0,0.2)}#wunderlist-base .last-comment li,#wunderlist-base .comments-main li{position:relative;overflow:hidden;padding:10px 1px 10px 40px;text-shadow:0 1px 0 #fff;min-height:37px;list-style:none;font-size:13px;}#wunderlist-base .last-comment li .picture,#wunderlist-base .comments-main li .picture{position:absolute;left:0;top:11px}#wunderlist-base .last-comment li .comment-author,#wunderlist-base .comments-main li .comment-author{font-weight:bold;max-width:100px;display:inline-block;vertical-align:top;height:16px;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}#wunderlist-base .last-comment li .comment-time,#wunderlist-base .comments-main li .comment-time{color:#737272;font-weight:normal}#wunderlist-base .last-comment li .comment-text,#wunderlist-base .comments-main li .comment-text{line-height:18px;font-size:13px;word-break:break-word;margin-top:3px;white-space:pre-wrap}#wunderlist-base .last-comment li .comment-delete,#wunderlist-base .comments-main li .comment-delete{display:none;position:absolute;top:14px;right:4px;fill:#737272}#wunderlist-base .last-comment li .comment-text,#wunderlist-base .comments-main li .comment-text,#wunderlist-base .last-comment li span.emoji,#wunderlist-base .comments-main li span.emoji,#wunderlist-base .last-comment li .linkout,#wunderlist-base .comments-main li .linkout{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;}#wunderlist-base .last-comment li .comment-text a,#wunderlist-base .comments-main li .comment-text a,#wunderlist-base .last-comment li span.emoji a,#wunderlist-base .comments-main li span.emoji a,#wunderlist-base .last-comment li .linkout a,#wunderlist-base .comments-main li .linkout a{color:#186ab2 !important}#wunderlist-base .last-comment li:hover .comment-delete,#wunderlist-base .comments-main li:hover .comment-delete{display:block}#wunderlist-base .last-comment{padding-left:10px;}#wunderlist-base .last-comment li{list-style:none;cursor:pointer;padding-bottom:0;}#wunderlist-base .last-comment li .comment-text{max-width:300px;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;display:block}#wunderlist-base .comments-main{position:relative;overflow:hidden;}#wunderlist-base .comments-main .spinner{opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0);height:0;-webkit-transition:all 250ms ease;-moz-transition:all 250ms ease;-o-transition:all 250ms ease;-ms-transition:all 250ms ease;transition:all 250ms ease;position:relative;}#wunderlist-base .comments-main .spinner span{top:0;margin-top:10px}#wunderlist-base .comments-main .spinner.spinning{opacity:1;-ms-filter:none;filter:none;height:32px}#wunderlist-base .has-comments .unread-count{display:block}#wunderlist-base .has-comments li.update{padding:0;text-align:center;height:4px;margin-top:4px;}#wunderlist-base .has-comments li.update .comment-text{text-align:center;position:absolute;right:0;left:0;top:-8px;color:#777;font-size:12px;}#wunderlist-base .has-comments li.update .comment-text:before{background:url("images/textures/divider.png") center top repeat-x;content:\'\';z-index:9995;height:12px;width:100%;position:absolute;top:44px;left:0}#wunderlist-base .has-comments li.update .comment-text span{padding:0 5px;z-index:9999;position:relative}html[dir="rtl"] #wunderlist-base .comments-main li.comment{padding-left:10px;padding-right:40px;}html[dir="rtl"] #wunderlist-base .comments-main li.comment .picture{left:initial;right:0}'
}), define("views/TaskDetail/Comments/TaskDetailCommentsView", [ "application/runtime", "wunderbits/data/keycodes", "views/AvatarView", "views/TaskDetail/Comments/TaskDetailCommentView", "views/TaskDetail/Comments/Controllers/InputController", "wunderbits/WBExpandableTextareaView", "vendor/moment", "wunderbits/WBViewPresenter", "template!detailview/comments", "style!detailview/_comments" ], function(e, t, i, n, a, o, r, s, l, d, c) {
var u = s.prototype;
return s.extend({
className: "comments",
styles: [ d ],
"implements": [ a ],
template: l,
emits: {
"focus textarea": "focus:textarea",
"blur textarea": "blur:textarea",
"keydown textarea": "keydown:textarea",
"keyup textarea": "keyup:textarea",
"click .last-comment": "click:comment-last"
},
observes: {
runtime: {
"time:nextMinute": "renderLastComment"
},
events: {
lastComment: "renderLastComment"
}
},
renderData: {
hasComments: c,
unreadCount: c,
hasUnreadComments: c,
commentsUnreachable: c
},
formatData: function(e) {
var t = this, i = t.model.attributes;
return e.hasComments = i.hasComments, e.unreadCount = i.unreadCount, e.hasUnreadComments = e.unreadCount > 0, 
e.commentsUnreachable = !t.commentsReachable, e;
},
initialize: function() {
var e = this;
u.initialize.apply(e, arguments), e.expandableTextareaView = e.addSubview(new o({
maxLength: 1e3,
lineHeight: 19,
placeholderKey: "placeholder_add_comments"
}), "textarea");
},
render: function(e) {
var t = this;
return t.model && t.unbindFromTarget(t.model), t.model = e && e.model || t.model, 
t.model ? (t.bindToModel(), e.animationDeferred.done(function() {
t.requestAnimationFrame(function() {
u.render.call(t, t.formatData(t.renderData)), t.$(".input-fake").prepend(t.expandableTextareaView.render().el), 
t.$(".last-comment").addClass("hidden"), t.updateUnreadCount();
});
}), t) : t;
},
bindToModel: function() {
var e = this;
e.bindTo(e.model, "change:unreadCount", e.updateUnreadCount);
},
handlePageRequestFail: function() {
var e = this;
e.requestAnimationFrame(function() {
var t = e.$(".error");
t.removeClass("hidden"), e.delay(function() {
t.addClass("hidden");
}, 1e4);
});
},
renderLastComment: function(e) {
var t = this;
t.requestAnimationFrame(function() {
var i = e && e.attributes.task_id === t.model.id;
i && (t.lastComment && t.lastComment.destroy(), t.lastComment = t.addSubview(new n({
model: e
})), t.$(".last-comment").append(t.lastComment.render().el));
});
},
updateUnreadCount: function() {
var e = this;
e.requestAnimationFrame(function() {
var t = e.model.attributes.unreadCount, i = e.$(".unread-count");
t > 0 ? i.toggleClass("hidden", !1).html(t) : i.toggleClass("hidden").html("");
});
}
});
}), define("views/TaskDetail/Comments/Controllers/CommentListController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/WBViewController", "wunderbits/helpers/date" ], function(e, t, i, n, a) {
var o = e._;
return i.extend({
state: a,
"implements": {
"fetch:comments": "fetchComments",
keydown: "handleKeys",
"route:addComment": "onRouteAddComment"
},
onRouteAddComment: function() {
e.trigger("route:" + this.view.model.route("/addComments/focus"));
},
getBeforeId: function() {
var e = this, t = o.clone(e.view.collection.models);
return t.sort(function(e, t) {
var i = e.attributes.online_id, n = t.attributes.online_id;
return n > i ? -1 : i > n ? 1 : 0;
}), t[0].attributes.online_id;
},
fetchComments: function() {
var t = this, i = t.view, n = i.model.attributes.online_id;
n && (i.showLoader(), e.trigger("sync:start", !1, "comments", n), t.bindOnceTo(e, "sync:ended", i.removeLoader, i));
},
handleKeys: function(i) {
var n = this, a = n.view;
i.which !== t.tab || i.shiftKey ? i.which === t.tab && i.shiftKey ? (e.trigger("update:direction", "prev"), 
e.trigger("route:" + a.model.route("/listFiles/focus")), n.stopEventFully(i)) : i.which === t.up ? a.focusPrevItem() : i.which === t.down && a.focusNextItem() : (e.trigger("update:direction", "next"), 
e.trigger("route:" + a.model.route("/addComments/focus")), n.stopEventFully(i));
}
});
}), define("/templates/detailview/commentList.js", {
name: "detailview/commentList",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return '<div class="state loading spinner"><span class="dark"/> <div class="error hidden">' + r((a = t.localized || e && e.localized || o, 
a.call(e, "comment_request_failed", {
name: "localized",
hash: {},
data: n
}))) + '</div> </div> <ul class="comments-list"></ul> ';
},
useData: !0
}
}), define("views/TaskDetail/Comments/TaskDetailCommentListView", [ "application/runtime", "views/TaskDetail/Comments/TaskDetailCommentView", "views/TaskDetail/Comments/Controllers/CommentListController", "actions/Factory", "wunderbits/WBViewPresenter", "wunderbits/helpers/date", "vendor/moment", "template!detailview/commentList", "style!detailview/_comments" ], function(e, t, i, n, a, o, r, s, l) {
var d = e._, c = e.$, u = a.prototype;
return a.extend({
template: s,
styles: [ l ],
"implements": [ i ],
className: "comments-main",
observes: {
runtime: {
nextPageLoaded: "handleLoadedPage",
"commentsPage:fail": "handlePageRequestFail",
"time:nextMinute": "updateTimestamps",
"comment:delete": "deleteComment"
},
env: {
online: "onOnline",
offline: "onOffline"
}
},
emits: {
keydown: "keydown"
},
formatData: function(e) {
var t = this;
return e = u.formatData.call(t, e);
},
initialize: function() {
var t = this;
t.currentItemNum = 0, t.isOnline = !0, t.env = e.env, u.initialize.apply(t, arguments), 
t.commentLookup = n.commentLookup(), t.debounceRemoveLoader = t.debounce(t.removeLoader, 100), 
t.debounceShowLoader = t.debounce(t.showLoader, 100, !0), t.commentsReady = t.deferred(), 
t.bindOnceTo(e, "taskComments:ready", function() {
t.commentsReady.resolve();
});
},
render: function(e) {
var t = this;
return t.currentItemNum = 0, t.model && t.unbindFromTarget(t.model), t.model = e && e.model, 
t.collection = t.commentLookup.getCommentsCollection(t.model.id), e.animationDeferred.done(function() {
t.requestAnimationFrame(function() {
t.$el.removeClass("has-comments"), u.render.call(t, t.formatData(t.renderData)), 
t.renderCollection(), t.adding = !1;
});
}), t;
},
renderCollection: function() {
var t = this;
t.when(t.commentsReady).done(function() {
!t.adding && t.debounceRemoveLoader(), t.collection.models.length && (t.$el.addClass("has-comments"), 
t.renderComments()), t.bindToCollection(), e.trigger("detail:checkBounds"), t.trigger("fetch:comments");
}, t);
},
bindToCollection: function() {
var e = this;
e.collectionBind && e.unbindFrom(e.collectionBind), e.collectionRemoveBind && e.unbindFrom(e.collectionRemoveBind), 
e.collectionBind = e.bindTo(e.collection, "add", "onCommentAdd"), e.collectionRemoveBind = e.bindTo(e.collection, "remove", "onCommentRemove");
},
onOnline: function() {
var e = this;
e.isOnline = !0, e.renderOnlineState();
},
onOffline: function() {
var e = this;
e.isOnline = !1, e.delay(e.renderOfflineState, 500);
},
onCommentAdd: function(t, i, n) {
var a = this;
a.adding = !0, a.debounceRemoveLoader(), a.addedComment(t, i, n), e.trigger("detail:checkBounds"), 
a.trigger("lastComment", d.last(a.collection.models));
},
onCommentRemove: function() {
var e = this;
e.trigger("lastComment", d.last(e.collection.models));
},
focusNextItem: function() {
var e = this, t = e.$(".comment");
e.currentItemNum < t.length - 1 && (e.currentItemNum += 1, c(t.get(e.currentItemNum)).focus());
},
focusPrevItem: function() {
var t = this, i = t.$(".comment");
t.currentItemNum > 0 ? (t.currentItemNum -= 1, c(i.get(t.currentItemNum)).focus()) : 0 === t.currentItemNum && i.length > 0 ? c(i.first()).focus() : t.defer(function() {
e.trigger("route:" + t.model.route("/addComments/focus"));
});
},
showLoader: function() {
this.$(".spinner").addClass("spinning");
},
removeLoader: function() {
var t = this;
t.delay(function() {
t.$(".spinner").removeClass("spinning"), t.$(".fetch-error").addClass("hidden"), 
e.trigger("detail:checkBounds");
}, 500);
},
addedComment: function(t, i, n) {
var a = this;
if (!a.getSubview(t.id)) if (a.$el.addClass("has-comments"), n && n.addBefore) {
var o = a.$el.closest(".body"), r = o.scrollTop(), s = a.renderSingleComment(t).$el;
s.hide().fadeIn(750);
var l = s.outerHeight();
o.scrollTop(r + l);
} else n && n.onDemand ? (a.renderSingleComment(t), e.trigger("commentList:debounceScroll")) : a.renderSingleComment(t, n);
},
renderSingleComment: function(e, i) {
var n = this, a = n.$(".comments-list"), o = d.map(a.children("li"), function(e) {
return c(e).attr("rel");
});
n.collection.sort();
var s = document.createDocumentFragment(), l = n.addSubview(new t({
model: e
}), e.id);
if (l.render(), s.appendChild(l.el), i && i.userAdded) return void a.append(s);
for (var u, p, m = null, g = null, f = d.clone(n.collection.models), b = 0, h = f.length; h > b; b++) p = f[b], 
p.id === e.id && (u = b, b = h);
for (var v, _ = u - 1, w = u + 1; u && _ >= 0 && !m; ) v = f[_] && f[_].id, -1 !== o.indexOf(v) ? m = v : --_;
for (;u < f.length - 1 && w < f.length && !g; ) v = f[w] && f[w].id, -1 !== o.indexOf(v) ? g = v : ++w;
var k = m && a.find('li[rel="' + m + '"]'), x = g && a.find('li[rel="' + g + '"]'), y = k && k.size(), C = x && x.size();
if (y && !C || y && C) k.after(s); else if (!y && C) x.before(s); else {
var T = r(e.attributes.created_at).valueOf() >= r(f[f.length - 1].attributes.created_at).valueOf();
a[T ? "append" : "prepend"](s);
}
return l;
},
renderComments: function() {
var e = this;
if (!e.destroyed && e.collection) {
e.collection.sort();
for (var i = document.createDocumentFragment(), n = 0, a = e.collection.models.length; a > n; n++) {
var o = e.collection.models[n], r = e.addSubview(new t({
model: o
}), o.id);
i.appendChild(r.render().el);
}
e.trigger("lastComment", d.last(e.collection.models)), e.$(".comments-list").html(i);
}
},
handleLoadedPage: function(e) {
var t = this;
t.debounceRemoveLoader(), e.length || t.renderLabels();
},
renderPageRequestFail: function() {
var e = this;
e.debounceRemoveLoader(), e.$(".fetch-error").removeClass("hidden");
},
renderOfflineState: function() {
this.debounceRemoveLoader();
},
renderOnlineState: function() {
this.debounceRemoveLoader();
},
updateTimestamps: function() {
var e = this, t = e.collection && e.collection.models, i = t && t.length;
i && t.forEach(function(t) {
var i = e.getSubview(t.id);
i && i.renderTimestamp();
});
},
scrollToEnd: function(t) {
e.trigger("detail:scrollToEnd", t);
},
focusCurrentItem: function() {
var t = this, i = t.$(".comment"), n = i.get(t.currentItemNum);
n ? n.focus() : e.trigger("route:" + t.model.route("comments/focus"));
},
deleteComment: function() {
var e = this, t = e.$(".comment").get(e.currentItemNum), i = c(t).attr("rel"), n = e.getSubview(i);
n.trigger("delete:comment", {
confirm: function() {
e.focusPrevItem();
},
cancel: function() {
e.focusCurrentItem();
}
});
},
focusFirstComment: function(t) {
var i = this;
t = t || "next";
var n = i.$(".comment");
0 === n.length ? "next" === t ? i.trigger("route:addComment") : (e.trigger("focus:listFiles", t), 
e.trigger("route:" + i.model.route("/listFiles/focus"), {
trigger: !1
})) : i.$(".comment:first").focus();
}
});
}), define("views/TaskDetail/Controllers/TaskDetailClickController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/helpers/date", "helpers/Animator", "helpers/animation", "actions/Factory", "wunderbits/WBViewController", "project!core/lib/extend" ], function(e, t, i, n, a, o, r, s) {
var l = e.$, d = e._, c = r.prototype;
return r.extend({
"implements": {
"toggle:view": "toggleDetailView",
"toggle:done": "debouncedToggleDone",
"toggle:starred": "debouncedToggleStar",
"click:delete": "debouncedDeleteTask",
"click:close": "debouncedClose",
close: "debouncedClose"
},
initialize: function() {
var e = this;
e.starTask = o.starTask(), e.completeTask = o.completeTask(), e.debouncedToggleDone = e.debounce(e.toggleDone, 250, !0), 
e.debouncedToggleStar = e.debounce(e.toggleStarred, 250, !0), e.debouncedDeleteTask = e.debounce(e.deleteTask, 250, !0), 
e.debouncedClose = e.debounce(e.close, 250, !0), c.initialize.apply(e, arguments);
},
toggleDetailView: function(e) {
var t = this, i = l(e.target).hasClass("stack");
i && t.view.trigger("close");
},
toggleDone: function() {
var t = this, i = t.view, o = i.model;
if (!n.isAnimatingOrClone(l('li[rel="' + o.id + '"]'))) {
var r = "analytics:Tasks:" + (o.isCompleted() ? "unmarkDone" : "markDone");
e.trigger(r, "detail");
var s = a.animateOptions("completion");
t.completeTask.toggleCompleted([ o.id ], s), i.subtasksSubView.markAllSubTasksAsDone(), 
s && s.animations.run(), e.trigger("analytics:detailView:toggle:done");
}
},
toggleStarred: function() {
var t = this, i = t.view.model, n = "true" === e.settings.attributes.behavior_star_tasks_to_top, o = {
moveToTop: n
}, r = n && a.animateOptions("starred");
r && (o = s(o, r)), t.starTask.toggleStarred([ i.id ], o), r && r.animations.run(), 
e.trigger("analytics:detailView:toggle:starred");
},
deleteTask: function(t) {
var i = this, n = "true" === e.settings.attributes.confirm_delete_entity;
t && i.stopEventFully(t);
var a = function() {
i.close(), setTimeout(function() {
i.view.model.destroy(), e.trigger("task:deleted", i.view.model);
}, 250);
};
if (n) {
var o = {
confirm: a,
customTitle: e.language.getLabel("label_are_you_sure_permanently_delete_$_task", i.view.model.escape("title")).toString(),
customText: e.language.getLabel("label_cant_undo").toString(),
confirmText: e.language.getLabel("label_delete_task").toString()
};
e.trigger("modal:confirm", o);
} else a();
},
close: function(t) {
var i, n = this, a = n.view;
return d.isFunction(t) && (i = t, t = null), t && n.stopEventFully(t), a.model ? void e.trigger("tasks:toggleSelected") : void (i && d.delay(i, 100));
}
});
}), define("views/TaskDetail/Controllers/TaskDetailFocusController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/helpers/date", "helpers/Animator", "collections/ListCollection", "wunderbits/WBBlurHelper", "wunderbits/WBViewController" ], function(e, t, i, n, a, o, r) {
var s = e._, l = r.prototype, d = "self", c = {
assignee: "assignSubView",
duedate: "dateSubView",
reminder: "reminderSubView",
subtasks: "subtasksSubView",
note: "noteSubView",
files: "filesSubView"
}, u = [ "title", "completed", "starred", "assignee", "duedate", "reminder", "listSubtasks", "addSubtasks", "note", "openFullscreenNote", "addFile", "listFiles", "listComments", "addComments", "closeDetailView", "delete" ];
return r.extend({
"implements": {
"focus:attribute": "focusAttribute",
"focus:next": "focusNextAttribute",
"focus:prev": "focusPrevAttribute",
"focus:fromTab": "focusFromTab"
},
initialize: function() {
var t = this;
l.initialize.apply(t, arguments), t.lists = new a("/lists/all"), t.currentEditMode = null, 
t.bindTo(e, "route", t.updateLastFocus), t.bindTo(e, "update:direction", t.updateDirection);
},
focusAttribute: function(e) {
var t = this, i = t.view;
switch (e) {
case "title":
var n = !i.titleSubView.isEditingTitle();
n && i.titleSubView.trigger("focus", d);
break;

case "completed":
i.focusCompleted();
break;

case "starred":
i.focusStarred();
break;

case "listSubtasks":
i.focusListSubtasks(t.direction);
break;

case "addSubtasks":
i.focusAddSubtasks();
break;

case "closeDetailView":
i.focusCloseDetailView();
break;

case "delete":
i.focusDelete();
break;

case "openFullscreenNote":
i.focusOpenFullscreenButton();
break;

case "addFile":
i.focusAddFile();
break;

case "listFiles":
i.focusListFiles(t.direction);
break;

case "listComments":
t.defer(function() {
i.trigger("focus:listComments", t.direction);
});
break;

case "addComments":
t.defer(function() {
i.trigger("focus:addComments");
});
break;

default:
var a = c[e];
i[a] && i[a].trigger("focus", d);
}
},
updateDirection: function(e) {
this.direction = e;
},
cycleFocus: function(t) {
var i, n = this, a = n.view, r = s.indexOf(u, n.currentFocus);
if (n.updateDirection(t), o.run(), "next" === t ? i = r === u.length - 1 ? 0 : r + 1 : "prev" === t && (i = r > 0 ? r - 1 : u.length - 1), 
"assignee" === u[i]) {
var l = n.lists.get(a.model.attributes.list_id);
l.isShared() || (i = "next" === t ? i + 1 : i - 1);
}
e.trigger("route:" + a.model.route(u[i] + "/focus"));
},
focusFromTab: function(e) {
var i = this, n = e.which === t.tab;
n && !e.shiftKey ? i.focusElement(e, "next") : n && e.shiftKey ? i.focusElement(e, "prev") : i.checkForEsc(e);
},
checkForEsc: function(i) {
var n = this;
if (i.which === t.esc && n.currentFocus) {
var a = e.currentRoute();
e.trigger(a.indexOf("/focus") >= 0 ? "route:" + n.view.model.route() : "route:" + n.view.model.route(n.currentFocus + "/focus")), 
n.stopEventFully(i);
}
},
focusElement: function(e, t) {
var i = this;
i.cycleFocus(t), i.stopEventFully(e);
},
focusNextAttribute: function(e) {
var i = this;
e.which !== t.tab || e.shiftKey ? i.checkForEsc(e) : i.focusElement(e, "next");
},
focusPrevAttribute: function(e) {
var i = this;
e.which === t.tab && e.shiftKey && i.focusElement(e, "prev");
},
updateLastFocus: function(e) {
var t = this, i = e && e[0];
if (i) {
var n = i.split("/");
"tasks" === n[0] && "focus" === n[3] && (t.currentFocus = n[2]);
}
}
});
}), define("views/TaskDetail/Controllers/TaskDetailEditController", [ "application/runtime", "wunderbits/data/keycodes", "wunderbits/helpers/date", "helpers/Animator", "wunderbits/WBBlurHelper", "wunderbits/WBViewController" ], function(e, t, i, n, a, o) {
var r = e._, s = o.prototype;
return o.extend({
"implements": {
"start:edit": "openEditMode"
},
initialize: function() {
var t = this;
s.initialize.apply(t, arguments), t.currentEditMode = null, t.bindTo(e, "route", t.updateLastOpenEditMode);
},
openEditMode: function(e, t) {
var i = this, n = i.view;
if (e) switch (t = t || {}, e) {
case "title":
var a = n.titleSubView.$(".edit-view").hasClass("hidden");
a && n.titleSubView.trigger("click:title");
break;

case "assignee":
i.currentEditMode = "assignee", n.assignSubView.trigger("toggle:edit");
break;

case "duedate":
n.dateSubView.trigger("toggle:edit");
break;

case "reminder":
n.reminderSubView.trigger("click:self");
break;

case "subtasks":
var o = n.subtasksSubView.addSubTaskView;
o.$el.hasClass("hidden") ? (i.currentEditMode = "subtasks", i.cycleEditMode(t.direction)) : o.showEditMode();
break;

case "note":
var r = n.noteSubView;
t.fullscreen ? r.onOpenFullscreen(t.edit) : r.onToggleEditMode();
break;

case "comments":
i.defer(function() {
n.trigger("focus:comments");
});
}
},
cycleEditMode: function(e) {
var t = this, i = t.view, n = [ "title", "duedate", "reminder", "subtasks", "note", "comments" ];
i.isShared && n.splice(1, 0, "assignee");
var o, s = r.indexOf(n, t.currentEditMode);
a.run(), "next" === e ? o = s === n.length - 1 ? 0 : s + 1 : "prev" === e && s > 0 && (o = s - 1), 
t.openEditMode(n[o], {
direction: e
});
},
updateLastOpenEditMode: function(e) {
var t = this, i = e && e[0];
if (i) {
var n = i.split("/");
"tasks" === n[0] && "edit" === n[3] && (t.currentEditMode = n[2]);
}
}
});
}), define("views/TaskDetail/Controllers/TaskDetailCommentsController", [ "wunderbits/WBViewController", "collections/TaskCommentsCollection", "collections/TaskCommentsStateCollection" ], function(e, t, i) {
return e.extend({
"implements": {
"comments:read:all": "onAllCommentsRead"
},
onAllCommentsRead: function() {
var e = this.view.model;
if (e) {
var n = new t("/tasks/" + e.id + "/comments"), a = new i("/tasks/" + e.id + "/taskCommentsStates").at(0), o = n.models;
o.filter(function(e) {
return !!e.attributes.online_id;
}), o.sort(function(e, t) {
return parseInt(e.attributes.online_id, 10) > parseInt(t.attributes.online_id, 10) ? 1 : -1;
});
var r = o[o.length - 1];
a && r && a.save({
last_read_id: r.id,
unread_count: 0
});
}
}
});
}), define("/templates/symbols/close-right.js", {
name: "symbols/close-right",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<svg class="close-right" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"> <title>close-right</title> <desc>Created with Sketch.</desc> <defs></defs> <g stroke="none" stroke-width="1" fill-rule="evenodd" sketch:type="MSPage"> <g id="close-right" sketch:type="MSArtboardGroup" > <path d="M4.5,18 C3.12,18 2,16.88 2,15.5 L2,4.5 C2,3.12 3.12,2 4.5,2 L15.5,2 C16.88,2 18,3.12 18,4.5 L18,15.5 C18,16.88 16.88,18 15.5,18 L4.5,18 Z M4.5,3 C3.68,3 3,3.68 3,4.5 L3,15.5 C3,16.32 3.68,17 4.5,17 L15.5,17 C16.32,17 17,16.32 17,15.5 L17,4.5 C17,3.68 16.32,3 15.5,3 L4.5,3 Z M7.5,15 C7.38,15 7.24,14.96 7.14,14.86 C6.96,14.66 6.96,14.34 7.14,14.14 L11.3,10 L7.14,5.86 C6.96,5.66 6.96,5.34 7.14,5.14 C7.34,4.96 7.66,4.96 7.86,5.14 L12.36,9.64 C12.54,9.84 12.54,10.16 12.36,10.36 L7.86,14.86 C7.76,14.96 7.62,15 7.5,15 L7.5,15 Z" id="i" sketch:type="MSShapeGroup"></path> </g> </g> </svg>';
},
useData: !0
}
}), define("/templates/detailview/detail.js", {
name: "detailview/detail",
data: {
"1": function() {
return "true";
},
"3": function() {
return "false";
},
"5": function() {
return "checked";
},
"7": function() {
return " hidden ";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = t.helperMissing, s = this.escapeExpression, l = '<div class="inner"> <a class="detail-checkbox" role="checkbox" aria-checked="';
return a = t["if"].call(e, e && e.completed, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.program(3, n),
data: n
}), (a || 0 === a) && (l += a), l += '" data-key-aria-label="smart_list_completed" tabindex="0"> <span class="checkBox big ', 
a = t["if"].call(e, e && e.completed, {
name: "if",
hash: {},
fn: this.program(5, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '"></span> </a> <a class="detail-star" role="checkbox" aria-checked="', 
a = t["if"].call(e, e && e.starred, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.program(3, n),
data: n
}), (a || 0 === a) && (l += a), l += '" data-key-aria-label="smart_list_starred" tabindex="0"> <span class="wundercon starred ', 
a = t["if"].call(e, e && e.starred, {
name: "if",
hash: {},
fn: this.program(7, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += '"/> <span class="icon detail-starred ', a = t.unless.call(e, e && e.starred, {
name: "unless",
hash: {},
fn: this.program(7, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l + '"/> </a> <div class="title-container"></div> <div class="body"> <div class="body-top"> </div> </div> <div class="dropTarget"></div> <div class="bottom"> <a class="detail-close" tabindex="0" aria-label="Close task view"> ' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "close-right", {
name: "symbol",
hash: {},
data: n
}))) + ' </a> <a class="detail-trash" role="button" data-key-aria-label="button_delete" tabindex="0"> ' + s((o = t.symbol || e && e.symbol || r, 
o.call(e, "trash", {
name: "symbol",
hash: {},
data: n
}))) + " </a> </div> </div> ";
},
useData: !0
}
}), define("/styles/_detail.js", {
name: "_detail",
data: '#detail{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;padding:14px;top:0;bottom:0;width:354px;z-index:1;}#detail .inner{position:relative;background:#fff;-webkit-box-shadow:0 1px 2px 0 rgba(0,0,0,0.12);box-shadow:0 1px 2px 0 rgba(0,0,0,0.12);-webkit-border-radius:4px;border-radius:4px;overflow:hidden;height:100%}#detail .title{min-height:24px;overflow:hidden;padding:16px 50px 14px;-webkit-border-radius:5px 5px 0 0;border-radius:5px 5px 0 0;font-size:16px;line-height:24px;font-weight:bold;border-bottom:1px solid rgba(0,0,0,0.12);-webkit-box-shadow:0 1px 2px rgba(0,0,0,0.06);box-shadow:0 1px 2px rgba(0,0,0,0.06);text-shadow:0 1px 0 #fff;word-wrap:break-word;}#detail .title .display-view span{-webkit-user-select:text !important;-moz-user-select:text !important;-ms-user-select:text !important;user-select:text !important}#detail .title .title-text.strike-through{text-decoration:line-through;text-shadow:none}#detail .title textarea,#detail .title pre{font-size:16px;line-height:24px;font-weight:bold;-webkit-box-shadow:none;box-shadow:none;text-shadow:0 1px 0 #fff;word-wrap:break-word}#detail .title .expandable-container{margin:-1px -4px -1px -7px;background:#fff;padding:0 6px;border:1px #aaa solid}#detail .title-container{position:relative;z-index:1;}#detail .title-container .title:focus .content-fakable{color:#186ab2}#detail .detail-checkbox:focus span{-webkit-box-shadow:0 0 5px rgba(24,106,178,0.3);box-shadow:0 0 5px rgba(24,106,178,0.3);border:1px solid rgba(24,106,178,0.6)}#detail .detail-star:focus .wundercon{color:#186ab2;fill:#186ab2}#detail .checkBox.big{position:absolute;left:18px;top:18px}#detail .wundercon.starred,#detail .icon.detail-starred{position:absolute;right:15px;top:-4px}#detail .wundercon.starred,#detail .checkBox.big,#detail .detail-starred{z-index:5}#detail .wundercon.starred{width:27px;height:53px;padding-top:20px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;text-align:center;color:#737272}#detail .body{background:#f6f6f6;overflow:auto;position:absolute;top:55px;bottom:78px;right:0;left:0;padding:10px;overflow-x:hidden;}#detail .body .section{position:relative;padding:5px 20px 5px 40px;background:#fff;border:1px solid #dedddc;height:28px;margin-bottom:10px;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 3px rgba(0,0,0,0.1);box-shadow:0 1px 3px rgba(0,0,0,0.1);}#detail .body .section:focus{-webkit-box-shadow:0 0 5px rgba(24,106,178,0.3),inset 0 0 0 1px rgba(24,106,178,0.6);box-shadow:0 0 5px rgba(24,106,178,0.3),inset 0 0 0 1px rgba(24,106,178,0.6)}#detail .body .section .target{display:block;width:1px;height:1px;position:absolute;top:25px;margin-left:5px}#detail .body .section .reminder,#detail .body .section .date,#detail .body .section .assigned{position:absolute;left:9px;top:10px;fill:#737272}#detail .body .section .detail-delete{position:absolute;top:10px;right:6px;display:none}#detail .body .section .section-title{white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;margin-top:6px;font-size:13px;color:#9fa2a6}#detail .body .section .section-description{display:none;font-size:11px}#detail .body .section.date:hover .detail-delete{display:inline-block}#detail .body .section.date .section-title.repeat{margin-top:-1px}#detail .body .section.date .section-description.repeat{display:block;}#detail .body .section.date .section-description.repeat.hidden{display:none}#detail .body .section.date .select{width:80%}#detail .body .section.date.overdue .section-title{color:#b3312d}#detail .body .section.date.overdue .date,#detail .body .section.date.overdue .reminder{fill:#b3312d}#detail .body .section.date:hover .detail-delete,#detail .body .section.assigned:hover .detail-delete{display:inline-block}#detail .body .section.date .section-title,#detail .body .section.assigned .section-title{color:#186ab2}#detail .body .section.date .date,#detail .body .section.assigned .date,#detail .body .section.date .assigned,#detail .body .section.assigned .assigned,#detail .body .section.date .reminder,#detail .body .section.assigned .reminder{fill:#3a73a6}#detail .body .section.date .avatar,#detail .body .section.assigned .avatar{position:absolute;left:10px;top:8px}#detail .body .section.date .assigned,#detail .body .section.assigned .assigned{display:none}#detail .body .section.editing .detail-delete{display:inline-block;}#detail .body .section.editing .detail-delete:hover{cursor:pointer}#detail .body .section.editing .section-edit{display:inline-block}#detail .body .subtask:focus,#detail .body .addtask:focus,#detail .body .note:focus,#detail .body .comment:focus,#detail .body .files-add-clippy:focus,#detail .body .files-add-record:focus,#detail .body .open-fullscreen-note:focus,#detail .body .files-add-dropbox:focus,#detail .body .detail-close:focus,#detail .body .start-recording-audio:focus,#detail .body .play-recorded-audio:focus,#detail .body .clear-recorded-audio:focus,#detail .body .upload-recorded-audio:focus{-webkit-box-shadow:0 0 5px rgba(24,106,178,0.3),inset 0 0 0 1px rgba(24,106,178,0.6);box-shadow:0 0 5px rgba(24,106,178,0.3),inset 0 0 0 1px rgba(24,106,178,0.6)}#detail .body .file:focus{border:1px solid #186ab2}#detail .body .subtask:focus{z-index:600}#detail .body-top{background:#fff;margin-bottom:10px;border:1px solid rgba(0,0,0,0.16);-webkit-box-shadow:0 1px 2px rgba(0,0,0,0.06);box-shadow:0 1px 2px rgba(0,0,0,0.06);-webkit-border-radius:3px;border-radius:3px;}#detail .body-top .section{margin:0;border:none;border-bottom:1px solid rgba(0,0,0,0.12);-webkit-border-radius:0;border-radius:0;-webkit-box-shadow:none;box-shadow:none;background:none;}#detail .body-top .section:last-child{border:none}#detail .bottom{position:absolute;bottom:0;right:0;left:0;-webkit-border-radius:0 0 5px 5px;border-radius:0 0 5px 5px;z-index:9000;height:35px;}#detail .bottom .detail-info{font-size:11px;text-align:center;padding:0 35px 0 35px;margin-top:11px;color:#a3a3a2;text-shadow:0 1px 0 rgba(255,255,255,0.75);}#detail .bottom .detail-info .token_1,#detail .bottom .detail-info .token_0{vertical-align:bottom;display:inline-block;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}#detail .bottom .detail-close,#detail .bottom .detail-trash{position:absolute;top:8px;opacity:.6;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";filter:alpha(opacity=60);}#detail .bottom .detail-close:hover,#detail .bottom .detail-trash:hover{opacity:.8;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";filter:alpha(opacity=80)}#detail .bottom .detail-close:active,#detail .bottom .detail-trash:active{opacity:1;-ms-filter:none;filter:none}#detail .bottom .detail-close:focus,#detail .bottom .detail-trash:focus{color:#186ab2;fill:#186ab2}#detail .bottom .detail-close{left:8px}#detail .bottom .detail-trash{right:8px}#detail .bottom a:focus .wundercon{color:#186ab2;fill:#186ab2}#detail.complete .body .section.date .section-title,#detail.complete .body .section.assigned .section-title,#detail.complete .body .section.date .section-description,#detail.complete .body .section.assigned .section-description{color:#999}#detail.complete .body .section.date:hover .detail-delete,#detail.complete .body .section.assigned:hover .detail-delete{display:none}html[dir=rtl] #detail .detail-checkbox .checkBox.big{left:initial;right:18px}html[dir=rtl] #detail .detail-star .wundercon.starred,html[dir=rtl] #detail .detail-star .icon.detail-starred{left:15px;right:initial}html[dir=rtl] #detail .detail-trash{right:initial;left:8px}html[dir=rtl] #detail .detail-right{left:initial;right:8px}html[dir=rtl] #detail .body .section{padding-left:20px;padding-right:40px;}html[dir=rtl] #detail .body .section.assigned .avatar{left:initial;right:10px}html[dir=rtl] #detail .body .section .detail-close{left:initial;right:10px}html[dir=rtl] #detail .body .section .detail-delete{right:initial;left:6px}html[dir=rtl] #detail .body .note .open-fullscreen-note{left:14px;right:initial;padding-left:0;padding-right:10px}'
}), define("views/TaskDetail/TaskDetailView", [ "application/runtime", "wunderbits/helpers/date", "wunderbits/data/keycodes", "helpers/domtools", "wunderbits/helpers/selection", "models/TaskModel", "views/TaskDetail/TaskDetailAssignView", "views/TaskDetail/TaskDetailDateView", "views/TaskDetail/TaskDetailReminderView", "views/TaskDetail/TaskDetailNoteView", "views/TaskDetail/TaskDetailTitleView", "views/TaskDetail/TaskDetailFilesView", "views/TaskDetail/TaskDetailSubtasksView", "views/TaskDetail/Comments/TaskDetailInfoView", "views/TaskDetail/Comments/TaskDetailCommentsView", "views/TaskDetail/Comments/TaskDetailCommentListView", "views/TaskDetail/Controllers/TaskDetailClickController", "views/TaskDetail/Controllers/TaskDetailFocusController", "views/TaskDetail/Controllers/TaskDetailEditController", "views/TaskDetail/Controllers/TaskDetailCommentsController", "partial!symbols/trash", "partial!symbols/close-right", "wunderbits/WBViewPresenter", "wunderbits/WBContentFakable", "wunderbits/WBValidationHelper", "wunderbits/WBBlurHelper", "project!core/WBDeferred", "template!detailview/detail", "style!_detail", "style!checkBox" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m, g, f, b, h, v, _, w, k, x, y, C, T, S, L, D, M, z) {
var j = e._, I = e.$, A = e.global, P = T, F = C, B = x.prototype;
return x.extend({
template: L,
id: "detail",
className: "stack",
styles: [ D, M ],
"implements": [ b, h, v, _ ],
emits: {
click: "toggle:view",
"click .checkBox.big": "toggle:done",
"click a.detail-star": "toggle:starred",
"click .detail-trash": "click:delete",
"click .detail-close": "click:close",
"touchstart a.detail-checkbox": "toggle:done",
"touchstart a.detail-star": "toggle:starred",
"keydown .title": "focus:fromTab",
"keydown a.detail-checkbox": "focus:fromTab",
"keydown a.detail-star": "focus:fromTab",
"keydown div.detail-date:not(.editing)": "focus:fromTab",
"keydown div.detail-reminder:not(.editing)": "focus:fromTab",
"keydown div.detail-assign:not(.editing)": "focus:fromTab",
"keydown .subtasks": "focus:fromTab",
"keydown .note": "focus:fromTab",
"keydown .files-add": "focus:fromTab",
"keydown .comments-add textarea": "focus:fromTab",
"keydown a.detail-trash": "focus:fromTab"
},
observes: {
events: {
"scroll:top": "scrollToTop",
"route:addFile": "focusAddFile",
"cancel:changes": "cancelSubviewChanges",
"focus:addComments": "focusAddComments",
"focus:listComments": "focusListComments"
},
runtime: {
"detail:scrollToEnd": "scrollToEnd",
"detail:close": "closeSelf",
"detail:navigate": "navigate",
"detail:checkBounds": "debouncedUpdateCommentsInterface",
"window:resize": "debouncedUpdateCommentsInterface"
},
settings: {
"change:show_completed_items": "onUpdateDone"
},
commentsSubView: {
"change:height": "adjustBottom"
},
commentsListSubView: {
lastComment: "pipeLastComment"
},
titleSubView: {
"title:resized": "resizeBodyToTitle"
}
},
initialize: function() {
var t = this;
t.debouncedUpdateCommentsInterface = t.debounce(t.updateCommentsInterface, 250), 
t.commentsSubView = t.addSubview(new g()), t.commentsListSubView = t.addSubview(new f()), 
t.titleSubView = t.addSubview(new c()), t.settings = e.settings, B.initialize.apply(t, arguments), 
t.state = new e.Backbone.Model(), t.assignSubView = t.addSubview(new r()), t.dateSubView = t.addSubview(new s()), 
t.reminderSubView = t.addSubview(new l()), t.noteSubView = t.addSubview(new d()), 
t.filesSubView = t.addSubview(new u()), t.infoSubView = t.addSubview(new m());
},
renderData: {
completed: z,
starred: z
},
formatData: function(e) {
var t = this.model;
return e.completed = t.isCompleted(), e.starred = t.isStarred(), e;
},
render: function() {
var e = this;
return B.render.call(e, e.formatData(e.renderData)), e.subtasksSubView = e.addSubview(new p({
model: e.model
})), e.hasRenderedOnce || e.renderTitleView().done(e.renderInitialTitleHeight, e), 
e.renderSubviews(), e.bindToBodyScroll(), e.hasRenderedOnce = !0, e;
},
renderTitleView: function() {
var e = this, t = new S();
return e.requestAnimationFrame(function() {
var i = e.titleSubView.render({
model: e.model,
isShared: e.isShared
}).el;
e.titleSubView.renderWithModel(e.model), e.$(".title-container").append(i), e.titleSubView.renderTitle(), 
t.resolve();
}), t.promise();
},
renderInitialTitleHeight: function() {
var e = this;
e.requestAnimationFrame(function() {
var t = e.$("div.title"), i = e.titleSubView.defaultBodyContainerTop + (t.height() - e.titleSubView.defaultTitleContainerHeight) + "px";
e.$(".body").not(".clone").css({
top: i
});
});
},
renderSubviews: function() {
var t = this;
t.requestAnimationFrame(function() {
var i = t.$el, n = t.$(".body"), a = t.model.attributes, o = 250, r = t.$el.position().left + t.$el.width() >= I(A).width() ? o : 0, s = t.animationDeferred = t.getAnimationPromise(!!r, o);
t.hasRenderedOnce && s.done(function() {
t.titleSubView.renderWithModel(t.model);
}), a.completed && i.addClass("complete");
var l = document.createDocumentFragment(), d = document.createDocumentFragment(), c = {
model: t.model,
delay: r,
animationDeferred: s,
isShared: t.isShared
}, u = t.renderAssignView(), p = t.dateSubView.render(c).el, m = t.reminderSubView.render(c).el, g = t.subtasksSubView.render(c).el, f = t.infoSubView.render(c).el, b = t.noteSubView.render(c).el, h = t.filesSubView.render(c).el, v = t.commentsSubView.render(c).el, _ = t.commentsListSubView.render(c).el;
t.hasRederedSubviewsOnce || (d.appendChild(u), d.appendChild(p), d.appendChild(m), 
l.appendChild(g), l.appendChild(b), l.appendChild(h), l.appendChild(_), n.find(".body-top").append(d), 
n.append(l), t.$(".bottom")[0].appendChild(f), t.$(".inner")[0].insertBefore(v, t.$(".bottom")[0]), 
t.hasRederedSubviewsOnce = !0), e.trigger("detail:rendered", t.model.id), t.defer(t.updateCommentsInterface, t);
});
},
renderAssignView: function() {
var e = this;
return e.assignSubView.render({
model: e.model,
isShared: e.isShared,
animationDeferred: e.animationDeferred
}).el;
},
renderWithModel: function(e, t) {
var i = this;
return i.onClose = t && t.onClose, i.isShared = t && t.isShared, e === i.model ? i.trigger("scroll:top") : (i.setupModelBinds(e), 
void (i.hasRenderedOnce ? (i.onUpdateStarred(), i.onUpdateDone(), i.renderSubviews()) : i.render()));
},
getAnimationPromise: function(e, t) {
var i = this, a = new S();
if (e) {
var o = function() {
a.resolve();
};
n.once(i.el, "transitionend", o), setTimeout(function() {
a.resolve();
}, t || 1e3);
} else a.resolve();
return a.promise();
},
bindToBodyScroll: function() {
var t = this;
t.$(".body").scroll(function() {
e.trigger("interface:scroll"), t.updateCommentsInterface();
});
},
setupModelBinds: function(e) {
var t = this;
t.model && t.unbindFromTarget(t.model), t.model = e || t.model, F.classCheckAttribute(t, "model", o, "TaskModel"), 
t.bindTo(t.model, "change:starred", t.onUpdateStarred), t.bindTo(t.model, "change:completed", t.onUpdateDone), 
t.bindTo(t.model, "change:list_id", t.closeSelf), t.bindTo(t.model, "change:list_id", t.renderAssignView);
},
pipeLastComment: function(e) {
this.commentsSubView.trigger("lastComment", e);
},
navigate: function(t) {
var i = this;
"left" === t && (P.run(), e.trigger("route:" + i.model.route()));
},
onUpdateStarred: function() {
var e = this, t = e.model.isStarred(), i = e.$(".wundercon.starred"), n = e.$(".icon.detail-starred");
i.toggleClass("hidden", t), n.toggleClass("hidden", !t);
},
onUpdateDone: function() {
var t = this;
if (t.model) {
var i = t.model.isCompleted(), n = t.$(".checkBox.big"), a = t.$(".title-text"), o = "true" === e.settings.attributes.show_completed_items;
i && !o && t.closeSelf(), t.$el.toggleClass("complete", i), n.toggleClass("checked", i), 
a.toggleClass("strike-through", i);
}
},
closeSelf: function(e) {
var t = this;
"function" == typeof e ? j.defer(e) : t.trigger("close");
},
scrollToTop: function(e) {
var t = this, i = t.$(".body");
return e ? void i.animate({
scrollTop: 0
}, 100) : void i.scrollTop(0);
},
scrollToEnd: function(e, t) {
var i = this, n = i.$(".body"), a = n[0].scrollHeight;
return t && (e = !i.wasScrolledToBottom), e ? void n.animate({
scrollTop: a
}, 500) : void n.scrollTop(a);
},
updateCommentsInterface: function() {
var e = this, t = e.isScrolledToBottom(), i = e.wasScrolledToBottom = t.isScrolledToBottom, n = t.isScrolledToOffsetBottom;
e.$(".last-comment").toggleClass("hidden", n), i && e.model && e.trigger("comments:read:all");
},
isScrolledToBottom: function() {
var e, t = this, i = t.$(".body"), n = t.$(".comments-list li").last(), a = i.scrollTop() + i.outerHeight(), o = i.length && i[0].scrollHeight, r = a >= o, s = !1;
if (n.length) {
var l = 37, d = n.outerHeight() - l;
e = o - d;
}
return s = a >= (e || 0), {
isScrolledToBottom: r,
isScrolledToOffsetBottom: s
};
},
adjustBottom: function() {
var t = this, i = t.$(".body"), n = t.$(".comments-add"), a = n.offset().top, o = e.env.isPackagedApp() ? 75 : 65, r = t.$el.outerHeight() - a - parseInt(t.$el.css("padding-bottom"), 10);
o > r && (r = o), i.css("bottom", r), t.wasScrolledToBottom && t.scrollToEnd(), 
t.wasScrolledToBottom = t.isScrolledToBottom();
},
focusAddComments: function() {
this.commentsSubView.$("textarea").focus();
},
focusListComments: function(e) {
this.commentsListSubView.focusFirstComment(e);
},
resizeBodyToTitle: function(t) {
var i, n = this, a = n.titleSubView, o = a.currentTitleEditHeight, r = n.$(".body");
(null === o || t !== o) && (i = a.defaultBodyContainerTop + (t - a.defaultTitleContainerHeight) + "px", 
r.css("top", i), e.trigger("comments-view:resize"));
},
cancelSubviewChanges: function() {
var e = this;
e.dateSubView.cancelChanges(), e.reminderSubView.onCancelChanges(), e.assignSubView.cancelChanges();
},
focusCompleted: function() {
this.$("a.detail-checkbox").focus();
},
focusStarred: function() {
this.$("a.detail-star").focus();
},
focusListSubtasks: function(e) {
this.subtasksSubView.focusFirstSubtask(e);
},
focusAddSubtasks: function() {
this.$(".addtask").focus();
},
focusDelete: function() {
this.$("a.detail-trash").focus();
},
focusCloseDetailView: function() {
this.$("a.detail-close").focus();
},
focusAddFile: function() {
this.filesSubView.focusFirstUploader();
},
focusListFiles: function(e) {
this.filesSubView.focusFirstFile(e);
},
focusOpenFullscreenButton: function() {
this.noteSubView.focusFullscreenButton();
}
});
}), define("/templates/notifications/systemAlert.js", {
name: "notifications/systemAlert",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression;
return ' <p><span class="icon alert"></span>' + r((a = t.message || e && e.message, 
typeof a === o ? a.call(e, {
name: "message",
hash: {},
data: n
}) : a)) + '</p> <div class="buttons hidden"> <button class="option-one">' + r((a = t.buttonOne || e && e.buttonOne, 
typeof a === o ? a.call(e, {
name: "buttonOne",
hash: {},
data: n
}) : a)) + '</button> <button class="option-two">' + r((a = t.buttonTwo || e && e.buttonTwo, 
typeof a === o ? a.call(e, {
name: "buttonTwo",
hash: {},
data: n
}) : a)) + '</button> </div> <span class="wundercon delete close"></span> ';
},
useData: !0
}
}), define("/styles/notifications/_systemAlert.js", {
name: "notifications/_systemAlert",
data: "#system-alert{min-height:30px;border-bottom:1px solid rgba(0,0,0,0.4);width:100%;background-image:-webkit-linear-gradient(top, #fcf8d3, #e4deab);background-image:-moz-linear-gradient(top, #fcf8d3, #e4deab);background-image:-o-linear-gradient(top, #fcf8d3, #e4deab);background-image:-ms-linear-gradient(top, #fcf8d3, #e4deab);background-image:linear-gradient(to bottom, #fcf8d3, #e4deab);z-index:99999;display:block;position:absolute;}#system-alert.touch-style-notice{min-height:50px;}#system-alert.touch-style-notice p.close,#system-alert.touch-style-notice .icon.close{display:none}#system-alert.touch-style-notice .buttons button{height:44px;padding:0 20px}#system-alert p{display:block;padding-top:8px;padding-bottom:10px;margin-left:15px;vertical-align:bottom;float:left;}#system-alert p a{color:#186ab2;}#system-alert p a:visited{color:#186ab2}#system-alert .icon.alert{vertical-align:top;display:block;margin-left:7px;margin-right:7px;float:left}#system-alert .icon.close{position:absolute;right:5px;top:5px}#system-alert .buttons{display:block;float:right;margin:5px 2px;padding-right:20px;width:200px;}#system-alert .buttons button{padding:4px 10px;display:inline-block}"
}), define("views/Notifications/SystemAlertView", [ "application/runtime", "wunderbits/WBView", "template!notifications/systemAlert", "style!notifications/_systemAlert" ], function(e, t, i, n) {
var a = t.prototype;
return t.extend({
template: i,
styles: [ n ],
id: "system-alert",
events: {
"click .close": "hideAlert",
"click .option-one": "_executeButtonOneAction",
"click .option-two": "_executeButtonTwoAction"
},
initialize: function() {
var t = this;
a.initialize.apply(t, arguments), t.bindTo(e, "systemAlert:slideDown", t.showAlert);
},
render: function(e) {
var t = this;
return e = e || {}, t.options = e, a.render.call(t, e), t.options && t.options.buttonOneAction && t.options.buttonTwoAction && t.$(".buttons").removeClass("hidden"), 
t.$el.hide(), t;
},
showAlert: function() {
var t = this;
t.$el.slideDown(200), e.trigger("systemAlert:show");
},
hideAlert: function() {
this.$el.slideUp(200), e.trigger("systemAlert:hide");
},
_executeButtonOneAction: function() {
var e = this;
"function" == typeof e.options.buttonOneAction && e.options.buttonOneAction();
},
_executeButtonTwoAction: function() {
var e = this;
"function" == typeof e.options.buttonTwoAction && e.options.buttonTwoAction();
}
});
}), define("/templates/sounds/audioElement.js", {
name: "sounds/audioElement",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression;
return '<audio id="' + r((a = t.name || e && e.name, typeof a === o ? a.call(e, {
name: "name",
hash: {},
data: n
}) : a)) + '" class="hidden"> <source class="ogg" src="" type="audio/ogg"/> <source class="m4a" src="" type="audio/mp4"/> </audio>';
},
useData: !0
}
}), define("views/Sounds/SoundPlayer", [ "application/runtime", "helpers/URLResolver", "wunderbits/WBView", "template!sounds/audioElement" ], function(e, t, i, n) {
var a = e.$, o = i.prototype, r = {
bell: "wl3-notification",
complete: "wl3-complete"
};
return i.extend({
id: "audio-player",
initialize: function() {
var t = this;
o.initialize.apply(t, arguments), t.bindTo(e, "sounds:play", t.debounce(t.play, 250, !0));
},
render: function() {
var e = this;
o.render.apply(e, arguments);
var i;
for (var s in r) r.hasOwnProperty(s) && (e.el.appendChild(a(n({
name: r[s]
}))[0]), i = e.$("#" + r[s]), i.find(".ogg").attr("src", t.resolve("sounds/" + r[s] + ".ogg")), 
i.find(".m4a").attr("src", t.resolve("sounds/" + r[s] + ".m4a")));
return e;
},
play: function(e) {
var t = this, i = t.$el.find("#" + r[e])[0];
if (i && i.load) {
var n = function() {
i.removeEventListener("canplaythrough", n), i.pause(), i.currentTime = 0, i.play();
};
i.load(), i.addEventListener("canplaythrough", n);
}
}
});
}), define("/templates/print/printItem.js", {
name: "print/printItem",
data: {
"1": function() {
return ' <span class="task-starred"></span> ';
},
"3": function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression;
return ' <span class="duedate"> ' + r((a = t.due_date || e && e.due_date, typeof a === o ? a.call(e, {
name: "due_date",
hash: {},
data: n
}) : a)) + "</span> ";
},
"5": function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression;
return ' <span class="assignee">' + r((a = t.assignee_name || e && e.assignee_name, 
typeof a === o ? a.call(e, {
name: "assignee_name",
hash: {},
data: n
}) : a)) + "</span> ";
},
"7": function(e, t, i, n) {
var a, o = ' <ul class="subtasks"> ';
return a = t.each.call(e, e && e.subtasks, {
name: "each",
hash: {},
fn: this.program(8, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (o += a), o + " </ul> ";
},
"8": function(e, t, i, n) {
var a, o, r = "function", s = this.escapeExpression, l = ' <li class="';
return a = t["if"].call(e, e && e.completed, {
name: "if",
hash: {},
fn: this.program(9, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l + '"> ' + s((o = t.title || e && e.title, typeof o === r ? o.call(e, {
name: "title",
hash: {},
data: n
}) : o)) + " </li> ";
},
"9": function() {
return "done";
},
"11": function(e, t, i, n) {
var a, o = "function", r = this.escapeExpression;
return ' <div class="note">' + r((a = t.note || e && e.note, typeof a === o ? a.call(e, {
name: "note",
hash: {},
data: n
}) : a)) + "</div> ";
},
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o, r = "function", s = this.escapeExpression, l = "";
return a = t["if"].call(e, e && e.starred, {
name: "if",
hash: {},
fn: this.program(1, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += " ", a = t["if"].call(e, e && e.due_date, {
name: "if",
hash: {},
fn: this.program(3, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += " ", a = t["if"].call(e, e && e.assignee_name, {
name: "if",
hash: {},
fn: this.program(5, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += ' <span class="title">' + s((o = t.title || e && e.title, 
typeof o === r ? o.call(e, {
name: "title",
hash: {},
data: n
}) : o)) + "</span> ", a = t["if"].call(e, e && e.subtasks, {
name: "if",
hash: {},
fn: this.program(7, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l += " ", a = t["if"].call(e, e && e.note, {
name: "if",
hash: {},
fn: this.program(11, n),
inverse: this.noop,
data: n
}), (a || 0 === a) && (l += a), l;
},
useData: !0
}
}), define("views/Print/PrintTaskItem", [ "application/runtime", "wunderbits/WBView", "collections/TaskCollection", "collections/SubtaskCollection", "collections/NoteCollection", "collections/UserCollection", "wunderbits/helpers/date", "vendor/moment", "template!print/printItem" ], function(e, t, i, n, a, o, r, s, l) {
var d = t.prototype;
return t.extend({
template: l,
tagName: "li",
initialize: function() {
var e = this;
d.initialize.apply(e, arguments);
},
render: function() {
var t = this, i = t.model.toJSON(), o = new n("/tasks/" + i.id + "/subtasks"), r = new a("/tasks/" + i.id + "/notes");
return i.due_date && (i.due_date = s(i.due_date, "YYYY-MM-DD").format(e.settings.attributes.date_format)), 
i.assignee_id && (i.assignee_name = t.getAssigneeNameFromId(i.assignee_id, i.list_id)), 
o.length && (i.subtasks = o.toJSON()), r.length && (i.note = r.models[0].attributes.content), 
i.completed && t.$el.addClass("done"), d.render.call(t, i), t;
},
getAssigneeNameFromId: function(e, t) {
var i = new o("/lists/" + t + "/assignables"), n = i.get(e);
return n ? n.attributes.name : "";
}
});
}), define("/templates/print/print.js", {
name: "print/print",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<h1></h1> <ul class="uncompleted"></ul> <ul class="completed"></ul> <div class="note"></div>';
},
useData: !0
}
}), define("/templates/print/printSmartList.js", {
name: "print/printSmartList",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<h2 class="title"><span></span></h2> <ul class="uncompleted"></ul> <ul class="completed"></ul>';
},
useData: !0
}
}), define("views/Print/PrintListItem", [ "application/runtime", "wunderbits/WBView", "collections/TaskCollection", "collections/ListCollection", "views/Print/PrintTaskItem", "template!print/print", "template!print/printSmartList" ], function(e, t, i, n, a, o, r) {
var s = e._, l = t.prototype;
return t.extend({
template: o,
initialize: function(e) {
e = e || {};
var t = this;
l.initialize.apply(t, arguments), t.listId = e.listId, t.taskIds = e.taskIds, e.isSmartList ? (t.isSmartList = !0, 
t.smartListModels = e.smartListModels, t.smartListTitle = e.smartListTitle, t.template = r) : (t.lists = new n("/lists/all"), 
t.tasks = new i("/lists/" + t.listId + "/tasks"));
},
render: function() {
var e = this;
return l.render.apply(e, arguments), e.taskIds && e.taskIds.length ? e._printselectedItems() : e._printList(), 
e;
},
_setIcon: function(e) {
var t = this;
t.$("h1").addClass(e);
},
_setTitle: function(e) {
var t = this;
t.isSmartList ? t.$("h2.title span").text(e) : t.$("h1").text(e);
},
_printselectedItems: function() {
var e = this, t = document.createDocumentFragment(), i = e.$("ul.uncompleted"), n = e._filterModelsByIds(e._getModels(), e.taskIds);
s.each(n, function(i) {
t.appendChild(e.addSubview(new a({
model: i
})).render().el);
}), i.append(t), e._setTitle(e._getListName()), e._setIcon(e.listId);
},
_getListName: function() {
var t, i = this;
if (i.isSmartList) t = i.smartListTitle; else {
var n = i.lists.get(i.listId);
t = n ? n.isInbox() ? e.language.getText("smart_list_inbox") : n.attributes.title : "";
}
return t;
},
_getModels: function() {
var e = this;
return e.isSmartList ? e.smartListModels : e.tasks.models;
},
_printList: function() {
var t = this, i = document.createDocumentFragment(), n = document.createDocumentFragment(), o = t.$("ul.uncompleted"), r = t.$("ul.completed"), l = t._getListName(), d = "true" === e.settings.attributes.print_completed_items || "completed" === t.listId;
s.each(t._getModels(), function(e) {
e.attributes.completed ? d && n.appendChild(t.addSubview(new a({
model: e
})).render().el) : i.appendChild(t.addSubview(new a({
model: e
})).render().el);
}), o.append(i);
var c = n.childNodes.length > 0;
d && c && ("completed" !== t.listId && r.before('<h2 class="completed-heading"><span>' + e.language.getText("smart_list_completed") + "</span></h2>"), 
r.append(n)), t._setTitle(l), t._setIcon(t.listId);
},
_filterModelsByIds: function(e, t) {
return s.filter(e, function(e) {
return s.indexOf(t, e.attributes.id) > -1;
});
}
});
}), define("/styles/_print.js", {
name: "_print",
data: "@media print{@page{margin:2.5cm}*{margin:0;padding:0;background:none;-webkit-box-shadow:none !important;box-shadow:none !important;outline:none !important}body{margin:1px}body,.main-interface{color:#1a1919;height:auto !important;position:relative !important;overflow:visible !important;}body:before,.main-interface:before{display:none}body:after,.main-interface:after{display:none}#wunderlist-base.chrome.packaged .mac-titlebar{display:none}#wunderlist-base.chrome.packaged .main-interface{top:0 !important}#stacks,#modals,.popover{display:none !important}#print{display:block !important;}#print.fullscreen-note ul.subtasks{display:none !important}#print h1{font-size:17px !important;border-bottom:1px solid #000;padding-bottom:12px;margin-bottom:8px;font-weight:500 !important;}#print h1.smartlist{border:none;}#print h1.smartlist + div h2{margin-top:-8px}#print h1 span{position:absolute;font-size:8px;left:3px;width:10px;text-align:center;top:9px}#print h1:before{font-family:'Wundercon-Pictograms','Arial';content:'K';margin-right:8px}#print h1.inbox:before{content:'A'}#print h1.starred:before{content:'D'}#print h1.today:before{content:'c'}#print h1.week:before{content:'F'}#print h1.all:before{content:'G'}#print h1.completed:before{content:'d'}#print h1.task:before{content:'K'}#print h1.assigned:before{content:'B'}#print h1.conversations:before{content:'I'}#print h2{position:relative;font-size:10px;text-align:center;border-bottom:1px solid #777;height:0;margin:8px 0;}#print h2 span{font-weight:normal;position:relative;background:#fff;padding:0 5px;top:-7px}#print .note{font-size:11px !important;width:66%;padding:5px 0 10px 0;white-space:pre-wrap;font-family:Georgia;line-height:150%;position:relative;border:none}#print ul{border:none;-webkit-box-shadow:none;box-shadow:none;}#print ul li{padding:5px 0 5px 24px !important;border-bottom:1px dotted #777;position:relative;-webkit-box-shadow:none;box-shadow:none;}#print ul li:before{font-size:16px;content:'';width:8px;height:8px;border:2px solid #000;-webkit-border-radius:2px;border-radius:2px;position:absolute;left:2px;top:9px}#print ul li.done:before{border:none;font-family:'Wundercon-Pictograms','Arial';content:'d'}#print ul li:last-child{border-bottom:none !important}#print ul li .title{font-size:13px !important;line-height:1.5em}#print ul li .task-checkbox,#print ul li .task-separator,#print ul li .wundercon.recurrence,#print ul li .attachment,#print ul li .task-assign{display:none}#print ul li .duedate,#print ul li .assignee{float:right;font-size:9px !important;margin-top:4px}#print ul li .duedate{margin-left:10px}#print ul li span.task-starred{display:block !important;background:none;float:right;margin-left:10px;height:auto;width:auto;}#print ul li span.task-starred:before{font-size:16px;font-family:'Wundercon-Pictograms','Arial';content:'D'}#print ul ul.subtasks{border:none;-webkit-box-shadow:none;box-shadow:none;}#print ul ul.subtasks li{border-bottom:none;padding:2px 0 2px 18px !important;font-size:11px !important;line-height:1.5em;font-weight:400 !important;}#print ul ul.subtasks li:after{display:none}#print ul ul.subtasks li:before{content:'';width:8px;height:8px;border:2px solid #000;-webkit-border-radius:2px;border-radius:2px;position:absolute;left:2px;top:3px}#print ul ul.subtasks li:last-child{margin-bottom:11px}#print ul ul.subtasks li.done{color:#000;}#print ul ul.subtasks li.done:before{border:none;font-family:'Wundercon-Pictograms','Arial';content:'d';left:0;top:3px}}"
}), define("views/Print/PrintView", [ "application/runtime", "wunderbits/WBView", "collections/TaskCollection", "collections/ListCollection", "collections/comparators", "wunderbits/helpers/date", "vendor/moment", "views/Print/PrintListItem", "views/Print/PrintTaskItem", "style!_print" ], function(e, t, i, n, a, o, r, s, l, d) {
var c = e.$, u = e._, p = t.prototype, m = new n("/lists/all"), g = e.smartLists;
return t.extend({
styles: [ d ],
id: "print",
render: function() {
var t = this;
p.render.apply(t, arguments), t.destroySubviews(), t.$el.empty();
var i = e.currentRoute();
t.isFullscreenNote = /\/note\/fullscreen/.test(i), t.isDetailRoute = /tasks\//.test(i);
var n = "selectedTasks" === e.printType || !e.printType && (t.isDetailRoute || t.isFullscreenNote), a = [];
return n && (a = t._getSelectedTaskIds()), 0 === i.indexOf("search") ? t.printSearch(a) : u.indexOf(g, e.listId) > -1 ? t.printSmartList(e.listId, a) : t.printNormalList(e.listId, a), 
t.$el.toggleClass("fullscreen-note", t.isFullscreenNote), t.$el.toggleClass("task-details", !t.isFullscreenNote && t.isDetailRoute && 1 === a.length), 
t;
},
printNormalList: function(e, t) {
var i = this, n = i.addSubview(new s({
listId: e,
taskIds: t
}), e);
i.el.appendChild(n.render().el);
},
printSearch: function(e) {
var t = this, n = {};
n.isSmartList = !0, n.listId = "search", n.taskIds = e;
var a = new i("/search");
if (a) {
var o = a.models;
e && e.length && (o = t.filterModelsByIds(o, e));
var r = u.groupBy(o, function(e) {
return e.attributes.list_id;
}), l = u.keys(r);
l.sort(function(e, t) {
var i = m.get(e), n = m.get(t), a = i.attributes.position, o = n.attributes.position;
return a > o ? 1 : o > a ? -1 : 0;
});
var d = document.createDocumentFragment();
t._setSmartListTitle("search"), u.each(l, function(e) {
var i, a = r[e], o = m.get(e), l = {};
i = o.attributes.title, l.smartListTitle = i, l.smartListModels = a, u.extend(l, n);
var c = t.addSubview(new s(l), e);
d.appendChild(c.render().el);
}), t.el.appendChild(d);
}
},
printSmartList: function(t, n) {
var a = this, l = {}, d = "week" === t;
l.isSmartList = !0, l.listId = t, l.taskIds = n;
var c = new i("/tasks/filter/" + t);
if (c.sort(), c.models.reverse(), c) {
var p = c.models;
n && n.length && (p = a.filterModelsByIds(p, n));
var g = u.groupBy(p, function(e) {
var t;
if (d) {
var i = e.attributes.due_date, n = r().sod().format("YYYY-MM-DD");
t = r(i, "YYYY-MM-DD").valueOf() < r().sod().valueOf() ? n : i;
} else t = e.attributes.list_id;
return t;
}), f = u.keys(g);
f.sort(function(e, t) {
var i, n;
if (d) i = r(e, "YYYY-MM-DD").valueOf(), n = r(t, "YYYY-MM-DD").valueOf(); else {
if ("inbox" === e || "inbox" === t) return "inbox" === e ? -1 : 1;
var a = m.get(e), o = m.get(t);
i = a.attributes.position, n = o.attributes.position;
}
return i > n ? 1 : n > i ? -1 : 0;
}), "all" === t && (g = a.sortGroupedTasks(g));
var b = document.createDocumentFragment();
a._setSmartListTitle(t), u.each(f, function(t) {
var i, n = g[t], c = m.get(t), p = {};
if (d) {
var f = n[n.length - 1].attributes.due_date;
i = o.isHumanizeable(f) ? e.language.getText(o.humanizeDueDate(f, "YYYY-MM-DD", !0)) : r(f, "YYYY-MM-DD").format("dddd"), 
i += ", " + r(f, "YYYY-MM-DD").format("MMM. DD");
} else i = c.attributes.title;
p.smartListTitle = i, p.smartListModels = n, u.extend(p, l);
var h = a.addSubview(new s(p), t);
b.appendChild(h.render().el);
}), a.el.appendChild(b);
}
},
sortGroupedTasks: function(e) {
return Object.keys(e).forEach(function(t) {
var i = e[t];
e[t] = i.sort(a.position).reverse();
}), e;
},
_setSmartListTitle: function(t) {
var i = this, n = "today" === t, a = {
assigned: "smart_list_assigned_to_me",
starred: "smart_list_starred",
today: "smart_list_today",
week: "smart_list_week",
all: "smart_list_all",
completed: "smart_list_completed",
search: "placeholder_search"
}, o = "search" === t ? " " + e.currentSearchTerm : "", r = e.language.getText(a[t]);
if (i.$el.prepend('<h1 class="smartlist ' + t + '">' + r + o + "</h1>"), n) {
var s = new Date().getDate();
i.$("h1").prepend("<span>" + s + "</span>");
}
},
_getSelectedTaskIds: function() {
var e = [], t = c(".task-list"), i = t.find(".selected, .active");
return u.each(i, function(t) {
e.push(c(t).attr("rel"));
}), e;
},
filterModelsByIds: function(e, t) {
return u.filter(e, function(e) {
return u.indexOf(t, e.attributes.id) > -1;
});
}
});
}), define("wunderbits/helpers/url", [ "project!core/WBSingleton" ], function(e) {
return e.extend({
parseQueryString: function(e, t) {
for (var i, n = e.split("&"), a = n.length + 1; --a; ) i = n[a - 1].split("="), 
t[i[0]] = decodeURIComponent(i[1]);
},
parseUrl: function(e) {
var t = this, i = document.createElement("a");
i.href = e;
var n = {};
return t.parseQueryString(i.search && i.search.substr(1), n), t.parseQueryString(i.hash && i.hash.substr(1), n), 
{
protocol: i.protocol || "http",
host: i.host || i.hostname,
path: i.pathname,
params: n
};
}
});
}), define("/templates/packaged/webview.js", {
name: "packaged/webview",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<div class="container"> <a class="icon close-webview"></a> </div>';
},
useData: !0
}
}), define("/styles/packaged/_webview.js", {
name: "packaged/_webview",
data: ".webview{position:fixed;top:0;bottom:0;right:0;left:0;padding:100px;background:rgba(0,0,0,0.5);z-index:9999;}.webview .container{border:8px solid rgba(255,255,255,0.6);-webkit-border-radius:10px;border-radius:10px;position:relative;}.webview .container a.icon.close-webview{position:absolute;top:8px;right:8px}.webview webview{border:1px solid rgba(0,0,0,0.2);background-color:#fff;height:100%;width:100%;display:block}"
}), define("views/Packaged/WebView", [ "application/runtime", "wunderbits/helpers/url", "wunderbits/WBView", "template!packaged/webview", "style!packaged/_webview" ], function(e, t, i, n, a) {
var o = e.$, r = i.prototype;
return i.extend({
className: "webview hidden",
styles: [ a ],
template: n,
events: {
"click .close-webview": "_cleanUp"
},
initialize: function() {
var t = this;
r.initialize.apply(t, arguments), t.bindTo(e, "webview:open", t.openUrl);
},
openUrl: function(e) {
var t = this;
t._cleanUp(), t.webView = o('<webview src="' + e + '" partition="persist:wunderlist"></webview>'), 
t.webView[0].addEventListener("loadstop", t._loadStop);
var i = t.$(".container");
i.append(t.webView), t.$el.removeClass("hidden");
},
_loadStop: function() {
var i = this, n = i.webView.attr("src"), a = t.parseUrl(n);
if (a.host.match(/^[a-z]+.wunderlist.com$/) && a.params && a.params.u) {
i._cleanUp();
var o = decodeURIComponent(a.params.u);
e.trigger("webview:close", o, a.params);
}
},
_cleanUp: function() {
var e = this;
e.$el.addClass("hidden");
var t = e.webView;
t && t.length && (t[0].stop(), t[0].removeEventListener("loadstop", e._loadStop), 
t.remove(), e.webView = null);
}
});
}), define("views/Main/Controllers/ScrollContainerController", [ "application/runtime", "wunderbits/WBViewController" ], function(e, t) {
var i = e.global, n = t.prototype;
return t.extend({
"implements": {
scroll: "_handleScroll",
"viewport:resize": "_handleResize"
},
initialize: function() {
var e = this;
n.initialize.apply(e, arguments), e._setHeight(), e._setScrollTop(), e._triggerViewportUpdate();
},
_setScrollTop: function() {
var e = this;
e.scrollTop = e.view.el.scrollTop;
},
_setHeight: function() {
var e = this;
e.height = i.innerHeight;
},
_handleScroll: function() {
var e = this;
e._setScrollTop(), e._triggerViewportUpdate();
},
_handleResize: function() {
var e = this;
e._setHeight(), e._triggerViewportUpdate();
},
_triggerViewportUpdate: function() {
var e = this;
e.view.trigger("viewport:update", e.height, e.scrollTop);
}
});
}), define("views/Main/ScrollContainer", [ "application/runtime", "wunderbits/WBViewPresenter", "./Controllers/ScrollContainerController" ], function(e, t, i) {
var n = t.prototype, a = e.global;
return Math.easeInOutQuad = function(e, t, i, n) {
return e /= n / 2, 1 > e ? i / 2 * e * e + t : (e--, -i / 2 * (e * (e - 2) - 1) + t);
}, t.extend({
className: "tasks-scroll",
emits: {
scroll: "scroll"
},
observes: {
runtime: {
"scrollTo:element": "scrollToView"
}
},
"implements": [ i ],
initialize: function() {
var t = this;
n.initialize.apply(t, arguments);
var i = t.trigger.bind(t, "viewport:resize");
t.bindTo(e, "window:resize", i);
},
scrollTo: function(e, t) {
var i = this, n = i.el.scrollTop, o = e - n, r = 0, s = function() {
r += 10;
var e = Math.easeInOutQuad(r, n, o, t);
i.el.scrollTop = e, t > r && a.setTimeout(s, 10);
};
s();
},
scrollToView: function(e, t) {
var i = this, n = "up" === t ? Math.abs(a.innerHeight - (e.el.offsetTop + 50)) : e.el.offsetTop;
50 > n && (n = 0), n > e.el.offsetTop && (n = e.el.offsetTop - 150), i.scrollTo(n, 100);
}
});
}), define("views/Popovers/Controllers/OnboardingPopoverController", [ "application/runtime", "wunderbits/WBViewController" ], function(e, t) {
return t.extend({
"implements": {
"close:tooltip": "closeTooltip"
},
closeTooltip: function(t) {
e.trigger("tooltip:close", this.view.tooltipName, this.view, !!t);
}
});
}), define("/templates/onboarding/tooltip.js", {
name: "onboarding/tooltip",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function(e, t, i, n) {
var a, o = t.helperMissing, r = this.escapeExpression;
return r((a = t.localized || e && e.localized || o, a.call(e, e && e.text, {
name: "localized",
hash: {},
data: n
}))) + ' <a class="close wundercon close-circle"></a>';
},
useData: !0
}
}), define("/styles/popover/onboarding.js", {
name: "popover/onboarding",
data: "#wunderlist-base .tooltip{color:#fafafa;padding:12px;background-image:-webkit-linear-gradient(top, #38a9fb, #2c91f9);background-image:-moz-linear-gradient(top, #38a9fb, #2c91f9);background-image:-o-linear-gradient(top, #38a9fb, #2c91f9);background-image:-ms-linear-gradient(top, #38a9fb, #2c91f9);background-image:linear-gradient(to bottom, #38a9fb, #2c91f9);border:1px solid rgba(0,0,0,0.18);-webkit-box-shadow:0 -3px 8px 0 rgba(0,0,0,0.23);box-shadow:0 -3px 8px 0 rgba(0,0,0,0.23);position:absolute;width:220px;font-weight:bold;font-size:14px;-webkit-border-radius:2px;border-radius:2px;z-index:500;}#wunderlist-base .tooltip.AddPeople,#wunderlist-base .tooltip.AddItem{left:50% !important;margin-left:-173px !important}#wunderlist-base .tooltip text{display:inline-block;text-align:left;width:190px;vertical-align:top}#wunderlist-base .tooltip a{font-size:25px;display:inline-block;opacity:.5;-ms-filter:\"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)\";filter:alpha(opacity=50);vertical-align:top;}#wunderlist-base .tooltip a:hover{opacity:1;-ms-filter:none;filter:none}#wunderlist-base .tooltip .arrow{border-width:10px;left:50%;margin-left:-14px;height:0;width:0;position:absolute;border-style:solid;}#wunderlist-base .tooltip .arrow:after{content:'';border-width:10px;left:50%;margin-left:-10px;height:0;width:0;position:absolute;border-style:solid}#wunderlist-base .tooltip.top .arrow{bottom:-21px;border-color:#2477cc transparent transparent transparent !important;}#wunderlist-base .tooltip.top .arrow:after{border-color:#2c91f9 transparent transparent transparent !important;bottom:-9px;z-index:1}#wunderlist-base .tooltip.bottom .arrow{top:-20px;border-color:transparent transparent #2477cc transparent !important;}#wunderlist-base .tooltip.bottom .arrow:after{border-color:transparent transparent #38a9fb transparent !important;top:-8px;z-index:1}@media all and (max-width:900px){#wunderlist-base .tooltip.CreateList{margin-left:-30px}#wunderlist-base .tooltip.AddPeople{margin-left:-123px !important;}#wunderlist-base .tooltip.AddPeople .arrow{left:47px !important}}@media all and (max-width:810px){#wunderlist-base .tooltip.CreateList{margin-left:-30px}#wunderlist-base .tooltip.AddPeople{margin-left:-123px !important;}#wunderlist-base .tooltip.AddPeople .arrow{left:47px !important}}"
}), define("views/Popovers/OnboardingPopoverView", [ "application/runtime", "views/Popovers/Controllers/OnboardingPopoverController", "views/Popovers/PopoverView", "collections/ListCollection", "template!onboarding/tooltip", "style!popover/onboarding", "style!_popover" ], function(e, t, i, n, a, o, r) {
var s = i.prototype;
return i.extend({
className: "content",
id: "onboarding-tooltip",
template: a,
styles: [ r, o ],
config: {
bindToTarget: !1,
preventDefaultClose: !0
},
"implements": [ t ],
emits: {
"click .close": "close:tooltip"
},
observes: {
runtime: {
hideTooltip: "emitClose",
route: "checkValidRoute"
}
},
renderData: {
text: void 0
},
strings: {
CreateList: "label_onboarding_tooltip_firstlist_desktop",
AddItem: "label_onboarding_tooltip_firsttask",
AddPeople: "label_onboarding_tooltip_share"
},
formatData: function(e) {
var t = this;
return e = s.formatData.call(t, e), e.text = t.strings[t.tooltipName], e;
},
initialize: function(e) {
var t = this;
s.initialize.apply(t, arguments), t.tooltipName = e.tooltipName, t.lists = new n("/lists/all");
},
open: function() {
var e = this;
s.open.apply(e, arguments), e.checkValidRoute(), e.popover.el.classList.add("tooltip", e.tooltipName), 
e.popover.unbindFrom(e.popover.outsideClick);
},
emitClose: function() {
this.trigger("close:tooltip");
},
checkValidRoute: function() {
var t = this, i = t.lists.get(e.getIdFromRoute()), n = i && i.isInbox();
"AddPeople" === t.tooltipName && t.$el.parent()[n ? "hide" : "show"]();
}
});
}), define("views/Main/Controllers/ClipboardContextMenuController", [ "wunderbits/ContextMenuController" ], function(e, t) {
return e.extend({
type: "clipboard",
"implements": {
"contextmenu:button_cut": "cutToClipboard",
"contextmenu:button_copy": "copyToClipboard",
"contextmenu:button_paste": "pasteFromClipboard"
},
items: {
button_cut: t,
button_copy: t,
button_paste: t
},
getContextMenuKeys: function() {
return [ "button_cut", "button_copy", "button_paste" ];
},
cutToClipboard: function() {
document.execCommand("cut");
},
copyToClipboard: function() {
document.execCommand("copy");
},
pasteFromClipboard: function() {
document.execCommand("paste");
}
});
}), define("views/Main/Controllers/SystemTrayController", [ "application/runtime", "wunderbits/ContextMenuController" ], function(e, t, i) {
function n() {
process.exit(0);
}
var a = t.prototype;
return t.extend({
type: "systemtray",
"implements": {
"contextmenu:notifications_desktop_enable_systray_context_menu": "enableNotifications",
"contextmenu:notifications_desktop_disable_systray_context_menu": "disableNotifications",
"contextmenu:systray_show_wunderlist": "showApp",
"contextmenu:systray_quit": "quitApp"
},
items: {
notifications_desktop_enable_systray_context_menu: i,
notifications_desktop_disable_systray_context_menu: i,
systray_show_wunderlist: i,
systray_quit: i
},
initialize: function() {
var t = this;
return t.NativeTray ? (a.initialize.apply(t, arguments), t.createTray(), t.updateContextMenu(), 
t.bindTo(e, "systray:cleanup", "cleanupTray"), void t.bindTo(e.settings, "change:notifications_desktop_enabled", "updateContextMenu")) : !1;
},
createTray: function() {
var t = this;
t.tray = e.tray = new t.NativeTray({
icon: "icons/16.png",
alticon: "icons/16.png",
iconsAreTemplates: !1,
tooltip: "Wunderlist"
}), t.tray.menu = t.menu, t.tray.on("click", function() {
t.showApp();
});
},
cleanupTray: function() {
var t = this;
t.clearContextMenu(), t.tray.remove(), t.tray = e.tray = i;
},
getContextMenuKeys: function() {
var t = e.settings.attributes, i = "true" === t.notifications_desktop_enabled, n = i ? "disable" : "enable";
return [ "notifications_desktop_" + n + "_systray_context_menu", "systray_show_wunderlist", "systray_quit" ];
},
showApp: function() {
e.trigger("window:show");
},
quitApp: function() {
e.trigger("window:hide"), e.once("sync:ended", n), e.trigger("sync:start"), setTimeout(n, 2e3);
},
enableNotifications: function() {
e.settings.save("notifications_desktop_enabled", "true");
},
disableNotifications: function() {
e.settings.save("notifications_desktop_enabled", "false");
}
});
}), define("helpers/sendViaEmail", [ "application/runtime", "collections/ListCollection", "collections/TaskCollection", "collections/NoteCollection", "collections/SubtaskCollection", "wunderbits/helpers/date", "vendor/moment", "project!core/WBSingleton" ], function(e, t, i, n, a, o, r, s) {
var l = e._, d = e.global, c = new i("/tasks/all"), u = new t("/lists/all"), p = l.clone(e.smartLists), m = {
assigned: "smart_list_assigned_to_me",
starred: "smart_list_starred",
today: "smart_list_today",
week: "smart_list_week",
all: "smart_list_all",
completed: "smart_list_completed",
search: "placeholder_search"
}, g = s.extend({
emailList: function(t, i) {
t = t || e.listId, 0 === e.currentRoute().indexOf("search") ? g.emailSearch(i) : l.indexOf(p, t) > -1 ? g.emailSmartList(t, i) : g.emailNormalList(t, i);
},
emailNormalList: function(e, t) {
var i = "", n = u.get(e);
if (n) {
var a = n.attributes.title, o = "Wunderlist - " + a;
i = encodeURIComponent(a) + "%0d%0a%0d%0a", i += g.buildList(e, t), g.sendMailContent(o, i);
}
},
emailSearch: function(t) {
var n = "", a = e.language.getText(m.search), o = "Wunderlist - " + a + " " + e.currentSearchTerm;
n += a + " " + e.currentSearchTerm + "%0d%0a%0d%0a";
var r = new i("/search");
if (r) {
var s = r.models;
t && (s = g.filterModelsByIds(s, t));
var d = l.groupBy(s, function(e) {
return e.attributes.list_id;
}), c = l.keys(d);
c.sort(function(e, t) {
var i = u.get(e), n = u.get(t), a = i.attributes.position, o = n.attributes.position;
return a > o ? 1 : o > a ? -1 : 0;
}), l.each(c, function(e) {
var t = d[e], i = u.get(e), a = i.attributes.title;
n += a + "%0d%0a%0d%0a", l.each(t, function(e) {
n += g.buildTask(e.attributes.id);
}), n += "%0d%0a%0d%0a";
}), g.sendMailContent(o, n);
}
},
emailSmartList: function(t, n) {
var a = "week" === t, s = "", d = t, c = e.language.getText(m[d]), p = "Wunderlist - " + c;
s += c + "%0d%0a%0d%0a";
var f = new i("/tasks/filter/" + t);
if (f) {
var b = f.models;
n && (b = g.filterModelsByIds(b, n));
var h = l.groupBy(b, function(e) {
var t;
if (a) {
var i = e.attributes.due_date, n = r().sod().format("YYYY-MM-DD");
t = r(i, "YYYY-MM-DD").valueOf() < r().sod().valueOf() ? n : i;
} else t = e.attributes.list_id;
return t;
}), v = l.keys(h);
v.sort(function(e, t) {
var i, n;
if (a) i = r(e, "YYYY-MM-DD").valueOf(), n = r(t, "YYYY-MM-DD").valueOf(); else {
var o = u.get(e), s = u.get(t);
i = o.attributes.position, n = s.attributes.position;
}
return i > n ? 1 : n > i ? -1 : 0;
}), l.each(v, function(t) {
var i, n = h[t], d = u.get(t);
if (a) {
var c = n[n.length - 1].attributes.due_date;
i = o.isHumanizeable(c) ? e.language.getText(o.humanizeDueDate(c, "YYYY-MM-DD", !0)) : r(c, "YYYY-MM-DD").format("dddd"), 
i += ", " + r(c, "YYYY-MM-DD").format("MMM. DD");
} else i = d.attributes.title;
s += encodeURIComponent(i) + "%0d%0a%0d%0a", l.each(n, function(e) {
s += g.buildTask(e.attributes.id);
}), s += "%0d%0a%0d%0a";
}), g.sendMailContent(p, s);
}
},
buildTask: function(e) {
var t = "", i = c.get(e);
if (i) {
var o = i.attributes.title, r = i.attributes.due_date;
r = r ? " " + g.getDueDateString(r) : "";
var s = i.attributes.starred ? " *" : "";
if (t += encodeURIComponent("☐ " + o + r + s) + "%0d%0a", i.hasSubtasks()) {
var d = new a("/tasks/" + i.id + "/subtasks");
l.each(d.models, function(e) {
var i = e.attributes.completed ? "☒" : "☐";
t += encodeURIComponent("   " + i + " " + e.attributes.title) + "%0d%0a";
});
}
if (i.hasNote()) {
var u, p, m = new n("/tasks/" + i.id + "/notes");
l.each(m.models, function(e) {
p = e.attributes.content, u = p.split(/\r\n|\r|\n/g), l.each(u, function(e) {
t += encodeURIComponent("   " + e) + "%0d%0a";
});
});
}
}
return t;
},
buildList: function(e, t, n) {
var a = "", o = new i("/lists/" + e + "/tasks"), r = o.where({
completed: !!n
});
return t && (r = g.filterModelsByIds(r, t)), l.each(r, function(e) {
a += g.buildTask(e.attributes.id);
}), a;
},
sendMailContent: function(t, i) {
e.publish("email:emailing");
var n = "%0d%0a" + encodeURIComponent(e.language.getText("share_list_email_signature").replace(/\\n/g, "NNEEWWLLIINNEE")).replace(/NNEEWWLLIINNEE/g, "%0d%0a"), a = "mailto:?subject=" + encodeURIComponent(t) + "&body=";
a += i + n, e.openUrl(a), d.setTimeout(function() {
e.unpublish("email:emailing");
}, 500);
},
getDueDateString: function(t) {
return r(t, "YYYY-MM-DD").format(e.settings.attributes.date_format);
},
filterModelsByIds: function(e, t) {
return l.filter(e, function(e) {
return l.indexOf(t, e.attributes.id) > -1;
});
}
});
return g;
}), define("/templates/application/layout.js", {
name: "application/layout",
data: {
compiler: [ 5, ">= 2.0.0" ],
main: function() {
return '<div id="stacks"> <div id="lists" class="stack"></div> <div id="tasks" class="stack"></div> </div>';
},
useData: !0
}
}), define("views/Main/MainInterfaceView", [ "application/runtime", "application/FocusManager", "views/Main/ModalManagerView", "views/Sidebar/SidebarView", "views/Tasks/TasksBrowserView", "views/Toolbar/ActionBarView", "views/Tasks/AddTaskView", "views/Tasks/404", "views/TaskDetail/TaskDetailView", "views/Notifications/SystemAlertView", "views/Sounds/SoundPlayer", "views/Print/PrintView", "views/Packaged/WebView", "views/Packaged/MacTitleBarView", "views/Main/ScrollContainer", "views/Popovers/OnboardingPopoverView", "collections/TaskCollection", "./Controllers/ClipboardContextMenuController", "./Controllers/SystemTrayController", "wunderbits/WBViewPresenter", "wunderbits/WBBlurHelper", "project!core/WBStateModel", "wunderbits/helpers/selection", "helpers/sendViaEmail", "wunderbits/helpers/strings", "helpers/notifications", "helpers/domtools", "template!application/layout" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m, g, f, b, h, v, _, w, k, x, y, C, T, S, L) {
var D = e.global, M = e._, z = e.$, j = _.prototype, I = w, A = T;
return _.extend({
template: L,
className: "main-interface",
"implements": [ h, v ],
emits: {
"contextmenu input, textarea": "contextmenu:clipboard"
},
events: function() {
var t = {
"focus input": "_onFocusInputs",
"blur input": "_onBlurInputs",
"click .tasks-scroll": "_onClickEmptyArea",
scroll: "_preventOffscreenScroll"
};
return e.settings.isTouchEnabled() ? M.extend(t, {
"swipeleft #tasks": "_onSwipeLeftTasks",
"swiperight #tasks": "_onSwipeRightTasks",
"swiperight #detail .body": "_onSwipeDetail"
}) : M.extend(t, {
mousemove: "throttledCheckMousePositionForActionBar"
}), t;
},
initialize: function() {
var f = this;
j.initialize.apply(f, arguments), f.focusManager = new t(), f.bindTo(e, "lists:ready", function(e) {
f.lists = e;
}), f._debouncedDelegateEvents = f.debounce(f.delegateEvents, 100), f.throttledCheckMousePositionForActionBar = M.throttle(f.checkMousePositionForActionBar, 100), 
f.bindTo(e, "search:start", f.onSearchStart), f.bindTo(e, "search:cancel", f.onSearchCancel), 
f.bindTo(e, "collection:search:ready", f.onSearchResults), f.bindTo(e, "route:search", f.onSearchResults), 
f.bindTo(e, "interface:setListOrFilter", f.setCurrentListOrFilter), f.bindTo(e, "detail:toggle", f.toggleDetailView), 
f.bindTo(e, "browser:toolbar:clicked", f.scrollBrowser), f.bindTo(e, "browser:show404", f.showTBV404), 
f.bindTo(e, "browser:hide404", f.hideTBV404), f.bindTo(e, "window:resize", f._debouncedDelegateEvents), 
f.bindTo(e, "print:start", f._print), f.bindTo(e, "ie9:upgradeAlert", f._ie9UpgradeAlert), 
f.bindTo(e, "blur:run", I.run), f.bindTo(e, "showTooltip", f.showOnboardingTooltip), 
f.bindTo(e, "email:list", y.emailList), f.bindTo(e, "share:save:failed", function(e) {
f._showCatastrophicFailure("share", e);
}), f.scrollView = f.addSubview(new g()), f.sidebarView = f.addSubview(new n()), 
f.actionBarView = f.addSubview(new o()), f.addTaskView = f.addSubview(new r()), 
f.browserView = f.addSubview(new a()), f.taskDetailView = f.addSubview(new l()), 
f.TBV404View = f.addSubview(new s()), f.printView = f.addSubview(new u()), f.systemAlertView = f.addSubview(new d()), 
f.soundPlayerView = f.addSubview(new c()), f.modalManagerView = f.addSubview(new i()), 
e.env.isPackagedApp() && (f.webView = f.addSubview(new p()), e.env.isMac() && (f.macTitlebarView = f.addSubview(new m()))), 
f.bindTo(f.scrollView, "viewport:update", f.emitViewportUpdate);
},
setFocusToAddTask: function() {
var e = this;
return e.addTaskView.setFocus.apply(e.addTaskView, arguments);
},
render: function() {
var t = this, i = t.$el, n = z("body");
j.render.apply(t, arguments);
var a = document.createDocumentFragment(), o = document.createDocumentFragment();
return i.find("#lists").append(t.sidebarView.render().el), e.trigger("timeline:end", "refresh_start"), 
o.appendChild(t.scrollView.el), o.appendChild(t.actionBarView.render().el), i.find("#tasks").append(o), 
a.appendChild(t.addTaskView.el), a.appendChild(t.browserView.el), a.appendChild(t.TBV404View.el), 
t.scrollView.el.appendChild(a), i.find("#stacks").append(t.taskDetailView.el), i.append(t.modalManagerView.render().el), 
i.append(t.soundPlayerView.render().el), e.trigger("interface:ready"), e.trigger("timeline:start", "main_interface_rendered"), 
A.start(), n.removeClass("login"), t._bindScrollEvents(), e.env.isPackagedApp() && (i.append(t.webView.render().el), 
n.addClass("packaged"), e.env.isMac() && i.append(t.macTitlebarView.render().el)), 
t;
},
onDestroy: function() {
var e = this;
e.focusManager.destroy();
},
emitViewportUpdate: function(e, t) {
var i = this;
i.browserView.trigger("viewport:update", e, t);
},
_bindScrollEvents: function() {
var t = this, i = new k(), n = {
tasks: t.$(".tasks-scroll"),
lists: t.$(".lists-scroll")
};
Object.keys(n).forEach(function(e) {
var t = n[e];
i.set(e, t.scrollTop()), t.scroll(function() {
i.set(e, t.scrollTop());
});
}), t.bindTo(i, "change", function(t) {
t = t[0], e.trigger("interface:scroll", t);
});
},
_ie9UpgradeAlert: function() {
var t = this;
M.delay(function() {
t.$el.prepend(t.systemAlertView.render({
message: e.language.getLabel("web_upgrade_ie9_not_supported", "$web_upgrade_to_chrome", "$web_upgrade_to_ie10")
}).el), t.$("#stacks").addClass("sytem-alert-active"), e.trigger("systemAlert:slideDown"), 
t._wrapIE9UpgradeLinks();
}, 5e3);
},
_wrapIE9UpgradeLinks: function() {
var e = this;
e.systemAlertView.$(".token_0").wrap('<a href="https://www.google.com/intl/en/chrome/browser/" target="_blank" />'), 
e.systemAlertView.$(".token_1").wrap('<a href="http://windows.microsoft.com/en-us/internet-explorer/download-ie" target="_blank" />');
},
setCurrentList: function(t, i, n) {
var a = this;
if ("search" === t && (t = e.lastListID), !t && !i) throw new Error("Cannot set current list without ID or list model");
t || (t = i.id), i || (i = a.lists.get(t)), a.sidebarView.trigger("select", t);
var o = a.browserView.renderListWithID(t, n);
return a.addTaskView.render({
listID: t,
listModel: i
}), a.lastBrowserContext = a.lastContext = "list", o;
},
setCurrentListOrFilter: function(t, i) {
var n = this;
t && -1 !== e.smartLists.indexOf(t) ? (n.sidebarView.trigger("select", t), n.addTaskView.render({
listID: i,
filter: t
}), n.browserView.renderFilterOfType(t)) : n.setCurrentList(t), n.toggleDetailView(!1);
},
waitToShowList: function() {
var e = this;
e.sidebarView.trigger("deselect");
},
scrollBrowser: function(e) {
var t = this;
t.$(".tasks-scroll").animate({
scrollTop: e || 0
});
},
toggleDetailView: function(t) {
var i = this;
if (t !== i.isDetailViewVisible) {
var n = t ? "Show" : "Dismiss";
e.trigger("trackingService", "UI." + n, "DetailView"), i.hasToggledDetailViewOnce && [ "#detail", "#tasks" ].forEach(function(e) {
e = i.el.querySelector(e), e.classList.add("animated");
}), i.$el.toggleClass("detail-visible", t), e.trigger("detail:toggled", t), i.isDetailViewVisible = t, 
i.hasToggledDetailViewOnce = !0, "task" === i.lastContext && delete i.lastContext;
}
},
_onClickEmptyArea: function(t) {
var i = this, n = z(t.target);
if (n.hasClass("tasks-scroll") || n.hasClass("heading") || n.hasClass("grouped-tasks")) if (I.run(), 
e.currentRoute().indexOf("tasks") >= 0) e.trigger("detail:close", {
fromAction: "clickEmptyArea"
}).trigger("analytics:ItemBrowser:clickEmptyArea", "closeDetail"); else if ("sidebar" === e.focus) {
var a = i.browserView.currentGrouping, o = a && a.openGroup && a.openGroup.collection, r = a && a.smartListMainCollection;
(o && o.models.length || r && r.models.length) && e.trigger("sidebar:navigate", "right");
}
},
_onFocusInputs: function() {
this.$("#stacks").css({
position: "absolute"
});
},
_onBlurInputs: function() {
this.$("#stacks").removeAttr("style");
},
onSearchStart: function() {
var e = this, t = function() {
e.lastContext = e.lastBrowserContext = "search", e.browserView.lastRenderedFilterType = null, 
e.browserView.lastRenderedListID = null;
};
e._searchCallback = D.setTimeout(t, 1e3), t();
},
onSearchCancel: function() {
var t = this;
"search" === t.lastContext && (t.lastBrowserContext = "searchCancel", e.trigger("focus:set", "sidebar"), 
t._searchCallback && D.clearTimeout(t._searchCallback));
},
onSearchResults: function(t, i) {
var n = this;
if (i = i || {}, n.addTaskView.listID = null, e.lastFilter = null, (!i.term || i.term !== e.state.attributes.lastSearchTerm) && "string" == typeof t) {
var a = i.term || e.state.attributes.lastSearchTerm, o = !!a || "week" === e.lastFilter || "completed" === e.lastFilter;
n.browserView.renderSearch(t), n.addTaskView.$el.toggleClass("hidden", o), e.state.set("lastSearchTerm", i.term);
}
},
showList: function(t, i) {
var n, a = this;
if (!a.sidebarView.listsView.blockListChangeFromDragEnd) {
if (i || (i = {}), i && i[404] ? i && i[404] && a.browserView.$el.addClass("hidden") : (a.browserView.$el.removeClass("hidden"), 
a.hideTBV404()), "list" !== a.lastContext || t.id !== a.lastListID) {
n = "search" === a.lastContext && "search" === a.lastBrowserContext, a.setCurrentList(null, t);
var o = e.currentRoute().indexOf("/share") >= 0;
!o && a.toggleDetailView(!1), a.taskDetailView.state.set("wasOpenBeforeRender", !1);
}
a.addTaskView.$el.toggleClass("hidden", t.isSavedSearch()), a.lastFilter = null, 
a.lastListID = t.id, a.actionBarView.setCurrentListID(t), e.trigger("title:set", a.getListTitle(t), {
isNameOrId: !0
});
}
},
getListTitle: function(t) {
var i = t.attributes.title;
return "inbox" === t.id && (i = e.language.getText("smart_list_inbox")), i;
},
showFilter: function(t) {
var i = this;
("filter" !== i.lastContext || i.lastFilter !== t) && (i.browserView.$el.removeClass("hidden"), 
i.sidebarView.trigger("select", t), i.addTaskView.render({
listID: "inbox",
filter: t
}), i.browserView.renderFilterOfType(t)), e.trigger("search:cancel"), i.resetView();
var n = C.contains([ "completed", "week", "assigned" ], t);
i.addTaskView.$el.toggleClass("hidden", n), i.lastBrowserContext = i.lastContext = "filter", 
i.lastFilter = t, i.lastListID = null, e.trigger("title:set", t, {
isNameOrId: !0
});
},
resetView: function(t) {
var i = this;
t && e.trigger("title:set", i.getListTitle(t), {
isNameOrId: !0
}), i.toggleDetailView(!1);
},
showTask: function(t, i) {
var n = this;
i = i || {};
var a = "task" === n.lastContext && t.id === n.lastTaskID, o = t.attributes.list_id, r = !e.lastFilter && o !== e.lastListID, s = !e.lastListID && "filter" === n.lastBrowserContext && e.lastFilter;
if (n.hideTBV404(), n.browserView.$el.removeClass("hidden"), !a) {
var l = t.isCompleted(), d = "true" === e.settings.attributes.show_completed_items;
l && !d && e.settings.save("show_completed_items", "true"), i.onClose = function(a) {
n.defer(function() {
if (t) {
var o = i.returnRoute;
(!o || a && "clickEmptyArea" === a.fromAction && "filter" !== n.lastBrowserContext && "search" !== n.lastBrowserContext) && (o = "lists/" + t.attributes.list_id), 
o = "filter" === n.lastBrowserContext ? "lists/" + i.lastFilter : o, e.trigger("route:" + o);
}
});
};
var c = !e.lastFilter && !e.lastListID, u = e.state.attributes.inSearchState;
if (u || s || !(c || e.clickedLinkOut || r)) if (s || u) {
var p = n.browserView.getCollection(e.lastFilter), m = p.get(t.id);
m || (n.setListForTaskRoute(t, r), u && e.trigger("search:end", !0)), m && e.trigger("browser:select", t.id);
} else e.trigger("browser:select", t.id); else n.setListForTaskRoute(t, r);
var g = n.lists.get(o), f = g && g.isShared();
i.isShared = f, n.taskDetailView.renderWithModel(t, i), n.taskDetailView.state.set("wasOpenBeforeRender", !0), 
n.toggleDetailView(!0), n.lastContext = "task", n.lastTaskID = t.id;
}
i.editAttribute && M.delay(function() {
e.trigger("browser:select", t.id), n.taskDetailView.trigger("start:edit", i.editAttribute, i.options);
}, 500), i.focusAttribute ? (e.trigger("browser:select", t.id), n.taskDetailView.trigger("focus:attribute", i.focusAttribute, i.options)) : I.run(), 
e.trigger("title:set", t.attributes.title);
var b = !0;
"filter" !== n.lastBrowserContext || n.linkInActivityCenterClicked && !a ? "search" === n.lastBrowserContext && e.state.attributes.lastSearchTerm && (b = !1) : b = !C.contains([ "completed", "week", "assigned" ], n.lastFilter), 
n.addTaskView.$el.toggleClass("hidden", !b);
},
setListForTaskRoute: function(t, i) {
var n = this;
e.clickedLinkOut = !1, n.setCurrentList(t.attributes.list_id, null, t).done(function() {
i && n.browserView.scrollToElementInViewport();
}), e.lastFilter = null, e.lastListID = t.attributes.list_id;
},
showTBV404: function(t) {
var i = this, n = M.clone(e.smartLists);
n.push("search");
var a = [ "starred", "today", "all" ];
M.indexOf(a, t) < 0 && i.addTaskView.$el.addClass("hidden"), i.browserView.$el.addClass("hidden"), 
M.indexOf(n, t) < 0 && i.sidebarView.trigger("deselect"), i.TBV404View.render(t).$el.removeClass("hidden"), 
i.toggleDetailView(!1), t && "task" !== t && "list" !== t || e.trigger("title:set", e.language.getText("error_title_not_found"));
},
hideTBV404: function() {
var e = this;
e.TBV404View.$el.addClass("hidden"), e.browserView.$el.removeClass("hidden");
},
editFolder: function(e, t) {
var i = this;
i.sidebarView.listsView.editFolder(e, t);
},
_preventOffscreenScroll: function(e) {
var t = this;
return e.preventDefault(), t.$el.scrollLeft(0), !1;
},
_showCatastrophicFailure: function(t) {
var i = {};
"share" === t && (i = {
customText: e.language.getLabel("error_share_not_created").toString(),
confirmText: e.language.getLabel("button_dismiss").toString(),
hideCancel: !0
}, e.trigger("modal:confirm", i));
},
checkMousePositionForActionBar: function(t) {
if ("settings" !== e.focus) {
var i = z(document).height(), n = t.pageY;
i - 300 > n && e.trigger("taskActions:collapse");
}
},
_print: function() {
var e = this;
e.el.appendChild(e.printView.render().el);
},
onRemove: function() {
var e = this;
e.sidebarView = null, e.browserView = null;
},
showOnboardingTooltip: function(e) {
var t = this;
e = e[0];
var i = {
CreateList: t.$(".wundercon.plus"),
AddItem: t.$(".addTask-input"),
AddPeople: t.$(".tab.share")
}, n = {
target: i[e],
tooltipName: e,
position: "AddItem" === e ? "bottom" : "top",
arrowOffset: "AddPeople" === e ? -55 : 0
};
"AddPeople" === e && (n.renderTarget = ".tasks-scroll");
var a = new f(n);
a.render(), a.open({});
}
});
}), define("/styles/font_lato_default.js", {
name: "font_lato_default",
data: "@font-face{font-family:'Lato';font-style:normal;font-weight:400;src:local('Lato Regular'),local('Lato-Regular'),url(\"fonts/Lato_normal_400_default.woff\") format('woff')}@font-face{font-family:'Lato';font-style:normal;font-weight:700;src:local('Lato Bold'),local('Lato-Bold'),url(\"fonts/Lato_normal_700_default.woff\") format('woff')}"
}), define("/styles/font_lato_windows.js", {
name: "font_lato_windows",
data: "@font-face{font-family:'Lato';font-style:normal;font-weight:400;src:local('Lato Regular'),local('Lato-Regular'),url(\"fonts/Lato_normal_400_windows.woff\") format('woff')}@font-face{font-family:'Lato';font-style:normal;font-weight:700;src:local('Lato Bold'),local('Lato-Bold'),url(\"fonts/Lato_normal_700_windows.woff\") format('woff')}"
}), define("application/AppView", [ "application/runtime", "wunderbits/WBView", "style!font_lato_default", "style!font_lato_windows" ], function(e, t, i, n) {
var a = e._, o = t.prototype;
return t.extend({
views: {},
initialize: function() {
var t = this, a = e.env.isWindows() ? n : i;
t.styles.push(a), o.initialize.apply(t, arguments);
},
switchToView: function(e, t, i, n) {
var o = this;
if (o.isRendered || o.render(), e !== o.activeViewName) {
var r = o.getSubview("main");
r && r.destroy();
var s = o.views[e];
o.activeView = o.addSubview(new s(t), "main"), o.activeViewName = e, o.$el.append(o.activeView.render(i).$el), 
o.activeView.delegateEvents();
}
return a.isFunction(n) && n(o.activeView), o.activeView;
}
});
}), define("helpers/WindowTitleHelper", [ "application/runtime", "collections/UnreadActivitiesCountCollection", "collections/ListCollection", "collections/TaskCollection", "wunderbits/BaseSingleton" ], function(e, t, i, n, a) {
var o = e._, r = o.clone(e.smartLists);
return r.push("inbox"), a.extend({
init: function() {
var a = this;
a._lists = new i("/lists/all"), a._tasks = new n("/tasks/all"), a._unreadActivities = new t("/unreadActivitiesCounts/all"), 
a.bindTo(e, "title:set", a.setTitle), a.bindTo(a._unreadActivities, "add remove reset change:activities change:conversations", a._updateTitle), 
a.bindTo(a._tasks, "change:title", a._updateTitle), a.bindTo(e.language, "change:data", a._updateTitle);
},
_setTitleFromPrefsSection: function(e) {
var t = this;
t.setTitle(e, {
isPrefsTabKey: !0
});
},
_setTitleFromNameOrId: function(e) {
var t = this;
t.setTitle(e, {
isNameOrId: !0
});
},
_updateTitle: function() {
var t = this, i = "Wunderlist", n = 0;
if (t._unreadActivities.models.length) {
var a = t._unreadActivities.at(0).attributes;
n = a.activities + a.conversations;
}
var s, l = t._lastTitleFragment, d = t._lastOptions || {};
if (d.isNameOrId) if (o.indexOf(r, l.toLowerCase()) >= 0) l = l.toLowerCase(), "assigned" === l && (l = "assigned_to_me"), 
s = "smart_list_" + l, l = e.language.getText(s); else {
var c = t._lists.get(l);
c && (l = c.attributes.title);
} else d.isPrefsTabKey && (s = "settings_heading_" + l, l = e.language.getText(s));
l && (i = l + " - " + i), n && (i = "(" + n + ") " + i), document.title = i, e.env.isPackagedApp() && e.env.isMac() && e.trigger("update:title", i);
},
setTitle: function(e, t) {
var i = this;
i._lastTitleFragment = e, i._lastOptions = t || {}, i._updateTitle();
}
});
}), define("/styles/application/_layout.js", {
name: "application/_layout",
data: '#wunderlist-base li.background-01{background-image:url("images/backgrounds/thumbs/01.jpg")}#wunderlist-base li.background-02{background-image:url("images/backgrounds/thumbs/02.jpg")}#wunderlist-base li.background-04{background-image:url("images/backgrounds/thumbs/04.jpg")}#wunderlist-base li.background-05{background-image:url("images/backgrounds/thumbs/05.jpg")}#wunderlist-base li.background-06{background-image:url("images/backgrounds/thumbs/06.jpg")}#wunderlist-base li.background-07{background-image:url("images/backgrounds/thumbs/07.jpg")}#wunderlist-base li.background-08{background-image:url("images/backgrounds/thumbs/08.jpg")}#wunderlist-base li.background-09{background-image:url("images/backgrounds/thumbs/09.jpg")}#wunderlist-base li.background-10{background-image:url("images/backgrounds/thumbs/10.jpg")}#wunderlist-base li.background-11{background-image:url("images/backgrounds/thumbs/11.jpg")}#wunderlist-base li.background-12{background-image:url("images/backgrounds/thumbs/12.jpg")}#wunderlist-base li.background-13{background-image:url("images/backgrounds/thumbs/13.jpg")}#wunderlist-base li.background-14{background-image:url("images/backgrounds/thumbs/14.jpg")}#wunderlist-base li.background-15{background-image:url("images/backgrounds/thumbs/15.jpg")}#wunderlist-base li.background-16{background-image:url("images/backgrounds/thumbs/16.jpg")}#wunderlist-base li.background-17{background-image:url("images/backgrounds/thumbs/17.jpg")}#wunderlist-base li.background-18{background-image:url("images/backgrounds/thumbs/18.jpg")}#wunderlist-base li.background-19{background-image:url("images/backgrounds/thumbs/19.jpg")}#wunderlist-base li.background-20{background-image:url("images/backgrounds/thumbs/20.jpg")}#wunderlist-base li.background-21{background-image:url("images/backgrounds/thumbs/21.jpg")}#wunderlist-base li.background-22{background-image:url("images/backgrounds/thumbs/22.jpg")}#wunderlist-base li.background-23{background-image:url("images/backgrounds/thumbs/23.jpg")}#wunderlist-base li.background-24{background-image:url("images/backgrounds/thumbs/24.jpg")}#wunderlist-base li.background-25{background-image:url("images/backgrounds/thumbs/25.jpg")}#wunderlist-base li.background-26{background-image:url("images/backgrounds/thumbs/26.jpg")}#wunderlist-base li.background-27{background-image:url("images/backgrounds/thumbs/27.jpg")}#wunderlist-base li.background-28{background-image:url("images/backgrounds/thumbs/28.jpg")}#wunderlist-base li.background-29{background-image:url("images/backgrounds/thumbs/29.jpg")}#wunderlist-base li.background-30{background-image:url("images/backgrounds/thumbs/30.jpg")}#wunderlist-base li.background-03{background-image:url("images/backgrounds/thumbs/03.jpg")}@media all and (min-width:1025px){#wunderlist-base.background-01:before{background-image:url("images/backgrounds/2048/01.jpg") !important}#wunderlist-base.background-02:before{background-image:url("images/backgrounds/2048/02.jpg") !important}#wunderlist-base.background-04:before{background-image:url("images/backgrounds/2048/04.jpg") !important}#wunderlist-base.background-05:before{background-image:url("images/backgrounds/2048/05.jpg") !important}#wunderlist-base.background-06:before{background-image:url("images/backgrounds/2048/06.jpg") !important}#wunderlist-base.background-07:before{background-image:url("images/backgrounds/2048/07.jpg") !important}#wunderlist-base.background-08:before{background-image:url("images/backgrounds/2048/08.jpg") !important}#wunderlist-base.background-09:before{background-image:url("images/backgrounds/2048/09.jpg") !important}#wunderlist-base.background-10:before{background-image:url("images/backgrounds/2048/10.jpg") !important}#wunderlist-base.background-11:before{background-image:url("images/backgrounds/2048/11.jpg") !important}#wunderlist-base.background-12:before{background-image:url("images/backgrounds/2048/12.jpg") !important}#wunderlist-base.background-13:before{background-image:url("images/backgrounds/2048/13.jpg") !important}#wunderlist-base.background-14:before{background-image:url("images/backgrounds/2048/14.jpg") !important}#wunderlist-base.background-15:before{background-image:url("images/backgrounds/2048/15.jpg") !important}#wunderlist-base.background-16:before{background-image:url("images/backgrounds/2048/16.jpg") !important}#wunderlist-base.background-17:before{background-image:url("images/backgrounds/2048/17.jpg") !important}#wunderlist-base.background-18:before{background-image:url("images/backgrounds/2048/18.jpg") !important}#wunderlist-base.background-19:before{background-image:url("images/backgrounds/2048/19.jpg") !important}#wunderlist-base.background-20:before{background-image:url("images/backgrounds/2048/20.jpg") !important}#wunderlist-base.background-21:before{background-image:url("images/backgrounds/2048/21.jpg") !important}#wunderlist-base.background-22:before{background-image:url("images/backgrounds/2048/22.jpg") !important}#wunderlist-base.background-23:before{background-image:url("images/backgrounds/2048/23.jpg") !important}#wunderlist-base.background-24:before{background-image:url("images/backgrounds/2048/24.jpg") !important}#wunderlist-base.background-25:before{background-image:url("images/backgrounds/2048/25.jpg") !important}#wunderlist-base.background-26:before{background-image:url("images/backgrounds/2048/26.jpg") !important}#wunderlist-base.background-27:before{background-image:url("images/backgrounds/2048/27.jpg") !important}#wunderlist-base.background-28:before{background-image:url("images/backgrounds/2048/28.jpg") !important}#wunderlist-base.background-29:before{background-image:url("images/backgrounds/2048/29.jpg") !important}#wunderlist-base.background-30:before{background-image:url("images/backgrounds/2048/30.jpg") !important}}@media all and (max-width:1024px){#wunderlist-base.background-01:before{background-image:url("images/backgrounds/1024/01.jpg") !important}#wunderlist-base.background-02:before{background-image:url("images/backgrounds/1024/02.jpg") !important}#wunderlist-base.background-04:before{background-image:url("images/backgrounds/1024/04.jpg") !important}#wunderlist-base.background-05:before{background-image:url("images/backgrounds/1024/05.jpg") !important}#wunderlist-base.background-06:before{background-image:url("images/backgrounds/1024/06.jpg") !important}#wunderlist-base.background-07:before{background-image:url("images/backgrounds/1024/07.jpg") !important}#wunderlist-base.background-08:before{background-image:url("images/backgrounds/1024/08.jpg") !important}#wunderlist-base.background-09:before{background-image:url("images/backgrounds/1024/09.jpg") !important}#wunderlist-base.background-10:before{background-image:url("images/backgrounds/1024/10.jpg") !important}#wunderlist-base.background-11:before{background-image:url("images/backgrounds/1024/11.jpg") !important}#wunderlist-base.background-12:before{background-image:url("images/backgrounds/1024/12.jpg") !important}#wunderlist-base.background-13:before{background-image:url("images/backgrounds/1024/13.jpg") !important}#wunderlist-base.background-14:before{background-image:url("images/backgrounds/1024/14.jpg") !important}#wunderlist-base.background-15:before{background-image:url("images/backgrounds/1024/15.jpg") !important}#wunderlist-base.background-16:before{background-image:url("images/backgrounds/1024/16.jpg") !important}#wunderlist-base.background-17:before{background-image:url("images/backgrounds/1024/17.jpg") !important}#wunderlist-base.background-18:before{background-image:url("images/backgrounds/1024/18.jpg") !important}#wunderlist-base.background-19:before{background-image:url("images/backgrounds/1024/19.jpg") !important}#wunderlist-base.background-20:before{background-image:url("images/backgrounds/1024/20.jpg") !important}#wunderlist-base.background-21:before{background-image:url("images/backgrounds/1024/21.jpg") !important}#wunderlist-base.background-22:before{background-image:url("images/backgrounds/1024/22.jpg") !important}#wunderlist-base.background-23:before{background-image:url("images/backgrounds/1024/23.jpg") !important}#wunderlist-base.background-24:before{background-image:url("images/backgrounds/1024/24.jpg") !important}#wunderlist-base.background-25:before{background-image:url("images/backgrounds/1024/25.jpg") !important}#wunderlist-base.background-26:before{background-image:url("images/backgrounds/1024/26.jpg") !important}#wunderlist-base.background-27:before{background-image:url("images/backgrounds/1024/27.jpg") !important}#wunderlist-base.background-28:before{background-image:url("images/backgrounds/1024/28.jpg") !important}#wunderlist-base.background-29:before{background-image:url("images/backgrounds/1024/29.jpg") !important}#wunderlist-base.background-30:before{background-image:url("images/backgrounds/1024/30.jpg") !important}}#wunderlist-base.background-03:before,#wunderlist-base li.background-03{background-image:url("images/backgrounds/sources/03.jpg");-webkit-background-size:128px 128px;-moz-background-size:128px 128px;background-size:128px 128px;background-repeat:repeat}@media only screen and (-webkit-min-device-pixel-ratio: 1.5), only screen and (min--moz-device-pixel-ratio: 1.5){#wunderlist-base.background-03:before,#wunderlist-base li.background-03{background-image:url("images/backgrounds/2x/03.jpg")}}html,input,textarea,button,select{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}*{padding:0;margin:0;text-decoration:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-moz-user-select:-moz-none;-ms-touch-action:none;text-rendering:optimizeLegibility}del{text-decoration:line-through}html body{font-family:"Lato","Geneva CY","Lucida Grande","Arial Unicode MS","Helvetica Neue","Helvetica","Arial",sans-serif}html:lang(ja_JP) body{font-family:"Lato","Meiryo UI","Meiryo","メイリオ","ＭＳ Ｐゴシック","MS PGothic","Hiragino Kaku Gothic Pro","Microsoft Yahei","微软雅黑","STXihei","Arial Unicode MS","Helvetica Neue","Helvetica","Arial",sans-serif}html:lang(zh_CN) body{font-family:"Lato","Microsoft Yahei","微软雅黑","STXihei","Meiryo UI","Meiryo","メイリオ","ＭＳ Ｐゴシック","MS PGothic","Hiragino Kaku Gothic Pro","Arial Unicode MS","Helvetica Neue","Helvetica","Arial",sans-serif}html:lang(zh_TW) body{font-family:"Lato","Microsoft Yahei","微软雅黑","STXihei","Meiryo UI","Meiryo","メイリオ","ＭＳ Ｐゴシック","MS PGothic","Hiragino Kaku Gothic Pro","Arial Unicode MS","Helvetica Neue","Helvetica","Arial",sans-serif}#wunderlist-base{color:#262626;font-size:14px;-webkit-touch-callout:none !important;font-weight:500;}#wunderlist-base.nodewebkit.platform-windows a:not(.linkout){cursor:default !important}#wunderlist-base.wlapp-parent{overflow:hidden}#wunderlist-base.scroll,#wunderlist-base.sandbox{overflow:auto;-ms-scroll-snap-points-x:snapInterval(0,187px);-ms-scroll-snap-type:mandatory;-ms-scroll-chaining:none}#wunderlist-base.sandbox{padding:0 20px}#wunderlist-base:before{content:\'\';-webkit-background-size:cover;-moz-background-size:cover;background-size:cover;background-repeat:no-repeat;background-position:center top;position:fixed;top:0;bottom:0;left:0;right:0;z-index:-100}#wunderlist-base:after{opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}#wunderlist-base input,#wunderlist-base textarea{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}#wunderlist-base ul{list-style:none}#wunderlist-base a{cursor:pointer}#wunderlist-base :focus{outline:none}#wunderlist-base .right{float:right}#wunderlist-base .left{float:left}#wunderlist-base .text-right{text-align:right}#wunderlist-base .text-left{text-align:left}#wunderlist-base .center{text-align:center}#wunderlist-base .hidden{display:none !important}#wunderlist-base .disabled{pointer-events:none}#wunderlist-base .invisible{visibility:hidden}#wunderlist-base .transparent{opacity:0 !important;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)" !important;filter:alpha(opacity=0) !important;pointer-events:none}#wunderlist-base .hide-overflow{overflow:hidden}#wunderlist-base .mtop{margin-top:5px}#wunderlist-base h1.blue{color:#186ab2}#wunderlist-base #stacks{left:0;right:0;bottom:0;top:0;}#wunderlist-base #stacks.sytem-alert-active{position:absolute;top:31px;}#wunderlist-base #stacks.sytem-alert-active.touch-style-notice{top:0}#wunderlist-base #stacks.sytem-alert-active.closing{top:0}#wunderlist-base #stacks > div{-webkit-overflow-scrolling:touch;position:absolute}#wunderlist-base .cols{font-size:0;margin-left:-7px;margin-right:-7px;}#wunderlist-base .cols > div{vertical-align:middle;font-size:13px;display:inline-block;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:0 7px}#wunderlist-base .cols.top > div{vertical-align:top}#wunderlist-base .cols-center > div{margin:0 auto 10px auto;}#wunderlist-base .cols-center > div:last-child{margin-bottom:0}#wunderlist-base .col-03{width:3%}#wunderlist-base .col-05{width:5%}#wunderlist-base .col-06{width:6%}#wunderlist-base .col-07{width:7%}#wunderlist-base .col-10{width:10%}#wunderlist-base .col-15{width:15%}#wunderlist-base .col-16{width:16%}#wunderlist-base .col-17{width:17%}#wunderlist-base .col-20{width:20%}#wunderlist-base .col-21{width:21%}#wunderlist-base .col-23{width:23%}#wunderlist-base .col-25{width:25%}#wunderlist-base .col-27{width:27%}#wunderlist-base .col-28{width:28%}#wunderlist-base .col-29{width:29%}#wunderlist-base .col-30{width:30%}#wunderlist-base .col-31{width:31%}#wunderlist-base .col-32{width:32%}#wunderlist-base .col-33{width:33%}#wunderlist-base .col-34{width:34%}#wunderlist-base .col-35{width:35%}#wunderlist-base .col-40{width:40%}#wunderlist-base .col-41{width:41%}#wunderlist-base .col-44{width:44%}#wunderlist-base .col-49{width:49%}#wunderlist-base .col-50{width:50%}#wunderlist-base .col-51{width:51%}#wunderlist-base .col-57{width:57%}#wunderlist-base .col-60{width:60%}#wunderlist-base .col-61{width:61%}#wunderlist-base .col-65{width:65%}#wunderlist-base .col-67{width:67%}#wunderlist-base .col-68{width:68%}#wunderlist-base .col-70{width:70%}#wunderlist-base .col-75{width:75%}#wunderlist-base .col-80{width:80%}#wunderlist-base .col-82{width:82%}#wunderlist-base .col-85{width:85%}#wunderlist-base .col-90{width:90%}#wunderlist-base .col-94{width:94%}#wunderlist-base .col-95{width:95%}#wunderlist-base .col-96{width:96%}#wunderlist-base .col-100{width:100%}#wunderlist-base .col-160{width:160px}#wunderlist-base .main-interface{top:0;bottom:0;left:0;right:0;position:absolute;overflow:hidden;}#wunderlist-base .main-interface #print{display:none}#wunderlist-base .main-interface #lists,#wunderlist-base .main-interface #tasks,#wunderlist-base .main-interface #detail{overflow:hidden}#wunderlist-base #desktop-notifications{color:#262626;}#wunderlist-base #desktop-notifications div.desktop-notification-text{background:#fff;margin:10px;padding:10px;-webkit-border-radius:10px;border-radius:10px}#wunderlist-base #loading{font-size:18px;color:rgba(255,255,255,0.85);text-shadow:0 1px 0 rgba(0,0,0,0.4);position:absolute;top:33%;bottom:0;left:0;right:0;text-align:center}#wunderlist-base #initial-loader{position:absolute;top:0;bottom:0;left:0;right:0;z-index:999999}#wunderlist-base .select select::-ms-expand{display:none}#wunderlist-base *::-webkit-scrollbar {\n  width:6px !important\n}\n\n#wunderlist-base *::-webkit-scrollbar-button:start:decrement,#wunderlist-base *::-webkit-scrollbar-button:end:increment {\n  height:10px;\n  display:block;\n  background-color:transparent;\n}\n\n#wunderlist-base *::-webkit-scrollbar-corner {\n  background-color:transparent;\n}\n\n#wunderlist-base *::-webkit-scrollbar-thumb:vertical {\n  border-radius:6px;\n  background-color:rgba(0,0,0,0.2)\n}\n.emoji{height:16px;display:inline-block;vertical-align:middle;margin-top:-3px;width:16px;background-position:center;-webkit-background-size:cover;-moz-background-size:cover;background-size:cover;text-indent:-9999px}.emoticon._1f004{background-image:url("images/twemoji/72x72/1f004.png")}.emoticon._1f0cf{background-image:url("images/twemoji/72x72/1f0cf.png")}.emoticon._1f170{background-image:url("images/twemoji/72x72/1f170.png")}.emoticon._1f171{background-image:url("images/twemoji/72x72/1f171.png")}.emoticon._1f17e{background-image:url("images/twemoji/72x72/1f17e.png")}.emoticon._1f17f{background-image:url("images/twemoji/72x72/1f17f.png")}.emoticon._1f18e{background-image:url("images/twemoji/72x72/1f18e.png")}.emoticon._1f191{background-image:url("images/twemoji/72x72/1f191.png")}.emoticon._1f192{background-image:url("images/twemoji/72x72/1f192.png")}.emoticon._1f193{background-image:url("images/twemoji/72x72/1f193.png")}.emoticon._1f194{background-image:url("images/twemoji/72x72/1f194.png")}.emoticon._1f195{background-image:url("images/twemoji/72x72/1f195.png")}.emoticon._1f196{background-image:url("images/twemoji/72x72/1f196.png")}.emoticon._1f197{background-image:url("images/twemoji/72x72/1f197.png")}.emoticon._1f198{background-image:url("images/twemoji/72x72/1f198.png")}.emoticon._1f199{background-image:url("images/twemoji/72x72/1f199.png")}.emoticon._1f19a{background-image:url("images/twemoji/72x72/1f19a.png")}.emoticon._1f1e6{background-image:url("images/twemoji/72x72/1f1e6.png")}.emoticon._1f1e7{background-image:url("images/twemoji/72x72/1f1e7.png")}.emoticon._1f1e8{background-image:url("images/twemoji/72x72/1f1e8.png")}.emoticon._1f1e8-1f1f3{background-image:url("images/twemoji/72x72/1f1e8-1f1f3.png")}.emoticon._1f1e9{background-image:url("images/twemoji/72x72/1f1e9.png")}.emoticon._1f1e9-1f1ea{background-image:url("images/twemoji/72x72/1f1e9-1f1ea.png")}.emoticon._1f1ea{background-image:url("images/twemoji/72x72/1f1ea.png")}.emoticon._1f1ea-1f1f8{background-image:url("images/twemoji/72x72/1f1ea-1f1f8.png")}.emoticon._1f1eb{background-image:url("images/twemoji/72x72/1f1eb.png")}.emoticon._1f1eb-1f1f7{background-image:url("images/twemoji/72x72/1f1eb-1f1f7.png")}.emoticon._1f1ec{background-image:url("images/twemoji/72x72/1f1ec.png")}.emoticon._1f1ec-1f1e7{background-image:url("images/twemoji/72x72/1f1ec-1f1e7.png")}.emoticon._1f1ed{background-image:url("images/twemoji/72x72/1f1ed.png")}.emoticon._1f1ee{background-image:url("images/twemoji/72x72/1f1ee.png")}.emoticon._1f1ee-1f1f9{background-image:url("images/twemoji/72x72/1f1ee-1f1f9.png")}.emoticon._1f1ef{background-image:url("images/twemoji/72x72/1f1ef.png")}.emoticon._1f1ef-1f1f5{background-image:url("images/twemoji/72x72/1f1ef-1f1f5.png")}.emoticon._1f1f0{background-image:url("images/twemoji/72x72/1f1f0.png")}.emoticon._1f1f0-1f1f7{background-image:url("images/twemoji/72x72/1f1f0-1f1f7.png")}.emoticon._1f1f1{background-image:url("images/twemoji/72x72/1f1f1.png")}.emoticon._1f1f2{background-image:url("images/twemoji/72x72/1f1f2.png")}.emoticon._1f1f3{background-image:url("images/twemoji/72x72/1f1f3.png")}.emoticon._1f1f4{background-image:url("images/twemoji/72x72/1f1f4.png")}.emoticon._1f1f5{background-image:url("images/twemoji/72x72/1f1f5.png")}.emoticon._1f1f6{background-image:url("images/twemoji/72x72/1f1f6.png")}.emoticon._1f1f7{background-image:url("images/twemoji/72x72/1f1f7.png")}.emoticon._1f1f7-1f1fa{background-image:url("images/twemoji/72x72/1f1f7-1f1fa.png")}.emoticon._1f1f8{background-image:url("images/twemoji/72x72/1f1f8.png")}.emoticon._1f1f9{background-image:url("images/twemoji/72x72/1f1f9.png")}.emoticon._1f1fa{background-image:url("images/twemoji/72x72/1f1fa.png")}.emoticon._1f1fa-1f1f8{background-image:url("images/twemoji/72x72/1f1fa-1f1f8.png")}.emoticon._1f1fb{background-image:url("images/twemoji/72x72/1f1fb.png")}.emoticon._1f1fc{background-image:url("images/twemoji/72x72/1f1fc.png")}.emoticon._1f1fd{background-image:url("images/twemoji/72x72/1f1fd.png")}.emoticon._1f1fe{background-image:url("images/twemoji/72x72/1f1fe.png")}.emoticon._1f1ff{background-image:url("images/twemoji/72x72/1f1ff.png")}.emoticon._1f201{background-image:url("images/twemoji/72x72/1f201.png")}.emoticon._1f202{background-image:url("images/twemoji/72x72/1f202.png")}.emoticon._1f21a{background-image:url("images/twemoji/72x72/1f21a.png")}.emoticon._1f22f{background-image:url("images/twemoji/72x72/1f22f.png")}.emoticon._1f232{background-image:url("images/twemoji/72x72/1f232.png")}.emoticon._1f233{background-image:url("images/twemoji/72x72/1f233.png")}.emoticon._1f234{background-image:url("images/twemoji/72x72/1f234.png")}.emoticon._1f235{background-image:url("images/twemoji/72x72/1f235.png")}.emoticon._1f236{background-image:url("images/twemoji/72x72/1f236.png")}.emoticon._1f237{background-image:url("images/twemoji/72x72/1f237.png")}.emoticon._1f238{background-image:url("images/twemoji/72x72/1f238.png")}.emoticon._1f239{background-image:url("images/twemoji/72x72/1f239.png")}.emoticon._1f23a{background-image:url("images/twemoji/72x72/1f23a.png")}.emoticon._1f250{background-image:url("images/twemoji/72x72/1f250.png")}.emoticon._1f251{background-image:url("images/twemoji/72x72/1f251.png")}.emoticon._1f300{background-image:url("images/twemoji/72x72/1f300.png")}.emoticon._1f301{background-image:url("images/twemoji/72x72/1f301.png")}.emoticon._1f302{background-image:url("images/twemoji/72x72/1f302.png")}.emoticon._1f303{background-image:url("images/twemoji/72x72/1f303.png")}.emoticon._1f304{background-image:url("images/twemoji/72x72/1f304.png")}.emoticon._1f305{background-image:url("images/twemoji/72x72/1f305.png")}.emoticon._1f306{background-image:url("images/twemoji/72x72/1f306.png")}.emoticon._1f307{background-image:url("images/twemoji/72x72/1f307.png")}.emoticon._1f308{background-image:url("images/twemoji/72x72/1f308.png")}.emoticon._1f309{background-image:url("images/twemoji/72x72/1f309.png")}.emoticon._1f30a{background-image:url("images/twemoji/72x72/1f30a.png")}.emoticon._1f30b{background-image:url("images/twemoji/72x72/1f30b.png")}.emoticon._1f30c{background-image:url("images/twemoji/72x72/1f30c.png")}.emoticon._1f30d{background-image:url("images/twemoji/72x72/1f30d.png")}.emoticon._1f30e{background-image:url("images/twemoji/72x72/1f30e.png")}.emoticon._1f30f{background-image:url("images/twemoji/72x72/1f30f.png")}.emoticon._1f310{background-image:url("images/twemoji/72x72/1f310.png")}.emoticon._1f311{background-image:url("images/twemoji/72x72/1f311.png")}.emoticon._1f312{background-image:url("images/twemoji/72x72/1f312.png")}.emoticon._1f313{background-image:url("images/twemoji/72x72/1f313.png")}.emoticon._1f314{background-image:url("images/twemoji/72x72/1f314.png")}.emoticon._1f315{background-image:url("images/twemoji/72x72/1f315.png")}.emoticon._1f316{background-image:url("images/twemoji/72x72/1f316.png")}.emoticon._1f317{background-image:url("images/twemoji/72x72/1f317.png")}.emoticon._1f318{background-image:url("images/twemoji/72x72/1f318.png")}.emoticon._1f319{background-image:url("images/twemoji/72x72/1f319.png")}.emoticon._1f31a{background-image:url("images/twemoji/72x72/1f31a.png")}.emoticon._1f31b{background-image:url("images/twemoji/72x72/1f31b.png")}.emoticon._1f31c{background-image:url("images/twemoji/72x72/1f31c.png")}.emoticon._1f31d{background-image:url("images/twemoji/72x72/1f31d.png")}.emoticon._1f31e{background-image:url("images/twemoji/72x72/1f31e.png")}.emoticon._1f31f{background-image:url("images/twemoji/72x72/1f31f.png")}.emoticon._1f320{background-image:url("images/twemoji/72x72/1f320.png")}.emoticon._1f330{background-image:url("images/twemoji/72x72/1f330.png")}.emoticon._1f331{background-image:url("images/twemoji/72x72/1f331.png")}.emoticon._1f332{background-image:url("images/twemoji/72x72/1f332.png")}.emoticon._1f333{background-image:url("images/twemoji/72x72/1f333.png")}.emoticon._1f334{background-image:url("images/twemoji/72x72/1f334.png")}.emoticon._1f335{background-image:url("images/twemoji/72x72/1f335.png")}.emoticon._1f337{background-image:url("images/twemoji/72x72/1f337.png")}.emoticon._1f338{background-image:url("images/twemoji/72x72/1f338.png")}.emoticon._1f339{background-image:url("images/twemoji/72x72/1f339.png")}.emoticon._1f33a{background-image:url("images/twemoji/72x72/1f33a.png")}.emoticon._1f33b{background-image:url("images/twemoji/72x72/1f33b.png")}.emoticon._1f33c{background-image:url("images/twemoji/72x72/1f33c.png")}.emoticon._1f33d{background-image:url("images/twemoji/72x72/1f33d.png")}.emoticon._1f33e{background-image:url("images/twemoji/72x72/1f33e.png")}.emoticon._1f33f{background-image:url("images/twemoji/72x72/1f33f.png")}.emoticon._1f340{background-image:url("images/twemoji/72x72/1f340.png")}.emoticon._1f341{background-image:url("images/twemoji/72x72/1f341.png")}.emoticon._1f342{background-image:url("images/twemoji/72x72/1f342.png")}.emoticon._1f343{background-image:url("images/twemoji/72x72/1f343.png")}.emoticon._1f344{background-image:url("images/twemoji/72x72/1f344.png")}.emoticon._1f345{background-image:url("images/twemoji/72x72/1f345.png")}.emoticon._1f346{background-image:url("images/twemoji/72x72/1f346.png")}.emoticon._1f347{background-image:url("images/twemoji/72x72/1f347.png")}.emoticon._1f348{background-image:url("images/twemoji/72x72/1f348.png")}.emoticon._1f349{background-image:url("images/twemoji/72x72/1f349.png")}.emoticon._1f34a{background-image:url("images/twemoji/72x72/1f34a.png")}.emoticon._1f34b{background-image:url("images/twemoji/72x72/1f34b.png")}.emoticon._1f34c{background-image:url("images/twemoji/72x72/1f34c.png")}.emoticon._1f34d{background-image:url("images/twemoji/72x72/1f34d.png")}.emoticon._1f34e{background-image:url("images/twemoji/72x72/1f34e.png")}.emoticon._1f34f{background-image:url("images/twemoji/72x72/1f34f.png")}.emoticon._1f350{background-image:url("images/twemoji/72x72/1f350.png")}.emoticon._1f351{background-image:url("images/twemoji/72x72/1f351.png")}.emoticon._1f352{background-image:url("images/twemoji/72x72/1f352.png")}.emoticon._1f353{background-image:url("images/twemoji/72x72/1f353.png")}.emoticon._1f354{background-image:url("images/twemoji/72x72/1f354.png")}.emoticon._1f355{background-image:url("images/twemoji/72x72/1f355.png")}.emoticon._1f356{background-image:url("images/twemoji/72x72/1f356.png")}.emoticon._1f357{background-image:url("images/twemoji/72x72/1f357.png")}.emoticon._1f358{background-image:url("images/twemoji/72x72/1f358.png")}.emoticon._1f359{background-image:url("images/twemoji/72x72/1f359.png")}.emoticon._1f35a{background-image:url("images/twemoji/72x72/1f35a.png")}.emoticon._1f35b{background-image:url("images/twemoji/72x72/1f35b.png")}.emoticon._1f35c{background-image:url("images/twemoji/72x72/1f35c.png")}.emoticon._1f35d{background-image:url("images/twemoji/72x72/1f35d.png")}.emoticon._1f35e{background-image:url("images/twemoji/72x72/1f35e.png")}.emoticon._1f35f{background-image:url("images/twemoji/72x72/1f35f.png")}.emoticon._1f360{background-image:url("images/twemoji/72x72/1f360.png")}.emoticon._1f361{background-image:url("images/twemoji/72x72/1f361.png")}.emoticon._1f362{background-image:url("images/twemoji/72x72/1f362.png")}.emoticon._1f363{background-image:url("images/twemoji/72x72/1f363.png")}.emoticon._1f364{background-image:url("images/twemoji/72x72/1f364.png")}.emoticon._1f365{background-image:url("images/twemoji/72x72/1f365.png")}.emoticon._1f366{background-image:url("images/twemoji/72x72/1f366.png")}.emoticon._1f367{background-image:url("images/twemoji/72x72/1f367.png")}.emoticon._1f368{background-image:url("images/twemoji/72x72/1f368.png")}.emoticon._1f369{background-image:url("images/twemoji/72x72/1f369.png")}.emoticon._1f36a{background-image:url("images/twemoji/72x72/1f36a.png")}.emoticon._1f36b{background-image:url("images/twemoji/72x72/1f36b.png")}.emoticon._1f36c{background-image:url("images/twemoji/72x72/1f36c.png")}.emoticon._1f36d{background-image:url("images/twemoji/72x72/1f36d.png")}.emoticon._1f36e{background-image:url("images/twemoji/72x72/1f36e.png")}.emoticon._1f36f{background-image:url("images/twemoji/72x72/1f36f.png")}.emoticon._1f370{background-image:url("images/twemoji/72x72/1f370.png")}.emoticon._1f371{background-image:url("images/twemoji/72x72/1f371.png")}.emoticon._1f372{background-image:url("images/twemoji/72x72/1f372.png")}.emoticon._1f373{background-image:url("images/twemoji/72x72/1f373.png")}.emoticon._1f374{background-image:url("images/twemoji/72x72/1f374.png")}.emoticon._1f375{background-image:url("images/twemoji/72x72/1f375.png")}.emoticon._1f376{background-image:url("images/twemoji/72x72/1f376.png")}.emoticon._1f377{background-image:url("images/twemoji/72x72/1f377.png")}.emoticon._1f378{background-image:url("images/twemoji/72x72/1f378.png")}.emoticon._1f379{background-image:url("images/twemoji/72x72/1f379.png")}.emoticon._1f37a{background-image:url("images/twemoji/72x72/1f37a.png")}.emoticon._1f37b{background-image:url("images/twemoji/72x72/1f37b.png")}.emoticon._1f37c{background-image:url("images/twemoji/72x72/1f37c.png")}.emoticon._1f380{background-image:url("images/twemoji/72x72/1f380.png")}.emoticon._1f381{background-image:url("images/twemoji/72x72/1f381.png")}.emoticon._1f382{background-image:url("images/twemoji/72x72/1f382.png")}.emoticon._1f383{background-image:url("images/twemoji/72x72/1f383.png")}.emoticon._1f384{background-image:url("images/twemoji/72x72/1f384.png")}.emoticon._1f385{background-image:url("images/twemoji/72x72/1f385.png")}.emoticon._1f386{background-image:url("images/twemoji/72x72/1f386.png")}.emoticon._1f387{background-image:url("images/twemoji/72x72/1f387.png")}.emoticon._1f388{background-image:url("images/twemoji/72x72/1f388.png")}.emoticon._1f389{background-image:url("images/twemoji/72x72/1f389.png")}.emoticon._1f38a{background-image:url("images/twemoji/72x72/1f38a.png")}.emoticon._1f38b{background-image:url("images/twemoji/72x72/1f38b.png")}.emoticon._1f38c{background-image:url("images/twemoji/72x72/1f38c.png")}.emoticon._1f38d{background-image:url("images/twemoji/72x72/1f38d.png")}.emoticon._1f38e{background-image:url("images/twemoji/72x72/1f38e.png")}.emoticon._1f38f{background-image:url("images/twemoji/72x72/1f38f.png")}.emoticon._1f390{background-image:url("images/twemoji/72x72/1f390.png")}.emoticon._1f391{background-image:url("images/twemoji/72x72/1f391.png")}.emoticon._1f392{background-image:url("images/twemoji/72x72/1f392.png")}.emoticon._1f393{background-image:url("images/twemoji/72x72/1f393.png")}.emoticon._1f3a0{background-image:url("images/twemoji/72x72/1f3a0.png")}.emoticon._1f3a1{background-image:url("images/twemoji/72x72/1f3a1.png")}.emoticon._1f3a2{background-image:url("images/twemoji/72x72/1f3a2.png")}.emoticon._1f3a3{background-image:url("images/twemoji/72x72/1f3a3.png")}.emoticon._1f3a4{background-image:url("images/twemoji/72x72/1f3a4.png")}.emoticon._1f3a5{background-image:url("images/twemoji/72x72/1f3a5.png")}.emoticon._1f3a6{background-image:url("images/twemoji/72x72/1f3a6.png")}.emoticon._1f3a7{background-image:url("images/twemoji/72x72/1f3a7.png")}.emoticon._1f3a8{background-image:url("images/twemoji/72x72/1f3a8.png")}.emoticon._1f3a9{background-image:url("images/twemoji/72x72/1f3a9.png")}.emoticon._1f3aa{background-image:url("images/twemoji/72x72/1f3aa.png")}.emoticon._1f3ab{background-image:url("images/twemoji/72x72/1f3ab.png")}.emoticon._1f3ac{background-image:url("images/twemoji/72x72/1f3ac.png")}.emoticon._1f3ad{background-image:url("images/twemoji/72x72/1f3ad.png")}.emoticon._1f3ae{background-image:url("images/twemoji/72x72/1f3ae.png")}.emoticon._1f3af{background-image:url("images/twemoji/72x72/1f3af.png")}.emoticon._1f3b0{background-image:url("images/twemoji/72x72/1f3b0.png")}.emoticon._1f3b1{background-image:url("images/twemoji/72x72/1f3b1.png")}.emoticon._1f3b2{background-image:url("images/twemoji/72x72/1f3b2.png")}.emoticon._1f3b3{background-image:url("images/twemoji/72x72/1f3b3.png")}.emoticon._1f3b4{background-image:url("images/twemoji/72x72/1f3b4.png")}.emoticon._1f3b5{background-image:url("images/twemoji/72x72/1f3b5.png")}.emoticon._1f3b6{background-image:url("images/twemoji/72x72/1f3b6.png")}.emoticon._1f3b7{background-image:url("images/twemoji/72x72/1f3b7.png")}.emoticon._1f3b8{background-image:url("images/twemoji/72x72/1f3b8.png")}.emoticon._1f3b9{background-image:url("images/twemoji/72x72/1f3b9.png")}.emoticon._1f3ba{background-image:url("images/twemoji/72x72/1f3ba.png")}.emoticon._1f3bb{background-image:url("images/twemoji/72x72/1f3bb.png")}.emoticon._1f3bc{background-image:url("images/twemoji/72x72/1f3bc.png")}.emoticon._1f3bd{background-image:url("images/twemoji/72x72/1f3bd.png")}.emoticon._1f3be{background-image:url("images/twemoji/72x72/1f3be.png")}.emoticon._1f3bf{background-image:url("images/twemoji/72x72/1f3bf.png")}.emoticon._1f3c0{background-image:url("images/twemoji/72x72/1f3c0.png")}.emoticon._1f3c1{background-image:url("images/twemoji/72x72/1f3c1.png")}.emoticon._1f3c2{background-image:url("images/twemoji/72x72/1f3c2.png")}.emoticon._1f3c3{background-image:url("images/twemoji/72x72/1f3c3.png")}.emoticon._1f3c4{background-image:url("images/twemoji/72x72/1f3c4.png")}.emoticon._1f3c6{background-image:url("images/twemoji/72x72/1f3c6.png")}.emoticon._1f3c7{background-image:url("images/twemoji/72x72/1f3c7.png")}.emoticon._1f3c8{background-image:url("images/twemoji/72x72/1f3c8.png")}.emoticon._1f3c9{background-image:url("images/twemoji/72x72/1f3c9.png")}.emoticon._1f3ca{background-image:url("images/twemoji/72x72/1f3ca.png")}.emoticon._1f3e0{background-image:url("images/twemoji/72x72/1f3e0.png")}.emoticon._1f3e1{background-image:url("images/twemoji/72x72/1f3e1.png")}.emoticon._1f3e2{background-image:url("images/twemoji/72x72/1f3e2.png")}.emoticon._1f3e3{background-image:url("images/twemoji/72x72/1f3e3.png")}.emoticon._1f3e4{background-image:url("images/twemoji/72x72/1f3e4.png")}.emoticon._1f3e5{background-image:url("images/twemoji/72x72/1f3e5.png")}.emoticon._1f3e6{background-image:url("images/twemoji/72x72/1f3e6.png")}.emoticon._1f3e7{background-image:url("images/twemoji/72x72/1f3e7.png")}.emoticon._1f3e8{background-image:url("images/twemoji/72x72/1f3e8.png")}.emoticon._1f3e9{background-image:url("images/twemoji/72x72/1f3e9.png")}.emoticon._1f3ea{background-image:url("images/twemoji/72x72/1f3ea.png")}.emoticon._1f3eb{background-image:url("images/twemoji/72x72/1f3eb.png")}.emoticon._1f3ec{background-image:url("images/twemoji/72x72/1f3ec.png")}.emoticon._1f3ed{background-image:url("images/twemoji/72x72/1f3ed.png")}.emoticon._1f3ee{background-image:url("images/twemoji/72x72/1f3ee.png")}.emoticon._1f3ef{background-image:url("images/twemoji/72x72/1f3ef.png")}.emoticon._1f3f0{background-image:url("images/twemoji/72x72/1f3f0.png")}.emoticon._1f400{background-image:url("images/twemoji/72x72/1f400.png")}.emoticon._1f401{background-image:url("images/twemoji/72x72/1f401.png")}.emoticon._1f402{background-image:url("images/twemoji/72x72/1f402.png")}.emoticon._1f403{background-image:url("images/twemoji/72x72/1f403.png")}.emoticon._1f404{background-image:url("images/twemoji/72x72/1f404.png")}.emoticon._1f405{background-image:url("images/twemoji/72x72/1f405.png")}.emoticon._1f406{background-image:url("images/twemoji/72x72/1f406.png")}.emoticon._1f407{background-image:url("images/twemoji/72x72/1f407.png")}.emoticon._1f408{background-image:url("images/twemoji/72x72/1f408.png")}.emoticon._1f409{background-image:url("images/twemoji/72x72/1f409.png")}.emoticon._1f40a{background-image:url("images/twemoji/72x72/1f40a.png")}.emoticon._1f40b{background-image:url("images/twemoji/72x72/1f40b.png")}.emoticon._1f40c{background-image:url("images/twemoji/72x72/1f40c.png")}.emoticon._1f40d{background-image:url("images/twemoji/72x72/1f40d.png")}.emoticon._1f40e{background-image:url("images/twemoji/72x72/1f40e.png")}.emoticon._1f40f{background-image:url("images/twemoji/72x72/1f40f.png")}.emoticon._1f410{background-image:url("images/twemoji/72x72/1f410.png")}.emoticon._1f411{background-image:url("images/twemoji/72x72/1f411.png")}.emoticon._1f412{background-image:url("images/twemoji/72x72/1f412.png")}.emoticon._1f413{background-image:url("images/twemoji/72x72/1f413.png")}.emoticon._1f414{background-image:url("images/twemoji/72x72/1f414.png")}.emoticon._1f415{background-image:url("images/twemoji/72x72/1f415.png")}.emoticon._1f416{background-image:url("images/twemoji/72x72/1f416.png")}.emoticon._1f417{background-image:url("images/twemoji/72x72/1f417.png")}.emoticon._1f418{background-image:url("images/twemoji/72x72/1f418.png")}.emoticon._1f419{background-image:url("images/twemoji/72x72/1f419.png")}.emoticon._1f41a{background-image:url("images/twemoji/72x72/1f41a.png")}.emoticon._1f41b{background-image:url("images/twemoji/72x72/1f41b.png")}.emoticon._1f41c{background-image:url("images/twemoji/72x72/1f41c.png")}.emoticon._1f41d{background-image:url("images/twemoji/72x72/1f41d.png")}.emoticon._1f41e{background-image:url("images/twemoji/72x72/1f41e.png")}.emoticon._1f41f{background-image:url("images/twemoji/72x72/1f41f.png")}.emoticon._1f420{background-image:url("images/twemoji/72x72/1f420.png")}.emoticon._1f421{background-image:url("images/twemoji/72x72/1f421.png")}.emoticon._1f422{background-image:url("images/twemoji/72x72/1f422.png")}.emoticon._1f423{background-image:url("images/twemoji/72x72/1f423.png")}.emoticon._1f424{background-image:url("images/twemoji/72x72/1f424.png")}.emoticon._1f425{background-image:url("images/twemoji/72x72/1f425.png")}.emoticon._1f426{background-image:url("images/twemoji/72x72/1f426.png")}.emoticon._1f427{background-image:url("images/twemoji/72x72/1f427.png")}.emoticon._1f428{background-image:url("images/twemoji/72x72/1f428.png")}.emoticon._1f429{background-image:url("images/twemoji/72x72/1f429.png")}.emoticon._1f42a{background-image:url("images/twemoji/72x72/1f42a.png")}.emoticon._1f42b{background-image:url("images/twemoji/72x72/1f42b.png")}.emoticon._1f42c{background-image:url("images/twemoji/72x72/1f42c.png")}.emoticon._1f42d{background-image:url("images/twemoji/72x72/1f42d.png")}.emoticon._1f42e{background-image:url("images/twemoji/72x72/1f42e.png")}.emoticon._1f42f{background-image:url("images/twemoji/72x72/1f42f.png")}.emoticon._1f430{background-image:url("images/twemoji/72x72/1f430.png")}.emoticon._1f431{background-image:url("images/twemoji/72x72/1f431.png")}.emoticon._1f432{background-image:url("images/twemoji/72x72/1f432.png")}.emoticon._1f433{background-image:url("images/twemoji/72x72/1f433.png")}.emoticon._1f434{background-image:url("images/twemoji/72x72/1f434.png")}.emoticon._1f435{background-image:url("images/twemoji/72x72/1f435.png")}.emoticon._1f436{background-image:url("images/twemoji/72x72/1f436.png")}.emoticon._1f437{background-image:url("images/twemoji/72x72/1f437.png")}.emoticon._1f438{background-image:url("images/twemoji/72x72/1f438.png")}.emoticon._1f439{background-image:url("images/twemoji/72x72/1f439.png")}.emoticon._1f43a{background-image:url("images/twemoji/72x72/1f43a.png")}.emoticon._1f43b{background-image:url("images/twemoji/72x72/1f43b.png")}.emoticon._1f43c{background-image:url("images/twemoji/72x72/1f43c.png")}.emoticon._1f43d{background-image:url("images/twemoji/72x72/1f43d.png")}.emoticon._1f43e{background-image:url("images/twemoji/72x72/1f43e.png")}.emoticon._1f440{background-image:url("images/twemoji/72x72/1f440.png")}.emoticon._1f442{background-image:url("images/twemoji/72x72/1f442.png")}.emoticon._1f443{background-image:url("images/twemoji/72x72/1f443.png")}.emoticon._1f444{background-image:url("images/twemoji/72x72/1f444.png")}.emoticon._1f445{background-image:url("images/twemoji/72x72/1f445.png")}.emoticon._1f446{background-image:url("images/twemoji/72x72/1f446.png")}.emoticon._1f447{background-image:url("images/twemoji/72x72/1f447.png")}.emoticon._1f448{background-image:url("images/twemoji/72x72/1f448.png")}.emoticon._1f449{background-image:url("images/twemoji/72x72/1f449.png")}.emoticon._1f44a{background-image:url("images/twemoji/72x72/1f44a.png")}.emoticon._1f44b{background-image:url("images/twemoji/72x72/1f44b.png")}.emoticon._1f44c{background-image:url("images/twemoji/72x72/1f44c.png")}.emoticon._1f44d{background-image:url("images/twemoji/72x72/1f44d.png")}.emoticon._1f44e{background-image:url("images/twemoji/72x72/1f44e.png")}.emoticon._1f44f{background-image:url("images/twemoji/72x72/1f44f.png")}.emoticon._1f450{background-image:url("images/twemoji/72x72/1f450.png")}.emoticon._1f451{background-image:url("images/twemoji/72x72/1f451.png")}.emoticon._1f452{background-image:url("images/twemoji/72x72/1f452.png")}.emoticon._1f453{background-image:url("images/twemoji/72x72/1f453.png")}.emoticon._1f454{background-image:url("images/twemoji/72x72/1f454.png")}.emoticon._1f455{background-image:url("images/twemoji/72x72/1f455.png")}.emoticon._1f456{background-image:url("images/twemoji/72x72/1f456.png")}.emoticon._1f457{background-image:url("images/twemoji/72x72/1f457.png")}.emoticon._1f458{background-image:url("images/twemoji/72x72/1f458.png")}.emoticon._1f459{background-image:url("images/twemoji/72x72/1f459.png")}.emoticon._1f45a{background-image:url("images/twemoji/72x72/1f45a.png")}.emoticon._1f45b{background-image:url("images/twemoji/72x72/1f45b.png")}.emoticon._1f45c{background-image:url("images/twemoji/72x72/1f45c.png")}.emoticon._1f45d{background-image:url("images/twemoji/72x72/1f45d.png")}.emoticon._1f45e{background-image:url("images/twemoji/72x72/1f45e.png")}.emoticon._1f45f{background-image:url("images/twemoji/72x72/1f45f.png")}.emoticon._1f460{background-image:url("images/twemoji/72x72/1f460.png")}.emoticon._1f461{background-image:url("images/twemoji/72x72/1f461.png")}.emoticon._1f462{background-image:url("images/twemoji/72x72/1f462.png")}.emoticon._1f463{background-image:url("images/twemoji/72x72/1f463.png")}.emoticon._1f464{background-image:url("images/twemoji/72x72/1f464.png")}.emoticon._1f465{background-image:url("images/twemoji/72x72/1f465.png")}.emoticon._1f466{background-image:url("images/twemoji/72x72/1f466.png")}.emoticon._1f467{background-image:url("images/twemoji/72x72/1f467.png")}.emoticon._1f468{background-image:url("images/twemoji/72x72/1f468.png")}.emoticon._1f469{background-image:url("images/twemoji/72x72/1f469.png")}.emoticon._1f46a{background-image:url("images/twemoji/72x72/1f46a.png")}.emoticon._1f46b{background-image:url("images/twemoji/72x72/1f46b.png")}.emoticon._1f46c{background-image:url("images/twemoji/72x72/1f46c.png")}.emoticon._1f46d{background-image:url("images/twemoji/72x72/1f46d.png")}.emoticon._1f46e{background-image:url("images/twemoji/72x72/1f46e.png")}.emoticon._1f46f{background-image:url("images/twemoji/72x72/1f46f.png")}.emoticon._1f470{background-image:url("images/twemoji/72x72/1f470.png")}.emoticon._1f471{background-image:url("images/twemoji/72x72/1f471.png")}.emoticon._1f472{background-image:url("images/twemoji/72x72/1f472.png")}.emoticon._1f473{background-image:url("images/twemoji/72x72/1f473.png")}.emoticon._1f474{background-image:url("images/twemoji/72x72/1f474.png")}.emoticon._1f475{background-image:url("images/twemoji/72x72/1f475.png")}.emoticon._1f476{background-image:url("images/twemoji/72x72/1f476.png")}.emoticon._1f477{background-image:url("images/twemoji/72x72/1f477.png")}.emoticon._1f478{background-image:url("images/twemoji/72x72/1f478.png")}.emoticon._1f479{background-image:url("images/twemoji/72x72/1f479.png")}.emoticon._1f47a{background-image:url("images/twemoji/72x72/1f47a.png")}.emoticon._1f47b{background-image:url("images/twemoji/72x72/1f47b.png")}.emoticon._1f47c{background-image:url("images/twemoji/72x72/1f47c.png")}.emoticon._1f47d{background-image:url("images/twemoji/72x72/1f47d.png")}.emoticon._1f47e{background-image:url("images/twemoji/72x72/1f47e.png")}.emoticon._1f47f{background-image:url("images/twemoji/72x72/1f47f.png")}.emoticon._1f480{background-image:url("images/twemoji/72x72/1f480.png")}.emoticon._1f481{background-image:url("images/twemoji/72x72/1f481.png")}.emoticon._1f482{background-image:url("images/twemoji/72x72/1f482.png")}.emoticon._1f483{background-image:url("images/twemoji/72x72/1f483.png")}.emoticon._1f484{background-image:url("images/twemoji/72x72/1f484.png")}.emoticon._1f485{background-image:url("images/twemoji/72x72/1f485.png")}.emoticon._1f486{background-image:url("images/twemoji/72x72/1f486.png")}.emoticon._1f487{background-image:url("images/twemoji/72x72/1f487.png")}.emoticon._1f488{background-image:url("images/twemoji/72x72/1f488.png")}.emoticon._1f489{background-image:url("images/twemoji/72x72/1f489.png")}.emoticon._1f48a{background-image:url("images/twemoji/72x72/1f48a.png")}.emoticon._1f48b{background-image:url("images/twemoji/72x72/1f48b.png")}.emoticon._1f48c{background-image:url("images/twemoji/72x72/1f48c.png")}.emoticon._1f48d{background-image:url("images/twemoji/72x72/1f48d.png")}.emoticon._1f48e{background-image:url("images/twemoji/72x72/1f48e.png")}.emoticon._1f48f{background-image:url("images/twemoji/72x72/1f48f.png")}.emoticon._1f490{background-image:url("images/twemoji/72x72/1f490.png")}.emoticon._1f491{background-image:url("images/twemoji/72x72/1f491.png")}.emoticon._1f492{background-image:url("images/twemoji/72x72/1f492.png")}.emoticon._1f493{background-image:url("images/twemoji/72x72/1f493.png")}.emoticon._1f494{background-image:url("images/twemoji/72x72/1f494.png")}.emoticon._1f495{background-image:url("images/twemoji/72x72/1f495.png")}.emoticon._1f496{background-image:url("images/twemoji/72x72/1f496.png")}.emoticon._1f497{background-image:url("images/twemoji/72x72/1f497.png")}.emoticon._1f498{background-image:url("images/twemoji/72x72/1f498.png")}.emoticon._1f499{background-image:url("images/twemoji/72x72/1f499.png")}.emoticon._1f49a{background-image:url("images/twemoji/72x72/1f49a.png")}.emoticon._1f49b{background-image:url("images/twemoji/72x72/1f49b.png")}.emoticon._1f49c{background-image:url("images/twemoji/72x72/1f49c.png")}.emoticon._1f49d{background-image:url("images/twemoji/72x72/1f49d.png")}.emoticon._1f49e{background-image:url("images/twemoji/72x72/1f49e.png")}.emoticon._1f49f{background-image:url("images/twemoji/72x72/1f49f.png")}.emoticon._1f4a0{background-image:url("images/twemoji/72x72/1f4a0.png")}.emoticon._1f4a1{background-image:url("images/twemoji/72x72/1f4a1.png")}.emoticon._1f4a2{background-image:url("images/twemoji/72x72/1f4a2.png")}.emoticon._1f4a3{background-image:url("images/twemoji/72x72/1f4a3.png")}.emoticon._1f4a4{background-image:url("images/twemoji/72x72/1f4a4.png")}.emoticon._1f4a5{background-image:url("images/twemoji/72x72/1f4a5.png")}.emoticon._1f4a6{background-image:url("images/twemoji/72x72/1f4a6.png")}.emoticon._1f4a7{background-image:url("images/twemoji/72x72/1f4a7.png")}.emoticon._1f4a8{background-image:url("images/twemoji/72x72/1f4a8.png")}.emoticon._1f4a9{background-image:url("images/twemoji/72x72/1f4a9.png")}.emoticon._1f4aa{background-image:url("images/twemoji/72x72/1f4aa.png")}.emoticon._1f4ab{background-image:url("images/twemoji/72x72/1f4ab.png")}.emoticon._1f4ac{background-image:url("images/twemoji/72x72/1f4ac.png")}.emoticon._1f4ad{background-image:url("images/twemoji/72x72/1f4ad.png")}.emoticon._1f4ae{background-image:url("images/twemoji/72x72/1f4ae.png")}.emoticon._1f4af{background-image:url("images/twemoji/72x72/1f4af.png")}.emoticon._1f4b0{background-image:url("images/twemoji/72x72/1f4b0.png")}.emoticon._1f4b1{background-image:url("images/twemoji/72x72/1f4b1.png")}.emoticon._1f4b2{background-image:url("images/twemoji/72x72/1f4b2.png")}.emoticon._1f4b3{background-image:url("images/twemoji/72x72/1f4b3.png")}.emoticon._1f4b4{background-image:url("images/twemoji/72x72/1f4b4.png")}.emoticon._1f4b5{background-image:url("images/twemoji/72x72/1f4b5.png")}.emoticon._1f4b6{background-image:url("images/twemoji/72x72/1f4b6.png")}.emoticon._1f4b7{background-image:url("images/twemoji/72x72/1f4b7.png")}.emoticon._1f4b8{background-image:url("images/twemoji/72x72/1f4b8.png")}.emoticon._1f4b9{background-image:url("images/twemoji/72x72/1f4b9.png")}.emoticon._1f4ba{background-image:url("images/twemoji/72x72/1f4ba.png")}.emoticon._1f4bb{background-image:url("images/twemoji/72x72/1f4bb.png")}.emoticon._1f4bc{background-image:url("images/twemoji/72x72/1f4bc.png")}.emoticon._1f4bd{background-image:url("images/twemoji/72x72/1f4bd.png")}.emoticon._1f4be{background-image:url("images/twemoji/72x72/1f4be.png")}.emoticon._1f4bf{background-image:url("images/twemoji/72x72/1f4bf.png")}.emoticon._1f4c0{background-image:url("images/twemoji/72x72/1f4c0.png")}.emoticon._1f4c1{background-image:url("images/twemoji/72x72/1f4c1.png")}.emoticon._1f4c2{background-image:url("images/twemoji/72x72/1f4c2.png")}.emoticon._1f4c3{background-image:url("images/twemoji/72x72/1f4c3.png")}.emoticon._1f4c4{background-image:url("images/twemoji/72x72/1f4c4.png")}.emoticon._1f4c5{background-image:url("images/twemoji/72x72/1f4c5.png")}.emoticon._1f4c6{background-image:url("images/twemoji/72x72/1f4c6.png")}.emoticon._1f4c7{background-image:url("images/twemoji/72x72/1f4c7.png")}.emoticon._1f4c8{background-image:url("images/twemoji/72x72/1f4c8.png")}.emoticon._1f4c9{background-image:url("images/twemoji/72x72/1f4c9.png")}.emoticon._1f4ca{background-image:url("images/twemoji/72x72/1f4ca.png")}.emoticon._1f4cb{background-image:url("images/twemoji/72x72/1f4cb.png")}.emoticon._1f4cc{background-image:url("images/twemoji/72x72/1f4cc.png")}.emoticon._1f4cd{background-image:url("images/twemoji/72x72/1f4cd.png")}.emoticon._1f4ce{background-image:url("images/twemoji/72x72/1f4ce.png")}.emoticon._1f4cf{background-image:url("images/twemoji/72x72/1f4cf.png")}.emoticon._1f4d0{background-image:url("images/twemoji/72x72/1f4d0.png")}.emoticon._1f4d1{background-image:url("images/twemoji/72x72/1f4d1.png")}.emoticon._1f4d2{background-image:url("images/twemoji/72x72/1f4d2.png")}.emoticon._1f4d3{background-image:url("images/twemoji/72x72/1f4d3.png")}.emoticon._1f4d4{background-image:url("images/twemoji/72x72/1f4d4.png")}.emoticon._1f4d5{background-image:url("images/twemoji/72x72/1f4d5.png")}.emoticon._1f4d6{background-image:url("images/twemoji/72x72/1f4d6.png")}.emoticon._1f4d7{background-image:url("images/twemoji/72x72/1f4d7.png")}.emoticon._1f4d8{background-image:url("images/twemoji/72x72/1f4d8.png")}.emoticon._1f4d9{background-image:url("images/twemoji/72x72/1f4d9.png")}.emoticon._1f4da{background-image:url("images/twemoji/72x72/1f4da.png")}.emoticon._1f4db{background-image:url("images/twemoji/72x72/1f4db.png")}.emoticon._1f4dc{background-image:url("images/twemoji/72x72/1f4dc.png")}.emoticon._1f4dd{background-image:url("images/twemoji/72x72/1f4dd.png")}.emoticon._1f4de{background-image:url("images/twemoji/72x72/1f4de.png")}.emoticon._1f4df{background-image:url("images/twemoji/72x72/1f4df.png")}.emoticon._1f4e0{background-image:url("images/twemoji/72x72/1f4e0.png")}.emoticon._1f4e1{background-image:url("images/twemoji/72x72/1f4e1.png")}.emoticon._1f4e2{background-image:url("images/twemoji/72x72/1f4e2.png")}.emoticon._1f4e3{background-image:url("images/twemoji/72x72/1f4e3.png")}.emoticon._1f4e4{background-image:url("images/twemoji/72x72/1f4e4.png")}.emoticon._1f4e5{background-image:url("images/twemoji/72x72/1f4e5.png")}.emoticon._1f4e6{background-image:url("images/twemoji/72x72/1f4e6.png")}.emoticon._1f4e7{background-image:url("images/twemoji/72x72/1f4e7.png")}.emoticon._1f4e8{background-image:url("images/twemoji/72x72/1f4e8.png")}.emoticon._1f4e9{background-image:url("images/twemoji/72x72/1f4e9.png")}.emoticon._1f4ea{background-image:url("images/twemoji/72x72/1f4ea.png")}.emoticon._1f4eb{background-image:url("images/twemoji/72x72/1f4eb.png")}.emoticon._1f4ec{background-image:url("images/twemoji/72x72/1f4ec.png")}.emoticon._1f4ed{background-image:url("images/twemoji/72x72/1f4ed.png")}.emoticon._1f4ee{background-image:url("images/twemoji/72x72/1f4ee.png")}.emoticon._1f4ef{background-image:url("images/twemoji/72x72/1f4ef.png")}.emoticon._1f4f0{background-image:url("images/twemoji/72x72/1f4f0.png")}.emoticon._1f4f1{background-image:url("images/twemoji/72x72/1f4f1.png")}.emoticon._1f4f2{background-image:url("images/twemoji/72x72/1f4f2.png")}.emoticon._1f4f3{background-image:url("images/twemoji/72x72/1f4f3.png")}.emoticon._1f4f4{background-image:url("images/twemoji/72x72/1f4f4.png")}.emoticon._1f4f5{background-image:url("images/twemoji/72x72/1f4f5.png")}.emoticon._1f4f6{background-image:url("images/twemoji/72x72/1f4f6.png")}.emoticon._1f4f7{background-image:url("images/twemoji/72x72/1f4f7.png")}.emoticon._1f4f9{background-image:url("images/twemoji/72x72/1f4f9.png")}.emoticon._1f4fa{background-image:url("images/twemoji/72x72/1f4fa.png")}.emoticon._1f4fb{background-image:url("images/twemoji/72x72/1f4fb.png")}.emoticon._1f4fc{background-image:url("images/twemoji/72x72/1f4fc.png")}.emoticon._1f500{background-image:url("images/twemoji/72x72/1f500.png")}.emoticon._1f501{background-image:url("images/twemoji/72x72/1f501.png")}.emoticon._1f502{background-image:url("images/twemoji/72x72/1f502.png")}.emoticon._1f503{background-image:url("images/twemoji/72x72/1f503.png")}.emoticon._1f504{background-image:url("images/twemoji/72x72/1f504.png")}.emoticon._1f505{background-image:url("images/twemoji/72x72/1f505.png")}.emoticon._1f506{background-image:url("images/twemoji/72x72/1f506.png")}.emoticon._1f507{background-image:url("images/twemoji/72x72/1f507.png")}.emoticon._1f508{background-image:url("images/twemoji/72x72/1f508.png")}.emoticon._1f509{background-image:url("images/twemoji/72x72/1f509.png")}.emoticon._1f50a{background-image:url("images/twemoji/72x72/1f50a.png")}.emoticon._1f50b{background-image:url("images/twemoji/72x72/1f50b.png")}.emoticon._1f50c{background-image:url("images/twemoji/72x72/1f50c.png")}.emoticon._1f50d{background-image:url("images/twemoji/72x72/1f50d.png")}.emoticon._1f50e{background-image:url("images/twemoji/72x72/1f50e.png")}.emoticon._1f50f{background-image:url("images/twemoji/72x72/1f50f.png")}.emoticon._1f510{background-image:url("images/twemoji/72x72/1f510.png")}.emoticon._1f511{background-image:url("images/twemoji/72x72/1f511.png")}.emoticon._1f512{background-image:url("images/twemoji/72x72/1f512.png")}.emoticon._1f513{background-image:url("images/twemoji/72x72/1f513.png")}.emoticon._1f514{background-image:url("images/twemoji/72x72/1f514.png")}.emoticon._1f515{background-image:url("images/twemoji/72x72/1f515.png")}.emoticon._1f516{background-image:url("images/twemoji/72x72/1f516.png")}.emoticon._1f517{background-image:url("images/twemoji/72x72/1f517.png")}.emoticon._1f518{background-image:url("images/twemoji/72x72/1f518.png")}.emoticon._1f519{background-image:url("images/twemoji/72x72/1f519.png")}.emoticon._1f51a{background-image:url("images/twemoji/72x72/1f51a.png")}.emoticon._1f51b{background-image:url("images/twemoji/72x72/1f51b.png")}.emoticon._1f51c{background-image:url("images/twemoji/72x72/1f51c.png")}.emoticon._1f51d{background-image:url("images/twemoji/72x72/1f51d.png")}.emoticon._1f51e{background-image:url("images/twemoji/72x72/1f51e.png")}.emoticon._1f51f{background-image:url("images/twemoji/72x72/1f51f.png")}.emoticon._1f520{background-image:url("images/twemoji/72x72/1f520.png")}.emoticon._1f521{background-image:url("images/twemoji/72x72/1f521.png")}.emoticon._1f522{background-image:url("images/twemoji/72x72/1f522.png")}.emoticon._1f523{background-image:url("images/twemoji/72x72/1f523.png")}.emoticon._1f524{background-image:url("images/twemoji/72x72/1f524.png")}.emoticon._1f525{background-image:url("images/twemoji/72x72/1f525.png")}.emoticon._1f526{background-image:url("images/twemoji/72x72/1f526.png")}.emoticon._1f527{background-image:url("images/twemoji/72x72/1f527.png")}.emoticon._1f528{background-image:url("images/twemoji/72x72/1f528.png")}.emoticon._1f529{background-image:url("images/twemoji/72x72/1f529.png")}.emoticon._1f52a{background-image:url("images/twemoji/72x72/1f52a.png")}.emoticon._1f52b{background-image:url("images/twemoji/72x72/1f52b.png")}.emoticon._1f52c{background-image:url("images/twemoji/72x72/1f52c.png")}.emoticon._1f52d{background-image:url("images/twemoji/72x72/1f52d.png")}.emoticon._1f52e{background-image:url("images/twemoji/72x72/1f52e.png")}.emoticon._1f52f{background-image:url("images/twemoji/72x72/1f52f.png")}.emoticon._1f530{background-image:url("images/twemoji/72x72/1f530.png")}.emoticon._1f531{background-image:url("images/twemoji/72x72/1f531.png")}.emoticon._1f532{background-image:url("images/twemoji/72x72/1f532.png")}.emoticon._1f533{background-image:url("images/twemoji/72x72/1f533.png")}.emoticon._1f534{background-image:url("images/twemoji/72x72/1f534.png")}.emoticon._1f535{background-image:url("images/twemoji/72x72/1f535.png")}.emoticon._1f536{background-image:url("images/twemoji/72x72/1f536.png")}.emoticon._1f537{background-image:url("images/twemoji/72x72/1f537.png")}.emoticon._1f538{background-image:url("images/twemoji/72x72/1f538.png")}.emoticon._1f539{background-image:url("images/twemoji/72x72/1f539.png")}.emoticon._1f53a{background-image:url("images/twemoji/72x72/1f53a.png")}.emoticon._1f53b{background-image:url("images/twemoji/72x72/1f53b.png")}.emoticon._1f53c{background-image:url("images/twemoji/72x72/1f53c.png")}.emoticon._1f53d{background-image:url("images/twemoji/72x72/1f53d.png")}.emoticon._1f550{background-image:url("images/twemoji/72x72/1f550.png")}.emoticon._1f551{background-image:url("images/twemoji/72x72/1f551.png")}.emoticon._1f552{background-image:url("images/twemoji/72x72/1f552.png")}.emoticon._1f553{background-image:url("images/twemoji/72x72/1f553.png")}.emoticon._1f554{background-image:url("images/twemoji/72x72/1f554.png")}.emoticon._1f555{background-image:url("images/twemoji/72x72/1f555.png")}.emoticon._1f556{background-image:url("images/twemoji/72x72/1f556.png")}.emoticon._1f557{background-image:url("images/twemoji/72x72/1f557.png")}.emoticon._1f558{background-image:url("images/twemoji/72x72/1f558.png")}.emoticon._1f559{background-image:url("images/twemoji/72x72/1f559.png")}.emoticon._1f55a{background-image:url("images/twemoji/72x72/1f55a.png")}.emoticon._1f55b{background-image:url("images/twemoji/72x72/1f55b.png")}.emoticon._1f55c{background-image:url("images/twemoji/72x72/1f55c.png")}.emoticon._1f55d{background-image:url("images/twemoji/72x72/1f55d.png")}.emoticon._1f55e{background-image:url("images/twemoji/72x72/1f55e.png")}.emoticon._1f55f{background-image:url("images/twemoji/72x72/1f55f.png")}.emoticon._1f560{background-image:url("images/twemoji/72x72/1f560.png")}.emoticon._1f561{background-image:url("images/twemoji/72x72/1f561.png")}.emoticon._1f562{background-image:url("images/twemoji/72x72/1f562.png")}.emoticon._1f563{background-image:url("images/twemoji/72x72/1f563.png")}.emoticon._1f564{background-image:url("images/twemoji/72x72/1f564.png")}.emoticon._1f565{background-image:url("images/twemoji/72x72/1f565.png")}.emoticon._1f566{background-image:url("images/twemoji/72x72/1f566.png")}.emoticon._1f567{background-image:url("images/twemoji/72x72/1f567.png")}.emoticon._1f5fb{background-image:url("images/twemoji/72x72/1f5fb.png")}.emoticon._1f5fc{background-image:url("images/twemoji/72x72/1f5fc.png")}.emoticon._1f5fd{background-image:url("images/twemoji/72x72/1f5fd.png")}.emoticon._1f5fe{background-image:url("images/twemoji/72x72/1f5fe.png")}.emoticon._1f5ff{background-image:url("images/twemoji/72x72/1f5ff.png")}.emoticon._1f600{background-image:url("images/twemoji/72x72/1f600.png")}.emoticon._1f601{background-image:url("images/twemoji/72x72/1f601.png")}.emoticon._1f602{background-image:url("images/twemoji/72x72/1f602.png")}.emoticon._1f603{background-image:url("images/twemoji/72x72/1f603.png")}.emoticon._1f604{background-image:url("images/twemoji/72x72/1f604.png")}.emoticon._1f605{background-image:url("images/twemoji/72x72/1f605.png")}.emoticon._1f606{background-image:url("images/twemoji/72x72/1f606.png")}.emoticon._1f607{background-image:url("images/twemoji/72x72/1f607.png")}.emoticon._1f608{background-image:url("images/twemoji/72x72/1f608.png")}.emoticon._1f609{background-image:url("images/twemoji/72x72/1f609.png")}.emoticon._1f60a{background-image:url("images/twemoji/72x72/1f60a.png")}.emoticon._1f60b{background-image:url("images/twemoji/72x72/1f60b.png")}.emoticon._1f60c{background-image:url("images/twemoji/72x72/1f60c.png")}.emoticon._1f60d{background-image:url("images/twemoji/72x72/1f60d.png")}.emoticon._1f60e{background-image:url("images/twemoji/72x72/1f60e.png")}.emoticon._1f60f{background-image:url("images/twemoji/72x72/1f60f.png")}.emoticon._1f610{background-image:url("images/twemoji/72x72/1f610.png")}.emoticon._1f611{background-image:url("images/twemoji/72x72/1f611.png")}.emoticon._1f612{background-image:url("images/twemoji/72x72/1f612.png")}.emoticon._1f613{background-image:url("images/twemoji/72x72/1f613.png")}.emoticon._1f614{background-image:url("images/twemoji/72x72/1f614.png")}.emoticon._1f615{background-image:url("images/twemoji/72x72/1f615.png")}.emoticon._1f616{background-image:url("images/twemoji/72x72/1f616.png")}.emoticon._1f617{background-image:url("images/twemoji/72x72/1f617.png")}.emoticon._1f618{background-image:url("images/twemoji/72x72/1f618.png")}.emoticon._1f619{background-image:url("images/twemoji/72x72/1f619.png")}.emoticon._1f61a{background-image:url("images/twemoji/72x72/1f61a.png")}.emoticon._1f61b{background-image:url("images/twemoji/72x72/1f61b.png")}.emoticon._1f61c{background-image:url("images/twemoji/72x72/1f61c.png")}.emoticon._1f61d{background-image:url("images/twemoji/72x72/1f61d.png")}.emoticon._1f61e{background-image:url("images/twemoji/72x72/1f61e.png")}.emoticon._1f61f{background-image:url("images/twemoji/72x72/1f61f.png")}.emoticon._1f620{background-image:url("images/twemoji/72x72/1f620.png")}.emoticon._1f621{background-image:url("images/twemoji/72x72/1f621.png")}.emoticon._1f622{background-image:url("images/twemoji/72x72/1f622.png")}.emoticon._1f623{background-image:url("images/twemoji/72x72/1f623.png")}.emoticon._1f624{background-image:url("images/twemoji/72x72/1f624.png")}.emoticon._1f625{background-image:url("images/twemoji/72x72/1f625.png")}.emoticon._1f626{background-image:url("images/twemoji/72x72/1f626.png")}.emoticon._1f627{background-image:url("images/twemoji/72x72/1f627.png")}.emoticon._1f628{background-image:url("images/twemoji/72x72/1f628.png")}.emoticon._1f629{background-image:url("images/twemoji/72x72/1f629.png")}.emoticon._1f62a{background-image:url("images/twemoji/72x72/1f62a.png")}.emoticon._1f62b{background-image:url("images/twemoji/72x72/1f62b.png")}.emoticon._1f62c{background-image:url("images/twemoji/72x72/1f62c.png")}.emoticon._1f62d{background-image:url("images/twemoji/72x72/1f62d.png")}.emoticon._1f62e{background-image:url("images/twemoji/72x72/1f62e.png")}.emoticon._1f62f{background-image:url("images/twemoji/72x72/1f62f.png")}.emoticon._1f630{background-image:url("images/twemoji/72x72/1f630.png")}.emoticon._1f631{background-image:url("images/twemoji/72x72/1f631.png")}.emoticon._1f632{background-image:url("images/twemoji/72x72/1f632.png")}.emoticon._1f633{background-image:url("images/twemoji/72x72/1f633.png")}.emoticon._1f634{background-image:url("images/twemoji/72x72/1f634.png")}.emoticon._1f635{background-image:url("images/twemoji/72x72/1f635.png")}.emoticon._1f636{background-image:url("images/twemoji/72x72/1f636.png")}.emoticon._1f637{background-image:url("images/twemoji/72x72/1f637.png")}.emoticon._1f638{background-image:url("images/twemoji/72x72/1f638.png")}.emoticon._1f639{background-image:url("images/twemoji/72x72/1f639.png")}.emoticon._1f63a{background-image:url("images/twemoji/72x72/1f63a.png")}.emoticon._1f63b{background-image:url("images/twemoji/72x72/1f63b.png")}.emoticon._1f63c{background-image:url("images/twemoji/72x72/1f63c.png")}.emoticon._1f63d{background-image:url("images/twemoji/72x72/1f63d.png")}.emoticon._1f63e{background-image:url("images/twemoji/72x72/1f63e.png")}.emoticon._1f63f{background-image:url("images/twemoji/72x72/1f63f.png")}.emoticon._1f640{background-image:url("images/twemoji/72x72/1f640.png")}.emoticon._1f645{background-image:url("images/twemoji/72x72/1f645.png")}.emoticon._1f646{background-image:url("images/twemoji/72x72/1f646.png")}.emoticon._1f647{background-image:url("images/twemoji/72x72/1f647.png")}.emoticon._1f648{background-image:url("images/twemoji/72x72/1f648.png")}.emoticon._1f649{background-image:url("images/twemoji/72x72/1f649.png")}.emoticon._1f64a{background-image:url("images/twemoji/72x72/1f64a.png")}.emoticon._1f64b{background-image:url("images/twemoji/72x72/1f64b.png")}.emoticon._1f64c{background-image:url("images/twemoji/72x72/1f64c.png")}.emoticon._1f64d{background-image:url("images/twemoji/72x72/1f64d.png")}.emoticon._1f64e{background-image:url("images/twemoji/72x72/1f64e.png")}.emoticon._1f64f{background-image:url("images/twemoji/72x72/1f64f.png")}.emoticon._1f680{background-image:url("images/twemoji/72x72/1f680.png")}.emoticon._1f681{background-image:url("images/twemoji/72x72/1f681.png")}.emoticon._1f682{background-image:url("images/twemoji/72x72/1f682.png")}.emoticon._1f683{background-image:url("images/twemoji/72x72/1f683.png")}.emoticon._1f684{background-image:url("images/twemoji/72x72/1f684.png")}.emoticon._1f685{background-image:url("images/twemoji/72x72/1f685.png")}.emoticon._1f686{background-image:url("images/twemoji/72x72/1f686.png")}.emoticon._1f687{background-image:url("images/twemoji/72x72/1f687.png")}.emoticon._1f688{background-image:url("images/twemoji/72x72/1f688.png")}.emoticon._1f689{background-image:url("images/twemoji/72x72/1f689.png")}.emoticon._1f68a{background-image:url("images/twemoji/72x72/1f68a.png")}.emoticon._1f68b{background-image:url("images/twemoji/72x72/1f68b.png")}.emoticon._1f68c{background-image:url("images/twemoji/72x72/1f68c.png")}.emoticon._1f68d{background-image:url("images/twemoji/72x72/1f68d.png")}.emoticon._1f68e{background-image:url("images/twemoji/72x72/1f68e.png")}.emoticon._1f68f{background-image:url("images/twemoji/72x72/1f68f.png")}.emoticon._1f690{background-image:url("images/twemoji/72x72/1f690.png")}.emoticon._1f691{background-image:url("images/twemoji/72x72/1f691.png")}.emoticon._1f692{background-image:url("images/twemoji/72x72/1f692.png")}.emoticon._1f693{background-image:url("images/twemoji/72x72/1f693.png")}.emoticon._1f694{background-image:url("images/twemoji/72x72/1f694.png")}.emoticon._1f695{background-image:url("images/twemoji/72x72/1f695.png")}.emoticon._1f696{background-image:url("images/twemoji/72x72/1f696.png")}.emoticon._1f697{background-image:url("images/twemoji/72x72/1f697.png")}.emoticon._1f698{background-image:url("images/twemoji/72x72/1f698.png")}.emoticon._1f699{background-image:url("images/twemoji/72x72/1f699.png")}.emoticon._1f69a{background-image:url("images/twemoji/72x72/1f69a.png")}.emoticon._1f69b{background-image:url("images/twemoji/72x72/1f69b.png")}.emoticon._1f69c{background-image:url("images/twemoji/72x72/1f69c.png")}.emoticon._1f69d{background-image:url("images/twemoji/72x72/1f69d.png")}.emoticon._1f69e{background-image:url("images/twemoji/72x72/1f69e.png")}.emoticon._1f69f{background-image:url("images/twemoji/72x72/1f69f.png")}.emoticon._1f6a0{background-image:url("images/twemoji/72x72/1f6a0.png")}.emoticon._1f6a1{background-image:url("images/twemoji/72x72/1f6a1.png")}.emoticon._1f6a2{background-image:url("images/twemoji/72x72/1f6a2.png")}.emoticon._1f6a3{background-image:url("images/twemoji/72x72/1f6a3.png")}.emoticon._1f6a4{background-image:url("images/twemoji/72x72/1f6a4.png")}.emoticon._1f6a5{background-image:url("images/twemoji/72x72/1f6a5.png")}.emoticon._1f6a6{background-image:url("images/twemoji/72x72/1f6a6.png")}.emoticon._1f6a7{background-image:url("images/twemoji/72x72/1f6a7.png")}.emoticon._1f6a8{background-image:url("images/twemoji/72x72/1f6a8.png")}.emoticon._1f6a9{background-image:url("images/twemoji/72x72/1f6a9.png")}.emoticon._1f6aa{background-image:url("images/twemoji/72x72/1f6aa.png")}.emoticon._1f6ab{background-image:url("images/twemoji/72x72/1f6ab.png")}.emoticon._1f6ac{background-image:url("images/twemoji/72x72/1f6ac.png")}.emoticon._1f6ad{background-image:url("images/twemoji/72x72/1f6ad.png")}.emoticon._1f6ae{background-image:url("images/twemoji/72x72/1f6ae.png")}.emoticon._1f6af{background-image:url("images/twemoji/72x72/1f6af.png")}.emoticon._1f6b0{background-image:url("images/twemoji/72x72/1f6b0.png")}.emoticon._1f6b1{background-image:url("images/twemoji/72x72/1f6b1.png")}.emoticon._1f6b2{background-image:url("images/twemoji/72x72/1f6b2.png")}.emoticon._1f6b3{background-image:url("images/twemoji/72x72/1f6b3.png")}.emoticon._1f6b4{background-image:url("images/twemoji/72x72/1f6b4.png")}.emoticon._1f6b5{background-image:url("images/twemoji/72x72/1f6b5.png")}.emoticon._1f6b6{background-image:url("images/twemoji/72x72/1f6b6.png")}.emoticon._1f6b7{background-image:url("images/twemoji/72x72/1f6b7.png")}.emoticon._1f6b8{background-image:url("images/twemoji/72x72/1f6b8.png")}.emoticon._1f6b9{background-image:url("images/twemoji/72x72/1f6b9.png")}.emoticon._1f6ba{background-image:url("images/twemoji/72x72/1f6ba.png")}.emoticon._1f6bb{background-image:url("images/twemoji/72x72/1f6bb.png")}.emoticon._1f6bc{background-image:url("images/twemoji/72x72/1f6bc.png")}.emoticon._1f6bd{background-image:url("images/twemoji/72x72/1f6bd.png")}.emoticon._1f6be{background-image:url("images/twemoji/72x72/1f6be.png")}.emoticon._1f6bf{background-image:url("images/twemoji/72x72/1f6bf.png")}.emoticon._1f6c0{background-image:url("images/twemoji/72x72/1f6c0.png")}.emoticon._1f6c1{background-image:url("images/twemoji/72x72/1f6c1.png")}.emoticon._1f6c2{background-image:url("images/twemoji/72x72/1f6c2.png")}.emoticon._1f6c3{background-image:url("images/twemoji/72x72/1f6c3.png")}.emoticon._1f6c4{background-image:url("images/twemoji/72x72/1f6c4.png")}.emoticon._1f6c5{background-image:url("images/twemoji/72x72/1f6c5.png")}.emoticon._203c{background-image:url("images/twemoji/72x72/203c.png")}.emoticon._2049{background-image:url("images/twemoji/72x72/2049.png")}.emoticon._2122{background-image:url("images/twemoji/72x72/2122.png")}.emoticon._2139{background-image:url("images/twemoji/72x72/2139.png")}.emoticon._2194{background-image:url("images/twemoji/72x72/2194.png")}.emoticon._2195{background-image:url("images/twemoji/72x72/2195.png")}.emoticon._2196{background-image:url("images/twemoji/72x72/2196.png")}.emoticon._2197{background-image:url("images/twemoji/72x72/2197.png")}.emoticon._2198{background-image:url("images/twemoji/72x72/2198.png")}.emoticon._2199{background-image:url("images/twemoji/72x72/2199.png")}.emoticon._21a9{background-image:url("images/twemoji/72x72/21a9.png")}.emoticon._21aa{background-image:url("images/twemoji/72x72/21aa.png")}.emoticon._23-20e3{background-image:url("images/twemoji/72x72/23-20e3.png")}.emoticon._231a{background-image:url("images/twemoji/72x72/231a.png")}.emoticon._231b{background-image:url("images/twemoji/72x72/231b.png")}.emoticon._23e9{background-image:url("images/twemoji/72x72/23e9.png")}.emoticon._23ea{background-image:url("images/twemoji/72x72/23ea.png")}.emoticon._23eb{background-image:url("images/twemoji/72x72/23eb.png")}.emoticon._23ec{background-image:url("images/twemoji/72x72/23ec.png")}.emoticon._23f0{background-image:url("images/twemoji/72x72/23f0.png")}.emoticon._23f3{background-image:url("images/twemoji/72x72/23f3.png")}.emoticon._24c2{background-image:url("images/twemoji/72x72/24c2.png")}.emoticon._25aa{background-image:url("images/twemoji/72x72/25aa.png")}.emoticon._25ab{background-image:url("images/twemoji/72x72/25ab.png")}.emoticon._25b6{background-image:url("images/twemoji/72x72/25b6.png")}.emoticon._25c0{background-image:url("images/twemoji/72x72/25c0.png")}.emoticon._25fb{background-image:url("images/twemoji/72x72/25fb.png")}.emoticon._25fc{background-image:url("images/twemoji/72x72/25fc.png")}.emoticon._25fd{background-image:url("images/twemoji/72x72/25fd.png")}.emoticon._25fe{background-image:url("images/twemoji/72x72/25fe.png")}.emoticon._2600{background-image:url("images/twemoji/72x72/2600.png")}.emoticon._2601{background-image:url("images/twemoji/72x72/2601.png")}.emoticon._260e{background-image:url("images/twemoji/72x72/260e.png")}.emoticon._2611{background-image:url("images/twemoji/72x72/2611.png")}.emoticon._2614{background-image:url("images/twemoji/72x72/2614.png")}.emoticon._2615{background-image:url("images/twemoji/72x72/2615.png")}.emoticon._261d{background-image:url("images/twemoji/72x72/261d.png")}.emoticon._263a{background-image:url("images/twemoji/72x72/263a.png")}.emoticon._2648{background-image:url("images/twemoji/72x72/2648.png")}.emoticon._2649{background-image:url("images/twemoji/72x72/2649.png")}.emoticon._264a{background-image:url("images/twemoji/72x72/264a.png")}.emoticon._264b{background-image:url("images/twemoji/72x72/264b.png")}.emoticon._264c{background-image:url("images/twemoji/72x72/264c.png")}.emoticon._264d{background-image:url("images/twemoji/72x72/264d.png")}.emoticon._264e{background-image:url("images/twemoji/72x72/264e.png")}.emoticon._264f{background-image:url("images/twemoji/72x72/264f.png")}.emoticon._2650{background-image:url("images/twemoji/72x72/2650.png")}.emoticon._2651{background-image:url("images/twemoji/72x72/2651.png")}.emoticon._2652{background-image:url("images/twemoji/72x72/2652.png")}.emoticon._2653{background-image:url("images/twemoji/72x72/2653.png")}.emoticon._2660{background-image:url("images/twemoji/72x72/2660.png")}.emoticon._2663{background-image:url("images/twemoji/72x72/2663.png")}.emoticon._2665{background-image:url("images/twemoji/72x72/2665.png")}.emoticon._2666{background-image:url("images/twemoji/72x72/2666.png")}.emoticon._2668{background-image:url("images/twemoji/72x72/2668.png")}.emoticon._267b{background-image:url("images/twemoji/72x72/267b.png")}.emoticon._267f{background-image:url("images/twemoji/72x72/267f.png")}.emoticon._2693{background-image:url("images/twemoji/72x72/2693.png")}.emoticon._26a0{background-image:url("images/twemoji/72x72/26a0.png")}.emoticon._26a1{background-image:url("images/twemoji/72x72/26a1.png")}.emoticon._26aa{background-image:url("images/twemoji/72x72/26aa.png")}.emoticon._26ab{background-image:url("images/twemoji/72x72/26ab.png")}.emoticon._26bd{background-image:url("images/twemoji/72x72/26bd.png")}.emoticon._26be{background-image:url("images/twemoji/72x72/26be.png")}.emoticon._26c4{background-image:url("images/twemoji/72x72/26c4.png")}.emoticon._26c5{background-image:url("images/twemoji/72x72/26c5.png")}.emoticon._26ce{background-image:url("images/twemoji/72x72/26ce.png")}.emoticon._26d4{background-image:url("images/twemoji/72x72/26d4.png")}.emoticon._26ea{background-image:url("images/twemoji/72x72/26ea.png")}.emoticon._26f2{background-image:url("images/twemoji/72x72/26f2.png")}.emoticon._26f3{background-image:url("images/twemoji/72x72/26f3.png")}.emoticon._26f5{background-image:url("images/twemoji/72x72/26f5.png")}.emoticon._26fa{background-image:url("images/twemoji/72x72/26fa.png")}.emoticon._26fd{background-image:url("images/twemoji/72x72/26fd.png")}.emoticon._2702{background-image:url("images/twemoji/72x72/2702.png")}.emoticon._2705{background-image:url("images/twemoji/72x72/2705.png")}.emoticon._2708{background-image:url("images/twemoji/72x72/2708.png")}.emoticon._2709{background-image:url("images/twemoji/72x72/2709.png")}.emoticon._270a{background-image:url("images/twemoji/72x72/270a.png")}.emoticon._270b{background-image:url("images/twemoji/72x72/270b.png")}.emoticon._270c{background-image:url("images/twemoji/72x72/270c.png")}.emoticon._270f{background-image:url("images/twemoji/72x72/270f.png")}.emoticon._2712{background-image:url("images/twemoji/72x72/2712.png")}.emoticon._2714{background-image:url("images/twemoji/72x72/2714.png")}.emoticon._2716{background-image:url("images/twemoji/72x72/2716.png")}.emoticon._2728{background-image:url("images/twemoji/72x72/2728.png")}.emoticon._2733{background-image:url("images/twemoji/72x72/2733.png")}.emoticon._2734{background-image:url("images/twemoji/72x72/2734.png")}.emoticon._2744{background-image:url("images/twemoji/72x72/2744.png")}.emoticon._2747{background-image:url("images/twemoji/72x72/2747.png")}.emoticon._274c{background-image:url("images/twemoji/72x72/274c.png")}.emoticon._274e{background-image:url("images/twemoji/72x72/274e.png")}.emoticon._2753{background-image:url("images/twemoji/72x72/2753.png")}.emoticon._2754{background-image:url("images/twemoji/72x72/2754.png")}.emoticon._2755{background-image:url("images/twemoji/72x72/2755.png")}.emoticon._2757{background-image:url("images/twemoji/72x72/2757.png")}.emoticon._2764{background-image:url("images/twemoji/72x72/2764.png")}.emoticon._2795{background-image:url("images/twemoji/72x72/2795.png")}.emoticon._2796{background-image:url("images/twemoji/72x72/2796.png")}.emoticon._2797{background-image:url("images/twemoji/72x72/2797.png")}.emoticon._27a1{background-image:url("images/twemoji/72x72/27a1.png")}.emoticon._27b0{background-image:url("images/twemoji/72x72/27b0.png")}.emoticon._27bf{background-image:url("images/twemoji/72x72/27bf.png")}.emoticon._2934{background-image:url("images/twemoji/72x72/2934.png")}.emoticon._2935{background-image:url("images/twemoji/72x72/2935.png")}.emoticon._2b05{background-image:url("images/twemoji/72x72/2b05.png")}.emoticon._2b06{background-image:url("images/twemoji/72x72/2b06.png")}.emoticon._2b07{background-image:url("images/twemoji/72x72/2b07.png")}.emoticon._2b1b{background-image:url("images/twemoji/72x72/2b1b.png")}.emoticon._2b1c{background-image:url("images/twemoji/72x72/2b1c.png")}.emoticon._2b50{background-image:url("images/twemoji/72x72/2b50.png")}.emoticon._2b55{background-image:url("images/twemoji/72x72/2b55.png")}.emoticon._30-20e3{background-image:url("images/twemoji/72x72/30-20e3.png")}.emoticon._3030{background-image:url("images/twemoji/72x72/3030.png")}.emoticon._303d{background-image:url("images/twemoji/72x72/303d.png")}.emoticon._31-20e3{background-image:url("images/twemoji/72x72/31-20e3.png")}.emoticon._32-20e3{background-image:url("images/twemoji/72x72/32-20e3.png")}.emoticon._3297{background-image:url("images/twemoji/72x72/3297.png")}.emoticon._3299{background-image:url("images/twemoji/72x72/3299.png")}.emoticon._33-20e3{background-image:url("images/twemoji/72x72/33-20e3.png")}.emoticon._34-20e3{background-image:url("images/twemoji/72x72/34-20e3.png")}.emoticon._35-20e3{background-image:url("images/twemoji/72x72/35-20e3.png")}.emoticon._36-20e3{background-image:url("images/twemoji/72x72/36-20e3.png")}.emoticon._37-20e3{background-image:url("images/twemoji/72x72/37-20e3.png")}.emoticon._38-20e3{background-image:url("images/twemoji/72x72/38-20e3.png")}.emoticon._39-20e3{background-image:url("images/twemoji/72x72/39-20e3.png")}.emoticon._a9{background-image:url("images/twemoji/72x72/a9.png")}.emoticon._ae{background-image:url("images/twemoji/72x72/ae.png")}.emoticon._e50a{background-image:url("images/twemoji/72x72/e50a.png")}@media all and (max-width:810px){#wunderlist-base{overflow:auto !important;}#wunderlist-base .main-interface{min-width:810px}#wunderlist-base.chrome.packaged .main-interface{min-width:0}#wunderlist-base.chrome.packaged body,#wunderlist-base.chrome.packaged .main-interface{position:relative !important;overflow:visible !important}}html[dir=ltr] #wunderlist-base .main-interface #lists{left:0;-webkit-box-shadow:1px 0 2px rgba(0,0,0,0.3);box-shadow:1px 0 2px rgba(0,0,0,0.3)}html[dir=ltr] #wunderlist-base .main-interface #tasks{left:270px;right:7px}html[dir=ltr] #wunderlist-base .main-interface #detail{right:-370px;padding-left:0}html[dir=ltr] #wunderlist-base .main-interface.detail-visible #detail{right:0}html[dir=ltr] #wunderlist-base .main-interface.detail-visible #tasks{right:367px}html[dir=rtl] #wunderlist-base .main-interface #lists{right:0;-webkit-box-shadow:-1px 0 2px rgba(0,0,0,0.3);box-shadow:-1px 0 2px rgba(0,0,0,0.3)}html[dir=rtl] #wunderlist-base .main-interface #tasks{right:280px;left:0}html[dir=rtl] #wunderlist-base .main-interface #detail{left:-370px;padding-right:0}html[dir=rtl] #wunderlist-base .main-interface.detail-visible #detail{left:0}html[dir=rtl] #wunderlist-base .main-interface.detail-visible #tasks{left:360px}html[dir=rtl] #wunderlist-base .right{float:left}html[dir=rtl] #wunderlist-base .left{float:right}html[dir=rtl] #wunderlist-base .text-right{text-align:left}html[dir=rtl] #wunderlist-base .text-left{text-align:right}html[dir=rtl] #lists li a .title:before,html[dir=rtl] #tasks .taskItem-titleWrapper-title a:before,html[dir=rtl] #detail .content-fakable .display-view span:before{content:\'a\';font-size:0}@-webkit-keyframes rotate{0%{-webkit-transform:rotate(0)}100%{-webkit-transform:rotate(360deg)}}@-moz-keyframes rotate{0%{-moz-transform:rotate(0)}100%{-moz-transform:rotate(360deg)}}@keyframes rotate{0%{-webkit-transform:rotate(0);-moz-transform:rotate(0);-o-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg)}}'
}), define("/styles/application/_avatars.js", {
name: "application/_avatars",
data: '.avatar{display:block;position:relative;width:25px;height:25px;-webkit-border-radius:3px;border-radius:3px;background:#e0e0e0;}.avatar:hover{cursor:default}.avatar:before{position:absolute;width:23px;height:23px;background:transparent;-webkit-box-shadow:0 1px 0 rgba(255,255,255,0.3);box-shadow:0 1px 0 rgba(255,255,255,0.3);border:1px solid rgba(0,0,0,0.2);-webkit-border-radius:3px;border-radius:3px;content:\'\';z-index:100}.avatar.fake-user{border:none;}.avatar.fake-user:before{-webkit-box-shadow:none;box-shadow:none;border:none}.avatar.fake-user:after,.avatar.no-avatar:after,.avatar.unassigned:after{position:absolute;left:0;top:0;width:100%;height:100%;content:\'k\';font-family:\'Wundercon-Pictograms\';color:#fafafa;text-align:center;font-size:20px;line-height:26px;z-index:0}.avatar.pro-user:after{background-image:url("images/sprites/app.png");background-position:-373px -87px;width:16px;height:16px;position:absolute;z-index:100;content:"";top:-5px;right:-7px;left:auto}.avatar img{height:25px;width:25px;-webkit-border-radius:4px;border-radius:4px;position:relative;z-index:1;}.avatar img[src=""]{visibility:hidden}.avatar.tiny{width:18px;height:18px;}.avatar.tiny:before{width:16px !important;height:16px !important}.avatar.tiny:after{font-size:16px;line-height:18px}.avatar.tiny img{width:18px !important;height:18px !important}.avatar.small{width:22px;height:22px;}.avatar.small:before{width:20px !important;height:20px !important}.avatar.small:after{font-size:20px;line-height:22px}.avatar.small img{width:22px !important;height:22px !important}.avatar.almostmedium{width:28px;height:28px;}.avatar.almostmedium:before{width:26px !important;height:26px !important}.avatar.almostmedium:after{font-size:22px;line-height:30px}.avatar.almostmedium img{width:28px !important;height:28px !important}.avatar.medium{width:32px;height:32px;-webkit-border-radius:4px;border-radius:4px;}.avatar.medium:before{width:30px !important;height:30px !important;-webkit-border-radius:4px;border-radius:4px}.avatar.medium:after{font-size:26px;line-height:34px}.avatar.medium img{height:32px !important;width:32px !important;-webkit-border-radius:4px;border-radius:4px}.avatar.medium.wunderlist-avatar{background:url("images/icon.png") top left !important;-webkit-background-size:32px !important;-moz-background-size:32px !important;background-size:32px !important}.avatar.almostlarge{-webkit-border-radius:0;border-radius:0;width:60px;height:60px;}.avatar.almostlarge:before{display:none}.avatar.almostlarge img{-webkit-border-radius:0;border-radius:0;width:60px;height:60px;margin:0 auto}.avatar.large{-webkit-border-radius:0;border-radius:0;width:120px;height:120px;}.avatar.large:before{border:none;-webkit-box-shadow:none;box-shadow:none;text-shadow:0 1px 3px rgba(0,0,0,0.2)}.avatar.large:after{font-size:100px;line-height:124px}.avatar.large img{-webkit-border-radius:0;border-radius:0;width:120px;height:120px;margin:0 auto}@media only screen and (-webkit-min-device-pixel-ratio: 1.5), only screen and (min--moz-device-pixel-ratio: 1.5){.avatar.pro-user:after{background-image:url("images/sprites/app-retina.png") !important;-webkit-background-size:437px;-moz-background-size:437px;background-size:437px}}'
}), define("/styles/_forms.js", {
name: "_forms",
data: '#wunderlist-base [type=text],#wunderlist-base [type=email],#wunderlist-base [type=password],#wunderlist-base .scale-input,#wunderlist-base .input-fake{width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:6px;font-family:$wlFonts;font-weight:500;font-size:14px;color:#262626;border:none;background-image:-webkit-linear-gradient(top, #fafafa, #fff);background-image:-moz-linear-gradient(top, #fafafa, #fff);background-image:-o-linear-gradient(top, #fafafa, #fff);background-image:-ms-linear-gradient(top, #fafafa, #fff);background-image:linear-gradient(to bottom, #fafafa, #fff);-webkit-box-shadow:inset 0 0 3px rgba(0,0,0,0.11),inset 0 0 0 1px rgba(0,0,0,0.2);box-shadow:inset 0 0 3px rgba(0,0,0,0.11),inset 0 0 0 1px rgba(0,0,0,0.2);-webkit-transition:all 0.15s ease-in-out;-moz-transition:all 0.15s ease-in-out;-o-transition:all 0.15s ease-in-out;-ms-transition:all 0.15s ease-in-out;transition:all 0.15s ease-in-out;-webkit-border-radius:4px;border-radius:4px;}#wunderlist-base [type=text]:focus,#wunderlist-base [type=email]:focus,#wunderlist-base [type=password]:focus,#wunderlist-base .scale-input:focus,#wunderlist-base .input-fake:focus,#wunderlist-base [type=text].focus,#wunderlist-base [type=email].focus,#wunderlist-base [type=password].focus,#wunderlist-base .scale-input.focus,#wunderlist-base .input-fake.focus{-webkit-box-shadow:0 0 5px rgba(24,106,178,0.3),inset 0 0 0 1px rgba(24,106,178,0.6);box-shadow:0 0 5px rgba(24,106,178,0.3),inset 0 0 0 1px rgba(24,106,178,0.6)}#wunderlist-base [type=text].chromeless,#wunderlist-base [type=email].chromeless,#wunderlist-base [type=password].chromeless,#wunderlist-base .scale-input.chromeless,#wunderlist-base .input-fake.chromeless{border:none !important;background:none !important;-webkit-box-shadow:none !important;box-shadow:none !important;-webkit-border-radius:0 !important;border-radius:0 !important;padding:0}#wunderlist-base [type=text].shortcut,#wunderlist-base [type=email].shortcut,#wunderlist-base [type=password].shortcut,#wunderlist-base .scale-input.shortcut,#wunderlist-base .input-fake.shortcut{text-shadow:0 1px 0 rgba(255,255,255,0.4);-webkit-border-radius:4px;border-radius:4px;text-align:center;}#wunderlist-base [type=text].shortcut:focus,#wunderlist-base [type=email].shortcut:focus,#wunderlist-base [type=password].shortcut:focus,#wunderlist-base .scale-input.shortcut:focus,#wunderlist-base .input-fake.shortcut:focus{background:#fff;-webkit-box-shadow:0 0 5px rgba(24,106,178,0.3),inset 0 0 0 1px rgba(24,106,178,0.6);box-shadow:0 0 5px rgba(24,106,178,0.3),inset 0 0 0 1px rgba(24,106,178,0.6)}#wunderlist-base [type=text].big,#wunderlist-base [type=email].big,#wunderlist-base [type=password].big,#wunderlist-base .scale-input.big,#wunderlist-base .input-fake.big{padding:9px 10px 10px}#wunderlist-base [type=text].assign,#wunderlist-base [type=email].assign,#wunderlist-base [type=password].assign,#wunderlist-base .scale-input.assign,#wunderlist-base .input-fake.assign{margin-top:5px;width:200px}#wunderlist-base [type=text].medium,#wunderlist-base [type=email].medium,#wunderlist-base [type=password].medium,#wunderlist-base .scale-input.medium,#wunderlist-base .input-fake.medium{width:83px}#wunderlist-base [type=text].small,#wunderlist-base [type=email].small,#wunderlist-base [type=password].small,#wunderlist-base .scale-input.small,#wunderlist-base .input-fake.small{width:30px}#wunderlist-base [type=text].smaller,#wunderlist-base [type=email].smaller,#wunderlist-base [type=password].smaller,#wunderlist-base .scale-input.smaller,#wunderlist-base .input-fake.smaller{width:20px}#wunderlist-base [type=text].hasIcon,#wunderlist-base [type=email].hasIcon,#wunderlist-base [type=password].hasIcon,#wunderlist-base .scale-input.hasIcon,#wunderlist-base .input-fake.hasIcon{padding-left:28px;}#wunderlist-base [type=text].hasIcon + svg,#wunderlist-base [type=email].hasIcon + svg,#wunderlist-base [type=password].hasIcon + svg,#wunderlist-base .scale-input.hasIcon + svg,#wunderlist-base .input-fake.hasIcon + svg{position:absolute;top:7px;left:10px;fill:#737272}#wunderlist-base [type=text][disabled],#wunderlist-base [type=email][disabled],#wunderlist-base [type=password][disabled],#wunderlist-base .scale-input[disabled],#wunderlist-base .input-fake[disabled]{border-color:#ccc;color:#737272}#wunderlist-base [type=text]:-moz-placeholder,#wunderlist-base [type=email]:-moz-placeholder,#wunderlist-base [type=password]:-moz-placeholder,#wunderlist-base .scale-input:-moz-placeholder,#wunderlist-base .input-fake:-moz-placeholder{color:#737272}#wunderlist-base textarea{resize:none;color:#262626;font-weight:500}#wunderlist-base .select{position:relative;display:inline-block;vertical-align:top;max-width:100%;-webkit-border-radius:4px;border-radius:4px;background-image:-webkit-linear-gradient(top, #fff, #f5f5f5);background-image:-moz-linear-gradient(top, #fff, #f5f5f5);background-image:-o-linear-gradient(top, #fff, #f5f5f5);background-image:-ms-linear-gradient(top, #fff, #f5f5f5);background-image:linear-gradient(to bottom, #fff, #f5f5f5);-webkit-box-shadow:0 1px 1px rgba(0,0,0,0.06),inset 0 0 0 1px rgba(0,0,0,0.15);box-shadow:0 1px 1px rgba(0,0,0,0.06),inset 0 0 0 1px rgba(0,0,0,0.15);font-weight:500;}#wunderlist-base .select:before{background:url("images/sprites/app.png");background-position:-422px -49px;width:9px;height:5px;position:absolute;right:8px;top:12px;content:\'\'}#wunderlist-base .select select{width:100%;-webkit-appearance:none;-moz-appearance:none;-moz-appearance:radio-container;border:none;background:none;color:#262626;font-size:13px;line-height:13px;padding:8px 26px 8px 8px;text-indent:.01px;-o-text-overflow:\'\';text-overflow:\'\';}#wunderlist-base .select select:focus{-webkit-box-shadow:0 1px 3px rgba(43,136,217,0.3),inset 0 0 0 1px rgba(43,136,217,0.65);box-shadow:0 1px 3px rgba(43,136,217,0.3),inset 0 0 0 1px rgba(43,136,217,0.65);margin-bottom:0}#wunderlist-base select.small{width:130px}#wunderlist-base select.smaller{width:70px}#wunderlist-base select.tiny{width:50px}#wunderlist-base.firefox .select{overflow:hidden;}#wunderlist-base.firefox .select select{padding:6px 26px 6px 8px !important;width:120%}#wunderlist-base [type=radio],#wunderlist-base [type=checkbox]{margin-right:5px}@media (-webkit-min-device-pixel-ratio:0){#wunderlist-base [type=checkbox],#wunderlist-base [type=radio]{-webkit-appearance:none;-moz-appearance:none;background:#fff;-webkit-box-shadow:0 1px 1px rgba(0,0,0,0.06),inset 0 0 0 1px rgba(0,0,0,0.15);box-shadow:0 1px 1px rgba(0,0,0,0.06),inset 0 0 0 1px rgba(0,0,0,0.15);height:16px;width:16px;position:relative;-webkit-border-radius:4px;border-radius:4px;vertical-align:bottom;background-image:-webkit-linear-gradient(top, #fff, #f5f5f5);background-image:-moz-linear-gradient(top, #fff, #f5f5f5);background-image:-o-linear-gradient(top, #fff, #f5f5f5);background-image:-ms-linear-gradient(top, #fff, #f5f5f5);background-image:linear-gradient(to bottom, #fff, #f5f5f5);}#wunderlist-base [type=checkbox]:focus,#wunderlist-base [type=radio]:focus{-webkit-box-shadow:0 0 5px rgba(24,106,178,0.3),inset 0 0 0 1px rgba(24,106,178,0.6);box-shadow:0 0 5px rgba(24,106,178,0.3),inset 0 0 0 1px rgba(24,106,178,0.6)}#wunderlist-base [type=checkbox]:checked:after,#wunderlist-base [type=radio]:checked:after{content:\'\';background:url("images/sprites/app.png");background-position:-422px -34px;width:15px;height:15px;font-size:20px;color:#737272;position:absolute;top:-2px;left:2px}#wunderlist-base [type=radio]{-webkit-border-radius:11px;border-radius:11px;}#wunderlist-base [type=radio]:checked:after{background-position:-431px -49px;width:4px;height:4px;top:6px;left:6px}}html[dir=rtl] #wunderlist-base [type=radio],html[dir=rtl] #wunderlist-base [type=checkbox]{margin-right:0;margin-left:5px}html #wunderlist-base [type=text],html #wunderlist-base [type=email],html #wunderlist-base [type=password],html #wunderlist-base .scale-input,html #wunderlist-base .input-fake{font-family:"Lato","Geneva CY","Lucida Grande","Arial Unicode MS","Helvetica Neue","Helvetica","Arial",sans-serif}html:lang(ja_JP) #wunderlist-base [type=text],html:lang(ja_JP) #wunderlist-base [type=email],html:lang(ja_JP) #wunderlist-base [type=password],html:lang(ja_JP) #wunderlist-base .scale-input,html:lang(ja_JP) #wunderlist-base .input-fake{font-family:"Lato","Meiryo UI","Meiryo","メイリオ","ＭＳ Ｐゴシック","MS PGothic","Hiragino Kaku Gothic Pro","Microsoft Yahei","微软雅黑","STXihei","Arial Unicode MS","Helvetica Neue","Helvetica","Arial",sans-serif}html:lang(zh_CN) #wunderlist-base [type=text],html:lang(zh_CN) #wunderlist-base [type=email],html:lang(zh_CN) #wunderlist-base [type=password],html:lang(zh_CN) #wunderlist-base .scale-input,html:lang(zh_CN) #wunderlist-base .input-fake{font-family:"Lato","Microsoft Yahei","微软雅黑","STXihei","Meiryo UI","Meiryo","メイリオ","ＭＳ Ｐゴシック","MS PGothic","Hiragino Kaku Gothic Pro","Arial Unicode MS","Helvetica Neue","Helvetica","Arial",sans-serif}html:lang(zh_TW) #wunderlist-base [type=text],html:lang(zh_TW) #wunderlist-base [type=email],html:lang(zh_TW) #wunderlist-base [type=password],html:lang(zh_TW) #wunderlist-base .scale-input,html:lang(zh_TW) #wunderlist-base .input-fake{font-family:"Lato","Microsoft Yahei","微软雅黑","STXihei","Meiryo UI","Meiryo","メイリオ","ＭＳ Ｐゴシック","MS PGothic","Hiragino Kaku Gothic Pro","Arial Unicode MS","Helvetica Neue","Helvetica","Arial",sans-serif}'
}), define("/styles/_sprite.js", {
name: "_sprite",
data: '.icon{background-image:url("images/sprites/app.png");cursor:pointer;vertical-align:middle;display:inline-block;}.icon.menu-down{background-position:-423px -87px;width:10px;height:10px}.icon.menu-up{background-position:-413px -87px;width:10px;height:10px}.icon.input-assign-delete{background-position:-341px -87px;width:16px;height:16px}.icon.input-assign-frame{background-position:-331px -34px;width:26px;height:26px;}.icon.input-assign-frame.selected{background-position:-357px -34px;width:26px;height:26px}.icon.task-starred,.icon.task-starred:hover{background-position:-197px -80px;width:21px;height:36px}.icon.task-separator{background-position:-237px -34px;width:2px;height:33px}.icon.detail-starred{background-position:-89px -93px;width:29px;height:53px}.icon.logout{background-position:-335px -67px;width:20px;height:20px}.icon.reminder{background-position:-40px -153px;width:40px;height:40px}.icon.big-star{background-position:0 0;width:93px;height:93px}.icon.invite{background-position:-389px -87px;width:12px;height:12px}.icon.remove{background-position:-389px -87px;width:12px;height:12px;-webkit-transform:rotate(45deg);-webkit-filter:grayscale(100%)}.icon.invited{background-position:-401px -87px;width:12px;height:12px}.icon.stripe{background-position:0 -227px;width:322px;height:4px}.icon.love-wunderlist{background-position:-237px 0;width:200px;height:34px}.icon.danke{background-position:0 -193px;width:160px;height:34px}.icon.dismiss{background-position:-285px -87px;width:20px;height:20px}.icon.facebook-small{background-position:-395px -67px;width:18px;height:20px}.icon.twitter-small{background-position:-257px -67px;width:18px;height:20px}.icon.alert{background-position:-259px -87px;width:26px;height:20px}.icon.popover-accepted{background-position:-275px -67px;width:20px;height:20px}.icon.assigned{background-position:-275px -67px;width:20px;height:20px}.icon.settings-general{background-position:-157px 0;width:40px;height:40px}.icon.settings-account{background-position:-197px 0;width:40px;height:40px}.icon.settings-shortcuts{background-position:-157px -40px;width:40px;height:40px}.icon.settings-sidebar{background-position:0 -153px;width:40px;height:40px}.icon.settings-notifications{background-position:-120px -153px;width:40px;height:40px}.icon.settings-about{background-position:-197px -40px;width:40px;height:40px}.icon.settings-group{background-position:-80px -153px;width:40px;height:40px}.icon.wunderlist-icon{background-position:-93px 0;width:64px;height:64px}.icon.facebook-btn{background-position:-237px -87px;width:22px;height:20px}.icon.facebook-icon{background-position:-413px -67px;width:20px;height:20px}.icon.facebook{background-position:-408px -34px;width:14px;height:22px}.icon.twitter-btn{background-position:-295px -67px;width:20px;height:20px}.icon.google-btn{background-position:-315px -67px;width:20px;height:20px}.icon.weibo-btn{background-position:-237px -67px;width:20px;height:20px}.icon.sixw-btn{background-position:-375px -67px;width:20px;height:20px}.icon.support-btn{background-position:-355px -67px;width:20px;height:20px}.icon.pro{background-position:-157px -80px;width:40px;height:40px}.icon.pro-small{background-position:-373px -87px;width:16px;height:16px}.icon.pro-big{background-position:0 -93px;width:60px;height:60px}.icon.add-pro-teammate{background-position:-303px -34px;width:28px;height:28px}.icon.pro-teammate{background-position:-275px -67px;width:20px;height:20px}.icon.added-pro-teammate{background-position:-275px -67px;width:20px;height:20px}.icon.checkmark-blue{background-position:-275px -67px;width:20px;height:20px}.icon.action-flash-cards{background-position:-271px -34px;width:32px;height:32px;}.icon.action-flash-cards:not(.disabled):hover{background-position:-239px -34px;width:32px;height:32px}.files-add{background-image:url("images/sprites/files.png");background-position:-216px 0;width:320px;height:40px;}.files-add:hover{background-position:-216px -80px}.files-add:active,.files-add:focus{background-position:-216px -40px}.files-add.offline:hover,.files-add.notSynced:hover,.files-add.offline:active,.files-add.notSynced:active{background-position:$files-WLDropAreaDefaultLeft;width:;height:}.drop .files-add{background-position:-216px -40px}.small-preview .icon-file.image-thumb{background-position:-162px 0;width:54px;height:54px}.icon-file{background-image:url("images/sprites/files.png");}.icon-file.cancel-action,.icon-file.delete-action{background-position:-162px -118px;width:14px;height:14px;}.icon-file.cancel-action:hover,.icon-file.delete-action:hover{background-position:-190px -90px;width:14px;height:14px}.icon-file.cancel-action:active,.icon-file.delete-action:active{background-position:-162px -104px;width:14px;height:14px}.icon-file.alert{background-position:-162px -132px;width:17px;height:14px}.icon-file.document-thumb{background-position:0 -54px;width:54px;height:54px}.icon-file.image-thumb{background-position:-162px 0;width:54px;height:54px}.icon-file.package-thumb{background-position:0 -108px;width:54px;height:54px}.icon-file.movie-thumb{background-position:-54px 0;width:54px;height:54px}.icon-file.pdf-thumb{background-position:-54px -108px;width:54px;height:54px}.icon-file.audio-thumb{background-position:-108px -108px;width:54px;height:54px}.icon-file.text-thumb{background-position:-54px -54px;width:54px;height:54px}.icon-file.table-thumb{background-position:-108px 0;width:54px;height:54px}.icon-file.presentaion-thumb{background-position:-108px -54px;width:54px;height:54px}.icon-file.files-add-record{background-position:-289px -120px;width:25px;height:25px;}.icon-file.files-add-record:hover{background-position:-264px -120px}.icon-file.files-add-dropbox{background-position:-314px -120px;width:24px;height:22px;}.icon-file.files-add-dropbox:hover{background-position:-338px -120px}.icon-file.files-dropbox-small{background-position:-190px -118px;width:15px;height:14px}.icon-file.record-audio{background-position:-162px -54px;width:18px;height:18px}.icon-file.play-audio{background-position:-475px -120px;width:18px;height:18px}.icon-file.clear-audio{background-position:-400px -120px;width:19px;height:19px}.icon-file.upload-audio{background-position:-419px -120px;width:19px;height:19px}a:hover .record-audio{background-position:-180px -54px}a:hover .play-audio{background-position:-180px -72px}a:hover .upload-audio{background-position:-438px -120px}a:hover .clear-audio{background-position:-381px -120px}a:focus .detail-starred{background-position:-60px -93px}a.recording .record-audio{background-position:-162px -72px;width:18px;height:18px}a.recording:hover .record-audio{background-position:-457px -120px}a.playing .play-audio{background-position:-493px -120px;width:18px;height:18px}a.playing:hover .play-audio{background-position:-198px -54px}a.disabled .upload-audio{background-position:-362px -120px;width:19px;height:19px}a.disabled .play-audio{background-position:-511px -120px;width:18px;height:18px}.audio-recorder-container a:active{background-image:url("images/sprites/files.png");background-position:-216px -120px}.audio-recorder-container a.disabled:active{background:none}.hasPreview .icon-file.delete-action{z-index:9999;background-position:-190px -104px;width:14px;height:14px;}.hasPreview .icon-file.delete-action:hover{background-position:-176px -104px;width:14px;height:14px}.hasPreview .icon-file.delete-action:active{background-position:-176px -118px;width:14px;height:14px}#fullscreen-note a.close span.close{background-image:url("images/sprites/app.png")}.webview .container a.icon.close-webview{background-position:-305px -87px;width:18px;height:18px;opacity:.6;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";filter:alpha(opacity=60);}.webview .container a.icon.close-webview:hover{opacity:1;-ms-filter:none;filter:none}.webview .container a.icon.close-webview:active{background-position:-323px -87px;width:18px;height:18px}@media only screen and (-webkit-min-device-pixel-ratio: 1.5), only screen and (min--moz-device-pixel-ratio: 1.5){.icon{background-image:url("images/sprites/app-retina.png") !important;-webkit-background-size:437px;-moz-background-size:437px;background-size:437px}.icon-file{background-image:url("images/sprites/files-retina.png");-webkit-background-size:536px;-moz-background-size:536px;background-size:536px}#fullscreen-note a.close span.close{background-image:url("images/sprites/app-retina.png") !important;-webkit-background-size:437px;-moz-background-size:437px;background-size:437px}}'
}), define("/styles/_buttons.js", {
name: "_buttons",
data: '#wunderlist-base .button,#wunderlist-base button{position:relative;cursor:pointer;color:#737272;font-weight:bold;font-size:13px;line-height:13px;padding:8px 12px;background-color:#fff;-webkit-border-radius:4px;border-radius:4px;border:1px solid #ddd;margin-right:7px;}#wunderlist-base .button.disabled,#wunderlist-base button.disabled{opacity:.5;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";filter:alpha(opacity=50);}#wunderlist-base .button.disabled:hover,#wunderlist-base button.disabled:hover{cursor:default}#wunderlist-base .button.disabled:active,#wunderlist-base button.disabled:active{opacity:.5;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";filter:alpha(opacity=50)}#wunderlist-base .button:hover,#wunderlist-base button:hover,#wunderlist-base .button background-color:#e0e0e0,#wunderlist-base button background-color:#e0e0e0{text-decoration:none !important}#wunderlist-base .button:focus,#wunderlist-base button:focus{-webkit-box-shadow:0 0 5px rgba(24,106,178,0.3),inset 0 0 0 1px rgba(24,106,178,0.6);box-shadow:0 0 5px rgba(24,106,178,0.3),inset 0 0 0 1px rgba(24,106,178,0.6)}#wunderlist-base .button:active,#wunderlist-base button:active{background-color:#f0f0f0;-webkit-box-shadow:0 1px 1px rgba(0,0,0,0),inset 0 0 0 1px rgba(0,0,0,0.15);box-shadow:0 1px 1px rgba(0,0,0,0),inset 0 0 0 1px rgba(0,0,0,0.15)}#wunderlist-base .button.mini,#wunderlist-base button.mini{padding:3px 10px}#wunderlist-base .button.small,#wunderlist-base button.small{padding:3px 9px;font-weight:500}#wunderlist-base .button.rounded,#wunderlist-base button.rounded{padding:2px 12px;-webkit-border-radius:10px;border-radius:10px}#wunderlist-base .button.circle,#wunderlist-base button.circle{-webkit-border-radius:20px;border-radius:20px;padding:7px;margin:0}#wunderlist-base .button.wide,#wunderlist-base button.wide{padding-left:15px;padding-right:15px}#wunderlist-base .button.wider,#wunderlist-base button.wider{padding-left:20px;padding-right:20px}#wunderlist-base .button.big,#wunderlist-base button.big{display:block;float:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;text-align:center;font-size:16px;width:100%;padding:12px 20px}#wunderlist-base .button.bigger,#wunderlist-base button.bigger{padding:9px 14px;font-size:14px;}#wunderlist-base .button.bigger.login,#wunderlist-base button.bigger.login{margin-top:-3px;padding:11px}#wunderlist-base .button.full,#wunderlist-base button.full{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;float:none;text-align:center;width:100%;display:inline-block;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;margin:0}#wunderlist-base .button.bluetext,#wunderlist-base button.bluetext{font-size:11px;color:#2b88d9 !important}#wunderlist-base .button.selected,#wunderlist-base button.selected,#wunderlist-base .button.blue,#wunderlist-base button.blue{border-color:#186ab2;background-color:#186ab2;color:#fff;}#wunderlist-base .button.selected:hover,#wunderlist-base button.selected:hover,#wunderlist-base .button.blue:hover,#wunderlist-base button.blue:hover,#wunderlist-base .button.selected:focus,#wunderlist-base button.selected:focus,#wunderlist-base .button.blue:focus,#wunderlist-base button.blue:focus{background-color:#268ae2}#wunderlist-base .button.selected:active,#wunderlist-base button.selected:active,#wunderlist-base .button.blue:active,#wunderlist-base button.blue:active,#wunderlist-base .button.selected.active,#wunderlist-base button.selected.active,#wunderlist-base .button.blue.active,#wunderlist-base button.blue.active{background-color:#186ab2}#wunderlist-base .button.green,#wunderlist-base button.green{border-color:#3a7402;color:#fff;font-weight:bold;background-color:#3a7402;}#wunderlist-base .button.green strong,#wunderlist-base button.green strong,#wunderlist-base .button.green b,#wunderlist-base button.green b{font-weight:bold;color:#fff}#wunderlist-base .button.green:hover,#wunderlist-base button.green:hover,#wunderlist-base .button.green:focus,#wunderlist-base button.green:focus{background-color:#61c103}#wunderlist-base .button.green:active,#wunderlist-base button.green:active{background-color:#3a7402;}#wunderlist-base .button.green:active span.light,#wunderlist-base button.green:active span.light{display:inline;color:#c0daa7}#wunderlist-base .button.red,#wunderlist-base button.red{border-color:#db2d26;background-color:#db2d26;color:#fff;}#wunderlist-base .button.red:hover,#wunderlist-base button.red:hover,#wunderlist-base .button.red:focus,#wunderlist-base button.red:focus{background-color:#de443f}#wunderlist-base .button.red:active,#wunderlist-base button.red:active{background-color:#d1231e}#wunderlist-base .button.external,#wunderlist-base button.external{float:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;padding-left:40px;text-align:center;color:#fff;font-weight:bold;font-size:14px;width:100%;}#wunderlist-base .button.external .icon,#wunderlist-base button.external .icon,#wunderlist-base .button.external .icon-login,#wunderlist-base button.external .icon-login{position:absolute;left:7px;top:7px;}#wunderlist-base .button.external .icon.facebook-btn,#wunderlist-base button.external .icon.facebook-btn,#wunderlist-base .button.external .icon-login.facebook-btn,#wunderlist-base button.external .icon-login.facebook-btn{left:3px}#wunderlist-base .button.external .icon.big,#wunderlist-base button.external .icon.big,#wunderlist-base .button.external .icon-login.big,#wunderlist-base button.external .icon-login.big{top:7px;left:7px;margin:0}#wunderlist-base .button.facebook,#wunderlist-base button.facebook{color:#46649a}#wunderlist-base .button.google,#wunderlist-base button.google{color:#d94b42}#wunderlist-base .button.twitter,#wunderlist-base button.twitter{color:#00aeed}#wunderlist-base .button.withArrow,#wunderlist-base button.withArrow{float:none;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin-left:7px;display:inline-block;}#wunderlist-base .button.withArrow:after,#wunderlist-base button.withArrow:after,#wunderlist-base .button.withArrow:before,#wunderlist-base button.withArrow:before{position:absolute;border-width:4px;border-style:solid;border-color:transparent;left:-7px;width:0;height:0;z-index:100;content:"";top:10px}#wunderlist-base .button.withArrow:after,#wunderlist-base button.withArrow:after{border-right-color:#f6f6f6}#wunderlist-base .button.withArrow:before,#wunderlist-base button.withArrow:before{border-right-color:#333}#wunderlist-base .button.left,#wunderlist-base button.left{float:left;width:auto}#wunderlist-base .button.right,#wunderlist-base button.right{float:right;margin-right:0;margin-left:10px}#wunderlist-base .button.nofloat,#wunderlist-base button.nofloat{display:inline-block;float:none;vertical-align:top;margin:0}#wunderlist-base .button.choose,#wunderlist-base button.choose{width:136px}#wunderlist-base .button.accepted,#wunderlist-base button.accepted{height:16px;padding:2px 0 !important;font-weight:500;margin-left:-5px;color:#0d7fe7;}#wunderlist-base .button.accepted span.icon,#wunderlist-base button.accepted span.icon{display:inline-block;margin-top:-2px}#wunderlist-base .button span,#wunderlist-base button span,#wunderlist-base .state span{display:none;}#wunderlist-base .button span.icon,#wunderlist-base button span.icon,#wunderlist-base .state span.icon,#wunderlist-base .button span.wundercon,#wunderlist-base button span.wundercon,#wunderlist-base .state span.wundercon{display:block}#wunderlist-base .button span.wundercon,#wunderlist-base button span.wundercon,#wunderlist-base .state span.wundercon{margin:-4px 0}#wunderlist-base .button.loading,#wunderlist-base button.loading,#wunderlist-base .state.loading{color:transparent !important;}#wunderlist-base .button.loading text,#wunderlist-base button.loading text,#wunderlist-base .state.loading text,#wunderlist-base .button.loading b,#wunderlist-base button.loading b,#wunderlist-base .state.loading b{color:transparent !important}#wunderlist-base .button.loading text,#wunderlist-base button.loading text,#wunderlist-base .state.loading text{white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}#wunderlist-base .button.loading span,#wunderlist-base button.loading span,#wunderlist-base .state.loading span{-webkit-animation:rotate .8s linear infinite;-moz-animation:rotate .8s linear infinite;-webkit-animation:rotate .8s linear infinite;-moz-animation:rotate .8s linear infinite;-o-animation:rotate .8s linear infinite;-ms-animation:rotate .8s linear infinite;animation:rotate .8s linear infinite;display:block;position:absolute;left:50%;top:50%;margin-left:-10px;margin-top:-10px;width:19px;height:19px;background:url("images/loading.png");}#wunderlist-base .button.loading span.dark,#wunderlist-base button.loading span.dark,#wunderlist-base .state.loading span.dark{opacity:.6;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";filter:alpha(opacity=60);background:url("images/loading_black.png")}#wunderlist-base .buttonbar{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;}#wunderlist-base .buttonbar .button,#wunderlist-base .buttonbar button{margin:0;float:left;}#wunderlist-base .buttonbar .button:first-child,#wunderlist-base .buttonbar button:first-child{-webkit-border-radius:4px 0 0 4px;border-radius:4px 0 0 4px}#wunderlist-base .buttonbar .button:last-child,#wunderlist-base .buttonbar button:last-child{-webkit-border-radius:0 4px 4px 0;border-radius:0 4px 4px 0}#wunderlist-base .buttonbar .button.selected + *,#wunderlist-base .buttonbar button.selected + *{border-left:none}@media only screen and (-webkit-min-device-pixel-ratio: 1.5), only screen and (min--moz-device-pixel-ratio: 1.5){#wunderlist-base .facebook-button{background-image:url("images/login/wunderlist-login@2x.png");-webkit-background-size:964px 480px;-moz-background-size:964px 480px;background-size:964px 480px}#wunderlist-base button.loading span,#wunderlist-base .button.loading span{background-image:url("images/loading@2x.png");-webkit-background-size:19px;-moz-background-size:19px;background-size:19px;}#wunderlist-base button.loading span.dark,#wunderlist-base .button.loading span.dark{background:url("images/loading_black@2x.png")}}html[dir=rtl] #wunderlist-base .button,html[dir=rtl] #wunderlist-base button{margin-left:7px;margin-right:initial;}html[dir=rtl] #wunderlist-base .button.withArrow,html[dir=rtl] #wunderlist-base button.withArrow{margin-left:intial;margin-right:7px;}html[dir=rtl] #wunderlist-base .button.withArrow:after,html[dir=rtl] #wunderlist-base button.withArrow:after,html[dir=rtl] #wunderlist-base .button.withArrow:before,html[dir=rtl] #wunderlist-base button.withArrow:before{left:initial;right:-7px;border-right-color:transparent}html[dir=rtl] #wunderlist-base .button.withArrow:after,html[dir=rtl] #wunderlist-base button.withArrow:after{border-left-color:#f6f6f6}html[dir=rtl] #wunderlist-base .button.withArrow:before,html[dir=rtl] #wunderlist-base button.withArrow:before{border-left-color:#333}html .button,html button{font-family:"Lato","Geneva CY","Lucida Grande","Arial Unicode MS","Helvetica Neue","Helvetica","Arial",sans-serif}html:lang(ja_JP) .button,html:lang(ja_JP) button{font-family:"Lato","Meiryo UI","Meiryo","メイリオ","ＭＳ Ｐゴシック","MS PGothic","Hiragino Kaku Gothic Pro","Microsoft Yahei","微软雅黑","STXihei","Arial Unicode MS","Helvetica Neue","Helvetica","Arial",sans-serif}html:lang(zh_CN) .button,html:lang(zh_CN) button{font-family:"Lato","Microsoft Yahei","微软雅黑","STXihei","Meiryo UI","Meiryo","メイリオ","ＭＳ Ｐゴシック","MS PGothic","Hiragino Kaku Gothic Pro","Arial Unicode MS","Helvetica Neue","Helvetica","Arial",sans-serif}html:lang(zh_TW) .button,html:lang(zh_TW) button{font-family:"Lato","Microsoft Yahei","微软雅黑","STXihei","Meiryo UI","Meiryo","メイリオ","ＭＳ Ｐゴシック","MS PGothic","Hiragino Kaku Gothic Pro","Arial Unicode MS","Helvetica Neue","Helvetica","Arial",sans-serif}'
}), define("/styles/_tags.js", {
name: "_tags",
data: ".badge{vertical-align:top;display:inline-block;-webkit-border-radius:10px;border-radius:10px;padding:2px 7px;font-size:8px;line-height:8px;border:1px solid transparent;margin:0 0 0 4px;text-transform:uppercase;}.badge.blue{border-color:#186ab2;color:#1f7bcc}.badge.yellow{border-color:#f1b740;color:#d8a032}.badge.green{border-color:#6ea346;color:#2c7a00}.badge.red{border-color:#d62822;color:#d62822}.tag{display:inline-block}"
}), define("/styles/_dialogs.js", {
name: "_dialogs",
data: '.dialog-wrapper{position:absolute;width:100%;height:100%;z-index:1099;overflow:hidden;}.dialog-wrapper.opaque{background:#000}.dialog{background:#fcfcfc;-webkit-box-shadow:0 1px 25px rgba(0,0,0,0.2),0 0 0 1px rgba(0,0,0,0.08);box-shadow:0 1px 25px rgba(0,0,0,0.2),0 0 0 1px rgba(0,0,0,0.08);position:absolute;top:50px;left:50%;-webkit-border-radius:5px;border-radius:5px;width:392px;left:50%;margin-left:-196px;}.dialog .content-header{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;height:70px;padding:23px 14px;-webkit-border-radius:4px 4px 0 0;border-radius:4px 4px 0 0;border-bottom:1px solid #e0e0df;}.dialog .content-header h2{font-size:20px}.dialog .tabs{text-align:center;background-image:-webkit-linear-gradient(top, #fff, #f0f0f0);background-image:-moz-linear-gradient(top, #fff, #f0f0f0);background-image:-o-linear-gradient(top, #fff, #f0f0f0);background-image:-ms-linear-gradient(top, #fff, #f0f0f0);background-image:linear-gradient(to bottom, #fff, #f0f0f0);-webkit-box-shadow:0 1px 3px rgba(0,0,0,0.15);box-shadow:0 1px 3px rgba(0,0,0,0.15);border-bottom:1px solid #bbb;-webkit-border-radius:4px 4px 0 0;border-radius:4px 4px 0 0;padding:0 14px;position:relative;min-width:590px;}.dialog .tabs ul{height:68px}.dialog .tabs li{display:inline;}.dialog .tabs li span{display:block;margin:0 auto 1px auto}.dialog .tabs li a{display:inline-block;padding:6px 10px;font-weight:bold;font-size:12px;text-shadow:0 1px 0 #fff;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;border:0 solid transparent;border-width:0 1px;}.dialog .tabs li a:hover{background-color:rgba(0,0,0,0.04)}.dialog .tabs li.active a{background-color:rgba(0,0,0,0.08)}.dialog .content-inner{padding:0 14px;margin-bottom:54px}.dialog .separator{zoom:1;margin:14px 0;position:relative;}.dialog .separator:before,.dialog .separator:after{content:"";display:table}.dialog .separator:after{clear:both}.dialog .separator:before{position:absolute;bottom:0;width:100%;content:\'\';height:1px;border-bottom:1px solid #e0e0df}.dialog .separator.big{padding-bottom:22px;margin-bottom:20px}.dialog .separator.bigger{padding-bottom:25px;margin-bottom:25px}.dialog .separator .separator-label{position:absolute;top:-34px;width:100%;text-align:center;color:#737272;text-shadow:0 1px 0 rgba(255,255,255,0.8);}.dialog .separator .separator-label span{background:#fcfcfc;padding:0 10px}.dialog .separator:last-child,.dialog .separator.noline{background:none;}.dialog .separator:last-child:before,.dialog .separator.noline:before{opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}.dialog .separator .cols{margin-bottom:14px}.dialog .separator .cols .cols:last-child{margin-bottom:0}.dialog .separator .cols:only-child{margin-bottom:14px !important}.dialog .separator h3{font-size:13px;line-height:20px;font-weight:600;margin-bottom:5px;}.dialog .separator h3 small{font-weight:normal}.dialog .separator p{font-size:13px;line-height:18px;font-weight:400;}.dialog .separator p a{color:#186ab2;font-weight:bold}.dialog .separator p.small{font-size:11px}.dialog .separator p.small-touch{font-size:10px;display:inline-block}.dialog .separator p.strong{font-weight:bold}.dialog .social-links{margin-top:10px;text-align:center;font-size:0;}.dialog .social-links li{display:inline;margin-left:5px;}.dialog .social-links li .icon{margin-top:-10px}.dialog .notice{padding:24px;}.dialog .notice .wunderlist-icon,.dialog .notice .confirm-text{display:inline-block;vertical-align:top}.dialog .notice .confirm-text{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;width:275px;padding-left:20px}.dialog .notice .content-inner{padding:24px}.dialog .notice h3{word-wrap:break-word;line-height:22px;font-size:15px;line-height:18px;margin-bottom:5px}.dialog .notice p{font-size:11px;line-height:16px}.dialog .content-footer{position:absolute;bottom:0;left:0;right:0;padding:12px;border-top:1px solid #e0e0df;letter-spacing:-1px;}.dialog .content-footer .cols{margin-left:-6px !important;margin-right:-6px !important;}.dialog .content-footer .cols > div{padding:0 6px !important}.dialog .content-footer .button,.dialog .content-footer button{vertical-align:middle}.dialog .error-message{display:none;color:#c72d20;text-shadow:0 1px 0 #fff;font-size:12px !important}.dialog.scroll{bottom:50px;overflow:hidden;}.dialog.scroll .content-inner{position:absolute;left:14px;right:14px;top:0;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch;-webkit-border-radius:0 0 4px 4px;border-radius:0 0 4px 4px;height:auto;padding-left:0;margin-bottom:0;margin-right:0;bottom:54px}.dialog.scroll .tabs ~ .content-inner{top:69px}.firefox .choose input{left:auto !important}html[dir=rtl] .dialog.scroll .content-inner{padding-left:14px;padding-right:0}html[dir=rtl] .dialog .notice .confirm-text{padding-left:0;padding-right:20px}'
}), define("/styles/_rtl.js", {
name: "_rtl",
data: "html[dir=rtl] #wunderlist-base token{display:inline-block}"
}), define("/styles/wundercon.js", {
name: "wundercon",
data: ".wundercon{font-size:20px;font-family:\"Wundercon-Pictograms\";height:20px;width:20px;line-height:16px;display:inline-block;font-weight:normal;text-align:center;}.wundercon:before{content:'F'}.wundercon.plainDelete:before{content:'4'}.wundercon.save.small{font-size:13px}.wundercon.save:before{content:'H'}.wundercon.close-circle:before{content:'5'}.wundercon.close-circle:active:before{content:'6'}.wundercon.info:before{content:'u'}.wundercon.attachment{font-size:13px;}.wundercon.attachment:before{content:'Q'}.wundercon.recurrence:before{content:'f'}.wundercon.fullscreen:before{content:'h'}.wundercon.clippy:before{content:'S'}.wundercon.medium{font-size:18px}.wundercon.small{font-size:16px}.wundercon.publish-success{height:64px;width:64px;position:relative;}.wundercon.publish-success:before{position:absolute;left:0;content:'√';font-size:70px;line-height:50px;margin-left:-3px;color:#b3b3b3}.wundercon.publish-success:after{content:'†';width:25px;height:25px;position:absolute;background:#3b9dde;-webkit-border-radius:100%;border-radius:100%;top:0;left:0;color:#fafafa;font-size:24px;line-height:19px;padding-left:1px}.wundercon.files:before{content:'o'}.wundercon.dated,.wundercon.today{position:relative;}.wundercon.dated:before,.wundercon.today:before{content:'E'}.wundercon.star:before{content:'C'}.wundercon.starred:before{content:'D'}.wundercon.plus-small:before{content:','}.wundercon.offline:before{content:'.'}.wundercon.speech:before{font-size:20px;font-family:\"Wundercon-Pictograms\";height:20px;width:20px;line-height:16px;display:inline-block;font-weight:normal;text-align:center;content:'O'}html[dir=rtl] .wundercon{-webkit-transform:rotateY(180deg);-moz-transform:rotateY(180deg);-o-transform:rotateY(180deg);-ms-transform:rotateY(180deg);transform:rotateY(180deg);}html[dir=rtl] .wundercon.today{-webkit-transform:none;-moz-transform:none;-o-transform:none;-ms-transform:none;transform:none}"
}), define("applications/main/AppView", [ "application/runtime", "views/Login/InterfaceView", "views/Main/MainInterfaceView", "application/AppView", "wunderbits/data/keycodes", "helpers/WindowTitleHelper", "helpers/URLResolver", "actions/Factory", "style!application/_layout", "style!application/_avatars", "style!_forms", "style!_sprite", "style!_buttons", "style!_tags", "style!_dialogs", "style!_animation", "style!_rtl", "style!wundercon" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m, g, f, b, h) {
var v = e._, _ = e.$, w = e.global, k = w.Image, x = n.prototype, y = e.env.isPackagedApp(), C = [ "app:", "chrome:", "chrome-extension:" ];
return n.extend({
views: {
Login: t,
MainInterface: i
},
styles: [ d, l, c, u, p, m, g, f, b, h ],
el: "body",
events: {
"keydown a, button": "translateKeydown",
"click a[data-path]": "handlePathLinks",
'click a.linkout,a[target="_blank"]': "handleExternalLinks"
},
initialize: function() {
var t = this;
t.sidebarActions = s.sidebar(), x.initialize.apply(t, arguments), t.bindTo(e.settings, "change:background", t.onChangeBackground), 
o.init(), t.bindTo(e, "preload:sprites", t.preloadSprites);
},
handlePathLinks: function(t) {
var i = t.currentTarget, n = e.currentRoute(), a = i && i.dataset && i.dataset.path;
a !== n && (t.preventDefault(), e.trigger("route:" + a));
},
handleExternalLinks: function(t) {
var i = t.currentTarget, n = -1 !== C.indexOf(i.protocol), a = i.classList.contains("hash");
if (y && n && !a && (i.protocol = "https:", i.host = "www.wunderlist.com", n = !1), 
e.env.isNodeWebkit() && !n) t.preventDefault(), w.require("nw.gui").Shell.openExternal(i.href); else {
var o = i.host === location.host, r = i.pathname === location.pathname, s = o && r && i.hash.length > 0;
if (s) {
var l = i.hash.substr(2);
e.env.isFirefox() && (l = l.replace("#", "%23"));
var d = e.currentRoute();
l && l !== d && (t.preventDefault(), e.trigger("route:" + l));
}
}
},
onChangeBackground: function() {
var t = this, i = e.settings.attributes;
i.background && t.setBackground(i.background);
},
setFocusToAddTask: function() {
var e = this;
"MainInterface" === e.activeViewName && e.activeView.setFocusToAddTask();
},
preloadSprites: function() {
var t = e.env.getCurrentWidth(), i = [ "numbers.png", "textures/divider.png", "textures/unread.png" ];
if (e.env.isRetina()) {
var n = [ "sprites/app-retina.png" ];
i = i.concat(n);
} else {
var a = [ "sprites/app.png" ];
i = i.concat(a);
}
t = t > 1024 ? "2048" : t > 768 ? "1024" : t > 640 ? "768" : "640", i.push("backgrounds/" + t + "/06.jpg");
var o = [];
v.each(i, function(e, t) {
o[t] = new k(), o[t].src = r.resolve("images/" + e);
});
},
setBackground: function(t) {
var i = this;
if (e.user.attributes.access_token) {
var n = i.$el[0].className.split(/\s/g);
t = t.substr(-2), n = v.filter(n, function(e) {
return !/^background\-\w+$/.test(e);
}), n.push("background-" + t), i.$el[0].className = n.join(" ");
}
},
hideModals: function() {
e.trigger("modal:close settings:close");
},
openSignup: function() {
var e = this;
e.switchToView("Login", null, null, function(e) {
e.toggleLoginForm(null, "signup");
});
},
openFacebookSignup: function(e) {
var t = this, i = {
forceOption: "A"
};
t.switchToView("Login", i, null, function(t) {
t._checkFacebookStatus && t._checkFacebookStatus(e);
});
},
openLogin: function() {
var e = this;
e.switchToView("Login");
},
openLists: function() {
var e = this;
e.switchToView("MainInterface", null, null, function(t) {
e.goToPage("lists"), t.waitToShowList();
});
},
openMainInterface: function() {
var e = this;
e.switchToView("MainInterface", null, null, function(e) {
e.waitToShowList();
});
},
openFilter: function(t, i) {
var n = this;
n.switchToView("MainInterface", null, null, function(a) {
n.goToPage("tasks"), t !== e.lastFilter || e.state.attributes.inSearchState ? a.showFilter(t, i) : a.resetView(), 
e.lastFilter = t, e.lastListID = null;
});
},
openList: function(t, i) {
var n = this;
n.switchToView("MainInterface", null, null, function(a) {
n.goToPage("tasks"), n.sidebarActions.expandFolderForList(t.id), t.id !== e.lastListID || e.state.attributes.inSearchState ? a.showList(t, i) : a.resetView(t), 
e.state.attributes.inSearchState || (e.lastFilter = null, e.lastListID = t.id);
});
},
editFolder: function(e, t) {
var i = this;
i.switchToView("MainInterface", null, null, function(i) {
i.editFolder(e.id, t);
});
},
fetchTaskCounts: function(t) {
var i = parseInt(t, 10);
e.trigger("sync:start", !1, "tasksCounts", i);
},
openTask: function(t, i) {
var n = this;
n.switchToView("MainInterface", null, null, function(a) {
n.sidebarActions.expandFolderForList(t.attributes.list_id), n.goToPage("detail"), 
i.lastFilter = e.lastFilter ? e.lastFilter : e.lastListID, a.showTask(t, i);
});
},
openTBV404: function(e) {
var t = this;
t.switchToView("MainInterface", null, null, function(i) {
t.goToPage("lists"), i.showTBV404(e);
});
},
showLoading: function() {
var t = this;
t.switchToView("MainInterface", null, null, function(i) {
var n = _('<div id="loading" class="loading"><span/></div>').append(e.language.getLabel("label_loading").toString());
t.el.appendChild(n[0]), t.renderLabels(), i.$el.addClass("hidden");
});
},
hideLoading: function() {
var e = this;
e.switchToView("MainInterface", null, null, function(t) {
e.$("#loading").remove(), t.$el.removeClass("hidden");
});
},
goToPage: function(t) {
var i = this;
i.hideModals(), e.trigger("popover:close");
var n = "#" + t, a = _(n);
i.isInitialPageView = !i.hasOpenedInitialPage, i.hasOpenedInitialPage = !0, i.trigger("page", t, a);
},
translateKeydown: function(e) {
e.which === a.enter && (_(e.target).click(), "button" === e.target.nodeName.toLowerCase() && e.preventDefault(), 
e.stopPropagation());
}
});
}), define("wunderbits/WBApplication", [ "wunderbits/BaseEventEmitter", "project!core/mixins/WBDestroyableMixin" ], function(e, t) {
return e.extend({
mixins: [ t ]
});
}), !function(e) {
if ("object" == typeof exports) module.exports = e(); else if ("function" == typeof define && define.amd) define("vendor/MagiConsole/MagiConsole", e); else {
var t;
"undefined" != typeof window ? t = window : "undefined" != typeof global ? t = global : "undefined" != typeof self && (t = self), 
t.MagiConsole = e();
}
}(function() {
return function e(t, i, n) {
function a(r, s) {
if (!i[r]) {
if (!t[r]) {
var l = "function" == typeof require && require;
if (!s && l) return l(r, !0);
if (o) return o(r, !0);
throw new Error("Cannot find module '" + r + "'");
}
var d = i[r] = {
exports: {}
};
t[r][0].call(d.exports, function(e) {
var i = t[r][1][e];
return a(i ? i : e);
}, d, d.exports, e, t, i, n);
}
return i[r].exports;
}
for (var o = "function" == typeof require && require, r = 0; r < n.length; r++) a(n[r]);
return a;
}({
1: [ function(e, t) {
function i() {}
var n = t.exports = {};
n.nextTick = function() {
var e = "undefined" != typeof window && window.setImmediate, t = "undefined" != typeof window && window.postMessage && window.addEventListener;
if (e) return function(e) {
return window.setImmediate(e);
};
if (t) {
var i = [];
return window.addEventListener("message", function(e) {
var t = e.source;
if ((t === window || null === t) && "process-tick" === e.data && (e.stopPropagation(), 
i.length > 0)) {
var n = i.shift();
n();
}
}, !0), function(e) {
i.push(e), window.postMessage("process-tick", "*");
};
}
return function(e) {
setTimeout(e, 0);
};
}(), n.title = "browser", n.browser = !0, n.env = {}, n.argv = [], n.on = i, n.once = i, 
n.off = i, n.emit = i, n.binding = function() {
throw new Error("process.binding is not supported");
}, n.cwd = function() {
return "/";
}, n.chdir = function() {
throw new Error("process.chdir is not supported");
};
}, {} ],
2: [ function(e, t) {
function i(e, t) {
var n = this;
e = e || {};
var o = e.mixins || [];
delete e.mixins;
for (var r, s = a(n, e, t); o.length; ) r = o.shift(), "function" == typeof r.applyToClass && r.applyToClass(s);
return s.extend = n.extend || i, s;
}
function n(e) {
var t = this;
t.uid = t.uid || s(), t.options = e || t.options, t.augmentProperties(), t.initialize.apply(t, arguments), 
t.initMixins.apply(t, arguments);
}
var a = e("./lib/inherits"), o = e("./lib/extend"), r = e("./lib/clone"), s = e("./lib/createUID"), l = e("./lib/fromSuper"), d = {
initialize: function() {
var e = this;
return e;
},
initMixins: function() {
for (var e, t = this, i = l.concat(t, "initializers"); i.length; ) e = i.shift(), 
"function" == typeof e && e.apply(t, arguments);
},
augmentProperties: function() {
function e(e, i) {
var n = typeof i;
t[e] = "function" === n ? i.call(t) : "object" === n ? r(i, !0) : i;
}
var t = this, i = l.merge(t, "properties");
for (var n in i) e(n, i[n]);
}
};
o(n.prototype, d), n.extend = i, t.exports = n;
}, {
"./lib/clone": 4,
"./lib/createUID": 5,
"./lib/extend": 6,
"./lib/fromSuper": 7,
"./lib/inherits": 9
} ],
3: [ function(e, t) {
function i(e, t) {
if (!e) throw new Error(t || "");
}
function n(e) {
i[e] = function(t, n) {
i(typeof t === e, n);
};
}
var a = Array.isArray;
i.empty = function(e, t) {
var n = a(e) ? e : Object.keys(e);
i(0 === n.length, t);
}, i.array = function(e, t) {
i(a(e), t);
}, i["class"] = function(e, t) {
var n = e.prototype;
i(n && n.constructor === e, t);
};
for (var o = [ "undefined", "boolean", "number", "string", "function", "object" ]; o.length; ) n(o.shift());
t.exports = i;
}, {} ],
4: [ function(e, t) {
function i(e, t) {
if (e = e.slice(), t) {
for (var i, n = []; e.length; ) i = e.shift(), i = i instanceof Object ? o(i, t) : i, 
n.push(i);
e = n;
}
return e;
}
function n(e) {
return new Date(e.getTime());
}
function a(e, t) {
var i = {};
for (var a in e) if (e.hasOwnProperty(a)) {
var r = e[a];
i[a] = r instanceof Date ? n(r) : "object" == typeof r && null !== r && t ? o(r, t) : r;
}
return i;
}
function o(e, t) {
return r(e) ? i(e, t) : a(e, t);
}
var r = Array.isArray;
t.exports = o;
}, {} ],
5: [ function(e, t) {
function i(e) {
var t = 16 * Math.random() | 0, i = "n" === e ? t : 3 & t | 8;
return i.toString(16);
}
function n(e) {
var t = "nnnnnnnn-nnnn-6nnn-pnnn-nnnnnnnnnnnn".replace(/[np]/g, i);
return String(e ? e : "") + t;
}
t.exports = n;
}, {} ],
6: [ function(e, t) {
function i() {
var e = n(arguments);
o(e.length > 0, "extend expect one or more objects");
for (var t = e.shift(); e.length; ) a(t, e.shift());
return t;
}
var n = e("./toArray"), a = e("./merge"), o = e("./assert");
t.exports = i;
}, {
"./assert": 3,
"./merge": 10,
"./toArray": 11
} ],
7: [ function(e, t) {
function i(e, t) {
var n = e.constructor, r = n.prototype, s = {};
e.hasOwnProperty(t) ? s = e[t] : r.hasOwnProperty(t) && (s = r[t]);
var l = n && n.__super__;
return l && (s = a(i(l, t), s)), o({}, s);
}
function n(e, t) {
var i = e.constructor, a = i.prototype, o = [];
e.hasOwnProperty(t) ? o = e[t] : a.hasOwnProperty(t) && (o = a[t]);
var r = i && i.__super__;
return r && (o = [].concat(n(r, t), o)), [].concat(o);
}
var a = e("./merge"), o = e("./extend");
t.exports = {
merge: i,
concat: n
};
}, {
"./extend": 6,
"./merge": 10
} ],
8: [ function(e, t) {
function i(e) {
var t = [];
for (var i in e) "function" == typeof e[i] && t.push(i);
return t;
}
t.exports = i;
}, {} ],
9: [ function(e, t) {
function i(e, t, i) {
var a;
return a = t && t.hasOwnProperty("constructor") ? t.constructor : function() {
return e.apply(this, arguments);
}, n(a, e), a.prototype = Object.create(e.prototype), n(a.prototype, t), a.prototype.constructor = a, 
n(a, i), a.__super__ = e.prototype, a;
}
var n = e("./extend");
t.exports = i;
}, {
"./extend": 6
} ],
10: [ function(e, t) {
function i(e, t) {
for (var i = n(arguments, 1); i.length; ) {
t = i.shift();
for (var a in t) t.hasOwnProperty(a) && (e[a] = t[a]);
}
return e;
}
var n = e("./toArray");
t.exports = i;
}, {
"./toArray": 11
} ],
11: [ function(e, t) {
function i(e, t) {
return n.call(e, t || 0);
}
var n = Array.prototype.slice;
t.exports = i;
}, {} ],
12: [ function(e, t) {
(function(i, n) {
var a = i.browser;
if (a && n.MagiConsole) t.exports = n.MagiConsole; else {
var o = n.console, r = e("wunderbits.core/public/WBClass"), s = e("wunderbits.core/public/lib/assert"), l = e("wunderbits.core/public/lib/functions"), d = e("wunderbits.core/public/lib/toArray"), c = {
error: 3,
warn: 4,
log: 5,
info: 6,
debug: 7
}, u = Object.keys(c), p = {
blue: "[34m",
cyan: "[36m",
green: "[32m",
grey: "[90m",
magenta: "[35m",
red: "[31m",
white: "[37m",
yellow: "[33m"
}, m = "[39m", g = {
debug: "cyan",
error: "red",
info: "grey",
log: "white",
warn: "yellow"
};
u.forEach(function(e) {
"function" != typeof o[e] && (o[e] = o.log);
});
var f = {
constructor: function(e) {
var t = this;
s.string(e, "namespace must be a string");
var i = b.namespaces;
return i[e] instanceof b ? i[e] : (t.namespace = e, i[e] = t, void r.call(t));
},
shouldRunLevel: function(e) {
var t = c[b.level], i = c[e];
return void 0 === t || void 0 === i ? !0 : b.levelOnly ? i === t : t >= i;
},
shouldRun: function(e) {
var t = this, i = b.pattern, n = b.level, a = i && i.test(t.namespace);
return a = a && (n ? t.shouldRunLevel(e) : !0), !(!a || !o);
},
colorizeString: function(e, t) {
return p[t] + e + m;
},
colorizeNamespace: function(e, t) {
var i = g[t];
return i && (e = this.colorizeString(e, i)), e;
},
injectNamespace: function(e, t) {
var i = this;
if (u.indexOf(e) >= 0) {
t = d(t);
var n = "[" + i.namespace.toUpperCase() + "]";
!a && (n = i.colorizeNamespace(n, e)), "string" == typeof t[0] ? t[0] = n + " " + t[0] : t.unshift(n);
}
return t;
}
};
l(o).forEach(function(e) {
f[e] = function() {
var t = this, i = arguments;
t.shouldRun(e) && (i = t.injectNamespace(e, i), o[e].apply(o, i));
};
});
var b = r.extend(f);
if (b.release = function() {
b.namespaces = {};
}, b.reset = b.off = function() {
b.pattern = void 0, b.level = void 0, b.levelOnly = !1;
}, b.setPattern = function(e) {
s.string(e, "regexPatternString must be a string"), e = "*" === e ? ".?" : e, b.pattern = new RegExp(e);
}, b.setLevel = function(e, t) {
s.string(e, "logLevel must be a string"), e = "*" === e ? void 0 : e, b.level = e, 
b.levelOnly = !!t;
}, !a) {
var h = i.env, v = h.MLOG, _ = h.MLEVEL;
v && b.setPattern(v), _ && b.setLevel(_, "true" === h.MLEVELONLY);
}
b.release(), b.reset(), t.exports = n.MagiConsole = b;
}
}).call(this, e("/Users/test/Documents/6wunderkinder/MagiConsole/node_modules/gulp-cjs/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"), "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
}, {
"/Users/test/Documents/6wunderkinder/MagiConsole/node_modules/gulp-cjs/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js": 1,
"wunderbits.core/public/WBClass": 2,
"wunderbits.core/public/lib/assert": 3,
"wunderbits.core/public/lib/functions": 8,
"wunderbits.core/public/lib/toArray": 11
} ]
}, {}, [ 12 ])(12);
}), define("helpers/errorTracker", [ "application/runtime", "project!core/WBSingleton", "wunderbits/helpers/strings", "vendor/bugsnag" ], function(e, t, i) {
var n = new RegExp([ "handleMouseoverEvent", "KW__injectedScriptMin", "sendURLToGuardwareProxy", "SkypeClick2Call", "symcBFPerformOnDOMChangedHandler", "symcBFGetSafeSearchValuesHandler" ].join("|"), "g"), a = e._, o = e.global.Bugsnag.noConflict(), r = e.global.location;
return t.extend({
init: function() {
var t = this;
e.error = t, o.apiKey = e.config.bugsnagKey, o.appVersion = e.config.release || "local", 
o.releaseStage = e.config.name || "development", o.metaData = {
isChromeApp: e.env.isChromeApp(),
isNodeWebkit: e.env.isNodeWebkit()
};
var i = e.global.gitHash;
if (i) {
var n = i.match(/\[(.+)\]/), a = n && n[1];
a && (o.metaData.gitHash = a);
}
e.on("user:set", function() {
e.user.on("change", t.saveUser), t.saveUser();
}), e.on("focus:changed", function(e) {
o.metaData.focus = e;
}), o.beforeNotify = t.beforeNotify;
},
beforeNotify: function(t, a) {
if (n.test(t.stacktrace)) return !1;
if (t.context = i.sanitizeHash(r.hash), "undefined" == typeof document && (a.worker = !0), 
a.syncCount = e.state.attributes.syncCount, a.heapSizeMB = e.getHeapSizeMB(), e.started) {
var o = Math.round((Date.now() - e.started) / 1e3 / 60);
a.minutesRunning = o;
}
},
saveUser: function() {
o.user = {
id: e.user.id,
pro: e.user.attributes.pro,
language: e.user.attributes.language
};
},
exception: function(e, t, i) {
i = a.merge({}, o.metaData, i), o.notifyException(e, t, i);
},
notify: function(e, t, i) {
i = a.merge({}, o.metaData, i), o.notify(e, t, i);
}
});
}), define("application/Application", [ "application/runtime", "helpers/TrackingService", "wunderbits/WBApplication", "backend/IOWunderapi", "vendor/MagiConsole/MagiConsole", "helpers/errorTracker" ], function(e, t, i, n, a, o) {
var r = e.config, s = e.$;
o.init();
var l = i.prototype;
return i.extend({
initialize: function(i, o) {
var d = this;
l.initialize.apply(d, arguments), d.options = o;
var c = e.$("body");
c.attr("role", "application"), r.logPattern && a.setPattern(r.logPattern), r.logLevel && a.setLevel(r.logLevel), 
(e.env.isPackagedApp() || !e.isFrame() && !e.isEmbedded()) && c.attr("id", "wunderlist-base"), 
e.env.isChromeOS && e.env.isArmProcessor() && c.addClass("chrome-os");
var u = s('<div id="initial-loader" class="state loading"><span class="dark"></span></div>');
c.append(u), e.once("interface:ready", function() {
u.remove();
}), e.application = i, e.io = new n(), t.init();
}
});
}), define("applications/main/Application", [ "application/runtime", "./Router", "backend/DatabaseManager", "backend/languageManager", "collections/CollectionManager", "models/RootModel", "models/UserModel", "models/UserSettingsModel", "models/LanguageModel", "backend/sync", "backend/timer", "helpers/GoogleAnalytics", "helpers/iyfRules", "helpers/Positions", "helpers/PrintHelper", "helpers/socialPrompts", "helpers/onboarding/BaseOnboardingFlow", "helpers/onboarding/ExistingUserOnboardingFlow", "helpers/unload", "helpers/RateDialogManager", "./AppView", "application/Application" ], function(e, t, i, n, a, o, r, s, l, d, c, u, p, m, g, f, b, h, v, _, w, k) {
var x = e.$, y = e.config, C = k.prototype, T = window;
return k.extend({
initialize: function() {
var e = this;
C.initialize.apply(e, arguments), u.init(), i.init().then(e.startApp, e);
},
startApp: function() {
var i = this;
e.trigger("timeline:start", "main_app_started"), e.trigger("timeline:start", "refresh_start"), 
e.trigger("timeline:start", "lists_loaded"), i.sync = new d(), i.runtime = e, e.trigger("set:user", new r(i.options.userData)), 
e.trigger("set:root", new o()), e.trigger("set:settings", new s()), e.trigger("set:language", new l()), 
c.init(), n.init(), i.collectionManager = new a(), g.init(), v.init(), i.appView = new w(), 
i.router = new t({
outlet: i.appView
}), i.bindTo(e, "timer:start", c.start, c), i.bindTo(e, "timer:stop", c.stop, c), 
i.bindOnceTo(e, "onboarding:newUser", function() {
i.onboardingHelper = new b();
}), i.bindOnceTo(e, "onboarding:existingUser", function() {
i.onboardingHelper = new h();
}), i.bindTo(e, "app:checkPackageForUpdate", "checkForPackagedAppUpdates"), e.ready.done(i.onRuntimeReady, i);
},
onRuntimeReady: function() {
var t = this;
t.socialPrompts = new f(), e.env.isChrome() && (t.rateDialogManager = new _()), 
t.iyf = new p(), t.router.start();
var i = "www";
e.isInstalledOnChrome() && (i = "chrome"), e.trigger("analytics:Application:start", i), 
e.env.isPackagedApp() ? e.env.isNodeWebkit() && t.checkForPackagedAppUpdates() : y.name && t.checkForUpdates();
},
parseVersionNumber: function(e) {
return parseInt(e.split(".").join(""), 10);
},
checkForPackagedAppUpdates: function() {
var t = this, i = e.config.release;
x.ajax("package.json", {
dataType: "JSON",
type: "GET"
}).done(function(n) {
n.release === i ? (e.state.set("updateState", "updated"), t.delay("checkForPackagedAppUpdates", 9e5)) : t.parseVersionNumber(n.release) > t.parseVersionNumber(i) && t.delay(function() {
e.trigger("modal:confirm", {
customTitle: e.language.getLabel("label_update_available").toString(),
customText: e.language.getLabel("label_update_completed_please_restart").toString(),
confirmText: e.language.getLabel("button_restart_wunderlist").toString(),
confirm: function() {
e.trigger("reload");
},
cancel: function() {
t.delay("checkForPackagedAppUpdates", 108e5), e.state.set("updateState", "default");
}
});
}, 15e3);
});
},
getVersionURL: function() {
var t = e.global.location, i = t.protocol + "//" + t.host;
return i + "/version.json?rand=" + Math.random();
},
checkForUpdates: function() {
var t = this, i = T.gitHash && T.gitHash.split(/[\[\]]/)[1];
i && x.ajax(t.getVersionURL(), {
dataType: "text",
type: "GET"
}).done(function(n) {
var a;
try {
a = JSON.parse(n);
} catch (o) {
e.trigger("analytics:Application:failedToFetchVersionFile", o);
}
if (a) {
var r = a && a.deployments[0], s = r && r.commits[0], l = s.sha1;
if (0 === i.indexOf(l)) t.delay("checkForUpdates", 18e5); else {
e.trigger("analytics:Application:updateAvailable");
var d, c = function(t) {
return e.trigger("analytics:Application:reloadForUpdate", t), setTimeout(function() {
e.publish("application:reloading");
var t = T.location;
t.href = t.pathname + "?_rand=" + Math.random() + t.hash;
}, 1e4);
}, u = function() {
d = c("pageHidden"), e.once("page:visible", p);
}, p = function() {
clearTimeout(d), e.once("page:hidden", u);
};
if (e.isVisible()) {
e.once("page:hidden", u);
var m = 0, g = function() {
m += 1, m > 10 && c("userIdle");
};
T.setInterval(g, 6e4), x(document).mousemove(function() {
m = 0;
}).keypress(function() {
m = 0;
});
} else c("pageNotVisible"), e.once("page:visible", p);
}
}
});
}
});
}), define("languages/english", {
name: "english",
data: {
actionbar_print_selected_item: "Print Selected Item",
actionbar_print_$_selected_items_plural: "Print $ Selected Items",
actionbar_email_selected_item: "Email Selected Item",
actionbar_email_$_selected_items_plural: "Email $ Selected Items",
actionbar_sort_alphabetically: "Sort Alphabetically",
actionbar_sort_due_date: "Sort by Due Date",
actionbar_sort_assignee: "Sort by Assignee",
actionbar_sort_created_at: "Sort by Creation Date",
actionbar_sort_priority: "Sort by Priority",
actionbar_duplicate_list: "Duplicate List",
api_error_account_locked_due_to_failed_attempts: "Your account has been temporarily locked due to too many incorrect sign in attempts. You can try again in 5 minutes.",
api_error_account_already_exists: "An account with this email address already exists.",
api_error_connection_error: "There was a problem connecting to the Wunderlist servers. Please try again and check status.wunderlist.com for updates.",
api_error_general_error: "Wunderlist servers are experiencing problems. Please try again and check status.wunderlist.com for updates.",
api_error_incorrect_login: "The email address or password you entered is incorrect.",
api_error_incorrect_password: "The password you entered is incorrect.",
api_error_internet_connection_error: "It looks like you are not connected to the Internet. Please check your connection, and try again.",
api_error_service_down: "Wunderlist servers are experiencing problems. Please try again and check status.wunderlist.com for updates.",
api_error_unauthorized: "You don't have permission to see this. Please try signing out and in again.",
api_error_unknown: "Wunderlist servers are experiencing problems. Please try again and check status.wunderlist.com for updates.",
api_error_validation_error: "Sorry, it looks like that was an invalid input, please try again.(Error 422)",
api_error_validation_error_unable_to_signup: "We were unable to create an account with your email address. Please check and try again.",
button_back: "Back",
button_cancel: "Cancel",
button_confirm: "Confirm",
button_download: "Download",
button_change: "Change",
button_choose: "Choose",
button_connect: "Connect",
button_connect_facebook: "Connect With Facebook",
button_continue: "Continue",
button_copy: "Copy",
button_cut: "Cut",
button_delete: "Delete",
button_disconnect: "Disconnect",
button_dismiss: "Dismiss",
button_close: "Close",
button_done: "Done",
button_edit: "Edit",
button_edit_list: "Edit List",
button_get_started: "Get Started",
button_go_back: "Go Back",
button_go_back_sentence: "Go Back.",
button_learn_more: "Learn More",
button_go_back_to_login: "Go Back to Sign In",
button_go_to_web_app: "Go to the Web App",
button_invite_people: "Add People",
button_join_now: "Join Now",
button_leave: "Leave",
button_log_in: "Sign In",
button_log_in_with_$: "Sign In With $",
button_log_out: "Sign Out",
button_log_in_facebook: "Sign In With Facebook",
button_next: "Next",
button_no: "No",
button_no_due_date: "No Due Date",
button_ok: "OK",
button_paste: "Paste",
button_remove: "Remove",
button_remove_due_date: "Remove Due Date",
button_remove_reminder: "Remove Reminder",
button_rename_list: "Rename List",
button_email_list: "Email List",
button_print_list: "Print List",
button_copy_task_uri: "Copy Wunderlist Link",
button_copy_task_uri_plural_$: "Copy $ Wunderlist Links",
button_reset_password: "Password Reset",
button_restart_wunderlist: "Restart Wunderlist",
button_retry: "Retry",
button_save: "Save",
button_send: "Send",
button_sign_up_with_$: "$",
button_sign_up_for_free: "Create a free account",
button_sign_up_facebook: "Facebook",
button_support_center: "Support Center",
button_subscribe: "Awesome, Yes Please!",
button_try_again: "Try Again",
button_try_wunderlist: "Try Wunderlist",
button_yes: "Yes",
button_publish: "Publish",
button_published: "Published",
button_open_public_list: "Open Public List",
button_unpublish_list: "Unpublish List",
button_sort: "Sort",
button_more: "More",
coachmark_all_list_empty: "You have not added any items yet. Go ahead, and add something.",
coachmark_completed_list_empty: "You have not completed any items yet. Go ahead, check some items off your lists!",
coachmark_no_search_results: "No Search Results",
coachmark_sharing_invite_friends_heading: "Invite Your Friends",
coachmark_sharing_invite_friends_text_$: "Your friends will be able to create, remove and check off items in the list “$”.",
coachmark_sharing_recent_no_contacts_heading: "No Recent Contacts",
coachmark_sharing_recent_no_contacts_text_$: "Type an email address or search your contacts. Once added, your friend will be able to create, remove and check off items in the list “$”.",
coachmark_assigned_to_me_list_empty: "There is nothing assigned to you",
coachmark_starred_list_empty: "You have no starred items",
coachmark_today_list_empty: "Congrats! You have nothing due or overdue for today",
coachmark_week_list_empty: "On vacation? You have no items due for the next 7 days",
error_list_not_found: "The list you are looking for cannot be found.",
error_share_not_created: "An issue occurred while attempting to share your list. Please share again.",
error_task_not_found: "The item you are looking for cannot be found.",
error_page_not_found: "Page not found",
error_title_not_found: "Not found",
label_are_you_sure_permanently_delete_item: "Are you sure you want to delete this item forever?",
label_are_you_sure_permanently_delete_item_plural: "Are you sure you want to delete these items forever?",
label_are_you_sure_permanently_delete_X_comment: "Are you sure you want to delete this comment forever?",
label_activity_center: "Activities",
label_are_you_sure_permanently_delete_$_list: "“$” will be deleted forever.",
label_are_you_sure_permanently_delete_$_task: "“$” will be deleted forever.",
label_are_you_sure_permanently_delete_task_plural: "Are you sure you want to delete these items forever?",
label_are_you_sure_permanently_delete_$_subtask: "Are you sure you want to delete the subtask “$” forever?",
label_cant_undo: "You will not be able to undo this action.",
label_completed_tasks_heading: "1 Completed Item",
label_$_completed_tasks_heading_plural: "$ Completed Items",
label_connecting: "Connecting...",
label_day_0: "SUN",
label_day_1: "MON",
label_day_2: "TUE",
label_day_3: "WED",
label_day_4: "THU",
label_day_5: "FRI",
label_day_6: "SAT",
label_delete_file: "Delete File",
label_leave_list: "Leave List",
label_delete_list: "Delete List",
label_delete_task: "Delete Item",
label_delete_task_plural: "Delete Items",
label_delete_subtask: "Delete Subtask",
label_due_$: "Due $",
label_due_on: "Due on $",
label_due_date: "Due Date",
label_email: "Email",
label_every: "every",
label_loading: "Loading...",
label_logging_out: "Logging Out...",
label_name: "Name",
label_new_list: "Create New List",
label_newsletter: "Wunderlist Newsletter",
label_none: "None",
label_notification: "Notification",
label_oops: "Oops!",
label_or: "or",
label_password: "Password",
label_relative_date_today: "Today",
label_relative_date_today_with_date: "Today, $",
label_relative_date_today_mid_sentence: "today",
label_relative_date_tomorrow: "Tomorrow",
label_relative_date_tomorrow_with_date: "Tomorrow, $",
label_relative_date_tomorrow_mid_sentence: "tomorrow",
label_relative_date_yesterday: "Yesterday",
label_remind_me_at_$: "Remind me at $",
label_reminder: "Reminder",
label_reminder_message_$: "Reminder: $",
label_repeat_every_day: "Repeat every day",
label_repeat_every_week: "Repeat every week",
label_repeat_every_month: "Repeat every month",
label_repeat_every_year: "Repeat every year",
label_repeat_custom: "Custom...",
label_repeat_day: "Every day",
label_repeat_day_$_plural: "Every $ days",
label_repeat_month: "Every month",
label_repeat_month_$_plural: "Every $ months",
label_repeat_week: "Every week",
label_repeat_week_$_plural: "Every $ weeks",
label_repeat_never: "Never repeat",
label_repeat_year: "Every year",
label_repeat_year_$_plural: "Every $ years",
label_reset_password: "Reset Password",
label_rights_reserved: "All Rights Reserved",
label_still_fetching_tasks: "Just a moment, we're syncing your lists...",
label_sync: "Sync",
label_time_hour: "hour",
label_time_minute: "minute",
label_time_am: "AM",
label_time_day_plural: "days",
label_time_week_plural: "weeks",
label_time_month_plural: "months",
label_time_pm: "PM",
label_time_year_plural: "years",
label_update_available: "A new update is available. Would you like to install it?",
label_update_completed_please_restart: "Your new update is ready to be installed. Restart Wunderlist to complete the update.",
label_assign_to: "Assign to",
label_unassigned: "Unassigned",
label_assign_me: "Me",
label_created_$: "Created $",
label_created_by_$: "Created by $",
label_created_on_$: "Created on $",
label_created_$_by_$: "Created $1 by $2",
label_created_by_$_on_$: "Created by $1 on $2",
label_completed_$: "Completed $",
label_by_$: "by $",
label_completed_on_$: "Completed on $",
label_completed_$_by_$: "Completed $1 by $2",
label_completed_by_$_on_$: "Completed by $1 on $2",
label_move_to: "Move to",
label_on: "On",
label_off: "Off",
login_add_photo_hint: "Personalize your Wunderlist account by uploading your photo.",
login_already_have_account: "Sign In",
login_email_not_valid: "Please enter a valid email address.",
login_empty_name: "Please enter your full name.",
login_empty_password: "Please enter a password.",
login_empty_email: "Please enter your email.",
login_enter_name: "Who Are You?",
login_enter_password: "You’re Almost Done",
login_enter_password_hint: "Create a memorable password for your Wunderlist account.",
login_forgot_password: "Forgot your password?",
login_forgot_password_heading: "Forgot your password?",
login_forgot_password_text: "Don't worry. Just enter your email address below and we'll send you some instructions.",
login_no_account_yet: "Don’t have an account?",
login_password_changed: "Password successfully updated.",
login_password_not_match: "The passwords you entered do not match.",
login_password_not_valid: "Please enter a valid password.",
login_password_reset_email_has_been_sent: "Please check your email for instructions to reset your password.",
login_reset_password_heading: "Create your new password.",
login_reset_password_success: "Just hit the button below and you’re all set to log back into your Wunderlist.",
login_reset_password_success_heading: "Your password has been successfully changed.",
login_password_too_short: "A password must have at least 8 characters, have at least 2 of lower case, upper case, numbers, or other characters, and not contain the beginning part of your email address.",
login_sign_up: "Create Free Account",
login_create_new_account: "Create Free Account",
login_want_to_try_again: "Want to try again?",
login_accept_terms: "By creating an account you agree to our $1 and $2.",
logout_timeout_title: "Sync Error",
logout_timeout_text: "There was a problem syncing the latest changes you made, please try again.",
label_onboarding_choose_your_first_lists: "Choose Your Lists",
label_onboarding_choose_your_first_lists_description: "What would you like to use Wunderlist for? Here's a selection for you to get started.",
label_onboarding_groceries_list: "Groceries",
label_onboarding_movies_list: "Movies to Watch",
label_onboarding_travel_list: "Travel",
label_onboarding_work_list: "Work",
label_onboarding_family_list: "Family",
label_onboarding_private_list: "Private",
label_onboarding_tooltip_firstlist_desktop: "Click here to create a list.",
label_onboarding_tooltip_firsttask: "Create your first to-do.",
label_onboarding_tooltip_share: "Add people to collaborate and accomplish more.",
contextual_mark_as_multiple: "Mark as...",
contextual_mark_as_completed: "Mark as &quot;Completed&quot;",
contextual_mark_as_starred: "Mark as &quot;Starred&quot;",
contextual_mark_as_notcompleted: "Mark as &quot;Not Completed&quot;",
contextual_mark_as_unstarred: "Mark as &quot;Unstarred&quot;",
contextual_new_list_from: "Create a new list from Item",
contextual_new_list_from_$_plural: "Create a new list from $ items",
contextual_move_item_to_list: "Move item to...",
contextual_move_item_to_list_plural: "Move items to...",
contextual_assign_item_to_list: "Assign item to...",
contextual_assign_item_to_list_plural: "Assign items to...",
menubar_delete_task: "Delete Selected Item",
menubar_delete_task_plural: "Delete Selected Items",
notifications_desktop_enable_heading: "Do you want to see desktop notifications?",
notifications_desktop_enable_systray_context_menu: "Enable Desktop Notifications",
notifications_desktop_disable_systray_context_menu: "Disable Desktop Notifications",
notifications_no_notifications: "Nothing to see here...",
notifications_no_notifications_message: "Share your lists to start using the Activities.",
notifications_event_accept: "Accept",
notifications_event_accepted: "Accepted",
web_upgrade_ie9_not_supported: "Sorry, Wunderlist does not support Internet Explorer 9. Please upgrade to $ or $.",
web_upgrade_to_chrome: "Chrome",
web_upgrade_to_ie10: "Internet Explorer 10",
web_enable_touch_styles_alert: "It looks like you are using a touch screen. Would you like to enable a touch optimized interface? You can always change this in your account settings.",
web_setting_enable_touch_for_$: "Enable Touch for: $",
web_settings_text_refresh_may_be_required: "Refresh may be required",
rate_label: "Love Wunderlist?",
rate_app_heading: "Love Wunderlist?",
rate_app_message_web_chrome: "Tell the world by rating and reviewing Wunderlist in the Chrome Web Store.",
rate_app_button_later: "Later",
rate_app_button_no: "No Thanks",
rate_app_button_yes: "Rate Wunderlist Now",
placeholder_add_due_today_to_inbox: "Add an item due today in “Inbox”...",
placeholder_add_list: "Add a list...",
placeholder_list_name: "List Name",
placeholder_add_note: " Add a note...",
placeholder_add_subtask: "Add a subtask",
placeholder_add_starred_to_inbox: "Add a starred item in “Inbox”...",
placeholder_add_task_to_$: "Add an item in “$”...",
placeholder_add_to_inbox: "Add an item in “Inbox”",
placeholder_new_list: "New List",
placeholder_remind_me: "Remind me",
placeholder_search: "Search...",
placeholder_sharing_search: "Name or email address...",
placeholder_set_due_date: "Set due date",
browser_outdated_heading: "Sorry, Wunderlist does not support your browser. Please upgrade to a new version.",
browser_outdated_update: "Please update your browser",
browser_outdated_explanation: "Sorry, Wunderlist does not support your browser. Please download the latest version of your browser",
prenamed_list_movies: "Movies to Watch",
prenamed_list_private: "Private",
prenamed_list_shopping: "Shopping",
prenamed_list_wishlist: "Wishlist",
prenamed_list_work: "Work",
prenamed_list_read_later: "Read Later",
settings_account_change_email: "Change Email",
settings_account_change_password: "Change Password...",
settings_account_delete_confirmation: "Type &quot;I am sure&quot;",
settings_account_delete_confirmation_text: "I am sure",
settings_account_drop_image: "Drop Image Here",
settings_account_connect_facebook_account: "Connecting your account to Google or Facebook will make signing in easier",
settings_general_12_hour: "12 Hour",
settings_general_24_hour: "24 Hour",
settings_general_confirm_deletion: "Confirm before deleting items",
settings_general_create_new_tasks: "Add Items",
settings_today_smart_list_visible_tasks: "Week &amp; Today Settings",
settings_today_smart_list_show_all_tasks: "Show all items",
settings_today_smart_list_show_current_user_tasks: "Only assigned to me &amp; private",
settings_general_date_format: "Date Format",
settings_general_language: "Language",
settings_general_start_of_week: "Start of the Week",
settings_general_start_of_week_sunday: "Sunday",
settings_general_start_of_week_saturday: "Saturday",
settings_general_start_of_week_monday: "Monday",
settings_general_sound_task_completion: "Enable sound for checking-off an item",
settings_general_sound_new_notifications: "Enable sound for new notifications",
settings_general_print_done_tasks: "Print completed items",
settings_general_starred_tasks_to_top: "Star moves item to top",
settings_general_tasks_bottom: "Bottom of List",
settings_general_tasks_top: "Top of List",
settings_automatic_reminders: "Auto reminders",
settings_heading_team: "Business",
settings_heading_about: "About",
settings_heading_account: "Account",
settings_heading_general: "General",
settings_heading_notification: "Notifications",
settings_heading_shortcuts: "Shortcuts",
settings_heading_sidebar: "Smart Lists",
settings_imprint: "Imprint",
settings_visit_website: "Visit Us",
settings_get_help: "Visit the Support Center",
settings_notifications_notify_me_of_important_events_mobile: "Notify me of important events via:",
settings_notifications_notify_me_on_text: "Stay in sync and get notified when items are added or completed in your shared lists. You can choose which lists you get notifications about, in each list's edit dialog.",
settings_sidebar_smart_lists_auto: "Auto",
settings_sidebar_smart_lists_hidden: "Hidden",
settings_sidebar_smart_lists_visible: "Visible",
settings_sync_full: "Sync Now",
settings_account_account_backup: "Account Backup",
settings_account_restore_backup: "Import Backup Data",
settings_account_backup_description: "Backup data includes all your Lists, Tasks, Subtasks, Notes, and Reminders. Please note it does not include those Lists that were shared with you, Files, Comments, Shared List recipients and previous application settings.",
settings_account_data_is_being_processed: "Hold tight! Your backup data is being processed.",
settings_account_import_complete: "Your backup data has been processed.  You should see your backup list copies below all of your current lists.",
settings_account_change_password_error: "There was a problem updating your password. Please try again.",
settings_account_click_to_download_backup: "Click to Download",
settings_account_create_backup: "Create Backup",
settings_account_current_password: "Current Password",
settings_account_delete_account: "Delete Account",
settings_account_delete_account_confirm: "Do you really want to delete your account?",
settings_account_delete_account_confirm_text: "Deleting your account will erase all your lists and items forever and cannot be undone.",
settings_account_fetching_data: "Fetching data ...",
settings_account_new_password: "New Password",
settings_account_repeat_new_password: "Repeat New Password",
settings_account_right_click_and_save_as: "Right Click and Save",
settings_third_party_libraries: "Licenses",
settings_background_credits: "Background Credits",
settings_notifications_email_enabled: "Email Notifications",
settings_notifications_desktop_enabled: "Desktop Notifications",
settings_notifications_push_enabled: "Push Notifications",
settings_show_completed_tasks_mobile: "Show completed items",
settings_privacy_policy: "Privacy Policy",
settings_shortcuts_arrow_keys: "Arrow Keys",
settings_shortcuts_delete_item: "Delete Selected List or Item",
settings_shortcuts_mark_done: "Mark Selected Items as 'Completed'",
settings_shortcuts_mark_starred: "Mark Selected Items as 'Starred'",
settings_shortcuts_new_list: "Add a New List",
settings_shortcuts_new_task: "Add a New Item",
settings_shortcuts_open_all_smart_list: "Open 'All' Smart List",
settings_shortcuts_open_assigned_smart_list: "Open 'Assigned to Me' Smart List",
settings_shortcuts_open_done_smart_list: "Open 'Completed' Smart List",
settings_shortcuts_open_inbox: "Open Inbox",
settings_shortcuts_open_preferences: "Open Preferences",
settings_shortcuts_open_search: "Focus Search",
settings_shortcuts_open_starred_smart_list: "Open 'Starred' Smart List",
settings_shortcuts_open_today_smart_list: "Open 'Today' Smart List",
settings_shortcuts_open_week_smart_list: "Open 'Week' Smart List",
settings_shortcuts_reset: "Reset to Defaults",
settings_shortcuts_select_all_tasks: "Select All Items",
settings_shortcuts_show_more: "Show More",
settings_shortcuts_hide: "Hide",
settings_shortcuts_show_notifications: "Show Activities",
settings_shortcuts_step_through_list: "Step Through Lists",
settings_shortcuts_step_through_task: "Step Through Items",
settings_terms_of_use: "Terms of Use",
settings_website_wunderlist: "Wunderlist Website",
settings_account_header_free: "Free",
settings_account_header_account_$: "$ Account",
settings_account_pro_description: "Add files to your to-dos and assign them to your colleagues. Collaboration in teams has never been easier!",
settings_account_register_wunderlist_description: "Create a free Wunderlist Account to sync your lists across all your devices.",
settings_manage_subscription_button: "Manage subscription",
settings_account_header_pro: "Pro",
settings_account_header_pro_account_$: "Yay, you’re a $!",
settings_account_header_pro_description: "Wunderlist Pro is the best way to keep your projects on track. Invite your friends and colleagues to collaborate and make things happen!",
settings_upgrade_to_pro_label: "Upgrade to $",
settings_label_pro_account: "Pro Account",
settings_label_purchased_from_$: "Purchased from: $",
settings_label_purchased_from_$_by_$: "Purchased from $1 by: $2",
settings_label_expires_in_$: "Expires in $",
setting_label_next_billing_date: "Next Billing Date:",
setting_label_cancel_subscription: "Cancel Subscription",
setting_heading_cancel_subscription: "Do you really want to cancel you Wunderlist Pro Subscription?",
setting_description_cancel_subscription: "You will still have access to all your data, but once your subscription expires, you will only be able to use Wunderlist’s free features.",
setting_label_cancel_subscription_success: "Your subscription was cancelled successfully.",
settings_label_invoices: "Invoices",
settings_label_become_a_pro: "Become a Pro",
settings_payment_info_expires_$_relative: "Expires $",
settings_payment_info_expires_$_absolute: "Expires in $1 days: $2",
settings_manage_subscription_error: "Sorry, an error happened while trying to manage your subscription.",
group_billing_packages_title: "Plans for every business",
group_billing_packages_text: "Wunderlist for Business provides you with all the features you need to work smarter as a team at an affordable price. Simply select the right plan for your business now.",
group_billing_plan_table_team_size: "Team Size",
group_billing_plan_table_price: "Price",
group_billing_buy_button_label: "Purchase",
group_billing_$_off: "$ off",
group_billing_larger_team_$: "Have a larger team? $",
group_billing_contact_us: "Contact us!",
group_billing_downgrade_error_$_$: "In order to switch to the $1 Members subscription, you must remove $2 colleague(s) from your current subscription. ",
group_billing_manage_team: "Click here to manage your team.",
group_billing_button_label_manage: "Manage",
group_billing_team_plan_title: "Your Wunderlist for Business Subscription",
group_billing_team_plan_text: "Wunderlist for Business grows right along with your team. Adding members is easy, just enter their email addresses below.",
group_billing_upgrade_button_label: "Change Plan",
group_billing_upgrade_plan_button_label: "Upgrade",
group_billing_Downgrade_plan_button_label: "Downgrade",
group_billing_view_plans_button_label: "View Plans",
group_billing_manage_team_header: "Manage Members",
group_billing_email_address_input_placeholder: "Email address",
group_billing_manage_count_$_of_$: "$1 of $2",
group_billing_cancel_team_plan: "Cancel your subscription",
group_billing_search_coachmark: "To add members, simply enter the email addresses of your colleagues, and they'll be added to your subscription.",
group_billing_cancel_header: "Are you sure you want to cancel your Wunderlist for Business Subscription?",
group_billing_change_plan_confirmation_$_$_$: "Changing your subscription is easy. If you go for $1 Members subscription now, you’ll be billed $2 in the next billing cycle starting on $3. Are you sure you want to do this now?",
group_billing_cancel_text: "Your Wunderlist for Business subscription will run until the end of month, and you won’t be billed again.",
error_goup_billing_user_already_pro: "This colleague already has a Wunderlist Pro account.",
error_group_billing_wait_subscription_runs_out: "You’ll have to wait until your current subscription runs out before repurchasing. Expires on: $.",
button_label_buy_wunderlist_for_business: "Go to Wunderlist for Business",
benefit_payment_service_unavailable: "Our payment service is temporarily unavailable, please try again.",
benefit_name: "Wunderlist Pro",
benefit_header_$: "Become a $",
benefit_header_description: "Start accomplishing even more at home and in the office with unlimited access to all of Wunderlist Pro’s collaboration features.",
benefit_button_buy_monthly: "Monthly",
benefit_unlimited_subtasks_title: "Unlimited Subtasks",
benefit_unlimited_subtasks_decription: "Break big tasks into small achievable steps for improved productivity without limitations.",
benefit_label_need_more_subtasks: "Need more subtasks?",
benefit_assign_tasks_title: "Unlimited Assigning",
benefit_assign_tasks_description: "Share your lists and the workload. Delegate as many to-dos as you need and accomplish more together.",
benefit_backgrounds_update_$: "Upgrade your account to use these Wunderlist Pro backgrounds.",
benefit_files_title: "Unlimited Files",
benefit_files_description: "Add files of any size to your to-dos and share them with your colleagues.",
benefit_additional_backgrounds_title: "Pro Backgrounds",
benefit_additional_backgrounds_description: "Discover 10 beautiful Pro-only backgrounds to make Wunderlist your very own",
benefit_coming_soon: "Coming Soon",
benefit_assign_become_pro: "Need to assign more to-dos?",
benefit_button_not_now: "Later",
benefit_label_accept_terms: "By buying a Wunderlist Pro Subscription you accept our $1 and $2.",
sharing_facebook_apprequest_message_$user_$list: "“$1” would like to share the list “$2” with you",
sharing_invite: "Invite People",
sharing_invite_friends: "Share List",
sharing_invite_mobile: "Share",
sharing_inviting_requires_account: "Create a free account to invite your friends to your lists.",
sharing_leave_action: "Are you sure you want to leave this list?",
sharing_leave_button: "Leave",
sharing_list_members_short: "Members",
sharing_list_members: "List Members",
sharing_list_owner: "Owner",
sharing_list_pending_member: "Pending",
sharing_list_not_saved_member: "Not sent",
sharing_tab_recents: "Recent",
sharing_shared_with_you_by: "Shared with you by",
sharing_list_options: "List options",
options_do_not_disturb: "Do Not Disturb",
smart_list_assigned_to_me: "Assigned to me",
smart_list_conversations: "Conversations",
smart_list_all: "All",
smart_list_completed: "Completed",
smart_list_inbox: "Inbox",
smart_list_starred: "Starred",
smart_list_today: "Today",
smart_list_week: "Week",
label_tell_friends: "Tell Your Friends...",
social_sharing_heading: "Love Wunderlist? Tell your friends!",
social_sharing_dialog_headline: "Love Wunderlist?",
social_sharing_dialog_danke: "Dankeschön!",
social_sharing_button_later: "Not Now",
social_sharing_button_no_thanks: "No Thanks",
social_sharing_button_facebook: "Share",
social_sharing_button_follow_us: "Follow Us",
social_sharing_button_like_us: "Like Us",
social_sharing_heading_thanks: "Be sure to follow us for all the latest Wunderlist news.",
social_sharing_button_twitter: "Tweet",
general_sharing_placeholder: "I’m using Wunderlist, my beautiful and simple to-do list. Get it for free now at www.wunderlist.com",
twitter_sharing_placeholder: "I’m using @Wunderlist, my beautiful and simple to-do list. Get it for free now at www.wunderlist.com",
tutorial_welcome_notes_title: "Notes",
tutorial_welcome_notes_text: "Detachable notes allow you to work in or out of Wunderlist.",
tutorial_welcome_notifications_title: "Activities",
tutorial_welcome_notifications_text: "Customize the way you want to be notified. Choose to receive invites and updates to your shared lists via email and desktop notifications or view it all from Activities.",
tutorial_welcome_sharing_title: "Invite Friends",
tutorial_welcome_sharing_text: "It is now even easier to invite your friends and colleagues to lend a helping hand.",
tutorial_welcome_subtasks_title: "Recurring Items, Reminders and Subtasks",
tutorial_welcome_subtasks_text: "Wunderlist now features a brand new Detail View, that allows you to easily add recurring items, reminders and subtasks.",
tutorial_welcome_user_title: "It’s All About You!",
tutorial_welcome_user_text: "Change your account settings, check the status of sync and customize your background.",
tutorial_welcome_newsletter_subscribe: "Notify me of important updates and new features of Wunderlist by mail",
tutorial_feature_pro_title: "Wunderlist Pro Feature",
share_list_email_signature: "Sent with Wunderlist. Available free for your phone, tablet and computer - www.wunderlist.com.",
userbar_$_unsynced_item: "$ unsynced item",
userbar_$_unsynced_item_plural: "$ unsynced items",
userbar_account_settings: "Account Settings",
userbar_change_background: "Change Background",
userbar_last_synced_$: "Last synced $",
userbar_no_internet_connection: "Offline",
userbar_preferences: "Preferences",
userbar_sync_in_progress: "Syncing...",
whatsnew_title: "What’s New",
whatsnew_1_title: "Public Lists",
whatsnew_1_description: "Curate your favorite things to do, see and make for everyone on the web.",
whatsnew_2_title: "Real-time Sync",
whatsnew_2_description: "Keeps all your lists instantly up to date, no matter where you are.",
whatsnew_3_title: "Faster by Design",
whatsnew_3_description: "A more intuitive design that is lighter and faster than ever before.",
whatsnew_4_title: "Share Lists Seamlessly",
whatsnew_4_description: "From the moment you create a list, instantly share it with family or colleagues.",
whatsnew_5_title: "Start a Conversation",
whatsnew_5_description: "Comments are now free to help everyone stay in the loop with family and colleagues.",
whatsnew_6_title: "Reengineered Apps",
whatsnew_6_description: "More than 60 new improvements for your phone, tablet and computer.",
whatsnew_7_title: "Search &amp; Tags on Mobile",
whatsnew_7_description: "Instantly find and add extra context to your to-dos, when you’re on the go.",
files_requires_account: "Create a free account to add a File.",
label_add_new_file: "Add a file",
file_uploaded_unsuccessfully: "Upload of $ failed. Please try again.",
file_uploaded_failed: "Upload failed. Please try again.",
file_uploaded_failed_deleted: "Upload of $ failed, because it was deleted from your hard drive.",
label_are_you_sure_permanently_delete_$_file: "Are you sure you want to permanently delete the file “$” from Wunderlist?",
label_open_file: "Open",
upload_file_was_not_synced_yet: "Please sync before uploading your file.",
upload_file_not_synced_yet: "Not Synced",
title_start_pause_recording_audio: "Start/Pause recording audio",
title_play_recorded_audio: "Play recorded audio",
title_clear_recorded_audio: "Clear recorded audio",
title_upload_recorded_audio: "Upload recorded audio",
placeholder_add_comments: "Add a comment...",
placeholder_reply: "Reply...",
button_label_go_pro_to_comment: "Go Pro to add a Comment",
comment_request_failed: "Sorry, we couldn't load Comments. Please try again.",
comment_load_earlier: "View more Comments",
coachmark_no_current_comments: "Got something to say? Kick off the conversation by adding the first comment.",
coachmark_comments_not_available: "Sorry, we couldn’t load the previous comments. Please try again in a few moments.",
notification_$_commented_on_$: "$1 commented on $2",
notification_$_and_$_commented_on_$: "$1 and $2 commented on $3",
notification_$_and_$_others_commented_on_$: "$1 and $2 others commented on $3",
non_pro_trial_free_limit_reached: "You’ve reached your Free limit!",
non_pro_trial_write_next_comment_$: "You can add another Comment $.",
non_pro_trial_upload_next_file_$: "You’ll be able to add another File $.",
non_pro_trial_assign_next_to_do_$: "You can Assign another to-do $.",
voiceover_add_file_dropbox_button: "Dropbox",
voiceover_folder_options_button: "Folder Options",
voiceover_share_list: "Share list",
voiceover_sharing_remove_button_$_label: "Remove $",
voiceover_sidebar_list_$_items_overdue: "$ overdue items",
systray_show_wunderlist: "Show Wunderlist",
systray_quit: "Quit",
check_for_updates: "Check for Updates",
app_up_to_date: "Wunderlist is up to date!",
checking_for_updates: "Checking for Updates...",
button_signup_or_login: "Create a free account or sign in",
button_it_is_completely_free: "It’s completely free",
label_free_download_for_platforms: "Available for free for iPhone, iPad, Android, Windows and Mac",
label_wunderlist_to_get_things_done: "More than 12 million people use Wunderlist to get things done.",
label_people_who_use_wunderlist: "See who is already using Wunderlist:",
label_wunderlist_uses: "Whether you’re organizing your business, sharing a shopping list with a loved one or simply keeping track of your daily life, Wunderlist is the best to-do list for you, your team or your family.",
label_install_browser_extension: "Install the Browser Extension",
label_install_chrome_browser_extension: "Install the Chrome Browser Extension",
label_newsletter_signup: "Sign up for our newsletter",
label_know_upcoming_features: "Be amongst the first to know about upcoming features",
label_learn_more_about_wunderlist: "Learn more about Wunderlist",
label_learn_more: "Learn more...",
label_your_email_address: "Your email address",
button_subscribe_to_newsletter: "Subscribe",
button_sending_subscribe_to_newsletter: "Sending...",
iyf4_usermenu_label: "Get Wunderlist Pro for Free",
iyf4_notification_label: "Get up to 12 free months of Wunderlist Pro by inviting your friends!",
iyf4_notification_button_label_var_a: "Start Inviting",
iyf4_notification_button_label_var_b: "Invite Friends",
iyf4_notification_button_label_var_c: "Get Wunderlist Pro for Free",
iyf4_notification_button_label_var_d: "Share Wunderlist Pro",
iyf4_dialog_invite_headline_$: "Get up to $ of Wunderlist Pro by inviting your friends!",
iyf4_dialog_invite_headline_incentive: "12 free months",
iyf4_dialog_invite_incentive_$: "$ Wunderlist, we'll give you 1 month of Wunderlist Pro for free (up to a limit of 12 months",
iyf4_dialog_invite_incentive_terms: "For every friend who joins",
iyf4_dialog_tweet: "I love organizing my life with Wunderlist. Get a month of Wunderlist Pro for free here:",
iyf_notification_label: "Refer Wunderlist to your friends and get Pro for free up to 12 months!",
iyf_notification_button_label: "Go Pro!",
iyf_dialog_step1_headline: "Get a free Pro Account",
iyf_dialog_step1_subheadline: "in 3 easy steps",
iyf_dialog_step1_instruction1_headline: "Start inviting your friends",
iyf_dialog_step1_instruction1_subheadline: "via Facebook, Twitter or E-Mail",
iyf_dialog_step1_instruction2_headline: "Your friends sign up",
iyf_dialog_step1_instruction2_subheadline: "sit tight while they join Wunderlist",
iyf_dialog_step1_instruction3_headline: "Enjoy your free Pro Account",
iyf_dialog_step1_instruction3_subheadline: "1 month for every friend who accepts",
iyf_dialog_step1_instruction3_subheadline_$_plural: "1 month for every $ friends who accept",
iyf_dialog_step1_next_button: "Start inviting",
iyf_dialog_step2_subheadline: "to get your free Pro Account",
iyf_dialog_step2_divider_label: "Share this link",
iyf_dialog_share_on_facebook: "Share on Facebook",
iyf_dialog_post_on_twitter: "Tweet on Twitter",
iyf_dialog_email_placeholder: "Enter an email address...",
iyf_dialog_more_placeholder: "Add another...",
iyf_dialog_step3_headline: "Thank you for sharing",
iyf_dialog_step3_subheadline: "Sit tight while your friends join",
iyf_dialog_step3_success_headline: "Invites successfully sent",
iyf_dialog_step3_success_subheadline: "We'll notify you as soon as your Pro account is ready.",
iyf_dialog_step3_invite_more: "Invite more people",
meta_title: "Wunderlist 2: Your beautiful and simple online to-do list app",
meta_description: "Over 12 million people already use Wunderlist to manage tasks, to-do lists, and to get things done.  Wunderlist is the best to-do list for you, your team or your family.",
meta_keywords: "6wunderkinder, productivity, collaborate, task management, task manager, to-do, todo, list, tasks, gtd, organize, plan, shopping list, reminders, subtasks, smart lists, grocery list, movie list, shared list",
enable_desktop_notifications_text: "Click “Confirm” and then “Allow” in your browser to enable notifications.",
notification_add_to_browser: "Keep your Wunderlist only one click away. Add the Wunderlist Web App to your Browser now.",
notification_add_extension_to_browser: "Quickly save all your favorite web content directly into Wunderlist. Install the Add to Wunderlist Chrome extension now.",
button_add_to_chrome: "Add to Chrome",
button_add_to_store_added: "Added",
aria_activity_center_hint: "Activities. Hit escape to close.",
aria_exit_search: "Exit Search",
aria_search: "Search",
aria_sort_list: "Sort List",
aria_thank_you: "We hope our accessibility features have worked well for you. Please send any feedback regarding our accessibility implementation to support@wunderlist.com. Thank you for choosing Wunderlist.",
aria_user_menu_button: "User menu.",
aria_user_menu_hint: "User menu. Hit escape to close.",
aria_assign_to_$: "Assign to $",
aria_list_$_with_$_items: "$1, $2 items",
aria_more_options_via_tab: "Press the tab key for more options.",
aria_has_attachments: "Has attachments.",
aria_has_comments: "Has comments.",
aria_assigned_to_$: "Assigned to $",
aria_period_label: "Period",
aria_note_fullscreen: "Open note in fullscreen.",
aria_subtask: "Subtask",
aria_press_enter_to_edit: "Press enter to edit.",
aria_subtask_navigation_info: "Use the arrow keys to navigate between subtasks.",
aria_file_navigation_info: "Use the arrow keys to navigate between files.",
aria_press_$_to_complete: "Press $ to complete.",
aria_press_$_to_delete: "Press $ to delete.",
momentjs_months: "January_February_March_April_May_June_July_August_September_October_November_December",
momentjs_monthsShort: "January_February_March_April_May_June_July_August_September_October_November_December",
momentjs_weekdays: "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday",
momentjs_weekdaysShort: "Sun_Mon_Tue_Wed_Thu_Fri_Sat",
momentjs_weekdaysMin: "Su_Mo_Tu_We_Th_Fr_Sa",
momentjs_longDateFormat_LT: "h:mm A",
momentjs_longDateFormat_L: "MM/DD/YYYY",
momentjs_longDateFormat_LL: "MMMM D YYYY",
momentjs_longDateFormat_LLL: "MMMM D YYYY LT",
momentjs_longDateFormat_LLLL: "dddd, MMMM D YYYY LT",
momentjs_calendar_sameDay: "[Today at] LT",
momentjs_calendar_nextDay: "[Tomorrow at] LT",
momentjs_calendar_nextWeek: "dddd [at] LT",
momentjs_calendar_lastDay: "[Yesterday at] LT",
momentjs_calendar_lastWeek: "[last] dddd [at] LT",
momentjs_calendar_sameElse: "L",
momentjs_relativeTime_future: "in %s",
momentjs_relativeTime_past: "%s ago",
momentjs_relativeTime_s: "a few seconds",
momentjs_relativeTime_m: "a minute",
momentjs_relativeTime_mm: "%d minutes",
momentjs_relativeTime_h: "an hour",
momentjs_relativeTime_hh: "%d hours",
momentjs_relativeTime_d: "a day",
momentjs_relativeTime_dd: "%d days",
momentjs_relativeTime_M: "a month",
momentjs_relativeTime_MM: "%d months",
momentjs_relativeTime_y: "a year",
momentjs_relativeTime_yy: "%d years",
chromebook_splash_headline: "Welcome to **Wunderlist for Chrome**",
chromebook_splash_find_out_more_button: "Find out more",
chromebook_splash_content_benefit: "Wunderlist keeps all your lists in sync to have you accomplishing more everyday.",
chromebook_splash_content_instruction: "**For the chance to get Wunderlist Pro for free**, simply click on the button below.",
button_label_publiclist_share: "Share",
publish_list_confirmation_$: "You're about to publish “$”",
publish_list_confirmation_copy: "Publishing this list will make it available to anyone with the public URL.",
ical_feed_label: "Calendar Feed",
ical_feed_fetching: "Getting your Calendar Feed...",
ical_feed_fetch_error: "There was a problem getting your Calendar Feed.",
ical_feed_description: "Add this link to iCal, Google Calendar or Outlook to see all Items with a due date in your calendar.",
ical_feed_read_more_link: "Learn more about Wunderlist's Calendar Feed",
folder_title_placeholder: "New Folder",
folder_menu_create: "Create a Folder",
folder_whatsnew_title: "Introducing Folders",
folder_whatsnew_button_new: "New",
folder_whatsnew_popup_description: "Folders help you organize your lists for Work, Home, and everything in between.",
button_rename_folder: "Rename Folder",
button_ungroup: "Ungroup",
button_remove_from_folder_singular: "Remove from Folder",
label_trash_link: "Restore deleted lists"
}
}), define("languages/german", {
name: "german",
data: {
actionbar_print_selected_item: "Gewählten Eintrag drucken",
actionbar_print_$_selected_items_plural: "$ gewählte Einträge drucken",
actionbar_email_selected_item: "Gewählten Eintrag versenden",
actionbar_email_$_selected_items_plural: "$ gewählte Einträge versenden",
actionbar_sort_alphabetically: "Nach Titel sortieren",
actionbar_sort_due_date: "Nach Datum sortieren",
actionbar_sort_assignee: "Nach Person sortieren",
actionbar_sort_created_at: "Nach Erstellungsdatum sortieren",
actionbar_sort_priority: "Nach Priorität sortieren",
actionbar_duplicate_list: "Liste duplizieren",
api_error_account_locked_due_to_failed_attempts: "Dein Account wurde auf Grund mehrerer fehlgeschlagener Anmeldeversuche für kurze Zeit gesperrt. Bitte probiere es in 5 Minuten erneut.",
api_error_account_already_exists: "Ein Account mit dieser E-Mail Adresse existiert bereits.",
api_error_connection_error: "Es gab ein Problem bei der Verbindung mit den Wunderlist Servern. Bitte probiere es erneut und schau auf status.wunderlist.com für News.",
api_error_general_error: "Die Wunderlist Server haben gerade Probleme. Bitte probiere es erneut und schaue auf status.wunderlist.com für News.",
api_error_incorrect_login: "Die E-Mail Adresse oder das Passwort ist ungültig.",
api_error_incorrect_password: "Das eingegebene Passwort ist nicht korrekt.",
api_error_internet_connection_error: "Anscheinend bist du nicht mit dem Internet verbunden. Bitte überprüfe deine Verbindung und versuche es erneut.",
api_error_service_down: "Die Wunderlist Server haben gerade Probleme. Bitte probiere es erneut und schaue auf status.wunderlist.com für News.",
api_error_unauthorized: "Du hast keinen Zugang das zu sehen. Bitte probiere dich aus- und wieder einzuloggen.",
api_error_unknown: "Die Wunderlist Server haben gerade Probleme. Bitte probiere es erneut und schaue auf status.wunderlist.com für News.",
api_error_validation_error: "Sorry, anscheinend gab es eine ungültige Eingabe (Error 422)",
api_error_validation_error_unable_to_signup: "Wir konnten keinen Account für diese E-Mail Adresse erstellen. Bitte probiere es erneut.",
button_back: "Zurück",
button_cancel: "Abbrechen",
button_confirm: "Bestätigen",
button_download: "Herunterladen",
button_change: "Ändern",
button_choose: "Auswählen",
button_connect: "Verbinden",
button_connect_facebook: "Mit Facebook verbinden",
button_continue: "Weiter",
button_copy: "Kopieren",
button_cut: "Ausschneiden",
button_delete: "Löschen",
button_disconnect: "Verbindung trennen",
button_dismiss: "Ausblenden",
button_close: "Schließen",
button_done: "Fertig",
button_edit: "Bearbeiten",
button_edit_list: "Liste bearbeiten",
button_get_started: "Los geht's",
button_go_back: "Zurück",
button_go_back_sentence: "Zurück",
button_learn_more: "Weitere Informationen",
button_go_back_to_login: "Zurück zu Anmeldung",
button_go_to_web_app: "Zur Web-App",
button_invite_people: "Personen hinzufügen",
button_join_now: "Jetzt registrieren",
button_leave: "Verlassen",
button_log_in: "Anmelden",
button_log_in_with_$: "Mit $ anmelden",
button_log_out: "Abmelden",
button_log_in_facebook: "Mit Facebook anmelden",
button_next: "Weiter",
button_no: "Nein",
button_no_due_date: "Ohne Datum",
button_ok: "OK",
button_paste: "Einfügen",
button_remove: "Entfernen",
button_remove_due_date: "Datum entfernen",
button_remove_reminder: "Erinnerung entfernen",
button_rename_list: "Liste umbenennen",
button_email_list: "Liste per E-Mail versenden",
button_print_list: "Liste drucken",
button_copy_task_uri: "Wunderlist Link kopieren",
button_copy_task_uri_plural_$: "$ Wunderlist Links kopieren",
button_reset_password: "Passwort zurücksetzen",
button_restart_wunderlist: "Wunderlist neustarten",
button_retry: "Wiederholen",
button_save: "Speichern",
button_send: "Senden",
button_sign_up_with_$: "$",
button_sign_up_for_free: "Kostenlosen Account erstellen",
button_sign_up_facebook: "Facebook",
button_support_center: "Support Center",
button_subscribe: "Ja bitte!",
button_try_again: "Erneut versuchen",
button_try_wunderlist: "Wunderlist testen",
button_yes: "Ja",
button_publish: "Veröffentlichen",
button_published: "Veröffentlicht",
button_open_public_list: "Öffentliche Liste öffnen",
button_unpublish_list: "Liste nicht mehr veröffentlichen",
button_sort: "Sortieren",
button_more: "Mehr",
coachmark_all_list_empty: "Du hast bisher keine Einträge hinzugefügt. Leg gleich los.",
coachmark_completed_list_empty: "Du hast noch keine Einträge erledigt. Leg los und erledige einige der Einträge in deinen Listen!",
coachmark_no_search_results: "Keine Suchergebnisse",
coachmark_sharing_invite_friends_heading: "Freunde einladen",
coachmark_sharing_invite_friends_text_$: "Deine Freunde können in der Liste &quot;$&quot; Einträge anlegen, entfernen und erledigen.",
coachmark_sharing_recent_no_contacts_heading: "Keine letzten Kontakte",
coachmark_sharing_recent_no_contacts_text_$: "Gib eine E-Mail ein oder durchsuche deine Kontakte. Sobald sie hinzugefügt wurden, können deine Freunde Einträge in der Liste &quot;$&quot; anlegen, entfernen und erledigen.",
coachmark_assigned_to_me_list_empty: "Dir wurde nichts zugewiesen",
coachmark_starred_list_empty: "Du hast keine wichtigen Einträge",
coachmark_today_list_empty: "Glückwunsch! Du hast keine fälligen oder überfälligen Aufgaben.",
coachmark_week_list_empty: "Du hast keine offenen Aufgaben für die nächsten 7 Tage.",
error_list_not_found: "Die gesuchte Liste konnte nicht gefunden werden.",
error_share_not_created: "Beim Teilen der Liste ist ein Fehler aufgetreten. Probiere es bitte erneut.",
error_task_not_found: "Der gesuchte Eintrag konnte nicht gefunden werden.",
error_page_not_found: "Seite nicht gefunden",
error_title_not_found: "Nicht gefunden",
label_are_you_sure_permanently_delete_item: "Möchtest du diesen Eintrag wirklich für immer löschen?",
label_are_you_sure_permanently_delete_item_plural: "Möchtest du diese Einträge wirklich für immer löschen?",
label_are_you_sure_permanently_delete_X_comment: "Möchtest du diesen Kommentar wirklich für immer löschen?",
label_activity_center: "Aktivitäten",
label_are_you_sure_permanently_delete_$_list: "&quot;$&quot; wird für immer gelöscht werden.",
label_are_you_sure_permanently_delete_$_task: "&quot;$&quot; wird für immer gelöscht.",
label_are_you_sure_permanently_delete_task_plural: "Möchtest du diese Einträge wirklich für immer löschen?",
label_are_you_sure_permanently_delete_$_subtask: "Möchtest du die Teilaufgabe &quot;$&quot; wirklich für immer löschen?",
label_cant_undo: "Diese Aktion kann nicht rückgängig gemacht werden.",
label_completed_tasks_heading: "1 Erledigter Eintrag",
label_$_completed_tasks_heading_plural: "$ Erledigte Einträge",
label_connecting: "Verbinde...",
label_day_0: "So",
label_day_1: "Mo",
label_day_2: "Di",
label_day_3: "Mi",
label_day_4: "Do",
label_day_5: "Fr",
label_day_6: "Sa",
label_delete_file: "Datei löschen",
label_leave_list: "Liste verlassen",
label_delete_list: "Liste löschen",
label_delete_task: "Eintrag löschen",
label_delete_task_plural: "Einträge löschen",
label_delete_subtask: "Teilaufgabe löschen",
label_due_$: "Zu erledigen $",
label_due_on: "Fällig am $",
label_due_date: "Datum",
label_email: "E-Mail",
label_every: "alle",
label_loading: "Lädt...",
label_logging_out: "Wird abgemeldet...",
label_name: "Name",
label_new_list: "Neue Liste hinzufügen",
label_newsletter: "Wunderlist Newsletter",
label_none: "Keine",
label_notification: "Benachrichtigung",
label_oops: "Uuups!",
label_or: "oder",
label_password: "Passwort",
label_relative_date_today: "Heute",
label_relative_date_today_with_date: "Heute, $",
label_relative_date_today_mid_sentence: "heute",
label_relative_date_tomorrow: "Morgen",
label_relative_date_tomorrow_with_date: "Morgen, $",
label_relative_date_tomorrow_mid_sentence: "morgen",
label_relative_date_yesterday: "Gestern",
label_remind_me_at_$: "Erinnere mich um $",
label_reminder: "Erinnerung",
label_reminder_message_$: "Erinnerung: $",
label_repeat_every_day: "Jeden Tag wiederholen",
label_repeat_every_week: "Jede Woche wiederholen",
label_repeat_every_month: "Jeden Monat wiederholen",
label_repeat_every_year: "Jedes Jahr wiederholen",
label_repeat_custom: "Benutzerdefiniert...",
label_repeat_day: "Jeden Tag",
label_repeat_day_$_plural: "Alle $ Tage",
label_repeat_month: "Jeden Monat",
label_repeat_month_$_plural: "Alle $ Monate",
label_repeat_week: "Jede Woche",
label_repeat_week_$_plural: "Alle $ Wochen",
label_repeat_never: "Nie wiederholen",
label_repeat_year: "Jedes Jahr",
label_repeat_year_$_plural: "Alle $ Jahre",
label_reset_password: "Passwort zurücksetzen",
label_rights_reserved: "Alle Rechte vorbehalten",
label_still_fetching_tasks: "Einen Moment, wir synchronisieren deine Listen...",
label_sync: "Synchronisieren",
label_time_hour: "Stunde",
label_time_minute: "Minute",
label_time_am: "Vorm. ",
label_time_day_plural: "Tage",
label_time_week_plural: "Wochen",
label_time_month_plural: "Monate",
label_time_pm: "Nachm.",
label_time_year_plural: "Jahre",
label_update_available: "Eine neue Version ist verfügbar. Möchtest du sie installieren?",
label_update_completed_please_restart: "Die neue Version ist fertig und kann installiert werden. Starte Wunderlist neu um das Update abzuschließen.",
label_assign_to: "Jemanden zuweisen",
label_unassigned: "Nicht zugewiesen",
label_assign_me: "Ich",
label_created_$: "Erstellt $",
label_created_by_$: "Erstellt von $",
label_created_on_$: "Erstellt am $",
label_created_$_by_$: "Erstellt $1 von $2",
label_created_by_$_on_$: "Erstellt von $1 am $2",
label_completed_$: "$ erledigt",
label_by_$: "von $",
label_completed_on_$: "Erledigt am $",
label_completed_$_by_$: "$1 erledigt von $2",
label_completed_by_$_on_$: "Erledigt von $1 am $2",
label_move_to: "Verschieben nach",
label_on: "An",
label_off: "Aus",
login_add_photo_hint: "Lade ein Bild für deinen Wunderlist-Account hoch.",
login_already_have_account: "Anmelden",
login_email_not_valid: "Bitte gib eine gültige E-Mail Adresse ein.",
login_empty_name: "Bitte gib deinen vollen Namen ein.",
login_empty_password: "Bitte gib ein Passwort ein.",
login_empty_email: "Bitte gib deine E-Mail Adresse ein.",
login_enter_name: "Wer bist du?",
login_enter_password: "Du bist fast fertig",
login_enter_password_hint: "Erstelle ein Passwort für deinen Wunderlist Account.",
login_forgot_password: "Passwort vergessen?",
login_forgot_password_heading: "Passwort vergessen?",
login_forgot_password_text: "Keine Sorge. Gib einfach deine E-Mail Adresse ein und lass dir Hilfe zuschicken.",
login_no_account_yet: "Noch nicht registriert?",
login_password_changed: "Passwort erfolgreich geändert.",
login_password_not_match: "Die eingegebenen Passwörter stimmen nicht überein.",
login_password_not_valid: "Bitte gib ein gültiges Passwort ein.",
login_password_reset_email_has_been_sent: "Bitte schau in deinem E-Mail Postfach nach.",
login_reset_password_heading: "Erstelle dein neues Passwort.",
login_reset_password_success: "Klicke auf den Button und melde dich dann wieder in Wunderlist an.",
login_reset_password_success_heading: "Dein Passwort wurde erfolgreich geändert.",
login_password_too_short: "Ein Passwort muss mindestens 8 Zeichen, 2 klein geschriebene, groß geschriebene, Nummern, oder andere Zeichen haben und darf nicht den Anfang deiner E-Mail Adresse beinhalten.",
login_sign_up: "Kostenlosen Account erstellen",
login_create_new_account: "Kostenlosen Account erstellen",
login_want_to_try_again: "Erneut versuchen?",
login_accept_terms: "Mit der Registrierung stimmst du unseren $1 und $2 zu.",
logout_timeout_title: "Synchronisationsfehler",
logout_timeout_text: "Es gab ein Problem bei der Synchronisierung deiner letzten Änderungen, bitte probiere es erneut.",
label_onboarding_choose_your_first_lists: "Wähle deine Listen",
label_onboarding_choose_your_first_lists_description: "Wofür möchtest du Wunderlist nutzen? Hier ist eine Auswahl für den Start.",
label_onboarding_groceries_list: "Einkaufsliste",
label_onboarding_movies_list: "Filme",
label_onboarding_travel_list: "Reisen",
label_onboarding_work_list: "Arbeit",
label_onboarding_family_list: "Familie",
label_onboarding_private_list: "Privat",
label_onboarding_tooltip_firstlist_desktop: "Klicke hier um eine Liste zu erstellen.",
label_onboarding_tooltip_firsttask: "Erstelle deine erste Aufgabe.",
label_onboarding_tooltip_share: "Füge Personen hinzu um zu kollaborieren und mehr zu erreichen.",
contextual_mark_as_multiple: "Markieren...",
contextual_mark_as_completed: "Als &quot;Erledigt&quot; markieren",
contextual_mark_as_starred: "Als &quot;Wichtig&quot; markieren",
contextual_mark_as_notcompleted: "Als &quot;Nicht Erledigt&quot; markieren",
contextual_mark_as_unstarred: "Als &quot;Nicht wichtig&quot; markieren",
contextual_new_list_from: "Neue Liste mit Eintrag erstellen",
contextual_new_list_from_$_plural: "Neue Liste mit $ Einträgen erstellen",
contextual_move_item_to_list: "Eintrag verschieben nach...",
contextual_move_item_to_list_plural: "Einträge verschieben nach...",
contextual_assign_item_to_list: "Eintrag zuweisen...",
contextual_assign_item_to_list_plural: "Einträge zuweisen...",
menubar_delete_task: "Ausgewählten Eintrag löschen",
menubar_delete_task_plural: "Ausgewählte Einträge löschen",
notifications_desktop_enable_heading: "Möchtest du Desktop-Benachrichtigungen sehen?",
notifications_desktop_enable_systray_context_menu: "Desktop-Benachrichtigungen aktiveren",
notifications_desktop_disable_systray_context_menu: "Desktop-Benachrichtigungen deaktiveren",
notifications_no_notifications: "Hier gibt es nichts zu sehen...",
notifications_no_notifications_message: "Teile deine Listen um Aktivitäten zu sehen.",
notifications_event_accept: "Akzeptieren",
notifications_event_accepted: "Akzeptiert",
web_upgrade_ie9_not_supported: "Sorry, Wunderlist unterstützt Internet Explorer 9 nicht. Bitte installiere das Update zu $ oder $.",
web_upgrade_to_chrome: "Chrome",
web_upgrade_to_ie10: "Internet Explorer 10",
web_enable_touch_styles_alert: "Anscheinend nutzt du einen Touchscreen. Möchtest du die für Touchscreens optimierte Oberfläche nutzen? Du kannst es auch später in den Einstellungen ändern.",
web_setting_enable_touch_for_$: "Touchfunktion aktivieren für: $",
web_settings_text_refresh_may_be_required: "Bitte neu laden",
rate_label: "Gefällt dir Wunderlist?",
rate_app_heading: "Gefällt dir Wunderlist?",
rate_app_message_web_chrome: "Teile es mit der Welt, indem du Wunderlist im Chrome Web Store bewertest.",
rate_app_button_later: "Später erinnern",
rate_app_button_no: "Nein Danke",
rate_app_button_yes: "Bewerte Wunderlist",
placeholder_add_due_today_to_inbox: "Eintrag für heute zum “Eingang” hinzufügen...",
placeholder_add_list: "Liste hinzufügen...",
placeholder_list_name: "Listenname",
placeholder_add_note: "Notiz hinzufügen...",
placeholder_add_subtask: "Teilaufgabe hinzufügen",
placeholder_add_starred_to_inbox: "Wichtigen Eintrag zum “Eingang” hinzufügen...",
placeholder_add_task_to_$: "Einen Eintrag in &quot;$&quot; hinzufügen...",
placeholder_add_to_inbox: "Eintrag zum “Eingang” hinzufügen",
placeholder_new_list: "Neue Liste",
placeholder_remind_me: "Erinnere mich",
placeholder_search: "Suche...",
placeholder_sharing_search: "Name oder E-Mail-Adresse...",
placeholder_set_due_date: "Datum auswählen",
browser_outdated_heading: "Sorry, Wunderlist unterstützt deinen Browser nicht. Bitte installiere eine neuere Version.",
browser_outdated_update: "Bitte installiere die neueste Version deines Browsers",
browser_outdated_explanation: "Sorry, Wunderlist unterstützt deinen Browser nicht. Bitte installiere die neueste Version deines Browsers.",
prenamed_list_movies: "Filme",
prenamed_list_private: "Privat",
prenamed_list_shopping: "Einkaufsliste",
prenamed_list_wishlist: "Wunschliste",
prenamed_list_work: "Arbeit",
prenamed_list_read_later: "Später lesen",
settings_account_change_email: "E-Mail ändern",
settings_account_change_password: "Passwort ändern...",
settings_account_delete_confirmation: "Gib ein: &quot;Ich bin sicher&quot;",
settings_account_delete_confirmation_text: "Ich bin sicher",
settings_account_drop_image: "Bild hier hereinziehen",
settings_account_connect_facebook_account: "Verbinde deinen Account mit Google oder Facebook um das Anmelden leichter zu machen",
settings_general_12_hour: "12 Stunden",
settings_general_24_hour: "24 Stunden",
settings_general_confirm_deletion: "Bestätigungsdialoge",
settings_general_create_new_tasks: "Einträge hinzufügen",
settings_today_smart_list_visible_tasks: "Woche &amp; Heute Einstellungen",
settings_today_smart_list_show_all_tasks: "Alle Einträge anzeigen",
settings_today_smart_list_show_current_user_tasks: "Nur mir zugewiesene und private",
settings_general_date_format: "Datumsformat",
settings_general_language: "Sprache",
settings_general_start_of_week: "Anfang der Woche",
settings_general_start_of_week_sunday: "Sonntag",
settings_general_start_of_week_saturday: "Samstag",
settings_general_start_of_week_monday: "Montag",
settings_general_sound_task_completion: "Ton für das Erledigen von Aufgaben aktivieren",
settings_general_sound_new_notifications: "Ton für Benachrichtigungen aktivieren",
settings_general_print_done_tasks: "Erledigte Einträge drucken",
settings_general_starred_tasks_to_top: "Stern bewegt Eintrag nach oben",
settings_general_tasks_bottom: "Unten",
settings_general_tasks_top: "Oben",
settings_automatic_reminders: "Automatische Erinnerungen",
settings_heading_team: "Business",
settings_heading_about: "Über",
settings_heading_account: "Account",
settings_heading_general: "Allgemein",
settings_heading_notification: "Benachrichtigungen",
settings_heading_shortcuts: "Shortcuts",
settings_heading_sidebar: "Smart Listen",
settings_imprint: "Impressum",
settings_visit_website: "Besuche uns",
settings_get_help: "Zum Support-Forum",
settings_notifications_notify_me_of_important_events_mobile: "Benachrichtige mich über wichtige Aktivitäten per:",
settings_notifications_notify_me_on_text: "Bleibe auf dem Laufenden und lass dich benachrichtigen, wenn Einträge erstellt oder abgehakt werden. Du kannst auswählen für welche Listen du Benachrichtigungen erhalten willst im jeweiligen Menü der Liste.",
settings_sidebar_smart_lists_auto: "Auto",
settings_sidebar_smart_lists_hidden: "Versteckt",
settings_sidebar_smart_lists_visible: "Sichtbar",
settings_sync_full: "Jetzt synchronisieren",
settings_account_account_backup: "Daten Backup",
settings_account_restore_backup: "Backup Daten importieren",
settings_account_backup_description: "Die Backup Datei enthält alle deine Listen, Aufgaben, Teilaufgaben, Notizen und Erinnerungen. Sie enthält keine Listen die mit dir geteilt wurden, Dateianhänge, Kommentare oder Einstellungen der App.",
settings_account_data_is_being_processed: "Einen Moment, dein Backup wird verarbeitet.",
settings_account_import_complete: "Dein Backup wurde verarbeitet. Du solltest Kopien deiner Backup-Listen jetzt unter deinen existierenden Listen sehen.",
settings_account_change_password_error: "Es gab ein Problem beim Speichern deines Passwortes. Bitte versuche es erneut.",
settings_account_click_to_download_backup: "Zum Speichern klicken",
settings_account_create_backup: "Backup erstellen",
settings_account_current_password: "Aktuelles Passwort",
settings_account_delete_account: "Account löschen",
settings_account_delete_account_confirm: "Möchtest du wirklich deinen Account löschen?",
settings_account_delete_account_confirm_text: "Das Löschen des Accounts wird alle Listen und Einträge komplett löschen und kann nicht rückgängig gemacht werden.",
settings_account_fetching_data: "Daten werden gesammelt..",
settings_account_new_password: "Neues Passwort",
settings_account_repeat_new_password: "Neues Passwort wiederholen",
settings_account_right_click_and_save_as: "Rechtsklick zum Speichern",
settings_third_party_libraries: "Lizenzen",
settings_background_credits: "Hintergrund Credits",
settings_notifications_email_enabled: "E-Mail-Benachrichtigungen",
settings_notifications_desktop_enabled: "Desktop-Benachrichtigungen",
settings_notifications_push_enabled: "Push-Benachrichtigungen",
settings_show_completed_tasks_mobile: "Erledigte Einträge anzeigen",
settings_privacy_policy: "Datenschutzbestimmungen",
settings_shortcuts_arrow_keys: "Pfeiltasten",
settings_shortcuts_delete_item: "Ausgewählte Liste oder Eintrag löschen",
settings_shortcuts_mark_done: "Ausgewählte Aufgaben als 'Erledigt' markieren",
settings_shortcuts_mark_starred: "Ausgewählte Aufgaben als 'Wichtig' markieren",
settings_shortcuts_new_list: "Neue Liste hinzufügen",
settings_shortcuts_new_task: "Einen neuen Eintrag hinzufügen",
settings_shortcuts_open_all_smart_list: "'Alle' Smart List öffnen",
settings_shortcuts_open_assigned_smart_list: "&quot;Mir zugewiesen&quot; Smart List öffnen",
settings_shortcuts_open_done_smart_list: "'Erledigt' Smart List öffnen",
settings_shortcuts_open_inbox: "Zum Eingang",
settings_shortcuts_open_preferences: "Einstellungen öffnen",
settings_shortcuts_open_search: "Suche auswählen",
settings_shortcuts_open_starred_smart_list: "'Wichtig' Smart List öffnen",
settings_shortcuts_open_today_smart_list: "'Heute' Smart List öffnen",
settings_shortcuts_open_week_smart_list: "'Woche' Smart List öffnen",
settings_shortcuts_reset: "Zurücksetzen",
settings_shortcuts_select_all_tasks: "Alle Einträge auswählen",
settings_shortcuts_show_more: "Mehr anzeigen",
settings_shortcuts_hide: "Ausblenden",
settings_shortcuts_show_notifications: "Zeige Aktivitäten",
settings_shortcuts_step_through_list: "Durch Listen gehen",
settings_shortcuts_step_through_task: "Zwischen Einträgen wechseln",
settings_terms_of_use: "AGB",
settings_website_wunderlist: "Wunderlist Webseite",
settings_account_header_free: "Kostenloser",
settings_account_header_account_$: "$ Account",
settings_account_pro_description: "Hänge Dateien an deine Aufgaben an und weise sie Kollegen zu. Zusammenarbeit im Team war noch nie so einfach!",
settings_account_register_wunderlist_description: "Erstelle einen kostenlosen Wunderlist Account um deine Listen auf allen Geräten zu synchronisieren.",
settings_manage_subscription_button: "Abonnement verwalten",
settings_account_header_pro: "Pro",
settings_account_header_pro_account_$: "Hurra, du bist $!",
settings_account_header_pro_description: "Mit Wunderlist Pro hast du all deine Projekte im Griff. Lade deine Freunde und Kollegen ein um deine Ziele zu erreichen.",
settings_upgrade_to_pro_label: "Werde $",
settings_label_pro_account: "Pro Account",
settings_label_purchased_from_$: "Gekauft in: $",
settings_label_purchased_from_$_by_$: "Gekauft von $1 durch: $2",
settings_label_expires_in_$: "Läuft ab in $",
setting_label_next_billing_date: "Nächste Rechnung:",
setting_label_cancel_subscription: "Abo kündigen",
setting_heading_cancel_subscription: "Möchtest du wirklich dein Wunderlist Pro Abo kündigen?",
setting_description_cancel_subscription: "Du wirst weiterhin Zugang zu deinen Daten haben, aber sobald dein Abo abgelaufen ist kannst du nur noch die kostenlosen Wunderlist Funktionen nutzen.",
setting_label_cancel_subscription_success: "Dein Abo wurde erfolgreich gekündigt.",
settings_label_invoices: "Rechnungen",
settings_label_become_a_pro: "Werde Pro",
settings_payment_info_expires_$_relative: "Läuft $ ab",
settings_payment_info_expires_$_absolute: "Läuft ab in $1 Tagen: $2",
settings_manage_subscription_error: "Leider ist beim Verwalten deines Abonnements ein Fehler aufgetreten.",
group_billing_packages_title: "Preise für jedes Unternehmen",
group_billing_packages_text: "Wunderlist für Unternehmen bietet dir alle Funktionen die du brauchst um besser im Team zu arbeiten, zu einem passenden Preis. Wähle einfach den Preis für dein Unternehmen.",
group_billing_plan_table_team_size: "Teamgröße",
group_billing_plan_table_price: "Preis",
group_billing_buy_button_label: "Kaufen",
group_billing_$_off: "$ weniger",
group_billing_larger_team_$: "Seid ihr ein größeres Team? $",
group_billing_contact_us: "Schreibe uns!",
group_billing_downgrade_error_$_$: "Um zu einem $1 Mitglieder Abo zu wechseln, musst du $2 Kollegen aus dem aktuellen Abo entfernen.",
group_billing_manage_team: "Klicke hier um dein Team zu verwalten.",
group_billing_button_label_manage: "Verwalten",
group_billing_team_plan_title: "Dein Wunderlist für Unternehmen Abonnement",
group_billing_team_plan_text: "Wunderlist für Unternehmen wächst zusammen mit deinem Team. Mitglieder hinzufügen ist leicht, gib einfach unten die E-Mail Adressen ein.",
group_billing_upgrade_button_label: "Teamaccount ändern",
group_billing_upgrade_plan_button_label: "Upgrade",
group_billing_Downgrade_plan_button_label: "Downgrade",
group_billing_view_plans_button_label: "Pakete ansehen",
group_billing_manage_team_header: "Benutzer verwalten",
group_billing_email_address_input_placeholder: "E-Mail Adresse",
group_billing_manage_count_$_of_$: "$1 von $2",
group_billing_cancel_team_plan: "Kündige dein Abonnement",
group_billing_search_coachmark: "Um Mitglieder hinzuzufügen, gib einfach unten die E-Mail Adresse ein. Sie werden dann zu deinem Abo hinzugefügt.",
group_billing_cancel_header: "Möchtest du wirklich dein Wunderlist für Unternehmen Abonnement kündigen?",
group_billing_change_plan_confirmation_$_$_$: "Dein Abonnement zu ändern ist einfach. Wenn du jetzt auf das $1 Mitglieder Abo umsteigst, werden dir $2 mit dem nächsten Abrechnung am $3 berechnet. Möchtest du es jetzt umstellen?",
group_billing_cancel_text: "Dein Wunderlist für Unternehmen Abonnement wird zum Ende des Monats auslaufen und nicht verlängert werden.",
error_goup_billing_user_already_pro: "Dein Kollege hat bereits einen Wunderlist Pro Account.",
error_group_billing_wait_subscription_runs_out: "Du musst warten bis dein aktuelles Abonnement abgelaufen ist, bevor du neu kaufen kannst. Es läuft ab am $.",
button_label_buy_wunderlist_for_business: "Gehe zu Wunderlist für Unternehmen",
benefit_payment_service_unavailable: "Unser Bezahlsystem ist derzeit nicht verfügbar, bitte probiere es erneut.",
benefit_name: "Wunderlist Pro",
benefit_header_$: "Werde $",
benefit_header_description: "Werde jetzt noch produktiver bei deiner Arbeit zu Hause und im Büro mit unbegrenztem Zugang zu allen Wunderlist Pro Funktionen.",
benefit_button_buy_monthly: "Monatlich",
benefit_unlimited_subtasks_title: "Unbegrenzte Teilaufgaben",
benefit_unlimited_subtasks_decription: "Teile deine Aufgaben in kleinere produktivere Schritte, ohne Einschränkungen.",
benefit_label_need_more_subtasks: "Brauchst du mehr Teilaufgaben?",
benefit_assign_tasks_title: "Unbegrenztes Zuweisen von Aufgaben",
benefit_assign_tasks_description: "Teile deine Listen und deine Arbeit. Weise so viele Aufgaben wie nötig zu um mit Kollegen noch mehr zu erreichen.",
benefit_backgrounds_update_$: "Werde Wunderlist Pro um diese Wunderlist Pro Hintergründe zu nutzen.",
benefit_files_title: "Unbegrenzte Dateianhänge",
benefit_files_description: "Hänge Dateien jeder Größe an deine Aufgaben und teile sie mit deinen Kollegen.",
benefit_additional_backgrounds_title: "Pro Hintergründe",
benefit_additional_backgrounds_description: "Entdecke 10 wundervolle Pro-Hintergründe um Wunderlist deinem Geschmack anzupassen.",
benefit_coming_soon: "Bald verfügbar",
benefit_assign_become_pro: "Möchtest du mehr Aufgaben zuweisen?",
benefit_button_not_now: "Nicht jetzt",
benefit_label_accept_terms: "Indem du das Wunderlist Pro Abo kaufst, bestätigst du unsere $1 und $2.",
sharing_facebook_apprequest_message_$user_$list: "“$1” möchte die Liste “$2”  mit dir teilen",
sharing_invite: "Freunde einladen",
sharing_invite_friends: "Liste teilen",
sharing_invite_mobile: "Teilen",
sharing_inviting_requires_account: "Erstelle einen kostenlosen Account, um deine Freunde zu Listen einzuladen.",
sharing_leave_action: "Möchtest du diese Liste wirklich verlassen?",
sharing_leave_button: "Verlassen",
sharing_list_members_short: "Mitglieder",
sharing_list_members: "Listenmitglieder",
sharing_list_owner: "Besitzer",
sharing_list_pending_member: "Ausstehend",
sharing_list_not_saved_member: "Nicht gesendet",
sharing_tab_recents: "Letzte",
sharing_shared_with_you_by: "Mit dir geteilt von",
sharing_list_options: "Listenoptionen",
options_do_not_disturb: "Nicht Stören",
smart_list_assigned_to_me: "Mir zugewiesen",
smart_list_conversations: "Diskussionen",
smart_list_all: "Alle",
smart_list_completed: "Erledigt",
smart_list_inbox: "Eingang",
smart_list_starred: "Wichtig",
smart_list_today: "Heute",
smart_list_week: "Woche",
label_tell_friends: "Erzähls weiter",
social_sharing_heading: "Gefällt dir Wunderlist? Erzähl's weiter!",
social_sharing_dialog_headline: "Gefällt dir Wunderlist?",
social_sharing_dialog_danke: "Dankeschön!",
social_sharing_button_later: "Nicht jetzt",
social_sharing_button_no_thanks: "Nein Danke",
social_sharing_button_facebook: "Teilen",
social_sharing_button_follow_us: "Folge uns",
social_sharing_button_like_us: "Werde Fan",
social_sharing_heading_thanks: "Folge uns um immer auf dem Laufenden zu bleiben.",
social_sharing_button_twitter: "Tweet",
general_sharing_placeholder: "Ich nutze Wunderlist, meine schöne und einfache To-Do Liste. Hol sie die jetzt kostenlos auf www.wunderlist.com.",
twitter_sharing_placeholder: "Ich nutze @Wunderlist, meine schöne und einfache To-Do Liste. Hol sie die jetzt kostenlos auf www.wunderlist.com",
tutorial_welcome_notes_title: "Notizen",
tutorial_welcome_notes_text: "Separate Notizen erlauben es dir auch ohne Wunderlist weiterzuschreiben. ",
tutorial_welcome_notifications_title: "Aktivitäten",
tutorial_welcome_notifications_text: "Passe an wie du benachrichtigt werden willst. Wähle aus ob du Einladungen und Neuigkeiten aus geteilten Listen per E-Mail, Desktop Benachrichtigung oder in den Aktivitäten sehen willst.",
tutorial_welcome_sharing_title: "Freunde einladen",
tutorial_welcome_sharing_text: "Es ist jetzt noch leichter Freunde und Kollegen einzuladen.",
tutorial_welcome_subtasks_title: "Wiederkehrende Aufgaben, Erinnerungen und Teilaufgaben",
tutorial_welcome_subtasks_text: "Wunderlist hat jetzt den brandneuen Detail View in dem du wiederkehrende Aufgaben, Teilaufgaben und Erinnerungen anlegen kannst.",
tutorial_welcome_user_title: "Es dreht sich alles um dich!",
tutorial_welcome_user_text: "Ändere deine Einstellungen, wähle einen Hintergrund und passe Wunderlist an dich an.",
tutorial_welcome_newsletter_subscribe: "Benachrichtige mich bei wichtigen Wunderlist-Updates und Neuigkeiten per E-Mail.",
tutorial_feature_pro_title: "Wunderlist Pro Features",
share_list_email_signature: "Verschickt mit Wunderlist. Verfügbar für dein Smartphone, Tablet und Computer - www.wunderlist.com.",
userbar_$_unsynced_item: "$ unsynchronisierter Eintrag",
userbar_$_unsynced_item_plural: "$ unsynchronisierte Einträge",
userbar_account_settings: "Account-Einstellungen",
userbar_change_background: "Hintergrund ändern",
userbar_last_synced_$: "Zuletzt synchronisiert $",
userbar_no_internet_connection: "Offline",
userbar_preferences: "Einstellungen",
userbar_sync_in_progress: "Synchronisiert...",
whatsnew_title: "Das ist neu",
whatsnew_1_title: "Öffentliche Listen",
whatsnew_1_description: "Erstelle eine Liste von Einträgen und mache sie für jeden sichtbar.",
whatsnew_2_title: "Echtzeit-Synchronisation",
whatsnew_2_description: "Hält alle deine Listen sofort auf dem Laufenden, egal wo du gerade bist.",
whatsnew_3_title: "Schneller durch Design",
whatsnew_3_description: "Ein intuitiveres Design, das noch leichter und schneller ist als je zuvor.",
whatsnew_4_title: "Teile Listen im Handumdrehen",
whatsnew_4_description: "Sofort wenn du eine Liste erstellst kannst du sie mit Kollegen oder der Familie teilen.",
whatsnew_5_title: "Beginne eine Unterhaltung",
whatsnew_5_description: "Kommentare sind jetzt kostenlos damit du mit Freunden und Kollegen immer auf dem Laufenden bleiben kannst.",
whatsnew_6_title: "Überarbeitete Apps",
whatsnew_6_description: "Mehr als 60 weitere Verbesserungen für dein Smartphone, Tablet und Computer.",
whatsnew_7_title: "Suche &amp; Hashtags auf Smartphones",
whatsnew_7_description: "Sammle und finde sofort die Informationen zu deinen Aufgaben, auch unterwegs.",
files_requires_account: "Erstelle ein kostenloses Konto um eine Datei anzuhängen.",
label_add_new_file: "Datei hinzufügen",
file_uploaded_unsuccessfully: "Das Hochladen von $ ist fehlgeschlagen. Bitte probiere es erneut.",
file_uploaded_failed: "Upload fehlgeschlagen. Bitte versuche es erneut.",
file_uploaded_failed_deleted: "Hochladen von $ fehlgeschlagen, weil es auf deiner Festplatte nicht mehr existiert.",
label_are_you_sure_permanently_delete_$_file: "Bist du dir sicher, dass du die Datei &quot;$&quot; permanent aus Wunderlist entfernen möchtest?",
label_open_file: "Öffnen",
upload_file_was_not_synced_yet: "Bitte synchronisiere erst, bevor du die Datei hochlädst.",
upload_file_not_synced_yet: "Nicht synchronisiert",
title_start_pause_recording_audio: "Start/Pause für Audioaufnahme",
title_play_recorded_audio: "Audioaufnahme abspielen",
title_clear_recorded_audio: "Audioaufnahme zurücksetzen",
title_upload_recorded_audio: "Audioaufnahme hochladen",
placeholder_add_comments: "Kommentar hinzufügen …",
placeholder_reply: "Antworten...",
button_label_go_pro_to_comment: "Werde Pro um Kommentare hinzuzufügen",
comment_request_failed: "Sorry, die Kommentare konnten nicht geladen werden. Bitte probiere es erneut.",
comment_load_earlier: "Mehr Kommentare anzeigen",
coachmark_no_current_comments: "Möchtest du etwas sagen? Beginne eine Unterhaltung indem du den ersten Kommentar schreibst.",
coachmark_comments_not_available: "Leider konnten die vorherigen Kommentare nicht geladen werden. Bitte probiere es gleich noch einmal. ",
notification_$_commented_on_$: "$1 hat $2 kommentiert",
notification_$_and_$_commented_on_$: "$1 und $2 haben $3 kommentiert",
notification_$_and_$_others_commented_on_$: "$1 und $2 andere haben $3 kommentiert",
non_pro_trial_free_limit_reached: "Du hast das Limit der kostenlosen Version erreicht.",
non_pro_trial_write_next_comment_$: "Du kannst $ einen weiteren Kommentar schreiben.",
non_pro_trial_upload_next_file_$: "Du kannst $ eine weitere Datei hochladen.",
non_pro_trial_assign_next_to_do_$: "Du kannst $ eine weitere Aufgabe zuweisen.",
voiceover_add_file_dropbox_button: "Dropbox",
voiceover_folder_options_button: "Listenordner-Optionen",
voiceover_share_list: "Liste teilen",
voiceover_sharing_remove_button_$_label: "Entferne $",
voiceover_sidebar_list_$_items_overdue: "$ überfällige Einträge",
systray_show_wunderlist: "Wunderlist einblenden",
systray_quit: "Beenden",
check_for_updates: "Nach Updates suchen",
app_up_to_date: "Wunderlist ist auf dem neusten Stand!",
checking_for_updates: "Nach Updates suchen...",
button_signup_or_login: "Kostenlosen Account erstellen, oder anmelden.",
button_it_is_completely_free: "Komplett kostenlos",
label_free_download_for_platforms: "Kostenlos verfügbar für iPhone, iPad, Android, Windows and Mac",
label_wunderlist_to_get_things_done: "Über 12 Millionen Menschen nutzen Wunderlist um Ihre Aufgaben zu erledigen.",
label_people_who_use_wunderlist: "Schau wer schon Wunderlist nutzt:",
label_wunderlist_uses: "Ob du dein Unternehmen organisierst, eine Einkaufsliste hast oder einfach nur deine täglichen Aufgaben in den Griff bekommen willst, Wunderlist ist die beste To-Do Liste für dich, dein Team und deine Familie.",
label_install_browser_extension: "Browser Erweiterung installieren",
label_install_chrome_browser_extension: "Installiere die Chrome Browser Erweiterung",
label_newsletter_signup: "Für den Newsletter anmelden",
label_know_upcoming_features: "Lass dich als Erster über neue Funktionen informieren",
label_learn_more_about_wunderlist: "Finde mehr über Wunderlist heraus",
label_learn_more: "Weiterlesen...",
label_your_email_address: "Deine E-Mail Adresse",
button_subscribe_to_newsletter: "Abonnieren",
button_sending_subscribe_to_newsletter: "Senden …",
iyf4_usermenu_label: "Hol dir Wunderlist Pro kostenlos",
iyf4_notification_label: "Empfiehl Wunderlist deinen Freunden und werde kostenlos Pro-Nutzer für bis zu 12 Monate!",
iyf4_notification_button_label_var_a: "Jetzt einladen",
iyf4_notification_button_label_var_b: "Freunde einladen",
iyf4_notification_button_label_var_c: "Hol dir Wunderlist Pro kostenlos",
iyf4_notification_button_label_var_d: "Erzähle anderen von Wunderlist Pro",
iyf4_dialog_invite_headline_$: "Empfiehl Wunderlist deinen Freunden und werde kostenlos Pro-Nutzer für bis zu $!",
iyf4_dialog_invite_headline_incentive: "12 Monate kostenlos",
iyf4_dialog_invite_incentive_$: "$ Wunderlist, geben wir dir 1 Monat Wunderlist Pro kostenlos (bis hin zu 12 Monaten)",
iyf4_dialog_invite_incentive_terms: "Für jeden Freund der sich registriert für",
iyf4_dialog_tweet: "Ich organisiere mein Leben mit Wunderlist. Hol dir jetzt einen Monat Wunderlist Pro kostenlos hier: ",
iyf_notification_label: "Empfiehl Wunderlist deinen Freunden und werde kostenlos Pro-Nutzer für bis zu 12 Monate!",
iyf_notification_button_label: "Werde Pro!",
iyf_dialog_step1_headline: "Hol dir einen kostenlosen Pro Account",
iyf_dialog_step1_subheadline: "in 3 kurzen Schritten",
iyf_dialog_step1_instruction1_headline: "Lade jetzt deine Freunde ein",
iyf_dialog_step1_instruction1_subheadline: "per Facebook, Twitter oder E-Mail",
iyf_dialog_step1_instruction2_headline: "Deine Freunde registrieren sich",
iyf_dialog_step1_instruction2_subheadline: "warte bis sie sich in Wunderlist registriert haben",
iyf_dialog_step1_instruction3_headline: "Viel Spaß mit deinem kostenlosen Pro Account",
iyf_dialog_step1_instruction3_subheadline: "1 Monat für jeden Freund der die Einladung annimmt",
iyf_dialog_step1_instruction3_subheadline_$_plural: "1 Monat wenn sich $ Freunde registrieren",
iyf_dialog_step1_next_button: "Jetzt einladen",
iyf_dialog_step2_subheadline: "um deinen kostenlosen Pro Account zu bekommen",
iyf_dialog_step2_divider_label: "Teile diesen Link",
iyf_dialog_share_on_facebook: "Auf Facebook teilen",
iyf_dialog_post_on_twitter: "Auf Twitter teilen",
iyf_dialog_email_placeholder: "E-Mail Adresse eingeben...",
iyf_dialog_more_placeholder: "Einen weiteren...",
iyf_dialog_step3_headline: "Danke fürs Teilen",
iyf_dialog_step3_subheadline: "Warte bis sich deine Freunde registriert haben",
iyf_dialog_step3_success_headline: "Einladungen erfolgreich verschickt",
iyf_dialog_step3_success_subheadline: "Wir sagen dir Bescheid sobald der Pro Account verfügbar ist.",
iyf_dialog_step3_invite_more: "Lade noch mehr Leute ein",
meta_title: "Wunderlist 2: Deine schöne und einfache To-Do Liste",
meta_description: "Mehr als 12 Millionen Menschen benutzen Wunderlist bereits, um ihre Aufgaben und To-Do Listen zu erledigen. Wunderlist ist die beste To-Do Liste für dich, dein Team und deine Familie.",
meta_keywords: "6wunderkinder, produktivität, kollaboration, aufgabenverwaltung, task manager, to-do, aufgaben, organisieren, planen, verwalten, zeitmanagement, erinnerungen, teilaufgaben, projektmanagement, einkaufsliste, filmliste",
enable_desktop_notifications_text: "Klicke 'Bestätigen' und 'Erlauben' in deinem Browser, um Desktop-Benachrichtigungen zu aktivieren",
notification_add_to_browser: "Wunderlist ist nur einen Klick entfernt. Nutze jetzt die Wunderlist Web App in deinem Browser.",
notification_add_extension_to_browser: "Speichere jetzt deine Lieblings-Webseiten direkt in Wunderlist. Installiere dir dazu einfach die Wunderlist Chrome-Erweiterung.",
button_add_to_chrome: "Zu Chrome hinzufügen",
button_add_to_store_added: "Hinzugefügt",
aria_activity_center_hint: "Aktivitäten. Drücke ESC zum Schließen",
aria_exit_search: "Suche schließen",
aria_search: "Suche",
aria_sort_list: "Liste sortieren",
aria_thank_you: "Wir hoffen unsere barrierefreien Funktionen funktionieren für dich. Bitte sende uns dein Feedback an support@wunderlist.com. Vielen Dank, dass du Wunderlist nutzt!",
aria_user_menu_button: "Nutzermenü",
aria_user_menu_hint: "Nutzer-Menü. Drücke ESC um es zu schließen.",
aria_assign_to_$: "An $ zuweisen",
aria_list_$_with_$_items: "$1, $2 Einträge",
aria_more_options_via_tab: "Press the tab key for more options.",
aria_has_attachments: "Has attachments.",
aria_has_comments: "Has comments.",
aria_assigned_to_$: "Assigned to $",
aria_period_label: "Period",
aria_note_fullscreen: "Open note in fullscreen.",
aria_subtask: "Subtask",
aria_press_enter_to_edit: "Press enter to edit.",
aria_subtask_navigation_info: "Use the arrow keys to navigate between subtasks.",
aria_file_navigation_info: "Use the arrow keys to navigate between files.",
aria_press_$_to_complete: "Press $ to complete.",
aria_press_$_to_delete: "Press $ to delete.",
momentjs_months: "Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember",
momentjs_monthsShort: "Jan_Febr_Mrz_Apr_Mai_Jun_Jul_Aug_Sept_Okt_Nov_Dez",
momentjs_weekdays: "Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag",
momentjs_weekdaysShort: "So_Mo_Di_Mi_Do_Fr_Sa",
momentjs_weekdaysMin: "So_Mo_Di_Mi_Do_Fr_Sa",
momentjs_longDateFormat_LT: "h:mm A",
momentjs_longDateFormat_L: "MM/DD/YYYY",
momentjs_longDateFormat_LL: "MMMM D YYYY",
momentjs_longDateFormat_LLL: "MMMM D YYYY LT",
momentjs_longDateFormat_LLLL: "dddd, MMMM D YYYY LT",
momentjs_calendar_sameDay: "[Heute um] LT",
momentjs_calendar_nextDay: "[Morgen um] LT",
momentjs_calendar_nextWeek: "dddd [um] LT",
momentjs_calendar_lastDay: "[Gestern um] LT",
momentjs_calendar_lastWeek: "[letzten] dddd [um] LT",
momentjs_calendar_sameElse: "L",
momentjs_relativeTime_future: "in %s",
momentjs_relativeTime_past: "vor %s",
momentjs_relativeTime_s: "ein paar Sekunden",
momentjs_relativeTime_m: "einer Minute",
momentjs_relativeTime_mm: "%d Minuten",
momentjs_relativeTime_h: "einer Stunde",
momentjs_relativeTime_hh: "%d Stunden",
momentjs_relativeTime_d: "einem Tag",
momentjs_relativeTime_dd: "%d Tagen",
momentjs_relativeTime_M: "einem Monat",
momentjs_relativeTime_MM: "%d Monaten",
momentjs_relativeTime_y: "einem Jahr",
momentjs_relativeTime_yy: "%d Jahren",
chromebook_splash_headline: "Willkommen zu **Wunderlist für Chrome**",
chromebook_splash_find_out_more_button: "Finde mehr heraus",
chromebook_splash_content_benefit: "Mit Wunderlist behältst du die Übersicht über deine Listen und erreichst so noch mehr.",
chromebook_splash_content_instruction: "**Um Wunderlist Pro kostenlos zu bekommen**, klicke einfach auf den Button unten.",
button_label_publiclist_share: "Teilen",
publish_list_confirmation_$: "Du bist dabei &quot;$&quot; zu veröffentlichen.",
publish_list_confirmation_copy: "Veröffentlichst du diese Liste wird sie für jeden sichtbar, der über den Link verfügt.",
ical_feed_label: "Kalender Feed",
ical_feed_fetching: "Es gab ein Problem beim Abrufen deines Kalendar Feed.",
ical_feed_fetch_error: "Es gab ein Problem beim Abrufen deiner Kalendar Feed.",
ical_feed_description: "Füge diesen Link zu iCal, Google Calendar oder Outlook hinzu, um all deine Aufgaben mit einem einem fälligen Datum in deinem Kalender zu sehen.",
ical_feed_read_more_link: "Finde mehr über Wunderlists Kalender Feed heraus",
folder_title_placeholder: "Neuer Ordner",
folder_menu_create: "Erstelle einen Ordner",
folder_whatsnew_title: "Listenordner",
folder_whatsnew_button_new: "Neu",
folder_whatsnew_popup_description: "Listenordner helfen dir dabei deine verschiedenen Listen zu organisieren.",
button_rename_folder: "Ordner umbenennen",
button_ungroup: "Gruppe auflösen",
button_remove_from_folder_singular: "Aus Ordner entfernen",
label_trash_link: "Gelöschte Listen wiederherstellen"
}
});